!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c0231ad1-6326-4109-9ec4-fe132223bb21",e._sentryDebugIdIdentifier="sentry-dbid-c0231ad1-6326-4109-9ec4-fe132223bb21")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"dd1337ad"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6879],{90017:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironmentDesktop",function(){return t(71013)}])},75981:function(e,n,t){"use strict";t.d(n,{gC:function(){return f},LK:function(){return d},jJ:function(){return p}});var r=t(74985),i=t(74906),o=t(95141),a=t(90171),l=["100-days-of-python","100-days-of-python-promo","add-guest-new-user","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","workspace-always-on-user-reserved-deployments-announcement","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-history-announcement","workspace-tools-databases-postgres-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-sidebar-tour","replit-core-banner"];var c=t(44385),s=t(20538),u=t(9434);var d=function(e,n){return"".concat(e,"-tutorialChallenge-").concat(n)},p=function(e,n){var t,r,o=JSON.parse(i.Z.get(d(e,n),"string")||"{}");if("string"===typeof(r=o).tourName&&"string"===typeof r.url&&(t=o.tourName,l.includes(t)))return o},f=function(e){var n=e.challenge,t=l.find((function(e){return e.toString()===n.tourName}))||"js-4-day-challenge-day-1",i=(0,s.o)(t),d=i.isDone,p=i.isLoading,f=i.setAsDone,h=(0,a.useRouter)();return p?null:(0,r.tZ)(o.zx,{colorway:d?"primary":"positive",onClick:function(){f(),(0,u.j)(u.U3.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:d,iconLeft:(0,r.tZ)(c.Z,{}),size:"big",text:d?"Challenge completed!":"Complete Challenge"})}},3449:function(e,n,t){"use strict";t.d(n,{f:function(){return he}});var r=t(57135),i=t(2272),o=t(96583),a=t(74985),l=t(43312),c=t(60966),s=t(61623),u=t(88965),d=function(e){var n=e.size;return(0,a.BX)("svg",{width:n,height:n,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.tZ)("path",{d:"M12.4809 4.27917C14.3036 2.06288 17.6964 2.06288 19.5191 4.27917V4.27917C20.3693 5.31306 21.6312 5.92075 22.9696 5.94087V5.94087C25.8388 5.98401 27.9542 8.63669 27.3578 11.4435V11.4435C27.0796 12.7529 27.3913 14.1183 28.21 15.1773V15.1773C29.9652 17.4474 29.2102 20.7552 26.6439 22.039V22.039C25.4467 22.6378 24.5735 23.7328 24.256 25.0332V25.0332C23.5755 27.8208 20.5186 29.293 17.9149 28.087V28.087C16.7003 27.5244 15.2997 27.5244 14.0851 28.087V28.087C11.4814 29.293 8.42446 27.8208 7.74396 25.0332V25.0332C7.42651 23.7328 6.55327 22.6378 5.3561 22.039V22.039C2.78981 20.7552 2.03482 17.4474 3.78997 15.1773V15.1773C4.60875 14.1183 4.9204 12.7529 4.64219 11.4435V11.4435C4.0458 8.63669 6.16124 5.98401 9.03038 5.94087V5.94087C10.3688 5.92075 11.6307 5.31306 12.4809 4.27917V4.27917Z",fill:"#F26207",fillOpacity:"0.75"}),(0,a.tZ)("path",{d:"M22.2172 13.2239C22.7054 12.7357 22.7054 11.9443 22.2172 11.4561C21.7291 10.968 20.9376 10.968 20.4495 11.4561L14 17.9056L11.5506 15.4561C11.0624 14.968 10.271 14.968 9.7828 15.4561C9.29465 15.9443 9.29465 16.7357 9.7828 17.2239L13.1161 20.5572C13.6043 21.0454 14.3957 21.0454 14.8839 20.5572L22.2172 13.2239Z",fill:u.TV.white})]})},p=function(e){var n=e.size,t=void 0===n?24:n;return e.hasTooltip?(0,a.tZ)(s.u,{tooltip:"Verified",children:(0,a.tZ)(d,{size:t})}):(0,a.tZ)(d,{size:t})},f=t(50959),h=t(95141),v=t(92369),m=t(6108),g=t(95134),Z=t(53312),b=t(26473),y=t(64309),x=t(17687),w=t(58292),k=t(9694),C=(t(90114),t(89138)),S=t(59989),I=t(78586),T=t(72006),E=t(43119),R=t(71440),G=t(1343),P=t(24635),D=t(50216);function B(){var e=(0,E.Z)(["\n  query ExtensionCoverPage($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        ...TopLevelExtension\n        manifest {\n          ... on ExtensionManifest {\n            supportEmail\n            website\n            longDescription\n            coverImages {\n              path\n              label\n            }\n            features {\n              body\n              image\n              title\n            }\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return B=function(){return e},e}function U(){var e=(0,E.Z)(["\n  mutation ReportExtension($extensionId: String!, $reportMessage: String!) {\n    reportExtension(extensionId: $extensionId, reportMessage: $reportMessage) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return U=function(){return e},e}var A={},L=(0,R.Ps)(B(),G.R9);var O=(0,R.Ps)(U());var _=t(18490),X=t(20563),z=t(27773);function M(){return(0,a.tZ)(b.G,{css:[u.l0.display.flex,u.l0.align.center,u.l0.justify.center,u.l0.height("100%"),u.l0.width("100%")],children:(0,a.tZ)(z.Z,{size:24})})}var j,W=t(31383),N=t(91046),F=t(3689),V=t(36603),H=t(85247),Y=t(44385),q=t(14723),K=t(37268),$=t(28696),Q=t(90602),J=t(11866),ee=t(30504),ne=t(90437),te=t(97766),re=t(21651),ie=t(27352),oe=t(25404),ae=(0,l.iv)([m.gU.nofill,u.l0.color.accentPrimaryStronger,[u.l0.py(8),{margin:"0 -8px"}]]),le=(0,l.iv)([u.l0.px(4),{boxSizing:"content-box"}]);function ce(e){var n=e.extensionId,t=e.name,l=(0,i.Z)(f.useState(!1),2),c=l[0],s=l[1],d=(0,i.Z)(function(e){var n=(0,T.Z)({},A,e);return D.D(O,n)}(),2),p=d[0],v=d[1].loading,m=(0,oe.Z)(),g=m.showConfirm,Z=m.showError,b=f.useCallback(function(){var e=(0,r.Z)((function(e){var t,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,p({variables:{extensionId:n,reportMessage:e}})];case 1:return i=o.sent(),(null===(t=i.errors)||void 0===t?void 0:t.length)?(Z("Something went wrong. We couldn't report this extension. Reach out to extenders@replit.com for help."),[2]):i.data?"Extension"===(null===(r=i.data)||void 0===r?void 0:r.reportExtension.__typename)?(s(!1),g("Thank you for reporting this extension. We will review it shortly."),[2]):(Z(i.data.reportExtension.message),s(!1),[2]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[p,n,g,Z]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(re.u,{isOpen:c,onRequestClose:function(){return s(!1)},children:(0,a.tZ)(ie.Z,{prompt:"Report Extension",onConfirm:b,desc:"Describe your issue with this extension. We will review it shortly.",isDanger:!0,confirmText:"Report ".concat(t),loading:v,onCancel:function(){return s(!1)},type:"text",placeholder:"e.g. 'This extension is buggy'"})}),(0,a.tZ)(h.zx,{size:"small",text:"Report this extension",onClick:function(){return s(!0)},css:[ae,u.l0.color.accentNegativeStronger],iconLeft:(0,a.tZ)(S.Z,{})})]})}function se(e){var n,t=e.extensionId,r=e.name,i=e.supportEmail,o=e.website,l=e.longDescription,s=e.baseUrl,d=e.coverImages,p=e.features,f=null===d||void 0===d?void 0:d[0];return(0,a.BX)(b.G,{children:[(0,a.BX)(b.G,{css:[u.l0.pt(8),u.l0.pb(24),u.l0.colWithGap(24)],children:[s&&f?(0,a.tZ)("img",{src:(0,N.Vh)(s,f.path),alt:f.label,css:[{width:"100%"},u.l0.pb(16),{userSelect:"none",pointerEvents:"none"}]}):null,(0,a.tZ)(c.ZP,{lineBreaks:!0,css:[{p:{fontSize:"14px !important"}}],children:null!==l&&void 0!==l?l:""}),(null===p||void 0===p?void 0:p.length)?(0,a.BX)(b.G,{css:[u.l0.colWithGap(16)],children:[(0,a.tZ)(Q.R,{}),(0,a.tZ)(Z.xv,{variant:"subheadBig",children:"Features"}),(0,a.tZ)(b.G,{css:[u.l0.colWithGap(48)],children:p.map((function(e){return(0,a.BX)(b.G,{css:[u.l0.colWithGap(16)],children:[e.image&&s?(0,a.tZ)("img",{css:[u.l0.borderRadius(4),u.l0.border({color:u.TV.outlineDimmer}),u.l0.maxWidth(600)],src:(0,N.Vh)(s,e.image),alt:"A screenshot describing the feature titled ".concat(e.title)}):null,(0,a.BX)(b.G,{css:[u.l0.colWithGap(8)],children:[(0,a.tZ)(Z.xv,{variant:"subheadDefault",children:e.title}),(0,a.tZ)(c.ZP,{lineBreaks:!0,css:[{p:{fontSize:"14px !important"}}],children:null!==(n=e.body)&&void 0!==n?n:""})]})]},e.title)}))})]}):null]}),(0,a.tZ)(fe,{}),(0,a.BX)(b.G,{css:[u.l0.colWithGap(8),u.l0.pt(16)],children:[(0,a.BX)(b.G,{children:[(0,a.tZ)(Z.xv,{css:[u.l0.fontSize(12),u.l0.fontWeight.medium],multiline:!1,children:"Support"}),(0,a.BX)(b.G,{css:[u.l0.colWithGap(8),u.l0.align.start],children:[i?(0,a.tZ)(v.Z,{size:"small",css:ae,text:i,href:"mailto:".concat(i),iconLeft:(0,a.tZ)(I.Z,{})}):null,(0,a.tZ)(v.Z,{size:"small",css:ae,text:"Replit Support",href:"https://replit.com/support",iconLeft:(0,a.tZ)(x.Z,{})})]})]}),o?(0,a.BX)(b.G,{children:[(0,a.tZ)(Z.xv,{css:[u.l0.fontSize(12),u.l0.fontWeight.medium],multiline:!1,children:"Resources"}),(0,a.tZ)(b.G,{css:[u.l0.colWithGap(8),u.l0.align.start],children:(0,a.tZ)(v.Z,{css:ae,size:"small",text:"Visit developer website",href:o,target:"_blank",iconLeft:(0,a.tZ)(w.Z,{})})})]}):null,(0,a.BX)(b.G,{children:[(0,a.tZ)(Z.xv,{css:[u.l0.fontSize(12),u.l0.fontWeight.medium],multiline:!1,children:"Community Safety"}),(0,a.tZ)(Z.xv,{variant:"small",css:[u.l0.color.foregroundDimmest],maxLines:3,children:"Replit reviews extensions before they are published. If you encounter inappropriate content, please report it."}),(0,a.tZ)(b.G,{css:[u.l0.py(8),u.l0.align.start],children:(0,a.tZ)(ce,{extensionId:t,name:r})})]})]})]})}function ue(e){var n=e.iconSize;return(0,a.tZ)("div",{css:[u.l0.width(4*n/3),u.l0.height(4*n/3),u.l0.borderRadius("full"),u.l0.backgroundColor.greenDimmest,u.l0.display.flex,u.l0.align.center,u.l0.justify.center],children:(0,a.tZ)(Y.Z,{size:n,color:u.TV.greenStrongest})})}function de(e){var n=e.name,t=e.reason,r=q.k.find((function(e){return e.key===n}));return(0,a.BX)(b.G,{css:[u.l0.p(8),u.l0.colWithGap(8)],children:[(0,a.BX)(b.G,{css:[u.l0.rowWithGap(8)],children:[(0,a.tZ)(x.Z,{})," ",(0,a.tZ)(Z.xv,{multiline:!1,children:null===r||void 0===r?void 0:r.friendlyName})]}),(0,a.BX)(b.G,{css:[u.l0.rowWithGap(8),u.l0.py(4)],children:[(0,a.tZ)(ue,{iconSize:12}),(0,a.tZ)(Z.xv,{multiline:!1,children:null===r||void 0===r?void 0:r.description})]}),(0,a.tZ)(b.G,{css:[u.l0.pl(24)],children:(0,a.BX)(Z.xv,{children:["Author notes: ",t]})})]})}function pe(e){var n=e.scopes,t=void 0===n?[]:n,r=e.loading,i=void 0!==r&&r,o=e.showChoice,l=void 0===o||o,c=e.onCancel,s=void 0===c?function(){}:c,d=e.onAccept,p=void 0===d?function(){}:d;return(0,a.tZ)(b.G,{css:[u.l0.p(12)],children:(0,a.tZ)(b.G,{css:[u.l0.p(12),u.l0.border({color:u.TV.outlineDimmer,width:1,style:"solid"}),u.l0.borderRadius(8)],children:(0,a.BX)(b.G,{css:[u.l0.colWithGap(8)],children:[null===t||void 0===t?void 0:t.map((function(e){return(0,a.tZ)(de,{name:e.name,reason:e.reason},e.name)})),t&&0!==t.length?null:(0,a.tZ)(Z.xv,{multiline:!1,children:"This extension requires no permissions"}),l?(0,a.BX)(b.G,{css:[u.l0.display.grid,{gap:u.TV.space8,gridAutoFlow:"column",gridTemplateColumns:"1fr 1fr"},u.l0.width("100%")],children:[(0,a.tZ)(h.zx,{text:"Cancel",onClick:s}),(0,a.tZ)(h.zx,{text:"Accept and Activate",iconLeft:(0,a.tZ)(V.Z,{}),colorway:"primary",onClick:p,loading:i})]}):null]})})})}!function(e){e.NotInstalled="NotInstalled",e.WaitingForPermissions="WaitingForPermissions",e.Installing="Installing",e.Installed="Installed",e.Uninstalling="Uninstalling"}(j||(j={}));var fe=function(){return(0,a.tZ)(b.G,{css:[u.l0.mr(8),{borderBottom:"1px solid ".concat(u.TV.backgroundHighest)},u.l0.width("100%")]})};function he(e){var n,t,l=e.extensionId,c=e.existingInstallationId,s=e.goBackToStore,d=e.installExtension,m=e.uninstallExtension,x=(0,ne.d)(),w=(0,i.Z)(f.useState(x&&c?j.Installed:j.NotInstalled),2),S=w[0],I=w[1];f.useEffect((function(){I(c?j.Installed:j.NotInstalled)}),[c,I]);var E=function(e){var n=(0,T.Z)({},A,e);return P.a(L,n)}({variables:{extensionId:l}}),R=E.data;if(E.loading&&!R)return(0,a.tZ)(M,{});if(!R||"Extension"!==(null===(n=R.extension)||void 0===n?void 0:n.__typename))return(0,a.tZ)("div",{children:"Not found"});var G,D,B=R.extension,U=B.manifest;return"ExtensionManifest"!==(null===U||void 0===U?void 0:U.__typename)?(0,a.tZ)("div",{children:"Manifest error"}):(0,a.tZ)(b.G,{css:[u.l0.maxWidth(te.Y),u.l0.width("100%"),{alignSelf:"center"}],children:(0,a.BX)(b.G,{css:[u.l0.colWithGap(16),u.l0.align.start,u.l0.p(12),u.l0.height("100%")],children:[s?(0,a.tZ)(h.zx,{size:"small",onClick:s,iconLeft:(0,a.tZ)(C.Z,{}),text:"Back to Store"}):(0,a.tZ)(v.Z,{size:"small",iconLeft:(0,a.tZ)(C.Z,{}),text:"Back to Store",href:"/extensions"}),(0,a.BX)(b.G,{css:[u.l0.rowWithGap(16)],children:[(0,a.tZ)(_.I,{size:64,baseUrl:B.url,icon:U.icon}),(0,a.BX)(b.G,{css:[u.l0.colWithGap(8),u.l0.align.start,u.l0.flex.shrink(1)],children:[(0,a.BX)(b.G,{css:[u.l0.flex.shrink(1),u.l0.colWithGap(4)],children:[(0,a.BX)(b.G,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[(0,a.tZ)(Z.xv,{variant:"headerDefault",multiline:!1,children:null!==(G=U.name)&&void 0!==G?G:B.name}),B.isBlessed?(0,a.tZ)(p,{}):null]}),(0,a.tZ)(X.W,{user:B.user,size:24}),(0,a.tZ)(Z.xv,{variant:"text",color:"dimmest",maxLines:2,children:null!==(D=U.description)&&void 0!==D?D:B.description})]}),(0,a.BX)(W.y,{children:[(0,a.BX)(b.G,{css:[u.l0.rowWithGap(4)],children:[(0,a.tZ)(k.Z,{color:u.TV.foregroundDimmer}),(0,a.tZ)(Z.xv,{color:"dimmer",variant:"small",multiline:!1,children:B.installCount})]}),null===(t=U.tags)||void 0===t?void 0:t.slice(0,5).map((function(e){return(0,a.tZ)(g.D,{text:"#".concat(e)},e)}))]})]})]}),B.isBlessed?null:(0,a.BX)(K.Tg,{elevated:!0,css:[u.l0.rowWithGap(16),u.l0.p(16),u.l0.justify.start,u.l0.align.center,u.l0.width("100%"),u.l0.borderRadius(12),u.l0.overflow("hidden")],children:[(0,a.tZ)($.Z,{strokeWidth:8}),(0,a.tZ)(Z.xv,{maxLines:3,css:[u.l0.maxWidth("100%"),u.l0.flex.growAndShrink(1)],children:"This extension has not been verified by the Replit team."})]}),x?(0,a.BX)(a.HY,{children:[(0,a.BX)(b.G,{css:[u.l0.rowWithGap(8),u.l0.width("100%")],children:[null,S===j.Installed&&c?(0,a.tZ)(h.zx,{text:"Deactivate Extension",css:[u.l0.flex.grow(1)],onClick:(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return c?(I(j.Uninstalling),[4,m(c)]):[2];case 1:return e.sent(),[2]}}))}))}):null,S===j.Uninstalling?(0,a.tZ)(h.zx,{text:"Deactivating\u2026",iconLeft:(0,a.tZ)(z.Z,{}),colorway:"grey",css:[u.l0.flex.grow(1)],disabled:!0,loading:!0}):null,S===j.NotInstalled?(0,a.tZ)(h.zx,{text:"Activate Extension for your account",colorway:"primary",css:[u.l0.flex.grow(1)],onClick:(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return U.scopes&&0!==U.scopes.length?[3,2]:(I(j.Installing),[4,d()]);case 1:return e.sent(),[2];case 2:return I(j.WaitingForPermissions),[2]}}))}))}):null,[j.WaitingForPermissions,j.Installing].includes(S)?(0,a.tZ)(h.zx,{text:S===j.WaitingForPermissions?"Accept permissions below\u2026":"Activating\u2026",iconLeft:(0,a.tZ)(z.Z,{}),colorway:"grey",css:[u.l0.flex.grow(1)],disabled:!0,loading:!0}):null]}),S===j.Installed?null:(0,a.BX)(Z.xv,{variant:"small",color:"dimmer",children:["By activating an Extension, you agree to the"," ",(0,a.tZ)("a",{href:ee.Gu.EXTENSIONS_USER_TERMS,children:"User Terms"})]})]}):(0,a.tZ)(v.Z,{text:"Sign up to use this Extension",colorway:"primary",size:"big",stretch:!0,href:"/signup"}),(0,a.tZ)(Q.R,{}),(0,a.tZ)(b.G,{css:[u.l0.width("100%")],children:[j.WaitingForPermissions].includes(S)?(0,a.tZ)(pe,{scopes:null===U||void 0===U?void 0:U.scopes,showChoice:!0,loading:S===j.Installing,onAccept:(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return I(j.Installing),[4,d()];case 1:return e.sent(),[2]}}))})),onCancel:function(){I(j.NotInstalled)}}):(0,a.BX)(y.mQ,{children:[(0,a.tZ)(b.G,{children:(0,a.BX)(y.td,{withUnderline:!0,children:[(0,a.tZ)(y.OK,{iconLeft:(0,a.tZ)(F.Z,{css:le}),children:"Overview"}),(0,a.tZ)(y.OK,{iconLeft:(0,a.tZ)(H.Z,{css:le}),children:"Permissions"})]})}),(0,a.BX)(y.nP,{children:[(0,a.tZ)(y.x4,{children:(0,a.tZ)(se,{supportEmail:U.supportEmail,website:U.website,longDescription:U.longDescription,baseUrl:B.url,coverImages:U.coverImages,features:U.features,name:U.name,extensionId:(0,J.T8)(B.id)})}),(0,a.tZ)(y.x4,{children:(0,a.tZ)(pe,{scopes:U.scopes,showChoice:!1})})]})]})})]})})}},67438:function(e,n,t){"use strict";t.d(n,{l:function(){return o},x:function(){return i}});var r=t(9434),i=function(e){(0,r.j)(r.U3.COURSE_ACTION,e)},o=function(e){(0,r.j)(r.U3.LESSON_ACTION,e)}},49424:function(e,n,t){"use strict";var r=t(74985),i=t(48306),o=t.n(i);t(50959);n.Z=function(e){var n=e.color;return(0,r.BX)("span",{title:"new",className:o().dynamic([["fdefa4fc6e93ac36",[n||"var(--accent-negative-default)"]]]),children:["NEW",(0,r.tZ)(o(),{id:"fdefa4fc6e93ac36",dynamic:[n||"var(--accent-negative-default)"],children:"span.__jsx-style-dynamic-selector{display:inline-block;color:var(--white);background:".concat(n||"var(--accent-negative-default)",";-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-small);font-weight:var(--font-weight-medium);padding:-webkit-calc(var(--space-4)/2)var(--space-4);padding:-moz-calc(var(--space-4)/2)var(--space-4);padding:calc(var(--space-4)/2)var(--space-4);text-align:center;height:-webkit-min-content;height:-moz-min-content;height:min-content}")})]})}},51055:function(e,n,t){"use strict";t.d(n,{S:function(){return P}});var r=t(74985),i=t(88965),o=t(67217),a=t(72006),l=t(43119),c=t(71440),s=t(24635);function u(){var e=(0,l.Z)(["\n  fragment ReplDesktopAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    image\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,l.Z)(["\n  query ReplDesktopAvatarMenu {\n    currentUser {\n      id\n      ...ReplDesktopAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,c.Ps)(u()),h=(0,c.Ps)(d(),f);var v=t(91625),m=t(50959),g=t(61025),Z=t(26473),b=t(54008),y=t(21651),x=t(30937),w=t(59213),k=t(81897),C=t(37268),S=t(6108),I=t(43594),T=t(85247),E=t(1462),R=t(53312),G=(0,g.X)({wrapper:[i.l0.noDragRegion],button:[S.gU.nofill,i.l0.p(4),i.l0.viewStyle,i.l0.reset.button,i.l0.rowWithGap(2),i.l0.align.center,i.l0.color.foregroundDefault,i.l0.cursor.pointer,i.l0.borderRadius(8),{transition:"box-shadow 120ms ease-out",":hover svg":{fill:i.TV.foregroundDefault}}],surface:[i.l0.borderRadius(8),i.l0.minWidth(80),{"& > ul > li:first-of-type":{borderRadius:"10px 10px 0 0"}}],username:[i.l0.ml(8)],menuItem:[i.l0.rowWithGap(8),i.l0.align.center],accountModal:[i.l0.overflow("auto"),i.l0.height("100%")],appVersionWrapper:[i.l0.py(4),i.l0.px(8),i.l0.flex.row,i.l0.justify.spaceBetween,i.l0.border({color:i.TV.outlineDimmer,width:1,style:"solid",direction:"top"})]});function P(e){var n=e.showName,t=(0,m.useState)(!1),l=t[0],c=t[1],u=(0,m.useState)(!1),d=u[0],f=u[1],g=function(e){var n=(0,a.Z)({},p,e);return s.a(h,n)}().data,S=null===g||void 0===g?void 0:g.currentUser;if(!S)return null;var P=[{label:"Home",icon:(0,r.tZ)(I.Z,{}),onAction:function(){w.X.openExternalUrl("/"),c(!1)}},{label:"Account",icon:(0,r.tZ)(T.Z,{}),onAction:function(){f((function(e){return!e})),c(!1)}},{label:"Log out",icon:(0,r.tZ)(E.Z,{}),onAction:function(){w.X.logout()}}];return(0,r.BX)(Z.G,{css:G.wrapper,children:[(0,r.BX)(k.x,{isOpen:l,onOpenChange:c,placement:"bottom start",label:"Account options",noArrow:!0,children:[(0,r.BX)("button",{onClick:function(){c((function(e){return!e}))},css:G.button,children:[(0,r.tZ)(o.q,{size:24,src:(null===S||void 0===S?void 0:S.image)||null,username:(null===S||void 0===S?void 0:S.username)||""}),n?(0,r.BX)(Z.G,{css:G.username,className:"username",children:["@",null===S||void 0===S?void 0:S.username]}):null,(0,r.tZ)(v.Z,{color:i.TV.foregroundDimmest,size:12})]}),(0,r.BX)(C.Tg,{elevated:!0,css:G.surface,background:"higher",children:[(0,r.tZ)(b.v2,{label:"Account options",onAction:function(e){var n=P[parseInt(e,10)];n&&n.onAction()},children:P.map((function(e,n){return(0,r.tZ)(b.ck,{"aria-label":e.label,children:(0,r.BX)(Z.G,{css:G.menuItem,children:[e.icon,(0,r.tZ)(R.xv,{children:e.label})]})},n)}))}),(0,r.BX)(Z.G,{css:G.appVersionWrapper,children:[(0,r.tZ)(R.xv,{color:"dimmer",variant:"small",children:"Version"}),(0,r.tZ)(R.xv,{color:"dimmer",variant:"small",children:w.X.getVersion()})]})]})]}),(0,r.tZ)(y.u,{isOpen:d,onRequestClose:function(){return f(!1)},maxWidth:872,elevation:"root",skipTransition:!0,css:G.accountModal,children:(0,r.tZ)(x.Z,{})})]})}},16094:function(e,n,t){"use strict";t.d(n,{Z:function(){return de}});var r=t(72006),i=t(4405),o=t(2272),a=t(9970),l=t(74985),c=t(13495),s=t(7446),u=t(92585),d=t(52060),p=t(60200),f=t(60538),h=t(25404),v=t(5629),m=t(88149),g=t(63743),Z=t(84730),b=t(56123),y=t(16296),x=t(6108),w=t(54008),k=t(21651),C=t(90393),S=t(54314),I=t(53312),T=t(26473),E=t(61025),R=t(39059),G=t(75277),P=t(55132),D=t(38256),B=t(40176),U=t(27773),A=t(76092),L=t(66777),O=t(2580),_=t(5860),X=t(32169),z=t(88965),M=t(90171),j=t(50959),W=t(43119),N=t(71440),F=t(24635),V=t(50216);function H(){var e=(0,W.Z)(["\n  fragment DesktopReplsListRepl on Repl {\n    id\n    title\n    iconUrl\n    url\n    description\n    isPrivate\n    timeUpdated\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n  }\n"]);return H=function(){return e},e}function Y(){var e=(0,W.Z)(["\n  query DesktopReplsSearch(\n    $search: String!\n    $after: String\n    $excludeMultiplayer: Boolean\n    $excludeNotDeployed: Boolean\n    $excludePrivate: Boolean\n    $excludePublic: Boolean\n    $excludeOwned: Boolean\n  ) {\n    currentUser {\n      id\n      paginatedReplSearch(\n        search: $search\n        after: $after\n        excludeMultiplayer: $excludeMultiplayer\n        excludeNotDeployed: $excludeNotDeployed\n        excludePrivate: $excludePrivate\n        excludePublic: $excludePublic\n        excludeOwned: $excludeOwned\n      ) {\n        items {\n          id\n          ...DesktopReplsListRepl\n        }\n        pageInfo {\n          hasNextPage\n          nextCursor\n        }\n      }\n    }\n  }\n  ","\n"]);return Y=function(){return e},e}function q(){var e=(0,W.Z)(["\n  mutation DesktopReplsListDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return q=function(){return e},e}var K={},$=(0,N.Ps)(H()),Q=(0,N.Ps)(Y(),$);var J=(0,N.Ps)(q());var ee=(0,E.X)({rowUnfocused:{backgroundColor:"transparent"},rowFocused:{backgroundColor:x.vb.interactiveBackground}});function ne(e){var n=e.item,t=e.state,o=(0,j.useRef)(null),a=(0,c.Fb)({node:n},t,o),s=a.rowProps,u=a.gridCellProps,d=a.isSelected;return(0,j.useEffect)((function(){var e;d&&(null===(e=o.current)||void 0===e||e.scrollIntoView({block:"nearest"}))}),[d]),(0,l.tZ)(T.K.li,(0,i.Z)((0,r.Z)({},s),{ref:o,css:d?ee.rowFocused:ee.rowUnfocused,children:(0,l.tZ)(T.G,(0,i.Z)((0,r.Z)({},u),{children:n.rendered}))}))}function te(e){var n=(0,s.n_)(e),t=(0,j.useRef)(null),o=(0,c.c)(e,n,t).gridProps;return(0,l.tZ)(T.K.ul,(0,i.Z)((0,r.Z)({},o),{ref:(0,g.l)(t,e.innerRef),children:(0,a.Z)(n.collection).map((function(e){return(0,l.tZ)(ne,{item:e,state:n},e.key)}))}))}var re,ie,oe=(0,E.X)({container:[z.l0.flex.shrink(1),z.l0.colWithGap(8),z.l0.height("100%")],searchBarWrapper:[z.l0.flex.shrink(0),z.l0.px(8)],replsListWrapper:[z.l0.flex.shrink(1),z.l0.overflowY("scroll")],headerRow:[z.l0.flex.row,z.l0.align.center,z.l0.justify.spaceBetween,z.l0.px(8)],filterContainer:[z.l0.rowWithGap(8),z.l0.center],replListItemWrapper:[x.gU.listItem,z.l0.px(8),z.l0.py(2),z.l0.flex.row,z.l0.align.center,z.l0.justify.spaceBetween],replListItemInner:[z.l0.rowWithGap(8),z.l0.pl(4),z.l0.align.center,z.l0.flex.shrink(1)],replListItemTexts:[z.l0.flex.shrink(1)],replListItemTitle:[z.l0.mb(0),z.l0.truncate],dropdownItem:[z.l0.rowWithGap(8),z.l0.align.center],dropdownDestructiveItem:[z.l0.rowWithGap(8),z.l0.color.accentNegativeStronger,z.l0.align.center],loadingStateWrapper:[z.l0.align.center,z.l0.pt(8),z.l0.pb(12),z.l0.mx(8),z.l0.textAlign.center]});!function(e){e.Fork="Fork",e.Delete="Delete"}(re||(re={})),function(e){e.DeleteRepl="DeleteRepl"}(ie||(ie={}));var ae,le=[{value:re.Fork,label:"Fork",icon:(0,l.tZ)(D.Z,{})},{value:re.Delete,label:"Delete",icon:(0,l.tZ)(O.Z,{}),isDestructive:!0}];function ce(e){var n=e.repl,t=e.onClick,i=(0,d.g)().fork,a=(0,j.useState)(null),c=a[0],s=a[1],p=(0,h.Z)(),f=p.showConfirm,g=p.showError,y="/replEnvironmentDesktop"===(0,M.useRouter)().pathname,x=(0,o.Z)(function(e){var n=(0,r.Z)({},K,e);return V.D(J,n)}({variables:{id:n.id},onCompleted:function(){f("Repl scheduled for deletion")},onError:function(e){g((0,v.Z)(e.message))},update:function(e,n){var t;(null===(t=n.data)||void 0===t?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())}}),1),C=x[0];return(0,l.BX)(l.HY,{children:[(0,l.BX)(T.G,{css:oe.replListItemWrapper,onClick:function(e){return t(n.url,(0,m.j)(e))},children:[(0,l.BX)(T.G,{css:oe.replListItemInner,children:[(0,l.tZ)(b.ZP,{size:24,iconUrl:n.iconUrl,alt:n.title}),(0,l.BX)(T.G,{css:oe.replListItemTexts,children:[(0,l.tZ)(I.xv,{variant:"text",css:oe.replListItemTitle,multiline:!1,children:n.title}),(0,l.BX)(I.xv,{variant:"small",color:"dimmer",multiline:!1,children:[n.owner?"".concat(n.owner.username," \u2022 "):"","edited"," ",(0,Z.F)(n.timeUpdated)]})]})]}),y?null:(0,l.tZ)(w.ZE,{icon:(0,l.tZ)(L.Z,{size:16}),"aria-label":"Repl Actions",placement:"bottom-end",cssProps:[{background:"transparent"}],onAction:function(e){switch(e){case re.Fork:return void i();case re.Delete:return void s(ie.DeleteRepl)}},children:le.map((function(e){return(0,l.tZ)(w.ck,{textValue:e.label,children:(0,l.BX)(T.G,{css:e.isDestructive?oe.dropdownDestructiveItem:oe.dropdownItem,children:[e.icon,(0,l.tZ)(I.xv,{multiline:!1,children:e.label})]})},e.value)}))})]}),(0,l.tZ)(k.u,{isOpen:c===ie.DeleteRepl,onRequestClose:function(){return s(null)},centered:!0,children:(0,l.tZ)(u.Z,{delete:C,entityType:"Repl",hideModal:function(){return s(null)}})})]})}!function(e){e.All="All",e.ExcludeMultiplayer="ExcludeMultiplayer",e.ExcludeNotDeployed="ExcludeNotDeployed",e.ExcludePrivate="ExcludePrivate",e.ExcludePublic="ExcludePublic",e.ExcludeOwned="ExcludeOwned"}(ae||(ae={}));var se=[{value:ae.All,title:"All",icon:(0,l.tZ)(P.Z,{})},{value:ae.ExcludeMultiplayer,title:"My Repls",icon:(0,l.tZ)(_.Z,{})},{value:ae.ExcludeOwned,title:"Shared",icon:(0,l.tZ)(X.Z,{})},{value:ae.ExcludePrivate,title:"Public",icon:(0,l.tZ)(B.Z,{})},{value:ae.ExcludePublic,title:"Private",icon:(0,l.tZ)(A.Z,{})},{value:ae.ExcludeNotDeployed,title:"Deployed",icon:(0,l.tZ)(G.Z,{})}],ue=/^\/@\S+\/\S+/;function de(e){var n,t=e.onClick,o=(0,j.useState)(""),c=o[0],s=o[1],u=(0,M.useRouter)(),h="/replEnvironmentDesktop"===u.pathname,v=(0,p.Z)(c,250),m=(0,j.useRef)(null),g=(0,j.useRef)(null),Z=(0,j.useRef)(null),b=(0,j.useRef)(null),x=(0,j.useState)(se[0]),k=x[0],E=x[1],G=(0,j.useState)(null),P=G[0],D=G[1],B=P?new Set([P]):new Set,A=function(e){if(!e.startsWith("http"))return null;try{var n=new URL(e),t=window.location.origin;if(n.origin!==t)return null;if(!ue.test(n.pathname))return null;var r=n.pathname.split("/");return 3!==r.length?null:r[2]}catch(i){return null}}(v)||v,L=function(e){var n=(0,r.Z)({},K,e);return F.a(Q,n)}({variables:{search:A,excludeOwned:k.value===ae.ExcludeOwned,excludePublic:k.value===ae.ExcludePublic,excludePrivate:k.value===ae.ExcludePrivate,excludeNotDeployed:k.value===ae.ExcludeNotDeployed,excludeMultiplayer:k.value===ae.ExcludeMultiplayer},ssr:!1,notifyOnNetworkStatusChange:!0}),O=L.data,_=L.loading,X=L.refetch,z=L.fetchMore,W=null===O||void 0===O||null===(n=O.currentUser)||void 0===n?void 0:n.paginatedReplSearch,N=null===W||void 0===W?void 0:W.pageInfo,V=null===N||void 0===N?void 0:N.nextCursor,H=null===N||void 0===N?void 0:N.hasNextPage,Y=(null===W||void 0===W?void 0:W.items)||[];if(h){var q=u.query.replUrl;if("string"!==typeof q)throw new Error("Expected Repl URL");Y=Y.filter((function(e){return e.url!==q}))}var $=(0,j.useCallback)((function(){V&&!_&&z({variables:{search:v,after:V},updateQuery:function(e,n){var t,o,l=n.fetchMoreResult;return(null===(t=e.currentUser)||void 0===t?void 0:t.paginatedReplSearch)&&(null===(o=l.currentUser)||void 0===o?void 0:o.paginatedReplSearch)?(0,i.Z)((0,r.Z)({},l),{currentUser:(0,i.Z)((0,r.Z)({},l.currentUser),{paginatedReplSearch:(0,i.Z)((0,r.Z)({},l.currentUser.paginatedReplSearch),{items:(0,a.Z)(e.currentUser.paginatedReplSearch.items).concat((0,a.Z)(l.currentUser.paginatedReplSearch.items)),pageInfo:(0,r.Z)({},l.currentUser.paginatedReplSearch.pageInfo)})})}):e}})}),[z,_,V,v]),J=(0,f.Z)({onLoadMore:$,rootMargin:"0px 0px 100px 0px"}).targetRef,ee=function(e){var n=Y.find((function(n){return n.id===e}));if(!n)throw new Error("Expected matching Repl");t(n.url)};(0,j.useEffect)((function(){var e;null===(e=g.current)||void 0===e||e.focus()}),[g]);var ne=0===Y.length&&_,re=0===Y.length&&!_;return(0,l.BX)(T.G,{css:oe.container,children:[(0,l.tZ)(T.K.div,{css:oe.searchBarWrapper,ref:m,children:(0,l.tZ)(C.E,{placeholder:"Search Repls",value:c,inputRef:g,onChange:function(e){s(e.target.value)},onClear:function(){s("")},onKeyDown:function(e){var n;("Enter"===e.key&&P&&ee(P),"ArrowDown"===e.key||"ArrowUp"===e.key)&&(e.preventDefault(),null===(n=b.current)||void 0===n||n.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent)))}})}),(0,l.BX)(T.G,{css:oe.headerRow,children:[(0,l.tZ)(I.h4,{level:2,variant:h?"subheadDefault":"subheadBig",children:"Recent"}),(0,l.tZ)(T.G,{css:oe.filterContainer,children:(0,l.tZ)(S.P,{"aria-label":"repl-list-filter-select",id:"repl-list-filter-select",items:se,selectedItem:k,onChange:function(e){E(e)}})})]}),(0,l.BX)(T.K.div,{style:h?void 0:{paddingLeft:8,paddingRight:8},css:oe.replsListWrapper,ref:Z,children:[(0,l.tZ)(T.G,{children:(0,l.tZ)(te,{"aria-label":"Repls",selectionMode:"single",selectionBehavior:"replace",disallowEmptySelection:!0,items:Y,innerRef:b,selectedKeys:B,onSelectionChange:function(e){if("all"!==e){if(0===e.size)throw new Error("Expected to have a selected key");var n=Array.from(e)[0];D(n)}},onAction:function(e){ee(e)},children:function(e){var n;return(0,l.tZ)(w.ck,{textValue:e.title,children:(0,l.tZ)(d.b,{forkParams:{trackingData:{forkSource:"desktopAppReplsList"}},onFork:function(){var e;null===(e=Z.current)||void 0===e||e.scrollTo({top:0}),X()},repl:e,teamContext:null===(n=e.owner)||void 0===n?void 0:n.username,children:(0,l.tZ)(ce,{repl:e,onClick:function(e,n){t(e,n)}})})},e.id)}})}),(0,l.BX)(T.G,{css:oe.loadingStateWrapper,children:[ne?(0,l.tZ)(U.Z,{}):null,re?(0,l.tZ)(I.xv,{variant:"text",color:"dimmest",children:"We couldn't find any Repls matching your search."}):null,H?(0,l.tZ)(y.hU,{tooltipHidden:!0,alt:"Load more Repls",onClick:$,ref:J,disabled:_,children:_?(0,l.tZ)(U.Z,{}):(0,l.tZ)(R.Z,{})}):null]})]})]})}},86764:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(74985),i=t(50959),o=t(26473),a=t(88965),l=t(43312),c=t(8479),s=t(43529),u=t(12901),d=t(59213);var p=(0,l.iv)(a.l0.dragRegion);function f(){var e=(0,s.NJ)(),n=(0,u.Z)(),t=function(){var e=(0,u.Z)(),n=(0,i.useState)(!1),t=n[0],r=n[1];return(0,i.useEffect)((function(){if(e)return r(document.hasFocus()),d.X.onFocusChanged(r)}),[e]),t}(),l=function(){var e=(0,u.Z)(),n=(0,i.useState)(!1),t=n[0],r=n[1];return(0,i.useEffect)((function(){if(e)return d.X.onFullScreenChanged(r)}),[e]),t}();return e&&n?l?null:(0,r.tZ)(o.G,{css:p,children:(0,r.tZ)("svg",{width:c.TY,height:c.MX-16,children:t?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)("circle",{cx:15,cy:16,r:5,fill:"none",stroke:a.TV.outlineDefault,strokeWidth:1}),(0,r.tZ)("circle",{cx:35,cy:16,r:5,fill:"none",stroke:a.TV.outlineDefault,strokeWidth:1}),(0,r.tZ)("circle",{cx:55,cy:16,r:5,fill:"none",stroke:a.TV.outlineDefault,strokeWidth:1})]})})}):null}},8479:function(e,n,t){"use strict";t.d(n,{KN:function(){return i},MX:function(){return o},TY:function(){return r}});var r=70,i=140,o=48},92373:function(e,n,t){"use strict";t.d(n,{G:function(){return o},K:function(){return a}});var r=t(74985),i=t(43312);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overscrollBehaviorX:"none"}}]})}function a(){return(0,r.tZ)(i.xB,{styles:[{body:{overscrollBehaviorY:"none"}}]})}},49914:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(74985),i=t(48306),o=t.n(i),a=(t(50959),t(97846));function l(e){var n=e.label;return(0,r.BX)(a.Z,{size:"xsmall",children:[(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":n,className:"jsx-b2b24242521d2288 help",children:"?"}),(0,r.tZ)(o(),{id:"b2b24242521d2288",children:".help.jsx-b2b24242521d2288{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})}},38925:function(e,n,t){"use strict";t.d(n,{Gp:function(){return P},Oh:function(){return Y},V3:function(){return _},Xl:function(){return z},Yd:function(){return j},gX:function(){return Q},h2:function(){return L},on:function(){return B},q7:function(){return K},vs:function(){return R},w9:function(){return N},zp:function(){return V}});var r=t(72006),i=t(43119),o=t(71440),a=t(8938),l=t(24635),c=t(50216);function s(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplateModelSolution on ReplTemplateModelSolution {\n    id\n    visibleAfterSubmitting\n    visibleAfterPassingTests\n    visibleAfterDueDate\n    repl {\n      id\n      url\n      nextPagePathname\n    }\n    canStudentFork\n    studentFork {\n      id\n      url\n      nextPagePathname\n    }\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplate on ReplTemplate {\n    id\n    isPublished\n    isGroupProject\n    allowSelfGrouping\n    imageUrl\n    url\n    dueDate\n    modelSolution {\n      id\n      ...TeamProfileReplTemplateModelSolution\n    }\n    userSubmissionGroup {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment TeamProfileRepl on Repl {\n    id\n    title\n    isPrivate\n    description\n    slug\n    timeCreated\n    url\n    iconUrl\n    pinnedToProfile\n    nextPagePathname\n    template {\n      id\n      ...TeamProfileReplTemplate\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamProfileStack on Stack {\n    id\n    title\n    repls {\n      id\n      ...TeamProfileRepl\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment TeamEduProfile on Team {\n    id\n    username\n    displayName\n    isAdmin\n    archived\n    defaultTemplateStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n      capabilities {\n        isExpired: isExpiring(daysFromNow: 0)\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamProProfile on Team {\n    id\n    username\n    displayName\n    isMember\n    isAdmin\n    archived\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamProfileAllStacks on Team {\n    id\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  fragment TeamCreateReplSubmissionOutput on CreateReplSubmissionOutput {\n    ... on Repl {\n      id\n      nextPagePathname\n      url\n      template {\n        id\n        ...TeamProfileReplTemplate\n      }\n    }\n    ... on UserError {\n      message\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query TeamProProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamProProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query TeamEduProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function b(){var e=(0,i.Z)(["\n  mutation TeamProProfilePinRepl($replId: String!) {\n    pinReplToProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return b=function(){return e},e}function y(){var e=(0,i.Z)(["\n  mutation TeamProProfileUnpinRepl($replId: String!) {\n    unpinReplFromProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return y=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation TeamProfileArrangeStackItem($input: ArrangeStackItemInput!) {\n    arrangeStackItem(input: $input) {\n      ... on Team {\n        id\n        ...TeamProfileAllStacks\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function w(){var e=(0,i.Z)(["\n  mutation TeamProfileUpdateReplTemplate($input: UpdateReplTemplateInput!) {\n    updateReplTemplate(input: $input) {\n      ... on ReplTemplate {\n        id\n        repl {\n          id\n          ...TeamProfileRepl\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolution(\n    $input: CreateReplTemplateModelSolutionInput!\n  ) {\n    createReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function C(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolutionFork(\n    $input: CreateReplTemplateModelSolutionForkInput!\n  ) {\n    createReplTemplateModelSolutionFork(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function S(){var e=(0,i.Z)(["\n  mutation TeamCreateReplSubmission($templateId: Int!) {\n    createReplSubmission(templateId: $templateId) {\n      ...TeamCreateReplSubmissionOutput\n    }\n  }\n  ","\n"]);return S=function(){return e},e}var I={},T=(0,o.Ps)(s()),E=(0,o.Ps)(u(),T,a.Pc),R=(0,o.Ps)(d(),E),G=(0,o.Ps)(p(),R),P=(0,o.Ps)(f(),G),D=(0,o.Ps)(h(),G),B=(0,o.Ps)(v(),G),U=(0,o.Ps)(m(),E),A=(0,o.Ps)(g(),D);function L(e){var n=(0,r.Z)({},I,e);return l.a(A,n)}var O=(0,o.Ps)(Z(),P);function _(e){var n=(0,r.Z)({},I,e);return l.a(O,n)}var X=(0,o.Ps)(b());function z(e){var n=(0,r.Z)({},I,e);return c.D(X,n)}var M=(0,o.Ps)(y());function j(e){var n=(0,r.Z)({},I,e);return c.D(M,n)}var W=(0,o.Ps)(x(),B);function N(e){var n=(0,r.Z)({},I,e);return c.D(W,n)}var F=(0,o.Ps)(w(),R);function V(e){var n=(0,r.Z)({},I,e);return c.D(F,n)}var H=(0,o.Ps)(k(),R);function Y(e){var n=(0,r.Z)({},I,e);return c.D(H,n)}var q=(0,o.Ps)(C(),R);function K(e){var n=(0,r.Z)({},I,e);return c.D(q,n)}var $=(0,o.Ps)(S(),U);function Q(e){var n=(0,r.Z)({},I,e);return c.D($,n)}},97766:function(e,n,t){"use strict";t.d(n,{Y:function(){return r}});var r=800},28098:function(e,n,t){"use strict";var r=t(73194),i=t.n(r);n.Z=i()((function(){return Promise.all([t.e(4001),t.e(1735),t.e(6858)]).then(t.bind(t,66858)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[66858]}}})},71013:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ZA}});var r=t(74985),i=t(43312),o=t(45323),a=t(88635),l=t(2272),c=t(50959),s=t(5295),u=t(63723),d=t(26473),p=t(88965),f=t(57389),h=t(9434),v=t(51631),m=t(72006),g=t(43119),Z=t(71440),b=t(50216);function y(){var e=(0,g.Z)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return y=function(){return e},e}function x(){var e=(0,g.Z)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return x=function(){return e},e}var w={},k=(0,Z.Ps)(y()),C=(0,Z.Ps)(x());var S=t(97566),I=t(23023),T=t(5220);function E(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    isFirewallMode\n  }\n"]);return E=function(){return e},e}function R(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    isAlwaysOn\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n  }\n  ","\n"]);return R=function(){return e},e}var G=(0,Z.Ps)(E()),P=(0,Z.Ps)(R(),S.s);function D(){var e=(0,g.Z)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    hasSeenOldWorkspaceTour: tourSeen(name: "workspace-desktop-tour")\n    hasSeenOldSidebarTour: tourSeen(name: "workspace-desktop-sidebar-tour")\n  }\n']);return D=function(){return e},e}function B(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    lesson {\n      id\n    }\n  }\n"]);return B=function(){return e},e}var U=(0,Z.Ps)(D()),A=(0,Z.Ps)(B()),L=t(53615);function O(){var e=(0,g.Z)(['\n  fragment ReplEnvironmentDesktopCurrentUser on CurrentUser {\n    id\n    image\n    isFirewallMode\n    isAdmin: hasRole(role: ADMIN)\n    userSubscriptionType\n    ...CrosisContextCurrentUser\n    editorPreferences {\n      ...CurrentUserPreferences\n    }\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    canMigrateRepls: gate(feature: "migrate2nix-killswitch")\n  }\n  ',"\n  ","\n  ","\n  ","\n  ","\n"]);return O=function(){return e},e}function _(){var e=(0,g.Z)(['\n  fragment ReplEnvironmentDesktopRepl on Repl {\n    id\n    title\n    layoutState\n    description\n    hostedUrl: hostedUrl(dotty: true)\n    multiplayers {\n      id\n    }\n    currentUserPermissions {\n      containerWrite\n    }\n    origin {\n      id\n    }\n    language\n    config {\n      isVnc\n      isServer\n      isExtension\n    }\n    lesson {\n      id\n    }\n    rootOriginReplUrl\n    source {\n      release {\n        id\n      }\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    flagOutputs: gateOnOwner(feature: "flag-outputs")\n  }\n  ',"\n  ","\n"]);return _=function(){return e},e}var X=(0,Z.Ps)(O(),I.D,T.wO,G,U,L.z),z=(0,Z.Ps)(_(),I.C,P),M=t(24635);function j(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    isSubscribed\n    isFirewallMode\n    isExplorer: hasRole(role: EXPLORER)\n    url\n    username\n    image\n  }\n"]);return j=function(){return e},e}function W(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    slug\n    url\n    workspaceCta\n    currentUserPermissions {\n      editMultiplayers\n      inviteGuests\n    }\n    owner {\n      ... on Team {\n        id\n        capabilities {\n          isEducationPlan\n        }\n      }\n      ... on User {\n        id\n      }\n    }\n    template {\n      id\n      isGroupProject\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    multiplayers {\n      id\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n  }\n  ","\n"]);return W=function(){return e},e}function N(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentHeaderPropsRepl on Repl {\n    ...ReplEnvironmentDesktopRepl\n  }\n  ","\n"]);return N=function(){return e},e}function F(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentHeaderPropsCurrentUser on CurrentUser {\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    ...ReplEnvironmentDesktopCurrentUser\n  }\n  ","\n  ","\n"]);return F=function(){return e},e}function V(){var e=(0,g.Z)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n        ...WorkspaceHeaderReplMetadataRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return V=function(){return e},e}var H={},Y=(0,Z.Ps)(j()),q=(0,Z.Ps)(W(),k),K=(N(),F(),L.z,(0,Z.Ps)(V(),q,S.s,Y));var $=t(38805),Q=t(37268),J=t(95141),ee=t(16296),ne=t(53312),te=t(6108),re=t(28435),ie=t(87823),oe=t(4405),ae=t(67217),le=t(61623);function ce(e){var n=e.user,t=e.onClick;return(0,r.tZ)(le.u,{placement:"bottom",tooltip:"Observe ".concat(n.username),children:function(e,i){return(0,r.tZ)(d.G,(0,oe.Z)((0,m.Z)({},e),{innerRef:i,onClick:t,children:(0,r.tZ)(ae.q,{size:24,src:n.image||null,username:n.username,ringColor:n.color,css:[p.l0.cursor.pointer,{transition:"all 0.2s ease","&:hover":{filter:"brightness(95%)",boxShadow:p.TV.shadow1}}]})}))}})}var se=t(27773),ue=t(84833),de=t(61025),pe="Owner",fe="Can edit",he=t(17074),ve=(0,de.X)({container:[p.l0.pl(8),p.l0.pr(16),p.l0.py(4),p.l0.flex.row,p.l0.align.center,p.l0.justify.start],button:[p.l0.display.flex,p.l0.align.center],img:[p.l0.width(32),p.l0.height(32),p.l0.borderRadius("full"),p.l0.backgroundColor.white,p.l0.border({width:3,style:"solid"}),{objectFit:"cover"}],usernameContainer:[p.l0.display.flex,p.l0.flex.column,p.l0.justify.center,p.l0.ml(8),p.l0.flex.growAndShrink(1),p.l0.colWithGap(2)]});var me=function(e){var n=e.id,t=e.username,i=e.image,o=e.isOwner,a=e.color,l=e.hideModal,c=e.canClickAvatar,s=e.isCurrentUser,u=e.onAvatarClick,d=function(){c&&(u({username:t,id:n}),l())};return(0,r.BX)("div",{css:[ve.container,o&&te.gU.listItem],style:(0,m.Z)({cursor:c?"pointer":"auto"},c&&te.gU.listItem),role:"button",onClick:d,onKeyDown:d,tabIndex:0,children:[(0,r.BX)("div",{css:ve.button,children:[(0,r.tZ)(ue.Z,{src:i,alt:"",css:ve.img,style:{borderColor:a},width:32,height:32}),c?(0,r.BX)(he.T,{children:["Observe ",t]}):null]}),(0,r.BX)("div",{css:ve.usernameContainer,children:[(0,r.BX)(ne.xv,{multiline:!1,children:["@",t,s?" (you)":null]}),(0,r.tZ)(ne.xv,{variant:"small",color:"dimmer",multiline:!1,children:o?pe:fe})]})]})};function ge(){var e=(0,g.Z)(["\n  fragment UsersOnlineOverflowMenuUser on User {\n    id\n    username\n    image\n  }\n"]);return ge=function(){return e},e}function Ze(){var e=(0,g.Z)(["\n  query UsersOnlineOverflowMenu($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n        multiplayers {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n"]);return Ze=function(){return e},e}var be={},ye=(0,Z.Ps)(ge()),xe=(0,Z.Ps)(Ze(),ye);var we=(0,de.X)({loading:[p.l0.flex.row,p.l0.justify.center,p.l0.p(32)],loaded:[p.l0.colWithGap(8),p.l0.py(8),p.l0.maxHeight(330),{overflowY:"auto"}]});var ke=function(e){var n=e.replId,t=e.activeUsers,i=e.hideModal,o=e.onAvatarClick,a=function(e){var n=(0,m.Z)({},be,e);return M.a(xe,n)}({variables:{replId:n}}),l=a.data,c=a.loading,s=a.error;if(c)return(0,r.tZ)(d.G,{css:we.loading,children:(0,r.tZ)(se.Z,{})});if(s)return(0,r.tZ)("div",{children:s.message});if("Repl"===(null===l||void 0===l?void 0:l.repl.__typename)){var u=l.repl,p=l.currentUser,f=u.user,h=f&&t.find((function(e){return e.username===f.username})),v=u.multiplayers.filter((function(e){return e&&function(e,n){return n.some((function(n){return n.id===e}))}(e.id,t)})),g=v.slice(2);return(0,r.tZ)(d.G,{css:we.loaded,children:(0,r.BX)(d.G,{children:[f?(0,r.tZ)(me,(0,oe.Z)((0,m.Z)({},f),{color:h?h.color:"transparent",isOwner:!0,hideModal:i,isCurrentUser:f.id===(null===p||void 0===p?void 0:p.id),canClickAvatar:Boolean(h)&&f.id!==(null===p||void 0===p?void 0:p.id),onAvatarClick:o})):null,g.map((function(e){if(!e)throw new Error("Expected user");var n=t.find((function(n){return n.username===e.username}));if(!n)throw new Error("Expected user online");var a=e.id!==(null===p||void 0===p?void 0:p.id);return(0,r.tZ)(me,(0,oe.Z)((0,m.Z)({isCurrentUser:e.id===(null===p||void 0===p?void 0:p.id)},e),{canClickAvatar:a,color:n.color,hideModal:i,isOwner:!1,onAvatarClick:o}),"chat-user-list-".concat(e.username))}))]})})}return"ReplRedirect"===(null===l||void 0===l?void 0:l.repl.__typename)?(0,r.BX)("div",{children:["This Repl has moved to"," ",(0,r.tZ)("a",{href:l.repl.replUrl,children:l.repl.replUrl})]}):"SubscriptionExpiredError"===(null===l||void 0===l?void 0:l.repl.__typename)?(0,r.BX)("div",{children:["Your subscription has expired.",(0,r.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null},Ce=t(60717),Se=t(716),Ie=t(34547),Te=function(e){var n=e.isOpen,t=e.hideModal,i=e.children,o=e.onAvatarClick,a=(0,Ie.Z)(),l=(0,re.Z)().presence,c=(0,Se.Z)({presence:l});return(0,r.BX)(Ce.Z,{isOpen:n,padding:0,onClickOutside:t,children:[i,(0,r.tZ)(ke,{replId:a,activeUsers:c,hideModal:t,onAvatarClick:o})]})},Ee=t(91148),Re=t(86813),Ge=(0,de.X)({root:[p.l0.flex.row,p.l0.align.center,p.l0.backgroundColor.backgroundDefault],userStack:[p.l0.rowWithGap(4),p.l0.align.center,p.l0.px(8),(0,f.Z)({},p.BC.max(Ee.j.mobileMax+100),[p.l0.display.none])],userStackListItem:{listStyleType:"none"},overflowContainer:{backgroundColor:"transparent"},overflowButton:[p.l0.borderRadius("full"),p.l0.minWidth(24),p.l0.height(24),p.l0.fontSize(10),p.l0.border({color:p.TV.outlineDefault})]});function Pe(e){var n=(0,l.Z)(c.useState(!1),2),t=n[0],i=n[1],o=(0,Re.aG)();if(0===o.length)return null;var a=o.slice(0,2),s=o.length-2;return(0,r.tZ)(d.G,{css:Ge.root,children:(0,r.BX)(d.G,{tag:"ul",css:Ge.userStack,"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[a.map((function(n){return(0,r.tZ)("li",{css:Ge.userStackListItem,children:(0,r.tZ)(ce,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)})),s>0?(0,r.tZ)("li",{css:Ge.userStackListItem,children:(0,r.tZ)(d.G,{children:(0,r.tZ)(Te,{isOpen:t,hideModal:function(){return i(!1)},onAvatarClick:e.onAvatarClick,children:(0,r.tZ)(Q.Tg,{background:"root",css:Ge.overflowContainer,children:(0,r.tZ)(J.zx,{size:"small",onClick:function(){return i(!t)},text:s.toString(),css:Ge.overflowButton})})})})}):null]})})}var De=t(5875),Be=t(97846),Ue=t(21423),Ae=t(49424),Le=t(52544),Oe=t(60168),_e=t(81897),Xe=(0,i.iv)([p.l0.p(8),p.l0.borderRadius(8),p.l0.border({color:p.TV.purpleDefault,width:1})]);function ze(e){var n=e.children,t=e.showPopover,i=(0,Oe.Z)("announcement","add-guest-new-user"),o=i.shouldDisplay,a=i.register,s=i.dismiss,u=(0,l.Z)(c.useState(!1),2),p=u[0],f=u[1],h=(0,l.Z)(c.useState(!1),2),v=h[0],m=h[1];c.useEffect((function(){t&&!v&&a()}),[v,a,t]);var g=o&&!v;return(0,r.BX)(_e.x,{css:Xe,isOpen:g,onOpenChange:function(e){e||m(!0)},label:"Add Guests",children:[(0,r.tZ)(d.K.div,{children:n}),(0,r.BX)(Ue.gC,{spacing:2,align:"stretch",children:[(0,r.BX)(Ue.Ug,{spacing:1,children:[(0,r.tZ)(Ae.Z,{}),(0,r.tZ)(De.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,r.BX)(Be.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,r.tZ)(Ue.Ug,{spacing:1,justify:"end",children:(0,r.tZ)(Le.Z,{loading:p,onClick:function(){f(!0),s()},children:"Got it"})})]})]})}var Me=t(21070),je=t(82496),We=t(9970),Ne=t(48306),Fe=t.n(Ne);function Ve(e){var n=e.email,t=e.onInvite,i=e.onCancel;return(0,r.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa root",children:[(0,r.tZ)(De.Z,{level:3,align:"center",children:"Are you sure?"}),(0,r.BX)(Be.Z,{align:"center",children:[(0,r.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,r.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa email",children:n})]}),(0,r.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa controls",children:[(0,r.tZ)(Le.Z,{onClick:i,children:"Cancel"}),(0,r.tZ)(Le.Z,{filled:!0,color:"primary",onClick:t,children:"Invite"})]}),(0,r.tZ)(Fe(),{id:"1a6ae4ac10e8f1fa",children:".root.jsx-1a6ae4ac10e8f1fa{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-1a6ae4ac10e8f1fa{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.message.jsx-1a6ae4ac10e8f1fa{padding-bottom:var(--space-16)}"})]})}var He=t(21651),Ye=t(93397),qe=t(25404),Ke=t(13609),$e=t(46130),Qe=t(65790),Je=t(45317),en=t(91547),nn=t(90171);function tn(){var e=(0,g.Z)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n  }\n"]);return tn=function(){return e},e}function rn(){var e=(0,g.Z)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        multiplayers {\n          id\n          ...MultiplayerUser\n        }\n        currentUserPermissions {\n          editMultiplayers\n          inviteGuests\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return rn=function(){return e},e}function on(){var e=(0,g.Z)(["\n  mutation TeamMultiplayerManagerMultiplayersAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        multiplayers {\n          id\n          ...MultiplayerUser\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n"]);return on=function(){return e},e}function an(){var e=(0,g.Z)(["\n  mutation TeamMultiplayerManagerMultiplayersRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        multiplayers {\n          id\n          ...MultiplayerUser\n        }\n      }\n    }\n  }\n  ","\n"]);return an=function(){return e},e}var ln={},cn=(0,Z.Ps)(tn()),sn=(0,Z.Ps)(rn(),cn);var un=(0,Z.Ps)(on(),cn);an();var dn=t(32169),pn=t(14709),fn=t.n(pn);function hn(e){var n,t,i,o,a=e.replId,s=function(e){var n=(0,m.Z)({},ln,e);return M.a(sn,n)}({variables:{replId:a}}),u=s.data,f=s.loading,g=(0,nn.useRouter)(),Z=(0,$e.Vg)(g),y=(0,Re.aG)(),x=(null===u||void 0===u||null===(n=u.currentUser)||void 0===n?void 0:n.id)||null,w="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)?u.repl:null,k=(0,qe.Z)(),C=k.showConfirm,S=k.showError,I=(0,l.Z)(function(e){var n=(0,m.Z)({},ln,e);return b.D(un,n)}({onError:function(e){return S(e.message)},onCompleted:function(e){var n=e.addMultiplayerUser.user;(0,h.j)(h.U3.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"username"});var t=n?"@".concat(n.username):"Member";C("".concat(t," added"))}}),2),T=I[0],E=I[1],R=(0,l.Z)((0,en.z8)({onError:function(e){S(e.message)},update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createMultiplayerInvite2;if(r)if("UserError"!==r.__typename){if("MultiplayerInvite"===r.__typename){var i=r.email;return(0,h.j)(h.U3.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"email"}),void C("Invited ".concat(i," via email"))}if("ReplPermission"===r.__typename){e.modify({id:e.identify({__typename:"Repl",id:a}),fields:{permissions:function(n){var t=e.writeFragment({data:r,fragment:en.dE});return(0,We.Z)(n).concat([t])}}});var o=r.user;(0,h.j)(h.U3.MULTIPLAYER_INVITED,{replId:a,inviteMethod:"email"});var l=o?"@".concat(o.username):"Member";C("".concat(l," added"))}}else S(r.message)}}),2),G=R[0],P=R[1];if(w&&!w.owner)throw new Error("Cannot manage members on anon repls");if((null===w||void 0===w?void 0:w.owner)&&"Team"!==(null===w||void 0===w?void 0:w.owner.__typename))throw new Error("Expect repl owned by a team");var D,B,U="Team"===(null===w||void 0===w||null===(t=w.owner)||void 0===t?void 0:t.__typename)?w.owner:null,A=!(null===U||void 0===U||null===(i=U.capabilities)||void 0===i?void 0:i.hasValidSubscription)&&!(null===U||void 0===U||null===(o=U.capabilities)||void 0===o?void 0:o.isBusinessPlan),L=null!==(D=null===w||void 0===w?void 0:w.multiplayers.reduce((function(e,n){return n?(0,We.Z)(e).concat([n.username]):e}),[]))&&void 0!==D?D:[],O=null===w||void 0===w?void 0:w.multiplayerInvites,_=y.filter((function(e){return!(null===U||void 0===U?void 0:U.members.some((function(n){return n.id===e.id})))})),X=null===U||void 0===U?void 0:U.members.filter((function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)!==x})),z=null===U||void 0===U?void 0:U.members.filter((function(e){return e.permissions&&e.permissions!==v.SV.Member})),j=null===X||void 0===X?void 0:X.filter((function(e){var n=e.user;return y.some((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}))})),W=null===X||void 0===X?void 0:X.filter((function(e){var n=e.user;return!y.some((function(e){return e.id===(null===n||void 0===n?void 0:n.id)}))})),N=null===z||void 0===z?void 0:z.some((function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===x})),F=null!==(B=null===O||void 0===O?void 0:O.length)&&void 0!==B?B:0,V=null===w||void 0===w?void 0:w.currentUserPermissions.editMultiplayers,H=null===w||void 0===w?void 0:w.currentUserPermissions.inviteGuests,Y=(0,l.Z)(c.useState(null),2),q=Y[0],K=Y[1];return f?(0,r.tZ)(Q.Tg,{css:[je._U.root],background:"default",children:(0,r.BX)(d.G,{css:je._U.loading,children:[(0,r.tZ)(se.Z,{color:Je.TV.foregroundDimmer}),(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,r.BX)(Q.Tg,{css:je._U.root,background:"default",children:[(0,r.tZ)(d.G,{css:[je._U.header,Z&&je._U.header_mobile],children:(0,r.tZ)(d.G,{css:je._U.titleContainer,children:(0,r.tZ)(ne.xv,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),H?(0,r.tZ)(d.G,{css:je._U.searchContainer,children:(0,r.tZ)(Ke.Z,{existingUsernames:L,onSubmit:function(e){fn()(e)&&!P.loading?K(e):E.loading||T({variables:{username:e,replId:a,type:"rw"}})},isDisabled:f})}):null,!H&&A?(0,r.tZ)(d.G,{css:[p.l0.px(16)],children:(0,r.tZ)(Qe.u,{icon:(0,r.tZ)(dn.Z,{}),text:'You can add people to this Repl by inviting them to the "'.concat(null===U||void 0===U?void 0:U.displayName,'" Friends Team.'),href:"/teams/".concat(null===U||void 0===U?void 0:U.username),target:"_blank"})}):null,(0,r.tZ)(He.u,{isOpen:!!q,onRequestClose:function(){return K(null)},children:q?(0,r.tZ)(Ve,{email:q,onInvite:function(){G({variables:{email:q,replId:a,type:"rw"}}),K(null)},onCancel:function(){return K(null)}}):null}),(0,r.BX)(Q.Tg,{css:je._U.userList,children:[(null===O||void 0===O?void 0:O.length)?(0,r.BX)(d.G,{css:je._U.userGroup.root,children:[(0,r.tZ)(je.ln,{title:"Pending Invitations",color:Je.TV.outlineStrongest,count:F}),null===O||void 0===O?void 0:O.map((function(e){return(0,r.tZ)(Ye.Z,{canEditMultiplayers:N||!1,email:e.email,isPendingInvitation:!0,replId:a},e.email)}))]}):null,(null===_||void 0===_?void 0:_.length)?(0,r.BX)(d.G,{css:je._U.userGroup.root,children:[(0,r.tZ)(je.ln,{title:"External Guests",color:Je.TV.outlineStrongest,count:null===_||void 0===_?void 0:_.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),null===_||void 0===_?void 0:_.map((function(e){return(0,r.tZ)(Ye.Z,{canEditMultiplayers:N||!1,isPendingInvitation:!1,replId:a,user:e},e.id)}))]}):null,(null===j||void 0===j?void 0:j.length)?(0,r.BX)(d.G,{css:je._U.userGroup.root,children:[(0,r.tZ)(je.ln,{title:"Online Members",color:Je.TV.greenStrongest,count:null===j||void 0===j?void 0:j.length}),null===j||void 0===j?void 0:j.map((function(e){var n=e.user;return n?(0,r.tZ)(Ye.Z,{isPendingInvitation:!1,canEditMultiplayers:Boolean(N),replId:a,user:n},n.id):null}))]}):null,(null===W||void 0===W?void 0:W.length)?(0,r.BX)(d.G,{css:je._U.userGroup.root,children:[(0,r.tZ)(je.ln,{title:"Offline Members",color:Je.TV.outlineStrongest,count:null===W||void 0===W?void 0:W.length}),null===W||void 0===W?void 0:W.map((function(e){var n=e.user;return n?(0,r.tZ)(Ye.Z,{isPendingInvitation:!1,canEditMultiplayers:Boolean(N),replId:a,user:n},n.id):null}))]}):null,(null===z||void 0===z?void 0:z.length)?(0,r.BX)(d.G,{css:je._U.userGroup.root,children:[(0,r.tZ)(je.ln,{title:"Admins",color:Je.TV.accentPrimaryStronger,count:z.length}),z.map((function(e){var n=e.user;return n?(0,r.tZ)(Ye.Z,{canEditMultiplayers:!1,isPendingInvitation:!1,user:n,replId:a},n.id):null}))]}):null,V||f?null:(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var vn=(0,i.iv)([p.l0.flex.column,p.l0.py(16),p.l0.borderRadius(8),p.l0.align.stretch,p.l0.flex.growAndShrink(1),p.l0.maxHeight("calc(100vh - ".concat(s.Mz+12,"px)")),p.l0.backgroundColor.backgroundDefault]),mn=function(e){var n=e.replId,t=e.handleUpgradeTriggered,i=e.isTeamRepl;return(0,r.BX)(d.G,{css:vn,children:[i?(0,r.tZ)(hn,{replId:n}):(0,r.tZ)(je.ZP,{replId:n,handleUpgradeTriggered:t}),(0,r.tZ)(Me.Z,{replId:n})]})},gn=t(74906),Zn=t(28098);function bn(){var e=(0,g.Z)(["\n  mutation ReplEnvironmentHeaderSubmitRepl($replId: String!) {\n    submitRepl(replId: $replId) {\n      ... on Repl {\n        id\n        workspaceCta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return bn=function(){return e},e}function yn(){var e=(0,g.Z)(["\n  query ReplEnvironmentHeaderSubmitReplDueDate($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        template {\n          id\n          dueDate\n        }\n      }\n    }\n  }\n"]);return yn=function(){return e},e}var xn={},wn=(0,Z.Ps)(bn());var kn=(0,Z.Ps)(yn());var Cn=t(55929),Sn=t(44385);function In(e){var n,t=e.replId,i=e.onDone,o=e.isResubmit,a=e.lastUpdated,c=e.openIOtesterPane,s=(0,re.Z)().iotester,u=(0,Cn.CH)({variables:{replId:t}}),f=s.lastRunAt.getTime()>a,h=function(e){var n=(0,m.Z)({},xn,e);return M.a(kn,n)}({variables:{replId:t}}).data,v="Repl"===(null===h||void 0===h?void 0:h.repl.__typename)?h.repl:null,g=(null===v||void 0===v?void 0:v.template)||null,Z=(null===g||void 0===g?void 0:g.dueDate)||null,y=(new Date).toISOString(),x=(0,qe.Z)(),w=x.showConfirm,k=x.showError,C=(0,l.Z)(function(e){var n=(0,m.Z)({},xn,e);return b.D(wn,n)}({variables:{replId:t},onCompleted:function(e){var n=e.submitRepl;"UserError"!==n.__typename?"Repl"===n.__typename&&(w("Repl submitted"),i()):k(n.message)},onError:function(e){k(e.message)}}),2),S=C[0],I=C[1],T=f&&s.lastRunDidPass;return"Repl"===(null===(n=u.data)||void 0===n?void 0:n.repl.__typename)&&u.data.repl.ioTests.length>0&&!T?(0,r.BX)(d.G,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(ne.h4,{variant:"headerDefault",level:2,children:f?"Fix test failures before submitting":"Run tests before submitting"}),(0,r.tZ)(ne.xv,{children:f?"Input/Output tests did not pass.":"Input/Output tests have not been run since this Repl was last changed."}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,r.tZ)(J.zx,{disabled:I.loading,colorway:"primary",onClick:function(){c(),i()},text:"View tests"}),(0,r.tZ)(J.zx,{disabled:I.loading,onClick:function(){return S()},iconLeft:(0,r.tZ)(Sn.Z,{}),text:"Submit anyway"})]})]}):(0,r.BX)(d.G,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(ne.h4,{variant:"headerDefault",level:2,children:o?" Resubmit Repl":"Submit Repl"}),(0,r.tZ)(ne.xv,{children:o?"This will re-notify Team admins about your submission.":"This will submit your Repl for review and notify the Team's admins."}),Z&&Z<y?(0,r.tZ)(ne.xv,{css:[p.l0.color.accentNegativeStronger],children:"Note: Your submission is past the due date and will be marked late."}):null,(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,r.tZ)(J.zx,{disabled:I.loading,onClick:i,text:"Cancel"}),(0,r.tZ)(J.zx,{colorway:"primary",disabled:I.loading,onClick:function(){return S()},iconLeft:(0,r.tZ)(Sn.Z,{}),text:o?"Submit again":"Submit"})]})]})}var Tn=t(4561),En=t(87978),Rn=t(38029),Gn=t(38925);function Pn(){var e=(0,g.Z)(["\n  query UpdateModelSolutionModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...TeamProfileRepl\n          template {\n            id\n            dueDate\n          }\n          unitTests {\n            tests {\n              id\n            }\n          }\n          ioTests {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Pn=function(){return e},e}function Dn(){var e=(0,g.Z)(["\n  mutation UpdateModelSolution($input: UpdateReplTemplateModelSolutionInput!) {\n    updateReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Dn=function(){return e},e}var Bn={},Un=(0,Z.Ps)(Pn(),Gn.vs);var An=(0,Z.Ps)(Dn(),Gn.vs);var Ln,On=t(76719),_n=t(50769),Xn=t(55418),zn=t(16679),Mn=function(e){var n,t,i,o,a,s,u,f,h,v=e.replId,g=e.onDone,Z=(0,qe.Z)(),y=Z.showConfirm,x=Z.showError,w=function(e){var n=(0,m.Z)({},Bn,e);return M.a(Un,n)}({variables:{replId:v},onCompleted:function(e){var n,t,r=e.repl;"Repl"===r.__typename&&(null===(n=r.origin)||void 0===n||null===(t=n.template)||void 0===t?void 0:t.modelSolution)&&"ReplTemplateModelSolution"===r.origin.template.modelSolution.__typename&&(G(r.origin.template.modelSolution.visibleAfterSubmitting),B(r.origin.template.modelSolution.visibleAfterPassingTests),L(r.origin.template.modelSolution.visibleAfterDueDate))}}),k=w.data,C=w.loading,S=(0,l.Z)(function(e){var n=(0,m.Z)({},Bn,e);return b.D(An,n)}({onError:function(e){return x(e.message)},onCompleted:function(){y("Updated solution"),g()}}),2),I=S[0],T=S[1],E=(0,l.Z)(c.useState(!1),2),R=E[0],G=E[1],P=(0,l.Z)(c.useState(!1),2),D=P[0],B=P[1],U=(0,l.Z)(c.useState(!1),2),A=U[0],L=U[1],O=(0,l.Z)(c.useState(),2),_=O[0],X=O[1],z=(0,Rn.U)();if(c.useEffect((function(){var e="Students can ";if(R||A||D){e+="view the solution after";var n=[];R&&n.push("submitting their project"),D&&n.push("passing all tests"),A&&n.push("the due date has passed");for(var t=0;t<n.length;t++)t>0&&(e+=",",t===n.length-1&&(e+=" and")),e+=" "+n[t];e+="."}else e+="never view the solution.";X(e)}),[R,D,A]),C)return(0,r.tZ)(d.G,{css:[p.l0.center],children:(0,r.tZ)(se.Z,{})});var j="Repl"===(null===k||void 0===k?void 0:k.repl.__typename)&&"Team"===(null===(n=k.repl.owner)||void 0===n?void 0:n.__typename)&&(null===(t=k.repl.owner)||void 0===t?void 0:t.id),W="Repl"===(null===k||void 0===k?void 0:k.repl.__typename)&&(null===(i=k.repl.origin)||void 0===i||null===(o=i.template)||void 0===o?void 0:o.modelSolution);if(!W)return null;var N=W.id,F="Repl"===(null===k||void 0===k?void 0:k.repl.__typename)&&((null===(a=k.repl.origin)||void 0===a?void 0:a.ioTests.length)||(null===(s=k.repl.origin)||void 0===s||null===(u=s.unitTests)||void 0===u?void 0:u.tests.length)),V="Repl"===(null===k||void 0===k?void 0:k.repl.__typename)&&(null===(f=k.repl.origin)||void 0===f||null===(h=f.template)||void 0===h?void 0:h.dueDate);return(0,r.tZ)("form",{onSubmit:function(e){e.preventDefault(),j&&N&&I({variables:{input:{teamId:j,solutionId:N,visibleAfterSubmitting:R,visibleAfterPassingTests:D,visibleAfterDueDate:A}}})},children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(ne.h4,{level:1,variant:"headerDefault",children:"Update solution"}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(16)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(zn.X,{id:z("availableAfterSubmitting"),checked:R,onChange:function(){return G(!R)}}),(0,r.tZ)("label",{htmlFor:z("availableAfterSubmitting"),children:(0,r.tZ)(ne.xv,{multiline:!1,children:"Available after submitting"})})]}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(zn.X,{id:z("availableAfterPassingTests"),checked:D,onChange:function(){return B(!D)}}),(0,r.tZ)("label",{htmlFor:z("availableAfterPassingTests"),children:(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(ne.xv,{multiline:!1,children:"Available after passing tests"}),(0,r.BX)(ne.xv,{multiline:!1,children:["(",F?"".concat(F," ").concat((0,_n.Z)("test",F)," defined"):"no tests exist yet",")"]})]})})]}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,r.tZ)(zn.X,{id:z("availableAfterDueDate"),checked:A,onChange:function(){return L(!A)}}),(0,r.tZ)("label",{htmlFor:z("availableAfterDueDate"),children:(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(ne.xv,{multiline:!1,children:"Available after due date"}),(0,r.BX)(ne.xv,{css:{textDecoration:"italic"},multiline:!1,children:["(",V?(0,On.p)(V):"no due date set yet",")"]})]})})]})]}),(0,r.tZ)(Xn.E,{text:"".concat(_),colorway:R||D||A?"positive":"negative"}),(0,r.tZ)(d.G,{css:{alignItems:"end"},children:(0,r.tZ)(J.zx,{type:"submit",stretch:!1,colorway:"primary",text:"".concat(T.loading?"Saving...":"Save"),iconLeft:(0,r.tZ)(Sn.Z,{}),disabled:T.loading})})]})})},jn=(Ln={},(0,f.Z)(Ln,v.Sy.PublishTemplate,"Publish project"),(0,f.Z)(Ln,v.Sy.EditTemplate,"Edit project"),(0,f.Z)(Ln,v.Sy.Submit,"Submit"),(0,f.Z)(Ln,v.Sy.Resubmit,"Resubmit"),(0,f.Z)(Ln,v.Sy.UpdateModelSolution,"Update solution"),Ln);function Wn(e){var n=e.cta,t=e.replId,i=e.isGroupProject,o=e.openIOtesterPane,a=(0,l.Z)(c.useState(null),2),s=a[0],u=a[1],d=function(){return u(null)},p=(0,Re.R3)(),f=(0,re.Z)().fs,h=(0,l.Z)(c.useState(0),2),m=h[0],g=h[1];c.useEffect((function(){if(p&&!(0,En.T3)(p)&&!(0,En.sL)(p)){var e=f.watchTextFile(p,{onChange:function(e){e.changeSource===Tn.Fl.Local&&g(Date.now())}});return e}}),[p,f,g]);var Z=Boolean(s&&[v.Sy.PublishTemplate,v.Sy.EditTemplate].includes(s));return c.useEffect((function(){n===v.Sy.ReviewSubmission&&(gn.Z.get("annotations/educationModalDismissed")||(u(n),gn.Z.set("annotations/educationModalDismissed",!0)))}),[n]),(0,r.BX)(r.HY,{children:[jn[n]&&(0,r.tZ)(J.zx,{onClick:function(){return u(n)},text:jn[n],iconLeft:(0,r.tZ)(Sn.Z,{})}),(0,r.tZ)(He.u,{isOpen:s===v.Sy.Submit||s===v.Sy.Resubmit,onRequestClose:d,maxWidth:512,children:(0,r.tZ)(In,{replId:t,onDone:d,isResubmit:s===v.Sy.Resubmit,lastUpdated:m,openIOtesterPane:o})}),(0,r.tZ)(He.u,{preventClose:!0,isOpen:Z,onRequestClose:d,maxWidth:i?900:550,children:(0,r.tZ)(Zn.Z,{replId:t,onDone:d})}),(0,r.tZ)(He.u,{isOpen:s===v.Sy.UpdateModelSolution,onRequestClose:d,maxWidth:600,children:(0,r.tZ)(Mn,{replId:t,onDone:d})})]})}var Nn=t(99829),Fn=t(90234),Vn=t(71999),Hn=t(57135),Yn=t(96583),qn=t(24531),Kn=t(35742),$n=t(85919),Qn=t(51087),Jn=t(59341),et=t(11730),nt=t(86763),tt=t.n(nt),rt=t(28999),it=t(28132),ot=t(92674),at=t.n(ot),lt=t(30504);function ct(e){var n=e.isStacked,t=e.isHTML,r=e.isExtension,i=e.codeEditorPath,o=void 0===i?"":i,a={codeEditor:{paneId:at()(),pane:{type:"codeEditor",data:{path:o}}},output:{paneId:at()(),pane:{type:t?"webview":"runnerOutput"}},shell:{paneId:at()(),pane:{type:"shell"}},ghostwriter:{paneId:at()(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:at()(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:at()(),pane:{type:"docs",data:{url:lt.TT.EXTENSIONS}}}},l={};Object.values(a).forEach((function(e){var n=e.paneId,t=e.pane;l[n]=t}));var c=function(e){var n=e.codeEditorId,t=e.outputId,r=e.shellId,i=e.extensionDevtoolsId,o=e.extensionDocsId,a=e.isStacked,l=e.isExtension,c=a?{type:"split",stacked:!0,percent:100,children:[{id:at()(),percent:60,type:"paneGroup",panes:[n],activeIndex:0},{id:at()(),percent:40,type:"paneGroup",panes:[t,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:at()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:at()(),percent:45,type:"paneGroup",panes:[t,r],activeIndex:0}]};return l&&(c=a?{type:"split",stacked:!0,percent:100,children:[{id:at()(),percent:40,type:"paneGroup",panes:[n],activeIndex:0},{id:at()(),percent:60,type:"paneGroup",panes:[i,o,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:at()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:at()(),percent:45,type:"paneGroup",panes:[i,o,r],activeIndex:0}]}),{floating:[],tiling:c}}({codeEditorId:a.codeEditor.paneId,outputId:a.output.paneId,shellId:a.shell.paneId,extensionDevtoolsId:a.extensionDevtools.paneId,extensionDocsId:a.extensionDocs.paneId,isStacked:n,isExtension:r});return{layout:c,data:l}}function st(e){var n=e.codeEditorPath,t=e.isHTML,r=ct({isStacked:e.isStacked,isHTML:t,isExtension:e.isExtension,codeEditorPath:n});return{data:r.data,layout:r.layout,type:"default",sidebarPercent:15}}var ut=t(92153),dt=t(81202),pt=t.n(dt),ft=t(55749),ht=t(19692);function vt(e,n){var t=(0,ft.Z)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!==typeof o)throw new Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw new Error("Expected paneGroup");return a}if("tiling"!==r)throw new Error("Expected tiling path");var l=e.tiling;if(!l)return null;var c=l,s=i.length,u=0,d=!0,p=!1,f=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;if("paneGroup"===c.type)break;if("number"!==typeof m)throw new Error("Expected number");u++,c=c.children[m]}}catch(g){p=!0,f=g}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}return s===u?c:null}function mt(e,n){var t=e.floating.find((function(e){return e.panes.includes(n)}));if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw new Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,c=void 0;try{for(var s,u=o.node.children[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,We.Z)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(p){l=!0,c=p}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function gt(e,n,t){if("paneGroup"===e.type)return{paneGroup:e,path:t};var r=0,i=e.children.length-1;return"topRight"!==n||e.stacked?("bottomRight"===n||"bottomLeft"===n&&e.stacked)&&(r=i):r=i,gt(e.children[r],n,(0,We.Z)(t).concat([r]))}function Zt(e,n){var t=e.tiling;return t?gt(t,n,["tiling"]):null}function bt(e,n){var t=e.tiling,r=e.floating,i=(0,We.Z)(r);for(t&&i.push(t);i.length;){var o,a=i.shift();if(!a)throw new Error("Expected item");if("split"===a.type)(o=i).push.apply(o,(0,We.Z)(a.children));else if(a.id===n)return a}return null}function yt(e,n){var t=function(){var e=i.shift();if(!e)throw new Error("Expected item");var t=(0,l.Z)(e,2),r=t[0],o=t[1];return"split"!==r.type?"continue":r.children.some((function(e){return"paneGroup"===e.type&&e.id===n}))?{v:{node:r,path:o}}:void r.children.forEach((function(e,n){i.push([e,(0,We.Z)(o).concat([n])])}))},r=e.tiling;if(null===r)return null;for(var i=[[r,["tiling"]]];i.length;){var o=t();if("object"===(0,ht.Z)(o))return o.v}return null}function xt(e,n){var t=mt(e,n);if("paneGroup"===(null===t||void 0===t?void 0:t.paneGroup.type)){var r=yt(e,t.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(t.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function wt(e){if(e.length<1)throw new Error("Expected a path with a parent");return e.slice(0,-1)}function kt(e){return"floatingPaneGroup"!==e.type}var Ct={top:0,bottom:0,left:0,right:0};function St(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?Ct:o,l=[],c=[],s=[],u=[],d=null;function p(n,t,o,a){var l=t.children.indexOf(n),f=t.children.length,h=t.stacked?o.height:o.width;var v=function(){var e=o.width,a=o.height,l=n.percent/100;return t.stacked?a=(h-(r*(f-1)+i*f))*l+i:e=(h-r*(f-1))*l,{width:e,height:a}}(),m=v.width,g=v.height,Z=function(){var e=o.x,n=o.y;if(0===l)return{x:e,y:n};if(!d)throw new Error("Expected previousRect");return t.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),b={x:Z.x,y:Z.y,height:g,width:m};if(d=b,"paneGroup"===n.type){var y,x={x:b.x,y:b.y+i,width:b.width,height:b.height-i},w={x:x.x,y:x.y-i,width:x.width,height:i};u.push({id:n.id,rect:w,panes:n.panes,activeIndex:n.activeIndex,path:a}),(y=c).push.apply(y,(0,We.Z)(n.panes.map((function(e,t){return{paneId:e,rect:x,active:t===n.activeIndex}}))))}else n.children.forEach((function(e,t){return p(e,n,b,(0,We.Z)(a).concat([t]))}));if(0!==l){var k={x:b.x-(t.stacked?0:r),y:b.y-(t.stacked?r:0),width:t.stacked?b.width:r,height:t.stacked?r:b.height},C=wt(a),S=(0,We.Z)(C).concat([l-1]),I=vt(e,S);if(!I||!kt(I))throw new Error("Expected leftNode");var T=void 0;0===I.percent?T="left":0===n.percent&&(T="right"),s.push({parentPath:C,leftPath:S,rightPath:a,stacked:t.stacked,rect:k,snapped:T})}}var f={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},h=e.tiling;if("paneGroup"===(null===h||void 0===h?void 0:h.type)){var v,m={x:f.x,y:f.y+i,width:f.width,height:f.height-i},g={x:m.x,y:m.y-i,width:m.width,height:i};u.push({id:h.id,rect:g,panes:h.panes,activeIndex:h.activeIndex,path:["tiling"]}),(v=c).push.apply(v,(0,We.Z)(h.panes.map((function(e,n){return{paneId:e,rect:m,active:n===h.activeIndex}}))))}else h&&h.children.forEach((function(e,n){return p(e,h,f,["tiling",n])}));var Z={x:f.x-a.left,y:f.y-a.top,width:f.width+a.left+a.right,height:f.height+a.top+a.bottom};return e.floating.forEach((function(e,n){var t,r=It(e.rect,{inside:Z,minVisibleX:2*i,minVisibleY:i}),o={height:i,width:e.rect.width,x:r.x,y:r.y},a={x:r.x,y:r.y+i,width:e.rect.width,height:Math.max(e.rect.height-i,0)};u.push({id:e.id,rect:o,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),(t=l).push.apply(t,(0,We.Z)(e.panes.map((function(n,t){return{paneId:n,rect:a,active:t===e.activeIndex}}))))})),{tiles:c,gutters:s,headers:u,floating:l}}function It(e,n){var t=n.inside,r=n.minVisibleX,i=n.minVisibleY,o=-e.width+r,a=t.width-r,l=t.height-i;return{x:Math.min(Math.max(o,e.x),a),y:Math.min(Math.max(0,e.y),l)}}var Tt=t(15859),Et=(0,Fn.cn)([]),Rt=(0,Fn.cn)([]),Gt=(0,Fn.cn)([]),Pt={x:0,y:0,width:0,height:0},Dt={type:"commands",data:{autoFocus:!1}};var Bt=(0,Tt.xu)((function(e){return(0,Fn.cn)(function(e){return{paneId:e,type:"tile",rectAtom:(0,Fn.cn)((0,m.Z)({},Pt)),data:(0,Fn.cn)((0,m.Z)({},Dt)),isHidden:!1,isCommitted:!1}}(e))})),Ut=(0,Fn.cn)((function(e){return e(Et).map((function(n){return e(Bt(n))}))})),At=(0,Fn.cn)((function(e){return e(Ut).filter((function(e){return!e.isHidden}))})),Lt=(0,Fn.cn)((function(e){return e(Ut).filter((function(e){return e.isHidden}))})),Ot=(0,Fn.cn)((function(e){return e(Gt).map((function(n){return e(Xt(n))}))})),_t=(0,Tt.xu)((function(e){return(0,Fn.cn)(function(e){return{handleId:e,rect:Pt,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]}}(e))})),Xt=(0,Tt.xu)((function(e){return(0,Fn.cn)({id:e,rectAtom:(0,Fn.cn)((0,m.Z)({},Pt)),panes:[],path:["tiling"],activeIndex:0})})),zt=(0,Fn.cn)((function(){return 32})),Mt=(0,Fn.cn)({x:0,y:0,width:0,height:0}),jt=(0,Fn.cn)({width:0}),Wt=(0,Fn.cn)(null),Nt=(0,Fn.cn)(null,(function(e,n,t){t!==e(Wt)&&n(Wt,t)})),Ft=(0,Fn.cn)(null,(function(e,n,t){var r=Bt(t);e(r).isCommitted||n(r,(function(e){return(0,ut.ZP)(e,(function(e){e.isCommitted=!0}))}))})),Vt=(0,Fn.cn)((function(e){var n=e(Wt);if(!n)return null;var t=e(Bt(n)),r=e(t.data);return(0,qn.Ur)(r)&&r.data.path||null})),Ht=(0,Fn.cn)(!0),Yt=(0,Fn.cn)({tiling:null,floating:[]}),qt=(0,Fn.cn)((function(e){return e(Ut).filter((function(n){return(0,qn.Ur)(e(n.data))}))})),Kt=(0,Fn.cn)((function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(Ut)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&(0,qn.Ur)(e(a.data)))return a.paneId}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null})),$t=(0,Fn.cn)((function(e){return e(qt).map((function(n){return{paneId:n.paneId,filePath:e(n.data).data.path}})).filter((function(e){return e.filePath&&e.filePath.length>0}))})),Qt=(0,Fn.cn)((function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(At)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n})),Jt=(0,Fn.cn)((function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(Lt)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n})),er=(0,Fn.cn)((function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(Ut)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n})),nr=(0,Fn.cn)((function(e){return e(er).length})),tr=(0,Fn.cn)((function(e){var n=e(Mt);return Boolean(n.width&&n.height)})),rr=(0,Fn.cn)(null),ir=(0,Fn.cn)((function(e){var n=e(Wt);if(!n)return null;var t=e(Bt(n)).rectAtom,r=e(t),i=e(zt);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}})),or=(0,Fn.cn)(null,(function(e,n,t){var r=e(qt).find((function(n){return t===(0,qn.DQ)(e(n.data))}));r&&(n(Nt,r.paneId),n(Ft,r.paneId))})),ar=(0,Fn.cn)(null,(function(e,n,t){n(e(Bt(t.paneId)).data,t.pane),t.makeActive&&n(Nt,t.paneId),t.commit&&n(Ft,t.paneId)})),lr=(0,Fn.cn)(null);function cr(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function sr(e,n){var t=function(e){var n=e.rect,t=e.point,r=n.height>n.width?n.width/n.height:1,i=n.width>n.height?n.height/n.width:1,o=(t.x-n.x)*i,a=(n.x+n.width-t.x)*i,l=(t.y-n.y)*r,c=(n.y+n.height-t.y)*r,s=Math.min(o,a,l,c);return s===o?"left":s===a?"right":s===l?"top":"bottom"}({point:e,rect:n}),r={x:n.x,y:n.y,width:n.width,height:n.height},i="below";return"top"===t?(r.height=n.height/2,i="above"):"bottom"===t?(r.height=n.height/2,r.y=n.y+n.height/2,i="below"):"left"===t?(r.width=n.width/2,r.x=n.x,i="leftOf"):"right"===t&&(r.width=n.width/2,r.x=n.x+n.width/2,i="rightOf"),{placement:i,rect:r}}function ur(e){return"handle:"+e.leftPath.join(":")}function dr(e){return(0,$n.Z)((function(){return(0,Tt.kv)(e,(function(e){return{width:e.width,height:e.height}}),(function(e,n){return Boolean(e.height===n.height&&e.width===n.width)}))}),[e])}function pr(e){return(0,$n.Z)((function(){return(0,Tt.kv)(e,(function(e){return{x:e.x,y:e.y}}),(function(e,n){return Boolean(e.x===n.x&&e.y===n.y)}))}),[e])}var fr=t(97652),hr=(0,Fn.cn)(6),vr=(0,Fn.cn)((function(e){var n=e(zt),t=e(jt),r=e(Mt),i=e(hr);return{headerHeight:n,inset:6===i?{top:0,bottom:i+2,left:i+t.width,right:i+2}:{top:0,bottom:0,left:t.width,right:0},gap:i,size:{width:r.width,height:r.height}}})),mr=(0,Fn.cn)(null,(function(e,n,t){n(Mt,t),n(Zr,e(Yt))}));function gr(e,n){return pt()(e,n)}var Zr=(0,Fn.cn)(null,(function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var c=Bt(r),s=e(c);gr(e(s.rectAtom),i)||n(s.rectAtom,i);var u=(0,ut.ZP)(s,(function(e){e.paneId=r,e.type=o,e.isHidden=a}));gr(s,u)||n(c,u)},i=e(Et),o=e(Rt),a=e(Gt),l=new Set(i),c=new Set(o),s=new Set(a),u=St(t,e(vr)),d=u.tiles,p=u.floating,f=u.gutters,h=u.headers,v=f.map(ur);gr(o,v)||n(Rt,v);var m=(0,We.Z)(d).concat((0,We.Z)(p)).map((function(e){return e.paneId}));gr(i,m)||n(Et,(0,fr.Z)(m,{existing:i,getKey:function(e){return e}}));var g=[];h.forEach((function(t){s.delete(t.id);var r=Xt(t.id),i=e(r);g.push(t.id),gr(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,ut.ZP)(i,(function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path}));gr(i,o)||n(r,o)})),gr(a,g)||n(Gt,g),d.forEach((function(e){var n=e.paneId,t=e.rect,i=e.active;r({paneId:n,rect:t,isHidden:!i,type:"tile"})})),p.forEach((function(e){var n=e.paneId,t=e.rect,i=e.active;r({paneId:n,rect:t,isHidden:!i,type:"floating"})})),f.forEach((function(t){var r={handleId:ur(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};c.delete(r.handleId);var i=_t(r.handleId);gr(e(i),r)||n(i,r)})),l.forEach(Bt.remove),c.forEach(_t.remove),s.forEach(Xt.remove);var Z=e(Wt);Z&&l.has(Z)&&n(Wt,null),n(Yt,t)})),br=t(85234),yr=t.n(br);function xr(){var e=(0,g.Z)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return xr=function(){return e},e}var wr={},kr=(0,Z.Ps)(xr());var Cr=t(20854);function Sr(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=vt(e,t);if(!a||!kt(a))throw new Error("Expected leftNode");var l=vt(e,wt(t));if("split"!==(null===l||void 0===l?void 0:l.type))throw new Error("Expected splitNode");var c=l.children.indexOf(a);if(-1===c)throw new Error("Expected leftNodeIndex");var s=c+1,u=l.children[s];if(!u)throw new Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&c>0)for(var d=Math.abs(r),p=c-1;d>0;){var f=l.children[p];if(f.percent>d){f.percent-=d;break}if(d-=f.percent,f.percent=0,0===p)break;p--}var h=l.children.reduce((function(e,n){return n===u?e:e+n.percent}),0);u.percent=100-h}else{var v=a.percent+u.percent,m=l.children.slice(c).reduce((function(e,n){return e+n.percent}),0);if(r>v-o){if(a.percent=Math.min(m,Math.max(v,r)),u.percent=0,r>v&&s<l.children.length-1)for(var g=r-v,Z=s+1;g>0;){var b=l.children[Z];if(b.percent>g){b.percent-=g;break}if(g-=b.percent,b.percent=0,Z===l.children.length-1)break;Z++}}else{var y=a.percent-r;u.percent=u.percent+y,a.percent=r}}}function Ir(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=vt(e,t);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=wt(t);o.length;){var a=vt(e,o);if(!a)break;o=wt(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=vt(n,t);if("split"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,s=r.inset,u=void 0===s?{top:0,bottom:0,left:0,right:0}:s,d=o.children.length,p=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(u.top+u.bottom):a.width-(u.left+u.right))-p)}var Tr=(0,Fn.cn)(null),Er=(0,Fn.cn)(null,(function(e,n,t){if("end"!==t.type)if("update"!==t.type){var r=e(Yt),i=t.stacked?window.innerHeight:window.innerWidth,o=vt(r,t.leftPath);if(!o||!kt(o)){var a=new Error("Expected left node");throw n(rr,{error:a,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),a}var l=wt(t.leftPath),c=o.percent,s=30/i*100,u=null;try{u=Ir({splitPath:l,layout:r,tilingOptions:e(vr)})}catch(x){throw n(rr,{error:x,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),x}if(null===u)throw new Error("Expected resizeDistance");n(Tr,{stacked:t.stacked,leftPath:t.leftPath,startPercent:c,resizeDistance:u,snapPercent:s,initialLayout:r})}else{var d=e(Tr);if(!d){var p=new Error("Expected tilingResize");throw n(rr,{error:p,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),p}var f=d.stacked,h=d.leftPath,v=d.startPercent,m=d.resizeDistance,g=d.initialLayout,Z=d.snapPercent,b=v+(f?t.moveDelta.y:t.moveDelta.x)/m*100,y=(0,ut.ZP)(g,(function(e){Sr(e,{leftPath:h,percent:b,snapPercent:Z})}));n(Zr,y)}else n(Tr,null)}));function Rr(e){return(0,$n.Z)((function(){return _t(e)}),[e])}function Gr(e){var n=Rr(e);return(0,$n.Z)((function(){return(0,Tt.kv)(n,(function(e){return e.rect}))}),[n])}function Pr(e){return(0,$n.Z)((function(){return(0,Fn.cn)((function(n){var t=n(Tr);return!!t&&e===ur({leftPath:t.leftPath})}))}),[e])}function Dr(e){var n=Rr(e);return(0,$n.Z)((function(){return(0,Tt.kv)(n,(function(e){return e.stacked}))}),[n])}var Br=(0,Fn.cn)(null,(function(e,n){0!==e(jt).width&&(n(jt,{width:0}),n(Zr,e(Yt)))})),Ur=(0,Fn.cn)(null,(function(e,n){var t=e(jt).width>0?0:Vr;n(jt,{width:t}),n(Zr,e(Yt))})),Ar=(0,Fn.cn)(null),Lr=(0,Fn.cn)(null,(function(e,n){var t=e(jt);n(Ar,{sidebarWidthStart:t.width})})),Or=(0,Fn.cn)(null,(function(e,n,t){var r=t.deltaX,i=e(Ar);if(i){var o=e(Mt),a=i.sidebarWidthStart+r;if((a=Math.min(Math.max(a,0),Math.min(o.width,Wr)))<Hr&&!(r>0)){if(Hr-a<Nr)return;a=0}n(jt,{width:a}),n(Zr,e(Yt))}})),_r=(0,Fn.cn)(null,(function(e,n){if(e(Ar)){var t=e(jt);t.width<Hr&&(n(jt,{width:0===t.width?0:Hr}),n(Zr,e(Yt))),n(Ar,null)}})),Xr=(0,Fn.cn)((function(e){return Boolean(e(Ar))})),zr=(0,Fn.cn)((function(e){return e(Xr)?{width:1,height:e(Mr).height}:{width:2,height:24}})),Mr=(0,Fn.cn)((function(e){var n=e(Mt).height,t=e(jt),r=e(hr);return{x:t.width,y:0,height:n-r,width:r}})),jr=(0,Fn.cn)((function(e){return e(Mr).height})),Wr=600,Nr=80,Fr=(0,Fn.cn)((function(e){return e(jt).width})),Vr=220,Hr=180,Yr=(0,Fn.cn)((function(e){return e(Fr)>0}));var qr=(0,Fn.cn)((function(e){var n=e(Mt);return function(e,n){var t=n.min,r=n.max;return Math.min(Math.max(t,e),r)}(e(Fr)/n.width*100,{min:0,max:100})})),Kr=(0,Fn.cn)((function(e){var n=e(Yt),t={};e(Ut).forEach((function(n){t[n.paneId]=e(n.data)}));var r=e(qr);return{layout:n,data:t,sidebarPercent:r}})),$r=(0,Fn.cn)(null),Qr=(0,Fn.cn)(null),Jr=(0,Fn.cn)(null);function ei(e,n){return ni.apply(this,arguments)}function ni(){return ni=(0,Hn.Z)((function(e,n){var t,r;return(0,Yn.__generator)(this,(function(i){switch(i.label){case 0:r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===Cr.l||void 0===Cr.l?void 0:Cr.l.mutate({mutation:kr,variables:{input:{replId:e,state:n}}})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{success:!1,retry:!0}];case 4:return"Repl"===(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.setReplLayoutState.__typename)?[2,{success:!0,retry:void 0}]:[2,{success:!1,retry:!1}]}}))})),ni.apply(this,arguments)}var ti=(0,Fn.cn)(null,function(){var e=(0,Hn.Z)((function(e,n,t){var r,i,o,a,l,c;return(0,Yn.__generator)(this,(function(s){switch(s.label){case 0:return(r=e(Qr))&&!r.retry||r&&Date.now()-r.timestamp<6e4?[2]:e(tr)?(i=e(Kr),o=t.replId,a=e($r),!t.force&&pt()(a,i)?[2]:(l=yr()(),n(Jr,l),[4,ei(o,i)])):[2];case 1:return c=s.sent(),e(Jr)!==l?[2]:(n(Jr,null),c.retry?(n(Qr,{timestamp:Date.now(),retry:!0}),[2]):c.success?(n($r,i),[2]):(n(Qr,{timestamp:Date.now(),retry:!1}),[2]))}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),ri=(0,Fn.cn)(null,(function(e,n,t){var r=t.data,i=t.layout,o=t.sidebarPercent,a=t.type;Object.entries(r).forEach((function(t){var r=(0,l.Z)(t,2),i=r[0],o=r[1],a=Bt(i);n(a,(0,ut.ZP)(e(a),(function(e){e.isCommitted=!0}))),n(e(a).data,o)}));var c=window.innerWidth,s=Math.floor(o)>0?Math.min(c*(o/100),Wr):0;n(jt,{width:s>0?Math.max(Vr,s):Math.max(0,s)}),n(Zr,i),n(lr,a),n($r,e(Kr))}));function ii(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating)e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});else{var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=mt(e,n.relativeTo);if(!i)throw new Error("Expected pane");r=i.paneGroupPath}if(null===r)throw new Error("Expected relativeTo");if("tiling"!==r[0])throw new Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,c="above"===o||"below"===o,s="rightOf"===o||"below"===o;if(e.tiling||1!==r.length){if(!e.tiling)throw new Error("Expected tiling");var u=vt(e,r);if(!u||!kt(u))throw new Error("Expected tiled node");if(1!==r.length||"replace"!==o){if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];return e.tiling={type:"split",percent:100,stacked:c,children:d},void oi({id:n.id,insertIndex:s?1:0,panes:a,children:d,percent:l,activeIndex:t})}if(1===r.length&&"split"===e.tiling.type){if(Boolean(e.tiling.stacked)===Boolean(c))return void oi({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:s?e.tiling.children.length:0,children:e.tiling.children});var p={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},f=s?[u,p]:[p,u];return u.percent=100-p.percent,void(e.tiling={type:"split",stacked:c,children:f,percent:100})}if(0===r.length)throw new Error("Expected relativeTo length");var h=vt(e,wt(r));if("split"!==(null===h||void 0===h?void 0:h.type))throw new Error("Expected split parent");if("replace"!==o)if(Boolean(h.stacked)!==Boolean(c))if(Boolean(h.stacked)===Boolean(c));else{var v={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},m=s?[u,v]:[v,u],g=u.percent;u.percent=100-v.percent;var Z=h.children.indexOf(u);h.children[Z]={type:"split",stacked:c,children:m,percent:g}}else{var b=h.children.indexOf(u);oi({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:s?b+1:b,children:h.children})}else{var y=h.children.indexOf(u);h.children.splice(y,1,{id:n.id,panes:a,percent:u.percent,type:"paneGroup",activeIndex:t})}}else e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t}}else e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t}}}function oi(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0===t){var l=r.reduce((function(e,n){return e+n.percent}),0)/r.length,c=100/(100+l);r.forEach((function(e){e.percent=e.percent*c}));var s={id:n,panes:i,type:"paneGroup",percent:l*c,activeIndex:a};r.splice(o,0,s)}else{var u=(100-t)/100;r.forEach((function(e){e.percent=e.percent*u}));var d={id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a};r.splice(o,0,d)}}function ai(e,n){var t=bt(e,n.paneGroupId);if(!t)throw new Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate,a=void 0===o||o;if(void 0!==r&&r>e.panes.length)throw new Error("Invalid index");var l=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[l,0].concat((0,We.Z)(i))),a&&(e.activeIndex=l)}(t,n)}function li(e,n){e.panes.splice(n,1),0!==e.activeIndex&&(n>e.activeIndex||(e.activeIndex=e.activeIndex-1))}function ci(e,n){var t=mt(e,n);if(!t)throw new Error("Expected pane");if(t.floating)if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!==typeof r)throw new Error("Expected floatingIndex");si(e,["floating",r])}else li(t.paneGroup,t.index);else{var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw new Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw new Error("Expected paneIndex");a||1!==i.panes.length?i.panes.length>1?li(i,l):si(e,o):e.tiling=null}}function si(e,n){var t=(0,ft.Z)(n),r=t[0],i=t.slice(1);if("tiling"!==r||0!==i.length)if("floating"!==r||0!==i.length){var o=vt(e,n);if(!o)throw new Error("Expected node");if("floatingPaneGroup"!==o.type){var a=wt(n),c=vt(e,a);if("split"!==(null===c||void 0===c?void 0:c.type))throw new Error("Expected split");var s=c.children.indexOf(o);if(-1===s)throw new Error("Expected paneGroupIndex");var u=c.children;if(u.splice(s,1),u.length>1){var d=100/u.reduce((function(e,n){return e+n.percent}),0);u.forEach((function(e){e.percent=e.percent*d}))}else{var p=(0,l.Z)(u,1)[0],f=a.length>1?vt(e,wt(a)):null;if(!f)return p.percent=100,void(e.tiling=p);if("split"!==f.type)throw new Error("Expected split");var h=f.children.indexOf(c);if(-1===h)throw new Error("Expected parentIndex");p.percent=c.percent,f.children[h]=p}}else{var v=e.floating.indexOf(o);if(-1===v)throw new Error("Expected paneGroupIndex");e.floating.splice(v,1)}}else e.floating=[];else e.tiling=null}var ui=(0,Fn.cn)(!1),di=(0,Fn.cn)((function(e){return e(ui)?e(Wt):null})),pi=(0,Fn.cn)(null,(function(e,n,t){n(Nt,t),n(ui,!0)})),fi=(0,Fn.cn)(null,(function(e,n,t){n(ui,!0);var r=bt(e(Yt),t.paneGroupId);if(!r){var i=new Error("Expected paneGroup");throw n(rr,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=new Error("Expected paneId");throw n(rr,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(Nt,o)})),hi=(0,Fn.cn)(null,(function(e,n){n(ui,!1)})),vi=(0,Fn.cn)(null,(function(e,n,t){e(di)===t?n(hi):n(pi,t)})),mi=(0,Fn.cn)(null,(function(e,n,t){var r=bt(e(Yt),t.paneGroupId);if(!r){var i=new Error("Expected paneGroup");throw n(rr,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=new Error("Expected paneId");throw n(rr,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(vi,o)})),gi=(0,Fn.cn)((function(e){var n=e(Mt);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}})),Zi=(0,Fn.cn)((function(e){var n=e(zt),t=e(gi);return{x:t.x,y:t.y,width:t.width,height:n}})),bi=(0,Fn.cn)((function(e){var n=e(zt),t=e(gi);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}})),yi=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=bt(r,t.paneGroupId);if(!i){var o=new Error("Expected pane group");throw n(rr,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,ut.ZP)(r,(function(e){try{i.panes.forEach((function(n){ci(e,n)}))}catch(o){throw n(rr,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}}));e(ui)&&n(ui,!1),n(Zr,a)})),xi=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=mt(r,t.paneId);if(!i){var o=new Error("Expected relativeToPane");throw n(rr,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=yr()(),l=e(Bt(a));n(l.data,{type:"commands",data:{autoFocus:Boolean(t.autoFocus)}});var c=(0,ut.ZP)(r,(function(e){try{ii(e,{id:yr()(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(o){throw n(rr,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}}));n(Zr,c),n(Nt,a)})),wi=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=yr()(),o=e(Bt(i));n(o.data,t.pane);var a=(0,ut.ZP)(r,(function(e){try{ii(e,{id:yr()(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(r){throw n(rr,{error:r,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),r}}));return n(Zr,a),i})),ki=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=(0,ut.ZP)(r,(function(e){Sr(e,{leftPath:t.leftPath,percent:t.percent})}));n(Zr,i)})),Ci=(0,Fn.cn)(null,(function(e,n,t){var r=bt(e(Yt),t);if(!r)return null;n(Nt,r.panes[r.activeIndex])}));var Si=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=mt(r,t);if(!i)throw new Error("Expected pane");var o=!i.paneGroup.panes.some((function(e){return e!==t})),a=t===e(Wt),l=xt(r,t),c=(0,ut.ZP)(r,(function(e){try{ci(e,t)}catch(r){throw n(rr,{error:r,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),r}}));if(n(Zr,c),o&&e(ui)&&n(ui,!1),a&&(o||n(Ci,i.paneGroup.id),o&&l)){do{"split"===l.type&&(l=l.children[0])}while("paneGroup"!==l.type);n(Ci,l.id)}})),Ii=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=mt(r,t),o=null===i||void 0===i?void 0:i.paneGroup.panes.filter((function(e){return e!==t}));if(null===o||void 0===o?void 0:o.length){var a=(0,ut.ZP)(r,(function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){ci(e,a.value)}}catch(c){r=!0,i=c}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(s){throw n(rr,{error:s,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),s}}));n(Zr,a)}})),Ti=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=mt(r,t);if(i){var o=(0,ut.ZP)(r,(function(e){var n=!1,r=!0,o=!1,a=void 0;try{for(var l,c=i.paneGroup.panes[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;n&&ci(e,s),s===t&&(n=!0)}}catch(u){o=!0,a=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}));n(Zr,o)}})),Ei=(0,Fn.cn)(null,(function(e,n,t){if(0===t.panes.length){var r=new Error("Expect at least one pane");throw n(rr,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(Yt),o=t.panes.map((function(){return yr()()})),a=(0,ut.ZP)(i,(function(e){try{ii(e,{id:yr()(),panes:o,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(r){throw n(rr,{error:r,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}}));n(Zr,a),t.panes.forEach((function(t,r){var i=o[r],a=e(Bt(i));n(a.data,t);var l=(0,qn.b)(t.type)?e(Ut).find((function(n){return e(n.data).type===t.type&&n.paneId!==i})):null;l&&n(Si,l.paneId)})),t.makeActive&&n(Nt,o[0])})),Ri={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},Gi=(0,Fn.cn)(null,(function(e,n,t){var r=t.pane,i=t.edge;n(wi,{pane:r,relativeTo:["tiling"],placement:Ri[i]})})),Pi=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=yr()(),o=(0,ut.ZP)(r,(function(e){try{ii(e,{id:yr()(),panes:[i],isFloating:!0,rect:t.rect})}catch(r){throw n(rr,{error:r,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),r}}));n(Zr,o);var a=e(Bt(i));return n(a.data,t.pane),t.makeActive?(n(Nt,i),i):i}));function Di(e,n,t){var r=(0,l.Z)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),i=r[0],o=r[1],a=Math.max(i[0],o[0]);return Math.min(i[1],o[1])-a}function Bi(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}function Ui(e){var n=e.relativeTo,t=e.rects,r=e.direction,i=t.get(n);if(!i)throw new Error("Expected relativeTo rect to be included in rects");var o=null,a=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=(0,l.Z)(u.value,2),f=p[0],h=p[1];if(f!==n){var v=Bi({from:i,other:h,direction:r});if(!(("leftOf"===r||"above"===r)&&v<=0||("rightOf"===r||"below"===r)&&v<0)){var m=Di(i,h,"leftOf"===r||"rightOf"===r?"y":"x");if(!(m<=0))(!o||o.distance>v||o.distance===v&&o.overlap<m)&&(o={key:f,rect:h,distance:v,overlap:m})}}}}catch(g){c=!0,s=g}finally{try{a||null==d.return||d.return()}finally{if(c)throw s}}return(null===o||void 0===o?void 0:o.key)||null}var Ai=t(25602),Li=(0,Fn.cn)(null,(function(e,n,t){if(0===t.panes.length)return[];var r=e(Yt),i=t.panes.map((function(){return yr()()})),o=(0,ut.ZP)(r,(function(e){try{ai(e,{paneIds:i,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(r){throw n(rr,{error:r,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),r}}));return n(Zr,o),t.panes.forEach((function(r,o){var a=i[o],l=e(Bt(a));n(l.data,r);var c=(0,qn.b)(r.type)?e(Ut).find((function(n){return e(n.data).type===r.type&&n.paneId!==a})):null;c&&n(Si,c.paneId),t.commit&&n(Ft,a)})),t.activate&&n(Nt,i[0]),i})),Oi=(0,Fn.cn)(null,(function(e,n,t){var r=t.pane,i=t.activate,o=t.placement,a=e(Yt);if(!a.tiling){var c=n(wi,{pane:r,relativeTo:["tiling"],placement:"replace"});return i&&n(Nt,c),c}if("after"===o.type){var s=mt(a,o.paneId);if(s){var u=(0,l.Z)(n(Li,{panes:[r],paneGroupId:s.paneGroup.id,index:s.index+1,activate:i}),1)[0];return i&&n(Nt,u),u}}if("secondary"===o.type&&o.relativeTo){var d=xt(a,o.relativeTo);if(d){if("paneGroup"===d.type){var p=(0,l.Z)(n(Li,{panes:[r],paneGroupId:d.id,activate:i}),1)[0];return i&&n(Nt,p),p}var f=n(wi,{pane:r,relativeTo:o.relativeTo,placement:"rightOf"});return i&&n(Nt,f),f}var h=mt(a,o.relativeTo);if("floatingPaneGroup"===(null===h||void 0===h?void 0:h.paneGroup.type)){var v=e(Bt(o.relativeTo)),m=e(v.rectAtom);return n(Pi,{rect:{x:m.x+m.width,y:m.y,width:m.width,height:m.height},pane:r,makeActive:i})}}var g=n(wi,{pane:r,relativeTo:["tiling"],placement:"rightOf"});return i&&n(Nt,g),g})),_i=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=mt(r,t);if(!i){var o=new Error("Expected selectedPane");throw n(rr,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}var a=Xt(i.paneGroup.id);n(a,(function(e){return(0,ut.ZP)(e,(function(e){e.activeIndex=i.index}))}));var l=!0,c=!1,s=void 0;try{for(var u,d=i.paneGroup.panes[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value,f=Bt(p);n(f,(function(e){return(0,ut.ZP)(e,(function(e){e.isHidden=e.paneId!==t}))}))}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}n(Yt,(0,ut.ZP)(r,(function(e){try{!function(e,n){var t=mt(e,n);if(!(null===t||void 0===t?void 0:t.paneGroup))throw new Error("Expected pane group");var r=t.paneGroup,i=r.panes.indexOf(n);if(-1===i)throw new Error("Expected index");r.activeIndex=i}(e,t)}catch(o){throw n(rr,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}}))),n(Nt,t)})),Xi=(0,Fn.cn)(null,(function(e,n,t){var r=e(Ut).find((function(n){return e(n.data).type===t}));if(r){if("webview"===t||"vnc"===t)return;return n(_i,r.paneId),void n(Ft,r.paneId)}var i=e(Yt),o=Zt(i,"topRight");if(o&&i.tiling)if("paneGroup"!==i.tiling.type)if("split"!==i.tiling.type||2!==i.tiling.children.length||"paneGroup"!==i.tiling.children[1].type)n(Li,{panes:[{type:t}],paneGroupId:o.paneGroup.id,commit:!0});else{var a=i.tiling.stacked,l=n(wi,{pane:{type:t},relativeTo:o.path,placement:a?"rightOf":"above"});n(Ft,l)}else{var c=n(wi,{pane:{type:t},relativeTo:["tiling"],placement:"rightOf"});n(Ft,c)}else{var s=n(wi,{pane:{type:t},relativeTo:["tiling"],placement:"replace"});n(Ft,s)}})),zi=(0,Fn.cn)(null,(function(e,n){var t=e(Ut).find((function(n){return"threadInbox"===e(n.data).type}));if(t)n(_i,t.paneId);else{var r=e(Yt),i=Zt(r,"bottomRight");i&&r.tiling?"paneGroup"!==r.tiling.type?n(Li,{panes:[{type:"threadInbox"}],paneGroupId:i.paneGroup.id}):n(wi,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"rightOf"}):n(wi,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"replace"})}})),Mi=(0,Fn.cn)(null,(function(e,n,t){var r=e(Ut).find((function(n){return e(n.data).type===t.type}));if(r){var i=e(Yt),o=(0,ut.ZP)(i,(function(e){try{ci(e,r.paneId)}catch(t){throw n(rr,{error:t,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePaneTypeAtom"}),t}}));n(Zr,o)}})),ji=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=(0,ut.ZP)(r,(function(e){var r=mt(e,t.paneId);if(!r){var i=new Error("Expected pane");throw n(rr,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=bt(e,t.toPaneGroupId);if(!o){var a=new Error("Expected toPaneGroup");throw n(rr,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,c=!o.panes.includes(t.paneId);if(!l||c)try{ci(e,t.paneId),ai(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),c&&n(Ft,t.paneId)}catch(s){throw n(rr,{error:s,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),s}}));n(Zr,i)})),Wi=(0,Fn.cn)(null,(function(e,n,t){var r=e(Wt);if(r){var i=e(Yt),o=mt(i,r);if(o){var a=o.paneGroup,l=new Map(e(Ut).filter((function(e){return!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]}))),c=Ui({relativeTo:r,rects:l,direction:t}),s=c?mt(i,c):null;if(s)n(ji,{paneId:r,toPaneGroupId:s.paneGroup.id});else{var u=a.panes.find((function(e){return e!==r}));if(u){var d=(0,ut.ZP)(i,(function(e){ci(e,r),ii(e,{id:yr()(),relativeTo:u,panes:[r],placement:t})}));n(Zr,d)}}}}})),Ni=(0,Fn.cn)(!1),Fi=(0,Fn.cn)(null,(function(e,n,t){var r=e(qt).map((function(n){return{paneId:n.paneId,path:(0,qn.DQ)(e(n.data))}})).filter((function(e){return t===e.path})),i=[],o=e(Yt),a=(0,ut.ZP)(o,(function(e){var t=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var s=l.value.paneId,u=mt(e,s);if(!u){var d=new Error("Expected pane");throw n(rr,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}!u.floating&&1===u.paneGroup.panes.length?i.push(s):ci(e,s)}}catch(p){o=!0,a=p}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}})),l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;n(ar,{paneId:p,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(f){c=!0,s=f}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}n(Zr,a)})),Vi=(0,Fn.cn)(null,(function(e,n,t){var r=t.node.path;if(t.eventType!==Tn.kS.Delete){var i=e(qt).filter((function(n){return(0,qn.DQ)(e(n.data))===r})),o={type:(0,qn.Dp)({path:t.to}),data:{path:t.to}},a=!0,l=!1,c=void 0;try{for(var s,u=i[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value.paneId;n(ar,{paneId:d,pane:o})}}catch(p){l=!0,c=p}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}else n(Fi,r)}));function Hi(e){var n=Xt(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var t=e(n);return e(Bt(t.panes[t.activeIndex])).paneId}))}),[n])}var Yi=(0,Fn.cn)(null,(function(e,n,t){var r=e(Wt),i=e(Yt);if(r){var o=mt(i,r);if(o)return void n(Li,{panes:t,paneGroupId:null===o||void 0===o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length})}var a=Zt(i,"topLeft");if(a)n(Li,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});else{var l=i.floating.length?i.floating[0]:null;l?n(Li,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t}):n(Ei,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}})),qi=(0,Fn.cn)(null,(function(e,n){n(Yi,[{type:"commands",data:{autoFocus:!0}}])})),Ki=(0,Fn.cn)(null,(function(e,n){var t=e(Wt);return!!t&&(n(Si,t),!0)}));var $i=(0,Fn.cn)(null,(function(e,n,t){var r=e(Wt);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=mt(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(Yt),{paneId:r,dir:t});i&&n(_i,i)}}));var Qi=(0,Fn.cn)(null,(function(e,n,t){var r=t.paneId,i=t.pane;n(ar,{paneId:r,pane:i});var o=(0,qn.b)(i.type)?e(Ut).find((function(n){return e(n.data).type===i.type&&n.paneId!==r})):null;if(o){var a=mt(e(Yt),o.paneId);(null===a||void 0===a?void 0:a.floating)||1!==(null===a||void 0===a?void 0:a.paneGroup.panes.length)?n(Si,o.paneId):n(ar,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}})}})),Ji=(0,Fn.cn)(null,(function(e,n,t){var r=e(e(Bt(t.b)).data);n(ar,{paneId:t.a,pane:r});var i=mt(e(Yt),t.b);(null===i||void 0===i?void 0:i.floating)||1!==(null===i||void 0===i?void 0:i.paneGroup.panes.length)?n(Si,t.b):n(Qi,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}})})),eo=(0,Fn.cn)(null,(function(e,n,t){var r=Zt(e(Yt),"topRight"),i=e(Ut).find((function(n){return e(n.data).type===t.pane.type}));if((0,qn.b)(t.pane.type)&&i)return n(_i,i.paneId),void n(ar,{paneId:i.paneId,pane:t.pane,makeActive:!0});if(r){var o=r.paneGroup.panes.find((function(n){var t=e(Bt(n));if(t.isHidden)return!1;var r=e(t.data);return!t.isCommitted&&!(0,qn.RX)(r.type)}));o?n(ar,{paneId:o,pane:t.pane,makeActive:!0}):("debugger"===t.pane.type&&n(Gi,{pane:t.pane,edge:"left"}),n(Li,{panes:[t.pane],paneGroupId:r.paneGroup.id,activate:!0}))}else n(Ei,{panes:[t.pane],placement:"rightOf",relativeTo:["tiling"],makeActive:!0})})),no=(0,c.createContext)(null);function to(e){var n=e.children,t=e.savedLayoutState,i=e.isHTML,o=void 0!==i&&i,a=e.isStacked,l=void 0!==a&&a,s=e.isExtension,u=void 0!==s&&s,d=e.deploymentPane,p=(0,c.useState)((function(){var e=(0,Fn.MT)(),n=t||st({isHTML:o,isStacked:l,isExtension:u});return e.set(ri,n),d&&e.set(eo,{pane:{type:"deployments"}}),e}))[0];return(0,r.tZ)(no.Provider,{value:p,children:n})}function ro(){var e=(0,c.useContext)(no);if(!e)throw new Error("Expected store in context");return e}function io(e){return(0,Vn.Dv)(e,{store:ro()})}function oo(e){return(0,it.b)(e,ro())}var ao=function(e){return(0,Vn.b9)(e,{store:ro()})};function lo(e){return(0,rt.lV)((0,c.useCallback)((function(n){return n(e)}),[e]),{store:ro()})}var co=t(3715),so=t(86093),uo={overlay:s.Is+20,gutterActive:s.Is+19,maximizedTooltip:s.Is+18,maximizedPane:s.Is+17,maximizedHeader:s.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,dropPreview:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1},po=(0,Fn.cn)(null),fo=(0,so.$)(["backgroundColor","borderRadius","zIndex","border","opacity","visiblity","width","height","x","y","innerScale","innerOpacity"]),ho=fo.cssVars,vo=fo.styleTokens,mo=(0,Tt.kv)(po,(function(e){return(0,f.Z)({},ho.border,"detachPreview"===(null===e||void 0===e?void 0:e.type)&&e.progress<.98?"1px dashed ".concat(p.TV.foregroundDefault):"1px solid ".concat(p.TV.accentPrimaryDefault))}),pt()),go=(0,Tt.kv)(po,(function(e){return null===e||void 0===e?void 0:e.rect}),pt()),Zo=(0,Tt.kv)(go,(function(e){var n;return e?(n={},(0,f.Z)(n,ho.width,e.width+"px"),(0,f.Z)(n,ho.height,e.height+"px"),n):null}),pt()),bo=(0,Tt.kv)(go,(function(e){var n;return e?(n={},(0,f.Z)(n,ho.x,e.x+"px"),(0,f.Z)(n,ho.y,e.y+"px"),n):null}),pt()),yo=(0,Tt.kv)(po,(function(e){return e?"detachPreview"===e.type?(n={},(0,f.Z)(n,ho.zIndex,uo.detachPreview.toString()),(0,f.Z)(n,ho.borderRadius,"100%"),(0,f.Z)(n,ho.backgroundColor,"transparent"),n):(t={},(0,f.Z)(t,ho.zIndex,uo.dropPreview.toString()),(0,f.Z)(t,ho.borderRadius,"8px"),(0,f.Z)(t,ho.backgroundColor,p.TV.accentPrimaryDimmer),t):null;var n,t}),pt()),xo=(0,Tt.kv)(po,(function(e){var n,t,r;return e?"detachPreview"===e.type?(t={},(0,f.Z)(t,ho.opacity,(.5*e.progress).toString()),(0,f.Z)(t,ho.visiblity,"visible"),t):(r={},(0,f.Z)(r,ho.opacity,"0.2"),(0,f.Z)(r,ho.visiblity,"visible"),r):(n={},(0,f.Z)(n,ho.opacity,"0"),(0,f.Z)(n,ho.visiblity,"hidden"),n)}),pt()),wo=(0,Tt.kv)(po,(function(e){return(0,f.Z)({},ho.innerOpacity,"detachPreview"===(null===e||void 0===e?void 0:e.type)?"0.5":"0")}),pt()),ko=(0,Tt.kv)(po,(function(e){return(0,f.Z)({},ho.innerScale,"detachPreview"===(null===e||void 0===e?void 0:e.type)?e.progress.toString():"1")}),pt()),Co=(0,de.X)({root:[{position:"absolute",pointerEvents:"none",opacity:vo.opacity,width:vo.width,height:vo.height,transform:"translate(".concat(vo.x,", ").concat(vo.y,")"),backgroundColor:vo.backgroundColor,borderRadius:vo.borderRadius,border:vo.border,zIndex:vo.zIndex,visibility:vo.visiblity,transition:"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 200ms","@media (prefers-reduced-motion: reduce)":{transitionDuration:"0ms"}}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(p.TV.backgroundHighest,")"),opacity:vo.innerOpacity,transform:"scale(".concat(vo.innerScale,")")}]}),So=(0,c.memo)((function(){var e=(0,c.useRef)(null);(0,co.j)(e,oo(bo)),(0,co.j)(e,oo(Zo)),(0,co.j)(e,oo(mo)),(0,co.j)(e,oo(yo)),(0,co.j)(e,oo(xo));var n=(0,c.useRef)(null);return(0,co.j)(n,oo(wo)),(0,co.j)(n,oo(ko)),(0,r.tZ)("div",{ref:e,css:Co.root,children:(0,r.tZ)("div",{ref:n,css:Co.inner})})})),Io=(0,Fn.cn)(null,(function(e,n){var t=e(Eo);n(po,{type:"dropPreview",rect:t})})),To=(0,Fn.cn)(null,(function(e,n,t){n(po,null),n(Ni,!1),n(Ei,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})})),Eo=(0,Fn.cn)((function(e){var n=e(Mt),t=n.width,r=n.height,i=e(jt),o=e(hr);return{x:Math.round(i.width+o),y:0,width:t-i.width-2*o,height:r-o}}));var Ro=(0,Fn.cn)(null,(function(e,n,t){var r=t.paneId,i=t.activate,o=e(Yt);"tile"===e(Bt(r)).type?n(Zr,(0,ut.ZP)(o,(function(e){try{!function(e,n){var t=mt(e,n.paneId);if(!t)return!1;var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map((function(e,n){return r.slice(0,n+1)})),o=!0,a=!1,l=void 0;try{for(var c,s=i[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=vt(e,u);if(!d)throw new Error("Expected node");if("floatingPaneGroup"===d.type)throw new Error("Expected tiled pane");if(1!==u.length){var p=u[u.length-1];if("number"!==typeof p)throw new Error("Expected number");var f=vt(e,wt(u));if("split"!==(null===f||void 0===f?void 0:f.type))throw new Error("Expected split");var h=f.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var v=p===f.children.length-1;Sr(e,{leftPath:v?(0,We.Z)(u.slice(0,-1)).concat([p-1]):u,percent:v?f.children[p-1].percent-h:h})}}}}catch(m){a=!0,l=m}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(t){throw n(rr,{error:t,origin:"Layout: revealPaneAtom/revealTiledPane"}),t}}))):n(Zr,(0,ut.ZP)(o,(function(e){try{!function(e,n){var t=mt(e,n.paneId);if(!t)return!1;var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw new Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}(e,{paneId:r,minWidth:200,minHeight:140})}catch(t){throw n(rr,{error:t,origin:"Layout: revealPaneAtom/revealFloatingPane"}),t}}))),i&&n(Nt,r)}));var Go={height:0,width:0};var Po={width:120,height:120},Do=(0,Fn.cn)(null),Bo=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt);if("end"===t.type)return n(Do,null),void n(Zr,r);if("update"!==t.type){var i=e(Ut).find((function(e){return e.paneId===t.paneId}));if(!i){var o=new Error("Expected pane");throw n(rr,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}n(Nt,t.paneId),n(Do,{paneId:t.paneId,edge:t.edge,rectStart:e(i.rectAtom)})}else{var a=e(Do);if(!a){var l=new Error("Expected floatingResizeState");throw n(rr,{error:l,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),l}var c=e(zt),s=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?Go:i,a=(0,m.Z)({},e),l=o.height,c=o.width;if(function(e){return"top"===e||"topLeft"===e||"topRight"===e}(t)){var s=e.height-r.y;a.height=Math.max(s,l),a.y=s<l?e.y+e.height-l:e.y+r.y}else if(function(e){return"bottom"===e||"bottomLeft"===e||"bottomRight"===e}(t)){var u=e.height+r.y;a.height=Math.max(u,l)}if(function(e){return"right"===e||"bottomRight"===e||"topRight"===e}(t)){var d=e.width+r.x;a.width=Math.max(d,c)}else if(function(e){return"left"===e||"bottomLeft"===e||"topLeft"===e}(t)){var p=e.width-r.x;a.width=Math.max(p,c),a.x=p<c?e.x+e.width-c:e.x+r.x}return a}(a.rectStart,{delta:t.moveDelta,edge:a.edge,minSize:Po}),u=a.paneId,d=(0,ut.ZP)(r,(function(e){var t=e.floating.find((function(e){return e.panes.includes(u)}));if(!t){var r=new Error("Expected floating");throw n(rr,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=s.x,i.y=s.y-c,i.width=s.width,i.height=s.height+c}));n(Zr,d)}}));function Uo(e,n){var t=function(e,n){var t=e.width*n,r=e.height*n;return{width:t,height:r,x:e.x+(e.width-t)/2,y:e.y+(e.height-r)/2}}(n,.5);if(function(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}(e,t))return{dropLocation:"middle",previewRect:n};var r=n.x+n.width/2,i=n.y+n.height/2,o=.3*n.width,a=r-o/2,l=a+o;if(e.x>=a&&e.x<=l){var c=e.y<=i?"above":"below",s=n.height/2;return{dropLocation:c,previewRect:{x:n.x,y:"above"===c?n.y:n.y+s,width:n.width,height:s}}}var u=e.x<=r?"leftOf":"rightOf",d=n.width/2;return{dropLocation:u,previewRect:{x:"leftOf"===u?n.x:n.x+d,y:n.y,width:d,height:n.height}}}(0,Fn.cn)({x:0,y:0,width:0,height:0});var Ao=(0,Fn.cn)(null,(function(e,n,t){if(!e(ui)){var r=e(Mt),i=t.pageX,o=t.pageY,a=t.over,l=e(Bt(a)),c=Uo({x:i-r.x,y:o-r.y},e(l.rectAtom)).previewRect;n(Ni,!0),n(po,{type:"dropPreview",rect:c})}})),Lo=(0,Fn.cn)(null,(function(e,n,t){if(!e(ui)){var r=e(Mt),i=t.pageX,o=t.pageY,a=t.over,l=e(Bt(a)),c=Uo({x:i-r.x,y:o-r.y},e(l.rectAtom)).dropLocation;n(po,null),n(Ni,!1);var s=e(Yt);if("newPaneGroup"!==t.type){var u=a;if("middle"!==c){if(u===t.paneId){var d=mt(s,t.paneId);if(!d){var p=new Error("Expected pane");throw n(rr,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),p}if(d.floating)throw new Error("Expected paneGroup");var f=d.paneGroup.panes.find((function(e){return e!==t.paneId}));if(!f)return;u=f}var h=(0,ut.ZP)(s,(function(e){try{ci(e,t.paneId),ii(e,{id:yr()(),panes:[t.paneId],relativeTo:u,placement:c}),n(Ft,t.paneId)}catch(p){throw n(rr,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),p}}));n(Zr,h)}else{if(u===t.paneId)return;var v=mt(s,l.paneId);if(!v)return;n(ji,{paneId:t.paneId,toPaneGroupId:v.paneGroup.id,index:v.index+1})}}else{if("middle"===c){var m=mt(s,l.paneId);if(!m)return;return void n(Li,{panes:t.panes,paneGroupId:m.paneGroup.id,activate:!0,index:m.index+1})}n(Ei,{panes:t.panes,placement:c,makeActive:!0,relativeTo:l.paneId})}}})),Oo=(0,Fn.cn)(null,(function(e,n,t){n(ri,st({isHTML:t.isHTML,isStacked:t.isStacked,isExtension:t.isExtension,codeEditorPath:t.entrypoint})),n(ti,{replId:t.replId,force:!0})})),_o=((0,Fn.cn)(null,(function(e,n,t){n(ri,t)})),(0,Fn.cn)(null,(function(e,n,t){var r=t.path,i=t.col,o=t.line,a=t.opener,l=e(Yt),c=(null===a||void 0===a?void 0:a.paneType)||(0,qn.Dp)({path:r}),s=function(){if("codeEditor"===c)return{type:"codeEditor",data:{path:r,col:i,line:o}};if("extension"===c){var e=a.extensionFileHandler;return{type:"extension",data:{filePath:r,extensionId:e.extension.extensionId,installationId:e.extension.installationId,name:e.extension.manifest.name,baseUrl:e.extension.baseUrl,path:e.handler}}}return{type:c,data:{path:r}}}();if(t.newPane){var u;n(Gi,{pane:s,edge:null!==(u=t.newPaneEdge)&&void 0!==u?u:"left"})}else{var d=Zt(l,"topLeft");if(d){var p=e(qt).find((function(n){return r===(0,qn.DQ)(e(n.data))}));if(p&&!t.newTab)return n(_i,p.paneId),void n(ar,{paneId:p.paneId,pane:s});var f=d.paneGroup;if(t.newTab)n(Li,{panes:[s],paneGroupId:f.id,activate:!0,commit:!0,index:f.activeIndex+1});else{var h=e(qt).find((function(e){return!e.isCommitted}));if(h)return n(ar,{paneId:h.paneId,pane:s}),void n(_i,h.paneId);var v=e(qt).find((function(n){var t=e(n.data);return"codeEditor"===t.type&&""===(0,qn.DQ)(t)}));if(v)return n(ar,{paneId:v.paneId,pane:s}),void n(_i,v.paneId);var m=f.panes.find((function(n){var t=e(Bt(n));return"commands"===e(t.data).type}));if(m)return n(ar,{paneId:m,pane:s}),void n(_i,m);n(Li,{panes:[s],paneGroupId:f.id,activate:!0})}}else n(wi,{pane:s,relativeTo:["tiling"],placement:"replace"})}}))),Xo=(0,Fn.cn)(null,(function(e,n,t){var r=t.paths.map((function(e){var n=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!n)return!1;var t=[n[1],void 0!==n[3]&&parseInt(n[3],10),void 0!==n[5]&&parseInt(n[5],10)],r=t[0],i=t[1],o=t[2];return{type:(0,qn.Dp)({path:r}),data:{path:r,line:i,col:o}}})).filter(Boolean);n(Ei,{panes:r,placement:"leftOf",relativeTo:["tiling"],makeActive:!0})}));var zo=(0,Fn.cn)(null,(function(e,n,t){var r=e(Ut).find((function(n){return e(n.data).type===t.type}));if(r)n(ar,{paneId:r.paneId,pane:t});else{var i=function(e,n){var t=Math.min(600,e.width),r=Math.min(318.75+n,e.height);return{width:t,height:r,x:e.width-t,y:e.height-r}}(e(Mt),e(zt));n(Pi,{pane:t,rect:i})}})),Mo=(0,Fn.cn)(null,(function(e,n,t){e(Ut).filter((function(n){return e(n.data).type===t})).forEach((function(e){return n(Si,e.paneId)}))})),jo=(0,Fn.cn)(null),Wo=(0,Fn.cn)((function(e){var n=e(jo);return n&&e(Ut).find((function(t){var r=e(t.data);return"videoPlayer"===r.type&&r.data.embedUrl===(null===n||void 0===n?void 0:n.embedUrl)}))||null})),No=(0,Fn.cn)((function(e){var n=e(Wo);return n&&!n.isHidden?n:null})),Fo=(0,Fn.cn)(null,(function(e,n,t){n(jo,t);var r="videoPlayer";t?n(zo,{type:r,data:{title:"Tutorial",embedUrl:t.embedUrl}}):n(Mo,r)})),Vo=(0,Fn.cn)(null,(function(e,n){var t=e(Wo);if(null===t||void 0===t?void 0:t.isHidden)n(_i,t.paneId);else{var r=e(jo);r&&n(Fo,r)}})),Ho=(0,Fn.cn)((function(e){return e(Ut).find((function(n){return"tutorial"===e(n.data).type}))||null})),Yo=(0,Fn.cn)(null,(function(e,n){var t=e(Ho);(null===t||void 0===t?void 0:t.isHidden)?n(_i,t.paneId):(n(Ei,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1}),n(Br))}));function qo(e,n){var t=n.path,r=n.forwards,i=n.vertical,o=vt(e,t);if("split"!==(null===o||void 0===o?void 0:o.type))return null;var a=wt(t);if(0===a.length)return null;var l=vt(e,a);if("split"!==(null===l||void 0===l?void 0:l.type))return null;if(l.stacked!==i)return qo(e,{path:a,forwards:r,vertical:i});var c=l.children.indexOf(o),s=0===c;if(!(c===l.children.length-1&&r||s&&!r)){var u=c+(r?1:-1),d=l.children[u],p=l.children[c];return d?{other:p,node:d,parent:l,path:(0,We.Z)(a).concat([u])}:null}if(1===a.length){var f=s&&!r?l.children.length-1:0;return{parent:l,other:l.children[c],path:(0,We.Z)(a).concat([f]),node:l.children[f]}}return qo(e,{path:a,forwards:r,vertical:i})}function Ko(e,n,t){var r=yt(e,n.id);if(!r)return null;var i="up"===t||"down"===t,o="down"===t||"right"===t;return qo(e,{path:r.path,forwards:o,vertical:i})}function $o(e,n){var t=n.paneGroupId,r=n.direction,i=bt(e,t),o=yt(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type)||!o)return!1;var a=o.node.children.indexOf(i);if(-1===a)throw new Error("Expected index");var l=(0,We.Z)(o.path).concat([a]),c="up"===r||"down"===r,s="down"===r||"right"===r,u=0===a,d=a===o.node.children.length-1,p=o.node.stacked===c,f=o.path.length>2;if(p&&!((d&&s||u&&!s)&&f))!function(e,n,t){var r=e.indexOf(n);if(-1===r)throw new Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1,o=0===r;if("forward"===t&&i)return e.pop(),void e.unshift(n);if("back"===t&&o)return e.shift(),void e.push(n);var a="forward"===t?1:-1;e[r]=e[r+a],e[r+a]=n}}(o.node.children,i,s?"forward":"back");else{var h=Ko(e,i,r);if(h){var v=l.slice(0,h.path.length+("paneGroup"===h.node.type?2:1));!function(e){if("tiling"!==e[0])throw new Error("Expected tiling path")}(v);var m=vt(e,v);if(!m||"floatingPaneGroup"===m.type)throw new Error("Expected adjacentNode");if("split"!==h.other.type)throw new Error("Expected split");var g,Z,b,y=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e.slice(0,t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)r+=l.value.percent}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(h.other.children,m);if("paneGroup"===h.node.type){var x=(g=y,Z={start:0,end:100},b=!h.parent.stacked,g.start-Z.start<Z.end-g.end?b?"above":"rightOf":b?"below":"leftOf");return si(e,(0,We.Z)(o.path).concat([a])),void ii(e,{placement:x,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:h.path})}var w=function(e,n){var t,r,i=e.children,o=e.stacked,a="above",l=0,c=0,s=0,u=0,d=!0,p=!1,f=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value,g={start:s,end:s+m.percent},Z=(t=n,r=g,Math.max(0,Math.min(t.end,r.end)-Math.max(t.start,r.start)));Z>u&&(u=Z,l=c,a=n.start-g.start<g.end-n.end?o?"above":"rightOf":o?"below":"leftOf"),s+=m.percent,c++}}catch(b){p=!0,f=b}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}return{placement:a,index:l}}(h.node,y),k=w.index,C=w.placement;si(e,(0,We.Z)(o.path).concat([a])),ii(e,{placement:C,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,We.Z)(h.path).concat([k])})}}}var Qo=(0,Fn.cn)(null),Jo=(0,Fn.cn)((function(e){var n=e(Qo);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=mt(e(Yt),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map((function(n){var t=e(Bt(n));return[t.paneId,e(t.data)]}))}})),ea=(0,Fn.cn)((function(e){var n=e(Jo);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}})),na=(0,Fn.cn)((function(e){var n=e(Qo);if(!n)return null;if("sidebar"===n.target)return null;if(e(di)===n.paneId)return e(bi);var t=e(Bt(n.paneId)),r=e(t.rectAtom),i=e(zt);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}})),ta=(0,Fn.cn)(null,(function(e,n,t){var r=e(Wt),i=null!==t&&void 0!==t?t:r;if(i)return n(Qo,{target:"pane",paneId:i}),void(i!==r&&n(Nt,i));var o=Zt(e(Yt),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;a&&n(Qo,{target:"pane",paneId:a})})),ra=(0,Fn.cn)(null,(function(e,n){var t=e(Qo);t&&(n(Qo,null),"sidebar"!==t.target&&n(Ro,{paneId:t.paneId,activate:!0}))})),ia=(0,Fn.cn)(null,(function(e,n){if(e(Jo))n(ra);else{var t=e(Wt);if(t)n(ta,t);else{var r=Zt(e(Yt),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;i&&n(ta,i)}}})),oa=(0,Fn.cn)((function(e){return null!==e(Qo)})),aa=(0,Fn.cn)(null,(function(e,n){n(Qo,null)})),la=(0,Fn.cn)(null,(function(e,n,t){var r=e(Wt);if(r&&!e(di)){var i=Ui({relativeTo:r,rects:new Map(e(Ut).filter((function(e){return!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]}))),direction:t});if(i)n(Wt,i),e(Qo)&&n(Qo,{target:"pane",paneId:i})}})),ca=(0,Fn.cn)(null,(function(e,n,t){var r=e(Jo);null!==r&&"sidebar"!==r.target&&n(Zr,(0,ut.ZP)(e(Yt),(function(e){$o(e,{paneGroupId:r.paneGroupId,direction:t.direction})})))}));function sa(e,n){var t=n.paneGroupPath,r=n.rect,i=vt(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type))throw new Error("Expected paneGroup");si(e,t),ii(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}var ua=100,da=200,pa=200,fa=100,ha=function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=n.width-t,o=n.width-pa/2-i/2,a=(n.height-r)/2-da/2;return{middle:{rect:{x:0,y:0,width:0,height:0},paneId:null,visible:!1},above:{visible:!1,rect:{x:o,y:0,width:pa,height:fa}},below:{visible:!1,rect:{x:o,y:n.height-fa-r,width:pa,height:fa}},leftOf:{visible:!1,rect:{x:t+r,y:a,width:ua,height:da}},rightOf:{visible:!1,rect:{x:n.width-ua-r,y:a,width:ua,height:da}}}},va=["above","rightOf","leftOf","below","middle"];var ma=50,ga=(0,Fn.cn)(null),Za=(0,Fn.cn)((function(e){var n=e(ga);if(!n)return null;var t=bt(e(Yt),n.paneGroupId);return t&&t.panes[t.activeIndex]||null})),ba=((0,Fn.cn)((function(e){var n=e(Mt),t=e(zt),r=e(Fr),i=e(hr);return{x:n.x+r+i,y:n.y-t-i,width:n.width-r-2*i,height:n.height-i}})),(0,Tt.kv)(ga,(function(e){return null===e||void 0===e?void 0:e.dropPoints}))),ya=(0,Fn.cn)(null,(function(e,n,t){if(!e(ui)){var r=e(Mt),i=bt(e(Yt),t.paneGroupId);if(!i){var o=new Error("Expected paneGroup");throw n(rr,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(Bt(i.panes[i.activeIndex])),l=e(a.rectAtom),c=e(zt),s={x:l.x,y:l.y-c,width:l.width,height:l.height+c},u=t.mouse.x-(r.x+l.x),d=e(hr);n(ga,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(u)+"px",scale:1,fromRect:s,movedAtAll:!1,dropPoints:"floating"===a.type?ha({container:r,sidebarWidth:e(Fr),gap:d}):null})}})),xa=(0,Fn.cn)(null,(function(e,n,t){if(!e(ui)){var r=e(ga);if(r){var i=t.delta,o=r.paneGroupId,a=r.fromRect,c=e(Yt),s=bt(e(Yt),o);if(!s){var u=new Error("Expected paneGroup");throw n(rr,{error:u,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}var d=s.panes[s.activeIndex],p=mt(c,d);if(!p){var f=new Error("Expected pane");throw n(rr,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),f}var h=Bt(d),v=Xt(p.paneGroup.id),m=e(zt),g=Math.max(Math.abs(i.x),Math.abs(i.y)),Z=g>=ma,b=g>0;if(Z&&!p.floating){var y=e(h).rectAtom,x=e(y),w=(0,ut.ZP)(c,(function(e){try{sa(e,{paneGroupPath:p.paneGroupPath,rect:{x:x.x+i.x,y:x.y-m+i.y,width:x.width,height:x.height+m}})}catch(u){throw n(rr,{error:u,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}}));return n(Zr,w),void n(ka,t.mouse)}var k,C=e(v),S=e(h),I="floating"===r.startType?It({x:a.x+i.x,y:a.y+i.y,width:a.width,height:a.height},{inside:e(Mt),minVisibleX:2*m,minVisibleY:m}):{x:a.x+i.x,y:a.y+i.y},T=I.x,E=I.y;if(n(C.rectAtom,(function(e){return(0,ut.ZP)(e,(function(e){e.x=T,e.y=E}))})),n(S.rectAtom,(function(e){return(0,ut.ZP)(e,(function(e){e.x=T,e.y=E+m}))})),!Z&&!p.floating){var R=r.startPoint,G=1-.30000000000000004*(k=g/ma,1-Math.sqrt(1-Math.pow(k,2)));return n(po,{type:"detachPreview",rect:{x:R.x-ma,y:R.y-ma,width:100,height:100},progress:g/ma}),void n(ga,(0,ut.ZP)(r,(function(e){e.scale=G,e.movedAtAll=e.movedAtAll||b})))}var P=e(hr);if(r.dropPoints)n(ga,(function(n){return(0,ut.ZP)(n,(function(n){(null===n||void 0===n?void 0:n.dropPoints)&&function(e,n){var t=n.container,r=n.gap,i=n.sidebarWidth,o=n.headerHeight,a=n.paneRects,c=n.mouse,s={x:c.x-t.x,y:c.y-t.y},u=null,d=null;if(a.length){var p=!0,f=!1,h=void 0;try{for(var v,m=a[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var g=(0,l.Z)(v.value,2),Z=g[0],b=g[1];if(cr(c,{x:b.x-r/2,y:b.y-r/2-o,width:b.width+r,height:b.height+r+o})){u=Z,d=b;break}}}catch(L){f=!0,h=L}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}if(e.middle.visible=Boolean(d),d){var y={width:Math.min(100,d.width),height:Math.min(100,d.height)};e.middle.paneId=u,e.middle.rect={x:d.x+d.width/2-y.width/2,y:d.y-o+(d.height+o)/2-y.height/2-r,width:y.width,height:y.height+o/2}}}else{var x={x:t.x+i+r,y:t.y,width:t.width-r-i,height:t.height},w={width:Math.min(100,x.width),height:Math.min(100,x.height)};e.middle.rect={x:x.x+x.width/2-w.width/2,y:x.height/2-w.height/2,width:w.width,height:w.height},e.middle.visible=!0}var k=null,C=!0,S=!1,I=void 0;try{for(var T,E=va[Symbol.iterator]();!(C=(T=E.next()).done);C=!0){var R=T.value;if(cr(s,e[R].rect)){k=R;break}}}catch(L){S=!0,I=L}finally{try{C||null==E.return||E.return()}finally{if(S)throw I}}var G=!0,P=!1,D=void 0;try{for(var B,U=va[Symbol.iterator]();!(G=(B=U.next()).done);G=!0){var A=B.value;e[A].visible=!k||A===k}}catch(L){P=!0,D=L}finally{try{G||null==U.return||U.return()}finally{if(P)throw D}}}(n.dropPoints,{paneRects:e(wa),container:e(Mt),sidebarWidth:e(Fr),headerHeight:e(zt),gap:P,mouse:t.mouse})}))}));else{if(!p.floating)throw new Error("Expected floating pane");n(ka,t.mouse)}}else n(po,null)}})),wa=(0,Fn.cn)((function(e){return e(Ut).filter((function(e){return"tile"===e.type&&!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]}))})),ka=(0,Fn.cn)(null,(function(e,n,t){var r=e(zt),i=e(Mt),o=function(e){var n=e.views,t=e.mouse,r=e.container,i=e.headerHeight,o=e.sidebarWidth,a=e.gap,c={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},s=!0,u=!1,d=void 0;try{for(var p,f=n[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var h=(0,l.Z)(p.value,2),v=h[0],m=h[1],g={x:m.x,y:m.y-i,width:m.width,height:i};if(cr(c,{x:g.x-a/2,y:g.y-a/2,width:g.width+a,height:i+a/2}))return{dropPreview:g,drop:{type:"insert",paneId:v}};var Z={x:m.x,y:m.y-i,width:m.width,height:m.height+i};if(cr(c,{x:Z.x-a/2,y:Z.y-a/2,width:Z.width+a,height:Z.height+a})){var b=sr(c,Z);return{dropPreview:b.rect,drop:{type:"split",relativeTo:v,placement:b.placement}}}}}catch(x){u=!0,d=x}finally{try{s||null==f.return||f.return()}finally{if(u)throw d}}var y=sr(c,{x:o,y:0,width:r.width-o,height:r.height});return{dropPreview:y.rect,drop:{type:"split",relativeTo:["tiling"],placement:y.placement}}}({views:e(wa),container:i,mouse:t,headerHeight:r,sidebarWidth:e(Fr),gap:e(hr)}),a=o.drop,c=o.dropPreview;n(po,{type:"dropPreview",rect:c}),n(ga,(function(e){return(0,ut.ZP)(e,(function(e){e&&(e.drop=a,e.movedAtAll=!0)}))}))})),Ca=(0,Fn.cn)(null,(function(e,n,t){var r=t.delta;if(!e(ui)){n(po,null);var i=e(ga);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,c=e(Yt),s=bt(e(Yt),o);if(!s){var u=new Error("Expected paneGroup");throw n(rr,{error:u,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),u}var d=s.panes[s.activeIndex],p=mt(c,d);if(!p){var f=new Error("Expected pane");throw n(rr,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),f}var h=(0,ut.ZP)(c,(function(t){if(!a&&p.floating&&"floating"===i.startType){var o=vt(t,p.paneGroupPath);if("floatingPaneGroup"!==(null===o||void 0===o?void 0:o.type))return;var c=e(zt),s=It({x:l.x+r.x,y:l.y+r.y,width:l.width,height:l.height},{inside:e(Mt),minVisibleX:2*c,minVisibleY:c}),h=s.x,v=s.y;return o.rect.x=h,void(o.rect.y=v)}if(a)if("split"!==a.type){var m=mt(t,a.paneId);p.paneGroup.panes.forEach((function(e){!function(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:vt(e,n.paneGroupPath);if(!t||!("panes"in t))throw new Error("Expected paneGroup");ci(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}(t,{paneId:e,paneGroupPath:(null===m||void 0===m?void 0:m.paneGroupPath)||["tiling"],activate:!1}),n(Ft,e)}))}else{if(null===t.tiling){var g=yr()();try{ii(t,{id:yr()(),panes:[g],placement:"leftOf",relativeTo:["tiling"]})}catch(u){throw n(rr,{error:u,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),u}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=mt(e,t);if(!o)throw new Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;si(e,o.paneGroupPath),ii(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(t,{from:d,to:a.relativeTo,placement:a.placement})}catch(f){throw n(rr,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),f}}}));n(ga,null),n(Zr,h),"insert"===(null===a||void 0===a?void 0:a.type)&&n(_i,d)}}}));var Sa=(0,Fn.cn)(null,(function(e,n,t){var r=e(Yt),i=e(Bt(t)),o=i.rectAtom,a=i.type,l=e(o),c=mt(r,t);if(!c){var s=new Error("Expected pane");throw n(rr,{error:s,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),s}if("tile"!==a){var u=e(Ut).filter((function(e){return"tile"===e.type&&!e.isHidden})),d=e(zt),p={x:l.x+l.width/2,y:l.y+l.height/2},f=u.find((function(n){var t=e(n.rectAtom);return cr(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})})),h="leftOf";f&&(h=sr(p,e(f.rectAtom)).placement),n(Zr,(0,ut.ZP)(r,(function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=vt(e,t);if("floatingPaneGroup"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected floatingPaneGroup");si(e,t),null!==i?ii(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r}):e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex}}(e,{paneGroupPath:c.paneGroupPath,to:(null===f||void 0===f?void 0:f.paneId)||["tiling"],placement:h})})))}else n(Zr,(0,ut.ZP)(r,(function(e){sa(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})})))})),Ia=t(73175),Ta=t(39995);function Ea(e){var n=(0,$n.Z)((function(){return(0,Fn.cn)((function(n){return!!n(ui)&&n(Wt)===e}))}),[e]);return(0,$n.Z)((function(){return(0,Fn.cn)((function(t){if(t(n))return t(bi);var r=t(Bt(e));return t(r.rectAtom)}))}),[e,n])}function Ra(e){var n=pr(Ea(e)),t=function(e){var n,t=Ga(e);return(0,$n.Z)((function(){return(0,Tt.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.scale)&&void 0!==n?n:1}))}),[t])}(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var r=e(n);return{x:r.x,y:r.y,scale:e(t)}}))}),[n,t])}function Ga(e){return(0,$n.Z)((function(){return(0,Fn.cn)((function(n){var t=n(ga);return t&&e===n(Za)?t:null}))}),[e])}function Pa(e){return(0,$n.Z)((function(){return(0,Fn.cn)((function(n){return n(Wt)===e}))}),[e])}function Da(e){return(0,$n.Z)((function(){return(0,Fn.cn)((function(n){return n(n(Bt(e)).data)}))}),[e])}function Ba(e){return(0,$n.Z)((function(){return(0,Tt.kv)(Bt(e),(function(e){return"floating"===e.type}))}),[e])}function Ua(e){return(0,$n.Z)((function(){return(0,Fn.cn)((function(n){var t=n(ga);return t&&e===t.paneGroupId?t:null}))}),[e])}function Aa(e){var n=Ua(e),t=Oa(e),r=_a(e),i=function(e){var n=La(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var t=e(Wt);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)}))}),[n])}(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){return e(t)?uo.maximizedHeader:e(n)?uo.draggingHeader:e(r)?e(i)?uo.floatingHeaderActive:uo.floatingHeader:uo.tiledHeader}))}),[n,t,r,i])}function La(e){return(0,$n.Z)((function(){return(0,Tt.kv)(Yt,(function(n){return bt(n,e)}))}),[e])}function Oa(e){var n=La(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){if(!e(ui))return!1;var t=e(n);if(!t)return!1;var r=e(Wt);return!!r&&t.panes.includes(r)}))}),[n])}function _a(e){var n=Xt(e);return(0,$n.Z)((function(){return(0,Tt.kv)(n,(function(e){return"floating"===e.path[0]}))}),[n])}var Xa=(0,Fn.cn)((function(e){return Boolean(e(ga)||e(Do)||e(Tr)||e(Ni)||e(Xr))})),za=t(57326),Ma=t(51467),ja=(0,Fn.cn)((function(e){if(e(oa))return null;var n=e(Wt);if(!n)return null;var t=e(Bt(n)),r=e(t.data),i=t.paneId+r.type;return(0,qn.Ur)(r)&&(i+=r.data.path),i}));var Wa=t(88969),Na=t(90800),Fa=t(40278),Va=t(11161),Ha=t(44323);function Ya(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=e.location,o={x:t+r,y:0,width:n.width-t-2*r,height:n.height-r},a=o.x,l=o.y,c=o.width,s=o.height;switch(i){case"middle":return o;case"leftOf":return{x:a,y:l,width:c/2,height:s};case"rightOf":return{x:a+c/2,y:l,width:c/2,height:s};case"above":return{x:a,y:l,width:c,height:s/2};case"below":return{x:a,y:l+s/2,width:c,height:s/2}}}var qa=(0,Fn.cn)(null,(function(e,n,t){if(null===t)return n(po,null),void n(ga,(function(e){return e?(0,ut.ZP)(e,(function(e){e.drop=null})):e}));n(ga,(function(e){return e?(0,ut.ZP)(e,(function(e){!function(e,n){if("edge"!==n.type&&"emptyLayout"!==n.type){var t=n.paneId;"middle"!==n.position?e.drop={type:"split",relativeTo:t,placement:n.position}:e.drop={type:"insert",paneId:t}}else e.drop={type:"split",relativeTo:["tiling"],placement:"edge"===n.type?n.position:"replace"}}(e,t)})):e}));var r=e(Mt),i=e(zt),o=e(Fr),a=e(hr);if("pane"!==t.type)if("emptyLayout"!==t.type){var l=function(e,n){var t=n.container,r=n.sidebarWidth,i=n.position,o=n.gap,a={x:r+o,y:0,width:t.width-r-2*o,height:t.height-o};if("split"!==(null===e||void 0===e?void 0:e.type)){switch(i){case"above":case"below":a.height=a.height/2,"below"===i&&(a.y+=a.height);break;case"rightOf":case"leftOf":a.width=a.width/2,"rightOf"===i&&(a.x+=a.width)}return a}if(e.stacked){switch(i){case"above":a.height=a.height*(e.children[0].percent/100)/2;break;case"below":a.height=a.height*(e.children[e.children.length-1].percent/100)/2,a.y=t.height-a.height;break;case"leftOf":a.width=a.width/2;break;case"rightOf":a.width=a.width/2,a.x=t.width-a.width-o}return a}switch(i){case"above":a.height=a.height/2;break;case"below":a.height=a.height/2,a.y=t.height-a.height-o;break;case"leftOf":a.width=a.width*(e.children[0].percent/100)/2;break;case"rightOf":a.width=a.width*(e.children[e.children.length-1].percent/100)/2,a.x=t.width-a.width}return a}(e(Yt).tiling,{container:r,sidebarWidth:o,position:t.position,gap:a});n(po,{type:"dropPreview",rect:l})}else n(po,{type:"dropPreview",rect:Ya({container:r,sidebarWidth:o,location:t.position,gap:a})});else{var c=e(Bt(t.paneId)),s=e(c.rectAtom);n(po,{type:"dropPreview",rect:{x:s.x,y:s.y-i,width:s.width,height:s.height+i}})}})),Ka=(0,so.$)(["opacity","width","height","transform","pointerEvents"]),$a=Ka.cssVars,Qa=Ka.styleTokens,Ja=(0,de.X)({dropPoint:[p.l0.center,p.l0.top(0),p.l0.left(0),p.l0.position.absolute,{zIndex:uo.overlay,cursor:"grabbing",width:Qa.width,height:Qa.height,transform:Qa.transform,opacity:Qa.opacity,pointerEvents:Qa.pointerEvents,transition:"opacity 200ms ease-out 200ms","&:hover":{color:p.TV.accentPrimaryStronger}}]}),el={above:(0,r.tZ)(Fa.Z,{}),below:(0,r.tZ)(Va.Z,{}),leftOf:(0,r.tZ)(Wa.Z,{}),rightOf:(0,r.tZ)(Na.Z,{}),middle:(0,r.tZ)(Ha.Z,{})};function nl(e){var n=(0,c.useRef)(null),t=(0,c.useMemo)((function(){return(0,Tt.kv)(ba,(function(n){return null===n||void 0===n?void 0:n[e]}))}),[e]),r=(0,c.useMemo)((function(){return(0,Tt.kv)(t,(function(e){return e?(0,f.Z)({},$a.transform,"translate(".concat(e.rect.x,"px, ").concat(e.rect.y,"px)")):null}),pt())}),[t]);(0,co.j)(n,oo(r));var i=(0,c.useMemo)((function(){return(0,Tt.kv)(t,(function(e){var n;return e?(n={},(0,f.Z)(n,$a.width,e.rect.width+"px"),(0,f.Z)(n,$a.height,e.rect.height+"px"),n):null}),pt())}),[t]);(0,co.j)(n,oo(i));var o=(0,c.useMemo)((function(){return(0,Tt.kv)(t,(function(e){var n;return n={},(0,f.Z)(n,$a.opacity,(null===e||void 0===e?void 0:e.visible)?"1":"0"),(0,f.Z)(n,$a.pointerEvents,(null===e||void 0===e?void 0:e.visible)?"all":"none"),n}),pt())}),[t]);return(0,co.j)(n,oo(o)),n}function tl(){var e,n=nl("middle"),t=ao(qa),i=lo((0,c.useMemo)((function(){return(0,Tt.kv)(ba,(function(n){return null!==(e=null===n||void 0===n?void 0:n.middle.paneId)&&void 0!==e?e:null}))}),[]));return(0,r.tZ)(d.G,{css:Ja.dropPoint,innerRef:n,onMouseEnter:function(){var e=i(),n="middle";t(e?{type:"pane",position:n,paneId:e}:{type:"emptyLayout",position:n})},onMouseLeave:function(){return t(null)},children:(0,r.tZ)(Ha.Z,{size:32})})}function rl(e){var n=e.position,t=nl(n),i=ao(qa);return(0,r.tZ)(d.G,{css:Ja.dropPoint,innerRef:t,onMouseEnter:function(){return i({type:"edge",position:n})},onMouseLeave:function(){return i(null)},children:(0,c.cloneElement)(el[n],{size:32})})}var il=(0,c.memo)((function(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)(rl,{position:"above"}),(0,r.tZ)(rl,{position:"below"}),(0,r.tZ)(rl,{position:"leftOf"}),(0,r.tZ)(rl,{position:"rightOf"}),(0,r.tZ)(tl,{})]})}));function ol(){return io(lr)}function al(e){return io((0,$n.Z)((function(){return(0,Fn.cn)((function(n){var t=n(Bt(e));return n(t.data)}))}),[e]))}function ll(){return io($t)}function cl(){return ao(ra)}function sl(){return ao(aa)}function ul(){return ao(la)}function dl(){return ao(ca)}function pl(){return io(Vt)}function fl(){var e=ao(Nt),n=ao(Ft);return(0,$n.Z)((function(){return function(t,r){(null===r||void 0===r?void 0:r.commit)&&n(t),e(t)}}),[n,e])}function hl(e){var n=e.paneId;return io((0,$n.Z)((function(){return(0,Fn.cn)((function(e){return e(Wt)===n}))}),[n]))}function vl(){return io(Wt)}function ml(){return io(ui)}function gl(){return ao(ar)}function Zl(){return ao(Ft)}function bl(){return ao(Ro)}function yl(){return ao(Oi)}function xl(){return ao(eo)}function wl(){return ao(Si)}function kl(){return ao(Ii)}var Cl=(0,Fn.cn)(null,(function(e,n){n(Ni,!1)}));function Sl(){return ao(Cl)}function Il(e){var n=e.paneGroupId,t=(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var t;return n===(null===(t=e(ga))||void 0===t?void 0:t.paneGroupId)}))}),[n]);return io(t)}function Tl(e){var n=e.paneGroupId,t=ao(ya),r=ao(xa),i=ao(Ca),o=(0,$n.Z)((function(){return{start:function(e){var r=e.mouse;t({paneGroupId:n,mouse:r})},update:function(e){r(e)},end:function(e){i(e)}}}),[n,t,r,i]);return{isDragging:Il({paneGroupId:n}),dnd:o}}function El(){return ao(_o)}function Rl(){return ao(Sa)}function Gl(){return ao(Bo)}function Pl(){return{maximizePane:ao(pi),maximizePaneGroup:ao(fi),restoreMaximizedPaneGroup:ao(hi),toggleMaximizePane:ao(vi),toggleMaximizedPaneGroup:ao(mi)}}function Dl(){return ao(_i)}function Bl(){return ao(Xi)}function Ul(){return io(Ni)}function Al(e){var n=function(e){var n=Xt(e),t=(0,$n.Z)((function(){return(0,Fn.cn)((function(e){return e(n).activeIndex}))}),[n]),r=(0,$n.Z)((function(){return(0,Tt.kv)(n,(function(e){return e.path}),pt())}),[n]),i=(0,$n.Z)((function(){return(0,Tt.kv)(n,(function(e){return e.panes}),pt())}),[n]),o=(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var t=e(n),r=e(Bt(t.panes[t.activeIndex])),i=e(r.data);return(0,qn.Ur)(i)?(0,qn.DQ)(i):null}))}),[n]);return{activeIndexAtom:t,pathAtom:r,panesAtom:i,activeFileAtom:o}}(e),t=n.activeIndexAtom,r=n.pathAtom,i=n.panesAtom;return{activeIndex:oo(t),path:oo(r),panes:oo(i),activeTabPaneId:oo(Hi(e))}}function Ll(){return ao(Wi)}function Ol(){return ao(Li)}function _l(){return ao(function(){var e=(0,Ai.gv)();return(0,$n.Z)((function(){return(0,Fn.cn)(null,(function(n,t){var r=e();if(r){t(Yi,[r]);var i=n(Wt);i&&t(Ft,i)}}))}),[e])}())}function Xl(){return ao(Qi)}function zl(){return ao(Ji)}function Ml(e){return io(function(e){var n=e.paneGroupId;return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var t=bt(e(Yt),n);return t?t.panes.length:null}))}),[n])}({paneGroupId:e.paneGroupId}))}function jl(e){return io(function(e){return(0,$n.Z)((function(){return(0,Fn.cn)((function(n){var t=mt(n(Yt),e);return t?t.paneGroup.panes.findIndex((function(n){return n===e})):null}))}),[e])}(e.paneId))}function Wl(){return io((0,$n.Z)((function(){return(0,Fn.cn)((function(e){var n=e(Ot),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=s.panes.map((function(n){return[n,e(e(Bt(n)).data)]})),d="floating"===s.path[0];(d?t:r).push({activeIndex:s.activeIndex,paneGroupId:s.id,isFloating:d,panes:u})}}catch(p){o=!0,a=p}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{floating:t,tiling:r}}))}),[]))}function Nl(){return ao(Gi)}function Fl(){return ao(yi)}function Vl(){return ao(xi)}function Hl(){return ao(ki)}function Yl(){return ao(Yo)}function ql(){return e="tutorial",io((0,$n.Z)((function(){return(0,Fn.cn)((function(n){return n(Ut).find((function(t){return!t.isHidden&&n(t.data).type===e}))}))}),[e]));var e}function Kl(){return lo(Yt)}function $l(){var e=(0,Ie.Z)(),n=(0,Ia.T)(),t=(0,Ta.Z)().preferences.isLayoutStacked,r=(0,za.cR)(),i=(0,l.Z)(function(e){var n=(0,m.Z)({},wr,e);return b.D(kr,n)}(),1)[0];return(0,c.useCallback)((function(){var o=st({isStacked:t,isHTML:n,isExtension:r}),a=o.layout,l=o.data;i({variables:{input:{replId:e,state:{layout:a,data:l}}}})}),[e,i,n,t,r])}function Ql(){return io(er)}function Jl(e){var n=dr(Ea(e)),t=Ra(e),r=function(e){var n,t=Ga(e);return(0,$n.Z)((function(){return(0,Tt.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"}))}),[t])}(e),i=function(e){var n=Ea(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var t=e(n),r=e(Mt);return{x:Math.round(r.x+t.x),y:Math.round(r.y+t.y)}}))}),[n])}(e),o=function(e){return(0,$n.Z)((function(){return(0,Tt.kv)(Bt(e),(function(e){return e.isHidden}))}),[e])}(e),a=function(e){return(0,$n.Z)((function(){return(0,Fn.cn)((function(n){var t=n(Bt(e)),r=e===n(Wt);return n(di)===e?uo.maximizedPane:e===n(Za)?uo.draggingPane:"floating"===t.type?r?uo.floatingPaneActive:uo.floatingPane:r?uo.tiledPaneActive:uo.tiledPane}))}),[e])}(e),l=function(e){return(0,$n.Z)((function(){return(0,Fn.cn)((function(n){return!!n(ga)&&n(Za)!==e&&"floating"!==n(Bt(e)).type}))}),[e])}(e),c=function(e){var n=Da(e);return(0,$n.Z)((function(){return(0,Tt.kv)(n,(function(e){return e.type}))}),[n])}(e),s=Ba(e),u=Pa(e),d=(0,$n.Z)((function(){return(0,Fn.cn)((function(n){return n(Wt)===e}))}),[e]),p=function(e){return(0,$n.Z)((function(){return(0,Tt.kv)(Bt(e),(function(e){return e.isCommitted}))}),[e])}(e),f=Da(e),h=function(e){var n=Ba(e),t=Pa(e),r=Ga(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){return!e(ui)&&Boolean(e(n)||e(t)||e(r))}))}),[n,t,r])}(e),v=function(e){var n=Ga(e);return(0,$n.Z)((function(){return(0,Tt.kv)(n,Boolean)}),[n])}(e),m=function(e){var n,t=Ga(e);return(0,$n.Z)((function(){return(0,Tt.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.movedAtAll)&&void 0!==n&&n}))}),[t])}(e);return{size:oo(n),transform:oo(t),paneType:oo(c),transformOriginXAtom:oo(r),viewportInset:oo(i),zIndex:oo(a),disableInteractions:oo(Xa),animate:oo(l),data:oo(f),isFloating:oo(s),isActive:oo(u),isActivePane:oo(d),isCommitted:oo(p),isHidden:oo(o),isBeingDragged:oo(v),hasMovedWhileDragging:oo(m),headerHeight:oo(zt),hasBorder:oo(h)}}function ec(e){var n=function(e){var n=Oa(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(t){if(t(n))return t(Zi);var r=t(Xt(e));return t(r.rectAtom)}))}),[n,e])}(e),t=dr(n),r=pr(n),i=function(e){var n,t=Ua(e);return(0,$n.Z)((function(){return(0,Tt.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.scale)&&void 0!==n?n:1}))}),[t])}(e),o=function(e){var n,t=Ua(e);return(0,$n.Z)((function(){return(0,Tt.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"}))}),[t])}(e),a=Aa(e),l=function(e){var n=_a(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(t){var r=t(ga);return!!r&&r.paneGroupId!==e&&!t(n)}))}),[e,n])}(e),c=Oa(e),s=_a(e);return{size:oo(t),position:oo(r),scale:oo(i),transformOriginX:oo(o),zIndex:oo(a),animate:oo(l),isMaximized:oo(c),isFloating:oo(s)}}function nc(e){var n=Rr(e),t=Gr(e),r=dr(t),i=pr(t),o=Pr(e),a=function(e){var n=Rr(e);return(0,$n.Z)((function(){return(0,Tt.kv)(n,(function(e){var n=e.snapped;return Boolean(n)}))}),[n])}(e),l=Dr(e),c=function(e){var n=dr(Gr(e)),t=Dr(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var r=e(n),i=r.width,o=r.height;return e(t)?i:o}))}),[n,t])}(e),s=function(e){var n=Rr(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var t=e(n),r=t.snapped,i=t.stacked;return"right"===r?i?180:90:"left"===r?i?0:270:0}))}),[n])}(e),u=function(e){var n=Dr(e),t=Pr(e),r=dr(Gr(e));return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var i=e(r),o=i.width,a=i.height,l=e(t);return e(n)?{width:l?o:24,height:2}:{height:l?a:24,width:2}}))}),[r,n,t])}(e),d=function(e){var n=dr(Gr(e)),t=Dr(e);return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var r=e(n),i=r.width,o=r.height;return(e(t)?i:o)<24}))}),[n,t])}(e);return{handle:oo(n),size:oo(r),position:oo(i),isActive:oo(o),isSnapped:oo(a),isStacked:oo(l),length:oo(c),rotation:oo(s),gripSize:oo(u),gripIsHidden:oo(d)}}(0,Fn.cn)((function(e){return Boolean(e(Tr))||e(Xr)}));var tc=(0,Fn.cn)(!1),rc=(0,Fn.cn)(0);function ic(){return{width:oo(Fr),isOpen:oo(Yr),toggle:ao(Ur)}}function oc(){return lo(Kr)}var ac=t(81920),lc=t(95183),cc=t(256),sc=t(3282),uc=t(45843);function dc(e){var n=(0,qn.Se)();return(0,$n.Z)((function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,r.tZ)(sc.Z,{}),key:"codeSearch"},commands:function(t){var r=t.search;if(!r)return[];var i={type:"searchReplace",data:{initialQuery:r}};return[{match:Qn.pl,data:{type:"action",label:n.getTitle(i),icon:n.Icon({pane:i}),run:function(){e({pane:i})}}}]}}}),[n,e])}var pc=t(3861),fc=t(22004),hc=t(22011),vc=t(10267),mc=t(22245),gc=(0,i.iv)([p.l0.borderRadius("full"),p.l0.position.absolute,p.l0.top(-3),p.l0.right(-3)]);function Zc(e){var n=e.color,t=void 0===n?p.TV.redStronger:n,i=e.small,o=e.className,a=i?6:8;return(0,r.tZ)(d.G,{className:o,style:{backgroundColor:t,width:a,height:a,zIndex:2,boxShadow:"0 0 0 2px ".concat(p.TV.backgroundDefault)},css:gc})}var bc=t(81382),yc=t(6190),xc=[{padding:(0,bc.fP)(8)}],wc=(0,de.X)({root:[xc,p.l0.align.center,p.l0.flex.row,{gap:(0,bc.fP)(8),"&:hover .icon":{backgroundColor:"var(".concat(te.dj.interactiveBackground,")")}}],iconSurface:[{padding:(0,bc.fP)(8),borderRadius:(0,bc.fP)(8)},p.l0.position.relative],titleWithAlias:[p.l0.rowWithGap(8)],aliasContainer:[p.l0.rowWithGap(4),p.l0.color.foregroundDimmest,p.l0.align.center]}),kc=(0,de.X)({root:[p.l0.position.relative,(0,bc.D$)(16),{width:(0,bc.fP)(16),height:(0,bc.fP)(16)}]});function Cc(e){var n=e.pane,t=e.active,i=e.highlight,o=(0,qn.Se)(),a=o.Icon({pane:n}),l=o.getTitle(n),c=(0,Re.b2)({paneType:n.type});return(0,r.BX)(d.G,{css:wc.root,children:[(0,r.BX)(Q.Tg,{elevated:!0,css:wc.iconSurface,className:"icon",children:[(0,r.tZ)(d.G,{css:kc.root,style:{opacity:e.active?1:.7},children:a}),c?(0,r.tZ)(Zc,{color:c}):null]}),e.alias?(0,r.BX)(d.G,{css:wc.titleWithAlias,children:[(0,r.tZ)(ne.xv,{children:l}),(0,r.BX)(d.G,{css:wc.aliasContainer,children:["(",e.aliasPrefix?(0,r.BX)(ne.xv,{color:"dimmest",children:[e.aliasPrefix," "]}):null,(0,r.tZ)(yc.x,{dimmed:!0,text:e.alias,highlight:i}),")"]})]}):(0,r.tZ)(yc.x,{dimmed:!t,text:l,highlight:i})]})}function Sc(e){var n=e.pane,t=e.aliases,i=void 0===t?[]:t;return function(e){var t=e.search,o=e.data,a=e.active;if("group"===o.type)return null;if(!t)return{score:1,render:{height:48,content:(0,r.tZ)(Cc,{pane:n})}};var l=mc.Z.match(t,o.label);if(l)return{score:l.score,render:{height:48,content:(0,r.tZ)(Cc,{pane:n,highlight:l.ranges,active:a})}};var c=!0,s=!1,u=void 0;try{for(var d,p=i[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value,h="string"===typeof f?{alias:f,prefix:void 0}:f,v=h.alias,m=h.prefix,g=mc.Z.match(t,v);if(g)return{score:g.score,render:{height:48,content:(0,r.tZ)(Cc,{pane:n,active:a,alias:v,aliasPrefix:m,highlight:g.ranges})}}}}catch(Z){s=!0,u=Z}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}return null}}function Ic(e){var n=(0,Re.Bx)(),t=ll();return(0,$n.Z)((function(){var i=t.map((function(e){return e.filePath})),o=n.filter((function(e){return!i.includes(e)}));return{data:{type:"context",label:"Recent",icon:(0,r.tZ)(Kn.Z,{})},commands:function(n){var t=n.search;return(0,Jn.w)({paths:o,search:t,run:function(n){e({path:n})}})}}}),[n,t,e])}function Tc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=(0,qn.Se)(),t=zl(),i=Dl(),o=Ql(),a=(0,vc.dr)();return(0,$n.Z)((function(){var c=e?o.filter((function(n){return(0,l.Z)(n,1)[0]!==e})):o;return c.length?[{data:{type:"context",label:e?"Switch to tab":"Jump to tab",icon:(0,r.tZ)(lc.Z,{})},commands:function(){var o=(0,Hn.Z)((function(o){var s,u,d,p,f,h,v,m,g,Z,b,y,x,w,k,C,S,I,T,E,R,G,P,D;return(0,Yn.__generator)(this,(function(B){switch(B.label){case 0:if(!(s=o.search))return[2,[]];u=new Map,d=[],p=!0,f=!1,h=void 0;try{for(v=c[Symbol.iterator]();!(p=(m=v.next()).done);p=!0)g=(0,l.Z)(m.value,2),g[0],Z=g[1],(0,qn.Ur)(Z)&&Z.data.path&&d.push(Z.data.path)}catch(U){f=!0,h=U}finally{try{p||null==v.return||v.return()}finally{if(f)throw h}}return[4,(0,uc.Rz)(s,d)];case 1:b=B.sent(),y=!0,x=!1,w=void 0;try{for(k=b[Symbol.iterator]();!(y=(C=k.next()).done);y=!0)S=C.value,u.set(S.path,{score:S.score,ranges:S.ranges})}catch(U){x=!0,w=U}finally{try{y||null==k.return||k.return()}finally{if(x)throw w}}I=[],T=!0,E=!1,R=void 0;try{for(G=function(){var o=(0,l.Z)(D.value,2),c=o[0],s=o[1],d=(0,qn.Ur)(s)?s.data.path:null,p=d?u.get(d):null;if("deployments"===s.type){var f=a(c);if("deployments"===(null===f||void 0===f?void 0:f.type)){var h=f.getTabs();if(h)return I.push({match:Qn.pl,data:{type:"context",label:n.getTitle(s),icon:(0,r.tZ)(n.Icon,{pane:s})},commands:function(){return h.map((function(e){return{match:Qn.pl,data:{key:c+e.id,type:"action",label:e.label,icon:(0,r.tZ)(e.Icon,{size:16}),run:function(){i(c),f.setTab(e.id)}}}}))}}),"continue"}}var v=d&&p?function(){return{score:p.score,render:(0,uc.xy)({path:d,ranges:p.ranges})}}:Qn.pl;I.push({match:v,data:{key:c,type:"action",label:n.getTitle(s),icon:n.Icon({pane:s}),run:function(){return e?t({a:e,b:c}):i(c)}}})},P=c[Symbol.iterator]();!(T=(D=P.next()).done);T=!0)G()}catch(U){E=!0,R=U}finally{try{T||null==P.return||P.return()}finally{if(E)throw R}}return[2,I]}}))}));return function(e){return o.apply(this,arguments)}}()}]:[]}),[e,o,n,i,t,a])}function Ec(e){var n=(0,qn.Se)(),t=(0,cc.B)(),r=Ql();return(0,$n.Z)((function(){var i=r.map((function(e){var n=(0,l.Z)(e,2);n[0];return n[1].type})),o=[],a=new Map([["envEditor",["Environment variables"]],["ghostwriterChat",[{alias:"Ghostwriter",prefix:"previously"}]]]),c=!0,s=!1,u=void 0;try{for(var d,p=function(){var t=d.value;if((0,qn.b)(t.type)&&i.includes(t.type))return"continue";o.push({match:Sc({pane:t,aliases:a.get(t.type)}),data:{type:"action",label:n.getTitle(t),icon:n.Icon({pane:t}),run:function(){e({pane:t})}}})},f=t[Symbol.iterator]();!(c=(d=f.next()).done);c=!0)p()}catch(h){s=!0,u=h}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}return o}),[t,e,r,n])}var Rc={type:"group",key:"root",description:"Search for tools and files"};function Gc(e){var n=e.currentPaneId,t=e.openPane,i=(0,re.Z)(),o=i.fs,a=i.container,l=Ec(t),s=Tc(n),u=(0,c.useCallback)((function(e){var n=e.path;t({pane:{type:(0,qn.Dp)({path:n}),data:{path:n}}})}),[t]),d=Ic(u),p=(0,Re.AA)(),f=(0,ac.T)(),h=dc(t);return(0,$n.Z)((function(){var e={data:{type:"context",label:"Search",icon:(0,r.tZ)(sc.Z,{}),key:"searchGroup"},commands:function(){return[(0,Jn.i)({openFile:u,fs:o,shouldHideFile:f,getRecentFiles:p}),(0,et.F)({container:a,openFile:u})]}},n={data:{type:"context",label:"Tools",icon:(0,r.tZ)(lc.Z,{})},commands:function(){return(0,We.Z)(l)}},t=function(e){var n=e.openFile,t=e.fs;return{match:Qn.pl,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,r.tZ)(pc.Z,{})},commands:function(e){var i=e.search,o=e.active;return i&&o?[{match:Qn.pl,data:{type:"action",description:"Create a new file",label:i,icon:(0,r.tZ)(fc.Z,{path:i}),run:function(){return(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return[4,t.stat(i)];case 1:return e.sent().exists?[2,{type:"error",message:'"'.concat(i,'" already exists')}]:[4,t.writeFile(i,hc.Z.from(""))];case 2:return e.sent().error?[2,{type:"error",message:'Could not create "'+i+'"'}]:(n({path:i}),[2])}}))}))()}}}]:[]}}}({fs:o,openFile:u});return{data:Rc,commands:function(){return[d,e,t,n,h].concat((0,We.Z)(s))}}}),[a,o,p,l,s,f,d,u,h])}var Pc=t(58125),Dc=t(83066),Bc=(0,Fn.cn)(!1);var Uc=(0,Fn.cn)(null,(function(e,n,t){if(e(Bc))return n(Lc,null),void n(Bc,!1);t&&n(Lc,t),n(Bc,!0)}));function Ac(){return(0,Vn.b9)(Uc)}var Lc=(0,Fn.cn)(null),Oc=(0,Fn.cn)([]);function _c(){return(0,Vn.b9)(Oc)}function Xc(){var e=xl(),n=Ec((0,c.useCallback)((function(n){(0,h.j)(h.U3.TOOL_OPENED,{source:"Command Bar",tool:n.pane.type}),e(n)}),[e])),t=function(){var e=(0,Pc.gf)("toggleGlobalCommandBarCommand");return(0,$n.Z)((function(){return{type:"context",icon:(0,r.tZ)(Dc.Z,{}),label:"",description:"Type a command...",keyboardShortcut:e}}),[e])}(),i=Tc();return(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var o=e(Oc),a={data:{type:"context",label:"Tools",icon:(0,r.tZ)(lc.Z,{})},commands:function(){return n}};return{data:t,commands:function(){return(0,We.Z)(o).concat((0,We.Z)(i),[a])}}}))}),[n,t,i])}var zc=t(28863),Mc={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,zc.l2)({cmdOrCtrl:!0,key:"k"})};function jc(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=_c();(0,c.useEffect)((function(){if(n)return t((function(n){return(0,We.Z)(n).concat([e])})),function(){t((function(n){return n.filter((function(n){return n!==e}))}))}}),[t,e,n])}function Wc(){var e=(0,Vn.Dv)(Bc),n=Ac(),t=function(){var e=Xc(),n=(0,$n.Z)((function(){return(0,Fn.cn)((function(n){var t=n(e),r=n(Lc);return r?[t,r]:t}))}),[e]);return(0,Vn.Dv)(n)}(),i=(0,Pc.gf)(Mc.id);return(0,r.tZ)(He.u,{hideCloseButton:!0,isOpen:e,onRequestClose:n,noPadding:!0,skipTransition:!0,children:(0,r.tZ)(Q.Tg,{css:[p.l0.maxHeight("70vh"),p.l0.borderRadius(8)],children:(0,r.tZ)(Nn.X,{keyboardShortcut:i,onAction:function(){return n()},command:t,autoFocus:!0})})})}var Nc=(0,c.memo)(Wc),Fc=t(48858),Vc=t(53691);function Hc(e){var n=(0,re.Z)().presence,t=(0,Re.pV)(),r=(0,Ma.Z)(e);return c.useCallback((function(e){var i=e.username,o=e.id,a=n.getFollowedUser();if((null===a||void 0===a?void 0:a.username)!==i){n.followUser(i);var l=n.getActiveFileForUser(o),c=t();l&&l!==c&&r.current({path:l})}else n.unfollowUser()}),[r,t,n])}var Yc=t(90843),qc=t(35382),Kc=t(94979),$c=t(67438),Qc=t(44038),Jc=t(17929),es=t(37047),ns=t(30358),ts=t(92369),rs=t(35650),is=t(88794),os=t(95321),as=t(87155),ls="https://linkedin.com/sharing/share-offsite";var cs="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651";var ss=function(e){var n=e.lessonSlug,t=e.courseSlug,i=(0,qe.Z)().showConfirm;if(!n||!t)return null;var o=(0,ns.QW)(t),a=(0,ns.qv)(t,n);if(!a)return null;var l=a.ordinalLabel,c=(0,ns.tD)(o.socialSharingText,a),s="".concat(c," ").concat(o.sharableLink),u=(0,Qc.Z)({text:c,url:o.sharableLink}),f=function(e){var n=e.url;return"".concat(ls,"?url=").concat(encodeURIComponent(n))}({url:o.sharableLink}),v=function(e){var n=e.url,t=e.hashtag,r=e.redirectBackTo,i=new URLSearchParams;i.append("href",n),r&&i.append("redirect_uri",r),t&&(t.startsWith("#")||(t="#".concat(t)),i.append("hashtag",t));var o=i.toString();return"".concat(cs,"&").concat(o)}({url:o.sharableLink,hashtag:o.socialHashtag}),m=[{url:u,icon:Jc.Z,base:Qc.c,cta:"Share on Twitter",color:es.Z.brands.twitter},{url:f,icon:as.Z,base:ls,cta:"",color:es.Z.brands.linkedin},{url:v,icon:os.Z,base:cs,cta:"",color:es.Z.brands.facebook}];return(0,r.BX)(d.G,{children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(16),p.l0.align.center,p.l0.pr(24)],children:[(0,r.tZ)(d.G,{css:{fontSize:48},children:"\ud83e\udd73"}),(0,r.BX)(ne.xv,{variant:"headerDefault",multiline:!1,children:["Congrats on completing ",l,"!"]})]}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",css:[p.l0.py(12)],multiline:!1,children:"Share your progress"}),(0,r.BX)(d.G,{css:[p.l0.position.relative,p.l0.borderRadius(8),p.l0.backgroundColor.backgroundHigher,p.l0.py(8),p.l0.px(12)],children:[(0,r.tZ)(d.G,{css:p.l0.pr(16),children:s}),(0,r.tZ)(ee.hU,{css:[p.l0.position.absolute,p.l0.top(8),p.l0.right(8)],alt:"Copy",size:18,tooltipHidden:!0,onClick:function(){i("Copied to clipboard!"),(0,is.Z)(s),(0,$c.l)({action:"copied_share_text",lessonSlug:n,courseSlug:t,origin:"lesson_complete_modal"})},children:(0,r.tZ)(rs.Z,{size:16})})]}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(16),p.l0.justify.center,p.l0.pt(16),p.l0.align.center],children:[(0,r.tZ)(ts.Z,{variant:"outlined",text:"Back to the learning hub",href:"/learn/".concat(t,"/hub")}),(0,r.tZ)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:m.map((function(e){var i=e.url,o=e.icon,a=e.base,l=e.cta,c=e.color;return(0,r.tZ)(J.zx,{css:[{backgroundColor:c,color:"white"}],onClick:function(){window.open(i,"_blank"),(0,h.j)(h.U3.EXTERNAL_LINK_VIEWED,{url:a,placement:"lesson-complete-modal",campaign:t,lessonSlug:n})},text:l,iconLeft:(0,r.tZ)(o,{})},i)}))})]})]})},us=function(e){var n=e.lesson,t=(0,qe.Z)().showError,i=(0,qc.$0)().fireCircularBurstFrom,o=(0,c.useRef)(null),a=(0,Yc.T)(),s=(0,c.useState)(!1),u=s[0],d=s[1],p=(0,l.Z)(function(e){var n=(0,m.Z)({},w,e);return b.D(C,n)}({onError:function(){return t("Something went wrong")},onCompleted:function(e){var r,l;"UpdatedUserCourseLesson"!==(null===(r=e.completeUserCourseLesson)||void 0===r?void 0:r.__typename)?t((null===(l=e.completeUserCourseLesson)||void 0===l?void 0:l.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===n.id?(o.current&&!a&&i({element:o.current}),d(!0)):t("Something went wrong")}}),2),f=p[0],h=p[1].loading;return(0,r.BX)(r.HY,{children:[null!==n.timeCompleted?(0,r.tZ)(J.zx,{ref:o,disabled:!0,text:"Lesson completed \ud83c\udf89",colorway:"primary"}):(0,r.tZ)(J.zx,{iconLeft:h?(0,r.tZ)(se.Z,{}):void 0,onClick:function(){(0,$c.l)({action:"completed",lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug}),f({variables:{input:{userLessonId:n.id}}})},text:h?"Verifying\u2026":"Mark lesson as complete",colorway:"primary",css:[h&&Kc.p.backgroundPulse()]}),(0,r.tZ)(He.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,r.tZ)(ss,{lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug})})]})},ds=t(75509);function ps(e){var n=e.lesson,t=ql(),i=Yl();return t?(0,r.tZ)(us,{lesson:n}):(0,r.tZ)(J.zx,{colorway:"primary",iconLeft:(0,r.tZ)(ds.Z,{}),text:"Show tutorial",onClick:function(){return i()}})}var fs=t(25959),hs=t(44119),vs=t(91625),ms=(0,de.X)({popover:[p.l0.maxWidth(460),p.l0.width("100%")],button:[te.gU.nofill,p.l0.height(32),p.l0.flex.growAndShrink(1),p.l0.align.center,p.l0.rowWithGap(4),p.l0.px(6),p.l0.borderRadius(6),p.l0.color.foregroundDefault]});function gs(e){var n=e.repl,t=e.onDeployClick,i=(0,l.Z)(c.useState(!1),2),o=i[0],a=i[1];return(0,r.BX)(_e.x,{isOpen:o,onOpenChange:function(e){a(e),e&&(0,h.j)(h.U3.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",noArrow:!0,css:ms.popover,children:[(0,r.BX)(d.K.button,{dataCy:"ws-repl-info-container",css:ms.button,onClick:function(){(0,h.j)(h.U3.REPL_METADATA_OPENED)},children:[(0,r.tZ)(hs.Z,{repl:n}),(0,r.tZ)(vs.Z,{color:p.TV.foregroundDimmest,size:12})]}),(0,r.tZ)(fs.Z,{setIsEditing:a,onDeployClick:t})]})}var Zs=t(91758),bs=t(77637),ys=t(68455),xs=t(37776),ws=t(69997),ks=t(95924),Cs=t(21698),Ss=t(97307),Is=t(82893),Ts=t.n(Is),Es=t(9353),Rs=t(94231);function Gs(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentNavMenuCurrentUser on CurrentUser {\n    id\n    ...LayoutSidebarCurrentUser\n  }\n  ","\n"]);return Gs=function(){return e},e}function Ps(){var e=(0,g.Z)(["\n  query ReplEnvironmentNavMenu {\n    currentUser {\n      id\n      ...ReplEnvironmentNavMenuCurrentUser\n    }\n  }\n  ","\n"]);return Ps=function(){return e},e}var Ds={},Bs=(0,Z.Ps)(Gs(),Rs.dj),Us=(0,Z.Ps)(Ps(),Bs);var As=t(19453),Ls=t(18044),Os=function(e){(0,h.j)(Es.U3.NAV_ITEM_CLICK,{target:e,source:"header-nav-menu"})},_s=[p.l0.viewStyle,p.l0.reset.button,te.gU.nofill,p.l0.flex.row,p.l0.height(32),p.l0.width(40),p.l0.center,p.l0.color.foregroundDefault,p.l0.cursor.pointer,p.l0.borderRadius(6),{":hover svg":{fill:p.TV.foregroundDefault}}],Xs={button:(0,i.iv)(_s),surface:(0,i.iv)([p.l0.borderRadius(8),p.l0.width(200),p.l0.maxHeight("80vh"),p.l0.maxWidth("80vw"),p.l0.overflowY("auto")]),ctas:(0,i.iv)([p.l0.colWithGap(8),p.l0.p(8),{borderBottom:"1px solid",borderColor:p.TV.outlineDimmer}]),link:(0,i.iv)([p.l0.viewStyle,p.l0.rowWithGap(4),p.l0.color.foregroundDefault,p.l0.p(8),p.l0.align.center,te.gU.listItem,{":active":{backgroundColor:"".concat(p.TV.backgroundHighest," !important")}}]),linkText:(0,i.iv)(p.l0.flex.shrink(1))},zs=(0,i.iv)([te.gU.nofill,{borderRadius:"0 0 10.5px 10.5px",borderTop:"1px solid ".concat(p.TV.outlineDimmer)}]),Ms="workspace-header-nav-menu";function js(){var e,n=function(e){var n=(0,m.Z)({},Ds,e);return M.a(Us,n)}().data,t=(0,ys.N)({currentUser:(null===n||void 0===n?void 0:n.currentUser)||void 0}),i=(0,c.useState)(!1),o=i[0],a=i[1],l=(0,c.useState)(null),s=l[0],u=l[1];return(0,r.BX)(r.HY,{children:[(0,r.BX)(_e.x,{isOpen:o,onOpenChange:a,placement:"bottom start",label:"Site Navigation",noArrow:!0,children:[function(e){var n=e.ref,t=(0,bs.Z)(e,["ref"]);return(0,r.BX)("button",(0,oe.Z)((0,m.Z)({ref:n,"aria-label":"Nav menu","aria-expanded":o,"aria-controls":Ms},t),{onClick:function(){return a(!o)},css:Xs.button,"data-cy":"global-nav-dropdown-btn",children:[(0,r.tZ)(xs.N2,{color:p.TV.foregroundDefault,size:20}),(0,r.tZ)(vs.Z,{color:p.TV.foregroundDimmest,size:12})]}))},(0,r.BX)(Q.Tg,{id:Ms,elevated:!0,css:Xs.surface,background:"higher",children:[(0,r.BX)(d.G,{css:Xs.ctas,children:[(0,r.tZ)(J.zx,{"data-cy":"global-nav-dropdown-new-repl-btn",text:"Create",iconLeft:(0,r.tZ)(pc.Z,{}),colorway:"primary",onClick:function(){a(!1),u("create")}}),(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.userSubscriptionType)!==v.HP.HackerPro?(0,r.tZ)(J.zx,{text:"Upgrade",iconLeft:(0,r.tZ)(Cs.Z,{}),variant:"outlined","data-cy":"global-nav-dropdown-upgrade-btn",onClick:function(){a(!1),u("upgrade")}}):null]}),(0,r.tZ)(d.G,{children:t.map((function(e){return(0,r.tZ)(Ts(),{legacyBehavior:!0,passHref:!0,as:e.as,href:e.href,prefetch:!1,children:(0,r.BX)("a",{css:Xs.link,onClick:function(){Os(e.label)},onKeyDown:function(){Os(e.label)},role:"menuitem",tabIndex:0,children:[e.icon,(0,r.tZ)(ne.xv,{css:Xs.linkText,multiline:!1,children:e.label}),e.tag||null]})},e.label)}))}),(0,r.tZ)(ws.Z,{css:zs,context:ks.HY.Workspace})]})]}),(0,r.tZ)(Ss.Z,{initialTab:"default",isOpen:"upgrade"===s,onRequestClose:function(){return u(null)},context:"workspace_menu_nav",allowCyclesPage:!1}),(0,r.tZ)(Ls.Z,{isOpen:"create"===s,onRequestClose:function(){return u(null)},children:(0,r.tZ)(As.Z,{})})]})}var Ws=t(30826),Ns=t.n(Ws);function Fs(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;e.preventDefault();var r=e.pageX,i=e.pageY,o={x:r,y:i},a={x:0,y:0};n.start&&n.start({mouse:o,shiftKey:e.shiftKey});var l=Ns()((function(e){e.preventDefault();var t={x:e.pageX,y:e.pageY};a={x:t.x-o.x,y:t.y-o.y},n.move({delta:a,shiftKey:e.shiftKey,mouse:t})}),t),c=function(){l.cancel(),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",c),document.removeEventListener("touchcancel",c),n.end&&n.end({delta:a,shiftKey:e.shiftKey})};document.addEventListener("pointermove",l),document.addEventListener("pointerup",c),document.addEventListener("touchcancel",c)}var Vs=t(49055),Hs=t(61600),Ys=t(39059),qs=function(e){var n,t,r;return n=100/e*1,t=.08,r=.12,Math.min(Math.max(n,t),r)},Ks=(0,so.$)(["transformX","transformY","hoverScaleX","hoverScaleY","width","height","zIndex","cursor","gripVisibility","gripColor","gripWidth","gripHeight","transitionDuration","rotation"]),$s=Ks.cssVars,Qs=Ks.styleTokens,Js=(0,de.X)({root:[p.l0.center,p.l0.position.absolute,p.l0.top(0),p.l0.left(0),{transform:"translate(".concat(Qs.transformX,", ").concat(Qs.transformY,")"),width:Qs.width,height:Qs.height,cursor:Qs.cursor,zIndex:Qs.zIndex,"&:hover":{zIndex:uo.gutterHovered},"& .icon":{transform:"rotate(".concat(Qs.rotation,")")},"&:hover .blanket":{transform:"scale(".concat(Qs.hoverScaleX,", ").concat(Qs.hoverScaleY,")")},"&:active .blanket":[p.l0.height("200vh"),p.l0.width("200vw"),{transform:"translate(-50%, -50%)"}],"&:not(:active):hover > .grip":(0,f.Z)({},$s.gripColor,p.TV.foregroundDefault)}],blanket:p.l0.coverContainer,grip:[p.l0.borderRadius(4),{width:Qs.gripWidth,height:Qs.gripHeight,visibility:Qs.gripVisibility,background:Qs.gripColor,transitionProperty:"opacity, width, height, background-color",transitionTimingFunction:"ease-out"}]});function eu(e){var n=(0,c.useRef)(null),t=(0,Yc.T)();(0,co.j)(n,e.size,(function(e){var n,t=e.width,r=e.height;return n={},(0,f.Z)(n,$s.width,t+"px"),(0,f.Z)(n,$s.height,r+"px"),n})),(0,co.j)(n,e.position,(function(e){var n,t=e.x,r=e.y;return n={},(0,f.Z)(n,$s.transformX,Math.round(t)+"px"),(0,f.Z)(n,$s.transformY,Math.round(r)+"px"),n})),(0,co.j)(n,e.rotation,(function(e){return(0,f.Z)({},$s.rotation,e+"deg")})),(0,co.j)(n,e.gripIsHidden,(function(e){return(0,f.Z)({},$s.gripVisibility,e?"hidden":"visible")})),(0,co.j)(n,e.length,(function(e){return(0,f.Z)({},$s.transitionDuration,(t?0:qs(e))+"ms")}));var r=(0,Vs.y)()?3:2;return(0,co.j)(n,e.isStacked,(function(e){var n;return n={},(0,f.Z)(n,$s.cursor,e?"row-resize":"col-resize"),(0,f.Z)(n,$s.hoverScaleX,(e?1:r).toString()),(0,f.Z)(n,$s.hoverScaleY,(e?r:1).toString()),n})),(0,co.j)(n,e.isActive,(function(e){var n;return n={},(0,f.Z)(n,$s.gripColor,e?"radial-gradient(circle, ".concat(p.TV.accentPrimaryDefault," calc(100% - 48px), transparent)"):p.TV.outlineDimmest),(0,f.Z)(n,$s.zIndex,(e?uo.gutterActive:uo.gutter).toString()),n})),(0,co.j)(n,e.gripSize,(function(e){var n,t=e.width,r=e.height;return n={},(0,f.Z)(n,$s.gripWidth,t+"px"),(0,f.Z)(n,$s.gripHeight,r+"px"),n})),n}var nu=(0,c.memo)((function(e){var n=nc(e.handleId),t=eu(n),i=ao(Er),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,c.useRef)(e),t=Hl(),r=Kl();return(0,c.useCallback)((function(i){i.snapped?t({leftPath:i.leftPath,percent:n.current}):Promise.resolve(r()).then((function(r){var o=vt(r,i.leftPath);if(!o||!kt(o))throw new Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})}))}),[e,t,r])}(),a=c.useRef(null),l=(0,Hs.Z)(n.isSnapped);return(0,r.BX)(d.G,{innerRef:t,css:Js.root,onDoubleClick:function(){o(n.handle.current)},onPointerDown:function(e){Fs(e,{start:function(){var e=n.handle.current;a.current=document.activeElement,i({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){var n=e.delta;i({type:"update",moveDelta:n})},end:function(){var e,n;i({type:"end"}),null===(e=a.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,r.tZ)(d.G,{className:"blanket",css:Js.blanket}),l?(0,r.tZ)(Ys.Z,{className:"icon"}):(0,r.tZ)(d.G,{className:"grip",css:Js.grip})]})})),tu=(0,c.memo)((function(){var e=function(){var e=dr(Mr),n=pr(Mr);return{size:oo(e),position:oo(n),isActive:oo(Xr),length:oo(jr),gripSize:oo(zr),isStacked:oo(tc),gripIsHidden:oo(tc),rotation:oo(rc)}}(),n=eu(e),t={start:ao(Lr),update:ao(Or),end:ao(_r)},i=ic().toggle,o=c.useRef(null);return(0,r.BX)(d.G,{innerRef:n,css:Js.root,onDoubleClick:function(){i()},onPointerDown:function(e){Fs(e,{start:function(){o.current=document.activeElement,t.start()},move:function(e){var n=e.delta;t.update({deltaX:n.x})},end:function(){var e,n;t.end(),null===(e=o.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,r.tZ)(d.G,{className:"blanket",css:Js.blanket}),(0,r.tZ)(d.G,{className:"grip",css:Js.grip})]})})),ru=t(30788),iu=t(80027),ou=t(92361),au=t(63743),lu=t(92585),cu=t(52205),su=t(97866),uu=t(75970),du=t(47805),pu=t(17436),fu=t(50852),hu=t(17771),vu=t(67122),mu=t(11086),gu=(0,de.X)({button:[p.l0.borderRadius(4)]});function Zu(){var e=(0,l.Z)(c.useState(!1),2),n=e[0],t=e[1],i=(0,pu.Q)(),o=(0,vu.D)().isEligible,a=(0,hu.Tf)({context:mu.$X.UpgradeCta});return o?(0,r.BX)(r.HY,{children:[(0,r.tZ)(J.zx,{text:"Start ".concat(i," trial"),colorway:"blurple",stretch:!0,onClick:function(){return t(!0)},css:gu.button}),(0,r.tZ)(He.u,{isOpen:n,onRequestClose:function(){return t(!1)},css:a,children:(0,r.tZ)(fu.a,{onClaim:function(){return t(!1)},onClose:function(){return t(!1)},context:mu.$X.Workspace})})]}):null}var bu=t(42655),yu=t(79124),xu=t(71187),wu=t(9125);function ku(){var e=(0,g.Z)(["\n  query WorkspaceHeaderUsersOnline($ids: [Int!]!) {\n    currentUser {\n      id\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return ku=function(){return e},e}var Cu={},Su=(0,Z.Ps)(ku());var Iu=t(42216),Tu=t(4821);function Eu(){var e=(0,re.Z)().presence,n=Hc(El()),t=(0,Se.Z)({presence:e}),i=(0,l.Z)(function(e){var n=(0,m.Z)({},Cu,e);return wu.t(Su,n)}(),1)[0];return(0,$n.Z)((function(){return{data:{type:"context",label:"Multiplayers",icon:(0,r.tZ)(dn.Z,{})},commands:(0,Hn.Z)((function(){var e,o,a,l,c;return(0,Yn.__generator)(this,(function(s){switch(s.label){case 0:return t.length?[4,i({variables:{ids:t.map((function(e){return e.id})).slice(0,Tu.I)}})]:[2,[]];case 1:return(e=s.sent().data)?(o=t.reduce((function(e,n){return e[n.id]=n.color,e}),{}),a=e.currentUser,l=e.usersByIds.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)})),c=l.map((function(e){return{match:Qn.pl,data:{type:"action",label:e.username,icon:(0,r.tZ)(d.G,{style:{border:"2px solid",borderColor:o[e.id],borderRadius:"50%"},children:(0,r.tZ)(Iu.Z,{size:16,src:e.image,alt:e.username})}),run:function(){return n({username:e.username,id:e.id})}}}})),t.length>Tu.I&&c.push({match:Qn.pl,data:{type:"action",label:"+".concat(t.length-Tu.I," more"),icon:(0,r.tZ)(dn.Z,{}),run:function(){}}}),[2,c]):[2,[]]}}))}))}}),[t,n,i])}var Ru=t(8149),Gu=t(11866),Pu=t(17284),Du={type:"context",icon:(0,r.tZ)(sc.Z,{}),label:"",description:"Search"};var Bu=(0,i.iv)([p.l0.top(0),p.l0.left(0),p.l0.width("100%"),p.l0.zIndex(3),{"& > div:first-of-type > div:first-of-type":[p.l0.pl(0),p.l0.pr(0),p.l0.pt(0)]},{'& [role="listbox"]':[p.l0.pl(8),p.l0.position.absolute,p.l0.top(40),p.l0.height("calc(100% - ".concat(40,"px)")),p.l0.left(0),p.l0.width("100%"),p.l0.zIndex(3),p.l0.backgroundColor.backgroundRoot]},{'& [role="option"] > div':[p.l0.borderRadius(8)]}]);function Uu(){var e=function(){var e=(0,re.Z)().fs,n=(0,Re.AA)(),t=(0,ac.T)(),i=El(),o=Ic(i),a=(0,Ru.s6)(Gu.YC.SidebarSearch),l=xl(),s=(0,c.useCallback)((function(e){(0,h.j)(h.U3.TOOL_OPENED,{source:"Sidebar Search",tool:e.pane.type}),l(e)}),[l]),u=Ec(s),d=dc(s),p=Eu();return(0,$n.Z)((function(){var l={data:{type:"context",label:"Tools",icon:(0,r.tZ)(lc.Z,{})},commands:function(){return u}},c=(0,Jn.i)({openFile:i,fs:e,shouldHideFile:t,getRecentFiles:n,lazyLoad:!0});return c.match=void 0,{data:Du,commands:function(){return[o,c,l,p,d,{data:{type:"group",key:"extensions"},commands:(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return e=[{data:{}}],[4,Promise.all(a.map(function(){var n=(0,Hn.Z)((function(n){var t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:return(t=r.sent())?[2,(0,Pu.C)(t,{path:e})]:[2,null]}}))}));return function(e){return n.apply(this,arguments)}}()))];case 1:return[2,n.sent().filter(Boolean)]}}))}))}]}}}),[e,u,o,t,i,n,p,d,a])}();return(0,r.tZ)(d.G,{css:Bu,children:(0,r.tZ)(Nn.X,{command:e,openOnInput:!0})})}var Au,Lu=t(77205),Ou=t(17403);!function(e){e.Files="files",e.Dock="dock",e.Kaboom="kaboom"}(Au||(Au={}));var _u=Ou.Type.Object({id:Ou.Type.Enum(Au),height:Ou.Type.Number()}),Xu=(0,c.createContext)(void 0);function zu(){var e=(0,c.useContext)(Xu);if(!e)throw new Error("Expected store in context");return e}function Mu(e){var n=zu();return(0,Vn.Dv)(e,{store:n})}var ju=function(e){var n=zu();return(0,Vn.b9)(e,{store:n})};function Wu(e){var n=(0,c.useState)((function(){return(0,Fn.MT)()}))[0];return(0,r.tZ)(Xu.Provider,{value:n,children:e.children})}function Nu(e){var n=e.sections,t=e.id,r=n.findIndex((function(e){return e.id===t}));if(-1===r)throw new Error("");var i=n[r],o=i.height;i.height=0;var a=n.slice(r),l=n.slice(0,r).reverse(),c=!0,s=!1,u=void 0;try{for(var d,p=(0,We.Z)(a).concat((0,We.Z)(l))[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;if(0!==f.height)return void(f.height+=o)}}catch(h){s=!0,u=h}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}}var Fu=t(52783),Vu=function(){return{getItem:function(e){var n;try{n=window.localStorage.getItem(e)}catch(t){0}return null!==n&&void 0!==n?n:null},setItem:function(e,n){try{gn.Z.set(e,n)}catch(t){0}},removeItem:gn.Z.remove}},Hu=function(e){return"function"===typeof(null===e||void 0===e?void 0:e.then)};var Yu=40,qu=(0,Fn.cn)({}),Ku=(0,Fn.cn)(null,(function(e,n,t){n(qu,(function(e){return(0,ut.ZP)(e,(function(e){e[t.id]=t.preferredHeight}))}))}));var $u=(0,Tt.O4)("sidebarSections",[],function(e){var n,t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vu,i=r(),o=function(r,i){var o=null!==r&&void 0!==r?r:"";if(o!==n){try{var a=JSON.parse(o);if(!Fu.B4.Check(e,a))return i;t=a}catch(l){return i}n=o}return t},a={getItem:function(e,n){var t,r=null!==(t=null===i||void 0===i?void 0:i.getItem(e))&&void 0!==t?t:null;return Hu(r)?r.then((function(e){return o(e,n)})):o(r,n)},setItem:function(e,n){return null===i||void 0===i?void 0:i.setItem(e,JSON.stringify(n))},removeItem:function(e){return null===i||void 0===i?void 0:i.removeItem(e)}};return a}(Ou.Type.Array(_u))),Qu=(0,Fn.cn)(0);function Ju(e,n){return e.map((function(e){var t=e.id,r=e.percent;return{id:t,height:n*(r/100)}}))}var ed=(0,Fn.cn)(null,(function(e,n,t){var r=t.height-t.sections.length*Yu;n(Qu,t.height);var i=e($u);if(i.length===t.sections.length){for(var o=[],a=i.map((function(e){return e.height})).reduce((function(e,n){return e+n}),0),l=0;l<i.length;l++){var c,s;if((null===(c=i[l])||void 0===c?void 0:c.id)!==(null===(s=t.sections[l])||void 0===s?void 0:s.id))return void n($u,Ju(t.sections,r));var u=i[l];o.push((0,oe.Z)((0,m.Z)({},u),{percent:0===a?0:u.height/a*100}))}n($u,Ju(o,r))}else n($u,Ju(t.sections,r))}));function nd(e){var n=zu(),t=function(e){return(0,$n.Z)((function(){return(0,Fn.cn)((function(n){var t;return Yu+((null===(t=n($u).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)||0)}))}),[e])}(e);return(0,it.b)(t,n)}var td=(0,Tt.kv)($u,(function(e){return e.map((function(e){return e.id}))}),pt());var rd=(0,Fn.cn)(null,(function(e,n,t){n(Qu,t),n($u,(function(e){return(0,ut.ZP)(e,(function(e){var n=e.reduce((function(e,n){return e+n.height}),0),r=t-e.length*Yu-n,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(s.height>0){var u=0===n?0:s.height/n;s.height=Math.max(0,s.height+r*u)}}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}))}))}));var id=(0,Fn.cn)(null,(function(e,n,t){var r=e($u),i=e(qu)[t],o=r.find((function(e){return e.id===t}));if(!o)throw new Error("");0===o.height?n($u,(0,ut.ZP)(r,(function(n){!function(e){var n=e.sections,t=e.preferredHeight,r=e.id,i=n.findIndex((function(e){return e.id===r}));if(-1===i)throw new Error("Expected sectionIndex");var o=n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),a=e.totalHeight-o,l=n[i];if(a>0)l.height=a;else{var c=n.slice(i+1).find((function(e){return e.height>0}))||n.slice(0,i).reverse().find((function(e){return e.height>0}));if(c){if(void 0!==t&&t<c.height)return l.height=t,void(c.height-=t);l.height=c.height,c.height=0}}}({sections:n,id:t,totalHeight:e(Qu),headerHeight:Yu,preferredHeight:i})}))):(n(Ku,{id:o.id,preferredHeight:o.height}),n($u,(0,ut.ZP)(r,(function(e){return Nu({sections:e,id:t})}))))}));function od(){return ju(id)}function ad(e){var n=(0,$n.Z)((function(){return(0,Fn.cn)((function(n){var t;return 0===(null===(t=n($u).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)}))}),[e]);return Mu(n)}var ld=(0,Fn.cn)(null),cd=(0,Fn.cn)(null,(function(e,n,t){var r=e($u);if("start"!==t.type){var i=e(ld);if(!i)throw new Error("");if("update"!==t.type)n($u,(0,ut.ZP)(r,(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.height>=32||Nu({sections:e,id:a.id})}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}))),n(ld,null);else{var o=e(Qu);n($u,(0,ut.ZP)(i.sectionStart,(function(e){var n=i.heightStart+t.delta;!function(e){var n=e.sections,t=e.id,r=e.totalHeight-n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),i=n.findIndex((function(e){return e.id===t}));if(-1===i)throw new Error("Expected sectionIndex");var o=r+n.slice(i).reduce((function(e,n){return e+n.height}),0),a=n[i],l=e.height>a.height,c=Math.min(o,e.height),s=Math.abs(a.height-c);if(l){a.height=Math.max(0,c);var u=!0,d=!1,p=void 0;try{for(var f,h=n.slice(i+1)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;if(0!==v.height){if(!(v.height<s)){v.height-=s;break}s-=v.height,v.height=0}}}catch(S){d=!0,p=S}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}else{var m=n[i+1];if(e.height>=0)return a.height=e.height,void(m&&(m.height+=s));var g=a.height;a.height=0;var Z=-1*e.height,b=!0,y=!1,x=void 0;try{for(var w,k=n.slice(0,i).reverse()[Symbol.iterator]();!(b=(w=k.next()).done);b=!0){var C=w.value;if(C.height>Z){g+=Z,C.height-=Z;break}g+=C.height,Z-=C.height,C.height=0}}catch(S){y=!0,x=S}finally{try{b||null==k.return||k.return()}finally{if(y)throw x}}m&&(m.height+=g)}}({headerHeight:Yu,totalHeight:o,sections:e,id:i.id,height:n})})))}}else{var a=r.find((function(e){return e.id===t.id}));if(!a)throw new Error("");n(ld,{id:t.id,heightStart:a.height,sectionStart:r})}})),sd=(0,Fn.cn)((function(e){return Boolean(e(ld))}));function ud(e){var n=e.id,t=(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var t;return(null===(t=e(ld))||void 0===t?void 0:t.id)===n}))}),[n]);return Mu(t)}var dd=t(88031),pd=t(88149),fd=t(76190),hd=t(84075),vd=t(98295),md=t(59519),gd=t(12583),Zd=t(87223),bd=t(20380),yd=t(39191),xd=t(97069),wd=t(97492),kd=t(66777),Cd=t(30296),Sd=t(5158),Id=t(9694),Td=t(95148),Ed=t(14053),Rd=t(39526),Gd=t(68989);function Pd(e){var n=e.filetree,t=(0,Ie.Z)(),i=(0,Re.OM)(),o=(0,Re.t9)(),a=(0,c.useRef)(null),l=(0,c.useRef)(null),s=Nl(),u=(0,bd.Z)(),d=c.useCallback((function(){var e=[{icon:(0,r.tZ)(Sd.Z,{}),label:Zd.st.UploadFile.text,run:function(){a.current&&(a.current.click(),(0,xd.Z)({replId:t,action:"uploaded",fileType:Tn.Tv.File}))}}];return u&&e.push({icon:(0,r.tZ)(Rd.Z,{}),label:Zd.st.UploadFolder.text,run:function(){l.current&&(l.current.click(),(0,xd.Z)({replId:t,action:"uploaded",fileType:Tn.Tv.Directory}))}}),e.push({icon:(0,r.tZ)(Wa.Z,{}),label:Zd.st.OpenPane.text,run:function(){s({pane:{type:"commands",data:{autoFocus:!0}},edge:"left"})}},{icon:(0,r.tZ)(Id.Z,{}),label:Zd.st.DownloadZip.text,run:function(){return(0,wd.R)(t)}},{icon:o?(0,r.tZ)(Td.Z,{}):(0,r.tZ)(Ed.Z,{}),label:o?Zd.st.HideHiddenFiles.text:Zd.st.ShowHiddenFiles.text,run:function(){i(!o)}}),n.getExpandedDirs()&&e.push({icon:(0,r.tZ)(Gd.Z,{}),label:"Collapse all",run:function(){var e=n.getExpandedDirs();e&&n.collapse((0,We.Z)(e))}}),{data:{type:"context",label:"Search actions",icon:(0,r.tZ)(sc.Z,{})},commands:function(){return e.map((function(e){return{match:Qn.pl,data:{type:"action",label:e.label,run:e.run,icon:e.icon}}}))}}}),[o,i,t,u,s,n]),p=(0,Cd.av)().openContextMenu,f=(0,c.useRef)(null);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(ee.hU,{alt:"menu",tooltipHidden:!0,innerRef:f,onClick:function(){return f.current&&p({target:f.current,command:d()})},children:(0,r.tZ)(kd.Z,{})}),(0,r.tZ)(yd.Q,{fileUploadInputRef:a,dirUploadInputRef:l,uploadFiles:n.upload})]})}var Dd=t(52745),Bd=t(75850),Ud=t(35429),Ad=t(62385),Ld=t(91333),Od=t(73823),_d=t(96073),Xd=t(2580),zd=t(91046),Md=t(5319),jd=t(40380);function Wd(e){return{match:Qn.pl,data:{type:"action",label:"Rename",icon:(0,r.tZ)(Ad.Z,{}),run:e}}}function Nd(e,n){return{match:Qn.pl,data:{type:"action",icon:(0,r.tZ)(sc.Z,{}),label:"Search this directory",run:function(){n({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(e,"/**")}},edge:"right"})}}}}function Fd(e){return[{label:"Copy file path",icon:(0,r.tZ)(Ld.Z,{}),run:function(){return(0,is.Z)(e)}},{label:"Copy URL",icon:(0,r.tZ)(Od.Z,{}),run:function(){return(0,is.Z)((0,_d.dr)({path:e}))}}].map((function(e){var n=e.label,t=e.icon,r=e.run;return{match:Qn.pl,data:{type:"action",label:n,icon:t,run:r}}}))}function Vd(e){return{match:Qn.pl,data:{type:"action",icon:(0,r.tZ)(Xd.Z,{color:p.TV.redDefault}),label:"Delete",run:e}}}function Hd(e){var n=e.size,t=e.iconUrl,i=e.name;return(0,r.tZ)(ue.Z,{src:t,width:n,height:n,alt:"Icon for file opener: ".concat(i)})}function Yd(e,n,t){var i=[],o=!0,a=!1,l=void 0;try{for(var c,s=function(){var n=c.value,o=(0,Md.Z)(n.glob);if(!o||!o.exec(e))return"continue";var a=n.icon?n.icon:n.extension.manifest.icon,l=n.name?n.name:n.extension.manifest.name,s=a?(0,zd.Vh)(n.extension.baseUrl,a):null;i.push({match:Qn.pl,data:{type:"action",icon:s?(0,r.tZ)(Hd,{size:16,name:l,iconUrl:s}):(0,r.tZ)(Ed.Z,{}),label:"Open with "+l,run:function(){return t({path:e,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:n}})}}})},u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)s()}catch(d){a=!0,l=d}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return i}function qd(e,n){return{match:Qn.pl,data:{type:"action",label:"Open shell here",icon:(0,r.tZ)(jd.Z,{}),run:function(){n({pane:{type:"shell",data:{initialPwd:e}},edge:"left"})}}}}function Kd(){var e=(0,Ie.Z)(),n=(0,re.Z)().fs,t=El(),i=Nl(),o=(0,Ru.c_)(),a=(0,Ru.s6)(Gu.YC.FiletreeContextMenu),s=(0,u.P5)({controlName:"flag-open-with",type:"boolean",default:!1,logFlagToAnalytics:!1}),d=(0,c.useCallback)((function(i,c){var u,d=i.path,p=[{data:{type:"group",key:"rename"},commands:function(){return[Wd((function(){return c.rename(d)}))]}}];if(p.push({data:{type:"group",key:"open"},commands:function(){return function(e){var n=e.path,t=e.getSelectedNodes,i=e.openFile,o=[{type:Tn.Tv.File,path:n}],a=!0,c=!1,s=void 0;try{for(var u,d=t()[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=(0,l.Z)(u.value,2),f=p[0],h=p[1];h!==Tn.Tv.Directory&&f!==n&&o.push({path:f,type:h})}}catch(g){c=!0,s=g}finally{try{a||null==d.return||d.return()}finally{if(c)throw s}}var v=o.length,m=1===v?"Open":"Open ".concat(v," files");return[{label:m,icon:(0,r.tZ)(Ed.Z,{}),run:function(){var e=!0,n=!1,t=void 0;try{for(var r,a=o[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var l=r.value;i({path:l.path,newTab:!0})}}catch(g){n=!0,t=g}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}}},{label:m+" in split",icon:(0,r.tZ)(Wa.Z,{}),run:function(){var e=(0,ft.Z)(o),n=e[0],t=e.slice(1);i({path:n.path,newPane:!0});var r=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;i({path:u.path,newTab:!0})}}catch(g){a=!0,l=g}finally{try{r||null==s.return||s.return()}finally{if(a)throw l}}}}].map((function(e){var n=e.label,t=e.icon,r=e.run;return{match:Qn.pl,data:{type:"action",label:n,icon:t,run:r}}}))}({path:d,getSelectedNodes:c.getSelectedNodes,openFile:t})}}),s){var f=Yd(d,o,t);f.length&&p.push({data:{type:"group",key:"extensions"},commands:function(){return f}})}return p.push({data:{type:"group",key:"copy"},commands:function(){return Fd(d)}}),p.push((u=(0,Hn.Z)((function(){var t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:t=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,Bd.Z)(d,n)];case 2:return t=r.sent(),[3,4];case 3:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,xd.Z)({replId:e,action:"duplicated",fileType:Tn.Tv.File}),c.rename(t),[2]}}))})),{match:Qn.pl,data:{type:"action",label:"Duplicate",icon:(0,r.tZ)(rs.Z,{}),run:u}})),p.push((0,Ud.H4)(d,n)),p.push({data:{type:"group",key:"deleteFile"},commands:function(){return[Vd((function(){return c.deleteNodes(i)}))]}}),p.push({data:{type:"group",key:"extensions"},commands:(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return e=[{data:{filePath:d,fileType:Tn.Tv.File}}],[4,Promise.all(a.map(function(){var n=(0,Hn.Z)((function(n){var t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:return(t=r.sent())?[2,(0,Pu.C)(t,{path:e})]:[2,null]}}))}));return function(e){return n.apply(this,arguments)}}()))];case 1:return[2,n.sent().filter(Boolean)]}}))}))}),p}),[t,e,a,o,n,s]),p=(0,Re.OM)(),f=(0,Re.t9)(),h=(0,c.useCallback)((function(e,n){var t,o=e.path,l=o===gd.Ql,c=l?[]:[{data:{type:"group",key:"rename"},commands:function(){return[Wd((function(){return n.rename(e.path)}))]}}];return c.push({data:{type:"group",key:"search"},commands:function(){return[Nd(e.path,i)]}}),(t=c).push.apply(t,(0,We.Z)(function(e){return[{label:"Add file",icon:(0,r.tZ)(hd.Z,{}),run:function(){return e(Tn.Tv.File)}},{label:"Add folder",icon:(0,r.tZ)(vd.Z,{}),run:function(){return e(Tn.Tv.Directory)}}].map((function(e){var n=e.label,t=e.icon,r=e.run;return{match:Qn.pl,data:{type:"action",label:n,icon:t,run:r}}}))}((function(t){return n.create(t,e.path)})))),c.push({data:{type:"group",key:"openShell"},commands:function(){return[qd(o,i)]}}),l||c.push({data:{type:"group",key:"copy"},commands:function(){return Fd(o)}}),n.getExpandedDirs()&&c.push({match:Qn.pl,data:{icon:(0,r.tZ)(Gd.Z,{}),type:"action",label:"Collapse "+(l?"all":"child folders"),run:function(){var e=n.getExpandedDirs(o);e&&n.collapse((0,We.Z)(e))}}}),l||c.push({data:{type:"group",key:"deleteFile"},commands:function(){return[Vd((function(){return n.deleteNodes(e)}))]}}),l&&c.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:Qn.pl,data:{type:"action",label:(f?"Hide":"Show")+" hidden files",icon:f?(0,r.tZ)(Td.Z,{}):(0,r.tZ)(Ed.Z,{}),run:function(){p(!f)}}}]}}),c.push({data:{type:"group",key:"extensions"},commands:(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return e=[{data:{dirPath:o,fileType:Tn.Tv.Directory}}],[4,Promise.all(a.map(function(){var n=(0,Hn.Z)((function(n){var t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:return(t=r.sent())?[2,(0,Pu.C)(t,{path:e})]:[2,null]}}))}));return function(e){return n.apply(this,arguments)}}()))];case 1:return[2,n.sent().filter(Boolean)]}}))}))}),c}),[f,p,a,i]);return(0,c.useCallback)((function(e,n){return{data:{type:"context",label:"Search actions",icon:(0,r.tZ)(sc.Z,{})},commands:function(){return e.type===Tn.Tv.Directory?h(e,n):d(e,n)}}}),[d,h])}var $d=t(12030);function Qd(e){var n="For example, here is a code block in ".concat(e);switch(e){case"python3":return"".concat(n,'\n```python\ndef hello_world():\n  print("hello world!")\n```\n');case"java10":return"".concat(n,'\n```java\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println("hello world");\n  }\n}\n```\n');case"html":return"".concat(n,"\n```python\n<html>\n<body>\n  <h1>hello world</h1>\n</body>\n</html>\n``")}return""}function Jd(e){var n=e.language;return"# Lesson plan\n  \n  ** this file should contain teacher lesson plan details ** \n\n  __ students will never see this __\n\n  ## Learning Objectives\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your lesson plan.\n\n  ".concat(Qd(n),"\n  ")}function ep(e){var n=e.language;return"# Instructions  \n\n  ** this file should contain student lesson instructions **\n\n  _ students will see these instructions in a read-only workspace tab _\n\n  ## Steps\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your instructions.\n\n  ".concat(Qd(n),"\n  ")}var np="iVBORw0KGgoAAAANSUhEUgAAATcAAABeCAYAAABGrlMUAAAACXBIWXMAAAWJAAAFiQFtaJ36AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABiXSURBVHgB7Z1bcxNXtseXuGM4FTGVPOakzWuqDnISLoEHBHlJKtTBwxSvg8kHiO18gCCfDwBmPgCIvKZOEFNJpSpViZs8hEAYbOZ9cFN5SkgFpwowd83/397tacu9+yJ1y5K8flVtyeqL1N27/3vttfZeW0RRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEWJoCSKouRKtVqVx48fO1Hrtm3btuC67oIohbNJFEXJDSNsw81m807U+kePHk3hpSZK4XRd3A4cOOC8fPmygptfLpVKDpYyPn6F6/DZXfPqcdm5c+ec1nLKeuTkyZPieV4Fz8do1PoNGzbM//jjj5ekDWq1muC5Kj948KAStX5QnruuixvNctRsCxCvN7A4WPbgBvoXGa8Sfl1cXJT9+/d7eDuH7Rq4oVdxQz1RlAHn3r17fBnBs3Amaj2ehxm8tCVuEC5alyMbN278LurQEL2j3Ez6nELEbe/evb5l1vo5bhRrAw8C5Uro4tGaw0sVFt3xiJqK62jhjeKYFDsK3bQKnaIoceQqbhCpKoSHNU3Vto2xxvh2DosHQXOfP39+++bNm3X8X4fPooxaZdQcx4k4BE31uhG6Ot5PqcgpitJKLuJmRO0clkqG3bhtBRaYb6nt27dvAULlwuHauHHjRh0f1VOI5RjWj6nIKYrSygbpADYnISwzpv2fRdhWYQILo7TKcMx5iB1Fzbt+/foRfHaa72N2p8jNYL8JURRFkQ7EDUIyjiblrMQ0QTuAPrYaBQsidwoWWf3Jkycj+Px83D5YzlFsjQ9PUZR1TGZxo08MAnIRb6eNtVUkjrHkZhFlLcOKm0AzdhKiFxemZlN25p133qmKoijrlkziRosIAQE2QcekuzD6OsMo7LVr16bx/ojEN1MdhLlnTNNWUZR1SGpxo7Dl4VvrAAdWG5uc1Z9++mkOFt2RBAuOfryaCpzSj3Ckw44dOy6jDA9blo9EiSVVtDQkbI6sLWX8jsuw4I7ADzfHV3w2E9c8NgIniMBOiaL0CRxFABbMorRBouXWQ8IWUIYFd5m/ixYcmp+JoqUWnKKsPxLFjZaS9I6wBVBwGdQQ44NrJO1gBG5UFEVZF8Q2SxGlPCcZfWz0g0FIOPrg9suXL+kbW4CltcK0fvHiBaOgDt4G40odyU6V3UTQ3Lz09OnT01u2bKkmRW+x/iIsvjnt7Ksog49V3ODPGsNLqk6xRtAuYWlcv37dlYwEY0txnFOSod8crTE4Xq8wgwGOcd6MZoijbCzREVEUZaCJFDfjZ0vjo/KwTA8NDV3qJEWKsaTqsjTkiimRahCuUyl2ZdeUMf6Gx48fT8N6G0/R964Ci68Gi68mPY4ZZ1t+/vy5s2nTJq8IizP4DljT5SDZAb+rX5MqBokiw+fD1gMij56mz1pfRGbixcNfjxMXY6lNwUqblhgoVHww0Swth7OEsLBBwBbiCl1akcNx5yBUI2afWkpR5neP5C0WtHZNc3sFPM+ka0UoNA8fPjyF60UrdkUzG/9P5SHI7EqD63rYuANiXQJhFwPEonHz5k1XcsaIEX9TNWo9Ks5pmygFeclwzUZxzQ7LktXviIUuno81WWXa+8hzazQaZVTYka0nnK9rsutEfT+fnTGJx4l5tupBbsU46OtmUE96lFWWGzvKJgiKiwt7ulUYzIO5opAxcweimf76IEdbAD5nQso5WF4L+E6mMbpNEXj27Jk3Nze3YI4/ZgTLGq3lQ8rRCCyotN62bt2aRtzKJiBxRHIE525rVntYrOLGa/fo0aNxLByBEVgbkhfB8XFMjsF10h7biGuVC+7XuMmt5+adpIDCZslb1sQ9rUtLd4jgAf76668n6MoIrlkSUeeD/evY/1Kv+WGZcw3W8y5bZY1r5m9m2X3Ycj3TMpaijDSZUFaWsvv0JKvEDTf6nG3jqFqHEUhciHGIVBX7SgIulga2v5K2MHG7SqUyAtGq4d/xqG1QUBkFdSmKKLCupPPbVQNRlDWEY3QhPLVSQUPZcj6+I2uYiSWw1FDW+OD6Fk2HlUAwhnmMrRXtCzlYrBA3k2Koatl2Ejd/2fowTbBzKR+aoLZ3pQ0oWniZwO9biKrJ8Nnh0L9XJGVQAqLIY7myBhhritbjaJ5WWgAtcFQ2PH6liOPLksgdhiiwwmsrI2wWmHb7q6++GsE5fSH5d03yRQ6CfQqvRzWaPhisMLVQWMct200GPiM+NMy8wQcnhbB5HCbFtEXtClsYHIMWyKralU1TigXfQ7BcSU91LQbY87dyjK4tP36n0FrDsbsxVI7Nn4tFd5BmM/Tnn39mZcq02I4UB31ltzR11mCwbLmZCOmqh800RX1h40OD/2t4m2itYbtLcAZP5B2hosDht0qrBQexoPV25YcffpgziS9TNcOCJq10EZN8oBDhwbU5w3uU0VrzjLM9uFeOpBeRkrF63kAlVsh4R1i4f6aIpjmn0Hl45n+WAydDs3wXlrMoQ69oMzV/HsxICRbVdxl3aw4dkaMZ9/mPuEUJGzgf+NiyPDR5RfZsUOBQ+Pa0WD7DwRtTuFMV5pYmbeGk6RhtEgKwKc+I1Tycx39ICsdtcI+StuPxYXkzN54Lp7V1piPTtOX14XWuJhz2NNPHFyBwvK8XbCuNmLm4RlcQeW9EnUsogsjrPpqimxEF+wzO5480Ue5egueKKCtThMUGy3Dd2MPgbNQqLJM4/9uSAK535mACw4svs+eAbEobhMXtVItwedu3b6/xTdqHxhxnqht9yDgqAUGGcFcGJ7R6TlJaHqXic9Itk6JjtGu62LiSEQZ2UtwjuglOpz2+CfNzOY/fzpmYLpguJDbomL+bo8VTgiB9EXOP2MdyKql1wMijLFlyHh7+BoSOQQTeh/G478ZyFm6LubUOOmUhNODetW1jxL7E3gxRvHjx4nY/nbMNX9xMk3RFoaWvjIUm1BRNJIuwtXQdKZvlNo4xm2ZmKwYZ8LtPm24ixAn9jj8KcqJ3BM7L5pvyRaddv6S5f+cSNjvPyqpdNwGEbhb3bMQIg+08fIsHgnA1r4fDImzzTPnTzvUKhA7nMoFz4aiWOD9eCW6LL7Dtbu0A3H/4AQUodbXl8zrFxQyLSmuW19MIG0WNDmj4UeZNNG9M/tPsGTczW80z229SuvCWKQJfkR7GWG1O6+f0TUJ0RjoJuLCzs8R3XqU12LH/k8Lw6quvUtxOxOTSoyBcCAI8BTBrIpqudADP5f33359/8uTJWxLvc90FH+kFUfoOX9xQWKqhz7wgIhmyipJgE3YyaSOTyZeFM02/K3Y1SJwPIRQ9jd1urYmy2oylO9aJ6JguOXGjSXJ1E3z55ZccNXAZ5/NJzGbD7JAs+TOPcpZbVw024dACuM9jSrzAjWra+v4j6AqyJ/iAlgQLj83SiIJNqqQHtM28cE6SwLEGbyZk5E3Ak+JxZPV5n89DdGKauv7wmCL8n6b3/MWobjkBWPdxztYbm6JHi2ge4nc2YcGdEHtZoDX6qSh9RWC5Bf42Dw9L3V8R89C0UE/TRDDDnRzJznLuNhvMSNLy/xvS23DKwo4tG3a6Fvs15b1MtKbbxQgcxc21bLIrR+utWeRoCFpw5XL5fkLq7qpab/3FhharyG3DakuMjJnjVaV9/NxttpUQP1dCtW54kH4KEkPeecNgjeRA3ODowAKXYqHo/J9tJa03yQdmRCl0FIQRa7YCbN9D6+24KH0DLTcn+CcQqoxWm5e0kRlQ3hEc9C3247f2t3EkPZ50EfrA8hCdSqVSjvG1ed3ojhMIgtitt3IO1k4zTQWaE02Upbjv6rgcK91jA2r/wMpxTYS0KhmtthSTIFelc6o2H44RCy5y8ODBSpa+a4gU+8KIc+hGwV1u9ncKMw/HrHale8RZb3lYO4VbbQFGrD0pVqyVLrEhlNCvzlfLSIUo3MACYWJA20YUG8mJBw8exB3Lb14+e/Ys0/ft3LnTF7cM590Jbl5NxZYI9wpwP7oiBsR0CJ2LCerskc5wpbs0UeF/ZllXYq49UfqC8MD5q/yTdjhSIIZsHknMcKKQZVgoJrdU7EMfgWtSlDvShflYc25e2URjoZu9y40zPkgCGUUn15Vd6K9IF6FYo4Js2NbjPDsVa6VL+CMUmDQS0TsvaqRCDL4YDg0NOSgM1o04OQwsCSmawO+GwpdlrKj/4HTDaguuseQE75NlFMacdJknT57whZZzNWJ1meWqXYs1zRjHPKFYHzp0iElT5yxDzVTcOmAbiu6DNpLEPpqRtH1uA5qbOMgciy9UHFicctjScj5/WmZRqbWXf9SjR97WrVslD4ImZBSBv5CZZiUl+N1BDc0xhp4USHCN88AEE2wWcXX//v1tDTRuF5MV1gruCQXBk+wsrEVutc2bN9N6o6hGiZsjStuYfgJuhl1kcUZK7Qy238DJQJhP3nyQ1mpbrk3NNH3WfmUm0aQrHULLJ6kDZ4q88WEyB1A6JGvNY4XWsvQRuC+7pA0CV0O3oSUaSv+0ihQBNKUHYLR0IbCI0voTKDQtHzGSad2+tZNtO6DZOR23ngWulG7GLB+I8hR/c0gQ/5ACwffclZzolh9zrYkTmCJBS6PZ4agXpQfYQOslsIjSNunCNaqZnMNhvizb9viOunRmuczHdQcwIlWT9Fw2E8osC2KEYOdKL88SpCiDSOuMLo6kICxuQVeSpCYhh7Zg2/uSEe7DMYVx23AqtSxWG7b9pFUQ8dmsFIdaAYrSZZbFjQ97qY3EjaEuGONxTVNaiLDymF5mXtIf+z6W2CwQzP6KbVKnpAlGCLQKYp7NxgjyFjcvYX2zhxYJvWbFkbWj9xICKplYzsQb16xMCWdzGkMovW6yga7COPCPQkjOhIQlqhDxYeD8qB/FCRvFdHFxcULSR1IuclgS98NvPRuKDHv91GzEvVqIiUBfwXlNSA+xY8eOdsW9zHtlEkx2jadPnzLp5v/Y1uvsWP3BJumQsNOXU/2hIDLyai3MpmCchshNwYo6bjoNO2Y1rbt/MnqbJDbBzN54m5SBNmB2+/btfnP04cOHY/iecN82V/oIRqBtk+Dger7xwQcfeLYKps8om0rXky7Cfpm2yauL9s0q+dGWuG3cuHE56y07z4ZysdN6O3Ps2LFJJjWMw4jcebNkIhA2kyI6DTMQthNmNMJwa2IATjAifYYZEVCN+LzCiYtlQPx8Jkt0XboEK4VGo1E283OsYq0iuEp2EqeItzAcvGETKbyCTaJff/31z3H+t05oETYnYXOq7vT169f9JIfvvvsuJ8VYNanvtm3bujrEJyesPfcTxuD2ExzLebibViibwJs3b7aNWGEXkdw6YyvF0q64OcEb00nXC6/kLEkUoLwFLouwMRiBB+MEhG0y2Be+Pk5l1vrg1/tx8o/Q6IpVwLI+MyDNUnLcWKJd4dmzZxRUayYTlCFXlL5gWdxMM9FNud+e8MMTUZuVKUB5CRy/i1YXjncEheuWxAubb60NDQ3tvnbtmi8ARhRrEjGtXjczaORJQiaOajcFgdfXtuRAGZZolvHCbcPfyxE3eGsTN+/mzZtqufUJK3xuHEmAB6aaYr9q2K/DTLgR/cwcI3BHUWjm24l4UdS438zMzC6IGnPYT1jGvjbN5LyXsJwPR7OMKJ6xTEc336/zM9Ji3r9/P4U5cu5N+j5Pnjw5+fnnn0uR4N6WEiLt89IZzAk3gXO9AitcCobzpNZixle7onREOzPO01p52cZg+xXixpEEKEQUASdpR+PXcfmeKWLggL0YsRkF7hYetEk8BHwQm0kiF6rtSxC18uLiIh/e8YjIYBDFcLFcgaV2Kdy8NKlrSs+fP2dTNLJrRBczvBYCm6a4vuOWdROe532GCmK2qCaqETZbxUEobLulc2i5TeD7povqFhK4PHDd/mrZJDalupKOdmec/68j2SuWVT63tA88atPx4KFJGBzPDBYXOfejrZnKz2Bl+B1yaQWwqwa2/w7Lv7Dvp1gYnW2aEQ4zWKY5dyYioH9isADL+bCwmeMMQ9jYhLX1+ZrtVobXomiZt3UV8B39P61eKYCQ/9MmbBSDmuQDTalP+X1FCDXLnjmXb2M2c7V/W3+xqiuIsd7YxKwm7LuiaUpRTGjSjnE9rLgpNqcgTMtWHAXt7t27r3A9jrPLNAsaZrKOBY6C2LFjh5fk+D927Jjcu3ePO4+bjsJWvxPWnZABIOG6D+PafrF3796jH374YTMvYQgJW5wYMC3WZ5Ifu/h9KANv4/vv52XB8VwQ3d8VFUUPwey8n4jSV0T2c0shVIR92iZqS/hWBETLk/gmLTtGsvl6JiRy/NwzhTVzYsLAEmQTFIV0FMc/a74nbrfpQamFzXWfFruFWoUF9x0suBN5iAIrkN9++y0pYp2n1RZmGNb8tzj2X9r144Zh2cF5/AlCTZG2dZ+h+6OuiQ/6j0hxS/HA+HA8KQoYtwtbbxclmWWRQ2F1EaH6DN/noqnLaFWTgvfaa6/Jm2++KYG1EQQX+DmsM+bcovPXt/rwSktzPOXYWM5a3te+tlZwLabg82SEb9iySRXX6R+4Pu/hgfYkhe+zFV7/b775pvTLL79UIJaxVo4szYqWp9UWZoQWHM6n43OB+yPpXIinvrb+xDpCgf3D9u3bdxg3dkTs+CMSUMgmWcBMk5YO2bSRDQfLGERtDK9MmjkHobqKYMVtFLwFiBjHovrCySYwCnQZTnJ/zgYUSuaeO24bJmOhWdSs5WsJfZ5mzO4tNustm9HauoPKpM6H9eDBg96WLVuarCxsEVWKAKLJDB75wR34MMdTTPvIyiPPJpwnq8VnxbkEIscVNqFrDVSlPBeWl9Pqa+tPYodfsROsaX7YLAI/KofC/3cUnhkWLKY2SnjIbDhcwmM+UXil9T3WSwd8MqgF9fXXX4fue+/h7bcJ156+zzGO30XF1MA+/zx06NAcHnYxLgL/WrPCMNFq+kGZvv2vKSzjeVqHOVYevriYrC/DtnOhyLE7EsrG9zgXjyuYKjw4F76nhc+hXDgeLdzDKc6FAawpVPLar61PiVUKCgGE6kRSHjZYXheCSJZJbdRzzldTUKdlQKH15TjOLM7zvWa6vHn0T9Zxr27BX/k7/r9jItSszO7gvv+Oe/o7tmGz7eOUwna0gMqDZfAvCec0xnOhNcdzYZQ8fC5Pnz79netwrhcobmmF7caNGwPlvlhvJJpBdKTSgpP4nFzsz/YFamzfYmDztJf6kJmCWpMBhwKHqPIs7tfbkqHzrHnYHVmKkHNxStly+90pSNh8jGgzYWniOZnfzeBAVdo7F5bzSRW2/idVG48BhhSZdCuoKc+yY6fZp2YErt1EhbmwXoQtwMya7ltRpitNkdefx2bGlbeLbO4b0eZUe2x2dzriwQbPZR5W4lvsNylK35PagUVrLEXtSf/HBfg9SnTgUuBME3UtBK653oQtwAR3vKGhITbXPpKle5bnPQg6VE8GGVekYMw5MVixO+dKs2lS2U/h2G9pl4/BIZN3njfezGcQK3D0edAHx57f165dm8Y+u6W4GncVprB+tB6FLUwQwTaCQJHj6I5w+u8sBPvNUAiYmGAtLBxjmbJVsDtkmbZ1PoGo8Vxwnaa6INLt/taijjPQZE5WSYugUqm8tXXrVobROa4xqh9GhVFWROLYcXQWhcbDZ7sPHDhQg9n/cRuR1CzQ53RiLaKiOLdLUZMvr3WCQ9M9oo57UTeD3Kv4rRyvuccyq3oYj9lnmdAT+3zfC5aNOR9mGx7D+wlEfauylMkj9nxMcgX+/tscl1tEJJQtlkajcX/Lli1RPrsmyqbbzePEMM+WTdSxOZexFES7M863Q+oOYlFArBiKZ7YOa1cRXkBj8vudLTm/qBkaFaQX7+g3hL6H+dv+xqawKKkxnaP9PoQSSvfOP92oIMx8FrTEovqcsSvI7iy/wwwNY7ePMqL4Zbwu4HUB1t7CoPVvVOLpWFhgxZVRcCaMyNmO5xmRWzGmlOIIoftffD7awe/xe8SzM6d2tuw/8hY3RQnIxWoiKS2yFSLHDyh0KOC0HNiU9ZsWeK1EhO9bj8f9G9jubyY7htKHqLgpRZGbuAVQ5GTJp/NxyP/R+j2+yKEZeRWLPwyIhTyctSIQPByHWX2ZNskJ1nGUAqzFaW1m9D8qbkpR5C5uYSh0xho73mKNhb+XqY0aiFj9He/9fnRFJSRUeg8VN6UoOp63NI7W6fv27t1bMRYYX//bWGRcTi0uLp7C/9/DKqtLl+epVBRl8ChU3Fox3Qi4NERRFKVAOkqxoSiK0quouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpB0dYSCorRiphHkmOKoTM2abVZRFEVRFEVRFEVRlH7k30ucc3EstpUHAAAAAElFTkSuQmCC";function tp(e){return rp.apply(this,arguments)}function rp(){return(rp=(0,Hn.Z)((function(e){var n,t,r,i,o,a,l;return(0,Yn.__generator)(this,(function(c){switch(c.label){case 0:return n=e.fs,t=e.language,r=void 0===t?"python3":t,[4,n.createDir(".lesson")];case 1:return(i=c.sent()).error?[2,i]:[4,n.writeFile(".lesson/assets/logo.png",hc.Z.from(np,"base64"))];case 2:return(o=c.sent()).error?[2,o]:[4,n.writeFile(".lesson/lessonplan.md",hc.Z.from(Jd({language:r})))];case 3:return(a=c.sent()).error?[2,a]:[4,n.writeFile(".lesson/instructions.md",hc.Z.from(ep({language:r})))];case 4:return(l=c.sent()).error?[2,l]:[2,{error:null}]}}))}))).apply(this,arguments)}function ip(){var e=(0,g.Z)(["\n  query TeamsForEduLessonCta($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProject\n      }\n    }\n  }\n"]);return ip=function(){return e},e}var op={},ap=(0,Z.Ps)(ip());var lp=(0,de.X)({root:[p.l0.p(8),p.l0.colWithGap(4),p.l0.backgroundColor.accentPrimaryDimmest,p.l0.borderRadius(8),{fontSize:Je.TV.fontSizeSmall}]});function cp(){var e=El(),n=function(e){var n=(0,m.Z)({},op,e);return M.a(ap,n)}({variables:{replId:(0,Ie.Z)()}}).data,t=(0,re.Z)().fs,i=(0,c.useState)(!1),o=i[0],a=i[1],l=(0,c.useState)(!1),s=l[0],u=l[1],p="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)&&n.repl.isProject,f=(0,qe.Z)().showError;if((0,c.useEffect)((function(){if(p){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,Hn.Z)((function(){var n;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.readDir(gd.oh)];case 1:return n=r.sent(),e?[2]:(!n.error&&n.children.length||a(!0),[2])}}))}))).apply(this,arguments)}}),[t,p]),!o)return null;function h(){return(h=(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return u(!0),[4,tp({fs:t})];case 1:return n.sent().error?(f("Something when wrong"),[2]):(e({path:gd.oh+"/lessonplan.md"}),a(!1),[2])}}))}))).apply(this,arguments)}return(0,r.BX)(d.G,{css:lp.root,children:[(0,r.tZ)(J.zx,{iconLeft:s?(0,r.tZ)(se.Z,{}):(0,r.tZ)(pc.Z,{}),text:"Add lesson contents",size:"small",onClick:function(){return h.apply(this,arguments)},disabled:s}),(0,r.tZ)("a",{href:"https://docs.replit.com/teams-edu/lesson-authoring",target:"_blank",children:"Learn more"})]})}var sp=t(36194),up=c.createContext(null),dp=up.Provider,pp=(0,de.X)({root:p.l0.coverContainer,inner:[p.l0.coverContainer,p.l0.pl(8)],loader:[p.l0.justify.start,p.l0.position.absolute,{top:2,left:16,overflow:"hidden"}]});function fp(){var e=(0,Ie.Z)(),n=(0,l.Z)(c.useState(null),2),t=n[0],r=n[1],i=El(),o=(0,fd.L)(),a=(0,ac.T)(!0),s=(0,c.useCallback)((function(e){return!a(e.filename)}),[a]),d=(0,re.Z)().fs,p=(0,Ta.Z)().preferences,f=ao(or),h="cmdOrCtrlKey"===(null===p||void 0===p?void 0:p.multiselectModifierKey)?"cmdOrCtrlKey":"altKey",v=(0,Re.AA)(),m=(0,c.useCallback)((function(e){return(0,Dd.mn)(e,v)}),[v]),g=(0,u.P5)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),Z=(0,Cd.av)().onContextMenu,b=Kd(),y=(0,dd.p)({fs:d,filter:s,fontSize:p.fontSize,onFileDoubleClick:function(e,n){f(n)},onFileSelect:function(e){var n=e.path,t=e.type,r=e.event,a="click"===t&&"altKey"===h?(0,pd.j)(r):r.altKey;i({path:n,newTab:a}),o(n,{newTab:a})},onCreate:function(e){e.type===Tn.Tv.File&&i({path:e.path})},multiselectModifierKey:h,onConflicts:function(e){return r({type:"conflicts",data:e})},onDeleteNodes:function(e){return r({type:"deleteNode",data:e})},onContextMenu:function(e,n){return Z(e,{command:b(n,y)})},autocomplete:m,localCacheKey:g?e+":sidebar":void 0}),x=(0,$d.O)();c.useEffect((function(){return y.setFileStatus(x)}),[y,x]);var w=(0,Re.Y_)();return(0,c.useEffect)((function(){function e(e){return n.apply(this,arguments)}function n(){return n=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return null===e?(y.select(null),[2]):[4,y.select({path:e,type:Tn.Tv.File})];case 1:return n.sent(),w.current!==e?[2]:(y.scrollToPath(e),[2])}}))})),n.apply(this,arguments)}return e(w.current),w.subscribe(e)}),[w,y]),{filetree:y,activeModal:t,closeModal:function(){return r(null)}}}var hp=(0,de.X)({root:[p.l0.rowWithGap(8),p.l0.align.center],text:[p.l0.fontWeight.medium]}),vp=(0,de.X)({root:[p.l0.rowWithGap(4),p.l0.pr(2)]});function mp(){return(0,r.BX)(d.G,{css:hp.root,children:[(0,r.tZ)(ne.xv,{css:hp.text,children:"Files"}),(0,r.tZ)(sp.m,{})]})}function gp(){var e=c.useContext(up),n=(0,c.useState)(!1),t=n[0],i=n[1],o=ad(Au.Files),a=od();if(!e)throw new Error("Expected filetree");return(0,c.useEffect)((function(){return e.onLoad((function(){return i(!0)}))}),[e]),(0,r.BX)(d.G,{css:vp.root,style:{opacity:t?1:0},children:[(0,r.tZ)(ee.hU,{"data-cy":"filetree-add-file",alt:"New file",tooltipPlacement:"top",onClick:function(){o&&a(Au.Files),e.create(Tn.Tv.File)},children:(0,r.tZ)(hd.Z,{})}),(0,r.tZ)(ee.hU,{alt:"New folder",tooltipPlacement:"top",onClick:function(){o&&a(Au.Files),e.create(Tn.Tv.Directory)},children:(0,r.tZ)(vd.Z,{})}),(0,r.tZ)(Pd,{filetree:e})]})}function Zp(){var e=c.useContext(up),n=(0,c.useState)(Boolean(null===e||void 0===e?void 0:e.hasLocalCache)),t=n[0],i=n[1];if(!e)throw new Error("Expected filetree");return(0,c.useEffect)((function(){return e.onLoad((function(){return i(!0)}))}),[e]),(0,r.BX)(d.G,{"data-cy":"sidebar-filetree-section",css:pp.root,children:[t?null:(0,r.tZ)(d.G,{css:pp.loader,style:{opacity:t?0:1},children:(0,r.tZ)(md.Z,{path:gd.Ql})}),(0,r.BX)(d.G,{css:pp.inner,style:{opacity:t?1:0},children:[(0,r.tZ)(cp,{}),(0,r.tZ)(dd.s,{store:e.store})]})]})}var bp={title:(0,r.tZ)(mp,{}),controls:(0,r.tZ)(gp,{}),content:(0,r.tZ)(Zp,{})},yp=t(58292),xp=t(68912),wp=(0,Tt.O4)("kaboom3000UpdateNoticeClosed",!1),kp=(0,de.X)({notice:[p.l0.borderRadius(4),p.l0.p(8),p.l0.colWithGap(4)],title:[p.l0.rowWithGap(4),p.l0.align.center],titleRow:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center]});var Cp=function(){var e=(0,re.Z)().fs,n=(0,l.Z)(c.useState(!1),2),t=n[0],i=n[1],o=(0,l.Z)((0,Vn.KO)(wp),2),a=o[0],s=o[1];return c.useEffect((function(){e.readFile("package.json").then((function(e){if(!e.error)try{var n,t=null===(n=JSON.parse(e.content.toString()).dependencies)||void 0===n?void 0:n.kaboom;if(t){var r=/\d+/.exec(t);if(null===r||void 0===r?void 0:r[0])Number(r[0])>=3e3&&i(!0)}}catch(o){}}))}),[e]),!t||a?null:(0,r.BX)(Q.Tg,{elevated:!0,css:kp.notice,children:[(0,r.BX)(d.G,{css:kp.titleRow,children:[(0,r.BX)(d.G,{css:kp.title,children:[(0,r.tZ)("img",{alt:"mark",src:"/public/images/mark.png",width:"24",height:"24"}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",multiline:!1,children:"Update notice"})]}),(0,r.tZ)(ee.hU,{onClick:function(){i(!1),s(!0)},alt:"Close",children:(0,r.tZ)(xp.Z,{})})]}),(0,r.tZ)(ne.xv,{children:"You're using Kaboom v3000! Things might work differently from v2000."}),(0,r.tZ)("a",{href:"https://kaboomjs.com/blog/3000",target:"_blank",children:"New features"}),(0,r.tZ)("a",{href:"https://kaboomjs.com/doc/migration-3000",target:"_blank",children:"Migration guide"})]})};var Sp=function(e){var n=e.title,t=e.sub,i=void 0!==t&&t,o=e.actions,a=void 0===o?[]:o;return(0,r.BX)(Ue.Ug,{justify:"space-between",align:"center",children:[(0,r.tZ)(Fe(),{id:"fd8117a15303f4ca",children:".header-action.jsx-fd8117a15303f4ca{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-dimmer)}.header-action.jsx-fd8117a15303f4ca:hover{background:var(--background-higher);cursor:pointer}"}),(0,r.tZ)(De.Z,{level:i?5:4,children:n}),(0,r.tZ)(Ue.Ug,{spacing:"4px",align:"center",children:a?a.map((function(e,n){return(0,r.tZ)("div",{onClick:e.action,className:"jsx-fd8117a15303f4ca header-action",children:e.icon},n)})):null})]})},Ip=t(97754),Tp=t.n(Ip);var Ep=function(e){var n=e.fileDrag,t=e.children,i=(0,l.Z)(c.useState(!1),2),o=i[0],a=i[1],s=c.useRef(0);return(0,r.BX)("div",{onDragEnter:function(e){if(n){e.preventDefault(),e.stopPropagation();var t=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(n.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var o=r[i];n.accept.includes(o.type)||(t=!1)}t&&(a(!0),s.current++)}}},onDragLeave:function(e){n&&(e.preventDefault(),e.stopPropagation(),s.current--,0===s.current&&a(!1))},onDrop:function(e){n&&(e.preventDefault(),e.stopPropagation(),s.current=0,a(!1),(0,We.Z)(e.dataTransfer.files).filter((function(e){return n.accept.includes(e.type)})).forEach(n.onDrop))},className:"jsx-68ea6c6d36b196a3 section",children:[(0,r.tZ)(Fe(),{id:"68ea6c6d36b196a3",children:".section.jsx-68ea6c6d36b196a3{position:relative;width:100%}.dragfilter.jsx-68ea6c6d36b196a3{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);opacity:.2}.dragfilter.hidden.jsx-68ea6c6d36b196a3{display:none!important}"}),t,(0,r.tZ)("div",{className:"jsx-68ea6c6d36b196a3 "+(Tp()("dragfilter",{hidden:!o})||"")})]})};var Rp=function(e){var n=e.openFile,t=(0,l.Z)(c.useState(!1),2),i=t[0],o=t[1];return(0,r.BX)(Ep,{children:[(0,r.tZ)(Sp,{title:"Kaboom",actions:[{icon:(0,r.tZ)(Ys.Z,{rotate:i?0:-90}),action:function(){return o(!i)}}]}),i?(0,r.BX)(Ue.gC,{spacing:1,children:[(0,r.tZ)("div",{}),(0,r.tZ)(Le.Z,{Icon:Ad.Z,size:"small",onClick:function(){return n("template.html")},children:"Edit HTML Template"})]}):null]})},Gp=t(61991),Pp=t(95161);var Dp=t(48818),Bp=t(20575),Up=t(92404);function Ap(e){var n=e.path,t=e.initialExpanded,r=e.fs,i=(0,l.Z)(c.useState(null),2),o=i[0],a=i[1],s=(0,l.Z)(c.useState(null),2),u=s[0],d=s[1],p=(0,l.Z)(c.useState(Boolean(t)),2),f=p[0],h=p[1],v=(0,Dp.Z)();c.useEffect((function(){if(f){var e=r.watchDir(n,{onChange:function(e){a(e.filter((function(e){return!(0,Bp.C)((0,Up.K1)(n,e.filename).toString())})))},onError:function(e){d(e)}});return function(){v.current&&a(null),e()}}}),[r,n,f,a,d]);var m=c.useCallback((function(){h(!0)}),[]),g=c.useCallback((function(){h(!1)}),[]);return f?u?{collapse:g,expand:m,children:null,expanded:f,loading:!1,error:u}:o?{collapse:g,expand:m,children:o,loading:!1,error:u,expanded:f}:{collapse:g,expand:m,children:o,loading:!0,error:u,expanded:f}:{collapse:g,expand:m,children:null,loading:!1,error:null,expanded:f}}var Lp,Op=t(46861),_p=t(30922);function Xp(e){return function(n){for(var t in e)n.key===t&&e[t](n)}}function zp(e,n){Lp||(Lp=document.createElement("input")).setAttribute("type","file"),Lp.setAttribute("accept",n.join(","));var t=function(){Lp.files&&((0,We.Z)(Lp.files).forEach(e),Lp.removeEventListener("change",t))};Lp.addEventListener("change",t),Lp.click()}var Mp=function(e){var n=e.isActive,t=e.name,i=e.icon,o=e.options,a=e.onClick,s=e.onRename,u=(0,l.Z)(c.useState(!1),2),d=u[0],p=u[1],f=(0,l.Z)(c.useState(null),2),h=f[0],v=f[1],m=(0,Op.Z)((function(){p(!1)}),[]),g=(0,Op.Z)((function(){v(null)}),[]);return c.useEffect((function(){g.current&&null!==h&&g.current.focus()}),[g,h]),(0,r.BX)("div",{onClick:a,className:"jsx-103c0085cc983ea1 "+(Tp()("entry",{active:n&&null===h})||""),children:[(0,r.BX)(Ue.Ug,{spacing:1,align:"center",children:[i,null===h?(0,r.tZ)("p",{className:"jsx-103c0085cc983ea1",children:t}):(0,r.tZ)(Pp.ZP,{ref:g,value:h,onChange:function(e){v(e.currentTarget.value)},onKeyDown:Xp({Escape:function(){v(null)},Enter:function(){s&&h&&s(h),v(null)}})})]}),o&&o.length>0?(0,r.tZ)("div",{onClick:function(e){e.stopPropagation(),p(!d)},className:"jsx-103c0085cc983ea1 "+(Tp()("options-icon",{active:n})||""),children:(0,r.tZ)(kd.Z,{})}):null,o&&o.length>0&&d?(0,r.tZ)("div",{ref:m,onKeyDown:Xp({Escape:function(){p(!1)}}),className:"jsx-103c0085cc983ea1 options-box",children:o.map((function(e){return e?(0,r.tZ)("div",{onClick:function(n){n.stopPropagation(),p(!1),e.action(),"Rename"===e.name&&v(t)},className:"jsx-103c0085cc983ea1 "+(Tp()("option",{danger:e.danger})||""),children:e.name},e.name):null}))}):null,(0,r.tZ)(Fe(),{id:"103c0085cc983ea1",children:".entry.jsx-103c0085cc983ea1{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative}.entry.active.jsx-103c0085cc983ea1{background:var(--accent-primary-default)!important;color:var(--white)!important;font-weight:var(--font-weight-medium)!important}.entry.jsx-103c0085cc983ea1:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer}.options-icon.jsx-103c0085cc983ea1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest)}.options-icon.jsx-103c0085cc983ea1:hover{color:var(--foreground-dimmest)}.options-icon.active.jsx-103c0085cc983ea1{opacity:1!important;color:var(--white)!important}.entry.jsx-103c0085cc983ea1:hover .options-icon.jsx-103c0085cc983ea1{opacity:1}.options-box.jsx-103c0085cc983ea1{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular)!important;z-index:500}.option.jsx-103c0085cc983ea1{padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-default)}.option.danger.jsx-103c0085cc983ea1{color:var(--accent-negative-default)}.option.jsx-103c0085cc983ea1:hover{background:var(--background-higher)}.option.danger.jsx-103c0085cc983ea1:hover{background:var(--accent-negative-default);color:var(--white)}"})]})};function jp(e){var n=e.close,t=e.entries,i=e.openFile,o=(0,re.Z)().fs,a=(0,Op.Z)(n,[]),s=(0,qe.Z)().showError,u=(0,l.Z)(function(e){var n=(0,l.Z)(c.useState(e),2),t=n[0],r=n[1];return[t,r,function(e){var n=null;switch(e.currentTarget.type){case"checkbox":n=e.currentTarget.checked;break;case"number":case"range":n=Number(e.currentTarget.value);break;default:n=e.currentTarget.value}r((0,oe.Z)((0,m.Z)({},t),(0,f.Z)({},e.currentTarget.name,n)))}]}({name:""}),3),d=u[0],p=u[2];return c.useEffect((function(){a.current&&a.current.focus()}),[a]),(0,r.tZ)(Pp.ZP,{ref:a,name:"name",onChange:p,onKeyDown:Xp({Escape:n,Enter:function(){var e="".concat(d.name,".js"),r="code/".concat(e);t.includes(e)?s("file '".concat(d.name,"' already exists")):(o.writeFile(r,hc.Z.from("")).then((function(){i(r)})),n())}})})}var Wp=function(e){var n=e.onFileOpen,t=(0,re.Z)().fs,i=(0,Re.R3)(),o=(0,l.Z)(c.useState(!1),2),a=o[0],s=o[1],u=(0,qe.Z)().showError,d=(0,l.Z)(c.useState(null),2),p=d[0],f=d[1],h=(Ap({path:"code",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===Tn.Tv.File})).map((function(e){return e.filename})).sort();return(0,r.BX)(Ep,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var n="code/".concat(e.name);h.includes(n)?u("scene '".concat((0,En.eb)(e.name),"' already exists")):e.text().then((function(e){t.writeFile(n,hc.Z.from(e))}))}},children:[(0,r.tZ)(Sp,{sub:!0,title:"Code",actions:[{icon:(0,r.tZ)(pc.Z,{}),action:function(){return s(!0)}}]}),(0,r.tZ)(Gp.Z,{height:"4px"}),(0,r.tZ)("div",{children:h.map((function(e){var o="code/".concat(e),a=(0,En.eb)(e),l=[{name:"Rename",action:function(){}}];return"main"!==a&&l.push({name:"Delete",action:function(){return f(o)},danger:!0}),(0,r.tZ)(Mp,{isActive:o===i,onClick:function(){return n(o)},onRename:function(e){t.moveFile(o,"code/".concat(e,".js")).then((function(e){e.error&&u("failed to rename")}))},name:a,options:l},a)}))}),a?(0,r.tZ)(jp,{entries:h,close:function(){return s(!1)},openFile:n}):null,p?(0,r.tZ)(He.u,{isOpen:Boolean(p),onRequestClose:function(){return f(null)},children:(0,r.tZ)(_p.Z,{danger:!0,prompt:"Delete scene '".concat((0,En.eb)(p),"' ?"),desc:"Are you sure you want to delete this scene? This action cannot be undone.",onCancel:function(){return f(null)},confirmText:"Yes, delete this scene",icon:(0,r.tZ)(Xd.Z,{}),onConfirm:function(){t.deleteFile(p),f(null)}})}):null]})},Np=t(93132),Fp=t(17954),Vp=t(3717),Hp=t(20685),Yp=t(45005),qp=t.n(Yp);var Kp=function(e){var n=e.kind,t=e.renderItem,i=e.onRequestClose,o=e.onAdd,a=e.openFile,s=function(e){var t="".concat(g,"/").concat(e);qp()(t).then((function(e){return e.arrayBuffer()})).then((function(r){var l="".concat(n,"/").concat(e);u.writeFile(l,hc.Z.from(r)).then((function(n){if(n.error)throw new Error(n.error);a(l),o&&o(e,t)})),i()})).catch((function(){return Z("Failed to fetch ".concat(e))}))},u=(0,re.Z)().fs,d=(0,l.Z)(c.useState([]),2),p=d[0],f=d[1],h=(0,l.Z)(c.useState(""),2),v=h[0],m=h[1],g="https://kaboomjs.com/".concat(n),Z=(0,qe.Z)().showError;return c.useEffect((function(){qp()("https://kaboomjs.com/api/assets/".concat(n)).then((function(e){return e.json()})).then((function(e){return f(e)})).catch((function(){return Z("Failed to fetch assets lib listing")}))}),[f,Z,g]),(0,r.BX)("div",{className:"jsx-d616aed56d26af98 assets",children:[(0,r.BX)(Ue.gC,{spacing:2,children:[(0,r.tZ)(De.Z,{level:3,children:"Assets Lib (beta)"}),0===p.length?(0,r.tZ)(Be.Z,{foreground:2,children:"Loading..."}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Pp.ZP,{large:!0,label:"Search",onChange:function(e){m(e.target.value)}}),(0,r.tZ)("div",{className:"jsx-d616aed56d26af98 box",children:p.filter((function(e){return!v||e.includes(v)})).map((function(e){return(0,r.tZ)(c.Fragment,{children:t({name:e,url:"".concat(g,"/").concat(e),add:function(){return s(e)}})},e)}))}),(0,r.tZ)(Le.Z,{size:"small",onClick:function(){p.length>0&&s(p[Math.floor(Math.random()*p.length)])},children:"I\u2019m Feeling Lucky"})]})]}),(0,r.tZ)(Fe(),{id:"d616aed56d26af98",children:".assets.jsx-d616aed56d26af98{padding:var(--space-24)}.box.jsx-d616aed56d26af98{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll}"})]})};function $p(e){var n=e.url,t=e.add;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("img",{src:n,loading:"lazy",onClick:t,alt:"sprite asset",className:"jsx-4ad892a0258c4ced entry"}),(0,r.tZ)(Fe(),{id:"4ad892a0258c4ced",children:".entry.jsx-4ad892a0258c4ced{padding:var(--space-16);height:120px;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.entry.jsx-4ad892a0258c4ced:hover{cursor:pointer;background:var(--background-root)}"})]})}function Qp(e){var n=e.close,t=e.entries,i=e.onFileOpen,o=(0,re.Z)().fs,a=(0,Op.Z)(n,[]),s=c.useRef(null),u=(0,qe.Z)().showError,f=(0,l.Z)(c.useState({name:"",width:32,height:32}),2),h=f[0],v=f[1];c.useEffect((function(){s.current&&s.current.focus()}),[s]);var g=function(){if(0!==h.name.length){var e=h.width,r=h.height;if(isNaN(e)||isNaN(r)||e<=0||r<=0)u("invalid width / height!");else if(e>256||r>256)u("only supports sprites smaller than 256x256 yet");else{var a="".concat(h.name,".pedit"),l="sprites/".concat(a);t.includes(a)?u("sprite '".concat(h.name,"' already exists")):(o.writeFile(l,hc.Z.from(JSON.stringify({fromKaboom:!0,width:h.width,height:h.height}))).then((function(){i(l)})),n())}}else u("invalid 'name'")},Z=(0,Rn.U)();return(0,r.tZ)("div",{ref:a,className:"dialog",onKeyDown:Xp({Escape:n,Enter:g}),children:(0,r.tZ)(Q.Tg,{elevated:!0,css:[p.l0.borderRadius(8),p.l0.p(8),p.l0.mt(8)],children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(16)],children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:Z("name"),children:(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Name"})}),(0,r.tZ)(Hp.II,{id:Z("name"),ref:s,value:h.name,onChange:function(e){v((0,oe.Z)((0,m.Z)({},h),{name:e.target.value}))}})]}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(4),{flex:"1 1 0px"}],children:[(0,r.tZ)("label",{htmlFor:Z("width"),children:(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Width"})}),(0,r.tZ)(Hp.II,{id:Z("width"),value:"".concat(h.width),onChange:function(e){return v((0,oe.Z)((0,m.Z)({},h),{width:parseInt(e.target.value,10)||0}))}})]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(4),{flex:"1 1 0px"}],children:[(0,r.tZ)("label",{htmlFor:Z("height"),children:(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Height"})}),(0,r.tZ)(Hp.II,{id:Z("height"),value:"".concat(h.height),onChange:function(e){return v((0,oe.Z)((0,m.Z)({},h),{height:parseInt(e.target.value,10)||0}))}})]})]}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,r.tZ)(J.zx,{onClick:n,text:"Cancel"}),(0,r.tZ)(J.zx,{colorway:"primary",onClick:g,text:"Create",iconLeft:(0,r.tZ)(pc.Z,{})})]})]})})})}var Jp=function(e){var n=e.onFileOpen,t=(0,re.Z)().fs,i=(0,qe.Z)().showError,o=(0,Re.R3)(),a=(0,Re.Qt)(),s=(0,l.Z)(c.useState(!1),2),u=s[0],d=s[1],p=(0,l.Z)(c.useState(!1),2),f=p[0],h=p[1],v=(0,l.Z)(c.useState(null),2),m=v[0],g=v[1],Z=(0,Vp.Z)(o),b=(0,Fp.Z)({fs:t,onContentProcess:function(e,n){if(n.endsWith("pedit")){var t=JSON.parse(e.toString());if(!t.fromKaboom)return t.frames[0]}else{var r=(0,En.yC)(n);if(r)return"data:".concat(r,";base64,").concat(e.toString("base64"))}return""}}),y=(Ap({path:"sprites",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===Tn.Tv.File})).map((function(e){return e.filename})).sort(),x=["image/png","image/jpeg",".pedit"],w=function(e){var n="sprites/".concat(e.name);if(y.includes(n))return i("sprite '".concat((0,En.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){t.writeFile(n,hc.Z.from(e))}))},k=[{icon:(0,r.tZ)(Np.Z,{}),action:function(){return h(!0)}},{icon:(0,r.tZ)(Sd.Z,{}),action:function(){return zp(w,x)}},{icon:(0,r.tZ)(pc.Z,{}),action:function(){return d(!0)}}];return(0,r.BX)(Ep,{fileDrag:{accept:x,onDrop:w},children:[(0,r.tZ)(Sp,{sub:!0,title:"Sprites",actions:k}),(0,r.tZ)(Gp.Z,{height:"4px"}),(0,r.tZ)("div",{className:"jsx-286709118fe5858",children:y.map((function(e){var l="sprites/".concat(e),c=(0,En.r6)(e),s=(0,En.eb)(e),u=b(l),d=Z?[{name:"Insert load code",action:function(){var e,n,t,r="".concat("pedit"===c?"loadPedit":"loadSprite","(").concat(JSON.stringify(s),", ").concat(JSON.stringify(l),");");Z({code:r,insertAt:null!==(t=null===(e=a())||void 0===e||null===(n=e.position)||void 0===n?void 0:n.offset)&&void 0!==t?t:0})}}]:[];return(0,r.tZ)(Mp,{isActive:l===o,onClick:function(){return n(l)},onRename:function(e){t.moveFile(l,"sprites/".concat(e,".").concat(c)).then((function(e){e.error&&i("failed to rename")}))},icon:(0,r.tZ)("div",{className:"jsx-286709118fe5858 preview-img",children:u.state===Fp.j.Ready&&(0,r.tZ)("img",{src:u.content,alt:"",className:"jsx-286709118fe5858"})}),name:s,options:(0,We.Z)(d).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return g(l)},danger:!0}])},s)}))}),u?(0,r.tZ)(Qp,{entries:y,close:function(){return d(!1)},onFileOpen:n}):null,m?(0,r.tZ)(He.u,{isOpen:Boolean(m),onRequestClose:function(){return g(null)},children:(0,r.tZ)(_p.Z,{danger:!0,prompt:"Delete sprite '".concat((0,En.eb)(m),"' ?"),desc:"Are you sure you want to delete this sprite? This action cannot be undone.",confirmText:"Yes, delete this sprite",icon:(0,r.tZ)(Xd.Z,{}),onCancel:function(){return g(null)},onConfirm:function(){t.deleteFile(m),g(null)}})}):null,(0,r.tZ)(He.u,{isOpen:f,onRequestClose:function(){return h(!1)},maxWidth:872,children:(0,r.tZ)(Kp,{kind:"sprites",renderItem:$p,onRequestClose:function(){return h(!1)},openFile:n})}),(0,r.tZ)(Fe(),{id:"286709118fe5858",children:".preview-img.jsx-286709118fe5858{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden}.preview-img.jsx-286709118fe5858 img.jsx-286709118fe5858{width:100%;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges}"})]})};function ef(e){var n=e.name,t=e.url,i=e.add;return(0,r.BX)(Ue.Ug,{justify:"space-between",align:"center",children:[(0,r.BX)(Ue.gC,{spacing:1,children:[(0,r.tZ)(Be.Z,{children:n}),(0,r.tZ)("audio",{src:t,controls:!0})]}),(0,r.tZ)(Le.Z,{onClick:i,children:"Import"})]})}var nf=function(e){var n=e.onFileOpen,t=(0,re.Z)().fs,i=(0,Re.R3)(),o=(0,Re.Qt)(),a=(0,qe.Z)().showError,s=(0,l.Z)(c.useState(null),2),u=s[0],d=s[1],p=(0,l.Z)(c.useState(!1),2),f=p[0],h=p[1],v=(0,Vp.Z)(i),m=(Ap({path:"sounds",initialExpanded:!0,fs:t}).children||[]).filter((function(e){return e.type===Tn.Tv.File})).map((function(e){return e.filename})).sort(),g=["audio/ogg","audio/mpeg","audio/wav"],Z=function(e){var n="sounds/".concat(e.name);if(m.includes(n))return a("sound '".concat((0,En.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){t.writeFile(n,hc.Z.from(e))}))},b=[{icon:(0,r.tZ)(Np.Z,{}),action:function(){return h(!0)}},{icon:(0,r.tZ)(Sd.Z,{}),action:function(){return zp(Z,g)}}];return(0,r.BX)(Ep,{fileDrag:{accept:g,onDrop:Z},children:[(0,r.tZ)(Sp,{sub:!0,title:"Sounds",actions:b}),(0,r.tZ)(Gp.Z,{height:"4px"}),(0,r.tZ)("div",{children:m.map((function(e){var l,c=(0,En.eb)(e),s="sounds/".concat(e),u=v?[{name:"Insert load code",action:function(){var e,n;return v({insertAt:null!==(l=null===(e=o())||void 0===e||null===(n=e.position)||void 0===n?void 0:n.offset)&&void 0!==l?l:0,code:"loadSound(".concat(JSON.stringify(c),", ").concat(JSON.stringify(s),");")})}}]:[];return(0,r.tZ)(Mp,{isActive:s===i,onClick:function(){return n(s)},onRename:function(n){t.moveFile(s,"sounds/".concat(n,".").concat((0,En.r6)(e))).then((function(e){e.error&&a("failed to rename")}))},name:c,options:(0,We.Z)(u).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return d(s)},danger:!0}])},c)}))}),u?(0,r.tZ)(He.u,{isOpen:Boolean(u),onRequestClose:function(){return d(null)},children:(0,r.tZ)(_p.Z,{danger:!0,prompt:"Delete sound '".concat((0,En.eb)(u),"' ?"),desc:"Are you sure you want to delete this sound? This action cannot be undone.",confirmText:"Yes, delete this sound",icon:(0,r.tZ)(Xd.Z,{}),onCancel:function(){return d(null)},onConfirm:function(){t.deleteFile(u),d(null)}})}):null,(0,r.tZ)(He.u,{isOpen:f,onRequestClose:function(){return h(!1)},maxWidth:872,children:(0,r.tZ)(Kp,{kind:"sounds",renderItem:ef,onRequestClose:function(){return h(!1)},onAdd:function(e,n){return new window.Audio(n).play()},openFile:n})})]})},tf=t(77770);function rf(e){var n=e.file,t=e.name,i=xl();return(0,r.BX)("div",{onClick:function(){i({pane:{type:"markdown",data:{path:n}}})},className:"jsx-148e6ca45d3ccd5a entry",children:[(0,r.BX)(Ue.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(tf.Z,{}),(0,r.tZ)(Be.Z,{foreground:2,fontWeight:"regular",children:null!==t&&void 0!==t?t:(0,En.eb)(n)})]}),(0,r.tZ)(Fe(),{id:"148e6ca45d3ccd5a",children:".entry.jsx-148e6ca45d3ccd5a{cursor:pointer}"})]})}var of=function(){var e=(0,l.Z)(c.useState(!0),2),n=e[0],t=e[1],i=(0,l.Z)(c.useState(!1),2),o=i[0],a=i[1],s=(0,re.Z)().fs,u=Ap({path:"learn",initialExpanded:!0,fs:s});c.useEffect((function(){var e=!1;return s.stat("README.md").then((function(n){e||n.exists&&a(!0)})),function(){e=!0}}),[s]);var d=(u.children||[]).filter((function(e){return e.type===Tn.Tv.File&&(0,En.gK)(e.filename)})).map((function(e){return e.filename})).sort();return(0,r.BX)(Ep,{children:[(0,r.tZ)(Sp,{sub:!0,title:"Learn",actions:[{icon:(0,r.tZ)(Ys.Z,{rotate:n?0:-90}),action:function(){return t(!n)}}]}),n?(0,r.BX)(Ue.gC,{spacing:1,children:[(0,r.tZ)("div",{}),o?(0,r.tZ)(rf,{name:"Intro",file:"README.md"}):null,d.map((function(e){return(0,r.tZ)(rf,{file:"learn/".concat(e)},e)}))]}):null]})};function af(e){var n=e.onFileOpen;return(0,r.tZ)(d.G,{css:[p.l0.p(8),p.l0.flex.growAndShrink(1),p.l0.overflow("scroll"),{userSelect:"none"}],children:(0,r.BX)(Ue.gC,{spacing:1,children:[(0,r.tZ)(Cp,{}),(0,r.tZ)(Rp,{openFile:n}),(0,r.tZ)(Wp,{onFileOpen:n}),(0,r.tZ)(Jp,{onFileOpen:n}),(0,r.tZ)(nf,{onFileOpen:n}),(0,r.tZ)(of,{}),(0,r.tZ)("div",{}),(0,r.tZ)(Le.Z,{Icon:yp.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com")},children:"Docs"}),(0,r.tZ)(Le.Z,{Icon:yp.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/play")},children:"Examples"}),(0,r.tZ)(Le.Z,{Icon:yp.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/doc/migration-3000")},children:"v3000 migration guide"})]})})}function lf(){var e=El();return(0,r.tZ)(af,{onFileOpen:function(n){return e({path:n})}})}var cf={title:"Kaboom",content:(0,r.tZ)(lf,{})},sf=t(43182),uf=t(51861),df=t(23271),pf=function(e){return(0,i.iv)({"body *":{cursor:"".concat(e," !important")}})},ff=(0,i.iv)({"body *":{userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"}}),hf={"n-resize":pf("n-resize"),"ne-resize":pf("ne-resize"),"nesw-resize":pf("nesw-resize"),"s-resize":pf("s-resize"),"se-resize":pf("se-resize"),"sw-resize":pf("sw-resize"),"e-resize":pf("e-resize"),"ew-resize":pf("ew-resize"),"row-resize":pf("row-resize"),"col-resize":pf("col-resize"),grabbing:pf("grabbing")};function vf(e){var n=e.cursor;return(0,r.tZ)(i.xB,{styles:[ff,hf[n]]})}var mf=t(46995),gf=t(3455),Zf=t(6831),bf=t(69296),yf={root:p.l0.px(4),rowWrap:(0,i.iv)([p.l0.borderRadius(8)]),row:(0,i.iv)([te.gU.nofill,p.l0.rowWithGap(8),p.l0.p(4),p.l0.minHeight(32),p.l0.align.center,{transition:"initial"}]),icon:(0,i.iv)([p.l0.position.relative,{"& > svg":p.l0.color.foregroundDimmer}]),textWrap:[p.l0.colWithGap(2),p.l0.flex.growAndShrink(1)],heading:[p.l0.flex.growAndShrink(1),{opacity:.5}],text:[p.l0.flex.growAndShrink(1)]};function xf(e){var n=e.title,t=e.icon,i=e.active,o=e.highlightRanges,a=e.heading,l=e.dragRef;return(0,r.tZ)(d.G,{css:yf.root,children:(0,r.tZ)(Q.Tg,{elevated:i,css:yf.rowWrap,children:(0,r.BX)(Q.Tg,{innerRef:l,css:yf.row,children:[(0,r.tZ)(d.G,{css:yf.icon,children:t}),(0,r.BX)(d.G,{css:yf.textWrap,children:[a?(0,r.tZ)(ne.xv,{variant:"small",color:"dimmest",css:yf.heading,multiline:!1,children:a}):null,(0,r.tZ)(ne.xv,{multiline:!1,css:yf.text,color:(null===o||void 0===o?void 0:o.length)?"dimmest":"default",children:(null===o||void 0===o?void 0:o.length)?(0,r.tZ)(Zf.xK,{style:{color:p.TV.foregroundDimmest},matchStyle:{fontWeight:p.TV.fontWeightBold,color:p.TV.foregroundDefault},source:n,matches:o.map((function(e){return{column:e.from,length:e.to-e.from}}))}):n})]})]})})})}var wf=t(34204),kf=(0,c.createContext)({toolTourMap:{}}),Cf=function(e){var n=e.children;return(0,r.tZ)(kf.Provider,{value:{toolTourMap:{}},children:n})},Sf={38:20},If={root:(0,i.iv)([p.l0.flex.growAndShrink(1),{fontSize:10,textAlign:"center"}])};function Tf(e){var n=e.children,t=e.className;return(0,r.tZ)(ne.xv,{className:t,css:If.root,multiline:!1,children:n})}var Ef={ghostwriterChat:{background:p.TV.backgroundDefault,foreground:p.TV.blurpleStronger},deployments:{background:p.TV.backgroundDefault,foreground:p.TV.greenStrongest},docs:{background:p.TV.backgroundDefault,foreground:p.TV.yellowStrongest},chat:{background:p.TV.backgroundDefault,foreground:p.TV.blueStronger},threadInbox:{background:p.TV.backgroundDefault,foreground:p.TV.blueStronger},packager:{background:p.TV.backgroundDefault,foreground:p.TV.purpleStrongest},git:{background:p.TV.backgroundDefault,foreground:p.TV.greenStrongest},debugger:{background:p.TV.backgroundDefault,foreground:p.TV.orangeStronger},database:{background:p.TV.backgroundDefault,foreground:p.TV.blurpleStronger},shell:{background:p.TV.backgroundDefault,foreground:p.TV.blueStrongest},runnerOutput:{background:p.TV.backgroundDefault,foreground:p.TV.yellowStrongest},webview:{background:p.TV.backgroundDefault,foreground:p.TV.foregroundDimmer},replAuth:{background:p.TV.backgroundDefault,foreground:p.TV.orangeStrongest},adminPanel:{background:p.TV.backgroundDefault,foreground:p.TV.redStronger},unitTests:{background:p.TV.backgroundDefault,foreground:p.TV.greenStrongest},extensionStore:{background:p.TV.backgroundDefault,foreground:p.TV.yellowStronger},neon:{background:p.TV.backgroundDefault,foreground:p.TV.blueStrongest},sshConfigurator:{background:p.TV.backgroundDefault,foreground:p.TV.yellowStrongest},preferences:{background:p.TV.backgroundDefault,foreground:p.TV.greyStrongest}},Rf=(0,so.$)(["background","foreground"]),Gf=Rf.cssVars,Pf=Rf.styleTokens,Df={root:(0,i.iv)([p.l0.viewStyle,p.l0.reset.button,p.l0.colWithGap(4),p.l0.cursor.pointer,p.l0.center,p.l0.pt(2),p.l0.pt(4),{"&:hover":[p.l0.color.foregroundDefault],"&:active .frame":{opacity:.5},"&:focus-visible .icon":[{boxShadow:"0 0 0 2px ".concat(Pf.foreground),outline:"2px solid transparent",outlineOffset:"4px"}]}]),text:[p.l0.flex.growAndShrink(1),{fontSize:10}]},Bf={root:(0,i.iv)([te.gU.filled,p.l0.position.relative,p.l0.center,p.l0.borderRadius(8),{"> svg":{filter:"drop-shadow(0 0 3px rgba(255, 255, 255, 0.5))"}},{background:Pf.background,border:"none","& > svg":{fill:Pf.foreground},"& img":[p.l0.borderRadius(8)]}]),frame:(0,i.iv)([p.l0.position.absolute,p.l0.top(0),p.l0.left(0),p.l0.right(0),p.l0.bottom(0),p.l0.borderRadius(8),{border:"1px solid ".concat(Pf.foreground),opacity:.15}]),hovered:(0,i.iv)({backgroundColor:te.vb.interactiveBackgroundActive,"& > svg":p.l0.color.foregroundDefault}),active:(0,i.iv)([te.gU.filled["@media (hover: hover)"][":not([disabled])"][":active"],{"& > svg":p.l0.color.foregroundDimmer}]),focused:(0,i.iv)([{boxShadow:"0 0 0 2px "+p.TV.accentPrimaryDefault,outline:"2px solid transparent",outlineOffset:"4px"}])};function Uf(e){var n=e.indicator,t=e.children,i=e.isDragging,o=e.className,a=e.size,l=void 0===a?38:a;return(0,r.BX)(d.G,{className:o,css:i?[Bf.root,Bf.active]:Bf.root,style:{width:l,height:l},children:[(0,c.cloneElement)(t,{size:Sf[l]}),n?(0,r.tZ)(Zc,{small:!0}):null]})}function Af(e){var n,t=e.indicator,i=e.children,o=e.className,a=e.size,l=void 0===a?38:a,s=e.background,u=e.foreground;return(0,r.BX)(d.G,{className:o,css:Bf.root,style:(n={width:l,height:l},(0,f.Z)(n,Gf.background,s),(0,f.Z)(n,Gf.foreground,u),n),children:[(0,r.tZ)(d.G,{className:"frame",css:Bf.frame}),(0,c.cloneElement)(i,{size:Sf[l]}),t?(0,r.tZ)(Zc,{color:t}):null]})}var Lf={background:p.TV.backgroundDefault,foreground:p.TV.foregroundDimmer};function Of(e){var n,t,i=e.pane,o=e.onClick,a=e.dragRef,l=e.buttonRef,s=e.onKeyDown,d=e.tabIndex,f=(0,qn.Se)(),h=f.Icon({pane:i,size:20}),v=f.getTitle(i),m=(0,Re.b2)({paneType:i.type});(0,u.P5)({controlName:"flag-colored-tool-icons-ghostwriter-marketing",logFlagToAnalytics:!1})&&"ghostwriterChat"===i.type&&(n={background:p.TV.blurpleDimmest,foreground:p.TV.blurpleStrongest});var g=null!==(t=null!==n&&void 0!==n?n:Ef[i.type])&&void 0!==t?t:Lf,Z=g.background,b=g.foreground,y=function(e){return(0,c.useContext)(kf).toolTourMap[e.type]}(i),x=(0,wf.lq)(null===y||void 0===y?void 0:y.buttonRef,l,a),w=(0,c.useCallback)((function(e){o(e),null===y||void 0===y||y.dismissTour()}),[o,y]);return(0,r.BX)("button",{css:Df.root,onClick:w,ref:x,onKeyDown:s,tabIndex:d,children:[(0,r.tZ)(Af,{background:Z,foreground:b,className:"icon",indicator:m,children:h}),(0,r.tZ)(Tf,{className:"text",children:v})]})}var _f={root:(0,i.iv)([p.l0.position.absolute]),icon:(0,i.iv)([p.l0.shadow(2)]),textContainer:(0,i.iv)([p.l0.position.absolute,p.l0.left("50%"),p.l0.bottom("0"),p.l0.width("200%"),p.l0.center,{transform:"translate(-50%, calc(100% + ".concat(4,"px))")}])};function Xf(e){var n=e.pane,t=e.x,i=e.y,o=(0,qn.Se)(),a=o.Icon({pane:n,size:20}),l=o.getTitle(n),c=(0,Re.b2)({paneType:n.type});return(0,r.BX)(d.G,{css:_f.root,style:{transform:"translate(".concat(t,"px, ").concat(i,"px)")},children:[(0,r.tZ)(Uf,{isDragging:!0,css:_f.icon,indicator:c,children:a}),(0,r.tZ)(d.G,{css:_f.textContainer,children:(0,r.tZ)(Tf,{children:l})})]})}var zf={root:(0,i.iv)([p.l0.position.absolute,p.l0.shadow(2),p.l0.borderRadius(8),p.l0.minWidth(100)])};function Mf(e){var n=e.pane,t=e.x,i=e.y,o=(0,qn.Se)(),a=o.Icon({pane:n,size:20}),l=o.getTitle(n);return(0,r.tZ)(d.G,{css:zf.root,style:{transform:"translate(".concat(t,"px, ").concat(i,"px)")},children:(0,r.tZ)(xf,{active:!0,icon:a,title:l})})}function jf(){var e=(0,gf.u)();if(!e.display)return null;var n=e.item,t=e.monitor.getSourceClientOffset();return t?n.grid?(0,r.BX)(r.HY,{children:[(0,r.tZ)(vf,{cursor:"grabbing"}),(0,r.tZ)(Xf,{pane:n.pane,x:t.x,y:t.y})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(vf,{cursor:"grabbing"}),(0,r.tZ)(Mf,{pane:n.pane,x:t.x,y:t.y})]}):null}var Wf=(0,i.iv)({position:"fixed",pointerEvents:"none",zIndex:uo.filetreeDragLayer,left:0,top:0,width:"100%",height:"100%"});function Nf(){var e=(0,mf.f)((function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging()}})),n=e.isDragging,t=e.itemType===uf.z.NewPane;return n&&t?(0,r.tZ)("div",{css:Wf,children:(0,r.tZ)(jf,{})}):null}var Ff=t(1169);function Vf(e){var n=e.pane,t=xl(),i=Sl(),o=(0,l.Z)((0,df.c)({type:uf.z.NewPane,item:function(){return{type:uf.z.NewPane,pane:n,grid:!0}},end:function(){i()}}),3),a=o[1],s=o[2],u=c.useRef(null),d=(0,l.Z)((0,Ff.XZ)(u,!1),4),p=d[0],f=d[1],v=d[2],m=d[3];return(0,Ff.Ym)(f,u),(0,bf.K)(s),(0,r.tZ)(Of,{pane:n,dragRef:a,buttonRef:u,tabIndex:p,onKeyDown:v,onClick:function(){m(),t({pane:n}),function(e){var n={action:"opened"};switch(sf.n_({category:"dock",message:"Opened ".concat(e)}),(0,h.j)(h.U3.TOOL_OPENED,{source:"Sidebar Dock",tool:e}),e){case"git":return(0,h.j)(h.U3.GIT_FEATURE_USED,{action:"pane-opened",source:"git-pane"});case"envEditor":return(0,h.j)(h.U3.ENV_EDITOR_USED,n);case"database":return(0,h.j)(h.U3.DATABASE_USED,{action:"opened",type:"ReplitKV",provider:"replit"});case"neon":return(0,h.j)(h.U3.DATABASE_USED,{action:"opened",type:"PostgreSQL",provider:"neon"});case"replAuth":return(0,h.j)(h.U3.AUTH_SIDEBAR_USED,n);case"packager":return(0,h.j)(h.U3.PACKAGE_MANAGER_USED,n);case"unitTests":return(0,h.j)(h.U3.REPL_UNIT_TEST_USED,n);case"debugger":return(0,h.j)(h.U3.DEBUGGER_USED,n);case"extensionStore":(0,h.j)(h.U3.EXTENSION_STORE_VIEWED,{source:"tools-sidebar"})}}(n.type)}})}var Hf=(0,i.iv)([p.l0.pl(8),{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fill, minmax(".concat(60,"px, 1fr))"),gridAutoFlow:"dense"}]);function Yf(){var e=ad(Au.Dock),n=(0,cc.B)(),t=n.length,i=ju(Ku);return(0,c.useEffect)((function(){var e=Math.min(300,40*t);i({id:Au.Dock,preferredHeight:e})}),[t,i]),(0,r.tZ)(Cf,{panes:n,isCollapsed:e,children:(0,r.BX)(r.HY,{children:[(0,r.tZ)(Nf,{}),(0,r.tZ)(d.G,{role:"toolbar",css:Hf,"aria-label":"Dock","aria-orientation":"horizontal",children:(0,r.tZ)(Ff.uP,{options:{direction:"horizontal",loopAround:!0},children:n.map((function(e){return(0,r.tZ)(Vf,{pane:e},"extension"===e.type?e.data.installationId:e.type)}))})})]})})}var qf={title:"Tools",content:(0,r.tZ)(Yf,{})},Kf=t(46266),$f={kaboom:cf,files:bp,dock:qf},Qf={root:(0,i.iv)([p.l0.rowWithGap(4),p.l0.align.center,p.l0.height(Yu),{userSelect:"none"}]),header:(0,i.iv)([p.l0.reset.button,p.l0.focusRing,p.l0.borderRadius(4),p.l0.ml(8),p.l0.flex.growAndShrink(1),p.l0.rowWithGap(4),p.l0.align.center,p.l0.cursor.pointer]),title:(0,i.iv)([p.l0.fontWeight.medium]),border:(0,i.iv)([p.l0.position.absolute,p.l0.top(0),p.l0.right(0),p.l0.width("calc(100% - ".concat(p.TV.space8,")")),{pointerEvents:"none",borderTop:"1px solid",borderColor:p.TV.outlineDimmest}]),content:(0,i.iv)([p.l0.flex.growAndShrink(1),p.l0.overflowY("auto"),p.l0.scrollbar.hidden])},Jf=(0,c.memo)((function(e){var n=ad(e.id),t=od(),i=$f[e.id],o=i.title,a=i.controls;return(0,r.BX)(d.G,{css:Qf.root,children:[(0,r.BX)(d.G,{id:"sidebar-section-header-".concat(e.id),tag:"button",onClick:function(){(0,h.j)(h.U3.WS_SIDEBAR_SECTION_TOGGLED,{section:e.id,action:n?"open":"close"}),t(e.id)},css:Qf.header,"aria-expanded":!n,"aria-controls":"sidebar-section-content-".concat(e.id),dataCy:"sidebar-section-content-".concat(e.id),children:[(0,r.tZ)(Lu.Z,{rotate:n?0:90}),"string"===typeof o?(0,r.tZ)(ne.xv,{css:Qf.title,multiline:!1,children:o}):c.cloneElement(o,{collapsed:n})]}),a||null]})})),eh=(0,c.memo)((function(e){var n=$f[e.id].content,t=ad(e.id);return(0,r.tZ)(d.G,{id:"sidebar-section-content-".concat(e.id),inert:t?"true":void 0,css:[Qf.content,"files"===e.id?p.l0.position.relative:{}],children:(0,r.tZ)(d.G,{css:p.l0.pb(8),children:n})})})),nh={root:(0,i.iv)([p.l0.position.relative,p.l0.height(0),p.l0.width("100%"),{zIndex:1,"&:hover > div":{transform:"scaleY(2)"},cursor:"ns-resize"}]),hoverArea:(0,i.iv)([p.l0.position.relative,p.l0.height(8),p.l0.top(-4)])},th=(0,c.memo)((function(e){var n=ju(cd),t=ud({id:e.id});return(0,r.tZ)(d.G,{css:nh.root,onPointerDown:function(t){Fs(t,{start:function(){n({type:"start",id:e.id})},move:function(e){var t=e.delta;n({type:"update",delta:t.y})},end:function(e){var t=e.delta;n({type:"end",delta:t.y})}})},children:(0,r.tZ)(d.G,{style:t?{transform:"scaleY(100)"}:void 0,css:nh.hoverArea})})}));function rh(e){var n=c.useRef(null),t=(0,Yc.T)(),i=ud({id:e.id}),o=Mu(sd),a=nd(e.id);return c.useEffect((function(){return(0,Kf.A)(n,"height",a.current+"px"),a.subscribe((function(e){(0,Kf.A)(n,"height",e+"px")}))}),[a]),(0,r.BX)(d.G,{innerRef:n,style:{zIndex:i?2:void 0,position:"relative",transition:t||o?void 0:"height 120ms ease-out"},children:[e.border?(0,r.tZ)(d.G,{css:Qf.border}):null,(0,r.tZ)(Jf,{id:e.id}),(0,r.tZ)(eh,{id:e.id}),e.resizable?(0,r.tZ)(th,{id:e.id}):null]})}function ih(){var e=(0,g.Z)(["\n  query ReplEnvironmentDesktopSidebarContent {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return ih=function(){return e},e}var oh={},ah=(0,Z.Ps)(ih());var lh=t(20538),ch=(0,de.X)({root:[p.l0.rowWithGap(2),p.l0.align.center],cta:[p.l0.flex.growAndShrink(1)]});function sh(){var e,n=function(e){var n=(0,m.Z)({},oh,e);return M.a(ah,n)}(),t=n.data,i=n.loading,o=(0,lh.o)("ghostwriter-repl-resources-cta"),a=o.isLoading,l=o.isDone,c=o.setAsDone;return(null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.userSubscriptionType)||l||a||i?null:(0,r.BX)(d.G,{css:ch.root,children:[(0,r.tZ)(d.G,{dataCy:"workspace-sidebar-upgrade-cta",css:ch.cta,children:(0,r.tZ)(du.Z,{context:"workspace_sidebar",colorway:"primary",stretch:!0})}),(0,r.tZ)(ee.hU,{onClick:function(){return c()},tooltipHidden:!0,alt:"Hide",children:(0,r.tZ)(xp.Z,{})})]})}var uh={container:(0,i.iv)([p.l0.position.absolute,p.l0.top(0),p.l0.left(0),p.l0.width("100%"),p.l0.height("100%"),p.l0.minWidth(Hr)]),header:(0,i.iv)([p.l0.pl(8),{zIndex:3}]),content:(0,i.iv)([p.l0.flex.growAndShrink(1)]),footer:(0,i.iv)([p.l0.pl(8),p.l0.pt(4),p.l0.colWithGap(8),{zIndex:2}]),help:(0,i.iv)([p.l0.pb(8),p.l0.flex.growAndShrink(1),p.l0.justify.center,{button:p.l0.borderRadius(4)}])};function dh(){var e=xl(),n=(0,Pc.gf)(Mc.id),t=Ac(),i=(0,u.P5)({controlName:"flag-pro-reverse-trial",type:"boolean",logFlagToAnalytics:!0}),o=(0,u.P5)({controlName:"flag-helpful-header",default:!1,logFlagToAnalytics:!0}),a=[{type:"button",key:"shortcuts",onClick:function(){t(),(0,h.j)(h.U3.KEYBOARD_SHORTCUTS_OPENED)},content:(0,r.BX)(r.HY,{children:[(0,r.tZ)(cu.Z,{}),(0,r.tZ)(ne.xv,{multiline:!1,children:"Shortcuts"}),n?(0,r.tZ)(Pc.bM,{keyCombo:n,small:!0}):null]})}];return(0,r.BX)(d.G,{css:uh.footer,children:[i?(0,r.tZ)(Zu,{}):(0,r.tZ)(sh,{}),(0,r.tZ)(d.G,{css:uh.help,children:o?null:(0,r.tZ)(ru.Z,{extraItems:a,onDocsClick:function(n){n.preventDefault(),e({pane:{type:"docs",data:{url:null}}})}})})]})}function ph(){var e=ju(ed),n=ju(rd),t=(0,iu.oj)(),r=(0,c.useRef)(null);(0,c.useEffect)((function(){if(r.current){var n=r.current.getBoundingClientRect().height;e(t?{height:n,sections:[{id:Au.Files,percent:0},{id:Au.Kaboom,percent:60},{id:Au.Dock,percent:40}]}:{height:n,sections:[{id:Au.Files,percent:60},{id:Au.Dock,percent:40}]})}}),[e,t]);var i=(0,ou.Z)((function(e){e&&n(e.height)}),{wait:100,type:"debounce"});return(0,au.l)(i,r)}var fh=(0,c.memo)((function(){var e=fp(),n=e.filetree,t=e.activeModal,i=e.closeModal,o=(0,xu.HQ)();return(0,c.useEffect)((function(){return n.setPresenceState(o.current),o.subscribe(n.setPresenceState)}),[n,o]),(0,r.BX)(dp,{value:n,children:[(0,r.tZ)(hh,{}),(0,r.BX)(He.u,{isOpen:Boolean(t),onRequestClose:i,children:["conflicts"===(null===t||void 0===t?void 0:t.type)?(0,r.tZ)(uu.Z,{paths:t.data.conflicts.map((function(e){return e.path})),onCancel:i,onConfirm:function(){var e=t.data;"move"===e.type?n.move({nodes:e.nodes,to:e.to,overwrite:!0}):n.upload({files:e.files,parentPath:e.to,overwrite:!0}),i()}}):null,"deleteNode"===(null===t||void 0===t?void 0:t.type)?(0,r.tZ)(lu.Z,(0,oe.Z)((0,m.Z)({},(0,yu.B)(t.data.nodes)),{delete:function(){return t.data.confirm()},hideModal:i})):null]})]})})),hh=(0,c.memo)((function(){var e=Mu(td),n=ph(),t=(0,su.Z)(Vc.y.Sidepane),i=(0,bu.Z)().isTutorial?null:t,o=e[e.length-1];return(0,r.BX)(d.G,{innerRef:i,css:uh.container,children:[(0,r.tZ)(d.G,{css:uh.header,children:(0,r.tZ)(Uu,{})}),(0,r.tZ)(d.G,{css:uh.content,innerRef:n,children:e.map((function(e,n){return(0,r.tZ)(rh,{id:e,resizable:e!==o,border:0!==n},e)}))}),(0,r.tZ)(dh,{})]})})),vh=t(94468),mh=t(84296);function gh(){return(0,r.tZ)(d.G,{children:(0,r.tZ)(mh.Z,{rounded:!1})})}var Zh=(0,de.X)({root:[p.l0.height("100%")],coreAction:[p.l0.height("100%"),{"& > div":[p.l0.height("100%")]},{"& > div > div":[p.l0.height("100%")]},{"& > div > div > div":[p.l0.height("100%"),p.l0.justify.center]}],iconButton:[p.l0.borderRadius(2),{height:"100% !important"}]});function bh(e){var n=e.action;return"action"!==n.type?null:(0,r.tZ)(d.G,{css:Zh.coreAction,children:(0,r.tZ)(ee.hU,{css:Zh.iconButton,alt:n.label,children:n.icon})})}function yh(e){var n=e.bindings;return n&&n.actions?(0,r.tZ)(d.G,{css:Zh.root,children:n.actions.map((function(e,n){return(0,r.tZ)(bh,{action:e},n)}))}):null}var xh=t(17687),wh=(0,de.X)({root:[p.l0.px(8)]});function kh(){return(0,r.tZ)(d.G,{css:wh.root,children:(0,r.tZ)(xh.Z,{})})}var Ch=t(47381),Sh=t(91402),Ih=t(97356),Th=t(75277),Eh=t(38256),Rh=t(96893),Gh=t(42362),Ph=t(72598),Dh=t(61535),Bh=t(76092),Uh=t(26966),Ah=t(35054),Lh=t(29110),Oh=t(44312),_h=t(11447),Xh=t(98348),zh=t(40770),Mh=t(84761);function jh(e){var n=e.pane,t=function(e){switch(e.type){case"adminPanel":return(0,r.tZ)(Ch.Z,{});case"codeEditor":return null===e.data.path?(0,r.tZ)(Mh.Z,{}):(0,r.tZ)(fc.Z,{path:e.data.path});case"database":return(0,r.tZ)(Ih.Z,{});case"deployments":return(0,r.tZ)(Th.Z,{});case"diff":return(0,r.tZ)(Sh.Z,{});case"draw":return(0,r.tZ)(Ph.Z,{});case"envEditor":return(0,r.tZ)(Bh.Z,{});case"ghostwriterChat":return(0,r.tZ)(Rh.Z,{});case"git":return(0,r.tZ)(Eh.Z,{});case"history":return(0,r.tZ)(Gh.Z,{});case"markdown":return(0,r.tZ)(Dh.Z,{});case"media":return(0,r.tZ)(fc.Z,{path:e.data.path||""});case"multiplayer":return(0,r.tZ)($.Z,{});case"neon":return(0,r.tZ)(Ah.Z,{});case"packager":return(0,r.tZ)(Lh.Z,{});case"pedit":return(0,r.tZ)(Ad.Z,{});case"problems":return(0,r.tZ)(Oh.Z,{});case"runnerOutput":return(0,r.tZ)(_h.Z,{});case"shell":return(0,r.tZ)(jd.Z,{});case"sshConfigurator":return(0,r.tZ)(cu.Z,{});case"systemDependencies":return(0,r.tZ)(Xh.Z,{});case"unitTests":return(0,r.tZ)(Sn.Z,{});case"vnc":case"webview":return(0,r.tZ)(zh.Z,{});default:return}}(n),i=function(e){switch(e.type){case"adminPanel":return"Debug";case"codeEditor":return e.data.path?(0,En.UO)(e.data.path):"Code";case"database":return"Database";case"deployments":return"Deployments";case"diff":return"Diff";case"draw":return"Draw";case"envEditor":return"Secrets";case"ghostwriterChat":return"AI";case"git":return"Git";case"history":return"History";case"markdown":return"Markdown Preview";case"media":return"Media";case"multiplayer":return"Multiplayer";case"neon":return"PostgreSQL";case"packager":return"Packages";case"pedit":return"Pedit";case"problems":return"Problems";case"runnerOutput":return"Console";case"shell":return"Shell";case"sshConfigurator":return"SSH";case"systemDependencies":return"System Dependencies";case"unitTests":return"Unit Tests";case"vnc":return"Output";case"webview":return"Webview";default:return""}}(n);return i?(0,r.tZ)(d.G,{children:(0,r.tZ)(Uh.Z,{disabled:!0,iconLeft:t,text:i})}):null}var Wh=t(28639),Nh=(0,de.X)({root:[p.l0.px(8)]});function Fh(){var e=(0,re.Z)().runner;return(0,ie.L7)(e)===Wh.Ah.OFFLINE?(0,r.tZ)(Uh.Z,{css:Nh.root,iconLeft:(0,r.tZ)(se.Z,{}),text:"Booting"}):null}var Vh=t(13974),Hh=(0,de.X)({root:[p.l0.display.flex,p.l0.rowWithGap(0)]});function Yh(){return(0,r.tZ)(d.G,{css:Hh.root,children:(0,r.tZ)(Vh.Z,{})})}function qh(e){var n=e.pane;return"codeEditor"!==n.type||null===n.data.path?null:(0,r.tZ)(d.G,{children:(0,r.tZ)(Uh.Z,{disabled:!0,iconLeft:(0,r.tZ)(fc.Z,{path:n.data.path}),text:(0,En.UO)(n.data.path)})})}var Kh=t(86885);function $h(e){var n=e.pane,t=e.performActivePaneOperation;return"codeEditor"!==n.type||null===n.data.path?null:(0,r.tZ)(d.G,{children:(0,r.tZ)(Kh.Z,{rounded:!1,onOpen:function(){t({operation:"replace",pane:{type:"history",data:{path:n.data.path}}})}})})}var Qh=t(20457);function Jh(e){var n=e.pane,t=e.performActivePaneOperation,i=(0,$n.Z)((function(){return function(){t({operation:"open",pane:{type:"preferences"}})}}),[t]);return"codeEditor"!==n.type||null===n.data.path?null:(0,r.tZ)(d.G,{children:(0,r.tZ)(Qh.Z,{path:n.data.path,openSettings:i})})}var ev=t(5681);function nv(e){var n=e.pane;return"codeEditor"!==n.type||null===n.data.path?null:(0,r.tZ)(d.G,{children:(0,r.tZ)(ev.Z,{})})}var tv=t(20087);function rv(){var e=(0,Ta.Z)().preferences;return"vim"===(null===e||void 0===e?void 0:e.keyboardHandler)?(0,r.tZ)(d.G,{children:(0,r.tZ)(tv.Z,{})}):null}var iv=t(29353);function ov(){return(0,r.tZ)(d.G,{children:(0,r.tZ)(iv.Z,{})})}var av=t(15906);function lv(e){var n=e.performActivePaneOperation;return(0,r.tZ)(d.G,{children:(0,r.tZ)(av.Z,{performPaneOperation:n})})}var cv=t(27500);function sv(){return(0,r.tZ)(d.G,{children:(0,r.tZ)(cv.Z,{})})}function uv(e){var n=e.pane,t=e.bindings,i=e.component,o=e.performActivePaneOperation;switch(i.name){case"editor.language":return(0,r.tZ)(nv,{pane:n});case"editor.history":return(0,r.tZ)($h,{pane:n,performActivePaneOperation:o});case"editor.indentation":return(0,r.tZ)(Jh,{pane:n,performActivePaneOperation:o});case"editor.position":return(0,r.tZ)(ov,{});case"editor.mode":return(0,r.tZ)(rv,{});case"editor.file":return(0,r.tZ)(qh,{pane:n});case"editor.diagnostics":return(0,r.tZ)(Yh,{});case"core.logo":return(0,r.tZ)(kh,{});case"core.actions":return(0,r.tZ)(yh,{bindings:t});case"core.pane":return(0,r.tZ)(jh,{pane:n});case"core.status":return(0,r.tZ)(Fh,{});case"ai.completion":return(0,r.tZ)(gh,{});case"git.branch":return(0,r.tZ)(lv,{performActivePaneOperation:o});case"git.diff":return(0,r.tZ)(sv,{});default:return null}}function dv(e){var n,t=e.bindings,i=e.children,o="codeEditor"===(null===t||void 0===t?void 0:t.type)?null===t||void 0===t||null===(n=t.getEditorView)||void 0===n?void 0:n.call(t):null;return(0,vh.VD)(null!==o&&void 0!==o?o:null),(0,r.tZ)(r.HY,{children:i})}var pv=(0,so.$)(["width","right"]),fv=pv.cssVars,hv=pv.styleTokens,vv=(0,de.X)({root:[p.l0.display.flex,p.l0.flex.row,p.l0.align.center,p.l0.position.absolute,p.l0.top("calc(100% - ".concat(2,"px)")),p.l0.width("calc(100% - ".concat(hv.width," - ").concat(hv.right,")")),p.l0.height(28),p.l0.right(hv.right)],section:[p.l0.display.flex,p.l0.align.center,p.l0.rowWithGap(4),p.l0.height("100%"),{"& > *":[p.l0.display.flex,p.l0.align.center]}],left:[],center:[p.l0.display.flex,p.l0.flex.grow(1),p.l0.justify.center],right:[]});function mv(e){var n,t,i,o,a=e.activePane,l=e.activePaneBindings,s=e.performActivePaneOperation,u=(0,c.useRef)(null),p=io(vr),f=(o=l,"codeEditor"===(i=a).type?{type:i.type,pane:i,bindings:o,sections:{left:[{name:"core.pane"},{name:"git.branch"},{name:"git.diff"},{name:"ai.completion"},{name:"editor.language",options:{icon:!0}},{name:"editor.diagnostics"},{name:"editor.mode"}],center:[],right:[{name:"editor.position"},{name:"editor.indentation"},{name:"editor.history"}]}}:{type:"default",pane:i,bindings:o,sections:{left:[{name:"core.pane"},{name:"git.branch"},{name:"git.diff"}],center:[{name:"core.status"}],right:[{name:"core.actions"}]}}),h=(0,c.useMemo)((function(){return(0,Fn.MT)()}),[]);return(0,c.useEffect)((function(){var e,n,t,r;u.current&&(u.current.style.setProperty(fv.width,"".concat(null!==(t=null===(e=p.inset)||void 0===e?void 0:e.left)&&void 0!==t?t:0,"px")),u.current.style.setProperty(fv.right,"".concat(null!==(r=null===(n=p.inset)||void 0===n?void 0:n.right)&&void 0!==r?r:0,"px")))}),[null===(n=p.inset)||void 0===n?void 0:n.left,null===(t=p.inset)||void 0===t?void 0:t.right]),(0,r.tZ)(vh.Cl.Provider,{value:h,children:(0,r.tZ)(dv,{bindings:l,children:(0,r.BX)(Q.Tg,{innerRef:u,css:vv.root,children:[f.sections.left.length>0?(0,r.tZ)(d.G,{css:[vv.section,vv.left],children:f.sections.left.map((function(e,n){return(0,r.tZ)(uv,{component:e,pane:f.pane,bindings:f.bindings,performActivePaneOperation:s},"".concat(e.name,"-").concat(n))}))}):null,(0,r.tZ)(d.G,{css:[vv.section,vv.center],children:f.sections.center.map((function(e,n){return(0,r.tZ)(uv,{component:e,pane:f.pane,bindings:f.bindings,performActivePaneOperation:s},"".concat(e.name,"-").concat(n))}))}),f.sections.right.length>0?(0,r.tZ)(d.G,{css:[vv.section,vv.right],children:f.sections.right.map((function(e,n){return(0,r.tZ)(uv,{component:e,pane:f.pane,bindings:f.bindings,performActivePaneOperation:s},"".concat(e.name,"-").concat(n))}))}):null]})})})}var gv={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,zc.l2)({cmdOrCtrl:!0,shift:!0,key:"b"})},Zv=(0,so.$)(["width","visibility"]),bv=Zv.cssVars,yv=Zv.styleTokens,xv=(0,i.iv)([p.l0.height("100%"),p.l0.position.absolute,p.l0.top(0),p.l0.left(0),p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.overflow("auto"),{width:yv.width,visibility:yv.visibility}]),wv=(0,i.iv)([p.l0.height("calc(100% + ".concat(34,"px)"))]);function kv(){var e=(0,c.useRef)(null),n=ic(),t=(0,u.P5)({controlName:"flag-global-status-bar",default:!1});return(0,co.j)(e,n.width,(function(e){return(0,f.Z)({},bv.width,e+"px")})),(0,co.j)(e,n.isOpen,(function(e){return(0,f.Z)({},bv.visibility,e?"visible":"hidden")})),(0,r.BX)(r.HY,{children:[(0,r.tZ)(Wu,{children:(0,r.tZ)(d.G,{css:[xv,t&&wv],innerRef:e,children:(0,r.tZ)(fh,{})})}),(0,r.tZ)(tu,{})]})}var Cv=(0,c.memo)(kv),Sv=t(16094),Iv=t(82448),Tv=t(59213),Ev=t(31547),Rv=t(19532);function Gv(){var e=(0,g.Z)(['\n  fragment DesktopAppNavMenuCurrentUser on CurrentUser {\n    id\n    hasSeenWorkspaceTour: tourSeen(name: "workspace-desktop-new-user-tour")\n    hasSeenSidebarTour: tourSeen(name: "workspace-desktop-sidebar-tour")\n  }\n']);return Gv=function(){return e},e}function Pv(){var e=(0,g.Z)(["\n  query DesktopAppNavMenuTour {\n    currentUser {\n      id\n      ...DesktopAppNavMenuCurrentUser\n    }\n  }\n  ","\n"]);return Pv=function(){return e},e}var Dv={},Bv=(0,Z.Ps)(Gv()),Uv=(0,Z.Ps)(Pv(),Bv);var Av={id:"DesktopAppNavMenu",title:"Native App Navigation",content:function(){return(0,r.tZ)(d.G,{children:(0,r.tZ)(ne.xv,{children:"In the desktop app, you can use this menu to switch between your Repls, create new ones, and open more windows."})})}};function Lv(e){var n=e.targetElement,t=(0,Oe.Z)("workspace","desktop-app-nav-menu"),i=t.shouldDisplay,o=t.register,a=t.dismiss,l=function(e){var n=(0,m.Z)({},Dv,e);return M.a(Uv,n)}();return c.useEffect((function(){var e;if(!l.loading&&(null===(e=l.data)||void 0===e?void 0:e.currentUser)){var n=l.data.currentUser,t=n.hasSeenWorkspaceTour,r=n.hasSeenSidebarTour;(t||r)&&o()}}),[o,l]),n&&i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ev.w,{targetElement:n}),(0,r.tZ)(Rv.k,{placement:"bottom-start",targetElement:n,activeStep:Av,currentStepIndex:0,done:a,goto:function(){},totalSteps:1,disableAnimation:!0,onClickOutside:a})]}):null}var Ov=(0,de.X)({button:_s,wrapper:[p.l0.borderRadius(8),p.l0.width(300),p.l0.maxHeight("60vh"),p.l0.flex.column],newReplButtonWrapper:[p.l0.p(8)],newWindowButtonWrapper:[p.l0.p(8),p.l0.pt(0)],replsListContainer:[p.l0.flex.shrink(1),p.l0.borderRadius(8)]});function _v(){var e=(0,c.useState)(!1),n=e[0],t=e[1],i=(0,c.useState)(!1),o=i[0],a=i[1],l=(0,nn.useRouter)(),s=(0,c.useRef)(null);return(0,r.BX)(r.HY,{children:[(0,r.BX)(_e.x,{background:"default",isOpen:n,onOpenChange:function(e){o||t(e)},placement:"bottom start",label:"Navigation menu",noArrow:!0,children:[function(e){var n=e.ref,t=(0,bs.Z)(e,["ref"]);return(0,r.BX)("button",(0,oe.Z)((0,m.Z)({css:Ov.button,"data-cy":"global-nav-dropdown-btn",ref:(0,au.l)(n,s)},t),{children:[(0,r.tZ)(xs.N2,{color:Je.TV.foregroundDefault,size:20}),(0,r.tZ)(vs.Z,{color:Je.TV.foregroundDimmest,size:12})]}))},(0,r.BX)(d.G,{css:Ov.wrapper,children:[(0,r.tZ)(d.G,{css:Ov.newReplButtonWrapper,children:(0,r.tZ)(J.zx,{colorway:"primary",text:"Create a Repl",iconLeft:(0,r.tZ)(pc.Z,{}),onClick:function(){return a(!0)}})}),(0,r.tZ)(d.G,{css:Ov.newWindowButtonWrapper,children:(0,r.tZ)(J.zx,{text:"New window",iconLeft:(0,r.tZ)(Iv.Z,{}),onClick:function(){Tv.X.openNewWindow()}})}),(0,r.tZ)(d.G,{css:Ov.replsListContainer,children:(0,r.tZ)(Sv.Z,{onClick:function(e,n){n?Tv.X.openWindow(e):l.push({pathname:"/replEnvironmentDesktop",query:{replUrl:e}},{pathname:e})}})})]})]}),(0,r.tZ)(Ls.Z,{isOpen:o,onRequestClose:function(){return a(!1)},maxWidth:600,children:(0,r.tZ)(As.Z,{})}),(0,r.tZ)(Lv,{targetElement:s.current})]})}var Xv=t(12901),zv=t(13345),Mv=t(60951),jv=t(70135),Wv=t(55904),Nv=t(5629),Fv=t(51801),Vv=t(15597),Hv=t(90602),Yv=t(95134),qv=t(89559),Kv=t(49019),$v=t(35291),Qv=t(87693),Jv=t(44167),em=t(26881),nm=t(85289),tm=t(79824),rm=t(29262);em.kL.register(em.jn,em.Gu);function im(e){return Math.round(10*e)/10}function om(e){return e>rm.lb?"".concat((0,$v.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,$v.p6)(e)).toLocaleString()," MiB")}var am=(0,de.X)({section:[p.l0.py(4),p.l0.px(12),p.l0.rowWithGap(8),p.l0.justify.spaceBetween,p.l0.align.center]}),lm=(0,de.X)({wrapper:[p.l0.borderRadius(8),p.l0.border({color:p.TV.outlineDimmer}),p.l0.overflow("hidden")],section:[am.section],hoverSection:[am.section,{":hover":{backgroundColor:p.TV.backgroundHigher}}],sectionHeading:[p.l0.fontWeight.bold],alignedRow:[p.l0.rowWithGap(8),p.l0.align.center],tooltipContent:[p.l0.colWithGap(8),p.l0.width(240)],tooltipSectionsWrapper:[p.l0.borderRadius(8),p.l0.border({color:p.TV.outlineDimmer}),p.l0.overflow("hidden")],warningText:[p.l0.color.orangeStronger],dangerText:[p.l0.color.redStronger]});function cm(e){var n=e.resources,t=e.canEditCompute,i=e.onEditCompute,o=im((0,Vn.Dv)(n.dataAtom.cpu.cpuCountAtom)),a=im((0,Vn.Dv)(n.dataAtom.ram.totalAtom)/1024);return(0,r.BX)(d.G,{css:lm.wrapper,children:[(0,r.BX)(d.G,{css:lm.section,children:[(0,r.tZ)(ne.xv,{css:lm.sectionHeading,children:"Compute"}),(0,r.BX)(d.G,{css:lm.alignedRow,children:[(0,r.BX)(ne.xv,{color:"dimmest",children:[o," vCPU, ",a," GB RAM"]}),t?(0,r.tZ)(ee.hU,{onClick:i,alt:"Edit compute limits",children:(0,r.tZ)(Ad.Z,{})}):null]})]}),(0,r.tZ)(Hv.R,{}),(0,r.tZ)(sm,{resources:n}),(0,r.tZ)(um,{resources:n})]})}function sm(e){var n=e.resources,t=Math.round((0,Vn.Dv)(n.dataAtom.cpu.currentAtom)),i=Math.round((0,Vn.Dv)(n.dataAtom.cpu.user.currentAtom)),o=Math.round((0,Vn.Dv)(n.dataAtom.cpu.system.currentAtom)),a=(0,Vn.Dv)(n.dataAtom.cpu.recentUtilPercentsAtom),l=(0,Vn.Dv)(n.dataAtom.cpu.user.recentUtilPercentsAtom),c=(0,Vn.Dv)(n.dataAtom.cpu.system.recentUtilPercentsAtom),s=(0,Vn.Dv)(n.dataAtom.cpu.status);return(0,r.tZ)(dm,{title:"CPU",displayValue:"".concat(t,"%"),recentPercents:a,status:s,tooltipText:"The amount of processing power this Repl is using.",tooltipRows:[{title:"User",displayValue:"".concat(i,"%"),recentPercents:l},{title:"System",displayValue:"".concat(o,"%"),recentPercents:c}]})}function um(e){var n=e.resources,t=(0,Vn.Dv)(n.dataAtom.ram.totalAtom),i=Math.round((0,Vn.Dv)(n.dataAtom.ram.rss.currentAtom)),o=1024*i*1024,a=Math.round((0,Vn.Dv)(n.dataAtom.ram.cache.currentAtom)),l=1024*a*1024,c=i+a,s=Math.round(100*Math.min(1,c/t)),u=(0,Vn.Dv)(n.dataAtom.ram.recentUtilPercentsAtom),d=(0,Vn.Dv)(n.dataAtom.ram.rss.recentUtilPercentsAtom),p=(0,Vn.Dv)(n.dataAtom.ram.cache.recentUtilPercentsAtom),f=(0,Vn.Dv)(n.dataAtom.ram.status);return(0,r.tZ)(dm,{title:"RAM",displayValue:"".concat(s,"%"),recentPercents:u,status:f,tooltipText:"The memory this Repl is using.",tooltipRows:[{title:"Active",displayValue:om(o),recentPercents:d},{title:"Cache",displayValue:om(l),recentPercents:p}]})}function dm(e){var n=e.title,t=e.displayValue,i=e.status,o=e.recentPercents,a=e.tooltipText,l=e.tooltipRows;return(0,r.tZ)(le.u,{backgroundColor:p.TV.backgroundDefault,placement:"right-start",maxWidth:300,delay:"none",tooltip:(0,r.BX)(d.G,{css:lm.tooltipContent,children:[(0,r.tZ)(ne.xv,{children:a}),(0,r.tZ)(d.G,{css:lm.tooltipSectionsWrapper,children:l.map((function(e,n){return(0,r.BX)(d.G,{css:lm.section,children:[(0,r.tZ)(ne.xv,{children:e.title}),(0,r.BX)(d.G,{css:lm.alignedRow,children:[(0,r.tZ)(ne.xv,{color:"dimmest",children:e.displayValue}),(0,r.tZ)(hm,{data:e.recentPercents})]})]},n)}))})]}),children:(0,r.BX)(d.G,{css:lm.hoverSection,children:[(0,r.BX)(d.G,{css:lm.alignedRow,children:[(0,r.tZ)(ne.xv,{children:n}),(0,r.tZ)(pm,{status:i})]}),(0,r.BX)(d.G,{css:lm.alignedRow,children:[(0,r.tZ)(ne.xv,{color:"dimmest",children:t}),(0,r.tZ)(hm,{data:o})]})]})})}function pm(e){var n=e.status;return"warning"===n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(tm.Z,{color:p.TV.orangeStronger}),(0,r.tZ)(ne.xv,{css:lm.warningText,children:"Near limit"})]}):"danger"===n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(tm.Z,{color:p.TV.redStronger}),(0,r.tZ)(ne.xv,{css:lm.dangerText,children:"At limit"})]}):null}var fm=(0,de.X)({wrapper:[p.l0.width(22),p.l0.height(18),p.l0.borderRadius(2)]});function hm(e){var n,t,i,o=e.data,a=(0,Qv.F)().values;return(0,r.tZ)(d.G,{css:fm.wrapper,children:(0,r.tZ)(nm.x1,{updateMode:"none",options:{clip:4,animation:!1,maintainAspectRatio:!1,events:[],elements:{point:{radius:0},line:{tension:.3,borderWidth:1}},scales:{x:{display:!1,type:"linear",grid:{display:!1},min:0,max:-(o.length-1)},y:{display:!1,grid:{display:!1},min:0,max:100}}},data:{datasets:[{data:o.map((function(e,n){return{x:-n,y:e}})),fill:{target:"origin",above:a.global.blueDimmest},backgroundColor:a.global.accentPrimaryDefault,borderColor:function(e){var r=e.chart,o=r.ctx,l=r.chartArea;if(l){var c=l.right-l.left,s=l.bottom-l.top;return i&&n===c&&t===s||(n=c,t=s,(i=o.createLinearGradient(0,l.bottom,0,l.top)).addColorStop(0,a.global.blueStronger),i.addColorStop(Jv.jP-.1,a.global.blueStronger),i.addColorStop(Jv.jP-.05,a.global.yellowStronger),i.addColorStop(Jv.nQ-.05,a.global.yellowStronger),i.addColorStop(Jv.nQ,a.global.redStronger)),i}}}]}})})}var vm=t(71548),mm=t(68877),gm=t(12290),Zm=3e5;function bm(e){return e>rm.lb?"".concat((0,$v.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,$v.p6)(e)).toLocaleString()," MiB")}function ym(e,n){if(0===n||0===e)return 0;var t=e/n*100;return Math.round(t)}function xm(e){var n,t,i,o,a,l,s,u=e.resources,p=e.onEditStorage,f=u.dataAtom.disk,h=f.currentAtom,v=f.totalAtom,m=(0,Vn.Dv)(h),g=(0,Vn.Dv)(v),Z=(0,Ie.Z)(),b=(0,mm.mE)({variables:{replId:Z}}).data,y="Repl"===(null===b||void 0===b||null===(n=b.repl)||void 0===n?void 0:n.__typename)&&"Team"===(null===(t=b.repl.owner)||void 0===t?void 0:t.__typename),x="Repl"===(null===b||void 0===b||null===(i=b.repl)||void 0===i?void 0:i.__typename)?null===(o=b.repl.owner)||void 0===o?void 0:o.id:void 0,w=(0,mm.Pf)(),k=w.data,C=w.refetch,S="number"===typeof x&&(null===k||void 0===k||null===(a=k.currentUser)||void 0===a?void 0:a.id)===x,I="AccountStorageUtilization"===(null===k||void 0===k||null===(l=k.currentUser)||void 0===l?void 0:l.storageInfo.accountStorageUtilization.__typename)?Number(k.currentUser.storageInfo.accountStorageUtilization.total):0,T="StorageQuota"===(null===k||void 0===k||null===(s=k.currentUser)||void 0===s?void 0:s.storageInfo.storageQuota.__typename)?Number(k.currentUser.storageInfo.storageQuota.quota):0,E=(0,c.useMemo)((function(){return(0,gm.Z)((function(){return C()}),{wait:12e4,maxWait:Zm})}),[C]);return(0,c.useEffect)((function(){var e=!1,n=null,t=function(){var r=(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return e?[2]:[4,E()];case 1:return r.sent(),n=setTimeout(t,Zm),[2]}}))}));return function(){return r.apply(this,arguments)}}();return t(),function(){e=!0,n&&clearTimeout(n),E.isScheduled()&&E.flush()}}),[E,m,g,C]),(0,r.BX)(d.G,{css:lm.wrapper,children:[(0,r.BX)(d.G,{css:lm.section,children:[(0,r.tZ)(ne.xv,{css:lm.sectionHeading,children:"Storage"}),S?(0,r.BX)(d.G,{css:lm.alignedRow,children:[(0,r.tZ)(ne.xv,{color:"dimmest",children:bm(T)}),(0,r.tZ)(ee.hU,{onClick:p,alt:"Edit storage limit",children:(0,r.tZ)(Ad.Z,{})})]}):null]}),(0,r.tZ)(Hv.R,{}),S?(0,r.tZ)(wm,{resources:u,accountUsedInBytes:I,accountQuotaInBytes:T}):null,(0,r.tZ)(km,{resources:u,isOwnRepl:S,isTeamRepl:y})]})}function wm(e){var n=e.resources,t=e.accountUsedInBytes,i=e.accountQuotaInBytes,o=ym(t,i),a=n.dataAtom.disk,l=a.currentAtom,c=a.scratchCurrentAtom,s=(0,Vn.Dv)(l),u=(0,Vn.Dv)(c),f=[{title:"Total",usageDisplayText:"".concat(bm(t)),percentOfQuota:ym(t,i)},{title:"Scratch disk",usageDisplayText:"".concat(bm(1024*u*1024)),percentOfQuota:ym(1024*u*1024,i)},{title:"This Repl",usageDisplayText:"".concat(bm(1024*s*1024)),percentOfQuota:ym(1024*s*1024,i)}];return(0,r.tZ)(le.u,{backgroundColor:p.TV.backgroundDefault,placement:"right-start",maxWidth:300,delay:"none",tooltip:(0,r.BX)(d.G,{css:lm.tooltipContent,children:[(0,r.tZ)(ne.xv,{children:"Your account storage usage."}),(0,r.tZ)(d.G,{css:lm.tooltipSectionsWrapper,children:f.map((function(e,n){return(0,r.BX)(d.G,{css:lm.section,children:[(0,r.BX)(d.G,{css:lm.alignedRow,children:[n>0?(0,r.tZ)(vm.Z,{color:p.TV.outlineDefault,size:16}):null,(0,r.tZ)(ne.xv,{children:e.title})]}),(0,r.BX)(d.G,{css:lm.alignedRow,children:[(0,r.tZ)(ne.xv,{color:"dimmest",children:e.usageDisplayText}),(0,r.BX)(ne.xv,{color:"dimmest",children:["(",e.percentOfQuota,"%)"]})]})]},n)}))})]}),children:(0,r.BX)(d.G,{css:lm.hoverSection,children:[(0,r.tZ)(ne.xv,{children:"Total account"}),(0,r.BX)(d.G,{css:lm.alignedRow,children:[(0,r.BX)(ne.xv,{color:"dimmest",multiline:!1,children:[o,"%"]}),(0,r.tZ)(Im,{percentage:o})]})]})})}function km(e){var n=e.resources,t=e.isOwnRepl,i=e.isTeamRepl,o=n.dataAtom.disk,a=o.currentAtom,l=o.totalAtom,c=1024*(0,Vn.Dv)(a)*1024,s=ym(c,1024*(0,Vn.Dv)(l)*1024);return(0,r.BX)(d.G,{css:lm.section,children:[(0,r.BX)(d.G,{css:lm.alignedRow,children:[t?(0,r.tZ)(vm.Z,{color:p.TV.outlineDefault,size:16}):null,(0,r.tZ)(ne.xv,{children:"This Repl"})]}),(0,r.BX)(ne.xv,{color:"dimmest",children:[bm(c)," ",i?"(".concat(s,"% of total)"):null]})]})}var Cm=(0,de.X)({bar:[p.l0.width(1.5),p.l0.height(7),p.l0.borderRadius(1)]}),Sm=(0,de.X)({wrapper:[p.l0.rowWithGap(1)],dimBar:[Cm.bar,p.l0.backgroundColor.blueDimmest],blueBar:[Cm.bar,p.l0.backgroundColor.blueStronger],yellowBar:[Cm.bar,p.l0.backgroundColor.yellowStronger],redBar:[Cm.bar,p.l0.backgroundColor.redStronger]});function Im(e){var n=e.percentage,t=Math.round(n/10),i=(0,We.Z)(Array(7).fill(Sm.blueBar)).concat((0,We.Z)(Array(2).fill(Sm.yellowBar)),[Sm.redBar]);return(0,r.tZ)(d.G,{css:Sm.wrapper,children:i.map((function(e,n){return(0,r.tZ)(d.G,{css:n<t?i[n]:Sm.dimBar},n)}))})}var Tm=t(70232),Em=t(78810),Rm=t(43573),Gm=t(1446),Pm=t(46550),Dm=t(67952),Bm=t(46589),Um=t(85247),Am=(0,de.X)({self:[p.l0.display.flex,p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween],powerupInfo:[p.l0.colWithGap(2)],powerupLabel:[p.l0.rowWithGap(4),p.l0.align.center],editButtonWrapper:[p.l0.rowWithGap(8),p.l0.align.center],pill:[p.l0.border({style:"none"}),p.l0.backgroundColor.foregroundDimmer,p.l0.color.backgroundRoot,p.l0.maxWidth("fit-content")],loadingPill:[p.l0.border({style:"none"}),p.l0.fontWeight.medium,p.l0.backgroundColor.foregroundDimmer,p.l0.color.backgroundRoot,p.l0.maxWidth("fit-content"),Kc.p.backgroundPulse(p.TV.foregroundDimmer,p.TV.foregroundDimmest),Kc.p.foregroundPulse(p.TV.backgroundRoot,p.TV.backgroundHigher)],editButton:[p.l0.p(16),p.l0.backgroundColor.backgroundHigher]}),Lm=function(e){var n,t=e.goToPowerUpDetails,i=(0,Bm.ZP)().dataAtom.disk,o=i.currentAtom,a=i.totalAtom,l=(0,Ie.Z)(),s=(0,Vn.Dv)(o),u=(0,Vn.Dv)(a),p=(0,c.useState)(!1),f=p[0],h=p[1],v=(0,mm.Pf)({pollInterval:3e3,onError:function(e){Z()}}),m=v.data,g=v.loading,Z=v.stopPolling;(0,c.useEffect)((function(){var e,n,t;return m&&"AccountStorageUtilization"!==(null===(e=m.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)&&Z(),m&&"AccountStorageUtilization"===(null===(n=m.currentUser)||void 0===n?void 0:n.storageInfo.accountStorageUtilization.__typename)&&"ReplStorageUtilization"===(null===(t=m.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===l})))||void 0===t?void 0:t.__typename)&&(h(!0),Z()),function(){Z()}}),[m,l,Z]);var b=null;if(m&&"CurrentUser"===(null===(n=m.currentUser)||void 0===n?void 0:n.__typename)&&"StorageQuota"===m.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===m.currentUser.storageInfo.accountStorageUtilization.__typename){var y=m.currentUser.storageInfo,x=y.storageQuota.quota,w=y.accountStorageUtilization.total;b="0"===x?w:x}var k=1024*s*1024,C=1024*u*1024,S="Bytes",I="".concat((0,$v.fZ)(k,{precision:1,resourceUsageType:S})),T=g||"string"!==typeof b?"".concat((0,$v.fZ)(C,{precision:1,resourceUsageType:S})," Repl"):"".concat((0,$v.fZ)(Number(b),{precision:1,resourceUsageType:S})," Account");return(0,r.BX)(d.G,{css:Am.self,tag:"li",children:[(0,r.BX)(d.G,{css:Am.powerupInfo,children:[(0,r.BX)(d.G,{css:Am.powerupLabel,children:[(0,r.tZ)(Dm.Z,{size:16})," ",(0,r.tZ)(ne.xv,{multiline:!1,children:"Storage"})]}),(0,r.tZ)(ne.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Manage disk space"})]}),(0,r.BX)(d.G,{css:Am.editButtonWrapper,children:[g||!f?(0,r.tZ)(Yv.D,{iconLeft:(0,r.tZ)(se.Z,{size:16}),text:"Loading...",css:Am.loadingPill}):(0,r.tZ)(Yv.D,{text:"".concat(I,"/").concat(T),css:Am.pill}),(0,r.tZ)(ee.hU,{size:24,css:Am.editButton,alt:"Manage storage",onClick:function(){t("storage")},children:(0,r.tZ)(Um.Z,{})})]})]})},Om=t(49118),_m=t(5243),Xm=t(24244),zm=t(65614);function Mm(e){var n=e.onRequestPowerUpModal,t=(0,Ie.Z)(),i=(0,zm.ky)({variables:{replId:t}}),o=i.data;return i.loading?(0,r.tZ)(se.Z,{}):"Repl"!==(null===o||void 0===o?void 0:o.repl.__typename)||"ReplPowerUpTypes"!==o.repl.powerUps.__typename?null:o.repl.powerUps.boost.sku===v.ri.Off?(0,r.tZ)(Pm.r,{"aria-label":"Enable Boost",dataCy:"boost-switch",isSelected:!1,onChange:n}):(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(_m.Z,{variant:o.repl.powerUps.boost.sku,extraText:"Boosted"}),(0,r.tZ)(ee.hU,{size:24,css:[p.l0.p(16),{backgroundColor:p.TV.backgroundHigher}],alt:"Change boost",onClick:n,dataCy:"change-boost-button",children:(0,r.tZ)(Ad.Z,{})})]})}function jm(e){var n=e.context,t=e.goToPowerUpDetails;return(0,r.tZ)(r.HY,{children:(0,r.BX)(d.G,{tag:"li",css:[p.l0.display.flex,p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween],children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(2)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Xm.Z,{size:16})," ",(0,r.tZ)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:(0,r.tZ)(ne.xv,{multiline:!1,children:Gm.S0.boost.name})})]}),(0,r.tZ)(ne.xv,{variant:"small",color:"dimmer",multiline:!1,children:Gm.S0.boost.description})]}),(0,r.tZ)(Mm,{onRequestPowerUpModal:function(){(0,h.j)(h.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"boost",source:n}),t("boost")}})]})})}function Wm(e){var n=e.isAlwaysOn,t=e.isAlwaysOnLoading,i=e.onAlwaysOnChange,o=e.goToPowerUpDetails,a=e.isTeamsRepl,l=e.hasDeployment,c=e.onDeployClick,s=e.canAlwaysOn,f=e.context,h=(0,Rn.U)()("always-on"),v=(0,u.P5)({controlName:"flag-resources-ux-upgrades"});return(0,r.BX)(d.G,{css:[p.l0.colWithGap(16)],tag:"ul","aria-label":"Repl Powerups",children:[s?(0,r.BX)(d.G,{tag:"li",css:[p.l0.colWithGap(8)],children:[(0,r.BX)(d.G,{css:[p.l0.display.flex,p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween],children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(2)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Om.Z,{size:16})," ",(0,r.tZ)(ne.xv,{id:h,multiline:!1,children:Gm.S0["always-on"].name})]}),(0,r.tZ)(ne.xv,{variant:"small",color:"dimmer",multiline:!1,children:Gm.S0["always-on"].description})]}),(0,r.tZ)(Pm.r,{"aria-labelledby":h,dataCy:"ws-always-on-toggle",isSelected:n,onChange:function(){i()},isReadOnly:t,colorway:t?"grey":"primary"})]}),!c||l||a?null:(0,r.BX)(Q.Tg,{elevated:!0,css:Fm.banner,children:[(0,r.tZ)(ne.xv,{css:Fm.text,children:"Ready to share with the world? Try Deployments for faster, more reliable hosting"}),(0,r.tZ)(d.G,{children:(0,r.tZ)(J.zx,{iconLeft:(0,r.tZ)(Th.Z,{}),text:"Deploy",onClick:c})})]})]}):null,v?null:(0,r.tZ)(jm,{context:f,goToPowerUpDetails:o}),v?null:(0,r.tZ)(Lm,{goToPowerUpDetails:o})]})}var Nm,Fm=(0,de.X)({banner:[p.l0.py(8),p.l0.pl(8),p.l0.pr(12),p.l0.rowWithGap(8),p.l0.justify.spaceBetween,p.l0.align.center,p.l0.borderRadius(8),p.l0.border()],text:[p.l0.flex.growAndShrink(1),p.l0.maxWidth("75%")]}),Vm={query:Wv.s8},Hm={query:Mv.BW};!function(e){e.Trial="Trial",e.PowerUp="PowerUp",e.Upgrade="Upgrade",e.ManageStorage="ManageStorage"}(Nm||(Nm={}));var Ym=(0,de.X)({headerContainer:[p.l0.rowWithGap(8)],trialButton:[p.l0.borderRadius(4)],headerAndSubheaderContainer:[p.l0.colWithGap(4)]});function qm(e){var n,t,i=e.resources,o=e.onDeployClick,a=e.context,l=(0,Ie.Z)(),c=(0,Rm.BZ)({variables:{replId:l}}),s=c.data,u=c.refetch,f="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?s.repl:null,h="Team"===(null===f||void 0===f||null===(n=f.owner)||void 0===n?void 0:n.__typename)||Boolean(null===s||void 0===s||null===(t=s.currentUser)||void 0===t?void 0:t.canAlwaysOn);return!f||i.loading?(0,r.tZ)(d.G,{css:[p.l0.center,p.l0.p(16)],children:(0,r.tZ)(se.Z,{})}):(0,r.tZ)(Km,{repl:f,refetch:u,resources:i,onDeployClick:o,canAlwaysOn:h,context:a})}function Km(e){var n,t,i,o,a,s,f,g=e.repl,Z=e.resources,b=e.onDeployClick,y=e.canAlwaysOn,x=e.context,w=(0,l.Z)(c.useState(null),2),k=w[0],C=w[1],S=(0,l.Z)(c.useState(null),2),I=S[0],T=S[1],E=(0,Rm.zu)().data,R=(0,qe.Z)().showError,G=(0,l.Z)((0,Rm.pr)({onCompleted:function(e){"UserError"===e.setAlwaysOn.__typename&&R(e.setAlwaysOn.message)},onError:function(e){return R((0,Nv.Z)(e.message))},refetchQueries:[Vm,Hm]}),2),P=G[0],D=G[1].loading,B=c.useCallback((function(e){switch(e){case"always-on":return"PowerUpCostsType"===g.powerUpCosts.__typename?g.powerUpCosts.alwaysOn.explanation:null;case"private":case"gpu":return null;default:(0,Tm.Z)(e)}}),[g]),U=function(e){L.goTo({step:"power_up_details",powerUpCategory:e})},A=function(){if(!D){var e=!g.isAlwaysOn;P({variables:{replId:g.id,enabled:e},optimisticResponse:{__typename:"RootMutationType",setAlwaysOn:(0,oe.Z)((0,m.Z)({},g),{__typename:"Repl",powerUpCosts:{__typename:"PowerUpCostsType",alwaysOn:{__typename:"PowerUpCostDetailType",cycles:0,explanation:v.Ch.ActivateExistingOrder},gpu:{__typename:"PowerUpCostDetailType",cycles:0,explanation:v.Ch.ActivateExistingOrder}},isAlwaysOn:e})}})}},L=(0,Vv.P)({step:"not_shown"}),O="HostingDeployment"===(null===(n=g.hostingDeployment)||void 0===n?void 0:n.__typename)?g.hostingDeployment.id:null,_="HostingDeployment"===(null===(t=g.hostingDeployment)||void 0===t?void 0:t.__typename)?g.hostingDeployment.currentBuild.id:null,X=Boolean(O)||Boolean(_),z=(0,u.P5)({controlName:"flag-resources-ux-upgrades"}),M=g.currentUserPermissions.changeAlwaysOn===v.fn.Allowed,j=!M||z&&!y,W="Team"===(null===g||void 0===g||null===(i=g.owner)||void 0===i?void 0:i.__typename),N=(null===g||void 0===g||null===(o=g.owner)||void 0===o?void 0:o.id)===(null===E||void 0===E||null===(a=E.currentUser)||void 0===a?void 0:a.id),F=null===E||void 0===E||null===(s=E.currentUser)||void 0===s?void 0:s.userSubscriptionType,V=(0,pu.Q)(),H=(0,vu.D)().isEligible,Y=(0,hu.Tf)({context:v.$X.UpgradeCta}),q=function(e){var n=e.cpuStatus,t=e.ramStatus;return"warning"===t||"danger"===t?"for 8x RAM":"warning"===n||"danger"===n?"for 8x CPU":""}({cpuStatus:(0,Vn.Dv)(Z.dataAtom.cpu.status),ramStatus:(0,Vn.Dv)(Z.dataAtom.ram.status)});return(0,r.tZ)("div",{css:{overflow:"auto",maxHeight:"80vh"},children:"not_shown"!==L.currentStep.step?(0,r.tZ)(Fv.s,(0,oe.Z)((0,m.Z)({},L),{analyticsContext:x,onRequestPowerUp:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(I){case"always-on":A();break;case"gpu":case"private":case"boost":case"hosting_tier":case null:break;default:(0,Tm.Z)(I)}return[2]}))}))})):(0,r.BX)(d.G,{css:[p.l0.p(8),p.l0.colWithGap(8)],children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[z?(0,r.BX)(r.HY,{children:[(0,r.BX)(d.G,{css:Ym.headerAndSubheaderContainer,children:[(0,r.BX)(d.G,{css:Ym.headerContainer,children:[(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:"Resources"}),(0,r.tZ)(Jm,{resourceTier:Qm({isTeamRepl:W,isReplOwner:N,plan:F})})]}),(0,r.tZ)(ne.xv,{color:"dimmest",children:"Resources for cloud development environment"})]}),(0,r.tZ)(cm,{resources:Z,onEditCompute:function(){return U("boost")},canEditCompute:N||M}),(0,r.tZ)(xm,{resources:Z,onEditStorage:function(){return U("storage")}})]}):(0,r.tZ)($m,{resources:Z}),j?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(Hv.R,{css:p.l0.mt(8)}),(0,r.tZ)(ne.xv,{multiline:!1,css:{fontWeight:p.TV.fontWeightMedium},children:"Power ups"}),(0,r.tZ)(Wm,{isTeamsRepl:"Team"===(null===(f=g.owner)||void 0===f?void 0:f.__typename),hasDeployment:X,isAlwaysOn:g.isAlwaysOn,isAlwaysOnLoading:D||null==B("always-on"),onAlwaysOnChange:function(){var e=B("always-on");T("always-on"),null==e||D?R("You're too fast for us! Please try again in a moment."):((0,h.j)(h.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"always-on",setting:!g.isAlwaysOn,source:x,costExplanation:e}),g.isAlwaysOn||"NEEDS_CYCLES"!==e&&"SPEND_CYCLES"!==e?A():U("always-on"))},showManageStorageModal:function(){return C(Nm.ManageStorage)},goToPowerUpDetails:function(e){return L.goTo({step:"power_up_details",powerUpCategory:e})},onDeployClick:b,canAlwaysOn:y,context:x})]}),N&&H?(0,r.tZ)(J.zx,{colorway:"blurple",iconLeft:(0,r.tZ)(Cs.Z,{}),text:"Start ".concat(V," trial ").concat(q),onClick:function(){return C(Nm.Trial)},css:Ym.trialButton}):null,N&&"HACKER_PRO"!==F&&!H?(0,r.tZ)(J.zx,{colorway:"primary",iconLeft:(0,r.tZ)(Cs.Z,{}),text:"Upgrade to ".concat(V," ").concat(q),onClick:function(){(0,h.j)(h.U3.UPGRADE_SELECTED,{source:x}),C(Nm.Upgrade)}}):null]}),(0,r.tZ)(jv.Z,{context:x,isOpen:k===Nm.PowerUp,uponPurchaseGoTo:"workspace",replTitle:g.title,onRequestClose:function(){C(null)},onRequestPowerUp:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:switch(I){case"always-on":A();break;case"gpu":case"private":case"boost":case"hosting_tier":case null:break;default:(0,Tm.Z)(I)}return[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 1:return e.sent(),C(null),[2]}}))})),powerUp:null!==I&&void 0!==I?I:"boost"},k),(0,r.tZ)(qv.s,{isOpen:k===Nm.ManageStorage,onRequestClose:function(){return C(null)}}),(0,r.tZ)(Ss.Z,{initialTab:"default",isOpen:k===Nm.Upgrade,onRequestClose:function(){return C(null)},uponPurchaseGoTo:"workspace",context:x,replTitle:g.title,allowCyclesPage:!0}),(0,r.tZ)(He.u,{isOpen:k===Nm.Trial,onRequestClose:function(){return C(null)},css:Y,children:(0,r.tZ)(fu.a,{onClaim:function(){return C(null)},onClose:function(){return C(null)},context:v.$X.Workspace})}),(0,r.tZ)(Fe(),{id:"9428185b7782bf0d",children:".always-on-indicator.jsx-9428185b7782bf0d{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}"})]})})}function $m(e){var n=e.resources;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(ne.xv,{multiline:!1,css:{fontWeight:p.TV.fontWeightMedium},children:"Resources"}),(0,r.tZ)(Kv.Z,{inactive:!1,resources:n}),(0,r.BX)(ne.xv,{multiline:!0,color:"dimmer",variant:"small",children:["These resources are for the cloud machine that hosts this Repl."," ",(0,r.tZ)("a",{href:"https://blog.replit.com/repl-resources",target:"_blank",children:"Learn more"})," ","about resource limits."]})]})}function Qm(e){var n=e.isTeamRepl,t=e.isReplOwner,r=e.plan;return n?"team":t&&"HACKER_PRO"===r?"member":t&&null===r?"free":"hidden"}function Jm(e){switch(e.resourceTier){case"free":return(0,r.tZ)(Yv.D,{text:"Free",colorway:"grey"});case"member":return(0,r.tZ)(Yv.D,{text:Em.ii,colorway:"purple"});case"team":return(0,r.tZ)(Yv.D,{text:"Team",colorway:"green"});default:return null}}var eg=(0,de.X)({base:[p.l0.position.absolute,{width:12,height:12,borderRadius:"50%",top:-6,right:-6,outline:"1px solid "+p.TV.backgroundRoot,borderWidth:3,borderStyle:"solid"}],warningColors:[{backgroundColor:p.TV.orangeStronger,borderColor:p.TV.orangeDimmest}],dangerColors:[{backgroundColor:p.TV.redStronger,borderColor:p.TV.redDimmest}]});function ng(e){var n=e.resources.dataAtom,t=n.cpu,i=n.ram,o=(0,$n.Z)((function(){return(0,Fn.cn)((function(e){var n=e(t.status),r=e(i.status);return"danger"===n||"danger"===r?"danger":"warning"===n||"warning"===r?"warning":"ok"}))}),[t.status,i.status]),a=(0,Vn.Dv)(o);return"ok"===a?null:(0,r.tZ)(d.G,{css:[eg.base,"warning"===a&&eg.warningColors,"danger"===a&&eg.dangerColors]})}var tg=(0,de.X)({popover:[p.l0.width(360)],buttonWrapper:[p.l0.position.relative],button:[p.l0.height(32),p.l0.width(32),p.l0.borderRadius(6)]});function rg(e){var n=e.onDeployClick,t=(0,l.Z)(c.useState(!1),2),i=t[0],o=t[1],a=(0,Bm.ZP)();return(0,r.BX)(_e.x,{isOpen:i,onOpenChange:function(e){o(e),e&&(0,h.j)(h.U3.REPL_RESOURCES_OPENED)},placement:"bottom start",label:"Repl resources",noArrow:!0,css:tg.popover,children:[(0,r.tZ)(ee.hU,{"aria-label":"Repl resources",alt:"Repl resources","aria-expanded":i,dataCy:"repl-resources-button",css:tg.button,children:(0,r.BX)(d.G,{css:tg.buttonWrapper,children:[(0,r.tZ)(zv.Z,{size:16}),(0,r.tZ)(ng,{resources:a})]})}),(0,r.tZ)(d.G,{children:(0,r.tZ)(qm,{resources:a,onDeployClick:n,context:"repl_resources"})})]})}var ig=t(86764);function og(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentDekstopUserLayoutsUserWorkspaceLayout on UserWorkspaceLayout {\n    id\n    name\n    state\n  }\n"]);return og=function(){return e},e}function ag(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentDekstopUserLayoutsCurrentUser on CurrentUser {\n    id\n    workspaceLayouts {\n      ...ReplEnvironmentDekstopUserLayoutsUserWorkspaceLayout\n    }\n  }\n  ","\n"]);return ag=function(){return e},e}function lg(){var e=(0,g.Z)(["\n  query ReplEnvironmentDekstopUserLayouts {\n    currentUser {\n      ...ReplEnvironmentDekstopUserLayoutsCurrentUser\n    }\n  }\n  ","\n"]);return lg=function(){return e},e}function cg(){var e=(0,g.Z)(["\n  mutation ReplEnvironmentDekstopCreateUserLayout(\n    $input: CreateUserWorkspaceLayoutInput!\n  ) {\n    createUserWorkspaceLayout(input: $input) {\n      ... on UserWorkspaceLayout {\n        ...ReplEnvironmentDekstopUserLayoutsUserWorkspaceLayout\n      }\n    }\n  }\n  ","\n"]);return cg=function(){return e},e}function sg(){var e=(0,g.Z)(["\n  mutation ReplEnvironmentDekstopUpdateUserLayout(\n    $input: UpdateUserWorkspaceLayoutInput!\n  ) {\n    updateUserWorkspaceLayout(input: $input) {\n      ... on UserWorkspaceLayout {\n        ...ReplEnvironmentDekstopUserLayoutsUserWorkspaceLayout\n      }\n    }\n  }\n  ","\n"]);return sg=function(){return e},e}function ug(){var e=(0,g.Z)(["\n  mutation ReplEnvironmentDekstopDeleteUpdateUserLayout(\n    $input: DeleteUserWorkspaceLayoutInput!\n  ) {\n    deleteUserWorkspaceLayout(input: $input) {\n      ... on CurrentUser {\n        id\n        workspaceLayouts {\n          id\n        }\n      }\n    }\n  }\n"]);return ug=function(){return e},e}var dg={},pg=(0,Z.Ps)(og()),fg=(0,Z.Ps)(ag(),pg),hg=(0,Z.Ps)(lg(),fg);var vg=(0,Z.Ps)(cg(),pg);var mg=(0,Z.Ps)(sg(),pg);var gg=(0,Z.Ps)(ug());function Zg(){var e,n=function(e){var n=(0,m.Z)({},dg,e);return M.a(hg,n)}({ssr:!1,fetchPolicy:"cache-and-network"}),t=n.data,r=n.loading,i=n.client;return{loading:r,layouts:null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.workspaceLayouts,addLayout:function(e){t&&i.writeQuery({query:hg,data:(0,ut.ZP)(t,(function(n){n.currentUser&&n.currentUser.workspaceLayouts.push(e)}))})}}}function bg(e){var n=e.onCreate,t=(0,l.Z)(function(e){var n=(0,m.Z)({},dg,e);return b.D(vg,n)}({onCompleted:function(e){var t="UserWorkspaceLayout"===e.createUserWorkspaceLayout.__typename?e.createUserWorkspaceLayout:null;t&&n(t)}}),2),r=t[0],i=t[1].loading,o=oc(),a=(0,c.useCallback)((function(e){var n=o();r({variables:{input:{name:e,state:n}}})}),[r,o]);return{loading:i,create:a}}function yg(){var e=(0,l.Z)(function(e){var n=(0,m.Z)({},dg,e);return b.D(mg,n)}(),2),n=e[0],t=e[1].loading,r=oc(),i=(0,c.useCallback)((function(e){var t=r();n({variables:{input:{id:e,state:t}}})}),[n,r]);return{loading:t,update:i}}function xg(e){var n=e.onDelete,t=(0,l.Z)(function(e){var n=(0,m.Z)({},dg,e);return b.D(gg,n)}({onCompleted:function(e){"CurrentUser"===e.deleteUserWorkspaceLayout.__typename&&n()}}),2),r=t[0];return{loading:t[1].loading,deleteLayout:(0,c.useCallback)((function(e){r({variables:{input:{id:e}}})}),[r])}}var wg=t(97189),kg=Ou.Type.String(),Cg=(Ou.Type.String(),Ou.Type.Object({width:Ou.Type.Number(),height:Ou.Type.Number()})),Sg=Ou.Type.Object({x:Ou.Type.Number(),y:Ou.Type.Number()}),Ig=Ou.Type.Intersect([Sg,Cg]),Tg=Ou.Type.Object({top:Ou.Type.Number(),bottom:Ou.Type.Number(),left:Ou.Type.Number(),right:Ou.Type.Number()}),Eg=Ou.Type.Object({id:Ou.Type.String(),type:Ou.Type.Literal("paneGroup"),panes:Ou.Type.Array(kg),percent:Ou.Type.Number(),activeIndex:Ou.Type.Number()}),Rg=Ou.Type.Object({id:Ou.Type.String(),type:Ou.Type.Literal("floatingPaneGroup"),panes:Ou.Type.Array(kg),activeIndex:Ou.Type.Number(),rect:Ig}),Gg=Ou.Type.Recursive((function(e){return Ou.Type.Object({type:Ou.Type.Literal("split"),stacked:Ou.Type.Boolean(),children:Ou.Type.Array(Ou.Type.Union([Eg,e])),percent:Ou.Type.Number()})})),Pg=(Ou.Type.Union([Eg,Gg]),Ou.Type.Object({tiling:Ou.Type.Union([Gg,Eg,Ou.Type.Null()]),floating:Ou.Type.Array(Rg)})),Dg=(Ou.Type.Union([Ou.Type.Literal("left"),Ou.Type.Literal("right")]),Ou.Type.Object({inset:Ou.Type.Optional(Tg),size:Cg,gap:Ou.Type.Number(),headerHeight:Ou.Type.Number()}),Ou.Type.Union([Ou.Type.Literal("above"),Ou.Type.Literal("below"),Ou.Type.Literal("leftOf"),Ou.Type.Literal("rightOf")])),Bg=(Ou.Type.Union([Dg,Ou.Type.Literal("replace")]),Ou.Type.Union([Ou.Type.Literal("up"),Ou.Type.Literal("left"),Ou.Type.Literal("right"),Ou.Type.Literal("down")]),Ou.Type.Number({exclusiveMinimum:0,exclusiveMaximum:100})),Ug=Ou.Type.Object({sidebarPercent:Ou.Type.Optional(Bg),layout:Pg,data:Ou.Type.Record(Ou.Type.String(),Ou.Type.Object({type:Ou.Type.String()}))});function Ag(e,n){var t,r=null;try{r=Fu.B4.Decode(Ug,e)}catch(m){return null}var i={layout:r.layout,data:{},type:"saved",sidebarPercent:null!==(t=r.sidebarPercent)&&void 0!==t?t:15},o=new Set,a=!0,c=!1,s=void 0;try{for(var u,d=Object.entries(r.data)[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=(0,l.Z)(u.value,2),f=p[0],h=p[1],v=n(h.type,h);v?i.data[f]=v:o.add(f)}}catch(g){c=!0,s=g}finally{try{a||null==d.return||d.return()}finally{if(c)throw s}}return(0,ut.ZP)(i,(function(e){var n=!0,t=!1,r=void 0;try{for(var i,a=o[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;ci(e.layout,c)}}catch(g){t=!0,r=g}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}var s=!0,u=!1,d=void 0;try{for(var p,f=Object.entries(e.data)[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var h=(0,l.Z)(p.value,2),v=h[0],m=h[1];("commands"===m.type||"codeEditor"===m.type&&!m.data.path)&&(delete e.data[v],ci(e.layout,v))}}catch(g){u=!0,d=g}finally{try{s||null==f.return||f.return()}finally{if(u)throw d}}}))}var Lg=t(10210);function Og(){var e=(0,c.useState)(!1),n=e[0],t=e[1],r=(0,Ie.Z)(),i=(0,re.Z)(),o=i.dotReplit,a=i.fs,l=(0,Dp.Z)(),s=ao(Oo),u=(0,Ia.T)(),d=(0,Ta.Z)().preferences.isLayoutStacked,p=(0,za.cR)();return{reset:(0,c.useCallback)((0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return t(!0),[4,(0,Lg.W)({fs:a,dotReplit:o,replId:r})];case 1:return e=n.sent().entrypoint,l.current?(t(!0),s({replId:r,isStacked:d,isHTML:u,isExtension:p,entrypoint:e}),[2]):[2]}}))})),[r,a,o,s,l,d,u,p]),reseting:n}}var _g={root:[te.gU.filledAndOutlined,p.l0.borderRadius("full"),p.l0.center,p.l0.width(20),p.l0.height(20)],selected:[p.l0.borderRadius("full"),p.l0.width(12),p.l0.height(12),p.l0.backgroundColor.accentPrimaryDefault]};function Xg(e){return(0,r.tZ)(d.G,{css:_g.root,children:e.selected?(0,r.tZ)(d.G,{css:_g.selected}):null})}var zg=[p.l0.align.center,p.l0.flex.row,p.l0.height(32),p.l0.textAlign.left,p.l0.width("100%"),p.l0.position.relative],Mg=[p.l0.reset.button,te.gU.nofill,p.l0.rowWithGap(8),p.l0.cursor.pointer,p.l0.textAlign.left,p.l0.align.center,p.l0.borderRadius(0),p.l0.px(8)],jg=(0,de.X)({root:[Mg,zg]});function Wg(e){var n=e.onClick,t=e.selected,i=Og(),o=i.reset,a=i.reseting;return(0,r.BX)(d.G,{disabled:a,tag:"button",css:jg.root,onClick:function(){o(),n()},children:[(0,r.tZ)(Xg,{selected:t}),(0,r.tZ)(ne.xv,{children:"Default"})]})}var Ng=(0,so.$)(["fontStyle"]),Fg=Ng.cssVars,Vg=Ng.styleTokens,Hg=(0,de.X)({root:zg,content:[Mg,p.l0.flex.growAndShrink(1),p.l0.position.relative,p.l0.height("100%"),{fontStyle:Vg.fontStyle}],text:[p.l0.flex.growAndShrink(1)],right:[p.l0.position.absolute,p.l0.height("100%"),p.l0.right(0),p.l0.pr(4),p.l0.rowWithGap(4),p.l0.align.center]});function Yg(e){var n=e.layout,t=e.selected,i=e.onClick,o=e.onDelete,a=yg(),l=a.update,s=a.loading,u=xg({onDelete:o}).deleteLayout,p=(0,qn.Se)(),h=(0,c.useMemo)((function(){return Ag(n.state,p.decode)}),[n.state,p]),v=io(Kr),m=ao(ri),g=(0,c.useMemo)((function(){return!!t&&!(pt()(null===h||void 0===h?void 0:h.data,v.data)&&pt()(null===h||void 0===h?void 0:h.layout,v.layout))}),[v,h,t]);return h?(0,r.BX)(d.G,{css:Hg.root,style:(0,f.Z)({},Fg.fontStyle,g?"italic":"normal"),children:[(0,r.BX)(d.G,{tag:"button",css:Hg.content,onClick:function(){m(h),i()},children:[(0,r.tZ)(Xg,{selected:t}),(0,r.tZ)(ne.xv,{multiline:!1,css:Hg.text,children:n.name})]}),(0,r.BX)(d.G,{css:Hg.right,children:[g?(0,r.tZ)(ee.hU,{disabled:s,alt:"Save layout",onClick:function(){return l(n.id)},tooltipHidden:!0,children:s?(0,r.tZ)(se.Z,{}):(0,r.tZ)(Sn.Z,{})}):null,(0,r.tZ)(ee.hU,{alt:"Delete layout",onClick:function(){return u(n.id)},tooltipHidden:!0,children:(0,r.tZ)(Xd.Z,{})})]})]}):null}var qg=(0,de.X)({root:[p.l0.colWithGap(8),p.l0.p(8)],name:[p.l0.colWithGap(4)]});function Kg(e){var n=e.onCreate,t=e.onCancel,i=bg({onCreate:n}),o=i.create,a=i.loading,l=(0,c.useState)(""),s=l[0],u=l[1],p=(0,c.useId)(),f=(0,Ma.Z)(t),h=(0,Op.Z)((function(){return f.current()}),[f]);return(0,r.BX)(d.G,{innerRef:h,css:qg.root,tag:"form",onSubmit:function(e){e.preventDefault(),s&&!a&&o(s)},children:[(0,r.BX)(d.G,{css:qg.name,children:[(0,r.tZ)(d.G,{tag:"label",htmlFor:p,children:(0,r.tZ)(ne.xv,{variant:"small",color:"dimmer",children:"Save current layout as:"})}),(0,r.tZ)(Hp.II,{autoFocus:!0,placeholder:"Layout name",id:p,value:s,onChange:function(e){return u(e.currentTarget.value)},onKeyDown:function(e){"Escape"===e.key&&t()}})]}),(0,r.tZ)(J.zx,{type:"submit",text:"Save",colorway:"primary"})]})}var $g,Qg=(0,so.$)(["color"]),Jg=Qg.cssVars,eZ=Qg.styleTokens,nZ=(0,de.X)({root:[p.l0.reset.button,te.gU.nofill,p.l0.height(32),p.l0.pl(4),p.l0.pr(2),p.l0.align.center,p.l0.cursor.pointer,p.l0.borderRadius(6),p.l0.rowWithGap(2),($g={},(0,f.Z)($g,Jg.color,p.TV.foregroundDimmer),(0,f.Z)($g,"color",eZ.color),(0,f.Z)($g,"&:hover",(0,f.Z)({},Jg.color,p.TV.foregroundDefault)),$g)],popover:[p.l0.p(8)],header:[p.l0.p(4),p.l0.rowWithGap(4)]});function tZ(){var e=(0,c.useState)(null),n=e[0],t=e[1];return(0,r.BX)(_e.x,{label:"Workspace",noArrow:!0,placement:"bottom left",children:[function(e){var n=e.ref,t=(0,bs.Z)(e,["ref"]);return(0,r.BX)(d.G,(0,oe.Z)((0,m.Z)({tag:"button",innerRef:n,css:nZ.root},t),{children:[(0,r.tZ)(wg.Z,{}),(0,r.tZ)(vs.Z,{size:12})]}))},(0,r.tZ)(oZ,{selectedLayout:n,setSelectedLayout:t})]})}var rZ=[p.l0.align.center,p.l0.flex.row,p.l0.height(32),p.l0.textAlign.left,p.l0.width("100%"),p.l0.position.relative],iZ=(0,de.X)({root:[p.l0.width(220)],header:[rZ,te.gU.nofill,p.l0.rowWithGap(8),p.l0.px(8),p.l0.reset.button,p.l0.cursor.pointer,{borderRadius:"8px 8px 0 0"}],footer:[rZ,te.gU.nofill,p.l0.rowWithGap(8),p.l0.px(8),p.l0.reset.button,p.l0.cursor.pointer,p.l0.border({direction:"bottom",color:p.TV.outlineDimmer}),{borderRadius:"0 0 8px 8px"}],divider:[p.l0.height(1),{margin:4,backgroundColor:p.TV.outlineDimmest}],text:[p.l0.flex.growAndShrink(1)],loading:[p.l0.p(32),p.l0.center]});function oZ(e){var n=e.selectedLayout,t=e.setSelectedLayout,i=(0,Pc.gf)(gv.id),o=ic(),a=(0,Hs.Z)(o.isOpen),l=Zg(),s=l.layouts,u=l.loading,p=l.addLayout,f=[{type:"toggleSidebar"},{type:"defaultLayout"}].concat((0,We.Z)((null!==s&&void 0!==s?s:[]).map((function(e){return{type:"layout",layout:e}}))),[{type:"createLayout"}]),h=(0,c.useState)(!1),v=h[0],m=h[1],g=o.toggle;return(0,Pc.Il)((function(){return[gv.id,function(){return g()}]}),[g]),(0,r.tZ)(d.G,{css:iZ.root,role:"menu",tabIndex:-1,children:u&&!s?(0,r.tZ)(d.G,{css:iZ.loading,children:(0,r.tZ)(se.Z,{})}):(0,r.tZ)(r.HY,{children:f.map((function(e,o){if("divider"===e.type)return(0,r.tZ)(d.G,{css:iZ.divider},e.type+o);if("toggleSidebar"===e.type)return(0,r.BX)(d.G,{tag:"button",css:iZ.header,onClick:function(){return g()},children:[(0,r.tZ)(Wa.Z,{}),(0,r.BX)(ne.xv,{css:iZ.text,children:[a?"Close":"Open"," Sidebar"]}),i?(0,r.tZ)(Pc.bM,{small:!0,keyCombo:i}):null]},e.type);if("defaultLayout"===e.type)return(0,r.tZ)(Wg,{onClick:function(){return t(null)},selected:null===n},e.type);if("layout"===e.type){var l=e.layout;return(0,r.tZ)(Yg,{layout:l,onClick:function(){return t(l.id)},onDelete:function(){l.id===n&&t(null)},selected:l.id===n},l.id)}return v?(0,r.tZ)(Kg,{onCancel:function(){m(!1)},onCreate:function(e){p(e),m(!1),t(e.id)}},e.type):(0,r.BX)(d.G,{tag:"button",css:iZ.footer,onClick:function(){return m(!0)},children:[(0,r.tZ)(Ad.Z,{}),(0,r.tZ)(ne.xv,{css:iZ.text,children:"Create a new layout..."}),(0,r.tZ)(Lu.Z,{size:12})]},e.type)}))})})}var aZ=(0,de.X)({root:[p.l0.rowWithGap(8),p.l0.align.center]});function lZ(e){return(0,r.BX)(d.G,{css:aZ.root,children:[(0,r.tZ)(ne.xv,{multiline:!1,children:e.text}),(0,r.tZ)(Pc.bM,{small:!0,keyCombo:e.shortcut})]})}var cZ=(0,de.X)({root:[p.l0.reset.button,te.gU.nofill,p.l0.height(32),p.l0.width(32),p.l0.center,p.l0.cursor.pointer,p.l0.borderRadius(6),{"& > div":{opacity:.75,transition:"opacity 0.1s"},"&:hover > div":{opacity:1}}],iconContainer:[p.l0.flex.row,p.l0.align.center,{height:14,width:16,border:"1px solid ".concat(p.TV.foregroundDefault),borderRadius:p.TV.borderRadius2}],icon:[{height:"100%",borderRight:"1px solid ".concat(p.TV.foregroundDefault),transition:"0.1s ease-out width, 0.1s background-color"}]});function sZ(){var e=ic(),n=(0,Hs.Z)(e.isOpen),t=e.toggle;(0,Pc.Il)((function(){return[gv.id,function(){return t()}]}),[t]);var i=(0,Pc.gf)(gv.id),o=(n?"Close":"Open")+" sidebar",a=(0,l.Z)(c.useState(!1),2),s=a[0],u=a[1],f=i?(0,r.tZ)(lZ,{shortcut:i,text:o}):o;return(0,r.tZ)(le.u,{tooltip:f,placement:"bottom-start",children:(0,r.tZ)(d.G,{tag:"button",alt:o,css:cZ.root,"aria-label":"Toggle sidebar","aria-expanded":n,onClick:function(){t(),u(!1)},onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},children:(0,r.BX)(d.G,{css:cZ.iconContainer,children:[(0,r.tZ)(d.G,{css:cZ.icon,style:{width:n&&!s||!n&&s?"40%":"20%",backgroundColor:n?p.TV.foregroundDefault:"transparent"}}),(0,r.tZ)(d.G,{})]})})})}function uZ(e){var n=e.repl,t=e.currentUser,i=(0,Xv.Z)(),o=xl(),a=(0,u.P5)({controlName:"flag-user-layouts",logFlagToAnalytics:!1});return(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.start],children:[(0,r.tZ)(ig.Z,{}),(0,r.tZ)(d.G,{css:p.l0.noDragRegion,children:a?(0,r.tZ)(tZ,{}):(0,r.tZ)(sZ,{})}),(0,r.tZ)(d.G,{css:p.l0.noDragRegion,children:i?(0,r.tZ)(_v,{}):(0,r.tZ)(js,{})}),(0,r.tZ)(d.G,{css:[p.l0.flex.shrink(1),p.l0.flex.row,p.l0.maxWidth(530),p.l0.align.center,{"& > span":[p.l0.viewStyle,p.l0.flex.shrink(1)]},p.l0.noDragRegion],children:(0,r.tZ)(gs,{repl:n,onDeployClick:function(){o({pane:{type:"deployments"}})}})}),(0,r.tZ)(d.G,{css:p.l0.noDragRegion,children:(0,r.tZ)(rg,{onDeployClick:function(){return o({pane:{type:"deployments"}})}})}),(null===t||void 0===t?void 0:t.isFirewallMode)?(0,r.tZ)(d.G,{css:[p.l0.noDragRegion,p.l0.pl(8)],children:(0,r.tZ)(Zs.Z,{isWorkspace:!0})}):null]})}var dZ,pZ=t(70505),fZ=t(89862),hZ=t(54008),vZ=t(42317),mZ=t(75665),gZ=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""},ZZ=function(e){var n=e.hideModal,t=(0,re.Z)().dotReplit,i=(0,Dp.Z)(),o=(0,qe.Z)().showError,a=(0,l.Z)(c.useState(!1),2),s=a[0],u=a[1],f=(0,l.Z)(c.useState(""),2),h=f[0],v=f[1],m=El(),g=c.useCallback((function(){return o("Failed to update run command, please try again or contact support")}),[o]),Z=(0,l.Z)(c.useState(null),2),b=Z[0],y=Z[1];c.useEffect((function(){var e=function(){var e=(0,Hn.Z)((function(){var e,n,r;return(0,Yn.__generator)(this,(function(o){switch(o.label){case 0:return[4,t.getConfig()];case 1:return n=o.sent(),i.current?(n.errorMessage?y({error:n.error,errorMessage:n.errorMessage}):y(null),r=null===n||void 0===n||null===(e=n.config)||void 0===e?void 0:e.run,v(gZ(r)),[2]):[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[t,i]);var x=c.useCallback((0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:if(!i.current)return[2];r.label=1;case 1:return r.trys.push([1,3,4,5]),e=h?(0,mZ.KQ)(h):(0,mZ.xz)("run"),u(!0),[4,t.updateDotReplit([e])];case 2:return r.sent(),i.current?(n(),[3,5]):[2];case 3:return r.sent(),g(),[3,5];case 4:return i.current&&u(!1),[7];case 5:return[2]}}))})),[h,g,t,n]);return(0,r.BX)(d.G,{css:[p.l0.colWithGap(8),p.l0.p(2),s&&p.l0.cursor.progress],children:[(0,r.tZ)(ne.h4,{level:1,variant:"text",css:[p.l0.fontWeight.normal,p.l0.color.foregroundDimmer],children:"Run Command"}),b?(0,r.tZ)(ne.xv,{multiline:!1,children:b.errorMessage}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Hp.II,{value:h,onChange:function(e){return v(e.target.value)},spellCheck:!1,placeholder:"Command to run"}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.mt(12)],children:[(0,r.tZ)(J.zx,{onClick:function(){n(),m({path:vZ.Z})},text:"Advanced"}),(0,r.tZ)(d.G,{css:p.l0.flex.grow(1)}),(0,r.tZ)(J.zx,{colorway:"blue",text:"Save",onClick:x})]})]})]})};!function(e){e[e.Closed=0]="Closed",e[e.MenuOpen=1]="MenuOpen",e[e.EditorOpen=2]="EditorOpen"}(dZ||(dZ={}));var bZ=(0,i.iv)([p.l0.position.relative,p.l0.noDragRegion,(0,f.Z)({},p.BC.min("tabletMin"),[p.l0.position.absolute,p.l0.right(-28)])]),yZ=(0,i.iv)([p.l0.color.foregroundDimmest,p.l0.height(32),p.l0.borderRadius(6)]),xZ=(0,i.iv)([p.l0.maxWidth(300),p.l0.backgroundColor.backgroundHigher,p.l0.borderRadius(8)]),wZ=(0,i.iv)([p.l0.borderRadius(6),p.l0.overflow("hidden")]);function kZ(e){var n,t=e.runner,i=e.shortcut,o=(0,Re.R3)(),a=ll(),s=(0,pZ.T)(),u=c.useMemo((function(){return(0,fZ.Z)(s||null,a.map((function(e){return e.filePath||""})),o,(null===s||void 0===s?void 0:s.entrypoint)||"")}),[o,a,s]),f=(0,c.useState)(void 0),h=f[0],v=f[1];c.useEffect((function(){(u.length>0&&!h||h&&!u.find((function(e){return e.runner.id===h.runner.id&&e.filePath===h.filePath})))&&v(u[0])}),[u]);var m=(0,l.Z)(c.useState(dZ.Closed),2),g=m[0],Z=m[1],b=(0,Fc.e)(Vc.y.Run),y=[];return(n=y).push.apply(n,(0,We.Z)(u.map((function(e,n){return(0,r.tZ)(hZ.ck,{"aria-label":"Run ".concat(e.filePath," (").concat(e.runner.name,")"),children:(0,r.tZ)(d.G,{css:p.l0.rowWithGap(8),children:(0,r.BX)(ne.xv,{multiline:!1,children:["Run ",e.filePath,"\xa0(",e.runner.name,")"]})})},n)})))),y.push((0,r.tZ)(hZ.ck,{"aria-label":"custom",children:(0,r.tZ)(d.G,{css:p.l0.rowWithGap(8),children:(0,r.tZ)(ne.xv,{multiline:!1,children:"Custom..."})})},"custom")),(0,r.BX)(d.G,{css:p.l0.flex.row,children:[(0,r.BX)(_e.x,{onOpenChange:function(e){Z(e?dZ.MenuOpen:dZ.Closed)},isOpen:g!==dZ.Closed,label:"Run Options",noArrow:!0,children:[(0,r.tZ)(ie.ZP,{shortcut:i,runner:t,runConfig:h,disableTooltip:null===b||void 0===b?void 0:b.isActive}),(0,r.BX)(d.G,{css:xZ,children:[g===dZ.MenuOpen&&(0,r.tZ)(hZ.v2,{css:wZ,label:"Configure Repl run",onAction:function(e){if("custom"===e)Z(dZ.EditorOpen);else{Z(dZ.Closed);var n=u[Number(e)];v(n),t.run(n)}},children:y}),g===dZ.EditorOpen&&(0,r.tZ)(ZZ,{hideModal:function(){return Z(dZ.Closed)}})]})]}),(0,r.tZ)(d.G,{css:bZ,children:(0,r.tZ)(ee.hU,{alt:"Configure Repl run",onClick:function(){Z((function(e){return e===dZ.Closed?dZ.MenuOpen:dZ.Closed}))},css:yZ,children:(0,r.tZ)(vs.Z,{})})})]})}var CZ=t(95861),SZ=t(23556);function IZ(e,n){var t=n.onReceiveAnnotationUpdate,r=void 0===t?function(){}:t,i=(0,qe.Z)().showError,o=(0,l.Z)(c.useState(null),2),a=o[0],s=o[1],u=(0,CZ.xT)({variables:{replId:e}}),d=function(){var e,n=null===(e=u.data)||void 0===e?void 0:e.currentUser;return n?{user:{__typename:"User",id:n.id,username:n.username,image:n.image}}:null},p=function(n,t){var r=n.readQuery({query:CZ.yi,variables:{replId:e}});if(!r)throw new Error("expected data");if("Repl"!==r.repl.__typename)throw new Error("expected repl");var i=[],o=r.repl.annotationAnchors,a=o.findIndex((function(e){return e.id===t.id}));i=-1===a?(0,We.Z)(o).concat([t]):(0,We.Z)(o.slice(0,a)).concat([t],(0,We.Z)(o.slice(a+1))),n.writeQuery({query:CZ.yi,variables:{replId:e},data:(0,oe.Z)((0,m.Z)({},r),{repl:(0,oe.Z)((0,m.Z)({},r.repl),{annotationAnchors:i})})})},f=(0,l.Z)((0,CZ.AS)({onError:function(e){return i(e.message)},update:function(e,n){var t;if(n.errors)n.errors.forEach((function(e){return i(e.message)}));else{var r=null===(t=n.data)||void 0===t?void 0:t.createAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&p(e,r))}}}),1),h=f[0],v=(0,l.Z)((0,CZ.gE)({onError:function(e){return i(e.message)},update:function(e,n){var t;if(n.errors)n.errors.forEach((function(e){return i(e.message)}));else{var r=null===(t=n.data)||void 0===t?void 0:t.createAnnotationMessage;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&p(e,r))}}}),1),g=v[0],Z=(0,l.Z)((0,CZ.Rp)({onError:function(e){return i(e.message)},update:function(e,n){var t;if(n.errors)n.errors.forEach((function(e){return i(e.message)}));else{var r=null===(t=n.data)||void 0===t?void 0:t.updateAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&p(e,r))}}}),1),b=Z[0],y=(0,l.Z)((0,SZ.n)(),1)[0],x=(0,l.Z)((0,CZ.Hj)(),1)[0];(0,CZ.Tt)({variables:{replId:e},onData:function(e){var n=e.data.data,t=e.client,i=null===n||void 0===n?void 0:n.updatedAnnotation;i&&(p(t,i),r(i))}});var w=(0,l.Z)(c.useState([]),2),k=w[0],C=w[1];c.useEffect((function(){var e,n,t=[];"Repl"===(null===(e=u.data)||void 0===e?void 0:e.repl.__typename)&&(n=t).push.apply(n,(0,We.Z)(u.data.repl.annotationAnchors));a&&t.push((0,oe.Z)((0,m.Z)({},a),{isGeneral:Boolean(a.isGeneral),messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),C(t)}),[u,a]);var S=c.useMemo((function(){return k.find((function(e){return e.isGeneral}))}),[k]),I=c.useMemo((function(){return k.reduce((function(e,n){return n.isResolved?e:n.messages.some((function(e){return!1===e.seen}))?e+1:e}),0)}),[k]),T=function(e){var n=e.annotationAnchor,t=e.annotationMessage,r=e.highlight;h({variables:{annotationAnchor:n,annotationMessage:t,highlight:r},optimisticResponse:{__typename:"RootMutationType",createAnnotationAnchor:(0,oe.Z)((0,m.Z)({},d(),n),{isGeneral:Boolean(n.isGeneral),__typename:"AnnotationAnchor",messages:t?[(0,oe.Z)((0,m.Z)({},d(),t),{content:{text:t.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:(new Date).toISOString(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})},E=(0,$n.Z)((function(){return Ns()(x,1e3,{trailing:!1})}),[x]);return{annotations:k,loading:u.loading,generalThread:S,unreadThreadCount:I,placeholderAnchorId:null===a||void 0===a?void 0:a.id,createAnnotationAnchorPlaceholder:function(e){var n=e.annotationAnchor;s(n)},deleteAnnotationAnchorPlaceholder:function(){s(null)},createAnnotationAnchor:T,createAnnotationMessage:function(n){var t=n.anchor,r=n.annotationMessage,i=n.highlight;(null===a||void 0===a?void 0:a.id)===t.id?(s(null),T({annotationAnchor:(0,m.Z)({},a),annotationMessage:r,highlight:i})):g({variables:{replId:e,anchorId:t.id,annotationMessage:r,highlight:i},optimisticResponse:{__typename:"RootMutationType",createAnnotationMessage:(0,oe.Z)((0,m.Z)({},t),{messages:(0,We.Z)(t.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,oe.Z)((0,m.Z)({},d(),r),{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:(new Date).toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var n=e.annotationAnchor,t=e.changes;b({variables:{id:n.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateAnnotationAnchor:(0,oe.Z)((0,m.Z)({},n,t),{isResolved:"boolean"===typeof t.isResolved?t.isResolved:n.isResolved})}})},updateThreadPreview:function(e){var n=e.threadId,t=e.messageId;E({variables:{threadId:n,messageId:t}})},markAllMessagesInReplAsSeenByUser:function(){y({variables:{replId:e}})}}}var TZ=function(e){var n=IZ(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,c.useMemo)((function(){return n?n.messages.filter((function(e){return!1===e.seen})).length:0}),[n])},EZ=t(5687);function RZ(e){var n=IZ(e,{onReceiveAnnotationUpdate:function(){}}).annotations;return(0,c.useMemo)((function(){return n.reduce((function(e,n){return n.isGeneral?e:e+n.messages.filter((function(e){return!1===e.seen})).length}),0)}),[n])}var GZ={container:(0,i.iv)([p.l0.position.relative]),button:(0,i.iv)([p.l0.position.relative,te.gU.filled,p.l0.width(32),p.l0.height(32),p.l0.borderRadius(8,0,0,8)]),notificationDot:(0,i.iv)(p.l0.display.none)},PZ=function(){var e=(0,Ie.Z)(),n=TZ(e),t=RZ(e),i=ao(zi),o=xl();return(0,r.tZ)(d.G,{css:[p.l0.flex.row,p.l0.align.center,{"&:only-child .open-chat-button":[p.l0.width(32),p.l0.height(32),p.l0.borderRadius(8),te.gU.nofill],"&:only-child .notification-dot-on-button":[p.l0.display.block],"&:not(:only-child) .notification-dot-on-icon":[p.l0.display.block]}],children:(0,r.tZ)(ee.hU,{alt:"Open Chat and Threads",onClick:function(){i(),o({pane:{type:"chat"}})},css:GZ.button,className:"open-chat-button",children:(0,r.BX)(r.HY,{children:[n>0||t>0?(0,r.tZ)(d.G,{className:"notification-dot-on-button",css:GZ.notificationDot,children:(0,r.tZ)(Zc,{})}):null,(0,r.BX)(d.G,{css:GZ.container,children:[n>0||t>0?(0,r.tZ)(d.G,{className:"notification-dot-on-icon",css:GZ.notificationDot,children:(0,r.tZ)(Zc,{})}):null,(0,r.tZ)(EZ.Z,{})]})]})})})},DZ=t(33672),BZ=t(33145),UZ=t(95862),AZ=t(35343),LZ=t(56123),OZ=t(84730);function _Z(){var e=(0,g.Z)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n"]);return _Z=function(){return e},e}function XZ(){var e=(0,g.Z)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return XZ=function(){return e},e}var zZ=(0,Z.Ps)(_Z()),MZ=(0,Z.Ps)(XZ(),zZ);var jZ=(0,de.X)({root:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.px(8),{textDecoration:"none"}],info:[p.l0.colWithGap(2),p.l0.flex.growAndShrink(1)],meta:{fontSize:10}});function WZ(e){var n=e.repl,t=e.height,i=e.isActive,o=e.search,a=n.title,l=(0,c.useMemo)((function(){return o?mc.Z.match(o,a):null}),[o,a]);return(0,r.tZ)(Ts(),{legacyBehavior:!0,href:n.url,passHref:!0,children:(0,r.BX)(d.G,{tag:"a",style:{height:t},css:jZ.root,children:[(0,r.tZ)(LZ.ZP,{alt:n.title,size:32,iconUrl:n.iconUrl}),(0,r.BX)(d.G,{css:jZ.info,children:[(0,r.tZ)(yc.x,{text:n.title,highlight:null===l||void 0===l?void 0:l.ranges,dimmed:!i}),(0,r.BX)(ne.xv,{css:jZ.meta,color:"dimmest",multiline:!1,children:[n.owner.username," \u2022 edited ",(0,OZ.F)(n.timeUpdated)]})]})]})})}function NZ(e,n){return function(){return{score:1,render:{height:44,content:(0,r.tZ)(WZ,{repl:n,height:44,search:e})}}}}function FZ(e){return VZ.apply(this,arguments)}function VZ(){return VZ=(0,Hn.Z)((function(e){var n,t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:if(!Cr.l)throw new Error("Expected apolloClient");return[4,Cr.l.query({query:MZ,variables:e})];case 1:return t=r.sent().data,[2,(null===(n=t.currentUser)||void 0===n?void 0:n.search.repls.filter((function(e){return Boolean(e.owner)})))||[]]}}))})),VZ.apply(this,arguments)}function HZ(e){var n=e.description,t=e.onRun,i=(0,Ma.Z)(t);return(0,$n.Z)((function(){return{match:(0,Qn.zf)({defaultScore:.5}),data:{type:"context",label:"My Repls",icon:(0,r.tZ)(AZ.Z,{}),description:n},commands:function(e){var n=e.search,t=e.active;return(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return t?[4,FZ({query:n,count:50})]:[2,[]];case 1:return[2,e.sent().map((function(e){return function(e){var n=e.repl,t=e.search,i=e.run;return{match:NZ(t,n),data:{type:"action",label:n.title,icon:(0,r.tZ)(LZ.ZP,{alt:n.title,size:16,iconUrl:n.iconUrl}),run:function(){return i(n)}}}}({repl:e,search:n,run:function(){return i.current(e)}})}))]}}))}))()}}}),[n,i])}function YZ(){var e=(0,Ai.WU)(),n=lo(Qt),t=lo(Jt),r=yl(),i=bl(),o=gl(),a=lo(Kt);return(0,c.useCallback)((function(c){var s=c.pane,u=c.activate,d=c.replaceExistingType,p=c.updateOnReveal,f=void 0===p||p,h=(0,qn.Ur)(s)?a():null;if(h||(h=function(e){var n,t,r,i,o=e.panes,a=e.pane,c=e.replaceExistingType;if((0,qn.Ur)(a)){var s,u,d=a.data.path;return null!==(u=null===(s=o.find((function(e){var n=(0,l.Z)(e,2)[1];return(0,qn.Ur)(n)&&n.data.path===d})))||void 0===s?void 0:s[0])&&void 0!==u?u:null}return(0,qn.WQ)(a)?null!==(t=null===(n=o.find((function(e){var n=(0,l.Z)(e,2)[1];return!!(0,qn.WQ)(n)&&n.data.installationId===a.data.installationId&&n.data.path===a.data.path&&n.data.filePath===a.data.filePath})))||void 0===n?void 0:n[0])&&void 0!==t?t:null:(c||(0,qn.b)(a.type))&&null!==(i=null===(r=o.find((function(e){return(0,l.Z)(e,2)[1].type===a.type})))||void 0===r?void 0:r[0])&&void 0!==i?i:null}({panes:(0,We.Z)(n()).concat((0,We.Z)(t())),pane:s,replaceExistingType:d})),h)return f&&o({paneId:h,pane:s}),i({paneId:h,activate:u}),h;var v=c.placement;return"secondary"!==(null===v||void 0===v?void 0:v.type)||v.relativeTo||(v={type:"secondary",relativeTo:e()}),r({pane:s,activate:u,placement:v})}),[t,n,e,r,i,o,a])}var qZ=t(52761),KZ={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,f.Z)({},v.Bd.DesktopApp,(0,zc.l2)({ctrl:!0,key:"Tab"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,f.Z)({},v.Bd.DesktopApp,(0,zc.l2)({ctrl:!0,shift:!0,key:"Tab"}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,f.Z)({},v.Bd.DesktopApp,(0,zc.l2)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,f.Z)({},v.Bd.DesktopApp,(0,zc.l2)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,f.Z)({},v.Bd.DesktopApp,(0,zc.l2)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,zc.l2)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:et.q},run:{id:"repl.run",name:"Run Repl",default:(0,zc.l2)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,zc.l2)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,zc.l2)({cmdOrCtrl:!0,shift:!0,key:"s"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showDocs:{id:"repl.showDocs",name:"Show docs",description:"Opens or reveals the Replit Docs in a tab",default:void 0},showGhostwriter:{id:"repl.showGhostwriter",name:"Show Ghostwriter",description:"Opens or reveals Ghostwriter in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,f.Z)({},v.Bd.DesktopApp,(0,zc.l2)({cmdOrCtrl:!0,key:","}))},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0}},$Z=Object.values(KZ);function QZ(e){var n=e.isAdmin,t=e.isServer,i=e.hostedUrl,o=Ac(),a=(0,c.useState)(!1),l=a[0],s=a[1],u=(0,Re.AA)(),d=(0,re.Z)(),p=d.fs,f=d.container,v=d.runner,m=(0,ie.L7)(v),g=(0,ac.T)(),Z=El(),b=ao(qi),y=ao(Ki),x=Ll(),w=_l(),k=ul(),C=ao($i),S=vl(),I=io((0,$n.Z)((function(){return(0,Fn.cn)((function(e){var n=e(Wt);if(!n)return null;var t=mt(e(Yt),n);return t?t.paneGroup.id:null}))}),[])),T=Rl(),E=Pl().toggleMaximizePane,R=Fl(),G=kl(),P=sl(),D=Vl(),B=(0,vc.Y6)(S),U=(0,qZ.Z)("replUrl","string"),A=(0,Ie.Z)(),L=(0,Xv.Z)(),O=lo(nr),_=xl(),X=Ns()((function(e){return(0,h.j)(h.U3.PROJECT_RAN,{replId:A,placement:e})}),500);(0,Pc.Il)((function(){return[KZ.newTab.id,function(){return b()}]}),[b]),(0,Pc.Il)((function(){return[KZ.nextTab.id,function(){return C("next")}]}),[C]),(0,Pc.Il)((function(){return[KZ.previousTab.id,function(){return C("previous")}]}),[C]),(0,Pc.Il)((function(){return[KZ.closeTab.id,function(){var e=y();return e||O()>0}]}),[y,O]),(0,Pc.Il)((function(){return[KZ.reopenClosedTab.id,function(){return w()}]}),[w]),(0,Pc.Il)((function(){return[KZ.moveTabUpGroup.id,function(){return x("above")}]}),[x]),(0,Pc.Il)((function(){return[KZ.moveTabRightGroup.id,function(){return x("rightOf")}]}),[x]),(0,Pc.Il)((function(){return[KZ.moveTabLeftGroup.id,function(){return x("leftOf")}]}),[x]),(0,Pc.Il)((function(){return[KZ.moveTabDownGroup.id,function(){return x("below")}]}),[x]),(0,Pc.Il)((function(){return S?[KZ.insertPaneGroupUp.id,function(){return D({paneId:S,placement:"above",autoFocus:!0})}]:void 0}),[S]),(0,Pc.Il)((function(){return S?[KZ.insertPaneGroupRight.id,function(){return D({paneId:S,placement:"rightOf",autoFocus:!0})}]:void 0}),[S]),(0,Pc.Il)((function(){return S?[KZ.insertPaneGroupLeft.id,function(){return D({paneId:S,placement:"leftOf",autoFocus:!0})}]:void 0}),[S]),(0,Pc.Il)((function(){return S?[KZ.insertPaneGroupDown.id,function(){return D({paneId:S,placement:"below",autoFocus:!0})}]:void 0}),[S]),(0,Pc.Il)((function(){return[Mc.id,function(){return o()}]}),[o]);var z=(0,Pc.gf)(KZ.findFile.id);(0,Pc.Il)((function(){return[KZ.findFile.id,function(){return o(Jn.i({openFile:Z,fs:p,shouldHideFile:g,getRecentFiles:u,keyboardShortcut:z}))}]}),[o]),jc(Jn.i({openFile:Z,fs:p,shouldHideFile:g,getRecentFiles:u,keyboardShortcut:z}));var M=(0,Pc.gf)(KZ.searchFileContents.id),j=YZ();(0,Pc.Il)((function(){return[KZ.searchFileContents.id,function(){if("searchReplace"!==(null===B||void 0===B?void 0:B.type)){var e,n=void 0;if("codeEditor"===(null===B||void 0===B?void 0:B.type))n=null===(e=B.getCurrentSelectionText)||void 0===e?void 0:e.call(B);j({pane:{type:"searchReplace",data:{initialQuery:n}},activate:!0,placement:{type:"secondary"},replaceExistingType:!0,updateOnReveal:void 0!==n})}else{var t;null===(t=B.focusSearchInput)||void 0===t||t.call(B)}}]}),[B,o,Z,j]),(0,Pc.Il)((function(){return S?[KZ.toggleFloatPaneGroup.id,function(){return T(S)}]:void 0}),[S]),(0,Pc.Il)((function(){return S?[KZ.toggleMaximizePaneGroup.id,function(){return E(S)}]:void 0}),[S]),(0,Pc.Il)((function(){return I?[KZ.removePaneGroup.id,function(){R({paneGroupId:I}),P()}]:void 0}),[I]),(0,Pc.Il)((function(){return S?[KZ.removeOthersInPaneGroup.id,function(){G(S)}]:void 0}),[S]),(0,Pc.Il)((function(){return[KZ.moveFocusUp.id,function(){return k("above")}]}),[]),(0,Pc.Il)((function(){return[KZ.moveFocusDown.id,function(){return k("below")}]}),[]),(0,Pc.Il)((function(){return[KZ.moveFocusRight.id,function(){return k("rightOf")}]}),[]),(0,Pc.Il)((function(){return[KZ.moveFocusLeft.id,function(){return k("leftOf")}]}),[]),jc(dc(_)),jc(et.F({container:f,keyboardShortcut:M,openFile:Z})),(0,Pc.Il)((function(){if(m!==Wh.Ah.OFFLINE)return[KZ.run.id,function(){m===Wh.Ah.RUNNING&&v.stopRun(),X("shortcut_cmd_enter"),v.run()}]}),[m]);var W=(0,Pc.gf)(KZ.run.id);return jc({match:Qn.pl,data:{type:"action",icon:(0,r.tZ)(Iv.Z,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){Tv.X.openNewWindow()}}},{enabled:L}),jc({match:Qn.pl,data:{type:"action",icon:(0,r.tZ)(DZ.Z,{}),label:"Run",description:"Run Repl",run:function(){v.run()},keyboardShortcut:W}},{enabled:m===Wh.Ah.IDLE}),jc({match:Qn.pl,data:{type:"action",icon:(0,r.tZ)(BZ.Z,{}),label:"Stop",description:"Stop Repl",run:function(){v.stopRun()}}},{enabled:m===Wh.Ah.RUNNING}),jc({match:Qn.pl,data:{type:"action",icon:(0,r.tZ)(UZ.Z,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){f.exec("kill","1")}}},{enabled:n}),jc({match:Qn.pl,data:{type:"action",icon:(0,r.tZ)(yp.Z,{}),label:"Open development URL",run:function(){window.open(i,"_blank")}}},{enabled:t}),jc({match:Qn.pl,data:{type:"action",icon:(0,r.tZ)(zh.Z,{}),label:"Open in desktop app",description:"Open this Repl in the desktop app",run:function(){if(!U)throw new Error("Expected Repl URL query param");var e="".concat(window.location.origin,"/desktopApp/open?replUrl=").concat(U);window.open(e,"_blank")}}},{enabled:!L}),jc(HZ({description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}})),jc({match:(0,Qn.zf)({defaultScore:.5}),data:{type:"action",label:"Create",icon:(0,r.tZ)(pc.Z,{}),description:"Create a new Repl",run:function(){s(!0)}}}),(0,r.tZ)(Ls.Z,{isOpen:l,onRequestClose:function(){return s(!1)},maxWidth:600,children:(0,r.tZ)(As.Z,{})})}var JZ=(0,c.memo)(QZ),eb=t(55535),nb=t(51055),tb=t(43529),rb=t(13090),ib=t(78572),ob=t(69600),ab=(0,de.X)({self:[p.l0.position.relative,p.l0.borderRadius(8,0,0,8)],dotWrapper:[p.l0.position.absolute,p.l0.top("-3px"),p.l0.right("-3px"),p.l0.width("10px"),p.l0.height("10px"),p.l0.borderRadius("full"),p.l0.border({color:p.TV.backgroundDefault,width:2})],dot:[p.l0.width("100%"),p.l0.height("100%"),p.l0.borderRadius("full")]});function lb(e){var n=e.color;return(0,r.BX)(d.G,{css:ab.self,children:[(0,r.tZ)(Th.Z,{}),(0,r.tZ)(d.G,{tag:"span",css:ab.dotWrapper,children:(0,r.tZ)(d.G,{tag:"span",css:ab.dot,style:{backgroundColor:n,boxShadow:"0 0 6px ".concat(n)}})})]})}var cb=(0,i.iv)([p.l0.flex.growAndShrink(1),p.l0.borderRadius(8,0,0,8),(0,f.Z)({},p.BC.max("tabletMin"),{"div span":[p.l0.display.none],"div svg":[p.l0.mr(0)]})]),sb=(0,i.iv)([cb,p.l0.borderRadius(8)]),ub={base:{self:cb,loading:(0,i.iv)([cb,Kc.p.backgroundPulse()])},rounded:{self:sb,loading:(0,i.iv)([sb,Kc.p.backgroundPulse()])}};function db(e){var n=e.text,t=e.icon,i=e.disabled,o=e.rounded,a=e.onClick,l=e.tooltip,c=e.loading,s=(0,r.tZ)(J.zx,{text:n,iconLeft:t,css:ub[o?"rounded":"base"][c?"loading":"self"],disabled:i,onClick:a});return l?(0,r.tZ)(le.u,{tooltip:l,children:s}):s}function pb(){var e,n,t=(0,ib.kW)(),i=(0,ib.Sl)((0,Ie.Z)()).hostingTier,o=(0,ib.gg)(),a=o.isDeployableRepl,l=o.reason,c=Boolean(i),s=void 0,u=!1,d=!1;switch(t){case ob.z.Ready:case ob.z.Suspended:case ob.z.ProcessingLifecycleCommand:e="Deploy",c?(n=(0,r.tZ)(lb,{color:p.TV.blueStronger}),s="Deploy active hosting tier"):n=(0,r.tZ)(Th.Z,{});break;case ob.z.Loading:e="Deploy",n=(0,r.tZ)(Th.Z,{}),u=!0,d=!0;break;case ob.z.Preparing:e="Preparing",n=(0,r.tZ)(Th.Z,{}),u=!0,d=!0;break;case ob.z.Deploying:e="Deploying",n=(0,r.tZ)(se.Z,{}),d=!0;break;default:(0,Tm.Z)(t)}a||(s=l,u=!0);var f=xl();return(0,r.tZ)(db,{text:e,icon:n,onClick:function(){f({pane:{type:"deployments"}}),t!==ob.z.Ready||c||(0,h.j)(h.U3.DEPLOY_PROJECT_SELECTED,{source:"deploy_button"})},tooltip:s,disabled:u,loading:d,rounded:!0})}var fb={self:p.l0.rowWithGap(1),open:(0,i.iv)([p.l0.borderRadius(0,8,8,0),p.l0.px(4)])};function hb(){var e,n,t=(0,ib.kW)(),i=(0,ib.H7)(),o=(0,ib.ev)(),a=(0,ib._U)(),s=(0,ib.XA)(),u=xl(),f=(0,qe.Z)().showError,h=function(){var e=(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:if(t===ob.z.Deploying||t===ob.z.Suspended||t===ob.z.ProcessingLifecycleCommand||t===ob.z.Preparing)return u({pane:{type:"deployments"}}),[2];if(g&&(Z(void 0),g===v.Fe.Failed))return u({pane:{type:"deployments",data:{view:rb.k.Deployment}}}),[2];if(o)return u({pane:{type:"deployments",data:{view:rb.k.Deployment}}}),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,s({subdomain:i})];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),f(e.message),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),m=(0,l.Z)(c.useState(void 0),2),g=m[0],Z=m[1];c.useEffect((function(){if(a&&"HostingBuildDeployStatusAction"===a.__typename)switch(a.status){case v.Fe.Success:case v.Fe.Failed:Z(a.status)}}),[a]),c.useEffect((function(){t===ob.z.Deploying&&Z(void 0)}),[t]);var b=void 0,y=!1,x=!1;switch(t){case ob.z.Ready:e="Redeploy",n=(0,r.tZ)(Th.Z,{}),g&&(g===v.Fe.Success?(n=(0,r.tZ)(lb,{color:p.TV.accentPositiveDefault}),b="Success"):(n=(0,r.tZ)(lb,{color:p.TV.accentNegativeDefault}),b="An error occurred"));break;case ob.z.Suspended:e="Redeploy",n=(0,r.tZ)(lb,{color:p.TV.greyDefault}),b="Deployment suspended";break;case ob.z.Loading:e="Redeploy",n=(0,r.tZ)(Th.Z,{}),y=!0,x=!0;break;case ob.z.ProcessingLifecycleCommand:e="Redeploy",n=(0,r.tZ)(lb,{color:p.TV.orangeStronger}),x=!0,b="Updating deployment";break;case ob.z.Preparing:e="Preparing",n=(0,r.tZ)(se.Z,{}),x=!0,y=!0;break;case ob.z.Deploying:e="Deploying",n=(0,r.tZ)(se.Z,{}),x=!0;break;default:(0,Tm.Z)(t)}return o&&(e="Error",n=(0,r.tZ)(lb,{color:p.TV.accentNegativeDefault}),b=o),(0,r.BX)(d.G,{css:fb.self,children:[(0,r.tZ)(db,{text:e,icon:n,tooltip:b,onClick:h,disabled:y,loading:x}),(0,r.tZ)(le.u,{tooltip:"Open Deployments pane",children:(0,r.tZ)(J.zx,{text:"",iconLeft:(0,r.tZ)(vs.Z,{}),onClick:function(){u({pane:{type:"deployments"}})},css:fb.open})})]})}function vb(){var e=(0,ib.hn)(),n=(0,ib.$y)(),t=Boolean(e),i=Boolean(n);return t&&i?(0,r.tZ)(hb,{}):(0,r.tZ)(pb,{})}var mb=t(8479),gb=t(37682),Zb=t(29096),bb=t(3236),yb=[v.Sy.Submit,v.Sy.Resubmit,v.Sy.UpdateModelSolution,v.Sy.PublishTemplate,v.Sy.EditTemplate,v.Sy.ReviewSubmission],xb={root:(0,i.iv)([p.l0.width("100%"),p.l0.top(0),p.l0.left(0),p.l0.py(8),p.l0.px(12),p.l0.position.absolute,p.l0.dragRegion,{userSelect:"none",display:"grid",gridTemplateColumns:"1fr max-content 1fr",alignItems:"center",gap:8}]),center:(0,i.iv)([p.l0.noDragRegion,p.l0.position.relative,p.l0.flex.row,p.l0.align.center]),right:(0,i.iv)([p.l0.rowWithGap(6),p.l0.align.center,p.l0.justify.end]),socialGroup:(0,i.iv)([p.l0.rowWithGap(1),p.l0.align.stretch,p.l0.borderRadius(8),p.l0.noDragRegion,{overflow:"hidden"}]),inviteButton:(0,i.iv)([te.gU.filled,p.l0.borderRadius(0,8,8,0),(0,f.Z)({},p.BC.max("tabletMax"),{svg:[p.l0.mr(0)],span:[p.l0.display.none]})]),searchButton:(0,i.iv)([p.l0.height(32),p.l0.width(32)])},wb={windowsOSRoot:(0,i.iv)([xb.root,p.l0.dragRegion,{paddingRight:mb.KN}])};function kb(e){var n,t,i,o,a=(0,nn.useRouter)(),s=(0,re.Z)().runner,f=(0,Ie.Z)(),v=(0,l.Z)(c.useState(!1),2),g=v[0],Z=v[1],b=(0,Fc.e)(Vc.y.Run),y=(0,Fc.e)(Vc.y.Share),x=(0,Xv.Z)(),w=(0,tb.Cl)(),k=(0,l.Z)(c.useState(!1),2),C=k[0],S=k[1],I=function(e){var n=(0,m.Z)({},H,e);return M.a(K,n)}({variables:{id:f}}).data,T=xl(),E=Hc(El()),R=Ac(),G=(0,u.P5)({controlName:"flag-toolchain-multiple-runners",logFlagToAnalytics:!1}),P=(0,u.P5)({controlName:"flag-deployments",logFlagToAnalytics:!1}),D=(0,za.cR)(),B="Repl"===(null===I||void 0===I?void 0:I.repl.__typename)?I.repl:null,U=(null===B||void 0===B?void 0:B.multiplayers)&&B.multiplayers.length>0,A=(0,c.useRef)(null),L=(0,c.useRef)(null),O=(0,c.useRef)(g&&(null===y||void 0===y?void 0:y.isActive));(0,c.useEffect)((function(){O.current&&!(null===y||void 0===y?void 0:y.isActive)&&Z(!1),O.current=g&&(null===y||void 0===y?void 0:y.isActive)}),[y,g]),(0,c.useEffect)((function(){(null===y||void 0===y?void 0:y.isActive)&&(g&&L.current?null===y||void 0===y||y.delegateTooltip(L.current):y.delegateTooltip(A.current))}),[y,g,L]);var _="Team"===(null===B||void 0===B||null===(n=B.owner)||void 0===n?void 0:n.__typename),X=Boolean("Team"===(null===B||void 0===B||null===(t=B.owner)||void 0===t?void 0:t.__typename)&&(null===(i=null===B||void 0===B?void 0:B.owner.capabilities)||void 0===i?void 0:i.isEducationPlan)),z=yb.find((function(e){return e===(null===B||void 0===B?void 0:B.workspaceCta)})),j=!X&&(null===B||void 0===B?void 0:B.currentUserPermissions.editMultiplayers),W=Boolean(P&&(null===B||void 0===B?void 0:B.hostingDeploymentPermissions.canDeploy)&&!D);(0,Pc.Il)((function(){if(!X)return[KZ.toggleInviteDialog.id,function(){return Z((function(e){return!e}))}]}),[Z]);var N=(0,Pc.gf)(KZ.toggleInviteDialog.id);jc({match:Qn.pl,data:{type:"action",label:"Multiplayer",icon:(0,r.tZ)(dn.Z,{}),description:"Open multiplayer mode",keyboardShortcut:N,run:function(){Z(!0)}}},{enabled:!X});var F=(0,Pc.gf)(KZ.run.id),V=(0,Pc.gf)(Mc.id),Y=(0,u.P5)({controlName:"flag-helpful-header",default:!1,logFlagToAnalytics:!0}),q=[{type:"button",key:"shortcuts",onClick:function(){R(),(0,h.j)(h.U3.KEYBOARD_SHORTCUTS_OPENED)},content:(0,r.BX)(r.HY,{children:[(0,r.tZ)(cu.Z,{}),(0,r.tZ)(ne.xv,{children:"Shortcuts"}),V?(0,r.tZ)(Pc.bM,{keyCombo:V,small:!0}):null]})}],te=Y?(0,r.tZ)(bb.Z,{extraItems:q,onDocsClick:function(e){e.preventDefault(),T({pane:{type:"docs",data:{url:null}}})}}):null;return(0,r.BX)(Q.Tg,{tag:"header",css:x&&w?wb.windowsOSRoot:xb.root,children:[(0,r.tZ)(uZ,{repl:e.repl,currentUser:e.currentUser}),(0,r.tZ)(d.G,{innerRef:null===b||void 0===b?void 0:b.delegateTooltip,dataCy:"ws-run-btn",onClick:function(){(null===b||void 0===b?void 0:b.isActive)&&b.next()},css:xb.center,children:G?(0,r.tZ)(kZ,{runner:s,shortcut:F}):(0,r.tZ)(ie.ZP,{runner:s,disableTooltip:null===b||void 0===b?void 0:b.isActive,shortcut:F})}),(0,r.BX)(d.G,{css:xb.right,children:[(null===B||void 0===B?void 0:B.lesson)?(0,r.tZ)(ps,{lesson:B.lesson}):null,(0,r.tZ)(ee.hU,{css:xb.searchButton,onClick:function(){R()},alt:"Search & run commands",tooltipContents:(0,r.BX)(d.G,{children:[(0,r.tZ)(ne.xv,{multiline:!1,children:"Search & run commands"}),V?(0,r.tZ)(d.G,{css:[p.l0.center,p.l0.pt(4)],children:(0,r.tZ)(Pc.bM,{keyCombo:V})}):null]}),tooltipPlacement:"bottom-end",children:(0,r.tZ)(sc.Z,{})}),(0,r.BX)(Q.Tg,{css:[xb.socialGroup],background:"root",children:[U?(0,r.tZ)(PZ,{}):null,(0,r.tZ)(Pe,{onAvatarClick:E}),j?(0,r.tZ)(r.HY,{children:(0,r.tZ)(d.G,{innerRef:A,css:{"&:only-child .invite-button":[p.l0.borderRadius(8)]},children:(0,r.tZ)(ze,{showPopover:B.currentUserPermissions.inviteGuests,children:(0,r.BX)(_e.x,{isOpen:g,placement:"bottom end",label:"Invite",css:p.l0.width(400),onOpenChange:function(e){!g||C?(e&&(0,h.j)(h.U3.INVITE_MODAL_OPENED,{replId:B.id,source:"replEnvironment"}),Z(e)):Z(!1)},noArrow:!0,children:[(0,r.tZ)(J.zx,{iconLeft:(0,r.tZ)($.Z,{}),text:"Invite",css:[xb.inviteButton],className:"invite-button"}),(0,r.tZ)("div",{ref:L,children:(0,r.tZ)(mn,{handleUpgradeTriggered:function(e){return S(e)},replId:f,isTeamRepl:_})})]})})})}):null]}),W&&B?(0,r.tZ)(d.G,{children:(0,r.tZ)(vb,{})}):null,D?(0,r.tZ)(J.zx,{text:"Extension Devtools",iconLeft:(0,r.tZ)(eb.Z,{}),onClick:function(){T({pane:{type:"extensionDevtools"}})}}):null,z?(0,r.tZ)(Wn,{cta:z,replId:f,isGroupProject:Boolean(null===B||void 0===B||null===(o=B.template)||void 0===o?void 0:o.isGroupProject),openIOtesterPane:function(){T({pane:{type:"autograder"}})}}):null,x?(0,r.BX)(r.HY,{children:[te,(0,r.tZ)(nb.S,{})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Zb.Z,{pathname:a.pathname,showCount:!1}),te,(0,r.tZ)(gb.Z,{currentUser:e.currentUser})]})]})]})}var Cb=(0,c.memo)(kb),Sb=t(68625),Ib=t(75205),Tb={base:(0,i.iv)([p.l0.position.absolute,p.l0.borderRadius(8),{pointerEvents:"none",border:"1px solid",transitionProperty:"border, box-shadow",transitionDuration:Ee.H.duration,transitionTimingFunction:Ee.H.timingFunction}]),floating:(0,i.iv)([{borderColor:p.TV.outlineDimmest},p.l0.shadow(2)]),dragging:(0,i.iv)([{borderColor:p.TV.outlineStronger},p.l0.shadow(3)]),active:(0,i.iv)([{borderColor:p.TV.outlineDimmer}])};function Eb(e){var n=Jl(e.paneId),t=(0,Hs.Z)(n.isFloating),i=(0,Hs.Z)(n.isActive),o=(0,Hs.Z)(n.isBeingDragged),a=(0,Hs.Z)(n.hasBorder),l=(0,Hs.Z)(n.headerHeight);return a&&t?(0,r.tZ)(d.G,{style:{width:"calc(100% + 2px)",left:-1,height:"calc(100% + ".concat(l,"px + 2px)"),top:-(l+1)},css:[Tb.base,t&&Tb.floating,i&&Tb.active,o&&Tb.dragging]}):null}var Rb=(0,c.memo)(Eb),Gb=t(65611),Pb=d.K.div,Db=(0,i.iv)([p.l0.width("100%"),p.l0.position.absolute,p.l0.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),Bb=(0,i.iv)([p.l0.height("100%"),p.l0.position.absolute,p.l0.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),Ub=(0,i.iv)([p.l0.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function Ab(e){var n="topLeft"===e||"topRight"===e?"bottom":"top";return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat(n)}}var Lb={topLeft:(0,i.iv)([p.l0.top(0),p.l0.left(0),Ab("topLeft")]),topRight:(0,i.iv)([p.l0.top(0),p.l0.right(0),Ab("topRight")]),bottomLeft:(0,i.iv)([p.l0.bottom(0),p.l0.left(0),Ab("bottomLeft")]),bottomRight:(0,i.iv)([p.l0.bottom(0),p.l0.right(0),Ab("bottomRight")])};function Ob(e){var n=e.edge,t=e.size,i=e.onPointerDown;if("top"===n||"bottom"===n)return(0,r.tZ)(Pb,{onPointerDown:i,style:(0,f.Z)({height:t},n,-t),css:Db});if("right"===n||"left"===n)return(0,r.tZ)(Pb,{onPointerDown:i,style:(0,f.Z)({width:t},n,-t),css:Bb});var o="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,r.tZ)(Pb,{onPointerDown:i,style:{height:t,width:t,cursor:o},css:[Ub,Lb[n]]})}var _b=["bottom","right","left","bottomRight","bottomLeft"],Xb=(0,c.memo)((function(e){var n=Gl();return(0,r.tZ)(r.HY,{children:_b.map((function(t){return(0,r.tZ)(Ob,{size:8,edge:t,onPointerDown:function(r){Fs(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){var t=e.delta;n({type:"update",moveDelta:t})},end:function(){n({type:"end"})}})}},t)}))})})),zb=["top","right","left","topRight","topLeft"],Mb=(0,c.memo)((function(e){var n=Gl();return(0,r.tZ)(r.HY,{children:zb.map((function(t){return(0,r.tZ)(Ob,{size:8,edge:t,onPointerDown:function(r){Fs(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){var t=e.delta;n({type:"update",moveDelta:t})},end:function(){n({type:"end"})}})}},t)}))})}));function jb(e){var n=e.paneId,t=(0,l.Z)((0,Ib.L)({accept:[Tn.Tv.File,uf.z.Pane,uf.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,t){var r=t.getClientOffset();r&&o.drag({pageX:r.x,pageY:r.y,over:n})},drop:function(e,t){var r=t.getClientOffset();if(r)if(e.type!==uf.z.Pane){if("nodes"===e.type){var i=(0,qn.ME)(e.nodes);i.length>0&&o.drop({type:"newPaneGroup",panes:i,pageX:r.x,pageY:r.y,over:n})}if(e.type===uf.z.NewPane){var a=e.pane;o.drop({type:"newPaneGroup",panes:[a],pageX:r.x,pageY:r.y,over:n})}}else o.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:n})}}),2),r=t[0].isOver,i=t[1],o=function(e){var n=e.isOver,t=ao(po);return(0,c.useEffect)((function(){n||t(null)}),[n,t]),{drag:ao(Ao),drop:ao(Lo)}}({isOver:r});return i}var Wb=(0,so.$)(["fixedPositionOffsetX","fixedPositionOffsetY","transformX","transformY","scale","transformOriginX","width","height","transitionDuration","interactionBlanketDisplay","pointerEvents","userSelect"]),Nb=Wb.cssVars,Fb=Wb.styleTokens,Vb=(0,de.X)({root:[p.l0.position.absolute,p.l0.top(0),p.l0.left(0),p.l0.borderRadius(0,0,4,4),p.l0.container("pane"),{transitionProperty:"transform",transitionTimingFunction:"ease-out",transform:"translate(".concat(Fb.transformX,", ").concat(Fb.transformY,") scale(").concat(Fb.scale,")"),transformOrigin:"".concat(Fb.transformOriginX," top"),width:Fb.width,height:Fb.height,transitionDuration:Fb.transitionDuration,"--fixed-position-offset-x":Fb.fixedPositionOffsetX,"--fixed-position-offset-y":Fb.fixedPositionOffsetY}],container:[p.l0.position.relative,p.l0.width("100%"),p.l0.flex.growAndShrink(1),{overflow:"auto",zIndex:1,userSelect:Fb.userSelect},!Sb.gn&&{"& iframe":{pointerEvents:Fb.pointerEvents}}],interactionBlanket:[p.l0.coverContainer,{zIndex:1,display:Fb.interactionBlanketDisplay}]});function Hb(e){var n=e.paneId,t=(0,Yc.T)(),i=fl(),o=jb({paneId:n}),a=Jl(n),l=(0,Hs.Z)(a.isActive),u=(0,Hs.Z)(a.isFloating),p=(0,Hs.Z)(a.paneType),h=(0,Xv.Z)(),v=(0,tb.NJ)(),m=(0,tb.Cl)(),g=(v||m)&&h?s.Mz:0,Z=u,b=!u,y=(0,c.useRef)(null);(0,co.j)(y,a.size,(function(e){var n,t=e.width,r=e.height;return n={},(0,f.Z)(n,Nb.width,t+"px"),(0,f.Z)(n,Nb.height,r+"px"),n})),(0,co.j)(y,a.transform,(function(e){var n,t=e.x,r=e.y,i=e.scale;return n={},(0,f.Z)(n,Nb.transformX,Math.round(t)+"px"),(0,f.Z)(n,Nb.transformY,Math.round(r)+"px"),(0,f.Z)(n,Nb.scale,i.toString()),n})),(0,co.j)(y,a.transformOriginXAtom,(function(e){return(0,f.Z)({},Nb.transformOriginX,e)})),(0,co.j)(y,a.viewportInset,(function(e){var n,t=e.x,r=e.y;return n={},(0,f.Z)(n,Nb.fixedPositionOffsetX,-t+"px"),(0,f.Z)(n,Nb.fixedPositionOffsetY,-r-g+"px"),n})),(0,co.j)(y,a.isHidden,(function(e){return{opacity:e?"0":"1",visibility:e?"hidden":"visible"}})),(0,co.j)(y,a.animate,(function(e){return(0,f.Z)({},Nb.transitionDuration,e&&t?"140ms":"0ms")})),(0,co.j)(y,a.zIndex,(function(e){return{"z-index":e.toString()}})),(0,co.j)(y,a.disableInteractions,(function(e){var n;return n={},(0,f.Z)(n,Nb.interactionBlanketDisplay,e?"block":"none"),(0,f.Z)(n,Nb.userSelect,e?"none":"auto"),(0,f.Z)(n,Nb.pointerEvents,e?"none":"auto"),n}));var x=l?void 0:function(){i(n,{commit:"codeEditor"!==p})},w=(0,vc.u1)();return(0,r.tZ)(vc.Xq,{value:n,children:(0,r.tZ)(Q.Tg,{role:"tabpanel",id:n,"aria-labelledby":"tab-".concat(n),innerRef:(0,au.l)(y,b?o:void 0),css:Vb.root,elevated:!0,children:(0,r.BX)(Gb.Z,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,$n.Z)((function(){return{paneType:p}}),[p]),children:[(0,r.tZ)(Rb,{paneId:n}),(0,r.BX)(d.G,{css:Vb.container,onMouseDown:x,onContextMenu:x,innerRef:function(e){return w(n,e)},children:[(0,r.tZ)(d.G,{tabIndex:-1}),(0,r.tZ)(Kb,{paneId:n})]}),Z?(0,r.tZ)(Xb,{paneId:n}):null,(0,r.tZ)(d.G,{css:Vb.interactionBlanket})]},n)})})}function Yb(e){var n=YZ(),t=gl(),r=Zl();return(0,$n.Z)((function(){return function(i){switch(i.operation){case"commit":return void r(e);case"open":return void n({pane:i.pane,activate:!0,placement:i.secondary?{type:"secondary",relativeTo:e}:{type:"after",paneId:e}});case"replace":return void t({paneId:e,pane:i.pane});default:(0,Tm.Z)(i)}}}),[e,n,t,r])}function qb(e){var n=e.paneId,t=(0,qn.Se)().Content,i=Jl(n),o=(0,Hs.Z)(i.isHidden),a=(0,Hs.Z)(i.data),l=(0,Hs.Z)(i.isActive),c=(0,Hs.Z)(i.isCommitted);(0,Ai.Np)(n,a);var s=Yb(n);return(0,r.tZ)(t,{pane:a,options:{paneId:n,isHidden:o,performPaneOperation:s,isActive:l,isCommitted:c}})}var Kb=(0,c.memo)(qb),$b=(0,c.memo)(Hb),Qb=t(34495);var Jb=t(73798),ey=t(18314),ny=(0,de.X)({root:[p.l0.position.relative],circle:[p.l0.top(-6),p.l0.right(-6),p.l0.minWidth(12),p.l0.borderRadius(8),p.l0.position.absolute,p.l0.backgroundColor.backgroundHighest,p.l0.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:p.TV.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function ty(e){var n=e.count,t=(0,bs.Z)(e,["count"]);return(0,r.BX)(d.G,{css:ny.root,children:[(0,r.tZ)(xp.Z,(0,m.Z)({},t)),(0,r.tZ)(d.G,{css:[ny.circle,ny.count],children:n})]})}function ry(){return(0,r.BX)(d.G,{css:ny.root,children:[(0,r.tZ)(xp.Z,{}),(0,r.tZ)(d.G,{css:ny.circle,children:(0,r.tZ)(ey.Z,{size:6})})]})}function iy(e){var n=e.paneId,t=Jl(n),i=(0,Hs.Z)(t.isCommitted),o=Zl();if(!i)return{match:Qn.pl,data:{type:"action",label:"Keep open",icon:(0,r.tZ)(Jb.Z,{}),run:function(){o(n)}}}}function oy(e){var n=e.paneId,t=e.paneGroupId,i=(0,qn.Se)(),o=al(n),a=wl(),l=ao(Ti),c=kl(),s=jl({paneId:n}),u=Ml({paneGroupId:t});return(0,$n.Z)((function(){var e=i.getTitle(o),t=[{match:Qn.pl,data:{type:"action",label:"Close "+e,icon:(0,r.tZ)(xp.Z,{}),run:function(){a(n)}}}];return u&&u>1&&(null!==s&&s<u-1&&t.push({match:Qn.pl,data:{type:"action",label:"Close to the right",icon:(0,r.tZ)(ry,{}),run:function(){l(n)}}}),t.push({match:Qn.pl,data:{type:"action",label:"Close all other tabs",icon:(0,r.tZ)(ty,{count:u-1}),run:function(){c(n)}}})),t}),[i,o,u,s,a,n,l,c])}var ay=function(e){return{data:e,match:Qn.pl}};var ly=t(80337),cy=function(e){return{data:e,match:Qn.pl}};function sy(e){var n=e.paneId,t=function(e){var n=e.paneId,t=(0,qn.Se)(),i=(0,cc.B)(),o=Xl();return(0,$n.Z)((function(){return{data:{type:"context",label:"Tools",icon:(0,r.tZ)(lc.Z,{})},commands:function(){return i.map((function(e){return{match:Qn.pl,data:{type:"action",label:t.getTitle(e),icon:t.Icon({pane:e}),run:function(){(0,h.j)(h.U3.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),o({paneId:n,pane:e})}}}}))}}}),[i,t,o,n])}({paneId:n}),i=function(e){var n=e.paneId,t=(0,Re.Bx)(),i=ll(),o=Xl();return(0,$n.Z)((function(){var e=i.map((function(e){return e.filePath})),a=t.filter((function(n){return!e.includes(n)}));return{data:{type:"context",label:"Recent",icon:(0,r.tZ)(Kn.Z,{})},commands:function(e){var t=e.search;return(0,Jn.w)({paths:a,search:t,run:function(e){var t=(0,qn.Dp)({path:e});o({paneId:n,pane:{type:t,data:{path:e}}})}})}}}),[t,o,n,i])}({paneId:n}),o=function(e){var n=e.paneId,t=(0,re.Z)().fs,i=Xl();return(0,$n.Z)((function(){return{match:Qn.pl,data:{type:"context",label:"Files",icon:(0,r.tZ)(Jb.Z,{})},commands:function(e){var r=e.search,o=e.active;return(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(a){switch(a.label){case 0:return r||o?[4,t.listFiles()]:[2,[]];case 1:if((e=a.sent()).error)return[2,[]];if(!e.files)throw new Error("Expected files");return[2,(0,Jn.w)({paths:e.files,search:r,run:function(e){var t=(0,qn.Dp)({path:e});i({paneId:n,pane:{type:t,data:{path:e}}})}})]}}))}))()}}}),[t,i,n])}({paneId:n});return(0,$n.Z)((function(){return{match:Qn.pl,data:{type:"context",label:"Change tab",icon:(0,r.tZ)(ly.Z,{})},commands:function(e){var n=e.search,r=e.active;return n||r?[i,o,t]:[]}}}),[i,t,o])}var uy=d.K.div;function dy(e){var n=e.paneId,t=e.paneGroupId,i=e.isActive,o=e.onClose,a=e.dragGroup,s=(0,bs.Z)(e,["paneId","paneGroupId","isActive","onClose","dragGroup"]),u=Jl(n),d=(0,Hs.Z)(u.hasMovedWhileDragging),f=(0,Hs.Z)(u.isCommitted),v=Zl(),m=al(n),g=(0,qn.Se)(),Z=g.getTitle(m),b=g.Icon({pane:m,size:16}),y=(0,Hs.Z)(u.isActivePane),x=(0,Re.b2)({paneType:m.type}),w=(0,Yc.T)(),k=(0,c.useRef)(null),C=(0,l.Z)((0,df.c)({type:uf.z.Pane,item:function(){var e,t=(null===(e=k.current)||void 0===e?void 0:e.getBoundingClientRect().width)||80;return{type:uf.z.Pane,paneId:n,width:t}},collect:function(e){return{isDragging:e.isDragging()}}}),2),S=C[0].isDragging,I=C[1],T=ao(Ni);(0,c.useEffect)((function(){return T(S)}),[T,S]);var E=Tl({paneGroupId:t}).dnd,R=(0,c.useRef)(!1);(0,c.useEffect)((function(){a&&d&&(R.current=!0,window.addEventListener("click",(function(){R.current=!1})))}),[d,a]);var G=E&&a?function(e){1!==e.button&&Fs(e,{start:E.start,move:E.update,end:E.end})}:void 0;(0,c.useEffect)((function(){i&&k.current&&(0,Qb.Z)(k.current,{behavior:w?"auto":"smooth",scrollMode:"if-needed"})}),[i,w,k]);var P=function(e){var n=e.paneId,t=e.paneGroupId,i=(0,vc.Y6)(n),o=iy({paneId:n}),a=sy({paneId:n}),l=oy({paneId:n,paneGroupId:t}),c=(0,qn.Se)(),s=al(n);return(0,$n.Z)((function(){var e,n,t,u=null!==(n=null===i||void 0===i||null===(e=i.actions)||void 0===e?void 0:e.map(cy))&&void 0!==n?n:[],d=null!==(t=null===i||void 0===i?void 0:i.commands)&&void 0!==t?t:[];return{data:{type:"context",label:"Search actions",icon:(0,r.tZ)(c.Icon,{pane:s})},commands:function(){return(0,We.Z)(u).concat((0,We.Z)(d),[{data:{type:"group",key:"secondary"},commands:function(){return[o,a].concat((0,We.Z)(l)).filter(Boolean)}}])}}}),[i,c,s,o,a,l])}({paneGroupId:t,paneId:n}),D=(0,Cd.av)(),B=D.onContextMenu,U=D.openContextMenu;return(0,r.tZ)(r.HY,{children:(0,r.tZ)(uy,{ref:k,css:S?[p.l0.width(0),p.l0.visibility.hidden]:{":not(:last-of-type)":[p.l0.border({direction:"right",color:p.TV.outlineDimmest}),p.l0.highRes({borderRightWidth:.5})],":first-of-type > div":{borderTopLeftRadius:4,"[data-pane-tab-primary-button]":{borderTopLeftRadius:4},"[data-active-pane-line]":[{clipPath:"polygon(100% 0%, 100% 100%, 2.35px 100%, 3px 55%, 4px 13%, 5px 0%)"},p.l0.highRes({clipPath:"polygon(100% 0%, 100% 100%, 1.85px 100%, 2.5px 55%, 3.5px 13%, 4.5px 0%)"})]},":last-of-type [data-active-pane-line]":[{width:"calc(100% + 1px)"},p.l0.highRes({width:"calc(100% + 0.5px)"})]},onAuxClick:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation(),sf.n_({category:"pane",message:"Tab closed: "+m.type,data:{reason:"middle click"}}),(0,h.j)(h.U3.WS_TAB_CLOSED,{paneType:m.type}),o())},onMouseUp:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation())},children:(0,r.tZ)(Sy,{innerRef:G?void 0:I,title:Z,icon:"commands"!==m.type?b:void 0,isActive:i,isActivePane:y,italicizeTitle:!!(0,qn.Ur)(m)&&!f,paneId:n,indicatorColor:x,onClick:i?function(e){!R.current&&i&&(U({target:e.currentTarget,command:P}),v(n)),R.current=!1}:function(){},onContextMenu:function(e){return B(e,{command:P})},onMouseDown:function(){i||(R.current=!0,sf.n_({category:"pane",message:"Tab clicked: "+m.type}),(0,h.j)(h.U3.WS_TAB_OPENED,{paneType:m.type}),s.onClick())},onPointerDown:G,onClose:function(){sf.n_({category:"pane",message:"Tab closed: "+m.type}),(0,h.j)(h.U3.WS_TAB_CLOSED,{paneType:m.type}),o()}})})})}var py=d.K.button,fy=(0,i.iv)([p.l0.display.inlineFlex,p.l0.height("100%"),p.l0.flex.row,p.l0.align.center,p.l0.position.relative,p.l0.minWidth(p.TV.space96),{userSelect:"none","& > *":p.l0.height("100%")}]),hy=(0,i.iv)([fy,p.l0.color.foregroundDimmer,{backgroundColor:"transparent"}]),vy=(0,i.iv)([fy,p.l0.color.foregroundDefault,{boxShadow:"0 1px 0 0 "+te.vb.surfaceBackground,"data-pane-tab-primary-button":[p.l0.transition.none,p.l0.hover({boxShadow:"0 1px 0 0 "+te.vb.interactiveBackground})]}]),my=(0,de.X)({notificationDot:[p.l0.top(3),p.l0.right(3)]}),gy=(0,i.iv)([p.l0.position.relative]),Zy=(0,i.iv)([p.l0.pr(16)]),by=(0,i.iv)([p.l0.truncate,p.l0.maxWidth(180),p.l0.display.inlineBlock]),yy=(0,i.iv)([p.l0.width(16),p.l0.height(16),p.l0.position.relative]),xy=(0,i.iv)([p.l0.position.relative,p.l0.cursor.pointer,p.l0.align.center,p.l0.rowWithGap(6),p.l0.px(6),p.l0.focusRing,te.gU.listItem,p.l0.flex.growAndShrink(1),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]),wy=(0,i.iv)([p.l0.height(1),p.l0.top(0),p.l0.left(-1),{position:"absolute",pointerEvents:"none",width:"calc(100% + 2px)",backgroundColor:p.TV.accentPrimaryDefault},p.l0.highRes({left:-.5,width:"calc(100% + 1px)"})]),ky=(0,de.X)({button:[p.l0.reset.button,p.l0.center,p.l0.width(20),p.l0.height("100%"),p.l0.borderRadius(0),p.l0.color.foregroundDimmest,p.l0.hover(p.l0.color.foregroundDefault)]});function Cy(e){var n=e.onClick,t=e.tabIndex;return(0,r.tZ)(ee.hU,{onClick:n,alt:"Close tab",tabIndex:t,css:ky.button,size:12,children:(0,r.tZ)(xp.Z,{})})}function Sy(e){var n=e.title,t=e.onClick,i=e.onContextMenu,o=e.onClose,a=e.isActive,s=e.isActivePane,u=e.italicizeTitle,p=e.innerRef,f=e.icon,h=e.onMouseDown,v=e.onPointerDown,m=e.paneId,g=e.indicatorColor,Z=c.useRef(null),b=(0,l.Z)((0,Ff.XZ)(Z,!1),4),y=b[0],x=b[1],w=b[2],k=b[3];return(0,Ff.Ym)(x,Z),(0,r.BX)(Q.Tg,{elevated:a,innerRef:p,css:a?vy:hy,children:[(0,r.BX)(py,{role:"tab",ref:Z,tabIndex:y,onKeyDown:w,onMouseDown:h,onClick:function(e){k(),t(e)},onPointerDown:v,onContextMenu:i,css:xy,"aria-selected":a,"aria-controls":m,id:"tab-".concat(m),"data-pane-tab-primary-button":!0,children:[f?(0,r.tZ)(d.G,{css:[{opacity:a?1:.6},yy],children:f}):null,(0,r.BX)(d.G,{css:[gy,g&&Zy],children:[(0,r.tZ)(ne.xv,{multiline:!1,css:[by,{fontStyle:u?"italic":"inherit"}],children:n}),g?(0,r.tZ)(Zc,{css:my.notificationDot,color:g}):null]})]}),(0,r.tZ)(Ry,{paneId:m,isActive:a}),(0,r.tZ)(Cy,{onClick:o,tabIndex:x?0:-1}),s?(0,r.tZ)(d.G,{css:wy,"data-active-pane-line":!0}):null]})}var Iy=(0,de.X)({containerOuter:{display:"grid",transition:"grid-template-columns 120ms ease-out"}}),Ty=(0,de.X)({containerOuterHidden:[Iy.containerOuter,{gridTemplateColumns:"0fr",visibility:"hidden"}],containerOuterVisible:[Iy.containerOuter,{gridTemplateColumns:"1fr",visibility:"visible"}],root:[p.l0.flex.row,p.l0.overflow("hidden")],button:[p.l0.height("100%"),p.l0.center,p.l0.borderRadius(0),p.l0.width(20),p.l0.color.foregroundDimmer,p.l0.hover([p.l0.color.foregroundDefault])]});function Ey(e){var n=e.icon,t=e.run,i=e.label,o=e.dataCy;return(0,r.tZ)(ee.hU,{css:Ty.button,onClick:function(){return t(null)},dataCy:o,alt:i,size:12,children:n})}function Ry(e){var n=e.paneId,t=e.isActive,i=(0,vc.Y6)(n),o=null===i||void 0===i?void 0:i.actions;return(null===o||void 0===o?void 0:o.length)?(0,r.tZ)(d.G,{css:t?Ty.containerOuterVisible:Ty.containerOuterHidden,children:(0,r.tZ)(d.G,{css:Ty.root,children:o.map((function(e){var n=e.label,t=(0,bs.Z)(e,["label"]);return(0,r.tZ)(Ey,(0,m.Z)({label:n},t),n)}))})}):null}function Gy(){var e=(0,re.Z)().presence,n=(0,l.Z)(c.useState(e.getFollowingUsers()),2),t=n[0],r=n[1];return c.useEffect((function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){r(e.followingUsers)}))}),[e]),t}function Py(){var e=(0,g.Z)(["\n  query WorkspaceActiveUserImages($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return Py=function(){return e},e}var Dy={},By=(0,Z.Ps)(Py());function Uy(e){var n=function(e){var n=(0,m.Z)({},Dy,e);return M.a(By,n)}({variables:{userIds:e.slice(0,Tu.I)},skip:0===e.length}).data;return n?new Map(n.usersByIds.map((function(e){return[e.id,e.image]}))):null}var Ay={root:(0,i.iv)([p.l0.rowWithGap(4),p.l0.align.center]),text:(0,i.iv)([p.l0.flex.shrink(1),p.l0.align.center]),username:(0,i.iv)([p.l0.flex.shrink(2),p.l0.maxWidth(140),p.l0.truncate])};function Ly(){var e=Gy();return 0===e.length?null:1===e.length?(0,r.tZ)(Oy,{user:e[0]}):(0,r.BX)(ne.xv,{variant:"small",color:"dimmest",css:Ay.text,multiline:!1,children:[e.length," users are observing you"]})}function Oy(e){var n=e.user,t=n.id,i=n.username,o=n.color,a=Uy([t]),l={id:t,username:i,color:o,image:null===a||void 0===a?void 0:a.get(t)};return(0,r.BX)(d.G,{css:Ay.root,children:[(0,r.tZ)(ae.q,{size:16,src:l.image||null,username:l.username,ringColor:l.color}),(0,r.tZ)(ne.xv,{variant:"small",color:"dimmer",css:Ay.username,multiline:!1,children:i}),(0,r.tZ)(ne.xv,{variant:"small",color:"dimmest",css:Ay.text,multiline:!1,children:"is observing you"})]})}var _y={root:(0,i.iv)([p.l0.rowWithGap(4),p.l0.align.center]),text:(0,i.iv)([p.l0.flex.shrink(1),p.l0.align.center]),username:(0,i.iv)([p.l0.flex.shrink(2),p.l0.maxWidth(140),p.l0.truncate])};function Xy(e){var n=e.id,t=e.username,i=e.color,o=Uy([n]),a=(0,re.Z)().presence,l={id:n,username:t,color:i,image:null===o||void 0===o?void 0:o.get(n)};return(0,r.BX)(d.G,{css:_y.root,children:[(0,r.tZ)(ae.q,{size:16,src:l.image||null,username:l.username,ringColor:l.color}),(0,r.tZ)(ne.xv,{css:_y.text,variant:"small",color:"dimmest",multiline:!1,children:"Observing"}),(0,r.tZ)(ne.xv,{css:_y.username,variant:"small",color:"dimmer",multiline:!1,children:t}),(0,r.tZ)(ee.hU,{alt:"Stop observing",size:18,onClick:function(){a.unfollowUser()},children:(0,r.tZ)(xp.Z,{})})]})}var zy=t(77463);function My(e){var n=e.paneId,t=al(n),i=function(e){var n=e.paneId,t=(0,zy.Z)(),r=hl({paneId:n});return t&&r?t:null}({paneId:n}),o=function(e){var n=e.paneId,t=Gy();return hl({paneId:n})&&t.length>0?t:null}({paneId:n}),a=(0,qn.Ur)(t)?t.data.path:null,l=null;return i&&(l=(0,r.tZ)(Xy,{id:i.id,username:i.username,color:i.color})),null!==l||o?(0,r.BX)(d.G,{css:[p.l0.px(4),p.l0.rowWithGap(8)],children:[o&&a?(0,r.tZ)(Ly,{}):null,l]}):null}var jy=d.K.div,Wy=(0,i.iv)([p.l0.flex.growAndShrink(1),p.l0.minWidth(16),p.l0.height("100%"),{borderBottom:"1px solid ".concat(p.TV.outlineDimmest)},p.l0.highRes({borderBottomWidth:.5})]);function Ny(e){var n=e.paneGroupId,t=e.activeTabPaneId,i=Tl({paneGroupId:n}),o=i.isDragging,a=i.dnd,l=Pl().toggleMaximizedPaneGroup,c=ec(n),s=(0,Hs.Z)(c.isMaximized),u=fl();if(!a)return null;var d=o?"grabbing":"grab";return(0,r.tZ)(jy,{onDoubleClick:function(){l({paneGroupId:n})},css:Wy,style:{cursor:s?void 0:d},onPointerDown:function(e){u(t),s||0===e.button&&Fs(e,{start:a.start,move:a.update,end:a.end})}})}var Fy=t(18988),Vy=(0,Fn.cn)([]);function Hy(e,n){var t=n.run,r=n.enabled,i=void 0===r||r,o=(0,Vn.b9)(Vy);(0,c.useEffect)((function(){if(i){var n=(Array.isArray(e)?e:[e]).map((function(e){return{shortcut:e,run:t}}));return o((function(e){return(0,We.Z)(e).concat((0,We.Z)(n))})),function(){o((function(e){return e.filter((function(e){return!n.includes(e)}))}))}}}),[e,t,o,i])}function Yy(){var e=(0,Vn.Dv)(Vy);return(0,c.useEffect)((function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l,c=o.value,s=c.shortcut,u=c.run;Boolean(s.cmdOrCtrlKey)===Boolean((0,pd.j)(n))&&Boolean(s.altKey)===Boolean(n.altKey)&&Boolean(s.shiftKey)===Boolean(n.shiftKey)&&(null===(l=s.key)||void 0===l?void 0:l.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),u(s))}}catch(d){r=!0,i=d}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[e]),null}function qy(e){var n,t=null!==(n=e.size)&&void 0!==n?n:20;return(0,r.tZ)(d.G,{css:[p.l0.center,{fontSize:p.TV.fontSizeSmall,border:"1px solid",borderColor:p.TV.outlineDefault},p.l0.borderRadius(8)],style:{width:t,height:t},children:(0,r.tZ)(d.G,{css:{lineHeight:1},children:e.count})})}var Ky=t(87093),$y=t(6046),Qy=t(72123),Jy=t(18617),ex=new Map([["leftOf",{commandId:KZ.insertPaneGroupUp.id,label:"Insert Left",icon:(0,r.tZ)(Wa.Z,{})}],["rightOf",{commandId:KZ.insertPaneGroupRight.id,label:"Insert Right",icon:(0,r.tZ)(Na.Z,{})}],["above",{commandId:KZ.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,r.tZ)(Fa.Z,{})}],["below",{commandId:KZ.insertPaneGroupDown.id,label:"Insert Down",icon:(0,r.tZ)(Va.Z,{})}]]);function nx(e){var n=e.paneId,t=ec(e.paneGroupId),i=(0,Hs.Z)(t.isMaximized),o=(0,Hs.Z)(t.isFloating),a=!i&&!o,c=function(e){var n=e.paneId,t=(0,Qy.xF)(),r=Vl();return(0,$n.Z)((function(){var e;return(0,We.Z)(ex.entries()).map((function(i){var o,a=(0,l.Z)(i,2),c=a[0],s=a[1],u=s.commandId,d=s.label,p=s.icon;return{match:Qn.pl,data:{label:d,icon:p,type:"action",keyboardShortcut:null!==(e=null===(o=t.get(u))||void 0===o?void 0:o.shortcut)&&void 0!==e?e:void 0,run:function(){r({placement:c,paneId:n,autoFocus:!0}),(0,h.j)(h.U3.WS_SPLIT_USED,{action:"opened",placement:c})}}}}))}),[t,r,n])}({paneId:n});return(0,$n.Z)((function(){if(!a)return[];var e=c;return[{match:Qn.pl,data:{type:"context",label:"Add pane",icon:(0,r.tZ)(Jy.Z,{})},commands:function(n){var t=n.active,r=n.search;return t||r?e:[]}}]}),[a,c])}var tx=t(76898),rx=t(89138),ix=t(32383),ox=t(68155),ax=new Map([["left",{label:"Move Left",icon:(0,r.tZ)(rx.Z,{})}],["right",{label:"Move Right",icon:(0,r.tZ)(ey.Z,{})}],["up",{label:"Move Up",icon:(0,r.tZ)(ix.Z,{})}],["down",{label:"Move Down",icon:(0,r.tZ)(tx.Z,{})}]]);var lx=new Map([["leftOf",{label:"Move Left",icon:(0,r.tZ)(rx.Z,{})}],["rightOf",{label:"Move Right",icon:(0,r.tZ)(ey.Z,{})}],["above",{label:"Move Up",icon:(0,r.tZ)(ix.Z,{})}],["below",{label:"Move Down",icon:(0,r.tZ)(tx.Z,{})}]]);function cx(e){var n=e.paneGroupId,t=e.paneId,i=nx({paneId:t,paneGroupId:n}),o=function(e){var n=Jl(e.paneId),t=ml(),i=(0,Hs.Z)(n.isFloating),o=!t&&!i,a=Ll();return(0,$n.Z)((function(){var e=(0,We.Z)(lx.entries()).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:Qn.pl,data:{label:i,icon:o,type:"action",run:function(){a(t)}}}}));return o?[{match:Qn.pl,data:{type:"context",label:"Move tab",icon:(0,r.tZ)(wg.Z,{})},commands:function(n){var t=n.active,r=n.search;return t||r?e:[]}}]:[]}),[o,a])}({paneId:t}),a=function(e){var n=ec(e.paneGroupId),t=(0,Hs.Z)(n.isMaximized),i=(0,Hs.Z)(n.isFloating),o=!t&&!i,a=dl();return(0,$n.Z)((function(){var e=(0,We.Z)(ax.entries()).map((function(e){var n=(0,l.Z)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:Qn.pl,data:{label:i,icon:o,type:"action",run:function(){a({direction:t})}}}}));return o?[{match:Qn.pl,data:{type:"context",label:"Move group",icon:(0,r.tZ)(ox.Z,{})},commands:function(n){var t=n.active,r=n.search;return t||r?e:[]}}]:[]}),[o,a])}({paneGroupId:n}),c=function(e){var n=e.paneGroupId,t=Pl(),i=t.maximizePaneGroup,o=t.restoreMaximizedPaneGroup,a=ec(n),l=(0,Hs.Z)(a.isMaximized),c=(0,Pc.gf)(KZ.toggleMaximizePaneGroup.id);return(0,$n.Z)((function(){return l?[{match:Qn.pl,data:{type:"action",label:"Restore",icon:(0,r.tZ)($y.Z,{}),run:function(){return o()},keyboardShortcut:c}}]:[{match:Qn.pl,data:{type:"action",label:"Maximize",icon:(0,r.tZ)(Ky.Z,{}),run:function(){return i({paneGroupId:n})},keyboardShortcut:c}}]}),[l,c,o,i,n])}({paneGroupId:n}),s=function(e){var n=e.paneGroupId,t=Fl(),i=sl(),o=(0,Pc.gf)(KZ.removePaneGroup.id);return(0,$n.Z)((function(){return[{match:Qn.pl,data:{type:"action",label:"Close",icon:(0,r.tZ)(xp.Z,{}),run:function(){i(),t({paneGroupId:n})},keyboardShortcut:o}}]}),[i,t,o,n])}({paneGroupId:n}),u=function(e){var n=e.paneId,t=e.paneGroupId,i=Rl(),o=ec(t),a=(0,Hs.Z)(o.isMaximized),l=(0,Hs.Z)(o.isFloating),c=(0,Pc.gf)(KZ.toggleFloatPaneGroup.id);return(0,$n.Z)((function(){return a?[]:[{match:Qn.pl,data:{type:"action",label:l?"Unfloat":"Float",icon:l?(0,r.tZ)(Ha.Z,{}):(0,r.tZ)(Iv.Z,{}),keyboardShortcut:c,run:function(){i(n)}}}]}),[n,i,c,l,a])}({paneId:t,paneGroupId:n});return(0,$n.Z)((function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,We.Z)(i).concat((0,We.Z)(o),(0,We.Z)(a),(0,We.Z)(c),(0,We.Z)(u),(0,We.Z)(s))}}]}),[i,o,a,c,u,s])}function sx(e){var n=e.paneGroupId,t=e.paneId,i=function(e){var n=e.paneId,t=e.paneGroupId,i=(0,qn.Se)(),o=al(n),a=(0,vc.Y6)(n),l=iy({paneId:n}),c=oy({paneId:n,paneGroupId:t});return(0,$n.Z)((function(){var e,n,t,s=i.getTitle(o),u=null!==(n=null===a||void 0===a||null===(e=a.actions)||void 0===e?void 0:e.map(ay))&&void 0!==n?n:[],d=null!==(t=null===a||void 0===a?void 0:a.commands)&&void 0!==t?t:[],p=(0,We.Z)(u).concat((0,We.Z)(d),[{data:{type:"group",key:"pane-close"},commands:function(){return[l].concat((0,We.Z)(c)).filter(Boolean)}}]),f={match:Qn.pl,data:{type:"context",label:s,icon:(0,r.tZ)(i.Icon,{pane:o})},commands:function(e){var n=e.active,t=e.search;return n||t?p:[]}};return f}),[o,a,i,l,c])}({paneId:t,paneGroupId:n}),o=function(e){var n=e.paneGroupId,t=e.paneId,i=Wl(),o=(0,qn.Se)(),a=bl(),c=Ol(),s=sy({paneId:t});return(0,$n.Z)((function(){var e=i.tiling,t=i.floating,u=e.reduce((function(e,n){return e+n.panes.length}),0)+t.reduce((function(e,n){return e+n.panes.length}),0),d={match:Qn.pl,data:{type:"action",label:"New tab",icon:(0,r.tZ)(pc.Z,{}),run:function(){c({paneGroupId:n,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return u?[s,{match:Qn.pl,data:{type:"context",label:(0,_n.Z)("Tab",u),icon:(0,r.tZ)(qy,{count:u})},commands:function(n){var i=n.active,c=n.search;if(!i&&!c)return[];var s=(0,We.Z)(e).concat((0,We.Z)(t)).map((function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map((function(e){var n=(0,l.Z)(e,2),t=n[0],i=n[1];return{match:Qn.pl,data:{type:"action",label:o.getTitle(i),icon:(0,r.tZ)(o.Icon,{pane:i}),run:function(){a({paneId:t,activate:!0})}}}}))}}}));return s.unshift(d),s}}]:[s,d]}),[i,o,a,c,n,s])}({paneId:t,paneGroupId:n}),a=cx({paneGroupId:n,paneId:t});return(0,$n.Z)((function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[i].concat((0,We.Z)(o),(0,We.Z)(a))}}}),[i,o,a])}var ux=t(76594),dx=(0,i.F4)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),px=(0,de.X)({root:[p.l0.position.relative,{overflow:"hidden"}],border:ux.w7.border,arrows:[p.l0.position.absolute,p.l0.top(0),p.l0.left(0),p.l0.flex.row,p.l0.flex.wrap,{animationName:dx,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[p.l0.width("50%"),p.l0.height("50%"),p.l0.center]});function fx(e){var n=e.delay,t=e.duration;return(0,r.BX)(d.G,{style:{width:20,height:20},css:px.root,children:[(0,r.tZ)(d.G,{css:px.border}),(0,r.BX)(d.G,{css:px.arrows,style:{width:40,height:40,animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,r.tZ)(d.G,{css:px.arrow,children:(0,r.tZ)(tx.Z,{size:12})}),(0,r.tZ)(d.G,{css:px.arrow,children:(0,r.tZ)(rx.Z,{size:12})}),(0,r.tZ)(d.G,{css:px.arrow,children:(0,r.tZ)(ey.Z,{size:12})}),(0,r.tZ)(d.G,{css:px.arrow,children:(0,r.tZ)(ix.Z,{size:12})})]})]})}var hx=(0,de.X)({overlay:[p.l0.align.end,p.l0.p(16),p.l0.position.absolute,p.l0.overflow("hidden"),p.l0.zIndex(uo.overlay)],surface:[p.l0.position.relative,p.l0.borderRadius(8),p.l0.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:p.TV.outlineDefault,opacity:0},p.l0.shadow(3)],innerSurface:[p.l0.flex.growAndShrink(1),p.l0.borderRadius(8)]});function vx(){var e=ml(),n=io(na);if(n){var t=function(e){return{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")}}(n),r=t.width,i=t.height,o=t.transform,a={border:"1px solid",borderColor:p.TV.accentPrimaryStronger,borderRadius:p.TV.borderRadius6,boxShadow:p.TV.shadow3,transitionProperty:"transform, height, width",transitionDuration:Ee.H.duration,transitionTimingFunction:Ee.H.timingFunction};return(0,m.Z)({width:r,height:i,transform:o},e?void 0:a)}}var mx=(0,de.X)({root:[p.l0.colWithGap(8),p.l0.p(8),{borderTop:"1px solid",borderColor:p.TV.outlineDimmer}],row:[p.l0.rowWithGap(2),p.l0.align.center,p.l0.justify.spaceBetween]}),gx=6e3;function Zx(){return(0,r.BX)(d.G,{css:mx.root,children:[(0,r.BX)(d.G,{css:mx.row,children:[(0,r.tZ)(ne.xv,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,r.tZ)(ux.ZP,{size:"small",shortcut:{cmdOrCtrlKey:!0,key:(0,r.tZ)(fx,{duration:gx})}})]}),(0,r.BX)(d.G,{css:mx.row,children:[(0,r.tZ)(ne.xv,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,r.tZ)(ux.ZP,{size:"small",shortcut:{shiftKey:!0,cmdOrCtrlKey:!0,key:(0,r.tZ)(fx,{duration:gx,delay:1500})}})]})]})}var bx=(0,c.memo)((function(){var e=vx(),n=sl(),t=(0,Op.Z)(n,[]);return(0,c.useEffect)((function(){var e=setTimeout((function(){(0,Kf.A)(t,"opacity","1")}));return function(){clearTimeout(e)}}),[t]),(0,r.tZ)(Fy.MT,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,r.tZ)(d.G,{style:e,css:hx.overlay,children:(0,r.tZ)(Q.Tg,{innerRef:t,elevated:!0,css:hx.surface,children:(0,r.tZ)(Q.Tg,{css:hx.innerSurface,elevated:!0,children:(0,r.tZ)(kx,{})})})})})})),yx={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},xx={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},wx=Object.keys(yx),kx=(0,c.memo)((function(){var e=ul(),n=dl(),t=cl(),i=ml();Hy({key:"Escape"},{run:function(){t()}}),Hy(wx.map((function(e){return{key:e,cmdOrCtrlKey:!0}})),{run:function(n){e(yx[n.key])},enabled:!i}),Hy(wx.map((function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}})),{run:function(e){n({direction:xx[e.key]})},enabled:!i});var o=io(ea);return o?"sidebar"===o.target?null:(0,r.tZ)(r.HY,{children:(0,r.tZ)(Cx,{paneGroupId:o.paneGroupId,paneId:o.paneId})}):null}));function Cx(e){var n,t=ml(),i=sl(),o=cl(),a=sx(e),l=(0,Ta.Z)().preferences;return(0,r.tZ)(Nn.X,{iconBreadcrumbs:!0,command:a,onAction:function(){return i()},onKeyDown:function(e,n){var t=n.inputValue,r=n.hasHighlightedItem;if("Enter"===e.key&&!t&&!r)return e.preventDefault(),void o();(0,pd.j)(e)&&e.preventDefault()},footer:t?null:(0,r.tZ)(Zx,{}),fontSize:null!==(n=l.fontSize)&&void 0!==n?n:14,compact:!0})}var Sx={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,zc.l2)({cmdOrCtrl:!0,key:"j"})};function Ix(){var e=ao(ia),n=io(oa);return(0,Pc.Il)((function(){return[Sx.id,function(){return e()}]}),[e]),n?(0,r.tZ)(bx,{}):null}var Tx=t(87833);var Ex=t(87650),Rx=(0,de.X)({left:[p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.align.center,p.l0.height("100%")],right:[p.l0.flex.row],scrollbar:[p.l0.flex.row,p.l0.flex.shrink(1),p.l0.align.center,p.l0.height("100%"),{"& > .os-viewport":p.l0.height("100%")}],newTabContainer:[{height:"100%",borderBottom:"1px solid "+p.TV.outlineDimmest,borderLeft:"1px solid "+p.TV.outlineDimmest,justifyContent:"stretch"},p.l0.highRes({borderBottomWidth:.5,borderLeftWidth:.5})],newTab:[p.l0.height(31),p.l0.width(24),p.l0.borderRadius(0),p.l0.color.foregroundDimmer,p.l0.highRes(p.l0.height(31.5))],moreActionsContainer:[{height:"100%",borderBottom:"1px solid "+p.TV.outlineDimmest,justifyContent:"stretch"},p.l0.highRes({borderBottomWidth:.5})],moreActions:[p.l0.height(31),p.l0.width(24),p.l0.borderRadius(0,4,0,0),p.l0.color.foregroundDimmest,p.l0.highRes(p.l0.height(31.5))],tabContainer:[p.l0.flex.row,p.l0.height("100%"),{borderBottom:"1px solid "+p.TV.outlineDimmest},p.l0.highRes({borderBottomWidth:.5})],tabPreviewWrap:[p.l0.p(4)],tabPreview:[p.l0.borderRadius(4),p.l0.height("100%"),p.l0.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(p.TV.accentPrimaryDimmer)}]});function Gx(e){var n=e.headerId,t=Dl(),i=Ol(),o=ao(ji),a=wl(),s=Ul(),u=Al(n),f=(0,Hs.Z)(u.activeIndex),h=(0,Hs.Z)(u.activeTabPaneId),v=(0,Hs.Z)(u.panes),m=function(e){var n=e.visibility,t=(0,Qv.F)().isDarkColorScheme,r=(0,c.useState)(!1),i=r[0],o=r[1],a=(0,c.useState)(null),s=a[0],u=a[1],d=(0,l.Z)((0,Tx.A)({options:{overflow:{y:"hidden",x:"scroll"},update:{debounce:[100,200]},scrollbars:{theme:t?"os-theme-light":"os-theme-dark",autoHide:"leave",visibility:n}},events:{initialized:function(){return o(!0)},destroyed:function(){return o(!1)}}}),2),p=d[0],f=d[1],h=(0,c.useCallback)((function(e){e&&u(e)}),[]);(0,c.useEffect)((function(){s&&!i&&(p(s),o(!0))}),[s,p,i]);var v=(0,c.useRef)(0),m=(0,c.useRef)(!1);return{ref:h,initialized:i,handleWheel:function(e){var n=f();if(n&&0!==e.deltaY&&0===e.deltaX){var t=n.elements().viewport,r=t.scrollLeft,i=e.deltaY,o=t.scrollWidth;m.current=!0,v.current=Math.max(0,Math.min(o,r+i)),t.scrollLeft=v.current}}}}({visibility:s?"hidden":"auto"}),g=(0,l.Z)((0,Ib.L)({accept:[Tn.Tv.File,uf.z.Pane,uf.z.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&w({item:e,panes:v,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,t){if(!t.didDrop()){var r=null!==(null===k||void 0===k?void 0:k.index)?null===k||void 0===k?void 0:k.index:v.length;if("nodes"!==e.type)if(e.type!==uf.z.NewPane){if("paneId"in e){var a=v.includes(e.paneId)?v.length-1:v.length;o({paneId:e.paneId,index:void 0!==r&&r<a?r:a,toPaneGroupId:n})}}else i({activate:!0,paneGroupId:n,index:r,panes:[e.pane]});else{var l=(0,qn.ME)(e.nodes);l.length>0&&i({activate:!0,commit:!0,paneGroupId:n,index:r,panes:l})}}}}),2),Z=g[0],b=g[1],y=function(e){var n=e.isOver,t=(0,c.useState)(null),r=t[0],i=t[1],o=(0,c.useRef)(null),a=(0,c.useRef)([]);(0,c.useEffect)((function(){if(!n)return a.current=[],void i(null);o.current&&(a.current=(0,We.Z)(o.current.children).map((function(e){var n=e.getBoundingClientRect();return n.x+n.width/2})))}),[n]);var l=(0,c.useCallback)((function(e){if(0!==a.current.length){var n=e.item.type===uf.z.Pane?e.item:null,t=(null===n||void 0===n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null===n||void 0===n?void 0:n.width)||80,l=a.current.map((function(e,n){return-1===r||r<n?e:e+o/2})).findIndex((function(n){return n>e.sourceClientOffset})),c=-1===l,s=-1===r?e.panes.length:e.panes.length-1;i({index:c?s:Math.min(l,s),paneId:t,width:o})}}),[]);return{tabContainerRef:o,hover:l,dropState:r}}({isOver:Z.isOver}),x=y.tabContainerRef,w=y.hover,k=y.dropState,C=ao(ta),S=(0,Pc.gf)(Sx.id),I=k?k.index:null;if((null===k||void 0===k?void 0:k.paneId)&&null!==I){var T=v.indexOf(k.paneId);T>-1&&T<I&&I++}var E=k&&null!==I?(0,We.Z)(v.slice(0,I)).concat([k],(0,We.Z)(v.slice(I))):v;return(0,r.BX)(r.HY,{children:[(0,r.BX)(d.G,{css:Rx.left,innerRef:b,role:"tablist",children:[(0,r.BX)(Ff.uP,{children:[(0,r.tZ)(d.G,{onWheel:m.handleWheel,style:{opacity:m.initialized?1:0},innerRef:m.ref,css:Rx.scrollbar,children:(0,r.tZ)(d.G,{innerRef:x,css:Rx.tabContainer,children:E.map((function(e,i){var o=f===i;return"string"!==typeof e?(0,r.tZ)(d.G,{css:Rx.tabPreviewWrap,children:(0,r.tZ)(d.G,{style:{width:e.width},css:Rx.tabPreview})},"preview"):(0,r.tZ)(dy,{dragGroup:1===v.length,paneId:e,paneGroupId:n,isActive:o,onClick:function(){t(e)},onClose:function(){a(e)}},e)}))})}),(0,r.tZ)(d.G,{css:Rx.newTabContainer,children:(0,r.tZ)(ee.hU,{css:Rx.newTab,alt:"New tab",tooltipHidden:!0,size:12,onClick:function(){i({paneGroupId:n,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,r.tZ)(pc.Z,{})})})]}),(0,r.tZ)(Ny,{paneGroupId:n,activeTabPaneId:h})]}),(0,r.tZ)(My,{paneId:h}),(0,r.tZ)(d.G,{css:Rx.right,children:(0,r.tZ)(d.G,{css:Rx.moreActionsContainer,children:(0,r.tZ)(ee.hU,{css:Rx.moreActions,onClick:function(){return C(h)},alt:"Pane actions",tooltipHidden:void 0===S,tooltipPlacement:"left",tooltipContents:S?(0,r.tZ)(Pc.bM,{keyCombo:S}):null,children:(0,r.tZ)(Ex.Z,{color:p.TV.foregroundDimmest})})})})]})}var Px=(0,c.memo)(Gx),Dx=(0,so.$)(["left","top","scale","transformOriginX","width","height","zIndex","transitionDuration"]),Bx=Dx.cssVars,Ux=Dx.styleTokens,Ax="color-mix(in srgb, ".concat(te.vb.interactiveBackground," 60%, ").concat(te.vb.surfaceBackground,")"),Lx=(0,i.iv)([p.l0.borderRadius(4,4,0,0),p.l0.position.absolute,p.l0.flex.row,p.l0.align.center],{transformOrigin:"".concat(Ux.transformOriginX," bottom"),top:Ux.top,left:Ux.left,width:Ux.width,height:Ux.height,transform:"scale(".concat(Ux.scale,")"),transitionDuration:Ux.transitionDuration,transitionProperty:"top, left, width, height",transitionTimingFunction:"ease-out",backgroundColor:Ax});function Ox(e){var n=e.headerId,t=(0,Yc.T)(),i=Al(n),o=(0,Hs.Z)(i.activeTabPaneId),a=ec(n),l=(0,Hs.Z)(a.isFloating),s=(0,c.useRef)(null);return(0,co.j)(s,a.size,(function(e){var n,t=e.width,r=e.height;return n={},(0,f.Z)(n,Bx.width,t+"px"),(0,f.Z)(n,Bx.height,r+"px"),n})),(0,co.j)(s,a.position,(function(e){var n,t=e.x,r=e.y;return n={},(0,f.Z)(n,Bx.left,Math.round(t)+"px"),(0,f.Z)(n,Bx.top,Math.round(r)+"px"),n})),(0,co.j)(s,a.scale,(function(e){return(0,f.Z)({},Bx.scale,e.toString())})),(0,co.j)(s,a.transformOriginX,(function(e){return(0,f.Z)({},Bx.transformOriginX,e)})),(0,co.j)(s,a.animate,(function(e){return(0,f.Z)({},Bx.transitionDuration,e&&t?"140ms":"0ms")})),(0,co.j)(s,a.zIndex,(function(e){return{"z-index":e.toString()}})),(0,r.BX)(Q.Tg,{innerRef:s,css:Lx,children:[(0,r.tZ)(Px,{headerId:n}),l?(0,r.tZ)(Mb,{paneId:o}):null]})}var _x=(0,c.memo)(Ox),Xx=t(10207),zx=t(48749),Mx=t(70189),jx=t(391),Wx=t(84343),Nx=t(85460),Fx=t(20194),Vx=t(61335),Hx=t(83966),Yx=t(96834),qx=t(30311),Kx={Content:function(e){var n=e.options,t=n.paneId,i=n.performPaneOperation,o=(0,qe.Z)().showError,a=(0,re.Z)(),l=a.container,s=a.runner,u=a.fs,d=Dl(),p=(0,c.useState)((function(){return function(){}})),f=p[0],h=p[1];(0,Yx.Z)({container:l,runner:s,refreshWebView:f}),(0,qx.Z)({runner:s,refreshWebView:f}),(0,Pc.Il)((function(){return[$x.id,function(){d(t),f()}]}),[f,d]),jc({match:Qn.pl,data:{type:"action",label:"Refresh",icon:(0,r.tZ)(Hx.Z,{}),description:$x.name,keyboardShortcut:$x.default,run:function(){d(t),f()}}});var v=(0,su.Z)(Vc.y.Output),m=(0,Ia.T)();return(0,r.tZ)(Vx.Z,{runner:s,containerRef:m?v:void 0,openPane:function(e){i({operation:"open",pane:e})},openDotReplit:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return[4,u.stat(".replit")];case 1:return e.sent().exists?(i({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]):(o("Could not find .replit configuration file."),[2])}}))})),setRefreshCb:h})},Icon:function(e){var n=e.size;return(0,r.tZ)(zh.Z,{size:n})},getTitle:function(){return"Webview"},decode:t(5478).J},$x={id:"webviewpane.reload",name:"Refresh the webview",default:(0,zc.l2)({cmdOrCtrl:!0,shift:!0,key:"s"})};var Qx=t(34485),Jx=t(44916),ew=[gv,Mc,Sx].concat((0,We.Z)($Z),(0,We.Z)(Nx.Ic),(0,We.Z)(Fx.bO),[$x,Qx.s,Jx.x]);function nw(e){var n=(0,Wx.O)();return(0,r.tZ)(Pc.GO,{commands:ew,onChange:n,keybindings:e.keybindings,children:e.children})}var tw=t(7653),rw=t(93452),iw=t(29095);function ow(e){var n=e.children,t=gn.Z.get("stateCache","string"),i=t?(0,Xx._S)(t):(0,Xx.Ny)(),o=c.useRef(i);return(0,r.tZ)(Xx.ZP.Provider,{value:o,children:n})}function aw(e){var n=e.ui,t=e.services,i=e.replId,o=e.replLanguage,a=e.replSlug,l=e.replConfigIsExtension,c=e.userKeybindings,s=e.children,u=(0,$n.Z)((function(){return{id:i,language:o,slug:a,replConfigIsExtension:l}}),[i,o,a,l]);return(0,r.tZ)(nw,{keybindings:c,children:(0,r.tZ)(qn.kz,{value:n,children:(0,r.tZ)(ow,{children:(0,r.tZ)(zx.Z.Provider,{value:t,children:(0,r.tZ)(Mx.Z.Provider,{value:u,children:(0,r.tZ)(iw.$,{replId:i,container:t.container,fs:t.fs,dotReplit:t.dotReplit,children:(0,r.tZ)(jx.Wv,{children:(0,r.tZ)(tw.S2,{children:(0,r.tZ)(rw.Z,{children:s})})})})})})})})})}var lw=t(60253),cw=t(21927);function sw(){var e=(0,c.useState)(!1),n=e[0],t=e[1],i=Bl(),o=El(),a=(0,re.Z)().replspaceApi;return(0,c.useEffect)((function(){if(n)return a.onConfirmSendToken((function(e){e&&e(!0,!1)}))}),[n,a]),(0,lw.F)({insertConfigPlugin:function(){return i("config")},setConfigScreenLockIsOpen:t,openFile:o}),n?(0,r.tZ)(cw.Z,{}):null}function uw(){var e=io(ir),n=(0,zy.Z)();return e&&n?(0,r.tZ)("div",{css:[p.l0.position.absolute,p.l0.width(e.width),p.l0.height(e.height),p.l0.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null}var dw=(0,c.memo)(uw),pw=t(30251),fw=t(54314),hw=t(15642),vw=t(25202),mw=t(23223);function gw(){var e=ao(Vi),n=(0,mw.Z)({moveOrDeleteFile:e}),t=n.isConverging,i=n.didContentsDiverge,o=n.showMoreDetail,a=n.failedFiles,l=n.failedFilesOptions,c=n.selectedFile,s=n.setSelectedFile,u=n.reviewingPrompt,f=n.onChoice,h=n.local,v=n.remote,m=[p.l0.minHeight("7em"),p.l0.maxHeight("50vh"),p.l0.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,r.tZ)(He.u,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:i,onRequestClose:function(){},children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(ne.h4,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,r.BX)(ne.xv,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",a.length>1?"these files":"this file"," you'd like to keep."," ",a.length>1?(0,r.BX)("strong",{children:["There are ",a.length," files impacted by this."]}):""]}),t?(0,r.tZ)(hw.Z,{}):(0,r.BX)(r.HY,{children:[l.length?(0,r.tZ)(fw.P,{initialSelectedItem:l[0],selectedItem:l.find((function(e){return e.path===c})),items:l,onChange:function(e){s(e.path)}}):null,o?(0,r.BX)(d.G,{css:[p.l0.rowWithGap(16),p.l0.justify.start,p.l0.align.center,p.l0.pt(16),p.l0.p(8),p.l0.backgroundColor.redDimmest,p.l0.font.code],children:[(0,r.tZ)(ne.xv,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,r.BX)(ne.xv,{multiline:!1,children:["Divergence type: ",null===u||void 0===u?void 0:u.case]})]}):null,(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,r.tZ)(ne.xv,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,r.tZ)(Q.Tg,{elevated:!0,css:[p.l0.flex.growAndShrink(1),p.l0.py(8)],children:(0,r.tZ)(d.G,{css:m,children:(0,r.tZ)(vw.q,{diffViewer:h})})}),(0,r.BX)(d.G,{css:[p.l0.pt(16)],children:[(0,r.tZ)(ne.xv,{css:[p.l0.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,r.tZ)(J.zx,{onClick:function(){f("local")},text:"Reset to Mine"})]})]}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,r.tZ)(ne.xv,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,r.tZ)(Q.Tg,{elevated:!0,css:[p.l0.flex.growAndShrink(1),p.l0.py(8)],children:(0,r.tZ)(d.G,{css:m,children:(0,r.tZ)(vw.q,{diffViewer:v})})}),(0,r.BX)(d.G,{css:[p.l0.pt(16),p.l0.justify.end],children:[(0,r.tZ)(ne.xv,{css:[p.l0.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,r.tZ)(J.zx,{onClick:function(){f("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}function Zw(){var e=(0,Re.ev)(),n=(0,Re._o)(),t=(0,re.Z)().fs,i=function(){n(null)};return(0,r.tZ)(He.u,{isOpen:Boolean(e),onRequestClose:i,children:e?(0,r.tZ)(lu.Z,{name:e,description:e,entityType:"file",hideModal:i,delete:function(){e&&(t.deleteFile(e),n(null))}}):null})}var bw=t(1797),yw=t(92470),xw=t(27124),ww=t(7131),kw=(0,de.X)({content:[p.l0.colWithGap(24)],header:[p.l0.align.center],checkbox:[p.l0.rowWithGap(8)],footer:[p.l0.rowWithGap(16),p.l0.justify.spaceBetween,p.l0.align.center]}),Cw=.9999;function Sw(){var e,n,t,i=(0,re.Z)().fs,o=(0,c.useState)(null),a=o[0],l=o[1],s=(0,Ie.Z)(),p=(0,c.useState)(!1),f=p[0],g=p[1],Z=(0,c.useState)(!1),b=Z[0],y=Z[1],x=(0,c.useState)(!0),w=x[0],k=x[1],C=(0,c.useState)(!1),S=C[0],I=C[1],T=(0,mm.Pf)(),E=T.data,R=T.loading,G=T.refetch,P=(null===E||void 0===E||null===(e=E.currentUser)||void 0===e?void 0:e.userSubscriptionType)===v.HP.HackerPro,D=null===E||void 0===E||null===(n=E.currentUser)||void 0===n?void 0:n.username,B=D?(0,yw.Ru)(D):bw.$I,U=c.useId(),A=(0,u.P5)({controlName:"flag-areobotany-blues",logFlagToAnalytics:!1}),L=(0,c.useRef)(!1),O=(0,Bm.ZP)(),_=O.dataAtom.disk,X=_.currentAtom,z=_.totalAtom,M=O.loading,j=(0,Vn.Dv)(z),W=(0,Vn.Dv)(X),N=W/j,F=(0,Ma.Z)(N),V=null===E||void 0===E||null===(t=E.currentUser)||void 0===t?void 0:t.id,H=(0,Ma.Z)(null),Y=(0,c.useCallback)((function(e){"sampling"===e&&f||(F.current>Cw&&l(e),ww.kg.info("disk quota exceeded modal displayed",{replid:s,userid:V,currentReportedUtilization:1024*W*1024,totalReportedReplQuota:1024*j*1024}),(0,h.j)(h.U3.MODAL_VIEWED,{modalName:"disk_quota_exceeded_modal",cause:"storage",unsolicited:!0}))}),[F,f,l,W,s,j,V]);(0,c.useEffect)((function(){var e=setTimeout((function(){k(!1)}),6e4);return function(){return clearTimeout(e)}}),[]),(0,c.useEffect)((function(){if(!b){var e=i.onDiskQuotaExceeded((function(){1024===j?H.current=setTimeout((function(){Y("filesystem_service")}),3e4):Y("filesystem_service")}));return function(){e()}}}),[i,j,b,Y,H]),(0,c.useEffect)((function(){return function(){H.current&&clearTimeout(H.current)}}),[H]),(0,c.useEffect)((function(){var e;if(!(a||L.current||b||f||!A||M))return N>Cw&&(L.current=!0,e=setTimeout((function(){L.current=!1,F.current>Cw&&Y("sampling")}),1e4)),function(){clearTimeout(e)}}),[b,f,N,L,a,Y,F,A,M]);var q=(0,c.useCallback)((function(){"sampling"===a&&g(!0),l(null)}),[a]),K=(0,c.useCallback)((function(){G(),window.location.reload(),I(!1)}),[G,I]);return w?null:(0,r.tZ)(He.u,{isOpen:Boolean(a),onRequestClose:q,children:(0,r.tZ)(d.G,{css:kw.content,children:(0,r.BX)(d.G,{css:kw.content,children:[(0,r.BX)(ne.h4,{css:kw.header,level:3,variant:"headerDefault",children:["Your account is out of storage ",(0,r.tZ)(Dm.Z,{size:20})]}),(0,r.tZ)(ne.xv,{children:"To free up space remove files until it's under the limit, delete other Repls, or upgrade your account storage."}),!R&&E?(0,r.tZ)(xw.l,{data:E,hideAlerts:!0}):(0,r.tZ)(xw.M,{}),"filesystem_service"===a?(0,r.BX)(d.G,{css:kw.checkbox,tag:"label",children:[(0,r.tZ)(zn.X,{id:U,checked:b,onChange:function(e){return y(Boolean(e.currentTarget.value))}}),(0,r.tZ)(ne.xv,{variant:"small",children:"Do not show this message again for this session."})]}):null,(0,r.BX)(d.G,{css:kw.footer,children:[(0,r.tZ)(ts.Z,(0,oe.Z)((0,m.Z)({},B),{text:"Manage Repls"})),R?null:(0,r.tZ)(J.zx,{colorway:"primary",text:P?"Change Storage":"Upgrade Storage",onClick:function(){return I(!0)}})]}),(0,r.tZ)(jv.Z,{isOpen:S,context:"workspace_info_modal",powerUp:"storage",uponPurchaseGoTo:"workspace",onCheckoutComplete:K,onRequestClose:function(){I(!1)}})]})})})}var Iw=(0,de.X)({content:[p.l0.colWithGap(24)],header:[p.l0.align.center],checkbox:[p.l0.rowWithGap(8)]});function Tw(){var e=(0,re.Z)().fs,n=(0,c.useState)(!1),t=n[0],i=n[1],o=(0,c.useState)(!1),a=o[0],l=o[1],s=c.useId();(0,c.useEffect)((function(){if(!a)return e.onDiskQuotaExceeded((function(){i(!0)}))}),[e,a]);var u=(0,c.useCallback)((function(){i(!1)}),[i]);return(0,r.tZ)(He.u,{isOpen:t,onRequestClose:u,children:(0,r.tZ)(d.G,{css:Iw.content,children:(0,r.BX)(d.G,{css:Iw.content,children:[(0,r.BX)(ne.h4,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,r.tZ)(Ih.Z,{color:p.TV.accentNegativeDefault,size:20})]}),(0,r.BX)(ne.xv,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,r.tZ)(Jb.Z,{})," icon on the left."]}),(0,r.tZ)(ne.xv,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,r.BX)(d.G,{css:Iw.checkbox,tag:"label",children:[(0,r.tZ)(zn.X,{id:s,checked:a,onChange:function(e){return l(Boolean(e.currentTarget.value))}}),(0,r.tZ)(ne.xv,{variant:"small",children:"Do not show this message again for this session."})]}),(0,r.tZ)(J.zx,{onClick:u,text:"Close"})]})})})}function Ew(){var e,n,t=(0,Ie.Z)(),i=(0,mm.mE)({variables:{replId:t}}),o=i.data,a=i.loading,l="Repl"===(null===o||void 0===o||null===(e=o.repl)||void 0===e?void 0:e.__typename)&&"Team"===(null===(n=o.repl.owner)||void 0===n?void 0:n.__typename);return a&&!o?null:l?(0,r.tZ)(Tw,{}):(0,r.tZ)(Sw,{})}var Rw=t(84079),Gw=t(9558),Pw=t(66091),Dw=44100,Bw=32896,Uw=function e(){var n=this;(0,Pw.Z)(this,e),this.audioStart=0,this.feed=function(e){var t=n.getFormatedValue(e),r=new Float32Array(n.samples.length+t.length);r.set(n.samples,0),r.set(t,n.samples.length),n.samples=r},this.getFormatedValue=function(e){for(var n=new Float32Array(e.length),t=0;t<e.length;t++)n[t]=e[t]/2147483648;return n},this.stop=function(){if(n.bufferSource)try{n.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(n.audioCtx&&n.samples.length){var t=0,r=n.audioCtx.currentTime;if(0===e)n.startTime=r,n.audioStart=r;else{for(var i=r-n.audioStart,o=Math.floor(i*Dw);o>e-Bw;)n.audioStart+=.7459410430839002,o-=Bw;o>e&&(t=o-e,n.startTime=r),n.startTime=r}n.samples=n.samples.slice(t,n.samples.length);for(var a,l,c,s=n.audioCtx.createBufferSource(),u=n.samples.length/1,d=n.audioCtx.createBuffer(1,u,Dw),p=0;p<1;p++)for(a=d.getChannelData(p),l=p,c=0;c<u;c++)a[c]=n.samples[l],l+=1;n.startTime<n.audioCtx.currentTime&&(n.startTime=n.audioCtx.currentTime),s.buffer=d,s.connect(n.gainNode),s.start(n.startTime),n.stop(),n.bufferSource=s,n.startTime+=d.duration,n.samples=new Float32Array}},this.samples=new Float32Array;var t=window.AudioContext||window.webkitAudioContext;this.audioCtx=new t,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime},Aw=t(44267),Lw=t(51971);function Ow(e){var n=e.container,t=(0,c.useState)(!1),i=t[0],o=t[1],a=(0,c.useState)(!1),l=a[0],s=a[1],u=(0,Lw.Z)();(0,c.useEffect)((function(){if(u===Aw.em.CONNECTED&&!0!==l){var e=setTimeout((function(){s(!0)}),1e3);return function(){clearTimeout(e)}}}),[u,l]);var f=(0,c.useRef)(null);(0,c.useEffect)((function(){if(l&&n.getConnectionState()!==Aw.em.DISCONNECTED)return n.openChannel({name:"audio",service:"audio"},(function(e){var n=e.channel,t=null,r=!1;return n.onCommand((function(e){var n;r||(r=!0,f.current=function(){t=new Uw,f.current=null},o(!0)),t&&(null===e||void 0===e||null===(n=e.audio2)||void 0===n?void 0:n.data)&&(e.audio2.samples||(e.audio2.samples=0),t.feed(Int32Array.from(e.audio2.data)),t.flush(e.audio2.samples))})),function(){o(!1),t&&(t.stop(),t=null),f.current=null}}))}),[n,l]);var h=function(){o(!1)};return(0,r.tZ)(He.u,{isOpen:i,onRequestClose:h,children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(ne.h4,{variant:"headerDefault",level:1,children:"We hear audio!"}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(ne.xv,{children:"Hey! It appears that this Repl is playing audio."}),(0,r.tZ)(ne.xv,{children:"In order for us to hear the audio you\u2019re receiving, please click confirm."})]}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,r.tZ)(J.zx,{onClick:h,text:"Cancel"}),(0,r.tZ)(J.zx,{colorway:"positive",onClick:function(){o(!1),f.current&&f.current()},text:"Confirm",iconLeft:(0,r.tZ)(Sn.Z,{})})]})]})})}var _w=t(10987),Xw=t(94965);var zw=function(e){return(0,r.tZ)(He.u,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(ne.h4,{variant:"headerDefault",level:2,css:p.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,r.tZ)(ne.xv,{children:"Never miss messages from your collaborators if you\u2019re in another tab or window."}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,r.tZ)(J.zx,{onClick:e.onCancel,text:"Deny",iconLeft:(0,r.tZ)(xp.Z,{})}),(0,r.tZ)(J.zx,{text:"Allow notifications",colorway:"positive",iconLeft:(0,r.tZ)(Sn.Z,{}),onClick:e.onConfirm})]})]})})};function Mw(){var e=(0,g.Z)(["\n  query DidMigrateToNix($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n        templateInfo {\n          replId\n        }\n      }\n    }\n  }\n"]);return Mw=function(){return e},e}var jw={},Ww=(0,Z.Ps)(Mw());var Nw,Fw=t(91813);function Vw(e){var n=e.setLifecycle,t=(0,Ie.Z)(),r=function(e){var n=(0,m.Z)({},jw,e);return M.a(Ww,n)}({variables:{replId:t}}),i=r.data,o=r.loading,a=(0,re.Z)(),l=a.container,s=a.fs;(0,c.useEffect)((function(){if(!o&&i){var e=!1,r=function(){var o=(0,Hn.Z)((function(){var o,a,c,u,d,p,f,h,v,m,g,Z,b;return(0,Yn.__generator)(this,(function(y){switch(y.label){case 0:return e||"Repl"!==i.repl.__typename?[2]:["nix","html"].includes(i.repl.language)?[4,(0,Fw.D$)({templateId:null!==(o=i.repl.templateInfo.replId)&&void 0!==o?o:null,fs:s})]:(n(Nw.NoNixMigration),[2]);case 1:if(!(a=y.sent()).length)return n((function(e){return e===Nw.Running?Nw.Finished:e})),[2];if(e)return[2];n(Nw.Running),c=!0,u=!1,d=void 0,y.label=2;case 2:y.trys.push([2,8,9,10]),p=a[Symbol.iterator](),y.label=3;case 3:return(c=(f=p.next()).done)?[3,7]:(h=f.value,[4,l.exec("bash","-c","".concat(h,"/run-post-migration.sh"))]);case 4:return v=y.sent(),e?[2]:"Channel closed"===v.error?(r(),[2]):(v.error&&ww.kg.error("post nix migration script error: "+v.error,{replid:t,path:h}),[4,s.deleteFile(h)]);case 5:if(m=y.sent(),e)return[2];m.error&&ww.kg.error("post nix migration delete path error: "+m.error,{replid:t,path:h}),y.label=6;case 6:return c=!0,[3,3];case 7:return[3,10];case 8:return g=y.sent(),u=!0,d=g,[3,10];case 9:try{c||null==p.return||p.return()}finally{if(u)throw d}return[7];case 10:return[4,s.deleteDir(Fw.OH)];case 11:return Z=y.sent(),e?[2]:(Z.error&&ww.kg.error("post nix migration delete dir error: "+Z.error,{replid:t}),[4,s.flush()]);case 12:return y.sent(),e?[2]:[4,s.persist({skipDebounce:!0})];case 13:return b=y.sent(),e?[2]:(b.error&&ww.kg.error("post nix migration persist error: "+b.error,{replid:t}),n(Nw.Finished),[2])}}))}));return function(){return o.apply(this,arguments)}}();return r(),function(){e=!0}}}),[l,i,s,o,n,t])}function Hw(){var e=(0,c.useState)((function(){return new URL(window.location.href).searchParams.get("didMigrateToNix")?Nw.Running:Nw.NoNixMigration})),n=e[0],t=e[1],i=(0,nn.useRouter)();return Vw({setLifecycle:t}),n===Nw.NoNixMigration?null:n===Nw.Running?(0,r.tZ)(cw.Z,{reason:"Finishing migration to the latest infrastructure",children:(0,r.tZ)(ne.xv,{multiline:!0,variant:"subheadDefault",children:"This may take a few minutes"})}):(0,r.tZ)(He.u,{isOpen:n===Nw.Finished,onRequestClose:function(){var e=new URL(window.location.href);t(Nw.NoNixMigration),e.searchParams.delete("didMigrateToNix"),i.push({pathname:i.pathname,query:(0,oe.Z)((0,m.Z)({},i.query),{didMigrateToNix:!1})},e.toString(),{shallow:!0})},centered:!0,children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(ne.h4,{level:1,variant:"headerDefault",children:"We've upgraded your project!"}),(0,r.BX)(ne.xv,{children:["Your project is now using"," ",(0,r.tZ)(Ts(),{legacyBehavior:!0,href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,r.BX)(d.K.ul,{css:p.l0.colWithGap(4),children:[(0,r.tZ)(d.K.li,{children:(0,r.BX)(ne.xv,{children:["\u2022"," ",(0,r.tZ)(Ts(),{legacyBehavior:!0,href:"https://docs.replit.com/programming-ide/nix-on-replit",children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,r.tZ)(d.K.li,{children:(0,r.BX)(ne.xv,{children:["\u2022"," ",(0,r.tZ)(Ts(),{legacyBehavior:!0,href:"https://docs.replit.com/programming-ide/configuring-repl",children:"Configure your Repl"})," ","with more capabilities."]})}),(0,r.tZ)(d.K.li,{children:(0,r.BX)(ne.xv,{children:["\u2022"," ",(0,r.tZ)(Ts(),{legacyBehavior:!0,href:"https://docs.replit.com/tutorials/python/build-with-nix",children:"Check out this tutorial"})," ","for a deep dive."]})})]}),(0,r.BX)(ne.xv,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please use"," ",(0,r.tZ)(Ts(),{legacyBehavior:!0,href:"https://ask.replit.com",children:"ask.replit.com"})," ","to get help."]}),(0,r.tZ)(ne.xv,{multiline:!1,children:"Thank you for your patience"})]})})}function Yw(){var e=(0,re.Z)().secrets,n=(0,c.useState)(!1),t=n[0],r=n[1];return(0,c.useEffect)((function(){return e.watchSecrets({onChange:function(e){r(e.some((function(e){return""===e.value})))}})}),[e]),t}!function(e){e[e.NoNixMigration=0]="NoNixMigration",e[e.Running=1]="Running",e[e.Finished=2]="Finished"}(Nw||(Nw={}));var qw=function(e){var n=e.replId,t=(0,u.P5)({controlName:"flag-secrets-copying",logFlagToAnalytics:!1}),i=(0,l.Z)(c.useState(!1),2),o=i[0],a=i[1],s=(0,re.Z)().fs,f=xl(),v="configureSecretsModalShown/"+n,m=Yw();c.useEffect((function(){t&&(!0===gn.Z.get(v)||m&&a(!0))}),[s,t,v,m]);var g=function(){a(!1),gn.Z.set(v,!0)};return(0,r.tZ)(He.u,{preventClose:!0,isOpen:o,maxWidth:480,onRequestClose:g,children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:(0,r.tZ)(ne.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"Configure missing Secret values"})}),(0,r.tZ)(d.G,{css:[p.l0.colWithGap(8)],children:(0,r.tZ)(ne.xv,{children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."})}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,r.tZ)(J.zx,{text:"Dismiss",onClick:g}),(0,r.tZ)(J.zx,{colorway:"primary",text:"Manage Secrets",onClick:function(){g(),f({pane:{type:"envEditor"}}),(0,h.j)(h.U3.ENV_EDITOR_USED,{action:"opened"})}})]})]})})},Kw=t(34676),$w=t(65824),Qw=t(13528),Jw=new Date("2023-08-01"),ek=function(e){return(0,i.iv)({backgroundColor:e})},nk=function(e){var n=e.onRequestClose,t=e.onCTAClick,i=c.useRef(!1);c.useEffect((function(){i.current||((0,h.j)(h.U3.MODAL_VIEWED,{source:"always_on_user_reserved_deployments_announcement"}),i.current=!0)}),[]);var o={slides:[{title:"Introducing Replit Deployments",subtitle:"A more reliable, scalable, and secure way to deploy your projects.",backgroundImage:"/public/images/deployments/reserved-deployments-announcement-slide-1.png",backgroundColor:ek(Kw.S.values.global.purpleStronger),position:"center"},{title:"Backed by Google Cloud",subtitle:"Deployed apps are hosted on Google Cloud VMs, giving them more speed and stability.",backgroundImage:"/public/images/deployments/reserved-deployments-announcement-slide-2.png",backgroundColor:ek(Kw.S.values.global.yellowStrongest),position:"center"},{title:"Try it today",subtitle:"Share your Repl with the world.",backgroundImage:"/public/images/deployments/reserved-deployments-announcement-slide-3.png",backgroundColor:ek(Kw.S.values.global.blueStronger),position:"center",text:(0,r.tZ)(J.zx,{css:[p.l0.width("100%"),{span:{color:p.TV.foregroundDefault}}],colorway:"primary",onClick:t,text:"Deploy Now",iconLeft:(0,r.tZ)(Th.Z,{})})}],date:Jw};return(0,r.tZ)($w.Z,{announcement:o,onRequestClose:n,showModal:!0})};function tk(e){var n=e.repl,t=(0,Qw.X)(),i=t&&!t.isDone&&!t.isLoading,o=xl(),a="string"===typeof(0,ib.hn)(),l=(0,Oe.Z)("workspace","workspace-always-on-user-reserved-deployments-announcement"),s=l.shouldDisplay,u=l.dismiss,d=l.register,p=!a&&!i&&n.isAlwaysOn;if(c.useEffect((function(){p&&d()}),[d,p]),!p||!s)return null;return(0,r.tZ)(nk,{onRequestClose:u,onCTAClick:function(){u(),(0,h.j)(h.U3.DEPLOY_PROJECT_SELECTED,{source:"always_on_user_reserved_deployments_announcement"}),o({pane:{type:"deployments",data:{view:rb.k.ReservedVMTierSelection}}})}})}var rk=function(){var e=(0,Hn.Z)((function(e){var n,t,r,i;return(0,Yn.__generator)(this,(function(o){switch(o.label){case 0:return(0,_d.u9)()?[4,(0,_d.mv)(e)]:[2,null];case 1:return n=o.sent(),t=n.path,r=n.line,i=n.col,t?[2,{path:t,line:r,col:i}]:[2,null]}}))}));return function(n){return e.apply(this,arguments)}}();function ik(){return function(){var e=(0,re.Z)(),n=e.fs,t=e.dotReplit,r=(0,Ie.Z)(),i=pl(),o=(0,Ma.Z)(i),a=(0,c.useState)(!1),l=a[0],s=a[1],u=El(),d=ol(),p=(0,c.useRef)(!1);(0,c.useEffect)((function(){if(l&&!p.current)if(i){var e=(0,_d.YM)({path:i}),n=window.location.hash;if(n.slice(1)!==i&&!n.startsWith(e+":")){var t=new URL(window.location.href);t.hash=e,window.history.pushState((0,oe.Z)((0,m.Z)({},history.state),{as:t.pathname+t.hash}),"",t)}}else{if(!window.location.hash)return;var r=new URL(window.location.href);history.pushState((0,oe.Z)((0,m.Z)({},history.state),{as:r.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search)}}),[l,i]),(0,c.useEffect)((function(){if(!l){var e=!1;return function(){i.apply(this,arguments)}(),function(){e=!0}}function i(){return i=(0,Hn.Z)((function(){var i,a,l;return(0,Yn.__generator)(this,(function(c){switch(c.label){case 0:return d?o.current?(s(!0),[2]):[4,rk(n)]:[2];case 1:return i=c.sent(),e?[2]:i?(u(i),s(!0),[2]):o.current||"saved"===d?(s(!0),[2]):[4,(0,Lg.W)({fs:n,dotReplit:t,replId:r})];case 2:return a=c.sent(),l=a.entrypoint,!e&&l&&u({path:l}),s(!0),[2]}}))})),i.apply(this,arguments)}}),[n,u,t,r,o,d,l]),(0,c.useEffect)((function(){if(d){var e=function(){var e=(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(t){switch(t.label){case 0:return p.current=!0,[4,rk(n)];case 1:return(e=t.sent())&&u(e),p.current=!1,[2]}}))}));return function(){return e.apply(this,arguments)}}();return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}}),[d,n,u])}(),null}var ok=t(12798),ak=t(91050),lk=t(24065),ck=t(86615);function sk(){var e=(0,g.Z)(["\n  subscription ThreadUpdates($replId: String!) {\n    updatedThread: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return sk=function(){return e},e}var uk={},dk=(0,Z.Ps)(sk(),CZ.j7);function pk(e){!function(e){var n=(0,m.Z)({},uk,e);ck.m(dk,n)}({variables:{replId:e},onData:function(n){var t,r,i=null===(t=n.data)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.updatedThread;i&&"AnnotationAnchor"===i.__typename&&(n.client.cache.updateQuery({query:CZ.yi,variables:{replId:e}},(function(e){return(0,ut.ZP)(e,(function(e){null!==e&&"Repl"===e.repl.__typename&&(e.repl.annotationAnchors.find((function(e){return e.id===i.id}))||e.repl.annotationAnchors.push(i))}))})),n.client.cache.updateQuery({query:lk.Jq,variables:{replId:e,path:i.path}},(function(e){return(0,ut.ZP)(e,(function(e){var n;e&&"ThreadsByFileResult"===(null===(n=e.threadsByFile)||void 0===n?void 0:n.__typename)&&(e.threadsByFile.threads.find((function(e){return e.id===i.id}))||e.threadsByFile.threads.push((0,oe.Z)((0,m.Z)({},i),{messageCount:i.messages.length,unreadCount:i.messages.filter((function(e){return!e.seen})).length,participants:i.messages.filter((function(e){return!!e.user})).map((function(e){return e.user}))})))}))})))}})}function fk(){var e=(0,g.Z)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return fk=function(){return e},e}var hk={},vk=(0,Z.Ps)(fk());function mk(){!function(e){var n=(0,m.Z)({},hk,e);ck.m(vk,n)}({variables:{replId:(0,Ie.Z)()},skip:(0,Lw.Z)()!==Aw.em.CONNECTED})}var gk=t(13507),Zk=t(20608);function bk(){var e=(0,g.Z)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return bk=function(){return e},e}var yk={},xk=(0,Z.Ps)(bk());function wk(){var e=(0,Re.OM)(),n=function(e){var n=(0,m.Z)({},yk,e);return M.a(xk,n)}({variables:{replId:(0,Ie.Z)()}}).data,t="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl:null;c.useEffect((function(){var n;t&&(null===(n=t.templateInfo)||void 0===n?void 0:n.label.includes("Blank Repl"))&&e(!0)}),[e,t])}var kk=t(32519),Ck=t(68216),Sk=t(48960),Ik="video.json",Tk=(0,Sk.join)(bu.V,Ik);function Ek(){return(Ek=(0,Hn.Z)((function(e,n){var t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return n.find((function(e){return e.type===Tn.Tv.File&&e.filename===Ik}))?[4,e.readFile(Tk)]:[2,null];case 1:return(t=r.sent()).error?[2,null]:[2,t.content.toString()]}}))}))).apply(this,arguments)}function Rk(e){var n=(0,re.Z)().fs,t=(0,bu.Z)().isTutorial,r=(0,Ma.Z)(e);(0,c.useEffect)((function(){if(t){var e=!1,i=n.watchDir(bu.V,{onChange:function(t){(function(e,n){return Ek.apply(this,arguments)})(n,t).then((function(n){if(!e)if(n){var t=null;try{t=Ck.ku(n)}catch(o){}var i="object"===typeof t&&"string"===typeof t.embedUrl?t.embedUrl:null;r.current(i?{embedUrl:i}:null)}else r.current(null)}))},onMoveOrDelete:function(){r.current(null)},onError:function(){r.current(null)}});return function(){e=!0,i()}}}),[n,t,r])}function Gk(){Rk(ao(Fo))}var Pk=t(8049),Dk=t(34860),Bk=t(54981),Uk=!1;function Ak(){var e=(0,g.Z)(["\n  mutation HandlePortOpenedUpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return Ak=function(){return e},e}var Lk={},Ok=(0,Z.Ps)(Ak());var _k=t(84638);function Xk(){var e=(0,Ie.Z)(),n=(0,re.Z)().container,t=Bl(),r=(0,l.Z)(function(e){var n=(0,m.Z)({},Lk,e);return b.D(Ok,n)}(),1)[0],i=(0,Ta.Z)().preferences.webviewAutoOpenOnPortOpened,o=(0,l.Z)((0,_k.e)(),1)[0],a=(0,za.cR)();(0,c.useEffect)((function(){return n.onPortOpened(tt()((function(n){var l,c=n.isVnc;n.isForwarded&&((c||i&&!o)&&!a&&t(c?"vnc":"webview"),l=c?{isVnc:!0}:{isServer:!0},r({variables:{input:(0,m.Z)({id:e},l)}}))}),500,{leading:!0}))}),[n,t,r,e,i,o,a])}function zk(){var e=(0,g.Z)(["\n  subscription ReplEnvironmentUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return zk=function(){return e},e}var Mk={},jk=(0,Z.Ps)(zk());function Wk(e){var n=e.isAnon,t=e.isOwner,r=e.ignoreUnloadPrompt;!function(e){var n=(0,m.Z)({},Mk,e);ck.m(jk,n)}({skip:n||t,variables:{replId:(0,Ie.Z)()},onData:function(e){var n=e.data.data;!1===(null===n||void 0===n?void 0:n.currentUserCanWrite)&&(r(!0),window.location.reload())}})}function Nk(){var e=(0,g.Z)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return Nk=function(){return e},e}var Fk=(0,Z.Ps)(Nk());function Vk(){var e=(0,g.Z)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return Vk=function(){return e},e}var Hk=(0,Z.Ps)(Vk());function Yk(e){return qk.apply(this,arguments)}function qk(){return qk=(0,Hn.Z)((function(e){var n,t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return null===Cr.l?[2]:[4,Cr.l.query({query:Hk,variables:{username:e}})];case 1:return[2,null===(t=r.sent().data)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.image]}}))})),qk.apply(this,arguments)}function Kk(){return"Notification"in window?"true"===gn.Z.get(nC,"string")?"dismissed":window.Notification.permission:"denied"}function $k(){return Qk.apply(this,arguments)}function Qk(){return(Qk=(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){try{window.Notification.requestPermission().then()}catch(n){return[2,new Promise((function(e){window.Notification.requestPermission((function(n){e(n)}))}))]}return[2,window.Notification.requestPermission()]}))}))).apply(this,arguments)}function Jk(){return eC.apply(this,arguments)}function eC(){return(eC=(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return[4,$k()];case 1:return e.sent(),tC(!1),[2]}}))}))).apply(this,arguments)}var nC="notifications/dismissedModal";function tC(e){gn.Z.set(nC,String(e))}var rC={};function iC(){return(iC=(0,Hn.Z)((function(e){var n,t,r,i,o,a,l,c,s,u,d;return(0,Yn.__generator)(this,(function(p){switch(p.label){case 0:return n=e.title,t=e.body,r=e.badge,i=e.icon,o=e.iconByUsername,a=e.tag,l=e.onClick,c=e.cacheDuration,s=void 0===c?0:c,!document.hidden&&document.hasFocus()?[2]:"granted"!==Kk()?[2]:(u=Date.now(),a in rC&&rC[a]+s>u?[2]:o?[4,Yk(o)]:[3,2]);case 1:i=p.sent(),p.label=2;case 2:return d=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:a}),setTimeout((function(){d.close()}),1e4),d.addEventListener("click",(function(){window.focus(),d.close()})),l&&d.addEventListener("click",l),rC[a]=u,[2]}}))}))).apply(this,arguments)}function oC(){return(oC=(0,Hn.Z)((function(e){var n;return(0,Yn.__generator)(this,(function(t){switch(t.label){case 0:if(!Cr.l)throw new Error("Expected Apollo client");return[4,Cr.l.query({query:Fk,variables:{id:e}})];case 1:return[2,"Repl"===(null===(n=t.sent().data)||void 0===n?void 0:n.repl.__typename)?n.repl.title:null]}}))}))).apply(this,arguments)}function aC(){var e=(0,re.Z)(),n=e.container,t=e.presence;c.useEffect((function(){var e=t.onUserJoin((function(t){var r,i=null===(r=n.getContext())||void 0===r?void 0:r.repl;if(i){var o=t.username;return function(e){return oC.apply(this,arguments)}(i.id).then((function(e){e&&function(e){iC.apply(this,arguments)}({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(i.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})})),function(){e()}}}))}),[t,n])}function lC(){var e=(0,qe.Z)(),n=e.showConfirm,t=e.showNotice,r=e.hideMessage,i=e.showError,o=(0,re.Z)().container;(0,c.useEffect)((function(){var e=o.onToast((function(e){e.startsWith("PANIC")||t(e,function(e){var n=e.length/.025+1e3;return Math.max(1e4,n)}(e))})),a=null,l=!1,c=o.onConnectionStateChanged((function(e){if(a&&(r(a),a=null),e===Aw.em.CONNECTED)return l=!0,void(a=n("Connected",1500));l&&(e!==Aw.em.CONNECTING?e!==Aw.em.DISCONNECTED||(a=i("Disconnected")):a=t("Reconnecting"))}));return function(){a&&r(a),e(),c()}}),[o,n,t,i,r])}var cC=t(71279),sC=t(10310);function uC(e){var n=e.onOpenFile,t=(0,re.Z)(),r=function(e){var n=e.toolchain,t=e.debuggest;return(0,c.useEffect)((function(){var e=function(e){(null===e||void 0===e?void 0:e.debuggers)&&(null===e||void 0===e?void 0:e.debuggers.length)>0&&t.connect()};e(n.configs.current),n.configs.subscribe((function(n){e(n)}))}),[n,t]),(0,Hs.Z)(t.mainClient)}({debuggest:t.debuggest,toolchain:t.toolchain});!function(e){(0,c.useEffect)((function(){if(e){var n=e.onStarted((function(e){(0,h.j)(h.U3.DEBUGGER_USED,{action:"started",joined:e})})),t=e.onPaused((function(e){(0,h.j)(h.U3.DEBUGGER_USED,{action:"paused",reason:e})})),r=e.onBreakpoint((function(n){(0,h.j)(h.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:n,state:e.state.current})}));return function(){n(),t(),r()}}}),[e])}(r),function(e,n){var t,r=n.onOpenFile,i=(0,Ma.Z)(r),o=(0,Hs.Z)(e?e.stackFrames:null),a=null===o||void 0===o?void 0:o[0],l=null===a||void 0===a||null===(t=a.source)||void 0===t?void 0:t.path,s=null===a||void 0===a?void 0:a.line;(0,c.useEffect)((function(){if(l&&s&&e){var n=(0,sC.om)(l);n?i.current({path:n,line:s}):e.stepOut()}}),[e,l,s,i])}(r,{onOpenFile:n})}function dC(){var e=(0,re.Z)().runner,n=YZ(),t=ao(Mi),r=(0,cC.Ln)(),i=ol(),o=function(){var e=(0,Ia.T)(),n=YZ(),t=(0,za.cR)();return c.useCallback((function(){if(t){if(e)return;n({pane:{type:"runnerOutput"},placement:{type:"secondary"},activate:!1})}else n({pane:{type:e?"webview":"runnerOutput"},placement:{type:"secondary"},activate:!1})}),[e,n,t])}(),a=(0,Fc.e)(Vc.y.Output);c.useEffect((function(){if(i&&(null===a||void 0===a?void 0:a.isActive)){var e=setInterval((function(){o()}),200);return function(){clearInterval(e)}}}),[null===a||void 0===a?void 0:a.isActive,o,i]),c.useEffect((function(){if(i)return e.onLocalRun((function(){o()}))}),[e,o,i]),c.useEffect((function(){i&&(r?n({pane:{type:"instructions"},activate:!1,placement:{type:"secondary"}}):t({type:"instructions"}))}),[r,n,t,i]),pC(KZ.showShell.id,{type:"shell"}),pC(KZ.showDocs.id,{type:"docs"}),pC(KZ.showGit.id,{type:"git"}),pC(KZ.showSettings.id,{type:"preferences"}),pC(KZ.showConsole.id,{type:"runnerOutput"}),pC(KZ.showGhostwriter.id,{type:"ghostwriterChat"})}function pC(e,n){var t=ol(),r=yl(),i=bl(),o=lo(er);(0,Pc.Il)((function(){if(t)return[e,function(){var e=o().find((function(e){return(0,l.Z)(e,2)[1].type===n.type}));e?i({paneId:e[0],activate:!0}):r({pane:n,activate:!0,placement:{type:"secondary"}})}]}),[t,r,i])}function fC(){var e=function(){var e=ao(ti);return(0,$n.Z)((function(){return tt()(e,1e3)}),[e])}(),n=(0,Ie.Z)();(0,c.useEffect)((function(){var t=function(){e({replId:n,force:!1}),e.flush()};return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}}),[e,n]),(0,c.useEffect)((function(){var t=function(){"hidden"===document.visibilityState&&e({replId:n,force:!1})};return document.addEventListener("visibilitychange",t),function(){document.removeEventListener("visibilitychange",t)}}),[e,n]),(0,c.useEffect)((function(){var t=null;return function r(){t=setTimeout((function(){e({replId:n,force:!1}),r()}),6e4)}(),function(){t&&clearTimeout(t)}}),[e,n]),(0,c.useEffect)((function(){return function(){e({replId:n,force:!1}),e.flush()}}),[e,n])}var hC=t(95038);function vC(){var e=(0,g.Z)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return vC=function(){return e},e}var mC={},gC=(0,Z.Ps)(vC());function ZC(){var e,n=(0,re.Z)().presence,t=(0,Ie.Z)(),r=(0,c.useRef)(!1),i=function(e){var n=(0,m.Z)({},mC,e);return M.a(gC,n)}({variables:{replId:t}}),o=i.data,a=i.loading,l=0;"Repl"===(null===o||void 0===o?void 0:o.repl.__typename)&&(l=o.repl.multiplayers.length,"User"===(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)&&(l+=1));(0,c.useEffect)((function(){if(!a&&!r.current){var e=n.onActiveUsersChange((function(){r.current=!0,e(),(0,h.j)(h.U3.MULTIPLAYER_REPL_OPENED,{replId:t,participantsCount:l,usersOnlineCount:n.getActiveUsers().length})}));return e}}),[t,a,l,n])}var bC=t(94516);function yC(){var e=vl(),n=(0,Ai.Xo)(),t=(0,Ai.jY)();(0,c.useEffect)((function(){e?n(e):t()}),[n,t,e]),function(e){var n=oo(ja),t=lo(Wt),r=(0,Ma.Z)(e);(0,c.useEffect)((function(){var e=function(e){e&&(null!==i&&clearTimeout(i),i=setTimeout((function(){var e=t();e&&r.current(e)})))},i=null;e(n.current);var o=n.subscribe(e);return function(){null!==i&&clearTimeout(i),o()}}),[n,r,t])}((0,vc.bS)())}var xC=t(14065),wC=t(65326),kC=t(19291);var CC=t(91842);function SC(e){return IC.apply(this,arguments)}function IC(){return(IC=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){return setTimeout((function(){return n()}),e)}))];case 1:return n.sent(),[2]}}))}))).apply(this,arguments)}function TC(){var e=(0,re.Z)(),n=e.packager,t=e.toolchain;(0,c.useEffect)((function(){var e=1e3*(10+5*Math.random()),r=setTimeout((function(){!function(){i.apply(this,arguments)}()}),e);function i(){return(i=(0,Hn.Z)((function(){var e,r,i,o,a,l,c,s,u,d;return(0,Yn.__generator)(this,(function(p){switch(p.label){case 0:if(!t.configs.current||!n)return[2];e=t.configs.current.packagers,r=!0,i=!1,o=void 0,p.label=1;case 1:p.trys.push([1,7,8,9]),a=e[Symbol.iterator](),p.label=2;case 2:return(r=(l=a.next()).done)?[3,6]:(c=l.value,[4,n.listSpecfile(c.id)]);case 3:return(s=p.sent()).packages&&s.packages.length>0&&(u=s.packages.map((function(e){return e.name||""}))||[],ww.kg.info("packager installed packages",{packagerId:c.id,language:c.language,packages:u}),(0,h.j)(Es.U3.PACKAGER_PACKAGES_INSTALLED,{packages:u})),[4,SC(1e3*(5+5*Math.random()))];case 4:p.sent(),p.label=5;case 5:return r=!0,[3,2];case 6:return[3,9];case 7:return d=p.sent(),i=!0,o=d,[3,9];case 8:try{r||null==a.return||a.return()}finally{if(i)throw o}return[7];case 9:return[2]}}))}))).apply(this,arguments)}return function(){clearTimeout(r)}}),[n,t.configs.current])}var EC=t(43932),RC=t(38463);function GC(){var e=(0,g.Z)(["\n  fragment BoostMetadata on Repl {\n    id\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        boost {\n          __typename\n          sku\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        userSubscriptionType\n      }\n      ... on Team {\n        id\n        isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n      }\n    }\n  }\n"]);return GC=function(){return e},e}function PC(){var e=(0,g.Z)(["\n  query ResourceUpdatingBoostMetadata($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        ...BoostMetadata\n      }\n    }\n  }\n  ","\n"]);return PC=function(){return e},e}var DC={},BC=(0,Z.Ps)(GC()),UC=(0,Z.Ps)(PC(),BC);var AC=t(31146);function LC(){var e=(0,g.Z)(["\n  query ReplEnvironmentServicesConnector($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return LC=function(){return e},e}var OC=(0,Z.Ps)(LC(),I.C,I.D);function _C(){return(_C=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){return[2,XC(e)]}))}))).apply(this,arguments)}function XC(e){return zC.apply(this,arguments)}function zC(){return zC=(0,Hn.Z)((function(e){var n,t,r=arguments;return(0,Yn.__generator)(this,(function(i){switch(i.label){case 0:n=r.length>1&&void 0!==r[1]?r[1]:1,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,MC(e)];case 2:return i.sent(),[3,4];case 3:if(t=i.sent(),n>5)throw t;return setTimeout((function(){XC(e,n+1)}),1e3*(Math.pow(2,n)-1)),[3,4];case 4:return[2]}}))})),zC.apply(this,arguments)}function MC(e){return jC.apply(this,arguments)}function jC(){return jC=(0,Hn.Z)((function(e){var n,t,r,i,o,a;return(0,Yn.__generator)(this,(function(l){switch(l.label){case 0:if(n=e.replId,t=e.expectedThreads,r=(0,Aw.ZP)({onUnrecoverableError:function(e){throw new Error("Failed to create temporary goval connection. Received error ".concat(e.message))}}),!Cr.l)throw r.destroy(),new Error("Expected Apollo Client");return[4,Cr.l.query({query:OC,variables:{id:n}})];case 1:if("Repl"!==(i=l.sent().data).repl.__typename)throw r.destroy(),new Error("Failed to query repl info when creating temporary connection");return o=i.currentUser,a=i.repl,[2,new Promise((function(e){r.onConnectionStateChanged((function(i){if(i===Aw.em.CONNECTED){try{var o,a=null===(o=r.getConnectionMetadata())||void 0===o?void 0:o.token;if(null!=a){var l,c=(0,AC.he)(a),s=null!==(l=c.resourceLimits)&&void 0!==l?l:{},u=s.memory,d=s.threads;if(ww.kg.info("Temporary goval connection created",{label:"replResourcesChange",replid:n,cluster:c.cluster,memory:u,threads:d}),null!=t&&d!==t)((null!==d&&void 0!==d?d:0<t)?ww.kg.error:ww.kg.warn)("Unexpected resource limits",{label:"replResourcesChange",replid:n,expectedThreads:t,actualMemory:u,actualShares:d})}}catch(p){}r.destroy(),e()}})),r.connect({getMinimumRetryDelayMs:function(){return 0},context:(0,Dk.U)({repl:a,currentUser:o})})}))]}}))})),jC.apply(this,arguments)}var WC={off:.5,boost_2cpu_2ram:2,boost_4cpu_4ram:4,boost_8cpu_8ram:8,boost_16cpu_16ram:16},NC={off:512,boost_2cpu_2ram:2048,boost_4cpu_4ram:4096,boost_8cpu_8ram:8192,boost_16cpu_16ram:16384};function FC(e){if(!e)return null;if("Repl"!==e.__typename||"ReplPowerUpTypes"!==e.powerUps.__typename||!e.owner)return null;var n=function(e){if("Team"===e.__typename){if((0,RC.v4)(e.id))return v.ri.Boost_16cpu_16ram;if(e.isTeamsPro)return v.ri.Boost_2cpu_2ram}if("User"===e.__typename){if(e.userSubscriptionType===v.HP.HackerPro)return v.ri.Boost_4cpu_4ram;if(e.userSubscriptionType===v.HP.Hacker)return v.ri.Boost_2cpu_2ram}return v.ri.Off}(e.owner),t=e.powerUps.boost.sku;return WC[t]>WC[n]?t:n}function VC(){var e,n=(0,Ie.Z)(),t=function(e){var n=(0,m.Z)({},DC,e);return M.a(UC,n)}({variables:{replId:n}}),r=t.data,i=t.refetch,o=null===r||void 0===r||null===(e=r.currentUser)||void 0===e?void 0:e.userSubscriptionType,a=(0,c.useRef)(void 0);(0,c.useEffect)((function(){void 0!==o&&(void 0!==a.current&&a.current!==o&&i(),a.current=o)}),[o,i,a]);var l=FC("Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:void 0),s=(0,c.useRef)(null);(0,c.useEffect)((function(){null!==l&&(null!==s.current&&s.current!==l&&(ww.kg.info("Repl Resources expected value changed, creating temp goval connection",{replid:n,previousBoost:s.current,newBoost:l}),function(e){return _C.apply(this,arguments)}({replId:n,expectedThreads:WC[l]}).catch((function(e){sf.Tb(e),ww.kg.error("Repl Resources failed to create temp goval connection",{replid:n})}))),s.current=l)}),[l,s,n])}function HC(){var e=(0,g.Z)(["\n  query TrackResourcesBoostMetadata($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...BoostMetadata\n      }\n    }\n  }\n  ","\n"]);return HC=function(){return e},e}var YC={},qC=(0,Z.Ps)(HC(),BC);function KC(){var e=(0,Ie.Z)(),n=function(e){var n=(0,m.Z)({},YC,e);return M.a(qC,n)}({variables:{replId:e}}).data,t=FC("Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl:void 0),r=(0,Bm.ZP)().dataAtom,i=r.cpu,o=r.ram,a=(0,Vn.Dv)(i.cpuCountAtom),l=(0,Vn.Dv)(o.totalAtom),s=(0,c.useRef)(0);(0,c.useEffect)((function(){var n=setInterval((function(){if(t){var n=WC[t],r=NC[t];a!==n||l!==r?(s.current++,2===s.current&&ww.kg.error("Repl Resources were less than expected for 1 minute",{replid:e,vCpusExpected:n,vCpusActual:a,ramExpected:r,ramActual:l})):(s.current>2&&ww.kg.info("Repl Resources resolved mismatch after ".concat(s.current," minutes"),{replid:e,vCpusExpected:n,vCpusActual:a,ramExpected:r,ramActual:l}),s.current=0)}}),6e4);return function(){clearInterval(n)}}),[e,t,a,l,s])}function $C(e){var n,t=e.repl,r=e.currentUser,i=r.id===(null===(n=t.user)||void 0===n?void 0:n.id),o=(0,re.Z)().replspaceApi;!function(){var e=(0,re.Z)().lspnix,n=(0,Ta.Z)().preferences.codeIntelligence;c.useEffect((function(){n?e.enable():e.disable()}),[e,n])}(),fC(),(0,ok.Z)(),(0,kC.Z)(),(0,Zk.Z)({workspaceType:"desktop"}),KC(),c.useEffect((function(){var e=function(e){"s"===e.key&&(0,pd.j)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),aC(),mk(),function(){var e=(0,re.Z)().presence;c.useEffect((function(){return e.onFollowingUsersChanged((function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,h.j)(Es.U3.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,h.j)(Es.U3.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})}))}),[e])}(),Wk({isAnon:!1,isOwner:i,ignoreUnloadPrompt:(0,ak.Z)()}),VC(),function(){var e=(0,re.Z)().presence,n=pl();(0,c.useEffect)((function(){e.updateOpenFile(n)}),[e,n])}(),lC(),(0,cC.ZP)(),dC(),(0,Pk.Z)(),function(){var e=(0,re.Z)().presence,n=El();(0,c.useEffect)((function(){return e.onUserOpenedFile((function(t){var r=t.user,i=t.file,o=e.getFollowedUser();o&&o.id===r.id&&i&&n({path:i})}))}),[e,n]);var t=(0,c.useState)(null),r=t[0],i=t[1];(0,c.useEffect)((function(){return e.onFollowedUserChanged(i)}),[e]),(0,c.useEffect)((function(){var n=function(){e.unfollowUser()};if(r){var t=setTimeout((function(){document.addEventListener("click",n)}),0);return function(){clearTimeout(t),document.removeEventListener("click",n)}}}),[r])}(),wk(),Gk(),function(){var e=(0,hC.T)(),n=xl();(0,c.useEffect)((function(){e&&n({pane:{type:"education"}})}),[e,n])}(),function(){var e=(0,bu.Z)().isTutorial,n=Yl();(0,c.useEffect)((function(){e&&n()}),[n,e])}(),function(){var e=(0,Ie.Z)(),n=TZ(e),t=RZ(e),r=Yw(),i=(0,Re.Cp)();(0,c.useEffect)((function(){i({paneType:"chat",indicatorType:n>0?Je.TV.redStronger:void 0})}),[i,n]),(0,c.useEffect)((function(){i({paneType:"threadInbox",indicatorType:t>0?Je.TV.redStronger:void 0})}),[i,t]),(0,c.useEffect)((function(){i({paneType:"envEditor",indicatorType:r?Je.TV.redStronger:void 0})}),[i,r])}(),pk(t.id),function(){var e=pl(),n=(0,Re.zo)(),t=(0,Re.VX)();(0,c.useEffect)((function(){t(e),e&&n(e)}),[e,t,n])}(),yC(),function(){var e=Ul(),n=Sl();(0,c.useEffect)((function(){var t=function(){n()};if(e)return document.addEventListener("dragend",t),function(){document.removeEventListener("dragend",t)}}),[e,n])}(),(0,gk.Z)(),function(){var e=(0,Ie.Z)(),n=TZ(e),t=(0,c.useRef)(0),r=(0,Ta.Z)(),i=r.preferences,o=r.loading,a=(0,u.P5)({controlName:"flag-chat-audio-notification"});(0,c.useEffect)((function(){a&&!o&&i.chatAudioNotification&&n>t.current&&new Audio("/public/sounds/pop.mp3").play(),t.current=n}),[a,n,t,o,i])}();var a=YZ();uC({onOpenFile:function(e){a({pane:{type:"codeEditor",data:e},placement:{type:"secondary"},activate:!1})}}),(0,c.useEffect)((function(){return sf.YA("replId",t.id),function(){sf.YA("replId",void 0)}}),[t.id]),function(e){var n=e.repl,t=e.currentUser,r=(0,re.Z)().container,i=(0,nn.useRouter)(),o=(0,Bk.S)(),a=(0,Dk.b)({repl:n,currentUser:t});(0,c.useEffect)((function(){var e;if(a)return Uk||(Uk=!0,e=i.query.initialConnectionMetadata),r.connect({customConnectionMetadata:e,context:a,getMinimumRetryDelayMs:o}),function(){r.close()}}),[a,r]),(0,c.useRef)(!1),(0,c.useEffect)((function(){return function(){r.destroy()}}),[r])}({repl:t,currentUser:r}),Xk(),(0,kk.Z)(),(0,EC.Z)(),(0,CC.Z)(t,r);var l=ao(Ht),s=(0,Yc.T)();(0,c.useEffect)((function(){l(!s)}),[s,l]),ZC(),(0,bC.B)(),(0,wC.p)();var d=function(){var e=YZ();return(0,c.useCallback)((function(){e({pane:{type:"ghostwriterChat"},activate:!0,placement:{type:"secondary"}})}),[e])}();(0,xC.b)({openGhostwriterPane:d});var p=(0,Ai.fg)();(0,c.useEffect)((function(){o.setWaitForFileClose(p)}),[o,p]);var f=(0,Gw.uV)(),v=io(rr);return(0,c.useEffect)((function(){v&&f(v)}),[f,v]),TC(),null}var QC=t(86370),JC=t(1343);function eS(){var e=(0,g.Z)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return eS=function(){return e},e}var nS=(0,Z.Ps)(eS(),JC.R9,JC.gp);var tS,rS,iS=t(76261),oS=t(90437),aS=t(27352),lS=t(48262),cS=t(63824),sS=t(56186),uS=t(81962);!function(e){e.RAW="RAW",e.PROXY="PROXY",e.THROW="THROW",e.HANDLER="HANDLER"}(tS||(tS={})),function(e){e.GET="GET",e.SET="SET",e.APPLY="APPLY",e.CONSTRUCT="CONSTRUCT",e.ENDPOINT="ENDPOINT",e.RELEASE="RELEASE"}(rS||(rS={}));var dS=Symbol("Comlink.proxy"),pS=Symbol("Comlink.endpoint"),fS=Symbol("Comlink.releaseProxy"),hS=Symbol("Comlink.thrown"),vS=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},mS={canHandle:function(e){return vS(e)&&e[dS]},serialize:function(e){var n=new MessageChannel,t=n.port1,r=n.port2;return bS(e,t),[r,[r]]},deserialize:function(e){return e.start(),wS(e,[],n);var n}},gS={canHandle:function(e){return vS(e)&&hS in e},serialize:function(e){var n=e.value;return[(0,uS.Z)(n,Error)?{isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:{isError:!1,value:n},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}},ZS=new Map([["proxy",mS],["throw",gS]]);function bS(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!t||i.origin===t.origin&&i.source===t.source)){var o,a=(0,m.Z)({path:[]},i.data),c=a.id,s=a.type,u=a.path,d=(i.data.argumentList||[]).map(ES);try{var p=u.slice(0,-1).reduce((function(e,n){return e[n]}),e),h=u.reduce((function(e,n){return e[n]}),e);switch(s){case rS.GET:o=h;break;case rS.SET:p[u.slice(-1)[0]]=ES(i.data.value),o=!0;break;case rS.APPLY:o=h.apply(p,d);break;case rS.CONSTRUCT:o=IS((0,sS.Z)(h,(0,We.Z)(d)));break;case rS.ENDPOINT:var v=new MessageChannel,g=v.port1,Z=v.port2;bS(e,Z),o=SS(g,[g]);break;case rS.RELEASE:o=void 0;break;default:return}}catch(Fu){o=(0,f.Z)({value:Fu},hS,0)}Promise.resolve(o).catch((function(e){return(0,f.Z)({value:e},hS,0)})).then((function(e){var t=(0,l.Z)(TS(e),2),i=t[0],o=t[1];n.postMessage((0,oe.Z)((0,m.Z)({},i),{id:c}),o),s===rS.RELEASE&&(n.removeEventListener("message",r),yS(n))}))}}return n.addEventListener("message",r),n.start&&n.start(),function(){n.removeEventListener("message",r),yS(n)}}function yS(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function xS(e){if(e)throw new Error("Proxy has been released and is not useable")}function wS(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1,i=new Proxy(t,{get:function(t,o){if(xS(r),o===fS)return function(){return RS(e,{type:rS.RELEASE,path:n.map((function(e){return e.toString()}))}).then((function(){yS(e),r=!0}))};if("then"===o){if(0===n.length)return{then:function(){return i}};var a=RS(e,{type:rS.GET,path:n.map((function(e){return e.toString()}))}).then(ES);return a.then.bind(a)}return wS(e,(0,We.Z)(n).concat([o]))},set:function(t,i,o){xS(r);var a=(0,l.Z)(TS(o),2),c=a[0],s=a[1];return RS(e,{type:rS.SET,path:(0,We.Z)(n).concat([i]).map((function(e){return e.toString()})),value:c},s).then(ES)},apply:function(t,i,o){xS(r);var a=n[n.length-1];if(a===pS)return RS(e,{type:rS.ENDPOINT}).then(ES);if("bind"===a)return wS(e,n.slice(0,-1));var c=(0,l.Z)(kS(o),2),s=c[0],u=c[1];return RS(e,{type:rS.APPLY,path:n.map((function(e){return e.toString()})),argumentList:s},u).then(ES)},construct:function(t,i){xS(r);var o=(0,l.Z)(kS(i),2),a=o[0],c=o[1];return RS(e,{type:rS.CONSTRUCT,path:n.map((function(e){return e.toString()})),argumentList:a},c).then(ES)}});return i}function kS(e){var n,t=e.map(TS);return[t.map((function(e){return e[0]})),(n=t.map((function(e){return e[1]})),Array.prototype.concat.apply([],n))]}var CS=new WeakMap;function SS(e,n){return CS.set(e,n),e}function IS(e){return Object.assign(e,(0,f.Z)({},dS,!0))}function TS(e){var n=!0,t=!1,r=void 0;try{for(var i,o=ZS[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,l.Z)(i.value,2),c=a[0],s=a[1];if(s.canHandle(e)){var u=(0,l.Z)(s.serialize(e),2),d=u[0],p=u[1];return[{type:tS.HANDLER,name:c,value:d},p]}}}catch(f){t=!0,r=f}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return[{type:tS.RAW,value:e},CS.get(e)||[]]}function ES(e){switch(e.type){case tS.HANDLER:return ZS.get(e.name).deserialize(e.value);case tS.RAW:return e.value}}function RS(e,n,t){return new Promise((function(r){var i=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function n(t){t.data&&t.data.id&&t.data.id===i&&(e.removeEventListener("message",n),r(t.data))})),e.start&&e.start(),e.postMessage((0,m.Z)({id:i},n),t)}))}function GS(e,n){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=!0,a=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u()}}catch(d){a=!0,l=d}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return n.apply(void 0,(0,We.Z)(r))}}function PS(e,n){var t={};for(var r in n)"function"===typeof n[r]&&(t[r]=GS(e,n[r]));return t}function DS(e,n){return function(){var t=e.store.get(e.extensionStateAtom),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(!t.scopes.has(c)){var s="Scope not declared in extension.json: ".concat(c);if(e.flagEnforceScopes)throw e.logger.error(s),new Error(s);e.logger.warn("".concat(s,". In the future this will throw an error"))}}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}}var BS=t(83344);function US(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}function AS(){var e=(0,g.Z)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return AS=function(){return e},e}function LS(){var e=(0,g.Z)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return LS=function(){return e},e}function OS(){var e=(0,g.Z)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return OS=function(){return e},e}function _S(){var e=(0,g.Z)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return _S=function(){return e},e}function XS(){var e=(0,g.Z)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return XS=function(){return e},e}function zS(){var e=(0,g.Z)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return zS=function(){return e},e}function MS(){var e=(0,g.Z)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return MS=function(){return e},e}function jS(){var e=(0,g.Z)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return jS=function(){return e},e}function WS(){var e=(0,g.Z)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    runCount\n    commentCount\n    iconUrl\n    imageUrl\n    tags {\n      id\n      isOfficial\n    }\n  }\n"]);return WS=function(){return e},e}function NS(){var e=(0,g.Z)(["\n  fragment CommentsReplData on Repl {\n    comments {\n      items {\n        id\n        body\n        user {\n          id\n          username\n          image\n        }\n      }\n    }\n  }\n"]);return NS=function(){return e},e}function FS(){var e=(0,g.Z)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return FS=function(){return e},e}function VS(){var e=(0,g.Z)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return VS=function(){return e},e}function HS(){var e=(0,g.Z)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return HS=function(){return e},e}function YS(){var e=(0,g.Z)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return YS=function(){return e},e}function qS(){var e=(0,g.Z)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return qS=function(){return e},e}function KS(){var e=(0,g.Z)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return KS=function(){return e},e}function $S(){var e=(0,g.Z)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      editorPreferences {\n        fontSize\n        indentIsSpaces\n        indentSize\n        keyboardHandler\n        wrapping\n        codeIntelligence\n        codeSuggestion\n        multiselectModifierKey\n        minimapDisplay\n      }\n    }\n  }\n"]);return $S=function(){return e},e}function QS(){var e=(0,g.Z)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeComments: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...CommentsReplData @include(if: $includeComments)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        isOwner\n        replId\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return QS=function(){return e},e}function JS(){var e=(0,g.Z)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeComments: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...CommentsReplData @include(if: $includeComments)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return JS=function(){return e},e}var eI=(0,Z.Ps)(AS()),nI=(0,Z.Ps)(LS()),tI=(0,Z.Ps)(OS()),rI=(0,Z.Ps)(_S()),iI=(0,Z.Ps)(XS()),oI=(0,Z.Ps)(zS()),aI=(0,Z.Ps)(MS()),lI=(0,Z.Ps)(jS()),cI=(0,Z.Ps)(WS()),sI=(0,Z.Ps)(NS()),uI=(0,Z.Ps)(FS()),dI=(0,Z.Ps)(VS(),uI),pI=(0,Z.Ps)(HS(),uI),fI=(0,Z.Ps)(YS(),eI,nI,tI,rI);var hI=(0,Z.Ps)(qS(),uI,iI,oI,aI);var vI=(0,Z.Ps)(KS(),uI,iI,oI,aI);var mI=(0,Z.Ps)($S());var gI=(0,Z.Ps)(QS(),lI,cI,sI,dI,pI);var ZI=(0,Z.Ps)(JS(),lI,cI,sI,dI,pI);function bI(e){return function(){var n=(0,Hn.Z)((function(n){var t,r;return(0,Yn.__generator)(this,(function(i){switch(i.label){case 0:return[4,null===Cr.l||void 0===Cr.l?void 0:Cr.l.query({query:e,variables:n||void 0})];case 1:if(null===(t=i.sent())||void 0===t?void 0:t.data)return[2,t.data];throw new Error(null===t||void 0===t||null===(r=t.error)||void 0===r?void 0:r.message)}}))}));return function(e){return n.apply(this,arguments)}}()}function yI(){function e(){return e=(0,Hn.Z)((function(){var e,n,t,r;return(0,Yn.__generator)(this,(function(i){switch(i.label){case 0:return[4,null===Cr.l||void 0===Cr.l?void 0:Cr.l.query({query:mI})];case 1:if(null===(t=i.sent())||void 0===t||null===(e=t.data)||void 0===e||null===(n=e.currentUser)||void 0===n?void 0:n.editorPreferences)return[2,t.data.currentUser.editorPreferences];throw new Error(null===t||void 0===t||null===(r=t.error)||void 0===r?void 0:r.message)}}))})),e.apply(this,arguments)}return{getPreferences:function(){return e.apply(this,arguments)}}}function xI(){var e=(0,g.Z)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return xI=function(){return e},e}var wI=(0,Z.Ps)(xI());function kI(e){return{registerCommand:function(){var n=(0,Hn.Z)((function(n,t){var r,i,o;return(0,Yn.__generator)(this,(function(a){switch(a.label){case 0:if(t)return[3,5];e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=n,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,Pu.V)(r,e)];case 2:return o=a.sent(),[3,4];case 3:throw a.sent();case 4:if(!o.data.id)throw new Error("Command: expected id to be defined");return(i={commandId:o.data.id,contributions:o.data.contributions}).contributions||(e.logger.warn("Command: '".concat(o.data.id,"' has no contributions")),i.contributions=[]),[3,9];case 5:i=n,r=t,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,(0,Pu.V)(r,e)];case 7:return o=a.sent(),[3,9];case 8:throw a.sent();case 9:return e.store.set(Ru._K,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:i.commandId,contributions:i.contributions,create:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){return[2,o]}))}))}}),[2]}}))}));return function(e,t){return n.apply(this,arguments)}}(),registerCreateCommand:function(){var n=(0,Hn.Z)((function(n,t){var r;return(0,Yn.__generator)(this,(function(i){return r={id:n.commandId,contributions:n.contributions,create:function(){var n=(0,Hn.Z)((function(n){var r,i;return(0,Yn.__generator)(this,(function(o){switch(o.label){case 0:return r=n.path,[4,Promise.race([t({path:r}),(a=50,new Promise((function(e){return setTimeout((function(){return e(null)}),a)})))])];case 1:return null===(i=o.sent())?[2,null]:[2,(0,Pu.V)(i,e)]}var a}))}));return function(e){return n.apply(this,arguments)}}()},e.store.set(Ru._K,{extensionStateAtom:e.extensionStateAtom,createCommand:r}),[2]}))}));return function(e,t){return n.apply(this,arguments)}}()}}function CI(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw new Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}function SI(e){return(0,oe.Z)((0,m.Z)({},PS([CI(e)],{hasExperimentalApi:function(){return!0}})),{editor:PS([CI(e)],(0,m.Z)({},yI())),commands:PS([CI(e)],(0,m.Z)({},kI(e))),auth:PS([CI(e)],(0,m.Z)({},(n=e,{getAuthToken:function(){return(0,Hn.Z)((function(){var e,t,r;return(0,Yn.__generator)(this,(function(i){switch(i.label){case 0:return n.extension.isLocal?[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:n.extension.installationId,extensionId:n.extension.extensionId,userId:n.userId,origin:null!==(e="https://staging.replit.com")?e:"unset"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")]:[4,null===Cr.l||void 0===Cr.l?void 0:Cr.l.query({query:wI,variables:{installationId:n.extension.installationId}})];case 1:if(!(null===(t=i.sent())||void 0===t?void 0:t.data))throw new Error("Failed to authenticate: something went wrong");if("NotFoundError"===(r=t.data.extensionInstallationById).__typename)throw new Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==r.__typename)throw new Error("Failed to authenticate: something went wrong");if(!r.token)throw new Error("Failed to authenticate: something went wrong");return[2,r.token]}}))}))()}}))),internal:PS([CI(e)],(0,m.Z)({},kI(e)))});var n}function II(e){var n=e.services.container;return{getConnectionState:function(){return n.getConnectionState()},onConnectionStateChanged:function(e){var t=n.onConnectionStateChanged(e);return IS((function(){t()}))}}}function TI(e){var n=e.ghostwriter,t=n.getChatHistory,r=n.sendMessage,i=n.getGhostwriterChatTextInput,o=n.setGhostwriterChatTextInput,a=n.getGhostwriterIsSending,l=n.clearChatHistory,c=n.regenerateMessage,s=n.getWorkspaceContext,u=n.onChatHistoryChange;return{getChatHistory:function(){return(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(n){return e=t(),[2,JSON.parse(JSON.stringify(e))]}))}))()},sendMessage:function(e){return(0,Hn.Z)((function(){var n,i;return(0,Yn.__generator)(this,(function(o){switch(o.label){case 0:return[4,s()];case 1:return n=o.sent(),i={fileContext:n.ghostwriterFileContext.fileContext,mostRecentFile:n.mostRecentFile},[4,r({chatMessage:e.message,workspaceContext:i,messages:t()})];case 2:return o.sent(),[2]}}))}))()},getWorkspaceContext:function(){return(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return[4,s()];case 1:return[2,e.sent()]}}))}))()},getInputValue:function(){return(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){return[2,i()]}))}))()},setInputValue:function(e){return(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return[4,o(e)];case 1:return n.sent(),[2]}}))}))()},getIsSending:function(){return(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){return[2,a()]}))}))()},clearChatHistory:function(){return(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){return l(),[2]}))}))()},regenerateMessage:function(e){return(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return[4,c({responseId:e.responseId,action:e.action})];case 1:return n.sent(),[2,this.getChatHistory()]}}))})).apply(this)},onChatHistoryChange:function(e){return(0,Hn.Z)((function(){var n;return(0,Yn.__generator)(this,(function(t){return n=u((function(n){return e(n)})),[2,IS((function(){n()}))]}))}))()}}}function EI(e){var n=e.services.runner;return{getRunState:function(){return n.getRunState()},onStateChanged:function(e){var t=n.onStateChanged(e);return IS((function(){t()}))}}}function RI(e){return{revealOrInsertTool:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e.logger.createLogger({api:"revealOrInsertTool"});if(e.extension.manifest.tools)if(e.extension.manifest.tools.length<n+1)t.warn("Tool index out of bounds");else{var r=e.extension.manifest.tools[n],i=r.name||e.extension.manifest.name,o=r.handler;e.environmentAPIs.revealOrInsertTool({extensionId:e.extension.extensionId,installationId:e.extension.installationId,baseUrl:e.extension.baseUrl,path:o,name:i})}else t.warn("No tools defined in extension manifest")}}}var GI=t(4682),PI=t(34489),DI=t(22126);function BI(e){var n=e.services.fs;return{setSecret:function(e){return(0,Hn.Z)((function(){var t,r,i,o,a;return(0,Yn.__generator)(this,(function(l){switch(l.label){case 0:return[4,n.readFile(".env")];case 1:return(t=l.sent()).error?[2,(0,DI.U)(t.error)]:(r=PI.Z.parse(t.content.toString()),i=(0,oe.Z)((0,m.Z)({},r),(0,f.Z)({},e.key,e.value)),o=PI.Z.serialize(i),[4,n.writeFile(".env",o)]);case 2:return(a=l.sent()).error?[2,(0,DI.U)(a.error)]:[2,(0,DI.Ok)(!0)]}}))}))()},getSecret:function(e){return(0,Hn.Z)((function(){var t,r;return(0,Yn.__generator)(this,(function(i){switch(i.label){case 0:return[4,n.readFile(".env")];case 1:return(t=i.sent()).error?[2,(0,DI.U)(t.error)]:(r=PI.Z.parse(t.content.toString()),[2,(0,DI.Ok)(r[e.key])])}}))}))()},getReferenceCode:function(e){return(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,GI.e)(e.filePath,e.key)];case 1:return[2,n.sent()]}}))}))()}}}function UI(e){var n=e.services.dotReplit;return{getConfig:n.getConfig,update:n.updateDotReplit}}function AI(e){return e.store.get(e.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:TI(e),execInShell:e.environmentAPIs.execInShell,runner:EI(e),container:II(e),layout:RI(e),secrets:BI(e),dotReplit:UI(e),commands:kI(e)}:null}var LI=Ou.Type.Record(Ou.Type.String(),Ou.Type.String({minLength:1}));function OI(e){return{registerCommand:function(){var n=(0,Hn.Z)((function(n,t){var r;return(0,Yn.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,Pu.V)(t,e)];case 1:return r=i.sent(),[3,3];case 2:throw i.sent();case 3:return e.store.set(Ru._K,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:n.commandId,contributions:n.contributions,create:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){return[2,r]}))}))}}),[2]}}))}));return function(e,t){return n.apply(this,arguments)}}(),registerCreateCommand:function(){var n=(0,Hn.Z)((function(n,t){var r;return(0,Yn.__generator)(this,(function(i){return r={id:n.commandId,contributions:n.contributions,create:function(){var n=(0,Hn.Z)((function(n){var r,i;return(0,Yn.__generator)(this,(function(o){switch(o.label){case 0:return r=n.path,[4,Promise.race([t({path:r}),(a=50,new Promise((function(e){return setTimeout((function(){return e(null)}),a)})))])];case 1:return null===(i=o.sent())?[2,null]:[2,(0,Pu.V)(i,e)]}var a}))}));return function(e){return n.apply(this,arguments)}}()},e.store.set(Ru._K,{extensionStateAtom:e.extensionStateAtom,createCommand:r}),[2]}))}));return function(e,t){return n.apply(this,arguments)}}()}}function _I(e){var n=e.filePath,t=e.replId,r=e.environmentAPIs,i=e.logger.createLogger({api:"debug"});function o(){return o=(0,Hn.Z)((function(n){var t,r,i,o;return(0,Yn.__generator)(this,(function(a){switch(a.label){case 0:return[4,null===n||void 0===n?void 0:n.clientName];case 1:return r=null!==(t=a.sent())&&void 0!==t?t:"(unset)",[4,null===n||void 0===n?void 0:n.clientVersion];case 2:return o=null!==(i=a.sent())&&void 0!==i?i:"(unset)",(0,h.j)(h.U3.EXTENSION_SANDBOX_INITIALIZED,{clientName:r,clientVersion:o,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,Hn.Z)((function(){var n,t,i;return(0,Yn.__generator)(this,(function(a){switch(a.label){case 0:return e.extension.isLocal?"@replit/extensions"!==r?[2]:[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")]:[2];case 1:if((t=a.sent()).error)throw t.error;if(!t.output)throw new Error("No output from npm");return(i=JSON.parse(null===(n=t.output)||void 0===n?void 0:n.trim()))===o||e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(o,", but the latest version is ").concat(i),{clientVersion:o,latestVersion:i}),[2]}}))}))(),[2,{success:!0}]}}))})),o.apply(this,arguments)}var a=(0,oe.Z)((0,m.Z)({filePath:n},function(e){var n=function(e,n){return"utf8"===n?e.toString():"binary"===n?e.toBuffer():e},t=e.services.fs,r=e.logger.createLogger({api:"fs"});function i(){return i=(0,Hn.Z)((function(e,n){var r,i,o;return(0,Yn.__generator)(this,(function(a){switch(a.label){case 0:return r=(0,BS.AH)(e),"string"!==typeof n?[3,1]:(i=n,[3,4]);case 1:return(0,uS.Z)(n,Blob)?(o=hc.Z.from,[4,n.arrayBuffer()]):[3,3];case 2:return i=o.apply(hc.Z,[a.sent()]),[3,4];case 3:i=hc.Z.from(n),a.label=4;case 4:return[4,t.writeFile(r,i)];case 5:return[2,US(a.sent())]}}))})),i.apply(this,arguments)}function o(){return o=(0,Hn.Z)((function(e){var r,i,o,a=arguments;return(0,Yn.__generator)(this,(function(l){switch(l.label){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"utf8",i=(0,BS.AH)(e),[4,t.readFile(i)];case 1:return(o=l.sent()).error?[2,{error:o.error,content:null}]:[2,{error:null,content:n(o.content,r)}]}}))})),o.apply(this,arguments)}function a(){return a=(0,Hn.Z)((function(e){var n,r;return(0,Yn.__generator)(this,(function(i){switch(i.label){case 0:return n=(0,BS.AH)(e),[4,t.readDir(n)];case 1:return(r=i.sent()).error?[2,{error:r.error,children:null}]:[2,{error:null,children:r.children}]}}))})),a.apply(this,arguments)}function l(){return l=(0,Hn.Z)((function(e){var n;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return n=(0,BS.AH)(e),[4,t.createDir(n)];case 1:return[2,US(r.sent())]}}))})),l.apply(this,arguments)}function c(){return c=(0,Hn.Z)((function(e){var n;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return n=(0,BS.AH)(e),[4,t.deleteDir(n)];case 1:return[2,US(r.sent())]}}))})),c.apply(this,arguments)}function s(){return s=(0,Hn.Z)((function(e){var n;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return n=(0,BS.AH)(e),[4,t.deleteFile(n)];case 1:return[2,US(r.sent())]}}))})),s.apply(this,arguments)}function u(){return u=(0,Hn.Z)((function(e,n){var r,i,o;return(0,Yn.__generator)(this,(function(a){switch(a.label){case 0:return r=(0,BS.AH)(e),[4,t.stat(r)];case 1:return(i=a.sent()).exists?i.type!==Tn.Tv.File?[3,3]:[4,t.moveFile(r,n)]:[2,{error:"File or directory does not exist",success:!1}];case 2:return o=a.sent(),[3,5];case 3:return[4,t.moveDir(r,n)];case 4:o=a.sent(),a.label=5;case 5:return[2,US(o)]}}))})),u.apply(this,arguments)}function d(){return d=(0,Hn.Z)((function(e,n){var r;return(0,Yn.__generator)(this,(function(i){switch(i.label){case 0:return r=(0,BS.AH)(e),[4,t.copyFile(r,n)];case 1:return[2,US(i.sent())]}}))})),d.apply(this,arguments)}return PS([DS(e,["read"])],(0,m.Z)({readFile:function(e){return o.apply(this,arguments)},readDir:function(e){return a.apply(this,arguments)},watchFile:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",o=(0,BS.AH)(e);(0,En.Mb)(o)&&r.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=t.watchFile(o,{onChange:function(e){"utf8"!==i?n.onChange(e.asBuffer):n.onChange(e.toString("utf8"))},onError:function(e){n.onError(e.message)},onMoveOrDelete:function(e){n.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return IS((function(){a()}))},watchDir:function(e,n){var r=(0,BS.AH)(e),i=t.watchDir(r,{onChange:function(t){n.onChange(t.map((function(n){return{path:(0,BS.Oh)(e)+n.filename,type:n.type}})))},onError:function(e){n.onError(e)},onMoveOrDelete:function(e){n.onMoveOrDelete(e)}});return IS((function(){i()}))}},PS([DS(e,["write-exec"])],{createDir:function(e){return l.apply(this,arguments)},deleteDir:function(e){return c.apply(this,arguments)},writeFile:function(e,n){return i.apply(this,arguments)},deleteFile:function(e){return s.apply(this,arguments)},copyFile:function(e,n){return d.apply(this,arguments)},move:function(e,n){return u.apply(this,arguments)},watchTextFile:function(e,n){(0,En.Mb)(e)||r.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var i=t.watchTextFile(e,{onReady:function(e){var t=e.fetchChanges,r=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,l=e.writeChange;n.onReady(IS({writeChange:l,fetchChanges:t,initialContent:r,version:a,transformSelection:i,updateSelections:o}))},onChange:function(){var e=(0,Hn.Z)((function(e){var t,r,i,o;return(0,Yn.__generator)(this,(function(a){return t=e.latestContent,r=e.changeSource,i=e.changes,o=e.version,n.onChange({latestContent:t.toString(),version:o,changeSource:r,changes:i.toJSON()}),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onError:function(e){n.onError(e.message)},onMoveOrDelete:function(e){n.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return IS((function(){i()}))}})))}(e),function(e){var n=e.services.container,t=null;function r(){return i.apply(this,arguments)}function i(){return(i=(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return t?[2]:[4,n.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw new Error("unable to find REPLIT_DB_URL");return t=e.output.trim(),[2]}}))}))).apply(this,arguments)}function o(){return o=(0,Hn.Z)((function(e,i){return(0,Yn.__generator)(this,(function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl",t,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}}))})),o.apply(this,arguments)}function a(){return(a=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","".concat(t,"/").concat(e))];case 2:return[2,i.sent().output]}}))}))).apply(this,arguments)}function l(){return(l=(0,Hn.Z)((function(e){var i;return(0,Yn.__generator)(this,(function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","".concat(t,"?prefix=").concat(e))];case 2:return(i=o.sent()).error||!i.output?[2,{error:i.error}]:[2,{keys:i.output.split("\n")}]}}))}))).apply(this,arguments)}function c(){return(c=(0,Hn.Z)((function(e){var i;return(0,Yn.__generator)(this,(function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","-XDELETE","".concat(t,"/").concat(e))];case 2:return(i=o.sent()).error||!i.output?[2,{error:i.error}]:[2,{keys:i.output.split("\n")}]}}))}))).apply(this,arguments)}return PS([DS(e,["repldb:read"])],(0,m.Z)({getReplDbValue:function(e){return a.apply(this,arguments)},listReplDbKeys:function(e){return l.apply(this,arguments)}},PS([DS(e,["repldb:write"])],{setReplDbValue:function(e,n){return o.apply(this,arguments)},deleteReplDbKey:function(e){return c.apply(this,arguments)}})))}(e),function(e){return{watchActiveFile:function(n){return IS(e.environmentAPIs.watchActiveFile(n))},openFile:e.environmentAPIs.openFile,getActiveFile:function(){return e.environmentAPIs.getActiveFile()}}}(e),function(e){var n=e.getThemeContext,t=e.onThemeChange;return{getCurrentTheme:function(){return n().theme},getCurrentThemeValues:function(){return n().theme.values.global},onThemeChange:function(e){var n=t(e);return IS((function(){n()}))},onThemeChangeValues:function(e){var n=t((function(n){return e(n.values.global)}));return IS((function(){n()}))}}}(e),function(e){var n=e.showMessage;return{showConfirm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;return n({content:e,type:"confirm",time:t>1e4?1e3:t,style:arguments.length>2?arguments[2]:void 0})},showError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;return n({content:e,type:"error",time:t>1e4?1e3:t,style:arguments.length>2?arguments[2]:void 0})},showNotice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;return n({content:e,type:"notice",time:t>1e4?1e3:t,style:arguments.length>2?arguments[2]:void 0})},showWarning:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;return n({content:e,type:"warning",time:t>1e4?1e3:t,style:arguments.length>2?arguments[2]:void 0})},hideMessage:e.hideMessage,hideAllMessages:e.hideAllMessages}}(r.toasts),function(e){var n=e.replId;return{currentUser:bI(fI),userById:bI(vI),userByUsername:bI(hI),currentRepl:function(e){return bI(gI)((0,m.Z)({id:n},e))},replById:bI(gI),replByUrl:bI(ZI)}}({replId:t}),function(e){var n=e.services.container.client(),t=e.logger.createLogger({api:"exec"});function r(){return r=(0,Hn.Z)((function(e){var r,i,o,a,l;return(0,Yn.__generator)(this,(function(c){switch(c.label){case 0:return[4,e.args];case 1:return r=c.sent(),[4,e.env];case 2:if(i=c.sent(),t.info("exec: [".concat(r.join(", "),"]"),{environmentVariables:i}),!Fu.B4.Check(LI,i))throw new Error("Invalid environment variables");return[4,e.splitStderr];case 3:return o=c.sent(),a=function(){},l=new Promise((function(l){a=n.openChannel({service:"exec"},(function(n){var c=n.channel;c.onCommand((function(n){o?n.output?e.onOutput(n.output):n.stderr&&e.onStdErr(n.stderr):n.output&&e.onOutput(n.output)})),c.request({exec:{args:r,env:i,splitStderr:Boolean(o)}}).then((function(n){if(n.ok)l({exitCode:0,error:null});else{if(n.channelClosed){var t="Channel closed before command's execution finished";return e.onError(t),void l({exitCode:null,error:t})}if("open"===c.status&&a(),!n.error)throw new Error("Unknown error");var r,i,o=Number(null===(i=null===(r=n.error)||void 0===r?void 0:r.match(/-?[0-9]+/g))||void 0===i?void 0:i[0]);l({exitCode:"number"===typeof o?o:null,error:n.error})}})).catch((function(n){t.error("exec: threw crosis error:\n".concat(String(n||"")));var r="exec() failed due to internal error. See console for details.";e.onError(r),l({error:r,exitCode:null})}))}))})),[2,IS({dispose:function(){a()},promise:l})]}}))})),r.apply(this,arguments)}return(0,m.Z)({},PS([DS(e,["write-exec"])],{exec:function(e){return r.apply(this,arguments)}}))}(e),function(e){var n=e.extension,t=e.paneId,r=e.environmentAPIs,i=!1;return{activatePane:function(){t&&(r.activatePane(t),i||(i=!0,(0,h.j)(h.U3.EXTENSION_USED,{extensionId:n.extensionId,extensionName:n.manifest.name})))}}}(e)),{commands:OI(e),experimental:SI(e),internal:AI(e),debug:{info:function(e,n){return i.info(e,n)},warn:function(e,n){return i.warn(e,n)},error:function(e,n){return i.error(e,n)}},handshake:function(e){return o.apply(this,arguments)}});return a}function XI(e){var n=e.extensionIframe,t=new URL(n.src).origin,r=_I(e);if(!n.contentWindow)throw new Error("No contentWindow");var i=bS(r,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(n,r){e.postMessage(n,t,r)},addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}(n.contentWindow,self,t),{origin:t,source:n.contentWindow}),o=function(r){if(r.origin===t&&n.contentWindow===r.source){var i=r.data;i.payload&&e.logger.warn("Extension sent deprecated postMessage",i)}};return window.addEventListener("message",o),function(){i(),window.removeEventListener("message",o)}}var zI=t(24430),MI=t(20497);function jI(e){var n=e.extension,t=e.sandboxUrl,r=e.sandboxTitle,i=e.paneId,o=e.environmentAPIs,a=e.filePath,s=c.useRef(null),d=(0,Ie.Z)(),p=(0,oS.d)(),f=(0,re.Z)(),h=c.useRef(),v=(0,u.P5)({controlName:"flag-extensions-enforce-scopes",default:!1,type:"boolean",logFlagToAnalytics:!1}),g=(0,jx.Ld)(),Z=(0,QC.r9)(null===n||void 0===n?void 0:n.installationId),b=(0,Qv.F)(),y=c.useRef(b),x=c.useRef([]);y.current=b;var w=function(){var e=(0,zI.ql)(),n=(0,MI.r)(),t=(0,zI.$C)(),r=(0,zI.z_)(),i=(0,zI.nB)(),o=(0,zI.ZT)(),a=(0,zI.Gd)(),s=(0,zI.Xq)(),u=(0,l.Z)((0,zI.zu)(),1)[0],d=(0,c.useRef)([]);return(0,c.useEffect)((function(){d.current.forEach((function(e){return e(u)}))}),[u]),(0,$n.Z)((function(){return{sendMessage:e,getChatHistory:s,getWorkspaceContext:n,getGhostwriterChatTextInput:r,setGhostwriterChatTextInput:t,getGhostwriterIsSending:i,clearChatHistory:o,regenerateMessage:a,onChatHistoryChange:function(e){return d.current.push(e),function(){d.current.splice(d.current.indexOf(e),1)}}}}),[e,s,n,r,t,i,o,a])}(),k=(0,Lw.Z)(),C=(0,l.Z)(c.useState(!1),2),S=C[0],I=C[1];(0,c.useEffect)((function(){k===lS.em.CONNECTED&&I(!0)}),[k]),(0,c.useEffect)((function(){x.current.forEach((function(e){return e(b.theme)}))}),[b.theme]),(0,c.useEffect)((function(){return function(){h.current&&h.current()}}),[]);var T=c.useCallback((function(){try{return"https:"===new URL(t).protocol}catch(e){return!1}}),[t]),E=c.useCallback((function(){if(s.current&&T()&&n&&Z&&p){h.current&&h.current();var e={extension:n,extensionIframe:s.current,services:f,paneId:i,replId:d,flagEnforceScopes:v,getThemeContext:function(){return y.current},onThemeChange:function(e){return x.current.push(e),function(){x.current.splice(x.current.indexOf(e),1)}},store:g,extensionStateAtom:Z,environmentAPIs:o,filePath:a,logger:n.logger.createLogger({sandboxUrl:t,sandboxTitle:r}),userId:p,ghostwriter:w};h.current=XI(e)}}),[p,y,f,T,i,v,g,Z,o,d,a,n,t,r,w]),R=c.useCallback((function(){if(s.current){var e=s.current.src;s.current.src=e}}),[]);return{isValidExtensionPaneUrl:T,didConnectOnce:S,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,oe.Z)((0,m.Z)({title:r,src:t},cS.Z,e),{ref:(0,au.l)(s,e.ref),onLoad:function(n){E(),e.onLoad&&e.onLoad(n)}})},reloadSandbox:R}}function WI(e){var n=e.extension,t=e.environmentAPIs;if(!n.manifest.background)throw new Error("ExtensionBackground loaded without a background script defined in manifest");var i=(0,QC.r9)(n.installationId),o=jI({extension:n,sandboxUrl:(0,zd.Vh)(n.baseUrl,n.manifest.background.page),sandboxTitle:"Extension Background: "+n.manifest.name,environmentAPIs:t,paneId:null,filePath:null}),a=o.didConnectOnce,l=o.isValidExtensionPaneUrl,c=o.getIframeProps;return l()&&a&&i?(0,r.tZ)("iframe",(0,m.Z)({},c({css:{width:"0px",height:"0px",border:"none"}}))):null}function NI(){var e=El(),n=(0,Ai.Xo)(),t=(0,Re.QH)(),r=(0,Re.pV)(),i=(0,qe.Z)(),o=yl(),a=YZ(),l=(0,Ai.WU)(),s=(0,vc.c4)(),u=(0,c.useCallback)(function(){var e=(0,Hn.Z)((function(e){var n,t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return n=o({pane:{type:"shell"},activate:!0,placement:{type:"secondary"}}),[4,s(n)];case 1:if("shell"!==(t=r.sent()).type)throw new Error("Expected shell pane binding");return t.exec(e),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[o,s]),d=(0,c.useCallback)((function(e){var n=e.extensionId,t=e.installationId,r=e.baseUrl,i=e.path,o=e.name;a({pane:{type:"extension",data:{extensionId:n,installationId:t,baseUrl:r,path:i,name:o}},activate:!0,placement:{type:"secondary",relativeTo:l()}})}),[a,l]);return(0,$n.Z)((function(){return{openFile:e,watchActiveFile:t,getActiveFile:r,activatePane:n,toasts:i,execInShell:u,revealOrInsertTool:d}}),[e,t,r,n,i,u,d])}function FI(e){var n=e.hostedUrl,t=(0,Ie.Z)(),i=(0,oS.d)(),o=(0,za.cR)(),a=(0,QC.WF)(),l=xl(),s=(0,iS.Kf)(),u=(0,QC.ot)(),d=(0,iS.dI)();(0,za.Sp)();var p=(0,QC.Mu)(),f=NI(),h=(0,c.useState)(!1),v=h[0],m=h[1];c.useEffect((function(){t&&i&&d({replId:t,userId:i})}),[t,i,d]);var g=function(e){var n=e.filterUser;return function(){var e=(0,Hn.Z)((function(e){var o,l,c;return(0,Yn.__generator)(this,(function(s){switch(s.label){case 0:return e.active?[4,null===Cr.l||void 0===Cr.l?void 0:Cr.l.query({query:nS,variables:{replId:t,userId:n?i:void 0}})]:[2,[]];case 1:return!(o=s.sent())||o.error?[2,[]]:(l=o.data.extensionList)?[2,l.map((function(e){return{match:Qn.pl,data:{type:"action",label:e.name,icon:(0,r.tZ)(eb.Z,{}),description:null!==(c=e.description)&&void 0!==c?c:"",run:function(){e.url&&(e.installation?u({installationId:(0,Gu.Ad)(e.installation.id)}):a({replId:t,extensionId:(0,Gu.T8)(e.id)}))}}}}))]:[2,[]]}}))}));return function(n){return e.apply(this,arguments)}}()},Z=(0,Ru.s6)(Gu.YC.CommandBar);return jc({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return e=[{data:{}}],[4,Promise.all(Z.map(function(){var n=(0,Hn.Z)((function(n){var t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:return(t=r.sent())?[2,(0,Pu.C)(t,{path:e})]:[2,null]}}))}));return function(e){return n.apply(this,arguments)}}()))];case 1:return[2,n.sent().filter(Boolean)]}}))}))},{enabled:!0}),jc({match:Qn.pl,commands:function(e){return e.active||""!==e.search?[{match:Qn.pl,data:{type:"action",label:"Extension Devtools",icon:(0,r.tZ)(pc.Z,{}),description:"Manage and deploy this Repl as an extension",run:function(){l({pane:{type:"extensionDevtools"}})}}},{match:Qn.pl,data:{type:"action",label:"URL",icon:(0,r.tZ)(pc.Z,{}),description:"Add an extension by URL",run:function(){m(!0)}}},{match:Qn.pl,data:{type:"action",label:"From this Repl",icon:(0,r.tZ)(pc.Z,{}),description:"Load this Repl as an extension",run:function(){s(n)}}},{match:Qn.pl,data:{type:"context",label:"My Extensions",icon:(0,r.tZ)(eb.Z,{}),description:"Browse extensions you have created"},commands:g({filterUser:!0})},{match:Qn.pl,data:{type:"action",label:"Docs",icon:(0,r.tZ)(tf.Z,{}),description:"Read the Extensions docs",run:function(){l({pane:{type:"docs",data:{url:lt.TT.EXTENSIONS}}})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,r.tZ)(eb.Z,{}),description:"Manage extensions"}},{enabled:o}),(0,r.BX)(r.HY,{children:[(0,r.tZ)(He.u,{isOpen:v,onRequestClose:function(){return m(!1)},children:(0,r.tZ)(aS.Z,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.repl.co",type:"text",onCancel:function(){return m(!1)},onConfirm:function(e){s(e)}})}),p.map((function(e){return e.manifest.background?(0,r.tZ)(WI,{environmentAPIs:f,extension:e},e.installationId):null}))]})}var VI=t(74459);function HI(){var e=ao(mr),n=(0,Xv.Z)(),t=(0,tb.NJ)(),r=(0,tb.Cl)(),i=(t||r)&&n?s.Mz:0,o=(0,c.useRef)(null),a=(0,ou.Z)((function(n){var t=n.width,r=n.height;if(t&&r&&o.current){var a=o.current.getBoundingClientRect(),l=a.top,c=a.left;e({width:t,height:r,x:c,y:l-i})}}));return(0,c.useCallback)((function(e){o.current=e,a(e)}),[a])}var YI=t(83777),qI={Content:function(e){var n=e.options,t=n.performPaneOperation,i=n.paneId,o=e.pane.data.autoFocus,a=Zl(),l=(0,c.useRef)(null);(0,vc.Wk)((function(){return{focus:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.call(l)}}}),[]);var s=(0,c.useCallback)((function(e){t({operation:"replace",pane:e.pane}),a(i),(0,h.j)(h.U3.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})}),[t,i,a]),u=Gc({currentPaneId:i,openPane:s});return(0,r.tZ)(Nn.X,{autoFocus:o,command:u,focusRef:l})},Icon:function(){return null},getTitle:function(){return"New tab"},decode:t(15249).J},KI=t(38060);function $I(e){return(0,r.BX)(r.HY,{children:[(0,r.tZ)(De.Z,{truncate:!0,level:5,children:"Call stack"}),(0,r.tZ)(Ue.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map((function(n){return(0,r.tZ)(QI,{frame:n,onClick:e.onFrameClick},n.id)}))})]})}function QI(e){var n,t,i=e.frame,o=e.onClick,a=null===(n=i.source)||void 0===n?void 0:n.name,l=null===(t=i.source)||void 0===t?void 0:t.path,c=a&&(0,sC.om)(a),s=l&&(0,sC.om)(l),u=l&&(0,sC.IT)(l);return(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{onClick:function(){return u&&o(u,i.line)},className:"jsx-c66d0af1ad52f929 frame",children:[(0,r.tZ)("div",{className:"jsx-c66d0af1ad52f929 label name",children:i.name}),(0,r.BX)("div",{className:"jsx-c66d0af1ad52f929 label path",children:[(0,r.tZ)("span",{className:"jsx-c66d0af1ad52f929 line",children:i.line}),c||s||a||l]})]}),(0,r.tZ)(Fe(),{id:"c66d0af1ad52f929",children:".frame.jsx-c66d0af1ad52f929{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-small);font-family:var(--font-family-code)}.frame.jsx-c66d0af1ad52f929:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.jsx-c66d0af1ad52f929{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.name.jsx-c66d0af1ad52f929{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.path.jsx-c66d0af1ad52f929{-webkit-box-flex:0;-webkit-flex:0 1 auto;-moz-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto}.line.jsx-c66d0af1ad52f929{display:inline-block;margin-right:var(--space-8);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}"})]})}function JI(e){var n=[],t=!0,i=!1,o=void 0;try{for(var a,c=e.breakpoints[Symbol.iterator]();!(t=(a=c.next()).done);t=!0){var s=(0,l.Z)(a.value,2),u=s[0],d=s[1],p=!0,f=!1,h=void 0;try{for(var v,m=d[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var g=v.value;n.push((0,r.tZ)(eT,{breakpoint:g,file:u,line:g.line,verified:g.verified,onClick:e.onBreakpointClick,onRemove:e.onRemove},"".concat(u,":").concat(g.line,":").concat(g.pid1Id,":").concat(g.dapId)))}}catch(Z){f=!0,h=Z}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}}}catch(Z){i=!0,o=Z}finally{try{t||null==c.return||c.return()}finally{if(i)throw o}}return(0,r.BX)(r.HY,{children:[(0,r.tZ)(De.Z,{truncate:!0,level:5,children:"Breakpoints"}),n.length>0?(0,r.tZ)(Ue.gC,{align:"stretch",constrainWidth:!0,children:n}):(0,r.BX)(Be.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,r.tZ)("span",{className:"jsx-223474dbb82a953c breakpoint"})," by clicking on the line number.",(0,r.tZ)(Fe(),{id:"223474dbb82a953c",children:".breakpoint.jsx-223474dbb82a953c{display:inline-block;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:8px;height:8px}"})]})]})}function eT(e){var n=e.breakpoint,t=e.file,i=e.line,o=e.verified,a=e.onClick,l=e.onRemove,c=(0,sC.om)(t);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ue.gC,{spacing:1,align:"stretch",children:(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d breakpoint",children:(0,r.BX)("div",{css:[{"&:hover":{backgroundColor:p.TV.backgroundHigher,color:p.TV.foregroundDefault},"&:focus-within":{color:p.TV.foregroundDefault},"&:hover .frameButton":{background:p.TV.backgroundHigher,backgroundColor:p.TV.backgroundHigher,opacity:1},"&:focus-within .frameButton":{opacity:1},"&:hover .frameButton:hover":{backgroundColor:p.TV.backgroundHighest}}],onClick:function(){a(t,i)},className:"jsx-3743f20b19d8f08d frame",children:[(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d "+(Tp()("circle",{verified:o})||"")}),(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d line",children:i}),(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d location",children:(0,r.tZ)("span",{className:"jsx-3743f20b19d8f08d path",children:c||t})}),(0,r.tZ)(ee.hU,{className:"frameButton",alt:"Remove breakpoint",css:[{opacity:0}],onClick:function(){l({breakpoint:n})},children:(0,r.tZ)(xp.Z,{})})]})})}),(0,r.tZ)(Fe(),{id:"3743f20b19d8f08d",children:".breakpoint.jsx-3743f20b19d8f08d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;max-width:100%;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.frame.jsx-3743f20b19d8f08d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default)}.circle.jsx-3743f20b19d8f08d{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:11px;height:11px;margin-left:var(--space-8);margin-right:var(--space-8);opacity:.5}.verified.jsx-3743f20b19d8f08d{opacity:1}.line.jsx-3743f20b19d8f08d{font-family:var(--font-family-code);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.location.jsx-3743f20b19d8f08d{font-family:var(--font-family-code);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8)}.path.jsx-3743f20b19d8f08d{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"})]})}var nT=t(24144),tT=t(5250),rT=t(11363),iT=t(98823),oT=t(27580),aT=t(78945),lT=t(56732);function cT(e){var n=e.client,t=e.debugConfig,i=(0,Hs.Z)(null===n||void 0===n?void 0:n.state),o=(0,Hs.Z)(null===n||void 0===n?void 0:n.supportsStepBack);return(0,r.BX)(d.G,{css:p.l0.rowWithGap(2),children:[o?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ee.hU,{size:40,disabled:!n||"paused"!==i,onClick:function(){(0,h.j)(h.U3.DEBUGGER_USED,{action:"lastBreakpoint"}),null===n||void 0===n||n.reverseContinue()},alt:"Last Breakpoint",tooltipContents:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,r.tZ)(tT.Z,{})}),(0,r.tZ)(ee.hU,{size:40,disabled:!n||"paused"!==i,onClick:function(){(0,h.j)(h.U3.DEBUGGER_USED,{action:"stepBack"}),null===n||void 0===n||n.back()},alt:"Step Back",tooltipContents:"Step Back",tooltipPlacement:"bottom",children:(0,r.tZ)(iT.Z,{})})]}):null,(0,r.tZ)(uT,{stop:function(){(0,h.j)(h.U3.DEBUGGER_USED,{action:"stop"}),null===n||void 0===n||n.stop()},start:function(){(0,h.j)(h.U3.DEBUGGER_USED,{action:"start"}),null===n||void 0===n||n.start(t)},state:i}),(0,r.tZ)(ee.hU,{size:40,disabled:!n||"paused"!==i,onClick:function(){(0,h.j)(h.U3.DEBUGGER_USED,{action:"nextStep"}),null===n||void 0===n||n.next()},alt:"Next Step",tooltipContents:"Next Step",tooltipPlacement:"bottom",children:(0,r.tZ)(Lu.Z,{})}),(0,r.tZ)(ee.hU,{size:40,disabled:!n||"paused"!==i,onClick:function(){(0,h.j)(h.U3.DEBUGGER_USED,{action:"skipStep"}),null===n||void 0===n||n.skip()},alt:"Skip Step",tooltipContents:"Skip Step",tooltipPlacement:"bottom",children:(0,r.tZ)(oT.Z,{rotate:90})}),(0,r.tZ)(ee.hU,{size:40,disabled:!n||"paused"!==i,onClick:function(){(0,h.j)(h.U3.DEBUGGER_USED,{action:"nextBreakpoint"}),null===n||void 0===n||n.continue()},alt:"Next Breakpoint",tooltipContents:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,r.tZ)(rT.Z,{})})]})}var sT=(0,i.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function uT(e){var n=e.state,t=e.start,i=e.stop;return"terminated"===n?(0,r.tZ)(ee.hU,{css:p.l0.color.accentPrimaryDefault,size:40,onClick:t,alt:"Run",tooltipContents:"Run",tooltipPlacement:"bottom",children:(0,r.tZ)(aT.Z,{})}):"stopping"===n||null===n?(0,r.tZ)(ee.hU,{size:40,disabled:!0,alt:"Loading",tooltipContents:"Loading",tooltipPlacement:"bottom",children:(0,r.tZ)(se.Z,{})}):(0,r.tZ)(ee.hU,{css:"initializing"===n||"preinitializing"===n?[p.l0.color.foregroundDimmer,{animationName:sT.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:p.l0.color.accentPrimaryDefault,size:40,onClick:i,alt:"Stop",tooltipContents:"Stop",tooltipPlacement:"bottom",children:(0,r.tZ)(lT.Z,{})})}var dT=t(45942),pT=t(33723);function fT(e){var n=e.children;return(0,r.BX)(Q.Tg,{background:"default",css:[p.l0.height("100%"),p.l0.width("100%"),p.l0.p(8),p.l0.overflow("auto"),{borderTopRightRadius:p.TV.borderRadius4,paddingBottom:"44px"}],children:[(0,r.BX)(Ue.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,r.tZ)(Ue.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:(0,r.tZ)(De.Z,{truncate:!0,level:4,children:"Debugger"})}),n]}),(0,r.tZ)(Fe(),{id:"ffa04cbdbbf3badd",children:"a.jsx-ffa04cbdbbf3badd{font-size:var(--font-size-default);color:var(--accent-primary-default);font-weight:var(--font-weight-medium)}"})]})}function hT(e){var n=(0,Rn.U)(),t=(0,re.Z)().debuggest,i=(0,Hs.Z)(t.mainClient),o=(0,Hs.Z)(i?i.state:null),a=(0,Hs.Z)(i?i.stackFrames:null),l=(0,Hs.Z)(i?i.variables:null),s=(0,Hs.Z)(i?i.breakpoints:null),u=(0,Re.R3)(),f=ll(),h=(0,pZ.T)(),v=!!(null===h||void 0===h?void 0:h.debuggers)&&h.debuggers.length>0,m=(0,c.useState)(null),g=m[0],Z=m[1],b=c.useMemo((function(){return function(e,n,t,r){if(!(null===e||void 0===e?void 0:e.debuggers))return[];var i=[];if(n=n.slice(),r&&-1===n.indexOf(r)&&n.splice(0,0,r),t){var o=n.indexOf(t);-1!==o&&(n.splice(o,1),n.splice(0,0,t))}var a=!0,l=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if(d.match(/(\.[a-z0-9]+)$/)){var p=!0,f=!1,h=void 0;try{for(var v,m=e.debuggers[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var g=v.value;if(g.fileParam){var Z=(0,dT.rF)(g.fileTypeAttrs);null===Z&&g.language&&(Z=dT.$R.from(g.language)),Z&&(0,pT.JW)(d,Z)&&i.push({debuggerOption:g,filePath:d,title:"Debug ".concat(d," (").concat(g.name,")")})}}}catch(S){f=!0,h=S}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}}}}catch(S){l=!0,c=S}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}var b=!0,y=!1,x=void 0;try{for(var w,k=e.debuggers[Symbol.iterator]();!(b=(w=k.next()).done);b=!0){var C=w.value;C.fileParam||i.push({debuggerOption:C,title:"Debug (".concat(C.name,")")})}}catch(S){y=!0,x=S}finally{try{b||null==k.return||k.return()}finally{if(y)throw x}}return i}(h||null,f.map((function(e){return e.filePath||""})),u,(null===h||void 0===h?void 0:h.entrypoint)||"")}),[u,f,h]);c.useEffect((function(){(b.length>0&&!g||g&&!b.find((function(e){return e.debuggerOption.id===g.debuggerOption.id&&e.filePath===g.filePath})))&&Z(b[0])}),[b]);var y=function(n,t){var r=(0,sC.om)(n);r&&e.onOpenFile({path:r,line:t})};return v?(0,r.BX)(fT,{children:[b.length>0&&(0,r.tZ)(fw.P,{id:n("debug-config"),items:b,selectedItem:g,onChange:function(e){Z(e)},"aria-label":"Select a debugging configuration"}),(0,r.tZ)(cT,{client:i,debugConfig:g||void 0}),s?(0,r.tZ)(JI,{breakpoints:s,onBreakpointClick:y,onRemove:function(e){var n=e.breakpoint;i&&n.pid1Id&&i.removeBreakpoint(n.pid1Id)}}):null,l&&i&&"paused"===o?(0,r.tZ)(nT.Z,{client:i,variables:l}):null,a&&"paused"===o?(0,r.tZ)($I,{frames:a,onFrameClick:y}):null,i?(0,r.tZ)(d.G,{css:[p.l0.flex.row,p.l0.justify.end,p.l0.position.absolute,p.l0.bottom(0),p.l0.right(0),p.l0.p(8),p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(0,0,8,8),{width:"100%"}],children:(0,r.tZ)(J.zx,{size:"small",variant:"outlined",onClick:function(){return function(e){if("undefined"===typeof Blob)return;var n=new Blob([e],{type:"text/plain"}),t=document.createElement("a");t.download="debugger-logs.txt",t.href=URL.createObjectURL(n),t.dataset.downloadurl=["text/plain",t.download,t.href].join(":"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout((function(){URL.revokeObjectURL(t.href)}),1500)}(i.getDebugLogs())},text:"Download Logs",iconLeft:(0,r.tZ)(Id.Z,{})})}):null]}):(0,r.tZ)(fT,{children:(0,r.tZ)(ne.h4,{level:2,children:"Sorry, no debugger found."})})}var vT=t(74265),mT=Ou.Type.Object({type:Ou.Type.Literal("debugger")}),gT={Content:function(e){var n=e.options;return(0,r.tZ)(hT,{onOpenFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})}})},Icon:function(e){var n=e.size;return(0,r.tZ)(vT.Z,{size:n})},getTitle:function(){return"Debugger"},decode:function(e){return Fu.B4.Decode(mT,e)}};function ZT(){var e=(0,g.Z)(["\n  query ReplAuth($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return ZT=function(){return e},e}var bT={},yT=(0,Z.Ps)(ZT());var xT=t(61439),wT=t(10702),kT=t(3689),CT="Import HTML package",ST=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() <\/script>'}]}],IT=[{title:CT,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"><\/script>'}]}],TT=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],ET="Import Node package",RT=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],GT=[{title:ET,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],PT=function(e){var n=e.title,t=e.content,i=(0,l.Z)(c.useState(t),2),o=i[0],a=i[1];return(0,r.BX)(d.G,{css:[p.l0.colWithGap(4)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(ne.xv,{css:{fontWeight:p.TV.fontWeightMedium},children:n}),"Get user info"===n&&(0,r.BX)(le.u,{tooltip:"User object contains 'id', 'name', 'roles', and 'teams'",placement:"top",children:[" ",(0,r.tZ)(kT.Z,{})]})]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(4),{width:"100%",wordBreak:"break-word"}],children:[(0,r.tZ)(d.G,{css:[p.l0.rowWithGap(4),p.l0.backgroundColor.backgroundRoot,p.l0.borderRadius(4),p.l0.p(4),p.l0.align.center],children:t.map((function(e,t){return"input"===e.type?(0,r.tZ)(Hp.II,{onChange:function(e){var n=(0,We.Z)(o);n[t].value=e.target.value,a(n)},placeholder:e.placeholder,value:e.value||"",css:[p.l0.width(64),p.l0.height(24),p.l0.zIndex(1)]},"".concat(n,"-").concat(t)):(0,r.tZ)(d.G,{css:[p.l0.borderRadius(4),p.l0.backgroundColor.backgroundRoot,{width:"100%"}],children:(0,r.tZ)(ne.xv,{multiline:!1,css:[p.l0.font.code,p.l0.color.greyStronger,p.l0.pb(4),p.l0.pt(4),{overflow:"revert",overflowY:"scroll",textOverflow:"revert"}],children:e.value})},"".concat(n,"-").concat(t))}))}),(0,r.tZ)(DT,{code:o.reduce((function(e,n){return"input"===n.type?e+(n.value||n.placeholder):e+n.value}),""),packageImport:n===ET||n===CT})]})]})},DT=function(e){var n=e.code,t=e.packageImport,i=(0,Re.R3)(),o=(0,Vp.Z)(i),a=(0,re.Z)().fs,l=(0,Re.Qt)();return o?(0,r.tZ)(Q.Tg,{background:"default",children:(0,r.tZ)(J.zx,{size:"small",variant:"outlined",onClick:function(){var e,r;if(t&&i&&a)return"html"!==(0,En.r6)(i)?void o({code:n,insertAt:0}):void a.readFile(i).then((function(e){if(e.error)throw e.error;var t=hc.Z.from(e.content).toString(),r=t.indexOf("</head>")-1;-1===r&&(r=t.indexOf("<script")),-1===r&&(r=t.indexOf("</body>")),-1===r&&(r=t.length),o({code:n,insertAt:r})}));var c=null!==(r=null===(e=l())||void 0===e?void 0:e.position.offset)&&void 0!==r?r:0;o({code:n,insertAt:c})},text:t?"Auto add":"Insert",iconRight:(0,r.tZ)(ey.Z,{}),css:{width:"fit-content"}})}):(0,r.tZ)(Q.Tg,{background:"default",children:(0,r.tZ)(J.zx,{size:"small",variant:"outlined",onClick:function(){return(0,is.Z)(n)},text:"Copy",iconLeft:(0,r.tZ)(rs.Z,{}),css:{width:"fit-content"}})})},BT=function(e){var n=e.examples;return(0,r.tZ)(d.G,{css:[p.l0.colWithGap(16)],children:n.map((function(e,n){return(0,r.tZ)(PT,{title:e.title,content:e.content},n)}))})},UT=function(e){var n=null;switch(e.langKey){case"html":n=IT;break;case"nodejs":n=GT}return n?(0,r.tZ)(d.G,{css:[p.l0.colWithGap(8)],children:(0,r.tZ)(BT,{examples:n})}):null},AT=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],LT=function(){return(0,r.tZ)(r.HY,{children:(0,r.tZ)(d.G,{css:[p.l0.colWithGap(16)],children:AT.map((function(e,n){return(0,r.tZ)(PT,{title:e.title,content:e.content},n)}))})})},OT=function(e){var n=e.langKey,t=(0,r.tZ)(LT,{});switch(n){case"html":t=(0,r.tZ)(BT,{examples:ST});break;case"nodejs":t=(0,r.tZ)(BT,{examples:RT})}return(0,r.tZ)(d.G,{css:[p.l0.colWithGap(8)],children:t})},_T=function(e){var n=e.langKey;return(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[" ","html"!==n&&(0,r.tZ)(BT,{examples:IT}),(0,r.tZ)(BT,{examples:TT})]})},XT=t(88688),zT=t(5860);function MT(){var e,n,t,i,o=(0,Ie.Z)(),a=(0,re.Z)(),s=a.dotReplit,u=a.fs,f=(0,Re.R3)(),v=(0,xT.I)(),g=(0,Dp.Z)(),Z=(0,qe.Z)().showError,b=(0,l.Z)(c.useState(!1),2),y=b[0],x=b[1],w=(0,l.Z)(c.useState(!1),2),k=w[0],C=w[1],S=(0,l.Z)(c.useState(!0),2),I=S[0],T=S[1],E=(0,l.Z)(c.useState(!0),2),R=E[0],G=E[1],P=(0,l.Z)(c.useState(""),2),D=P[0],B=P[1],U=f?(0,En.r6)(f):null,A=function(e){var n=(0,m.Z)({},bT,e);return M.a(yT,n)}({variables:{replID:o}}),L=A.data,O=A.error,_=A.loading,X="Repl"===(null===L||void 0===L?void 0:L.repl.__typename)&&(null===L||void 0===L||null===(e=L.repl)||void 0===e||null===(n=e.config)||void 0===n?void 0:n.isServer);O&&(i="Couldn't load auth data");var z=null===L||void 0===L||null===(t=L.currentUser)||void 0===t?void 0:t.isLoggedIn,j=y||k,W=c.useCallback((0,Hn.Z)((function(){var e,n,t,r,i;return(0,Yn.__generator)(this,(function(o){switch(o.label){case 0:if(!g)return[2];T(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.getConfig({bypassCache:!0})];case 2:if((i=o.sent()).error){if(i.error===XT.Yt.NotFound)return G(!1),T(!1),[2];throw Z("Couldn't load auth data"),T(!1),new Error(i.errorMessage)}return x(Boolean(null===i||void 0===i||null===(e=i.config)||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.buttonEnabled)),C(Boolean(null===i||void 0===i||null===(t=i.config)||void 0===t||null===(r=t.auth)||void 0===r?void 0:r.pageEnabled)),T(!1),[3,4];case 3:return o.sent(),Z("Couldn't load auth data"),T(!1),[3,4];case 4:return[2]}}))})),[g,s,Z]);function N(){return F.apply(this,arguments)}function F(){return(F=(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return T(!0),(0,h.j)(h.U3.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),[4,s.updateDotReplit([(0,mZ.$0)(!0),(0,mZ.Jk)(!1)])];case 1:return e.sent().error&&g&&(Z("Couldn't enable login page, please try again"),T(!1)),[2]}}))}))).apply(this,arguments)}function V(){return H.apply(this,arguments)}function H(){return(H=(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return T(!0),(0,h.j)(h.U3.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),[4,s.updateDotReplit([(0,mZ.$0)(!1),(0,mZ.Jk)(!0)])];case 1:return e.sent().error&&g&&(Z("Couldn't enable login button, please try again"),T(!1)),[2]}}))}))).apply(this,arguments)}function Y(){return q.apply(this,arguments)}function q(){return(q=(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return T(!0),(0,h.j)(h.U3.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),[4,s.updateDotReplit([(0,mZ.$0)(!1),(0,mZ.Jk)(!1)])];case 1:return e.sent().error&&(Z("Couldn't disable Log in with Replit, please try again"),T(!1)),[2]}}))}))).apply(this,arguments)}c.useEffect((function(){var e=function(){var e=(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return u&&g?[4,W()]:[2];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[u,g,W]),c.useEffect((function(){if(u&&g){var e=u.watchTextFile(wT.l,{onChange:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return g?[4,W()]:[2];case 1:return e.sent(),[2]}}))}))});return function(){e(),g&&(C(!1),x(!1),T(!1))}}}),[g,u,C,W]),c.useEffect((function(){v.find((function(e){return"react"===e.language}))||"jsx"===U||"tsx"===U?B("react"):v.length>0&&B(v[0].language)}),[U,D,B,v]);var K=function(){var e="html"===D||"nodejs"===D,n=(0,r.tZ)(ne.xv,{color:"dimmer",children:"You can use Log in with Replit with all web Repls. We have language clients for Nodejs and HTML - switch to a Repl that uses that language to see how to use it."});return y?(0,r.BX)(r.HY,{children:[(0,r.BX)(ne.xv,{color:"dimmer",children:["Your users can log in to your Repl using a custom button. Start by importing the package below"," ",(0,r.BX)("span",{onClick:N,css:[p.l0.color.blueStronger,p.l0.cursor.pointer],onKeyDown:N,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),!e&&n]}):k?(0,r.BX)(r.HY,{children:[(0,r.BX)(ne.xv,{color:"dimmer",children:["Your Repl will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,r.BX)("span",{onClick:V,css:[p.l0.color.blueStronger,p.l0.cursor.pointer],onKeyDown:V,role:"button",tabIndex:0,children:[" ","or use your own custom button."]})]})," ",!e&&n]}):(0,r.BX)(ne.xv,{css:[p.l0.mb(32),p.l0.pl(8),p.l0.pr(8)],children:["Let users log in to your Repl. Use a prebuilt login page or customize your own button."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/repl-auth-sidebar",target:"_blank",rel:"noopener",css:[p.l0.color.accentPrimaryStronger,p.l0.pr(4)],children:"Learn more"})]})},$=function(){return I||_?(0,r.tZ)(d.G,{css:[p.l0.align.center],children:(0,r.tZ)(se.Z,{})}):z?i?(0,r.tZ)(ne.xv,{css:[p.l0.color.accentNegativeStronger],children:i}):R?"html"===D||X?j?(0,r.BX)(d.G,{children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(8),p.l0.pl(8),p.l0.pr(8)],children:[(0,r.tZ)(d.G,{css:[p.l0.colWithGap(8)]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:["nodejs"===D&&y?null:(0,r.tZ)(UT,{langKey:D}),y?(0,r.tZ)(_T,{langKey:D}):null]})]}),(0,r.BX)(d.G,{css:[p.l0.pl(8),p.l0.pr(8)],children:[(0,r.tZ)(ne.xv,{multiline:!1,variant:"small",css:[p.l0.mb(8),p.l0.mt(24),{textTransform:"uppercase",fontWeight:p.TV.fontWeightMedium}],children:"Usage"}),(0,r.tZ)(Hv.R,{css:[p.l0.backgroundColor.backgroundHigher]}),(0,r.tZ)(d.G,{css:[p.l0.mt(16)],children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[" ","nodejs"===D&&y?(0,r.tZ)(UT,{langKey:D}):null,(0,r.tZ)(OT,{langKey:D})]})})," "]}),(0,r.tZ)(d.G,{css:[p.l0.pr(8),p.l0.pl(8),p.l0.mt(24),p.l0.mb(8)],children:(0,r.tZ)(J.zx,{onClick:Y,text:"Disable Auth",colorway:"negative",variant:"outlined"})})]}):(0,r.BX)(d.G,{css:[p.l0.pr(8),p.l0.pl(8)],children:[(0,r.tZ)(J.zx,{colorway:"primary",onClick:N,text:"Enable Login Page",iconLeft:(0,r.tZ)(zT.Z,{})}),(0,r.BX)(ne.xv,{css:[p.l0.textAlign.center,p.l0.mt(8),p.l0.fontSize(12),p.l0.color],children:["Automatically redirect users to a prebuilt login page"," ",(0,r.tZ)("span",{onClick:V,css:[p.l0.color.blueStronger,p.l0.cursor.pointer],onKeyDown:V,role:"button",tabIndex:0,children:"or use your own custom button."})]})]}):(0,r.BX)(d.G,{css:[p.l0.textAlign.center],children:[(0,r.tZ)(Xn.E,{colorway:"warning",text:"Please start your web app to use Log in with Replit"}),(0,r.tZ)(ne.xv,{css:[p.l0.mt(4)],children:(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/deploying-http-servers",target:"_blank",rel:"noopener",children:"Learn how to start a web app"})})]}):(0,r.BX)(d.G,{css:[p.l0.textAlign.center],children:[(0,r.tZ)(Xn.E,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,r.tZ)(ne.xv,{css:[p.l0.mt(4)],children:(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/configuring-repl#replit",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,r.tZ)(d.G,{css:[p.l0.align.center],children:(0,r.tZ)(jT,{})})};return(0,r.BX)(d.G,{css:[p.l0.colWithGap(16),p.l0.backgroundColor.backgroundDefault,p.l0.p(8),p.l0.borderRadius(0,4,4,0)],children:[(0,r.tZ)(ne.h4,{level:2,variant:"subheadBig",children:"Log in with Replit"}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(16),{overflowY:"auto",width:"100%",flex:"1"}],children:[(0,r.tZ)(K,{}),(0,r.tZ)($,{})]})]})}var jT=function(){return(0,r.BX)(d.G,{css:[p.l0.colWithGap(16)],children:[(0,r.BX)(ne.xv,{children:[(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/repl-auth-sidebar",target:"_blank",rel:"noopener",css:[p.l0.color.accentPrimaryStronger,p.l0.pr(4)],children:"Replit Authentication"}),"is the fastest and easiest way to set up authentication in your Repl. Try it out by logging in or signing up."]}),(0,r.tZ)(ts.Z,{href:"/auth",as:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,r.tZ)($.Z,{})})]})},WT=Ou.Type.Object({type:Ou.Type.Literal("replAuth")}),NT={Content:function(){return(0,r.tZ)(d.G,{css:[p.l0.height("100%"),p.l0.overflowY("auto"),qn.F3],children:(0,r.tZ)(MT,{})})},Icon:function(e){var n=e.size;return(0,r.tZ)(zT.Z,{size:n})},getTitle:function(){return"Authentication"},decode:function(e){return Fu.B4.Decode(WT,e)}},FT=t(89809),VT=t(64127),HT=t(48034),YT=t(67813);function qT(){var e=(0,g.Z)(["\n  query Threads2Inbox {\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n"]);return qT=function(){return e},e}var KT={},$T=(0,Z.Ps)(qT());var QT=t(71887),JT=function(){return(0,r.BX)("svg",{width:"100%",height:"100%",viewBox:"0 0 691 691",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.BX)("g",{clipPath:"url(#clip0_954_4340)",children:[(0,r.tZ)("path",{d:"M636.55 403.04H44.91C26.7564 403.04 12.04 417.756 12.04 435.91V643.79C12.04 661.944 26.7564 676.66 44.91 676.66H636.55C654.704 676.66 669.42 661.944 669.42 643.79V435.91C669.42 417.756 654.704 403.04 636.55 403.04Z",fill:"url(#paint0_linear_954_4340)"}),(0,r.tZ)("path",{opacity:"0.71",d:"M526.02 663.9L545.86 602.08C559.46 568.34 534.62 531.54 498.24 531.54H186.98C149.55 531.54 124.7 570.3 140.32 604.31L159.12 663.89H526.02V663.9Z",fill:"url(#paint1_linear_954_4340)"}),(0,r.tZ)("path",{d:"M217.38 314.61C290.392 314.61 349.58 255.422 349.58 182.41C349.58 109.398 290.392 50.21 217.38 50.21C144.368 50.21 85.1802 109.398 85.1802 182.41C85.1802 255.422 144.368 314.61 217.38 314.61Z",fill:"url(#paint2_linear_954_4340)"}),(0,r.tZ)("path",{d:"M120.75 510.55C123.39 538.19 143.97 556.13 170.18 561.75C176.42 563.19 182.79 563.92 189.17 564.39L195.57 564.67C178.54 565.03 160.79 562.34 146.09 553.2C131.43 544.2 121.34 527.81 120.75 510.55Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M225.69 564.67C308.15 564.06 400.65 564.05 483.1 564.67C400.64 565.29 308.14 565.28 225.69 564.67Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M531.57 560.9C546.58 551.84 559.07 537.22 562.44 519.7C563.59 513.9 563.68 507.95 563.1 502.07C564.1 507.91 564.19 513.95 563.19 519.84C560.19 537.61 547.3 552.72 531.57 560.9Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M571.57 554.78C560.27 579.78 532.93 594.05 506.36 595.88C502.53 596.17 498.69 596.24 494.86 596.19C502.52 595.98 510.16 595.18 517.62 593.54C539.86 588.88 561.06 575.34 571.57 554.78Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M448.75 600.43C417.61 601.09 382.98 601.08 351.81 600.43C382.98 599.78 417.6 599.77 448.75 600.43Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M125.93 579.25C113.2 574.83 101.21 564.64 98.6401 550.91C99.2401 552.44 99.6901 554.2 100.47 555.66C105.36 566.51 115.41 574.21 125.94 579.25H125.93Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M122.63 550.92C108.27 541.02 104.78 521.86 109.84 505.93C110.54 503.67 111.36 501.44 112.27 499.26C111.63 501.28 110.78 504.03 110.31 506.06C106.06 522.06 109.3 540.13 122.62 550.92H122.63Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M122.63 485.44C124.51 481.11 128.99 478.25 133.45 477.14C129.54 479.57 125.68 481.91 122.63 485.44Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M576.75 531.49C580.41 516.24 580.52 498.93 571.57 485.44C572.81 487 573.96 488.66 574.93 490.42C581.64 502.91 581.19 518.32 576.74 531.49H576.75Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M579.54 579.25C588.53 567.19 594.92 552.91 596.84 537.95C597.2 535.85 597.23 533.61 597.45 531.49C597.99 548.88 590.98 566.28 579.54 579.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M543.81 611.25C558.06 608.69 572.57 604.12 583.9 594.81C585.59 593.57 586.95 591.97 588.5 590.55C577.81 603.74 560.26 609.73 543.81 611.26V611.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M85.9304 495.96C90.9804 479.18 105.88 466.78 121.97 460.96L125.73 459.62C127.97 458.93 131.16 458.23 133.45 457.63C130.93 458.48 128.38 459.19 125.88 460.08C108.67 466.24 92.5304 478.4 85.9204 495.95L85.9304 495.96Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M547.63 445.61C564.65 447.41 582.07 454.4 593.27 467.75C594.84 469.66 596.22 471.72 597.46 473.85C586.24 457.4 566.67 449.06 547.63 445.61Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M620.51 510.55C624.76 522.88 625.03 536.26 623.91 549.15C622.85 558.77 620.66 568.49 617.6 577.67C616.52 580.73 615.33 583.76 614.16 586.78C615.59 582.33 617.26 577.4 618.43 572.84C623.74 552.84 625.91 530.74 620.51 510.54V510.55Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M563.68 629.84C552.03 637.13 538.71 642.29 524.93 643.51C509.26 644.08 485.5 643.54 469.79 643.5L456.01 643.25L469.79 643C485.45 642.69 509.25 642.98 524.86 642.6C538.55 641.45 551.78 636.6 563.68 629.83V629.84Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M324.24 653.84C278.39 654.5 227.42 654.49 181.53 653.84C227.42 653.19 278.38 653.18 324.24 653.84Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M240.04 611.25C231.6 611.93 223.06 611.93 214.63 611.25C223.07 610.57 231.61 610.57 240.04 611.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M125.93 619.96C101.27 616.41 77.6502 599.76 69.9302 575.49C71.1602 578.36 72.3902 581.22 73.9702 583.91C84.5302 603.14 104.8 615.53 125.93 619.96Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M130.16 565.09C144.25 571.77 159.29 576.91 174.84 578.69C177.05 579.04 179.29 579.04 181.53 579.26C163.55 579.7 145.67 573.97 130.16 565.09Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M200.28 579.25C206.55 578.57 212.83 578.56 219.1 579.25C212.83 579.94 206.55 579.93 200.28 579.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M304.75 579.25C349.87 578.59 400.02 578.6 445.17 579.25C400.01 579.9 349.88 579.91 304.75 579.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M545.86 480.38C559.46 514.12 534.62 550.92 498.24 550.92H186.98C149.55 550.92 124.7 512.16 140.32 478.15L182.03 345.94L182.32 346C177.45 369.9 195.61 393.77 221.52 393.77H463.7C488.78 393.77 506.81 371.3 503.23 347.91L503.33 347.89L545.86 480.38Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M503.23 347.91C506.81 371.3 488.78 393.77 463.7 393.77H221.52C195.61 393.77 177.45 369.9 182.32 346C182.91 343.04 183.87 340.07 185.21 337.15L218.53 264.59L222.63 255.66L225 250.51C231.51 236.33 245.69 227.23 261.3 227.23H418.49C418.49 227.23 438.63 226.14 449.92 233.29C456.92 237.72 462.6 244.22 465.83 252.25L500.75 338.89C501.95 341.88 502.77 344.9 503.23 347.91ZM336.66 258.5L338.12 253.56C336.37 252.69 333.03 251.74 329.25 251.74C317.76 251.74 310.35 259.59 310.35 270.42C310.35 281.25 317.25 288.38 327.87 288.38C332.59 288.38 336.3 287.22 337.97 286.34L336.88 281.55C335.06 282.35 332.66 283.29 329.03 283.29C322.05 283.29 316.82 278.28 316.82 270.13C316.82 262.79 321.18 256.83 329.25 256.83C332.74 256.83 335.14 257.63 336.66 258.5ZM301.84 258.5L303.44 253.85C301.48 252.69 298.35 251.67 294.79 251.67C287.23 251.67 282.65 256.32 282.65 261.99C282.65 266.21 285.63 269.7 291.96 271.95C296.68 273.7 298.5 275.37 298.5 278.42C298.5 281.47 296.32 283.66 291.67 283.66C288.47 283.66 285.12 282.35 283.23 281.11L281.63 285.98C284.11 287.44 287.67 288.38 291.52 288.38C299.88 288.38 304.68 284.02 304.68 277.84C304.68 272.61 301.55 269.55 295.45 267.23C290.87 265.48 288.76 264.17 288.76 261.27C288.76 258.65 290.87 256.47 294.65 256.47C297.92 256.47 300.46 257.63 301.84 258.5ZM275.97 271.22C276.04 270.57 276.18 269.55 276.18 268.24C276.18 261.77 273.13 251.67 261.65 251.67C251.4 251.67 245.14 260.03 245.14 270.64C245.14 281.25 251.61 288.38 262.45 288.38C268.04 288.38 271.89 287.22 274.15 286.2L273.06 281.62C270.66 282.64 267.9 283.44 263.32 283.44C256.92 283.44 251.4 279.87 251.25 271.22H275.97Z",fill:"#E5CF98"}),(0,r.tZ)("path",{d:"M338.12 253.56L336.66 258.5C335.14 257.63 332.74 256.83 329.25 256.83C321.18 256.83 316.82 262.79 316.82 270.13C316.82 278.28 322.05 283.29 329.03 283.29C332.66 283.29 335.06 282.35 336.88 281.55L337.97 286.34C336.3 287.22 332.59 288.38 327.87 288.38C317.25 288.38 310.35 281.18 310.35 270.42C310.35 259.66 317.76 251.74 329.25 251.74C333.03 251.74 336.37 252.69 338.12 253.56Z",fill:"#1B2332"}),(0,r.tZ)("path",{d:"M303.44 253.85L301.84 258.5C300.46 257.63 297.92 256.47 294.65 256.47C290.87 256.47 288.76 258.65 288.76 261.27C288.76 264.17 290.87 265.48 295.45 267.23C301.55 269.55 304.68 272.61 304.68 277.84C304.68 284.02 299.88 288.38 291.52 288.38C287.67 288.38 284.11 287.44 281.63 285.98L283.23 281.11C285.12 282.35 288.47 283.66 291.67 283.66C296.32 283.66 298.5 281.33 298.5 278.42C298.5 275.51 296.68 273.7 291.96 271.95C285.63 269.7 282.65 266.21 282.65 261.99C282.65 256.32 287.23 251.67 294.79 251.67C298.35 251.67 301.48 252.69 303.44 253.85Z",fill:"#1B2332"}),(0,r.tZ)("path",{d:"M276.18 268.24C276.18 269.55 276.04 270.57 275.97 271.22H251.25C251.4 279.87 256.92 283.44 263.32 283.44C267.9 283.44 270.66 282.64 273.06 281.62L274.15 286.2C271.89 287.22 268.04 288.38 262.45 288.38C251.61 288.38 245.14 281.26 245.14 270.64C245.14 260.02 251.4 251.67 261.65 251.67C273.13 251.67 276.18 261.77 276.18 268.24ZM270 266.65C270.08 262.57 268.33 256.25 261.14 256.25C254.67 256.25 251.83 262.21 251.32 266.65H270Z",fill:"#1B2332"}),(0,r.tZ)("path",{d:"M261.14 256.25C268.33 256.25 270.08 262.57 270 266.65H251.32C251.83 262.21 254.67 256.25 261.14 256.25Z",fill:"#E5CF98"}),(0,r.tZ)("path",{d:"M182.32 346C182.91 343.04 183.87 340.07 185.21 337.15L218.53 264.59L222.63 255.66L225 250.51C231.51 236.33 245.69 227.23 261.3 227.23H418.49C418.49 227.23 438.63 226.14 449.92 233.29C456.92 237.72 462.6 244.22 465.83 252.25L500.75 338.89C501.95 341.88 502.77 344.9 503.23 347.91C506.81 371.3 488.78 393.77 463.7 393.77H221.52C195.61 393.77 177.45 369.9 182.32 346Z",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M503.33 347.89L545.86 480.38C559.46 514.12 534.62 550.92 498.24 550.92H186.98C149.55 550.92 124.7 512.16 140.32 478.15L182.03 345.94",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M532.22 117.06C568.71 135.84 566.03 170.99 566.03 170.99C566.03 170.99 520.16 155.31 503.35 152.12C502.3 151.93 501.36 151.78 500.56 151.68L491.44 151L491.14 151.08C489.53 145.31 484.24 141.08 477.96 141.08C477.57 141.08 477.18 141.09 476.8 141.13C476.71 141.03 476.61 140.93 476.51 140.84L469.81 134.72C469.37 134.31 468.87 134 468.34 133.78H468.23C468.03 131.83 467.45 129.99 466.55 128.33L466.79 128.2C467.59 126.89 471.05 121.89 471.05 121.89C471.05 121.89 474.48 118.6 480.68 115.46C491.1 110.18 509.34 105.28 532.22 117.06Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M516.66 20.2C516.66 20.2 516.77 36.8799 514.97 53.32L500.7 58.3699L513.33 64.8C512.46 69.56 511.35 73.9199 509.95 77.3499C505.71 87.7999 491.29 104.17 480.64 115.38L480.68 115.46C474.48 118.6 471.05 121.89 471.05 121.89C471.05 121.89 467.59 126.89 466.79 128.2L466.55 128.33C464.1 123.82 459.31 120.75 453.81 120.75C452.89 120.75 452 120.83 451.13 121L451.09 120.75C451.09 120.75 449.58 90.2299 458.71 68.5C467.83 46.77 516.66 20.2 516.66 20.2Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M503.35 152.12L503.31 152.35C503.31 152.35 511.56 177.9 499.49 209.9C486.01 203.46 471.92 180.52 471.32 167.44L471.62 166.88C473.51 167.88 475.67 168.44 477.96 168.44C485.51 168.44 491.64 162.32 491.64 154.76C491.64 153.48 491.47 152.25 491.14 151.08L491.44 151L500.56 151.68C501.36 151.78 502.3 151.93 503.35 152.12Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M491.14 151.08C491.47 152.25 491.64 153.48 491.64 154.76C491.64 162.32 485.51 168.44 477.96 168.44C475.67 168.44 473.51 167.88 471.62 166.88C469.84 165.96 468.28 164.64 467.07 163.05L466.89 162.92C467.01 162.78 467.12 162.64 467.22 162.49L477.3 147.3C478.58 145.36 478.36 142.81 476.8 141.13C477.18 141.09 477.57 141.08 477.96 141.08C484.24 141.08 489.53 145.31 491.14 151.08Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M476.8 141.13C478.36 142.81 478.58 145.36 477.3 147.3L467.22 162.49C467.12 162.64 467.01 162.78 466.89 162.92C465.75 164.3 464.01 164.9 462.33 164.65C460.29 164.68 458.04 162.21 458.04 162.21L456.02 161C450.39 158.08 447.1 151.11 447.1 151.11C446.74 150.11 446.71 149.04 446.99 148.03C449.03 149.12 451.35 149.73 453.81 149.73C461.81 149.73 468.3 143.24 468.3 135.24C468.3 134.75 468.28 134.27 468.23 133.79H468.34C468.87 134 469.37 134.31 469.81 134.72L476.51 140.84C476.61 140.93 476.71 141.03 476.8 141.13Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M468.23 133.79C468.28 134.27 468.3 134.75 468.3 135.24C468.3 143.24 461.81 149.73 453.81 149.73C451.35 149.73 449.03 149.12 446.99 148.03C442.43 145.59 439.32 140.78 439.32 135.24C439.32 128.47 443.96 122.78 450.24 121.2C450.53 121.12 450.83 121.05 451.13 121C452 120.83 452.89 120.75 453.81 120.75C459.31 120.75 464.1 123.82 466.55 128.33C467.45 129.99 468.03 131.83 468.23 133.79Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M458.04 162.21C458.04 162.21 460.29 164.68 462.33 164.65C462.23 165.05 462.1 165.44 461.91 165.81L452.32 185.18C451.48 186.87 449.96 187.95 448.27 188.32C445.25 188.58 442.24 186.45 442.24 186.45L439.82 185.55C435.9 184.24 428.23 176.44 428.23 176.44C425.77 174.18 425.62 170.26 428.09 167.85L437.54 158.68L443.68 152.72C444.64 151.79 445.85 151.26 447.1 151.11C447.1 151.11 450.39 158.08 456.02 161L458.04 162.21Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M447.55 120.06C448.48 120.4 449.37 120.76 450.22 121.13L450.24 121.2C443.96 122.78 439.32 128.47 439.32 135.24C439.32 140.78 442.43 145.59 446.99 148.03C446.71 149.04 446.74 150.11 447.1 151.11C445.85 151.26 444.64 151.79 443.68 152.72L437.54 158.68L437.38 158.52C423.69 160.13 367.64 177.97 367.64 177.97C367.64 177.97 364.96 142.82 401.45 124.04C405 122.22 408.44 120.79 411.75 119.7C426.47 114.88 438.74 116.77 447.55 120.06Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M448.27 188.32C448.39 189.38 448.3 190.48 447.9 191.54L439.06 215.11C438.07 217.74 435.69 219.37 433.12 219.57C431.54 219.48 428.86 218.55 428.86 218.55L426.74 217.54C421.31 216.84 410.15 207.9 410.15 207.9C406.97 205.58 406.34 200.98 408.94 197.88L425.23 178.51C426.05 177.53 427.1 176.84 428.23 176.44C428.23 176.44 435.9 184.24 439.82 185.55L442.24 186.45C442.24 186.45 445.25 188.58 448.27 188.32Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M377.41 34.96C431.47 55.96 446.9 117.38 447.55 120.06C438.74 116.77 426.47 114.88 411.75 119.7L411.69 119.51C378.14 87.88 377.41 34.96 377.41 34.96Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M379.56 289.59C376.08 287.46 374.5 282.98 376.25 279L388.72 250.7C389.72 248.43 391.63 246.8 393.87 246.08C389.59 244.14 387.99 238.83 390.57 234.84L405.98 211.06C406.99 209.51 408.48 208.42 410.15 207.9C410.15 207.9 421.31 216.84 426.74 217.54L428.86 218.55C428.86 218.55 431.54 219.48 433.12 219.57C433.24 220.49 433.21 221.45 432.98 222.4L426.42 249.82C425.62 253.19 422.75 255.44 419.56 255.72C419.74 256.52 419.84 257.36 419.77 258.22L417.48 288.9C417.2 292.65 414.53 295.56 411.16 296.43L414.65 318.75V318.94C401.28 318.01 391.44 322.04 391.44 322.04C383.19 317.7 374.4 318.07 366.89 320.06L366.78 319.63L378.59 292.2C378.77 291.26 379.1 290.39 379.56 289.59Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M414.65 318.75L411.16 296.43C414.53 295.56 417.2 292.65 417.48 288.9L419.77 258.22C419.84 257.36 419.74 256.52 419.56 255.72C422.75 255.44 425.62 253.19 426.42 249.82L432.98 222.4C433.21 221.45 433.24 220.49 433.12 219.57C435.69 219.37 438.07 217.74 439.06 215.11L447.9 191.54C448.3 190.48 448.39 189.38 448.27 188.32C449.96 187.95 451.48 186.87 452.32 185.18L461.91 165.81C462.1 165.44 462.23 165.05 462.33 164.65C464.01 164.9 465.75 164.3 466.89 162.92C467.01 162.78 467.12 162.64 467.22 162.49L477.3 147.3C478.58 145.36 478.36 142.81 476.8 141.13C476.71 141.03 476.61 140.93 476.51 140.84L469.81 134.72C469.37 134.31 468.87 134 468.34 133.78",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M446.99 148.03C446.71 149.04 446.74 150.11 447.1 151.11C445.85 151.26 444.64 151.79 443.68 152.72L437.54 158.68L428.09 167.85C425.62 170.26 425.77 174.18 428.23 176.44C427.1 176.84 426.05 177.53 425.23 178.51L408.94 197.88C406.34 200.98 406.97 205.58 410.15 207.9C408.48 208.42 406.99 209.51 405.98 211.06L390.57 234.84C387.99 238.83 389.59 244.14 393.87 246.08C391.63 246.8 389.72 248.43 388.72 250.7L376.25 279C374.5 282.98 376.08 287.46 379.56 289.59C379.1 290.39 378.77 291.26 378.59 292.2L366.78 319.63",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M393.18 245.42C393.18 245.42 402.04 251.33 409.43 252.81",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M410.15 207.9C410.15 207.9 421.31 216.84 426.74 217.54",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M428.23 176.44C428.23 176.44 435.9 184.24 439.82 185.55",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M447.1 151.11C447.1 151.11 450.39 158.08 456.02 161",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M379.56 289.59C379.56 289.59 386.2 296.23 400.68 295.62",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M413.06 254.27C413.06 254.27 416.7 255.46 419.56 255.72",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M428.86 218.55C428.86 218.55 431.54 219.48 433.12 219.57",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M442.24 186.45C442.24 186.45 445.25 188.58 448.27 188.32",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M458.04 162.21C458.04 162.21 460.29 164.68 462.33 164.65",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M404.99 295.66C405.48 295.66 408.99 297.7 411.16 296.43",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M468.23 133.79C468.28 134.27 468.3 134.75 468.3 135.24C468.3 143.24 461.81 149.73 453.81 149.73C451.35 149.73 449.03 149.12 446.99 148.03C442.43 145.59 439.32 140.78 439.32 135.24C439.32 128.47 443.96 122.78 450.24 121.2C450.53 121.12 450.83 121.05 451.13 121C452 120.83 452.89 120.75 453.81 120.75C459.31 120.75 464.1 123.82 466.55 128.33C467.45 129.99 468.03 131.83 468.23 133.79V133.79Z",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M476.54 141.15C476.63 141.14 476.71 141.13 476.8 141.13C477.18 141.09 477.57 141.08 477.96 141.08C484.24 141.08 489.53 145.31 491.14 151.08C491.47 152.25 491.64 153.48 491.64 154.76C491.64 162.32 485.51 168.44 477.96 168.44C475.67 168.44 473.51 167.88 471.62 166.88C469.84 165.96 468.28 164.64 467.07 163.05",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M451.09 120.75C451.09 120.75 449.58 90.2299 458.71 68.5C467.83 46.77 516.66 20.2 516.66 20.2C516.66 20.2 516.77 36.8799 514.97 53.32L500.7 58.3699L513.33 64.8C512.46 69.56 511.35 73.9199 509.95 77.3499C505.71 87.7999 491.29 104.17 480.64 115.38",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M466.79 128.2C467.59 126.89 471.05 121.89 471.05 121.89C471.05 121.89 474.48 118.6 480.68 115.46C491.1 110.18 509.34 105.28 532.22 117.06C568.71 135.84 566.03 170.99 566.03 170.99C566.03 170.99 520.16 155.31 503.35 152.12C502.3 151.93 501.36 151.78 500.56 151.68L491.44 151",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M450.22 121.13C449.37 120.76 448.48 120.4 447.55 120.06C438.74 116.77 426.47 114.88 411.75 119.7C408.44 120.79 405 122.22 401.45 124.04C364.96 142.82 367.64 177.97 367.64 177.97C367.64 177.97 423.69 160.13 437.38 158.52",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M447.57 120.15C447.57 120.15 447.56 120.12 447.55 120.06C446.9 117.38 431.47 55.96 377.41 34.96C377.41 34.96 378.14 87.88 411.69 119.51",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M503.31 152.35C503.31 152.35 511.56 177.9 499.49 209.9C486.01 203.46 471.92 180.52 471.32 167.44",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M347.6 329.26C347.6 329.26 355.89 322.95 366.89 320.06C374.4 318.07 383.19 317.7 391.44 322.04C391.44 322.04 401.28 318.01 414.64 318.94C423.84 319.58 434.7 322.58 445.17 330.86",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M414.16 207.9C414.16 207.9 410.04 203.49 411.16 200.9C411.98 199 420.75 189.21 425.39 184.1C425.97 183.46 427 184.11 426.68 184.91L419.47 203.21C418.8 204.92 418.64 206.79 419.03 208.58L419.6 211.24L414.16 207.88V207.9Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M433.66 175.75C433.61 175.71 433.56 175.67 433.52 175.63C433.06 175.09 430.27 171.7 431.24 169.74C432.01 168.19 439.85 160.38 444.05 156.26C444.59 155.73 445.47 156.33 445.16 157L438.42 171.79C437.73 173.31 437.51 175 437.8 176.65L437.89 177.16C437.99 177.74 437.33 178.15 436.83 177.82L433.67 175.74L433.66 175.75Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M396.92 244.43C396.85 244.38 396.79 244.32 396.74 244.24C396.14 243.42 392.45 238.19 393.57 235.02C394.45 232.5 403.89 219.55 408.94 212.71C409.58 211.84 410.73 212.72 410.38 213.82L402.69 237.82C401.9 240.29 401.72 243 402.17 245.6L402.31 246.41C402.47 247.32 401.66 248.02 401.01 247.53L396.93 244.43H396.92Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M383.51 287.24C383.44 287.18 383.38 287.1 383.33 287.01C382.73 286.03 379.04 279.8 380.16 276.01C381.04 273.01 390.48 257.56 395.53 249.4C396.17 248.36 397.32 249.42 396.97 250.72L389.28 279.34C388.49 282.29 388.31 285.52 388.76 288.61L388.9 289.57C389.06 290.66 388.25 291.5 387.6 290.91L383.52 287.22L383.51 287.24Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M371.16 171.08C371.45 170.56 378.51 139.82 405.63 126.99C393.15 143.74 385.12 165.49 385.12 165.49L371.16 171.08Z",fill:"#51FF53"}),(0,r.tZ)("path",{d:"M410.97 113.84C410.97 113.84 389.61 99.02 379.94 39.72C397.81 75.72 404.21 98.85 422.51 113.84C417.92 113.84 409.31 112.43 410.97 113.84Z",fill:"#51FF53"}),(0,r.tZ)("path",{d:"M456.02 113.84C456.02 113.84 456.71 81.3099 466.79 66.9199C476.87 52.5299 507.71 29.5699 507.71 29.5699C507.71 29.5699 474.47 57.3299 468.3 89.1899C464.53 114.55 463.85 120.75 463.85 120.75L456.03 113.84H456.02Z",fill:"#51FF53"}),(0,r.tZ)("path",{d:"M449.34 124.58C447.22 130.96 444.74 136.08 450.22 145.43C445.46 141.72 438.14 133.78 449.34 124.58Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M471.31 126.55C471.31 126.55 485.49 111.02 506.06 113.84C492.04 118.78 474.04 133.78 474.04 133.78L471.31 126.55Z",fill:"#51FF53"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("linearGradient",{id:"paint0_linear_954_4340",x1:"340.73",y1:"676.66",x2:"340.73",y2:"403.04",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{offset:"0.3",stopColor:"#1B2332",stopOpacity:"0"}),(0,r.tZ)("stop",{offset:"0.37",stopColor:"#1C2437",stopOpacity:"0.03"}),(0,r.tZ)("stop",{offset:"0.45",stopColor:"#202845",stopOpacity:"0.1"}),(0,r.tZ)("stop",{offset:"0.56",stopColor:"#262F5E",stopOpacity:"0.22"}),(0,r.tZ)("stop",{offset:"0.67",stopColor:"#2E397F",stopOpacity:"0.38"}),(0,r.tZ)("stop",{offset:"0.8",stopColor:"#3946AB",stopOpacity:"0.59"}),(0,r.tZ)("stop",{offset:"0.93",stopColor:"#4655DE",stopOpacity:"0.84"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#4F5FFF"})]}),(0,r.BX)("linearGradient",{id:"paint1_linear_954_4340",x1:"342.61",y1:"663.9",x2:"342.61",y2:"531.55",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1B2332",stopOpacity:"0"}),(0,r.tZ)("stop",{offset:"0.15",stopColor:"#2F333A",stopOpacity:"0.12"}),(0,r.tZ)("stop",{offset:"0.47",stopColor:"#635D4F",stopOpacity:"0.43"}),(0,r.tZ)("stop",{offset:"0.93",stopColor:"#B6A070",stopOpacity:"0.92"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#C4AB76"})]}),(0,r.BX)("linearGradient",{id:"paint2_linear_954_4340",x1:"217.38",y1:"314.6",x2:"217.38",y2:"50.21",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1B2332",stopOpacity:"0"}),(0,r.tZ)("stop",{offset:"0.19",stopColor:"#4B4A35",stopOpacity:"0.22"}),(0,r.tZ)("stop",{offset:"0.48",stopColor:"#92843B",stopOpacity:"0.55"}),(0,r.tZ)("stop",{offset:"0.73",stopColor:"#C7AE3F",stopOpacity:"0.79"}),(0,r.tZ)("stop",{offset:"0.91",stopColor:"#E7C942",stopOpacity:"0.94"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#F4D343"})]}),(0,r.tZ)("clipPath",{id:"clip0_954_4340",children:(0,r.tZ)("rect",{width:"690.9",height:"690.9",fill:"white"})})]})]})},eE=t(41829),nE=t(76177),tE=t(88144),rE=t(20369),iE={title:"Threads",filters:{inbox:{key:"toggle-inbox",label:"Inbox",icon:(0,r.tZ)(nE.Z,{})},unread:{key:"toggle-unread",label:"Unread",icon:(0,r.tZ)(eE.Z,{})},participating:{key:"toggle-participating",label:"Participating",icon:(0,r.tZ)(rE.Z,{})},resolved:{key:"toggle-resolved",label:"Resolved",icon:(0,r.tZ)(Sn.Z,{})}},sorts:{chronological:{key:"toggle-chronological",label:"Chronological",icon:(0,r.tZ)(Kn.Z,{})},codeOrder:{key:"toggle-codeOrder",label:"Code order",icon:(0,r.tZ)(tE.Z,{})}},search:{placeholder:"Search threads\u2026"},markAsRead:"Mark as read",empty:{image:{alt:"an illustration of an escape key that resembles a sunny beach, with an umbrella and palm tree"},noThreadsCreated:{text:{primary:"You haven\u2019t started any threads yet.",secondary:function(e){return(0,r.BX)(r.HY,{children:["Select code and press"," ",(0,r.tZ)(ux.ZP,{shortcut:e,size:"small"})," ","to get started."]})}}},noThreadsFound:{text:{primary:"No threads found.",secondary:"Try adjusting your search or filters."}}}},oE=["TextMessageContentType","PreviewMessageContentType"];var aE=t(72010),lE=t(21371),cE=t(94784),sE=function(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,a=e.messages[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.user&&(n[l.user.id]=l.user)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return Object.values(n)};function uE(){var e=(0,g.Z)(["\n  query AnnotationThreadInput {\n    currentUser {\n      id\n    }\n  }\n"]);return uE=function(){return e},e}var dE={},pE=(0,Z.Ps)(uE());var fE=t(19701),hE=t(8576),vE=t(43995),mE=c.forwardRef((function(e,n){var t,i,o=e.annote,a=e.placeholder,s=e.onChangeMessage,u=e.onFinalizeMessage,d=function(){""!==h.trim()&&(u({messageId:w||yr()(),message:h.trim()}),k(null),v(""),setTimeout(T))},p=null===(t=function(e){var n=(0,m.Z)({},dE,e);return M.a(pE,n)}().data)||void 0===t||null===(i=t.currentUser)||void 0===i?void 0:i.id,f=(0,l.Z)(c.useState(""),2),h=f[0],v=f[1],g=(0,l.Z)(c.useState(!1),2),Z=g[0],b=g[1],y=c.useRef(null),x=(0,l.Z)(c.useState(null),2),w=x[0],k=x[1],C=(0,HT.Z)(),S=(0,hE.Z)(),I=S.ref,T=S.update,E=(0,l.Z)((0,fE.Z)({"@":function(){var e=(0,Hn.Z)((function(e){var n,t;return(0,Yn.__generator)(this,(function(i){return n=C.filter((function(e){return e.id!==p})),e&&(t=e.toLowerCase(),n=n.filter((function(e){return e.username.toLowerCase().startsWith(t)}))),[2,n.slice(0,5).map((function(e){return{icon:(0,r.tZ)(cE.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}}))]}))}));return function(n){return e.apply(this,arguments)}}()}),2),R=E[0].suggestions,G=E[1],P=(0,lE.Kb)({items:(null===R||void 0===R?void 0:R.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(null===R||void 0===R?void 0:R.results.length),onSelectedItemChange:function(e){var n=e.selectedItem;if(R&&n){var t=R.applySuggestion({targetValue:h,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;v(r),setTimeout((function(){y.current&&(y.current.setSelectionRange(i,i),y.current.focus(),T())}))}}}),D=P.isOpen,B=P.getInputProps,U=P.getMenuProps,A=P.getItemProps,L=P.highlightedIndex,O=P.getComboboxProps;c.useEffect((function(){var e="threads/drafts/".concat(o.id),n=gn.Z.get(e,"string");n&&v(n);var t=y.current;return function(){if(t){var n=t.value;0!==n.length?gn.Z.set(e,n):gn.Z.remove(e)}}}),[]),c.useEffect((function(){setTimeout((function(){y.current&&y.current.focus()}))}),[y]);var _=sE(o).filter((function(e){return e.id!==p})),X="Add a comment";return 1===_.length?X="Reply to @".concat(_[0].username):_.length>1&&(X="Reply"),o.isResolved&&(X="Reply to unresolve this thread"),a&&(X=a),(0,r.BX)("div",{className:"jsx-83fb19ea8f375c79",children:[(0,r.BX)("div",(0,oe.Z)((0,m.Z)({},O()),{className:"jsx-83fb19ea8f375c79 input-group",children:[(0,r.tZ)("textarea",(0,oe.Z)((0,m.Z)({},B({autoFocus:!0,placeholder:X,value:h,onCompositionStart:function(){return b(!0)},onCompositionEnd:function(){return b(!1)},onChange:function(e){var n=e.target.value,t=w||yr()();w||k(t),v(n),s({messageId:t,message:n})},onKeyDown:function(e){e.stopPropagation(),D||(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||Z||(e.preventDefault(),d()))},rows:1,ref:function(e){y.current=e,n&&"object"===typeof n&&(n.current=e),G(e),I(e)}})),{className:"jsx-83fb19ea8f375c79 "+(Tp()("inputbox",{hasContent:h.length>0})||"")})),(0,r.tZ)(ee.hU,{alt:"Send message",onClick:d,disabled:0===h.length,children:(0,r.tZ)(vE.Z,{})})]})),(0,r.tZ)("div",(0,oe.Z)((0,m.Z)({},U({})),{className:"jsx-83fb19ea8f375c79",children:D&&R?(0,r.tZ)("div",{className:"jsx-83fb19ea8f375c79 mention-suggestions-container",children:R.results.map((function(e,n){return(0,c.createElement)("div",(0,oe.Z)((0,m.Z)({},A({item:e,index:n})),{key:e.value,className:"jsx-83fb19ea8f375c79 "+(Tp()("mention-suggestion",{selected:L===n})||""),children:[e.icon,(0,r.tZ)("div",{className:"jsx-83fb19ea8f375c79",children:e.value})]}))}))}):null})),(0,r.tZ)(Fe(),{id:"83fb19ea8f375c79",children:'.input-group.jsx-83fb19ea8f375c79{display:grid;grid-template-columns:1fr -webkit-min-content;grid-template-columns:1fr min-content;grid-gap:10px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}.inputbox.jsx-83fb19ea8f375c79{background:var(--background-higher);color:var(--foreground-default);border:none;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);padding:var(--space-8);outline:none;resize:none;font-family:"IBM Plex Sans",sans-serif;font-size:var(--font-size-default);line-height:16px;overflow-y:auto;max-height:-webkit-calc(var(--font-size-default)*18);max-height:-moz-calc(var(--font-size-default)*18);max-height:calc(var(--font-size-default)*18)}.inputbox.jsx-83fb19ea8f375c79::-webkit-input-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79:-moz-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79::-moz-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79:-ms-input-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79::-ms-input-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79::placeholder{white-space:pre}.inputbox.hasContent.jsx-83fb19ea8f375c79{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.mention-suggestions-container.jsx-83fb19ea8f375c79{padding-top:1em;display:grid;grid-row-gap:var(--space-4);overflow:hidden}.mention-suggestion.jsx-83fb19ea8f375c79{display:grid;grid-template-columns:-webkit-min-content -webkit-max-content;grid-template-columns:min-content max-content;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-column-gap:var(--space-8);padding:var(--space-8)0;cursor:pointer;color:var(--foreground-default)}.mention-suggestion.selected.jsx-83fb19ea8f375c79{background-color:var(--background-root)}.mention-suggestion.selected.jsx-83fb19ea8f375c79>*.jsx-83fb19ea8f375c79{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}'})]})}));mE.displayName="ThreadInputForwarded";var gE=mE,ZE=t(52224);function bE(e){var n=e.message,t=e.messageStyle,i=c.useMemo((function(){return"TextMessageContentType"===n.content.__typename?(0,YT.kW)(n.content.text,{}):"PreviewMessageContentType"===n.content.__typename&&"string"===typeof n.content.preview?(0,YT.kW)(n.content.preview,{}):null}),[n.content]),o="PreviewMessageContentType"===n.content.__typename&&"string"!==typeof n.content.preview;return n.user&&(i||o)?(0,r.BX)("div",{className:"jsx-e1dab5bcce309da6 "+(t||""),children:[(0,r.BX)("div",{className:"jsx-e1dab5bcce309da6 message",children:[i?(0,r.tZ)(YT.YI,{message:i,codeStyles:{color:"var(--accent-orange-stronger)",background:"var(--background-highest)"}}):null,o?(0,r.BX)("span",{className:"jsx-e1dab5bcce309da6 typing-indicator",children:[(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,r.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"})]}):null]}),(0,r.tZ)(Fe(),{id:"e1dab5bcce309da6",children:".message.jsx-e1dab5bcce309da6{background:var(--background-higher);padding:var(--space-4)var(--space-8);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);font-size:var(--font-size-default);overflow-wrap:break-word;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;white-space:pre-wrap}.userhighlight.jsx-e1dab5bcce309da6 .message.jsx-e1dab5bcce309da6{background:transparent}.typing-indicator.jsx-e1dab5bcce309da6{min-height:1em;display:grid;grid-auto-flow:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8)}.dot.jsx-e1dab5bcce309da6{width:6px;height:6px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;display:inline-block;background-color:var(--foreground-dimmest);-webkit-animation:pulse.6s infinite;-moz-animation:pulse.6s infinite;-o-animation:pulse.6s infinite;animation:pulse.6s infinite}.dot.jsx-e1dab5bcce309da6:nth-child(1){-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.dot.jsx-e1dab5bcce309da6:nth-child(2){-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}.dot.jsx-e1dab5bcce309da6:nth-child(3){-webkit-animation-delay:.4s;-moz-animation-delay:.4s;-o-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@-moz-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@-o-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}"})]}):null}var yE=t(56412);function xE(e){var n=e.message,t=c.useMemo((function(){var e=n.timeCreated;return e?(0,yE.Z)(new Date(e),"do MMM, hh:mm a"):""}),[n]),i=n.user;return(0,r.tZ)("div",{className:"resolved-message",children:(0,r.BX)(Ue.Ug,{align:"center",spacing:1,children:[i?(0,r.tZ)(cE.Z,{url:i.image,size:"m"}):null,(0,r.tZ)(Sn.Z,{color:"var(--foreground-default)",size:24}),(0,r.BX)(Be.Z,{size:"xsmall",children:["Resolved ",t]})]})})}function wE(e){var n=e.message,t=c.useMemo((function(){var e=n.timeCreated;return e?(0,yE.Z)(new Date(e),"do MMM, hh:mm a"):""}),[n]),i=n.user;return(0,r.tZ)("div",{className:"resolved-message",children:(0,r.BX)(Ue.Ug,{align:"center",spacing:1,children:[i?(0,r.tZ)(cE.Z,{url:i.image,size:"m"}):null,(0,r.tZ)(Sn.Z,{size:24,color:"var(--foreground-dimmest)"}),(0,r.BX)(Be.Z,{size:"xsmall",children:["Unresolved ",t]})]})})}var kE=function(e){var n=new Date(e),t=new Date;return(0,ZE.Z)(t,n)<60?"now":(0,OZ.F)(n,!0)};function CE(e){var n=e.messageGroup,t=n.messages,i=n.user,o=n.timeCreated;return i?(0,r.BX)("div",{className:"jsx-3469fc8bae278840 message-group",children:[(0,r.BX)("div",{className:"jsx-3469fc8bae278840 message-info",children:[(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 avatar",children:(0,r.tZ)(cE.Z,{url:i.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 username",children:i.username}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 time",children:kE(o)})]}),(0,r.tZ)("div",{className:"jsx-3469fc8bae278840 messages",children:t.map((function(e){return(0,r.tZ)(bE,{message:e},e.id)}))}),(0,r.tZ)(Fe(),{id:"3469fc8bae278840",children:".message-group.jsx-3469fc8bae278840{background-color:var(--background-default);color:var(--foreground-default);display:grid;position:relative;grid-template-rows:auto auto;grid-row-gap:var(--space-8);grid-template-columns:minmax(0,1fr)}.message-info.jsx-3469fc8bae278840{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:var(--font-size-small)}.messages.jsx-3469fc8bae278840{display:grid;grid-row-gap:var(--space-4);grid-template-columns:minmax(0,1fr)}.avatar.jsx-3469fc8bae278840{margin-right:5px}.username.jsx-3469fc8bae278840{color:var(--foreground-dimmer);font-weight:var(--font-weight-medium);margin-right:3px}.time.jsx-3469fc8bae278840{color:var(--foreground-dimmest)}"})]}):null}function SE(e){var n=e.messageGroup;if("TextMessageContentType"===n.messageType||"PreviewMessageContentType"===n.messageType)return(0,r.tZ)(CE,{messageGroup:n});if("StatusMessageContentType"===n.messageType){var t=n.messages[0];if("StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status)return(0,r.tZ)(xE,{message:t});if("StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status)return(0,r.tZ)(wE,{message:t})}return null}function IE(e){var n=e.generalThreadsOpen,t=e.setGeneralThreadsOpen,i=e.generalThread,o=e.handleChangeMessage,a=void 0===o?function(){}:o,l=e.handleFinalizeMessage,s=void 0===l?function(){}:l,u=e.createAnnotationAnchorPlaceholder,d=void 0===u?function(){}:u,f=(0,Ie.Z)(),v=c.useMemo((function(){return i?function(e){var n=[],t=null,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,s,u,d,p=a.value;!t||(null===p||void 0===p||null===(c=p.user)||void 0===c?void 0:c.id)!==(null===t||void 0===t||null===(s=t.user)||void 0===s?void 0:s.id)||(null===p||void 0===p||null===(u=p.anchor)||void 0===u?void 0:u.id)!==(null===t||void 0===t?void 0:t.anchorId)||!oE.includes(t.messageType)||!oE.includes(p.content.__typename)||new Date(p.timeCreated).getTime()-new Date(t.timeCreated).getTime()>6e5?(t&&n.push(t),t={user:p.user,timeCreated:p.timeCreated,anchorId:null===p||void 0===p||null===(d=p.anchor)||void 0===d?void 0:d.id,messages:[p],messageType:p.content.__typename}):t.messages.push(p)}}catch(f){i=!0,o=f}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t&&n.push(t),n}((0,We.Z)(i.messages).sort((function(e,n){return new Date(e.timeCreated).getTime()-new Date(n.timeCreated).getTime()}))):[]}),[i]);c.useEffect((function(){i||d({annotationAnchor:{id:at()(),replId:f,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[i,f,d]),c.useEffect((function(){i||d({annotationAnchor:{id:at()(),replId:f,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[i,f,d]);var m=c.useRef(null);(0,aE.Z)(n&&i||null);return c.useEffect((function(){m.current&&(m.current.scrollTop=m.current.scrollHeight)}),[m,i]),i?(0,r.BX)("div",{onClick:function(){return t(!0)},className:"jsx-571d11d33063a57f "+(Tp()("general-thread")||""),children:[(0,r.tZ)("div",{css:p.l0.scrollbar.thin,className:"jsx-571d11d33063a57f message-group-container-container",children:(0,r.tZ)("div",{ref:m,className:"jsx-571d11d33063a57f message-group-container",children:v.map((function(e){return(0,r.tZ)(SE,{messageGroup:e},e.messages[0].id)}))})}),(0,r.tZ)("div",{className:"jsx-571d11d33063a57f thread-input-container",children:(0,r.tZ)(gE,{placeholder:"Send message",annote:i,onChangeMessage:function(e){a({anchor:i,message:e.message,messageId:e.messageId}),t(!0)},onFinalizeMessage:function(e){s({anchor:i,message:e.message,messageId:e.messageId}),t(!0),(0,h.j)(h.U3.MESSAGE_SENT,{replId:f,source:"chat",newThread:0===i.messages.length})}})}),(0,r.tZ)(Fe(),{id:"571d11d33063a57f",children:'.general-thread.jsx-571d11d33063a57f{padding-top:0,border-radius:var(--border-radius-8)var(--border-radius-8)0 0;background:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 0;-moz-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;grid-template-rows:-webkit-min-content 1fr -webkit-min-content;grid-template-rows:min-content 1fr min-content;grid-gap:var(--space-8);height:"100%"}.message-group-container-container.jsx-571d11d33063a57f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:0;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.message-group-container.jsx-571d11d33063a57f{padding:var(--space-12);display:grid;grid-row-gap:var(--space-16);overflow-y:auto}.thread-input-container.jsx-571d11d33063a57f{width:100%;border-top:1px solid var(--outline-dimmer);padding:var(--space-8)var(--space-12)}'})]}):null}var TE=t(28317),EE=t(54457),RE=t(94681),GE=t(30278),PE=t(14213),DE=t(56671),BE=t(56469),UE=function(e){var n=(0,BE.Z)(e,null,null).updateThread;return{handleToggleResolved:function(e){return n({changes:{isResolved:e}})}}};var AE,LE,OE=function(e){var n=e.thread,t=e.onClick,i=n.messages.filter((function(e){return!e.seen})).length,o=function(e){var n;return null===(n=(0,DE.Vy)(e.path?e:null))||void 0===n?void 0:n.snippet}(n),a=(0,BE.Z)(n.id,null,null).thread,l=(0,QT.kM)(),s=UE(n.id).handleToggleResolved,u="Jump to code",f="Resolve this thread",h="Re-open",v=function(e,n){var t=function(e){return 1===e?"reply":"replies"};return e<=1?"View ".concat(1===n?"unread":""," thread"):n?"View ".concat(n," unread ").concat(t(n)):"View ".concat(e-1," ").concat(t(e-1))},m=function(e,n){return"Opened ".concat(e," by ").concat(n)},g=n.messages[0],Z=c.useMemo((function(){return(null===g||void 0===g?void 0:g.timeCreated)?(0,PE.Y)(g.timeCreated):"some time ago"}),[g]);return n.user?(0,r.BX)(Q.Tg,{css:[te.gU.filled,p.l0.overflow("hidden"),l===n.id&&{borderColor:p.TV.accentPrimaryDefault}],onClick:function(){t(n)},children:[(0,r.BX)(Q.Tg,{elevated:!0,css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.flex.grow(1),p.l0.px(8),p.l0.py(8)],children:[(0,r.tZ)(d.G,{css:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(4)],children:(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",multiline:!1,children:m(Z,n.user.username)})}),(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(4)],children:[o&&n.path?(0,r.tZ)(ee.hU,{alt:u,onClick:function(){return t(n)},children:(0,r.tZ)(Mh.Z,{})}):null,n.isResolved?(0,r.tZ)(J.zx,{text:h,size:"small",colorway:"primary",onClick:function(){s(!1)}}):(0,r.tZ)(ee.hU,{alt:f,onClick:function(){s(!0)},children:(0,r.tZ)(Sn.Z,{})})]})]}),o&&n.path?(0,r.tZ)(EE.F,{elevation:"root",path:n.path,snippet:o,fontSize:12,maxHeight:"42px",minHeight:"42px",allowScroll:!1}):null,g?(0,r.tZ)(d.G,{css:[p.l0.p(8),p.l0.py(12)],children:(0,r.tZ)(RE.Z,{thread:a,message:g},g.id)}):null,n.messages.length>1&&(0,r.BX)(d.G,{css:[p.l0.pb(12),p.l0.px(8),p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(4),p.l0.color.foregroundDimmer],children:[(0,r.tZ)(d.G,{css:[p.l0.position.relative],children:(0,r.tZ)(GE.Z,{unreadDot:i>0})}),(0,r.tZ)(ne.xv,{variant:"small",multiline:!1,children:v(n.messages.length,i)})]})]}):null},_E=function(e){var n=e.path,t=e.threads,i=e.onThreadClick,o=t.some((function(e){return e.messages.some((function(e){return!e.seen}))}));return(0,r.tZ)(d.G,{css:[p.l0.pb(8)],children:(0,r.tZ)(TE.Q,{css:[p.TV.singleLine,p.l0.px(8)],headerContent:(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.flex.growAndShrink(1),p.l0.mr(8)],children:[(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(8),p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(fc.Z,{path:n,size:20}),(0,r.tZ)(ne.xv,{css:[p.l0.flex.shrink(1)],multiline:!1,children:n})]}),o?(0,r.tZ)("div",{css:[p.l0.flex.shrink(0),p.l0.width(8),p.l0.height(8),p.l0.backgroundColor.redStronger,p.l0.borderRadius("full")]}):null]}),children:(0,r.tZ)("div",{css:[p.l0.mt(8),p.l0.colWithGap(8)],children:t.map((function(e){return(0,r.tZ)(OE,{thread:e,onClick:i},e.id)}))})})})};function XE(e){var n=e.primary,t=e.secondary;return(0,r.tZ)(d.G,{css:[p.l0.align.center,p.l0.justify.center,p.l0.flex.grow(1)],children:(0,r.BX)(d.G,{css:[p.l0.align.center,p.l0.justify.center,p.l0.flex.grow(1)],children:[(0,r.tZ)(d.G,{css:[p.l0.maxWidth(140),p.l0.maxHeight(140),p.l0.position.relative,p.l0.align.center,p.l0.justify.center,{pointerEvents:"none"}],children:(0,r.tZ)(JT,{})}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",css:p.l0.mt(32),multiline:!1,children:n}),(0,r.tZ)("div",{css:[p.l0.color.foregroundDimmest],children:(0,r.tZ)(ne.xv,{variant:"text",css:p.l0.mt(8),multiline:!1,children:t})})]})})}!function(e){e.CHRONOLOGICAL="chronological",e.CODE_ORDER="codeOrder"}(AE||(AE={})),function(e){e.PARTICIPATING="participating",e.RESOLVED="resolved",e.UNREAD="unread",e.INBOX="inbox"}(LE||(LE={}));var zE=function(e){var n=e.isChatOnly,t=e.openFile,i=(0,Ie.Z)(),o=IZ(i,{onReceiveAnnotationUpdate:function(){}}),a=o.annotations,s=o.loading,u=o.generalThread,f=o.createAnnotationAnchorPlaceholder,h=o.createAnnotationMessage,v=o.updateThreadPreview,g=function(e){var n=(0,m.Z)({},KT,e);return M.a($T,n)}(),Z=g.data,b=g.loading,y=s||b,x=(0,l.Z)(c.useState(!1),2),w=x[0],k=x[1],C=(0,QT.a9)(),S=(0,l.Z)(c.useState(""),2),I=S[0],T=S[1],E=(0,l.Z)(c.useState("INBOX"),2),R=E[0],G=E[1],P=(0,l.Z)(c.useState("CHRONOLOGICAL"),2),D=P[0],B=P[1],U=c.useMemo((function(){var e,n=null===Z||void 0===Z||null===(e=Z.currentUser)||void 0===e?void 0:e.id,t=a.filter((function(e){if("INBOX"===R)return!e.isResolved;if("RESOLVED"===R)return e.isResolved;if("PARTICIPATING"===R)return!n||function(e,n){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===n||e.messages.some((function(e){var t=e.user;return(null===t||void 0===t?void 0:t.id)===n}))}(e,n);if("UNREAD"===R){var t=e.messages.some((function(e){return!e.seen}));return t}return!0}));return t}),[Z,a,R]),A=c.useMemo((function(){return U.filter((function(e){var n,t;return 0===I.length||null!==(t=null===(n=e.path)||void 0===n?void 0:n.toLowerCase().includes(I.toLowerCase()))&&void 0!==t&&t}))}),[I,U]),L=c.useMemo((function(){return(0,We.Z)(A).sort((function(e,n){if("CHRONOLOGICAL"===D){var t,r,i=new Date(null===(t=e.messages[0])||void 0===t?void 0:t.timeCreated),o=new Date(null===(r=n.messages[0])||void 0===r?void 0:r.timeCreated);return i&&o?i<o?1:-1:0}return"CODE_ORDER"===D?(0,En.IV)(e.path,n.path):0})).reduce((function(e,n){var t=n.path;return t&&"undefined"!==typeof t?(e[t]=e[t]||[],e[t].push(n),e):e}),{})}),[A,D]),O=c.useMemo((function(){var e=(0,m.Z)({},L),n=Object.values(e).map((function(e){return(0,We.Z)(e).sort((function(e,n){if("CHRONOLOGICAL"===D){var t,r,i=new Date(null===(t=e.messages[0])||void 0===t?void 0:t.timeCreated),o=new Date(null===(r=n.messages[0])||void 0===r?void 0:r.timeCreated);return i&&o?i<o?1:-1:0}var a,l,c,s;return"CODE_ORDER"===D?(null!==(l=null!==(a=e.indexStart)&&void 0!==a?a:e.indexEnd)&&void 0!==l?l:0)<(null!==(s=null!==(c=n.indexStart)&&void 0!==c?c:n.indexEnd)&&void 0!==s?s:0)?-1:1:0}))}));return n.reduce((function(e,n,t){return e[Object.keys(L)[t]]=n,e}),{})}),[L,D]),_=(0,HT.Z)().map((function(e){return e.username})),X=function(e){var n=(0,l.Z)((0,SZ.n)(),1)[0];return function(){n({variables:{replId:e}})}}(i),z=function(){var e=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){return e.path?(t(e.path),C(e.id),[2]):[2]}))}));return function(n){return e.apply(this,arguments)}}(),j=VT.Wo.StartThread.keyboardShortcut;return n?(0,r.tZ)(IE,{generalThreadsOpen:w,setGeneralThreadsOpen:k,generalThread:u,handleChangeMessage:function(e){var n=e.anchor,t=e.messageId;v({threadId:n.id,messageId:t})},handleFinalizeMessage:function(e){var n=e.anchor,t=e.message,r=e.messageId,i=(0,YT.kW)(t,{users:(0,We.Z)(_).concat(["everyone"])});h({anchor:n,annotationMessage:{id:r,text:t,mentions:i.mentions}})},createAnnotationAnchorPlaceholder:f}):(0,r.tZ)(Q.Tg,{className:"threads-inbox",css:[p.l0.height("100%"),p.l0.width("100%"),p.l0.overflow("hidden"),p.l0.position.relative],"aria-busy":y,children:y?(0,r.tZ)(d.G,{css:[p.l0.display.flex,p.l0.align.center,p.l0.justify.center,p.l0.height("100%")],children:(0,r.tZ)(se.Z,{size:24})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(d.G,{className:"threads-inbox-header",css:[p.l0.py(12),p.l0.px(8),p.l0.position.sticky,p.l0.top(0),p.l0.backgroundColor.backgroundDefault,{zIndex:10}],children:(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.align.center,p.l0.flex.wrap,{gap:8}],children:[(0,r.tZ)(Hp.II,{placeholder:iE.search.placeholder,value:I,onChange:function(e){return T(e.target.value)},css:[p.l0.flex.grow(1)]}),(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.maxWidth("100%"),{gap:8}],children:[(0,r.tZ)(d.G,{css:[p.l0.flex.shrink(1)],children:(0,r.tZ)(hZ.ZE,{cssProps:[p.l0.flex.shrink(1),{span:p.l0.flex.shrink(1)}],icon:iE.filters[LE[R]].icon,suffix:(0,r.tZ)(vs.Z,{}),label:iE.filters[LE[R]].label,onAction:function(e){switch(e){case"toggle-inbox":G("INBOX");break;case"toggle-unread":G("UNREAD");break;case"toggle-participating":G("PARTICIPATING");break;case"toggle-resolved":G("RESOLVED")}},children:Object.entries(iE.filters).map((function(e){var n=(0,l.Z)(e,2),t=(n[0],n[1]);return(0,r.tZ)(FT.ck,{"aria-label":t.label,children:(0,r.BX)(d.G,{css:p.l0.rowWithGap(8),children:[t.icon,(0,r.tZ)(ne.xv,{multiline:!1,children:t.label})]})},t.key)}))})}),(0,r.tZ)(d.G,{css:[p.l0.flex.shrink(1)],children:(0,r.tZ)(hZ.ZE,{cssProps:[p.l0.flex.shrink(1),{span:p.l0.flex.shrink(1)}],icon:iE.sorts[AE[D]].icon,suffix:(0,r.tZ)(vs.Z,{}),label:iE.sorts[AE[D]].label,onAction:function(e){switch(e){case iE.sorts.chronological.key:B("CHRONOLOGICAL");break;case iE.sorts.codeOrder.key:B("CODE_ORDER")}},children:Object.entries(iE.sorts).map((function(e){var n=(0,l.Z)(e,2),t=(n[0],n[1]);return(0,r.tZ)(FT.ck,{"aria-label":t.label,children:(0,r.BX)(d.G,{css:p.l0.rowWithGap(8),children:[t.icon,(0,r.tZ)(ne.xv,{multiline:!1,children:t.label})]})},t.key)}))})}),(0,r.tZ)(d.G,{css:[p.l0.flex.shrink(1)],children:(0,r.tZ)(J.zx,{iconLeft:(0,r.tZ)(Sn.Z,{}),text:iE.markAsRead,onClick:X,css:{span:p.l0.flex.shrink(1)}})})]})]})}),0===a.length?(0,r.tZ)(XE,{primary:iE.empty.noThreadsCreated.text.primary,secondary:iE.empty.noThreadsCreated.text.secondary(j)}):(0,r.tZ)(r.HY,{children:Object.keys(O).length>0?(0,r.tZ)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.overflowY("auto"),p.l0.scrollbar.thin],children:Object.keys(O).map((function(e,n){return(0,r.tZ)(_E,{path:e||"-",threads:Object.values(O)[n],onThreadClick:function(e){var n=window.getSelection();"Range"!==(null===n||void 0===n?void 0:n.type)&&z(e)}},e)}))}):(0,r.tZ)(XE,{primary:iE.empty.noThreadsFound.text.primary,secondary:iE.empty.noThreadsFound.text.secondary})})]})})},ME=Ou.Type.Object({type:Ou.Type.Literal("threadInbox")}),jE={Content:function(e){var n=e.options;return(0,r.tZ)(zE,{openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})},Icon:function(e){var n=e.size;return(0,r.tZ)(nE.Z,{size:n})},getTitle:function(){return"Threads"},decode:function(e){return Fu.B4.Decode(ME,e)}},WE=t(69118),NE=t(11353);var FE,VE=t(75981),HE=t(66195);function YE(){var e,n=(0,re.Z)().fs,t=function(){var e=io(jo),n=io(No),t=ao(Vo);return n||!e?null:t}(),i=(0,su.Z)(Vc.y.Sidepane),o=(0,l.Z)(c.useState([]),2),a=o[0],s=o[1],u=(0,l.Z)(c.useState(FE.Loading),2),f=u[0],h=u[1],v=(0,Ie.Z)(),m=(0,l.Z)(function(e,n){var t,r=(0,c.useState)((function(){return null!==(t=gn.Z.get(e))&&void 0!==t?t:n})),i=r[0],o=r[1];return(0,c.useEffect)((function(){gn.Z.set(e,i)}),[e,i]),[i,o]}("tutorialProgress--".concat(v),0),2),g=m[0],Z=m[1],b=(0,l.Z)(c.useState(!1),2),y=b[0],x=b[1],w=c.useRef(null),k=(0,oS.d)(),C=k?k.toString():"",S=(0,Re.Qt)(),I=(0,Re.R3)(),T=(0,Vp.Z)(I),E=(0,$n.Z)((function(){var e;return T?function(n){var t;return T({code:n,insertAt:null!==(e=null===(t=S())||void 0===t?void 0:t.position.offset)&&void 0!==e?e:"end"})}:void 0}),[T,S]),R=(0,VE.jJ)(C,v),G=R?(0,r.tZ)(VE.gC,{challenge:R}):null,P=c.useCallback((function(){w.current&&(w.current.scrollTop=0)}),[w]);return c.useEffect((function(){var e=!1,t=function(){var t=(0,Hn.Z)((function(){var t,r,i,o,a,c,u,d,p,f,v,m,g,Z,b;return(0,Yn.__generator)(this,(function(y){switch(y.label){case 0:return h(FE.Loading),[4,n.readDir(bu.V)];case 1:return t=y.sent(),e?[2]:t.error?(h(FE.Error),[2]):(r=[],[4,Promise.all(t.children.filter((function(e){return e.type===Tn.Tv.File&&HE.c.includes((0,En.r6)(e.filename))})).map((function(e){var t="".concat(bu.V,"/").concat(e.filename);return Promise.all([t,n.readFile(t)])})))]);case 2:if(i=y.sent(),e)return[2];o=!0,a=!1,c=void 0;try{for(u=i[Symbol.iterator]();!(o=(d=u.next()).done);o=!0)p=(0,l.Z)(d.value,2),f=p[0],(v=p[1]).error?h(FE.Error):(g=v.content.toString(),Z=RegExp("^#\\s(?<title>.*)"),b=Z.exec(g),r.push({title:null===b||void 0===b||null===(m=b.groups)||void 0===m?void 0:m.title,content:g,path:f}))}catch(x){a=!0,c=x}finally{try{o||null==u.return||u.return()}finally{if(a)throw c}}return s(r),h(FE.Ready),[2]}}))}));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!0}}),[n]),c.useEffect((function(){a[g]||Z(0)}),[g,Z,a]),f===FE.Loading?(0,r.tZ)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.center],children:(0,r.tZ)(se.Z,{})}):f===FE.Error?(0,r.tZ)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.center],children:(0,r.BX)(d.G,{css:[p.l0.center,p.l0.colWithGap(4)],children:[(0,r.tZ)(xp.Z,{color:p.TV.accentNegativeDefault}),(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===a.length?(0,r.tZ)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.center],children:(0,r.BX)(d.G,{css:[p.l0.center,p.l0.colWithGap(4)],children:[(0,r.tZ)(xp.Z,{color:p.TV.accentNegativeDefault}),(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):y?(0,r.BX)(d.G,{css:[p.l0.overflowY("scroll"),p.l0.flex.growAndShrink(1),p.l0.p(8),p.l0.colWithGap(16)],children:[(0,r.tZ)(ne.xv,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,r.tZ)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(8)],children:a.map((function(e,n){return(0,r.BX)(d.G,{css:[p.l0.p(8),g===n?p.l0.backgroundColor.backgroundHighest:p.l0.backgroundColor.backgroundHigher,p.l0.borderRadius(4),p.l0.rowWithGap(8),p.l0.align.center,p.l0.cursor.pointer,g===n?{outline:"solid 2px var(--outline-dimmest)"}:{},{":hover":{outline:"solid 2px var(--outline-dimmest)"}}],onClick:function(){Z(n),x(!1)},children:[(0,r.tZ)(d.G,{css:[p.l0.backgroundColor.backgroundHighest,p.l0.width(20),p.l0.height(20),p.l0.borderRadius("full"),p.l0.center,{outline:"solid 1px var(--outline-dimmest)"}],children:(0,r.tZ)(ne.xv,{variant:"small",color:"dimmest",multiline:!1,children:n+1})}),(0,r.tZ)(ne.xv,{css:[p.l0.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)}))})]}):(0,r.tZ)(d.G,{innerRef:i,css:[p.l0.height("100%")],children:(0,r.BX)(d.G,{dataCy:"tutorial-viewer-content",innerRef:w,css:[p.l0.overflowY("scroll"),p.l0.flex.growAndShrink(1),p.l0.p(16),p.l0.pb(48),p.l0.colWithGap(16)],children:[t?(0,r.tZ)(J.zx,{text:"Show tutorial video",iconLeft:(0,r.tZ)(DZ.Z,{}),onClick:function(){return t()}}):null,G,a.length>1&&(0,r.tZ)(J.zx,{text:"Table of Contents",iconLeft:(0,r.tZ)(NE.Z,{}),onClick:function(){return x(!0)}}),(0,r.tZ)(WE.Z,{fs:n,path:a[g].path,source:a[g].content,sourcePos:!1,onCodeInsert:E}),a.length>1&&(0,r.BX)(d.G,{css:[p.l0.position.absolute,p.l0.width("100%"),p.l0.left(0),p.l0.bottom(0),p.l0.overflow("hidden")],children:[(0,r.tZ)(qE,{progress:(g+1)/a.length}),(0,r.BX)(d.G,{css:[p.l0.width("100%"),p.l0.height(40),p.l0.align.center,p.l0.flex.row],children:[(0,r.tZ)(d.G,{tag:"button",css:[p.l0.justify.center,p.l0.p(8),p.l0.backgroundColor.backgroundHigher,p.l0.cursor.pointer,p.l0.width(40),p.l0.height("100%")],onClick:function(){g>0&&(Z((function(e){return e-1})),P())},children:g>0&&(0,r.tZ)(iT.Z,{size:24})}),(0,r.tZ)(d.G,{tag:"button",css:[p.l0.rowWithGap(8),p.l0.flex.growAndShrink(1),p.l0.height("100%"),p.l0.justify.spaceBetween,p.l0.backgroundColor.backgroundHighest,p.l0.align.center,p.l0.p(8),p.l0.cursor.pointer,{userSelect:"none"}],onClick:function(){g<a.length-1&&(Z((function(e){return e+1})),P())},children:g<a.length-1&&(0,r.BX)(r.HY,{children:[(0,r.BX)(ne.xv,{multiline:!1,css:[p.l0.flex.growAndShrink(1),p.l0.textAlign.left,p.l0.fontSize(p.TV.fontSizeSubheadDefault)],children:[(0,r.BX)("span",{css:[p.l0.color.foregroundDimmer],children:["Next",a[g+1].title?": ":" page"]}),(0,r.tZ)("b",{children:null!==(e=a[g+1].title)&&void 0!==e?e:""})]}),(0,r.tZ)(Lu.Z,{size:24})]})})]})]})]})})}!function(e){e.Ready="READY",e.Loading="LOADING",e.Error="ERROR"}(FE||(FE={}));var qE=function(e){var n=e.progress;return(0,r.tZ)(le.u,{tooltip:"Progress: ".concat(Math.round(100*n*10)/10,"%"),children:(0,r.tZ)(d.G,{css:[p.l0.width("100%"),p.l0.height(4),p.l0.backgroundColor.backgroundHigher],children:(0,r.tZ)(d.G,{css:[p.l0.width("".concat(100*n,"%")),p.l0.height("100%"),p.l0.backgroundColor.purpleDefault]})})})},KE=Ou.Type.Object({type:Ou.Type.Literal("tutorial")}),$E={Content:function(){return(0,r.tZ)(YE,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(ds.Z,{size:n})},getTitle:function(){return"Tutorial"},decode:function(e){return Fu.B4.Decode(KE,e)}},QE=t(2607),JE=(0,i.iv)([p.l0.backgroundColor.backgroundDefault,p.l0.height("100%"),p.l0.borderRadius(4),{overflow:"hidden"}]),eR=(0,i.iv)([p.l0.width("100%"),p.l0.height("100%"),p.l0.justify.center,p.l0.align.center,p.l0.display.flex]);function nR(e){var n=e.paneId,t=e.extensionPaneData,i=e.environmentAPIs,o=(0,QC.jx)(t.installationId),a=(0,QC.r9)(t.installationId),l=jI({extension:o,environmentAPIs:i,sandboxTitle:t.name,sandboxUrl:(0,zd.Vh)(t.baseUrl,t.path),paneId:n,filePath:t.filePath||null}),c=l.didConnectOnce,s=l.isValidExtensionPaneUrl,u=l.getIframeProps,f=l.reloadSandbox;return(0,vc.L5)((function(){return{actions:[{icon:(0,r.tZ)(UZ.Z,{}),label:"Refresh",run:function(){f()},type:"action",description:"Refresh the extension pane",key:"refresh"}]}}),[]),(0,r.tZ)(d.G,{className:"extension-pane",css:JE,children:a&&c?(0,r.tZ)(r.HY,{children:s()?(0,r.tZ)("iframe",(0,m.Z)({},u({css:{width:"100%",height:"100%",border:"none"}}))):(0,r.tZ)(d.G,{css:[p.l0.p(12)],children:(0,r.BX)(ne.xv,{children:["Invalid url:"," ",(0,r.tZ)(QE.Z,{children:t.baseUrl+t.path}),". Please contact the extension author, or Replit support."]})})}):(0,r.tZ)(d.G,{css:eR,children:(0,r.tZ)(se.Z,{})})})}var tR=Ou.Type.Object({extensionId:Ou.Type.Unsafe(Ou.Type.String()),installationId:Ou.Type.Unsafe(Ou.Type.String()),baseUrl:Ou.Type.String(),path:Ou.Type.String(),name:Ou.Type.String(),filePath:Ou.Type.Optional(Ou.Type.Union([Ou.Type.String(),Ou.Type.Null(),Ou.Type.Undefined()])),icon:Ou.Type.Optional(Ou.Type.Union([Ou.Type.String(),Ou.Type.Null(),Ou.Type.Undefined()]))}),rR=Ou.Type.Object({type:Ou.Type.Literal("extension"),data:tR}),iR={Content:function(e){var n=e.pane,t=e.options,i=NI();return(0,r.tZ)(nR,{extensionPaneData:n.data,paneId:t.paneId,environmentAPIs:i})},Icon:function(e){var n=e.pane,t=e.size;return n.data.icon?(0,r.tZ)(ue.Z,{src:(0,zd.Vh)(n.data.baseUrl,n.data.icon),layout:"fill",alt:""}):(0,r.tZ)(eb.Z,{size:t})},getTitle:function(e){return e.data.filePath?e.data.filePath+" \u2014 "+e.data.name:e.data.name},decode:function(e){return Fu.B4.Decode(rR,e)}},oR=t(3449),aR=t(22254);function lR(e){var n=gl(),t=(0,QC.WF)(),i=(0,QC.LM)(),o=(0,QC.Mu)(),a=c.useCallback((function(t,r){if("cover"===t){if(null===r)return void a("store",null);n({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!==r&&void 0!==r?r:null,page:"cover"}}})}else n({paneId:e.paneId,pane:{type:"extensionStore",data:{page:t}}})}),[n,e.paneId]);if("cover"===e.page){var l,s,u=null!==(s=null===(l=o.find((function(n){return n.extensionId===e.coverPageExtensionId})))||void 0===l?void 0:l.installationId)&&void 0!==s?s:null;return(0,r.tZ)(oR.f,{existingInstallationId:u,extensionId:e.coverPageExtensionId,goBackToStore:function(){return a("store",null)},installExtension:(0,Hn.Z)((function(){var n;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return[4,t({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(n=r.sent()))throw new Error("Failed to install extension");return[2,(0,Gu.Ad)(n.id)]}}))})),uninstallExtension:function(){var e=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return[4,i({installationId:e,replId:null})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()})}return(0,r.tZ)(aR.Z,{storeMode:"pane",openExtensionCover:function(e){return a("cover",e)},setPage:function(e){return a(e,null)},page:e.page})}var cR=Ou.Type.Union([Ou.Type.Object({page:Ou.Type.Union([Ou.Type.Literal("store"),Ou.Type.Literal("manage")])}),Ou.Type.Object({page:Ou.Type.Literal("cover"),coverPageExtensionId:Ou.Type.Unsafe(Ou.Type.String())})]),sR=Ou.Type.Object({type:Ou.Type.Literal("extensionStore"),data:cR}),uR={Content:function(e){return(0,r.tZ)(lR,(0,oe.Z)((0,m.Z)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var n=e.size;return(0,r.tZ)(eb.Z,{size:n})},getTitle:function(){return"Extensions"},decode:function(e){return Fu.B4.Decode(sR,e)}};var dR=t(64309),pR=t(8008),fR=t(46918);function hR(){var e=function(){var e=(0,re.Z)().toolchain;function n(){return(n=(0,Hn.Z)((function(n){return(0,Yn.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.addModule(n).catch((function(e){ww.kg.error("Toolchain: failed to add Nix module: "+e.message)}))];case 1:return t.sent(),[2]}}))}))).apply(this,arguments)}function t(){return(t=(0,Hn.Z)((function(n){return(0,Yn.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.removeModule(n).catch((function(e){ww.kg.error("Toolchain: failed to remove Nix module: "+e.message)}))];case 1:return t.sent(),[2]}}))}))).apply(this,arguments)}function r(){return(r=(0,Hn.Z)((function(n,t){return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.upgradeModule(n,t).catch((function(e){ww.kg.error("Toolchain: failed to upgrade Nix module: "+e.message)}))];case 1:return r.sent(),[2]}}))}))).apply(this,arguments)}return{modules:(0,Hs.Z)(e.modules),addModule:function(e){return n.apply(this,arguments)},removeModule:function(e){return t.apply(this,arguments)},upgradeModule:function(e,n){return r.apply(this,arguments)}}}(),n=e.modules,t=e.addModule,i=e.removeModule,o=e.upgradeModule,a=(0,re.Z)().toolchain,l=(0,c.useState)(null),s=l[0],u=l[1];return(0,c.useEffect)((function(){a.getRegistry().then((function(e){u(e)})).catch((function(e){ww.kg.error("Toolchain: failed to get module registry: "+e.message)}))}),[a]),(0,r.BX)(dR.mQ,{css:[p.l0.pb(8),p.l0.pt(4)],children:[(0,r.BX)(dR.td,{withDividers:!1,children:[(0,r.tZ)(dR.OK,{iconLeft:(0,r.tZ)(pR.Z,{}),children:"Store"},1),(0,r.tZ)(dR.OK,{iconLeft:(0,r.tZ)(Um.Z,{}),children:"Installed"},2)]}),(0,r.BX)(dR.nP,{children:[(0,r.tZ)(dR.x4,{children:(0,r.tZ)(vR,{registry:s,modules:n,addModule:t})}),(0,r.tZ)(dR.x4,{children:(0,r.tZ)(ZR,{modules:n,registry:s,removeModule:i,upgradeModule:o})})]})]})}function vR(e){var n=e.registry,t=e.modules,i=e.addModule,o=(0,c.useState)(!1),a=o[0],l=o[1],s=(0,c.useMemo)((function(){var e=new Set((null===t||void 0===t?void 0:t.map((function(e){return e.referencedId})))||[]);return((null===n||void 0===n?void 0:n.modules)||[]).filter((function(n){return!e.has(gR(n))})).sort((function(e,n){return e.name===n.name?0:e.name>n.name?1:-1}))}),[n,t]);return(0,r.BX)(d.G,{css:[p.l0.pt(8),p.l0.px(8),p.l0.colWithGap(8)],children:[n?(0,r.tZ)(d.G,{css:p.l0.colWithGap(4),children:s.map((function(e){var n=e.id;return(0,r.BX)(d.G,{css:[p.l0.align.start,(0,f.Z)({},p.nC.min("mobileMin"),[p.l0.rowWithGap(4),p.l0.align.center])],children:[(0,r.BX)(ne.xv,{css:p.l0.flex.shrink(1),children:[e.name," ",(0,r.BX)(ne.xv,{color:"dimmer",children:["v",e.version," ",e.description]})]}),(0,r.tZ)(mR,{}),(0,r.tZ)(J.zx,{size:"small",variant:"nofill",text:"Install",css:[p.l0.color.foregroundDimmer,p.l0.hover(p.l0.color.foregroundDefault)],onClick:function(){i(gR(e))}})]},n)}))}):null,(0,r.tZ)(J.zx,{text:"Add by source file",onClick:function(){l(!0)}}),(0,r.tZ)(He.u,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,r.tZ)(aS.Z,{prompt:"Add module",desc:"What's the module file path?",placeholder:"path",type:"text",onCancel:function(){return l(!1)},onConfirm:function(){var e=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return[4,i(e)];case 1:return n.sent(),l(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}()})})]})}function mR(){return(0,r.tZ)(d.G,{css:[p.l0.height(1),p.l0.flex.growAndShrink(1),(0,f.Z)({},p.nC.min("mobileMax"),p.l0.backgroundColor.outlineDimmest)]})}function gR(e){return"".concat(e.id,":").concat(e.tag)}function ZR(e){var n=e.registry,t=e.modules,i=e.removeModule,o=e.upgradeModule;return t?(t.sort((function(e,n){return e.name===n.name?0:e.name>n.name?1:-1})),(0,r.tZ)(d.G,{css:p.l0.pt(4),children:t.map((function(e){return(0,r.tZ)(bR,{removeModule:i,upgradeModule:o,moduleId:e.id,module:e,registry:n},e.id)}))})):(0,r.tZ)(d.G,{css:[p.l0.p(8)],children:"Loading..."})}function bR(e){var n=e.moduleId,t=e.module,i=e.removeModule,o=e.upgradeModule,a=e.registry,l=null===a||void 0===a?void 0:a.recommendUpgrade[t.resolvedId],s=(0,c.useMemo)((function(){if(!a)return null;var e=a.recommendUpgrade[t.resolvedId];if(!e)return null;var n=e.to.split(":")[0];return a.modules.find((function(e){return e.id===n}))}),[a,t.resolvedId]);return(0,r.tZ)(TE.Q,{round:!1,css:{":not(:first-of-type)":{borderTop:"1px solid "+p.TV.outlineDimmest}},headerContent:function(e){var i=e.isExpanded;return(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.px(4),{"[aria-selected=true]":[p.l0.fontWeight.medium]}],children:[t.name," ",t.version,!i&&l?(0,r.tZ)(fR.Z,{alt:"Upgrade available"}):null]},n)},children:(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.p(8),p.l0.pt(4)],children:[(0,r.tZ)(yR,{module:t}),l?(0,r.tZ)(le.u,{tooltip:l.changelog,children:(0,r.tZ)(J.zx,{iconRight:(0,r.tZ)(fR.Z,{}),text:"Upgrade to ".concat(null===s||void 0===s?void 0:s.name," v").concat(null===s||void 0===s?void 0:s.version),onClick:function(){o(t.referencedId,l.to)}})}):null,(0,r.tZ)(ee.hU,{alt:"Remove module",onClick:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return[4,i(t.referencedId)];case 1:return e.sent(),[2]}}))})),children:(0,r.tZ)(Xd.Z,{})})]})})}function yR(e){var n=e.module;return(0,r.BX)("ul",{css:[p.l0.colWithGap(2),{flex:1}],children:["resolve"===n.buildType?(0,r.tZ)(xR,{label:"Registry ID",content:n.resolvedId},"resolvedId"):null,"build"===n.buildType?(0,r.tZ)(xR,{label:"Built from",content:n.resolvedId},"buildType"):null,n.referencedId!==n.resolvedId?(0,r.tZ)(xR,{label:"Originally installed version",content:n.referencedId},n.referencedId):null,n.runners.map((function(e){return(0,r.tZ)(xR,{label:"Runner",content:e.name},e.id)})),n.debuggers.map((function(e){return(0,r.tZ)(xR,{label:"Debugger",content:e.name},e.id)})),n.languageServers.map((function(e){return(0,r.tZ)(xR,{label:"Language server",content:e.name},e.id)})),n.packagers.map((function(e){return(0,r.tZ)(xR,{label:"Packager",content:e.name},e.id)}))]})}function xR(e){var n=e.key,t=e.label,i=e.content;return(0,r.BX)("li",{children:[(0,r.BX)(ne.xv,{color:"dimmer",children:[t,": "]}),(0,r.tZ)(ne.xv,{children:i})]},n)}var wR=Ou.Type.Object({type:Ou.Type.Literal("modules")}),kR={Content:function(){return(0,r.tZ)(hR,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(Lh.Z,{size:n})},getTitle:function(){return"Modules"},decode:function(e){return Fu.B4.Decode(wR,e)}},CR={Content:function(e){var n,t=e.pane;return(0,r.tZ)(Q.Tg,{css:{width:"100%",height:"100%",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",overflow:"hidden"},children:(0,r.tZ)("iframe",{title:"Replit Docs",src:(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.url)||lt.TT.HOME,width:"100%",height:"100%",frameBorder:"0"})})},Icon:function(e){var n=e.size;return(0,r.tZ)(tf.Z,{size:n})},getTitle:function(){return"Docs"},decode:t(44742).J},SR=["youtube.com","vimeo.com","wistia.com","sadanandpai.github.io"],IR=Ou.Type.Object({type:Ou.Type.Literal("videoPlayer"),data:Ou.Type.Object({embedUrl:Ou.Type.String(),title:Ou.Type.String()})}),TR={Content:function(e){var n=e.pane.data;return(0,r.tZ)(ER,{title:n.title,embedUrl:n.embedUrl})},Icon:function(e){var n=e.size;return(0,r.tZ)(DZ.Z,{size:n})},getTitle:function(e){return e.data.title},decode:function(e){return Fu.B4.Decode(IR,e)}};function ER(e){return function(e){try{var n=new URL(e).hostname;return SR.some((function(e){return n===e||n.endsWith("."+e)}))}catch(t){return!1}}(e.embedUrl)?(0,r.tZ)("iframe",{title:e.title,src:e.embedUrl,frameBorder:"0",css:[p.l0.coverContainer,p.l0.borderRadius(0,0,8,8)]}):(0,r.BX)("div",{children:["Only YouTube, Vimeo, and Wistia videos are supported."," ",(0,r.tZ)("a",{href:lt.xz,target:"_blank",children:"Request more formats here."})]})}var RR=Ou.Type.Object({type:Ou.Type.Literal("chat")}),GR={Content:function(e){var n=e.options;return(0,r.tZ)(Q.Tg,{background:"default",css:p.l0.flex.growAndShrink(1),children:(0,r.tZ)(zE,{isChatOnly:!0,openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})})},Icon:function(e){var n=e.size;return(0,r.tZ)(EZ.Z,{size:n})},getTitle:function(){return"Chat"},decode:function(e){return Fu.B4.Decode(RR,e)}},PR=t(33978),DR=t(6210),BR=t(41168),UR=(0,de.X)({self:[p.l0.position.relative,p.l0.flex.shrink(1),p.l0.width("100%")],iconWrapper:[p.l0.position.absolute,p.l0.top(0),p.l0.right(0),p.l0.height("100%"),p.l0.p(4)]}),AR=c.forwardRef((function(e,n){var t,i=e.onClear,o=(0,bs.Z)(e,["onClear"]);return(0,r.BX)(d.G,{css:UR.self,children:[(0,r.tZ)(BR.w,(0,m.Z)({ref:n},o)),((null===(t=o.value)||void 0===t?void 0:t.length)||0)>0?(0,r.tZ)(d.G,{css:UR.iconWrapper,children:(0,r.tZ)(ee.hU,{alt:"Clear search query",tooltipHidden:!0,onClick:i,css:{"&:hover":{backgroundColor:"".concat(p.TV.backgroundHighest," !important")}},children:(0,r.tZ)(xp.Z,{})})}):null]})}));AR.displayName="SearchInput";var LR=AR,OR=t(31241),_R=(0,de.X)({self:[p.l0.width(32),p.l0.height(32)],queryPill:[p.l0.display.inline,p.l0.fontSize(p.TV.fontSizeDefault)],popover:[{"& > .popover-control-container":p.l0.mr(0)}],replaceButton:[p.l0.width(104)]});function XR(e){var n=e.text;return(0,r.tZ)(Yv.D,{css:_R.queryPill,text:0===n.length?"\u23b5":n})}function zR(e){var n=e.query,t=e.replacement,i=e.numMatches,o=e.onCancel,a=e.onConfirm;return(0,r.BX)(d.G,{css:[p.l0.colWithGap(24)],children:[(0,r.BX)(ne.xv,{children:["Replace ",(0,r.tZ)(XR,{text:n})," with ",(0,r.tZ)(XR,{text:t})," ","in ",(0,_n.Z)("match",i,!0),"?"]}),(0,r.tZ)(ne.xv,{children:"This operation cannot be undone!"}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,r.tZ)(J.zx,{onClick:function(){return o()},text:"Cancel"}),(0,r.tZ)(J.zx,{colorway:"negative",onClick:function(){return a()},text:"Yes, replace ".concat((0,_n.Z)("match",i,!0)),iconLeft:(0,r.tZ)(OR.Z,{})})]})]})}function MR(e){var n=e.disabled,t=e.loading,i=e.query,o=e.replacement,a=e.results,l=e.replace,s=e.onReplace,u=e.buttonProps,p=(0,c.useState)(!1),f=p[0],v=p[1],g=(0,Dp.Z)(),Z=function(){var e=(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return v(!1),(0,h.j)(h.U3.SEARCH_PANE_USED,{action:"replace"}),[4,l()];case 1:return e=n.sent(),g.current&&e.success&&s(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),b=(0,c.useMemo)((function(){return a.reduce((function(e,n){return e+n.lines.reduce((function(e,n){return e+n.matches.length}),0)}),0)}),[a]);return(0,r.tZ)(d.G,{css:_R.popover,children:(0,r.BX)(Ce.Z,{isOpen:f,maxWidth:400,showArrow:!0,children:[(0,r.tZ)(J.zx,(0,oe.Z)((0,m.Z)({},u),{text:"Replace All",css:_R.replaceButton,disabled:n||t,onClick:function(){v((function(e){return!e}))}})),(0,r.tZ)(zR,{query:i,replacement:o,numMatches:b,onCancel:function(){return v(!1)},onConfirm:Z})]})})}var jR=t(6686),WR=t(86033),NR=t(87720),FR=(0,de.X)({self:[p.l0.flex.row,p.l0.rowWithGap(4),p.l0.align.center,p.l0.justify.center,p.l0.pt(8),p.l0.pb(8),p.l0.width("100%"),p.l0.flex.wrap],text:[p.l0.display.block,p.l0.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function VR(e){var n=e.error;return(0,r.BX)(d.G,{css:FR.self,children:[(0,r.tZ)(tm.Z,{}),(0,r.tZ)(ne.xv,{css:FR.text,multiline:!1,children:n})]})}var HR=(0,de.X)({self:[p.l0.width("fit-content"),p.l0.display.inlineBlock,p.l0.color.accentNegativeDefault,p.l0.fontWeight.bold]});function YR(e){var n=e.content;return(0,r.tZ)(r.HY,{children:n.split("\n").reduce((function(e,n,t){return null===e?[n]:(0,We.Z)(e).concat([(0,r.tZ)(d.K.span,{css:HR.self,children:"\\n"},"".concat(n,"-").concat(t)),n])}),null)})}var qR,KR,$R=d.K.span,QR=50,JR="SearchMatch";!function(e){e.HIGHLIGHT="highlight",e.REMOVE="remove",e.ADD="add",e.TEXT="text"}(qR||(qR={}));var eG=(0,de.X)((KR={self:[p.l0.width("fit-content"),p.l0.display.inlineBlock,p.l0.cursor.pointer,{"&:focus-visible":[p.l0.focusRing]}]},(0,f.Z)(KR,qR.HIGHLIGHT,[p.l0.px(2),p.l0.backgroundColor.accentPrimaryDimmest,p.l0.borderRadius(4),p.l0.border({color:p.TV.accentPrimaryDimmer,width:1,direction:"full"})]),(0,f.Z)(KR,qR.REMOVE,[p.l0.px(2),p.l0.backgroundColor.accentNegativeDimmest,p.l0.borderRadius(4),p.l0.border({color:p.TV.accentNegativeDimmer,width:1,direction:"full"}),{textDecoration:"line-through"}]),(0,f.Z)(KR,qR.ADD,[p.l0.px(2),p.l0.backgroundColor.accentPositiveDimmest,p.l0.borderRadius(4),p.l0.border({color:p.TV.accentPositiveDimmer,width:1,direction:"full"})]),(0,f.Z)(KR,"hiddenTextWrapper",[p.l0.display.inlineBlock,p.l0.mx(2),{"& > div":[p.l0.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,f.Z)(KR,"firstHiddenTextWrapper",[p.l0.ml(0)]),(0,f.Z)(KR,"lastHiddenTextWrapper",[p.l0.mr(0)]),KR));function nG(e){var n=e.content,t=e.matches,i=e.dedentBy,o=e.replacement,a=e.isRegex,l=e.query,s=e.onOpenAtPosition;return(0,r.tZ)(r.HY,{children:rG({content:n,matches:t,dedentBy:i,replacement:o}).map((function(e,t,i){var u=e.start,d=e.end,p=e.type,f="".concat(u,"-").concat(d),h=d-u;if("text"===p){var v=i[t+1];if(0===t&&h>QR)return(0,r.BX)(c.Fragment,{children:[(0,r.tZ)($R,{css:[eG.hiddenTextWrapper,eG.firstHiddenTextWrapper],children:(0,r.tZ)(ee.hU,{size:18,alt:"Jump to hidden text",onClick:function(){s(d-QR)},children:(0,r.tZ)(Ex.Z,{})})},f),(0,r.tZ)("span",{children:n.substring(d-QR,d)})]},f);if(t===i.length-1&&h>QR)return(0,r.BX)(c.Fragment,{children:[(0,r.tZ)("span",{children:n.substring(u,u+QR)}),(0,r.tZ)($R,{css:[eG.hiddenTextWrapper,eG.lastHiddenTextWrapper],children:(0,r.tZ)(ee.hU,{size:18,alt:"Jump to hidden text",onClick:function(){s(u+QR)},children:(0,r.tZ)(Ex.Z,{})})},f)]},f);if(v&&h>100)return(0,r.BX)(c.Fragment,{children:[(0,r.tZ)("span",{children:n.substring(u,u+QR)}),(0,r.tZ)($R,{css:eG.hiddenTextWrapper,children:(0,r.tZ)(ee.hU,{size:18,alt:"Jump to hidden text",onClick:function(){s(u+QR)},children:(0,r.tZ)(Ex.Z,{})})},f),(0,r.tZ)("span",{children:n.substring(d-QR,d)})]},f)}var m=-1===u?o:n.substring(u,d);if("text"===p)return(0,r.tZ)(c.Fragment,{children:m},f);var g=null,Z=i[t-1];return p===qR.ADD&&(null===Z||void 0===Z?void 0:Z.type)===qR.REMOVE&&(g=n.substring(Z.start,Z.end)),(0,r.tZ)(tG,{content:m,type:p,isRegex:a,query:l,replacement:o,removedText:g,onClick:function(e){e.stopPropagation(),s(d)}},f)}))})}function tG(e){var n=e.content,t=e.type,i=e.isRegex,o=e.replacement,a=e.query,l=e.removedText,c=(0,bs.Z)(e,["content","type","isRegex","replacement","query","removedText"]),s=n,u=void 0;switch(t){case qR.HIGHLIGHT:u="Matched text ".concat(s);break;case qR.REMOVE:u="Removed text ".concat(s);break;case qR.ADD:if(u="Added text ".concat(s),i&&null!==l)try{s=l.replace(new RegExp(a),o.replaceAll(/\$[&`']/g,"$$$&"))}catch(p){}}return(0,r.tZ)(d.K.span,(0,oe.Z)((0,m.Z)({css:[eG.self,eG[t]],tabIndex:0,"aria-label":u,role:"button","data-nav":JR},c),{children:t===qR.ADD?(0,r.tZ)(YR,{content:s}):s}))}function rG(e){for(var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=[],a=r,l=0;l<t.length;l++){var c=t[l],s=c.start+c.length;o.push({start:a,end:c.start,type:qR.TEXT});var u=n.substring(c.start,s);i.length>0&&i!==u?(o.push({start:c.start,end:s,type:qR.REMOVE}),o.push({start:-1,end:s,type:qR.ADD})):o.push({start:c.start,end:s,type:qR.HIGHLIGHT,matchIndex:l}),a=s}return o.push({start:a,end:n.length,type:qR.TEXT}),o}var iG="SearchLine",oG="--search-line-number-width",aG=(0,de.X)({self:[p.l0.rowWithGap(8),p.l0.align.stretch,p.l0.overflow("hidden"),p.l0.cursor.pointer,p.l0.borderRadius(4),{"&:focus-visible":[p.l0.focusRing],"&:hover, &:focus-visible":[p.l0.backgroundColor.backgroundHighest]}],content:[p.l0.font.code,p.l0.maxWidth("100%"),p.l0.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word",lineHeight:p.TV.lineHeightDefault}],lineNumberWrapper:[p.l0.display.inlineBlock,p.l0.color.foregroundDimmest,p.l0.mr(8),p.l0.pl(8),p.l0.pt(4)],lineNumber:[p.l0.display.inlineBlock,p.l0.textAlign.right,{width:"var(".concat(oG,")")}]});function lG(e){var n=e.lineNumber,t=e.content,i=e.matches,o=e.path,a=e.dedentBy,l=e.performPaneOperation,c=(0,bs.Z)(e,["lineNumber","content","matches","path","dedentBy","performPaneOperation"]),s=(0,$n.Z)((function(){return function(e){(0,h.j)(h.U3.SEARCH_PANE_RESULT_CLICKED,(0,m.Z)({},c)),l({operation:"open",pane:{type:"codeEditor",data:{path:o,line:n,col:e}},secondary:!0})}}),[n,c,o,l]),u=(0,$n.Z)((function(){return function(){var e=i.length>0?i[0]:null;s(e?e.start+e.length:0)}}),[i,s]);return(0,r.BX)(d.G,{tabIndex:0,css:aG.self,"data-nav":iG,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),u())},onClick:u,children:[(0,r.tZ)(d.G,{css:aG.lineNumberWrapper,children:(0,r.tZ)(d.G,{tag:"span",css:aG.lineNumber,"aria-label":"Line ".concat(n),children:n})}),(0,r.tZ)("pre",{css:aG.content,children:(0,r.tZ)(nG,{isRegex:c.isRegex,content:t,matches:i,dedentBy:a,query:c.query,replacement:c.replacement,onOpenAtPosition:s})})]})}function cG(e){return Math.log(e)*Math.LOG10E+1|0}var sG="SearchFileNav",uG="SearchFileHeaderNav",dG="SearchQueryNav",pG="SearchQueryTogglesNav",fG=Je.Wx.space24,hG=parseInt(fG,10)+10,vG=(0,de.X)({header:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.overflow("hidden"),p.l0.height(fG),p.l0.overflow("hidden")],headerText:[p.l0.flex.shrink(1)],gap:[p.l0.height(24),p.l0.display.flex,p.l0.align.center,p.l0.truncate],accordionWrapper:[p.l0.backgroundColor.backgroundHigher,p.l0.borderRadius(4)],accordionChildren:[p.l0.p(8)],linesWrapper:[p.l0.py(8),p.l0.overflow("hidden"),p.l0.borderRadius(4),p.l0.colWithGap(2),p.l0.font.code],hiddenLineWrapper:[p.l0.display.flex,p.l0.justify.end,{width:"calc(var(".concat(oG,") + ").concat(Je.TV.space16,")"),"& > div":[p.l0.align.end]}],padding:p.l0.pb(8)});function mG(e){var n=e.path,t=e.lines,i=e.dedentBy,o=e.isFirst,a=e.isLast,s=e.expanded,u=void 0===s||s,p=e.onClick,h=e.performPaneOperation,v=e.scrollOffset,g=void 0===v?0:v,Z=(0,bs.Z)(e,["path","lines","dedentBy","isFirst","isLast","expanded","onClick","performPaneOperation","scrollOffset"]),b=(0,c.useRef)(null),y=(0,l.Z)((0,$n.Z)((function(){return[t.reduce((function(e,n){return e+n.matches.length}),0),gG(t)]}),[t]),2),x=y[0],w=y[1],k=(0,$n.Z)((function(){var e=t[t.length-1];if(!e)return{};var n=cG(e.lineNumber);return(0,f.Z)({},oG,"".concat(n,"ch"))}),[t]);return(0,r.tZ)(d.G,{css:[!a&&vG.padding,k],"data-nav":sG,innerRef:b,children:(0,r.tZ)(Q.Tg,{css:vG.accordionWrapper,elevated:!0,children:(0,r.tZ)(TE.Q,{expanded:u,onClick:function(){p(b.current)},headerProps:{"data-nav":"".concat(uG," ").concat(iG," ").concat(o?"".concat(dG," ").concat(pG):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(g,"px"),background:Je.TV.backgroundHigher}},headerContent:(0,r.BX)(d.G,{css:vG.header,children:[(0,r.tZ)(fc.Z,{path:n}),(0,r.tZ)(ne.xv,{css:vG.headerText,multiline:!1,children:n.replace(/^\.\//,"")}),(0,r.BX)(ne.xv,{color:"dimmest",css:vG.headerText,multiline:!1,children:[x," ",(0,_n.Z)("match",x)]})]}),children:(0,r.tZ)(d.G,{css:vG.accordionChildren,children:(0,r.tZ)(Q.Tg,{css:vG.linesWrapper,children:t.map((function(e,t){return(0,r.BX)(c.Fragment,{children:[(0,r.tZ)(lG,(0,oe.Z)((0,m.Z)({},e,Z),{path:n,dedentBy:i,performPaneOperation:h})),0!==w[t]?(0,r.tZ)(d.G,{css:vG.hiddenLineWrapper,children:(0,r.tZ)(ee.hU,{alt:"".concat(w[t]," hidden ").concat((0,_n.Z)("line",w[t])),onClick:function(){h({operation:"open",pane:{type:"codeEditor",data:{path:n,line:e.lineNumber+1,col:0}},secondary:!0})},children:(0,r.tZ)(kd.Z,{})})}):null]},e.lineNumber)}))})})})})})}function gG(e){return e.map((function(n,t){var r=e[t+1];return r?r.lineNumber-n.lineNumber-1:0}))}function ZG(e,n){var t=function(e){return gG(e).map((function(e){return e>0}))}(e).filter((function(e){return e})).length,r=e.length;if(n)for(var i=n-48,o=0;o<e.length;o++){var a=e[o],l=9*cG(o)+9*a.content.length+4*a.matches.length;l>i&&(r+=Math.floor(i/l)+1)}return hG+40+24.39*r+2*r+24*t}var bG=function(e){var n;null===(n=e.focus)||void 0===n||n.call(e)};function yG(e){var n=e.isValid,t=e.move,r=e.focus,i=void 0===r?bG:r,o=e.wrap,a=void 0!==o&&o,l=e.selector,s=e.boundary,u=(0,c.useRef)(null);return(0,c.useEffect)((function(){if(u.current){var e=u.current,r=function(r){var o;if(n(r)&&0!==(o=l?(0,We.Z)(e.querySelectorAll(l)):function(e){var n=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])');return(0,We.Z)(n)}(e)).length){var c=document.activeElement;if(e.contains(c)){if(l)if(s){var u=null===c||void 0===c?void 0:c.closest(s),d=null===c||void 0===c?void 0:c.closest(l);c=d||(null===u||void 0===u?void 0:u.querySelector(l))}else c=null===c||void 0===c?void 0:c.closest(l);if(!l||c&&e.contains(document.activeElement)){if(!c)return r.preventDefault(),r.stopPropagation(),void i(o[0]);var p=o.findIndex((function(e){return e===c}));if(-1===p)return r.preventDefault(),r.stopPropagation(),void i(o[0]);var f,h=t({event:r,children:o,activeIndex:p,activeElement:c});if(a||!(h<0||h>o.length-1))f=h<0?o[o.length-1]:h>o.length-1?o[0]:o[h],i(f),r.stopPropagation(),r.preventDefault()}else{var v;r.preventDefault(),r.stopPropagation();var m=null===(v=document.activeElement)||void 0===v?void 0:v.querySelector(l);i(m||o[0])}}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}}),[s,n,t,i,u,l,a]),u}var xG=t(59589),wG=(0,de.X)({container:[p.l0.p(4),p.l0.display.flex,p.l0.flex.row,p.l0.justify.spaceBetween],resultCount:[p.l0.color.foregroundDimmer],actions:[p.l0.display.flex,p.l0.rowWithGap(4)]});function kG(e){var n="collapse"===e.collapseExpandAllState;return(0,r.BX)(d.G,{css:wG.container,children:[(0,r.BX)(d.G,{css:wG.resultCount,children:[e.totalCount," results in ",(0,_n.Z)("file",e.fileCount,!0)]}),(0,r.BX)(d.G,{css:wG.actions,children:[(0,r.tZ)(ee.hU,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,r.tZ)(hd.Z,{})}),(0,r.tZ)(ee.hU,{alt:n?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:n?(0,r.tZ)(Gd.Z,{}):(0,r.tZ)(xG.Z,{})})]})]})}var CG=d.K.span,SG=(0,de.X)({root:[p.l0.display.flex,p.l0.colWithGap(8),p.l0.align.center,p.l0.py(16)],icon:[p.l0.color.foregroundDimmest],message:[p.l0.color.foregroundDimmest]});function IG(e){var n=e.icon,t=void 0===n?null:n,i=e.message,o=void 0===i?"No results found.":i;return(0,r.BX)(d.G,{css:SG.root,children:[t?(0,r.tZ)(d.G,{css:SG.icon,children:t}):null,(0,r.tZ)(CG,{css:SG.message,children:o})]})}var TG=(0,i.F4)({from:{opacity:0},to:{opacity:1}}),EG=(0,de.X)({listWrapper:[p.l0.overflowY("auto"),p.l0.flex.grow(1),{contain:"strict"}],list:[p.l0.width("100%"),p.l0.position.relative],listItem:[p.l0.position.absolute,p.l0.top(0),p.l0.left(0),p.l0.width("100%")],resultCount:[p.l0.p(4),p.l0.pb(8),p.l0.color.foregroundDimmer],resultRow:[{animation:"".concat(TG," 120ms linear forwards")}]});function RG(e){var n=e.results,t=e.error,i=e.paneRef,o=e.performPaneOperation,a=(0,bs.Z)(e,["results","error","paneRef","performPaneOperation"]),l=(0,$n.Z)((function(){return n.filter((function(e){return e.lines.length>0}))}),[n]),s=(0,$n.Z)((function(){return l.reduce((function(e,n){return e+n.lines.reduce((function(e,n){return e+n.matches.length}),0)}),0)}),[l]),u=(0,c.useState)({}),p=u[0],h=u[1],v=(0,c.useRef)(null),g=(0,WR.MG)({count:l.length,getScrollElement:function(){return v.current},estimateSize:function(e){var n;return ZG(l[e].lines,null===i||void 0===i||null===(n=i.current)||void 0===n?void 0:n.offsetWidth)},overscan:3}),Z=g.getVirtualItems(),b=(0,c.useRef)(null),y=(0,c.useCallback)((function(e){var n=e,t=v.current;if(t&&b.current!==e)if(n.matches('[data-nav*="'.concat(uG,'"]')))n.focus();else{var r=n.closest('[data-nav="'.concat(sG,'"]')),i=null===r||void 0===r?void 0:r.querySelector('[data-nav*="'.concat(uG,'"]'));if(i){var o=i.getBoundingClientRect();if(i.offsetTop+o.height>n.offsetTop){var a=n.offsetTop-o.height;b.current=e;var l=function(){if(t.scrollTop===a){if(t.removeEventListener("scroll",l),b.current!==e)return;n.focus(),b.current=null}};t.addEventListener("scroll",l),t.scrollTo({top:a})}else n.focus()}else n.focus()}}),[]),x=function(e){var n=(0,c.useCallback)((function(e){return"Tab"===e.key}),[]),t=(0,c.useCallback)((function(e){var n=e.event,t=e.activeIndex;return n.shiftKey?t-1:t+1}),[]);return yG((0,oe.Z)((0,m.Z)({},e),{isValid:n,move:t}))}({selector:'[data-nav*="'.concat(uG,'"]'),boundary:'[data-nav*="'.concat(sG,'"]')}),w=function(e){var n=(0,c.useCallback)((function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key}),[]),t=(0,c.useCallback)((function(e){var n=e.event,t=e.activeIndex;return"ArrowUp"===n.key?t-1:t+1}),[]);return yG((0,oe.Z)((0,m.Z)({},e),{isValid:n,move:t}))}({selector:'[data-nav*="'.concat(iG,'"]'),focus:y}),k=function(e){var n=(0,c.useCallback)((function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key}),[]),t=(0,c.useCallback)((function(e){var n=e.event,t=e.activeIndex;return"ArrowLeft"===n.key?t-1:t+1}),[]);return yG((0,oe.Z)((0,m.Z)({},e),{isValid:n,move:t}))}({selector:'[data-nav*="'.concat(JR,'"]'),focus:y}),C=(0,wf.lq)(x,w,k),S=(0,$n.Z)((function(){return l.length===Object.keys(p).length&&Object.values(p).every(Boolean)}),[p,l.length]),I=null;return l.length>0?I=function(){var e;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(kG,{fileCount:l.length,totalCount:s,collapseExpandAllState:S?"expand":"collapse",onToggleCollapseExpandAll:function(){h(S?{}:l.reduce((function(e,n){return(0,oe.Z)((0,m.Z)({},e),(0,f.Z)({},n.path,!0))}),{}))},onStartNewSearch:function(){o({operation:"commit"}),o({operation:"open",pane:{type:"searchReplace"}})}}),(0,r.tZ)(d.K.div,{ref:v,css:EG.listWrapper,children:(0,r.tZ)(d.G,{css:EG.list,style:{height:g.getTotalSize()},children:(0,r.tZ)(d.G,{css:EG.listItem,style:{transform:"translateY(".concat(null===(e=Z[0])||void 0===e?void 0:e.start,"px)")},innerRef:C,children:Z.map((function(e){var n,t=l[e.index],i=t.path;return(0,r.tZ)(d.K.div,{"data-index":e.index,ref:g.measureElement,css:EG.resultRow,children:(0,r.tZ)(mG,(0,oe.Z)((0,m.Z)({},t,a),{scrollOffset:null===(n=Z[0])||void 0===n?void 0:n.start,performPaneOperation:o,isFirst:0===e.index,isLast:e.index===l.length-1,expanded:!0!==p[i],onClick:function(e){var n;if(h((function(e){return(0,oe.Z)((0,m.Z)({},e),(0,f.Z)({},i,!(i in e)||!e[i]))})),v.current&&e){var t,r=Math.floor(null!==(t=null===(n=Z[0])||void 0===n?void 0:n.start)&&void 0!==t?t:0),o=Math.floor(v.current.scrollTop),a=e.offsetTop+r;a>o||v.current.scrollTo({top:a-1})}}}))},e.key)}))})})})]})}():t===NR.f.EMPTY_RESULTS&&(I=(0,r.tZ)(IG,{icon:(0,r.tZ)(sc.Z,{size:32}),message:t})),(0,r.BX)(r.HY,{children:[t&&t!==NR.f.EMPTY_RESULTS?(0,r.tZ)(VR,{error:t}):null,I]})}var GG=t(72901);function PG(e){return(0,c.useMemo)((function(){return(0,We.Z)((0,GG.Eu)(e,",")).filter((function(e){return e.length>0}))}),[e])}var DG,BG=t(12315);function UG(e){var n=e.replacement,t=e.query,r=e.isRegex,i=e.isCaseSensitive,o=e.isMatchingWholeWords,a=["sd"],l=[t.indexOf("\n")>=0?"m":"e",i?"c":"i"];return o&&l.push("w"),a.push("--flags",l.join("")),r||a.push("--string-mode"),t.startsWith("-")&&(t="\\"+t),a.push(t,n),a}function AG(e){return LG.apply(this,arguments)}function LG(){return LG=(0,Hn.Z)((function(e){var n,t,r,i,o,a,l,c,s;return(0,Yn.__generator)(this,(function(u){switch(u.label){case 0:return t=e.container,r=e.fileList,0===(i=(0,bs.Z)(e,["container","fileList"])).query.length?[2,{success:!1,errorOn:"exit",errorMessage:DG.QUERY_EMPTY}]:i.query===i.replacement?[2,{success:!1,errorOn:"exit",errorMessage:DG.QUERY_SAME}]:r&&r.length>0?(o=r,[3,3]):[3,1];case 1:return[4,(a=t).exec.apply(a,(0,We.Z)((0,BG.PR)((0,oe.Z)((0,m.Z)({},i),{context:1,mode:"files"}))))];case 2:if((c=u.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===c.error?DG.NO_MATCHES:c.error}];o=(null===(l=c.output)||void 0===l?void 0:l.split("\n").filter((function(e){return e.trim().length>0})))||[],u.label=3;case 3:return 0===o.length?[2,{success:!1,errorOn:"rg",errorMessage:DG.NO_MATCHES}]:[4,(n=t).exec.apply(n,(0,We.Z)(UG(i)).concat((0,We.Z)(o)))];case 4:return(s=u.sent()).error?[2,{success:!1,errorOn:"sd",errorMessage:s.error}]:[2,{success:!0}]}}))})),LG.apply(this,arguments)}!function(e){e.QUERY_EMPTY="The query is empty",e.QUERY_SAME="The query is the same as replacement",e.NO_MATCHES="No matches were found to replace",e.RG_EMPTY="Ripgrep didn't return a response",e.NOT_MOUNTED="Component wasn't mounted"}(DG||(DG={}));var OG=t(66860),_G=t(11457);var XG=t(30022),zG=t(67741),MG=t(87653),jG="SearchQueryControlsNav",WG="SearchQueryExcludeNav",NG="SearchQueryControlsColumnNav",FG=(0,i.F4)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),VG=(0,de.X)({self:[p.l0.p(8),p.l0.colWithGap(8),p.l0.height("100%"),p.l0.overflow("hidden")],filesIncludeExcludeWrapper:[p.l0.rowWithGap(4),p.l0.align.center,p.l0.flex.shrink(1),p.l0.mt(6),p.l0.mr(96),p.l0.pr(12)],inputWithLabel:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(4)],inputLabel:[{userSelect:"none"},p.l0.flex.shrink(1),p.l0.color.foregroundDimmest,p.l0.truncate,p.l0.mb(2),{fontSize:p.TV.fontSizeSmall}],input:[p.l0.viewStyle,p.l0.border(),{blockSize:p.TV.space32,"::placeholder":{color:p.TV.foregroundDimmest},"&:hover::placeholder":{color:p.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:p.TV.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[p.l0.rowWithGap(4),p.l0.align.center,p.l0.flex.shrink(0)],results:[p.l0.position.relative,p.l0.colWithGap(8),{flex:"1 1 auto"}],searchWrapper:[p.l0.rowWithGap(4),p.l0.align.center,{flex:"0 1 auto"}],replacementWrapper:[p.l0.ml(24),p.l0.pl(4)],replaceInputWrapper:[p.l0.rowWithGap(4),p.l0.align.center,p.l0.flex.shrink(1)],horizontalLine:[p.l0.mt(2),p.l0.mb(8),p.l0.height(1),p.l0.borderRadius(2),p.l0.width("100%"),p.l0.backgroundColor.backgroundHigher],loadingBar:[p.l0.position.absolute,p.l0.mt(2),p.l0.height(1),p.l0.borderRadius(2),p.l0.width("100%"),p.l0.backgroundColor.accentPrimaryDimmer,{animation:"".concat(FG," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function HG(e){var n=e.updatePane,t=e.query,i=e.setQuery,o=e.isRegex,a=e.setIsRegex,l=e.isCaseSensitive,s=e.setIsCaseSensitive,u=e.isMatchingWholeWords,p=e.setIsMatchingWholeWords,f=e.isCollapsed,h=e.setIsCollapsed,v=e.executeSearch,m=(0,c.useRef)(null),g=(0,c.useCallback)((function(){var e,n;null===(e=m.current)||void 0===e||e.select(),null===(n=m.current)||void 0===n||n.focus()}),[]);return(0,vc.L5)((function(){return{type:"searchReplace",focusSearchInput:g}}),[]),(0,vc.Wk)((function(){return{focus:g}}),[g]),(0,r.BX)(d.G,{css:VG.searchWrapper,children:[(0,r.tZ)(ee.hU,{onClick:function(){return h((function(e){return!e}))},alt:f?"Show replacement options":"Hide replacement options",children:f?(0,r.tZ)(Lu.Z,{}):(0,r.tZ)(vs.Z,{})}),(0,r.tZ)(LR,{"data-nav":"".concat(dG," ").concat(jG),ref:m,autoSize:!0,placeholder:"Search",value:t,css:VG.input,onChange:function(e){i(e),n({initialQuery:e})},onClear:function(){i(""),n({initialQuery:""})},onKeyDown:function(e){"Enter"===e.key&&((0,pd.j)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),v()))}}),(0,r.BX)(d.G,{css:VG.optionsWrapper,children:[(0,r.tZ)(jR.Z,{alt:"case sensitive","data-nav":"".concat(jG," ").concat(NG),icon:(0,r.tZ)(zG.Z,{}),checked:l,onClick:function(){return s((function(e){return!e}))}}),(0,r.tZ)(jR.Z,{alt:"regular expressions","data-nav":"".concat(jG," ").concat(NG),icon:(0,r.tZ)(XG.Z,{}),checked:o,onClick:function(){return a((function(e){return!e}))}}),(0,r.tZ)(jR.Z,{alt:"whole words","data-nav":"".concat(jG," ").concat(NG),icon:(0,r.tZ)(MG.Z,{}),checked:u,onClick:function(){return p((function(e){return!e}))}})]})]})}function YG(e){var n=e.updatePane,t=e.replacement,i=e.setReplacement,o=e.query,a=e.replaceLoading,l=e.search,c=e.includeGlob,s=e.setIncludeGlob,u=e.excludeGlob,p=e.setExcludeGlob,f=e.replace,h=e.results;return(0,r.BX)(d.G,{css:VG.replacementWrapper,children:[(0,r.BX)(d.G,{css:VG.replaceInputWrapper,children:[(0,r.tZ)(LR,{"data-nav":"".concat(dG," ").concat(jG," ").concat(WG),autoSize:!0,placeholder:"Replacement",value:t,css:VG.input,onChange:function(e){i(e),n({initialReplacement:e})},onClear:function(){i(""),n({initialReplacement:""})}}),(0,r.tZ)(d.G,{css:VG.optionsWrapper,children:(0,r.tZ)(MR,{query:o,replacement:t,results:h,disabled:0===o.length,loading:a,replace:f,onReplace:l,buttonProps:{"data-nav":"".concat(jG," ").concat(pG," ").concat(NG)}})})]}),(0,r.BX)(d.G,{css:VG.filesIncludeExcludeWrapper,children:[(0,r.BX)(d.G,{css:VG.inputWithLabel,id:"filesToInclude",children:[(0,r.tZ)(ne.xv,{css:VG.inputLabel,color:"dimmer",multiline:!1,children:"Files to include"}),(0,r.tZ)(LR,{"data-nav":"".concat(dG," ").concat(jG),autoSize:!0,label:"filesToInclude",value:c,css:VG.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){s(e),n({initialIncludeGlob:e})},onClear:function(){s(""),n({initialIncludeGlob:""})}})]}),(0,r.BX)(d.G,{css:VG.inputWithLabel,id:"filesToExclude",children:[(0,r.tZ)(ne.xv,{css:VG.inputLabel,color:"dimmer",multiline:!1,children:"Files to exclude"}),(0,r.tZ)(LR,{"data-nav":"".concat(jG," ").concat(WG),autoSize:!0,label:"filesToExclude",value:u,css:VG.input,onChange:function(e){p(e),n({initialExcludeGlob:e})},onClear:function(){p(""),n({initialExcludeGlob:""})}})]})]})]})}function qG(e){var n=e.isActive,t=e.initialQuery,i=void 0===t?"":t,o=e.initialReplacement,a=void 0===o?"":o,l=e.initialIncludeGlob,s=void 0===l?"":l,p=e.initialExcludeGlob,f=void 0===p?"":p,v=e.performPaneOperation,g=(0,c.useState)(i),Z=g[0],b=g[1],y=(0,c.useState)(a),x=y[0],w=y[1],k=(0,c.useState)(!1),C=k[0],S=k[1],I=(0,c.useState)(!1),T=I[0],E=I[1],R=(0,c.useState)(!1),G=R[0],P=R[1],D=(0,c.useState)(!0),B=D[0],U=D[1],A=(0,c.useState)(f),L=A[0],O=A[1],_=(0,c.useState)(s),X=_[0],z=_[1],M=PG(L),j=PG(X),W=(0,c.useRef)(null),N=function(e){var n=e.query,t=e.isRegex,r=e.isCaseSensitive,i=e.isMatchingWholeWords,o=e.includeGlobs,a=void 0===o?[]:o,l=e.excludeGlobs,s=void 0===l?[]:l,d=(0,re.Z)(),p=d.container,f=d.dotReplit,h=(0,OG.n)(f),v=(0,u.P5)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),m=(0,c.useState)([]),g=m[0],Z=m[1],b=(0,c.useState)(null),y=b[0],x=b[1],w=(0,c.useState)(n.length>0),k=w[0],C=w[1],S=(0,$n.Z)((function(){return(0,We.Z)(s).concat((0,We.Z)(h||[]),(0,We.Z)(Bp.h))}),[s,h]),I=p.getConnectionState(),T=(0,Dp.Z)(),E=(0,c.useMemo)((function(){return(0,_G.Z)({container:p,onError:function(e){return T.current&&x(e)},onUpdate:function(e){return T.current&&Z(e)},onLoadingStateChange:function(e){return T.current&&C(e)},isStreaming:!0,trackLatency:v})}),[]);return(0,c.useEffect)((function(){I===lS.em.CONNECTED&&E({query:n,isRegex:t,isCaseSensitive:r,isMatchingWholeWords:i,includeGlobs:a,excludeGlobs:S})}),[I,E,n,t,r,i,a,S,h]),{loading:k,error:y,data:g,search:function(){return E({query:n,isRegex:t,isCaseSensitive:r,isMatchingWholeWords:i,includeGlobs:a,excludeGlobs:S})}}}({query:Z,isRegex:C,isCaseSensitive:T,isMatchingWholeWords:G,excludeGlobs:M,includeGlobs:j}),F=N.loading,V=N.error,H=N.data,Y=N.search;(0,DR.Z)((function(){""!==Z&&(0,h.j)(h.U3.SEARCH_PANE_USED,{action:"search",isRegex:C,isCaseSensitive:T,hasIncludes:j.length>0,hasExcludes:M.length>0})}),[Z,j,M,C,T],1e3);var q=function(e){var n=e.query,t=e.replacement,r=e.fileList,i=(0,bs.Z)(e,["query","replacement","fileList"]),o=(0,re.Z)().container,a=(0,c.useState)(!1),l=a[0],s=a[1],u=(0,c.useState)(null),d=u[0],p=u[1],f=(0,c.useState)(!1),h=f[0],v=f[1],g=(0,Dp.Z)(),Z=(0,c.useCallback)((0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(a){switch(a.label){case 0:return v(!0),p(null),[4,AG((0,m.Z)({container:o,query:n,replacement:t,fileList:null===r||void 0===r?void 0:r.map((function(e){return e.path}))},i))];case 1:return e=a.sent(),g.current?(e.success||p(e.errorMessage),v(!1),s(e.success),[2,e]):[2,{success:!1,errorOn:"exit",errorMessage:DG.NOT_MOUNTED}]}}))})),[o,n,t,r,i,g]);return{replace:Z,loading:h,error:d,data:l}}({replacement:x,query:Z,isRegex:C,isCaseSensitive:T,isMatchingWholeWords:G,excludeGlobs:M,includeGlobs:j,fileList:V?void 0:H}),K=q.loading,$=q.replace,Q=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v({operation:"replace",pane:{type:"searchReplace",data:(0,m.Z)({initialQuery:Z,initialReplacement:x,initialExcludeGlob:L,initialIncludeGlob:X},e)}})}),[v,Z,x,L,X]);(0,c.useLayoutEffect)((function(){b(i)}),[i]);var J=yG({selector:'[data-nav*="'.concat(dG,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(dG,'"]')),r=e.target.matches("[data-nav*=".concat(uG,"]"));return n&&t&&(e.altKey||r)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),ee=yG({selector:'[data-nav*="'.concat(pG,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(pG,'"]')),r=e.target.matches("[data-nav*=".concat(uG,"]"));return n&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),ne=yG({selector:'[data-nav*="'.concat(NG,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(pG,'"]'))&&"ArrowDown"===e.key)return!1;var t=e.target.matches('[data-nav*="'.concat(NG,'"]'));return n&&t},move:function(e){var n=e.event,t=e.activeIndex,r=e.children,i=n.target.matches('[data-nav*="'.concat(pG,'"]'));return n.preventDefault(),n.stopPropagation(),i?0:0===t&&"ArrowUp"===n.key?-1:r.length-1}}),te=yG({selector:'[data-nav*="'.concat(WG,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(WG,'"]')),r=e.target.matches("[data-nav*=".concat(dG,"]"));return n&&e.altKey&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),ie=yG({selector:'[data-nav*="'.concat(jG,'"]'),isValid:function(e){var n="ArrowLeft"===e.key||"ArrowRight"===e.key,t=e.target.matches('[data-nav*="'.concat(NG,'"]'));return n&&(e.altKey||t)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowLeft"===n.key?t-1:t+1}}),oe=(0,au.l)(J,ee,ne,te,ie);return(0,r.BX)(d.G,{css:VG.self,innerRef:oe,children:[(0,r.tZ)(HG,{isActive:n,query:Z,setQuery:b,updatePane:Q,isRegex:C,isCaseSensitive:T,isMatchingWholeWords:G,setIsRegex:S,setIsCaseSensitive:E,setIsMatchingWholeWords:P,isCollapsed:B,setIsCollapsed:U,executeSearch:Y}),B?null:(0,r.tZ)(YG,{replacement:x,setReplacement:w,updatePane:Q,query:Z,replaceLoading:K,search:Y,includeGlob:X,setIncludeGlob:z,excludeGlob:L,setExcludeGlob:O,replace:$,results:H}),(0,r.BX)(d.G,{css:VG.results,children:[(0,r.tZ)(d.G,{css:VG.horizontalLine}),F?(0,r.tZ)(d.G,{css:VG.loadingBar},Z):null,0===Z.length&&0===H.length?(0,r.tZ)(IG,{icon:(0,r.tZ)(sc.Z,{size:32}),message:"Enter a query to start searching."}):(0,r.tZ)(RG,{isRegex:C,query:Z,replacement:x,include:X,exclude:L,results:H,error:V,paneRef:W,performPaneOperation:v})]})]})}var KG=Ou.Type.Object({type:Ou.Type.Literal("searchReplace"),data:Ou.Type.Optional(Ou.Type.Object({initialQuery:Ou.Type.Optional(Ou.Type.String()),initialReplacement:Ou.Type.Optional(Ou.Type.String()),initialIncludeGlob:Ou.Type.Optional(Ou.Type.String()),initialExcludeGlob:Ou.Type.Optional(Ou.Type.String())}))}),$G={getTitle:function(e){var n,t=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.initialQuery;return t&&t.length>0?"Code Search: ".concat(t):"Code Search"},Icon:function(e){var n=e.size;return(0,r.tZ)(sc.Z,{size:n})},Content:function(e){var n=e.pane,t=e.options;return(0,r.tZ)(qG,(0,oe.Z)((0,m.Z)({},(null===n||void 0===n?void 0:n.data)||{}),{isActive:t.isActive,performPaneOperation:t.performPaneOperation}))},decode:function(e){return Fu.B4.Decode(KG,e)}},QG=t(66600),JG=t(46611),eP=t(81551),nP=c.forwardRef((function(e,n){var t,i,o,a=e.label,s=e.id,u=e.description,d=e.onChange,p=e.fontFamily,f=void 0===p?"sans-serif":p,h=e.fontSize,v=void 0===h?"medium":h,g=e.fontWeight,Z=void 0===g?"regular":g,b=e.foreground,y=void 0===b?1:b,x=e.placeholder,w=void 0===x?"":x,k=e.validationResults,C=e.value,S=(0,bs.Z)(e,["label","id","description","onChange","fontFamily","fontSize","fontWeight","foreground","placeholder","validationResults","value"]),I=(0,hE.Z)().ref,T=(0,Rn.U)(),E=s||T("input"),R=u?T("input-description"):void 0,G=(0,l.Z)(c.useState(!1),2),P=G[0],D=G[1];(null===k||void 0===k?void 0:k.some((function(e){return"loading"===e.state})))?t="loading":(null===k||void 0===k?void 0:k.some((function(e){return"error"===e.state})))?(t="error",o="var(--accent-negative-default)",i=(0,r.tZ)(tm.Z,{})):(null===k||void 0===k?void 0:k.every((function(e){return"success"===e.state})))?(t="success",o="var(--accent-positive-default)",i=(0,r.tZ)(Sn.Z,{})):t="default";var B=Pp.P3[t],U=(S.className?S.className+" ":"")+B;return(0,r.BX)("div",{className:Fe().dynamic([["48c1334c65fd9e51",[o,eP.Z.fontSize[v],eP.Z.fontFamily[f],eP.Z.fontWeight[Z],eP.Z.foreground[y],eP.Z.lineHeight[v]]]])+" container",children:[a?(0,r.BX)(r.HY,{children:[S.required?(0,r.BX)(Ue.Ug,{spacing:"2px",children:[(0,r.tZ)(Be.Z,{tag:"label",foreground:P?1:2,size:"large"===v?"small":"xsmall",htmlFor:E,children:a}),(0,r.tZ)("span",{className:Fe().dynamic([["48c1334c65fd9e51",[o,eP.Z.fontSize[v],eP.Z.fontFamily[f],eP.Z.fontWeight[Z],eP.Z.foreground[y],eP.Z.lineHeight[v]]]])+" required",children:"*"})]}):(0,r.tZ)(Be.Z,{tag:"label",foreground:P?1:2,size:"large"===v?"small":"xsmall",htmlFor:E,children:a}),(0,r.tZ)(Gp.Z,{height:"4px"})]}):null,(0,r.BX)("div",{className:Fe().dynamic([["48c1334c65fd9e51",[o,eP.Z.fontSize[v],eP.Z.fontFamily[f],eP.Z.fontWeight[Z],eP.Z.foreground[y],eP.Z.lineHeight[v]]]])+" textarea-container",children:[(0,r.tZ)("textarea",(0,oe.Z)((0,m.Z)({id:E,placeholder:w,value:C,onChange:d,"aria-busy":"loading"===t,"aria-invalid":"error"===t,"aria-describedby":R},S),{ref:function(e){I(e),n&&("function"!==typeof n?n.current=e:n(e))},onFocus:function(e){D(!0),S.onFocus&&S.onFocus(e)},onBlur:function(e){D(!1),S.onBlur&&S.onBlur(e)},className:Fe().dynamic([["48c1334c65fd9e51",[o,eP.Z.fontSize[v],eP.Z.fontFamily[f],eP.Z.fontWeight[Z],eP.Z.foreground[y],eP.Z.lineHeight[v]]]])+" "+(U||"")})),i?(0,r.tZ)("div",{onMouseEnter:function(){return D(!0)},onMouseLeave:function(){return D(!1)},className:Fe().dynamic([["48c1334c65fd9e51",[o,eP.Z.fontSize[v],eP.Z.fontFamily[f],eP.Z.fontWeight[Z],eP.Z.foreground[y],eP.Z.lineHeight[v]]]])+" icon-container right",children:i}):null]}),u?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gp.Z,{height:"4px"}),(0,r.tZ)(Be.Z,{id:R,tag:"span",foreground:3,size:v,children:u})]}):null,k&&P?(0,r.tZ)(Pp.QE,{validationResults:k}):null,(0,r.tZ)(Fe(),{id:"48c1334c65fd9e51",dynamic:[o,eP.Z.fontSize[v],eP.Z.fontFamily[f],eP.Z.fontWeight[Z],eP.Z.foreground[y],eP.Z.lineHeight[v]],children:".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.textarea-container.__jsx-style-dynamic-selector{position:relative}.required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:var(--space-8);right:var(--space-8);background-color:var(--background-default);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;padding:var(--space-4)}.icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(o,"}textarea.__jsx-style-dynamic-selector{resize:none;font-size:").concat(eP.Z.fontSize[v],";font-family:").concat(eP.Z.fontFamily[f],";font-weight:").concat(eP.Z.fontWeight[Z],";color:").concat(eP.Z.foreground[y],";line-height:").concat(eP.Z.lineHeight[v],";background-color:transparent;padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);outline:none;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;transition:.1s;line-height:1.4}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-default)}textarea.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer)}textarea.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default)}textarea.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}")})]})})),tP=nP,rP=t(5683),iP=t(83451),oP=t(45347);function aP(e){switch(e){case v.Fl.Match:return"The test passes if the expected output is in the actual output.";case v.Fl.Exact:return"The test passes if the expected output is equal to the actual output.";case v.Fl.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case v.Fl.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var lP=function(e){(0,rP.Z)(t,e);var n=(0,oP.Z)(t);function t(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o;return(0,Pw.Z)(this,t),(o=n.call.apply(n,[this].concat((0,We.Z)(r)))).name=o.constructor.name,o}return t}((0,iP.Z)(Error));function cP(e){var n={id:e.id},t={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":n.output={compatibility:{expected:e.output}};break;case"match":n.output={match:{expected:e.output,ignoreTrailingWhitespace:!0}};break;case"exact":n.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":n.output={regex:{expression:e.output}}}return{id:e.id,instructions:[t,n]}}function sP(e){var n=e.args,t=e.env,r=n.indexOf("--ps1"),i=n.indexOf("--ps2"),o=n.indexOf("-i");return-1!==r&&null!=n[r+1]&&(n[r+1]=""),-1!==i&&null!=n[i+1]&&(n[i+1]=""),-1!==o&&n.splice(o,1),n.includes("-q")||n.unshift(n.shift(),"-q"),t.PS1="",t.PS2="",{args:n,env:t}}function uP(e){return dP.apply(this,arguments)}function dP(){return dP=(0,Hn.Z)((function(e){var n,t,r,i,o,a,l,c,s,u;return(0,Yn.__generator)(this,(function(d){switch(d.label){case 0:return[4,e.getRunConfig()];case 1:if(!(t=d.sent()))throw new lP("unable to fetch dotreplit run config");if(t.interp){if("stderred"===(null===(i=null===(r=t.interp)||void 0===r?void 0:r.command)||void 0===i?void 0:i.args[0])&&("--"===i.args[1]?i.args.splice(0,2):i.args.shift()),!i||i.args.length<1)throw o=new lP("received interp without command"),sf.Tb(o,(function(e){return e.setExtra("runInfo",u)})),o;return i.args[0].match(/(^|\/)prybar/i)?[2,{execCommand:sP(i)}]:[2,{execCommand:{args:i.args,env:i.env}}]}if(!(null===(n=t.run)||void 0===n?void 0:n.run))throw a=new lP("Bad repl run config received"),sf.Tb(a,(function(e){return e.setExtra("runConfig",t)})),a;return l=t.run,c=l.run,s=l.compile,c.env.PS1="",c.env.PS2="",u={execCommand:{args:c.args,env:c.env}},s&&(s.env.PS1="",s.env.PS2="",u.buildCommand={args:s.args,env:s.env}),[2,u]}}))})),dP.apply(this,arguments)}var pP,fP=function(e){var n=e.test,t=e.onSubmit,i=e.onCancel,o=e.isOpen,a=e.onRequestClose,s=(0,l.Z)(c.useState({}),2),u=s[0],d=s[1],p=function(e){return{name:(null===e||void 0===e?void 0:e.name)||"",type:(null===e||void 0===e?void 0:e.type)||v.Fl.Match,input:(null===e||void 0===e?void 0:e.input)||"",output:(null===e||void 0===e?void 0:e.output)||""}},h=(0,qe.Z)().showError,g=(0,l.Z)(c.useState(p(n)),2),Z=g[0],b=g[1];c.useEffect((function(){b(p(n)),d({})}),[n,b]);var y=function(e,n){d((function(t){return(0,oe.Z)((0,m.Z)({},t),(0,f.Z)({},e,n?void 0:[{message:e+" expected but not provided.",state:"error"}]))}))};return(0,r.tZ)(He.u,{isOpen:o,onRequestClose:a,children:(0,r.BX)("div",{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-tests-view",children:[(0,r.tZ)("div",{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]])+" header-row",children:(0,r.tZ)(De.Z,{level:4,align:"center",children:n?"Edit test: ":"Create test"})}),(0,r.tZ)("div",{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(Pp.ZP,{label:"Test name",placeholder:"The name of the test",value:(null===Z||void 0===Z?void 0:Z.name)||"",validationResults:u.name,onChange:function(e){var n;e.persist(),b((function(n){var t;return(0,oe.Z)((0,m.Z)({},n),{name:(null===(t=e.target)||void 0===t?void 0:t.value)||""})})),y("name",null===(n=e.target)||void 0===n?void 0:n.value)},maxLength:20})}),(0,r.tZ)("div",{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(tP,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:Z.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),b((function(n){return(0,oe.Z)((0,m.Z)({},n),{input:e.target.value})}))}})}),(0,r.tZ)("div",{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(tP,{style:{height:"150px"},label:"Expected output",validationResults:u.output,placeholder:"The expected output for the test",value:Z.output,fontFamily:"monospace",translate:"no",onChange:function(e){var n;e.persist(),b((function(n){return(0,oe.Z)((0,m.Z)({},n),{output:e.target.value})})),y("output",null===(n=e.target)||void 0===n?void 0:n.value)}})}),(0,r.tZ)("div",{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)("div",{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-container",children:(0,r.tZ)(JG.Z,{items:[v.Fl.Match,v.Fl.Exact,v.Fl.Regex,v.Fl.Compatibility],renderItemChildComponent:function(e){return(0,r.BX)("a",{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]]),children:[e,(0,r.tZ)("br",{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]])}),(0,r.tZ)(Be.Z,{size:"xsmall",children:aP(e)})]})},renderAnchorComponent:function(e){var n=e.innerRef,t=(0,bs.Z)(e,["innerRef"]);return(0,r.BX)("a",(0,oe.Z)((0,m.Z)({ref:n},t),{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-view dropdown-anchor",children:[(0,r.tZ)(Be.Z,{children:Z.type}),(0,r.tZ)(Be.Z,{children:(0,r.tZ)(Ys.Z,{})})]}))},onClick:function(e){b((function(n){return(0,oe.Z)((0,m.Z)({},n),{type:e})}))}})})}),(0,r.BX)("div",{className:Fe().dynamic([["550654d38c65c62e",[""===Z.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row align-end",children:[(0,r.tZ)(Le.Z,{onClick:i,children:"Cancel"}),(0,r.tZ)(Le.Z,{color:"primary",filled:!0,onClick:function(){if(!Z.name||!Z.output)return h("Test name and expected output must be provided."),Z.name||y("name"),void(Z.output||y("output"));Z.type?(t({testId:null===n||void 0===n?void 0:n.id,name:Z.name,input:Z.input||"",type:Z.type,output:Z.output}),b(p(void 0))):h("A test type must be provided")},children:"Save"})]}),(0,r.tZ)(Fe(),{id:"550654d38c65c62e",dynamic:[""===Z.type?"--foreground-dimmer":"--foreground-default"],children:".dropdown-container.__jsx-style-dynamic-selector{border:1px solid var(--outline-dimmest);width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.dropdown-anchor.__jsx-style-dynamic-selector{padding:var(--space-8)}.dropdown-container.__jsx-style-dynamic-selector .anchor{z-index:1}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;text-align:right}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view .text{color:var(".concat(""===Z.type?"--foreground-dimmer":"--foreground-default",")}.manage-tests-view.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:var(--space-16)}.manage-test-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-top:var(--space-16)}.align-end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.manage-test-row.__jsx-style-dynamic-selector>button{margin-left:var(--space-8)}.manage-test-row-section.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:0 var(--space-16);width:100%}")})]})})},hP=function(e){var n=e.test,t=e.onEdit,i=e.onDelete,o=e.onView,a=e.isTeacherView,l=e.status,c=e.isRunning,s=e.onShowFailed,u=e.disableButtons,d="";return l?d=l:c&&(d="Running"),(0,r.BX)("div",{onClick:function(){return o()},className:"jsx-d0055d2df6a917c5 test",children:[(0,r.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,r.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,r.tZ)(Be.Z,{size:"large",children:n.name})}),a?(0,r.tZ)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-d0055d2df6a917c5 test-row",children:(0,r.BX)(r.HY,{children:[(0,r.tZ)(Le.Z,{color:"primary",onClick:t,Icon:Ad.Z,disabled:u}),(0,r.tZ)(Gp.Z,{width:"var(--space-4)"}),(0,r.tZ)(Le.Z,{onClick:i,color:"negative",Icon:Xd.Z,disabled:u})]})}):null]}),l||c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gp.Z,{height:2}),(0,r.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,r.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,r.tZ)(Be.Z,{className:Tp()([{"status-passed":"Passed"===l},{"status-failed":"Failed"===l}]),children:d})}),(0,r.tZ)(Le.Z,{onClick:function(e){return e.stopPropagation(),s(e)},disabled:c,children:"Results"})]})]}):null,(0,r.tZ)(Fe(),{id:"d0055d2df6a917c5",children:".test.jsx-d0055d2df6a917c5{background-color:var(--background-higher);margin-top:var(--space-8);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);cursor:pointer}.test-row.jsx-d0055d2df6a917c5 .status-passed{color:var(--accent-positive-default)}.test-row.jsx-d0055d2df6a917c5 .status-failed{color:var(--accent-negative-default)}.test-text.jsx-d0055d2df6a917c5{width:100%;padding:var(--space-4)0;padding-right:var(--space-8);word-break:break-all}.test.jsx-d0055d2df6a917c5:hover{background-color:var(--background-higher)}.test-row.jsx-d0055d2df6a917c5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}"})]})},vP=function(e){var n=e.text;if(!n)return null;var t=n.split("\n").map((function(e,n){return[e,"".concat(n+1)]}));return""===t[t.length-1][0]&&t.pop(),(0,r.BX)(Ue.Ug,{children:[(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:t.map((function(e){var n=(0,l.Z)(e,2);n[0];return n[1]})).join("\n")})}),(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:n})}),(0,r.tZ)(Fe(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},mP=t(81362),gP=function(e){var n=function(e){var n,t,i=null!==(n=o[e])&&void 0!==n?n:"",c=null!==(t=a[e])&&void 0!==t?t:"",s=0;l.push((0,mP.Hg)(c,i).flatMap((function(e){var n=e.fromA,t=e.fromB,r=e.toA,o=e.toB,a=[];return n>s&&a.push({chars:c.slice(s,n)}),t!==o&&a.push({chars:i.slice(t,o),style:{backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}}),n!==r&&a.push({chars:c.slice(n,r),style:{backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}}),s=r,a})).map((function(e,n){var t=e.chars,i=e.style;return(0,r.tZ)("span",{style:i,children:t},n)})))},t=e.expected,i=e.actual;if(!t||!i)return null;for(var o=i.split("\n"),a=t.split("\n"),l=[],s=Math.max(a.length,o.length),u=0;u<s;u++)n(u);return(0,r.BX)(Ue.Ug,{children:[(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:Array.from({length:s},(function(e,n){return n+1})).join("\n")})}),(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,r.tZ)("pre",{"data-testid":"TestTextDiffText",className:"jsx-6ac664c130469a42",children:l.map((function(e,n){return(0,r.tZ)(c.Fragment,{children:e},n)}))})}),(0,r.tZ)(Fe(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},ZP=function(e){var n=e.test,t=e.actualOutput,i=e.isOpen,o=e.isResults,a=e.onRequestClose,l=e.didFail,c=e.error,s=n?aP(n.type):"",u=null===t||void 0===t?void 0:t.split("\n"),d=null===n||void 0===n?void 0:n.output.split("\n"),p=null===n||void 0===n?void 0:n.output;return l=null!==l&&void 0!==l?l:"Failed"===(null===n||void 0===n?void 0:n.status),(0,r.BX)(He.u,{onRequestClose:a,isOpen:i&&void 0!==n,children:[(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-info",children:[(0,r.BX)(Ue.gC,{align:"center",spacing:1,children:[(0,r.BX)(De.Z,{level:4,children:[o?"Test results: ":null,null===n||void 0===n?void 0:n.name]}),(0,r.BX)(Ue.Ug,{spacing:1,children:[(0,r.tZ)("div",{role:"tooltip","data-microtip-position":"top","aria-label":s,className:"jsx-c7ed87540f6ec33d test-type",children:(0,r.tZ)(Be.Z,{align:"center",size:"small",children:null===n||void 0===n?void 0:n.type})}),o&&(null===n||void 0===n?void 0:n.status)?(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d "+"test-status ".concat(null===n||void 0===n?void 0:n.status),children:(0,r.tZ)(Be.Z,{align:"center",size:"small",children:null===n||void 0===n?void 0:n.status})}):null]})]}),(0,r.tZ)(Gp.Z,{height:6}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:o?(0,r.BX)(Ue.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(Be.Z,{size:"medium",children:"Expected output"}),(0,r.tZ)(Be.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,r.tZ)(Be.Z,{size:"medium",children:"Output"})}),(0,r.tZ)(Gp.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(vP,{text:null===n||void 0===n?void 0:n.output})})]})}),(0,r.tZ)(Gp.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:o?(0,r.BX)(Ue.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(Be.Z,{size:"medium",children:"Actual output"}),(0,r.tZ)(Be.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,r.tZ)(Be.Z,{size:"medium",children:"Input"})}),(0,r.tZ)(Gp.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(vP,{text:o?t:null===n||void 0===n?void 0:n.input})})]})}),o&&l?(0,r.tZ)(r.HY,{children:c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gp.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,r.tZ)(Be.Z,{size:"medium",children:"Error(s)"})}),(0,r.tZ)(Gp.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(vP,{text:c.stderr||c.message})})]})})]}):(null===n||void 0===n?void 0:n.type)!==v.Fl.Regex&&d&&u&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gp.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,r.BX)(Ue.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(Be.Z,{size:"medium",children:"Difference"}),(0,r.tZ)(Be.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]})}),(0,r.tZ)(Gp.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(gP,{expected:p,actual:t})})]})})]})}):null]}),(0,r.tZ)(Fe(),{id:"c7ed87540f6ec33d",children:".test-info.jsx-c7ed87540f6ec33d{padding:var(--space-24);display:relative}.test-io-line-spacing.jsx-c7ed87540f6ec33d{width:var(--space-8);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.test-io-row.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.test-io-line-number.jsx-c7ed87540f6ec33d{display:inline-block;min-width:1.5em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-line.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;font-family:var(--font-family-code)}.test-io-line-content.jsx-c7ed87540f6ec33d{display:inline-block}.test-io-label.jsx-c7ed87540f6ec33d{padding-bottom:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-label.jsx-c7ed87540f6ec33d .text{color:var(--foreground-dimmer)}.test-io-section.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;width:100%}.test-io-box.jsx-c7ed87540f6ec33d{height:100%;border:1px solid var(--outline-dimmest);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:auto}.test-io-box.jsx-c7ed87540f6ec33d .text{white-space:nowrap}.test-type.jsx-c7ed87540f6ec33d,.test-status.jsx-c7ed87540f6ec33d{background-color:var(--background-highest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:inline-block;spacing:1;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-status.jsx-c7ed87540f6ec33d .text{color:var(--white)}.test-status.Passed.jsx-c7ed87540f6ec33d{background-color:var(--accent-positive-default)}.test-status.Failed.jsx-c7ed87540f6ec33d{background-color:var(--accent-negative-default)}.help.jsx-c7ed87540f6ec33d{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})},bP=t(80724),yP=t(57843),xP=function(){var e,n,t,i,o,a,s,u,d=(0,re.Z)(),p=d.iotester,h=d.dotReplit,g=d.container,Z=(0,qe.Z)(),b=Z.showError,y=Z.showConfirm,x=(0,l.Z)(c.useState([]),2),w=x[0],k=x[1],C=(0,l.Z)(c.useState(),2),S=C[0],I=C[1],T=(0,l.Z)(c.useState(g.getConnectionState()),2),E=T[0],R=T[1],G=(0,l.Z)(c.useState(p.state),2),P=G[0],D=G[1],B=(0,l.Z)(c.useState(),2),U=B[0],A=B[1],L=(0,yP.x)();c.useEffect((function(){return g.onConnectionStateChanged(R)}),[R,g]);var O=(0,Ie.Z)(),_=(0,Cn.CH)({variables:{replId:O}}),X="Repl"===(null===(e=_.data)||void 0===e||null===(n=e.repl)||void 0===n?void 0:n.__typename)?_.data.repl:null,z="Team"===(null===X||void 0===X||null===(t=X.owner)||void 0===t?void 0:t.__typename)&&X.owner.id||null,M=(0,l.Z)((0,Cn.vk)({onCompleted:function(e){e&&e.saveIOTestResults&&b(e.saveIOTestResults.message)}}),1)[0];c.useEffect((function(){var e=[p.onStateChanged((function(e){D(e),z&&e===bP.Z.Idle&&k((function(e){var n;return M({variables:{replId:O,results:Object.values(e).map((function(e){var t;return{testId:e.testId,status:e.status,output:(null===(t=e.error)||void 0===t?void 0:t.stderr)?(null!==(n=e.output)&&void 0!==n?n:"")+e.error:e.output}})),teamId:z}}).catch((function(n){sf.Tb(n,(function(n){return n.setExtras({results:e,payload:U})}))})),e}))})),p.onError((function(e){b(e.message)})),p.onTestResult((function(e){k((function(n){var t=(0,oe.Z)((0,m.Z)({},n[e.testId]),{testId:e.testId,status:"passed"===e.body?v.kQ.Passed:v.kQ.Failed});return"error"===e.body&&(t.error=e.error),(0,oe.Z)((0,m.Z)({},n),(0,f.Z)({},e.testId,t))}))})),p.onInstructionResult((function(e){k((function(n){var t,r,i=Math.abs(e.instructionId),o="";switch(e.body){case"passed":var a;o+=null!==(a=e.passed.output)&&void 0!==a?a:"";break;case"failed":var l;o+=null!==(l=e.failed.output)&&void 0!==l?l:"";break;case"timeout":var c;o+=null!==(c=e.timeout.output)&&void 0!==c?c:"";break;case"error":o+=e.error.message}return(0,oe.Z)((0,m.Z)({},n),(0,f.Z)({},i,(0,oe.Z)((0,m.Z)({},n[i]),{testId:i,output:(null!==(r=null===(t=w[i])||void 0===t?void 0:t.output)&&void 0!==r?r:"")+o})))}))}))];return function(){return e.forEach((function(e){return e()}))}}),[w,b,D,p,O,z,U,M]),c.useEffect((function(){var e=function(e){(0,uS.Z)(e,Error)&&b(e.message),sf.Tb(e)};return uP(h).then(I).catch(e),h.watch((function(){return uP(h).then(I).catch(e)}))}),[h,I,b]);var j=null===X||void 0===X?void 0:X.ioTests,W=(0,l.Z)((0,Cn.Ne)({onError:function(e){return b(e.message)},onCompleted:function(e){var n;"UserError"===(null===(n=e.deleteTemplateTest)||void 0===n?void 0:n.__typename)?b(e.deleteTemplateTest.message):(y("Test deleted!"),_.refetch())}}),2),N=W[0],F=W[1],V=(0,l.Z)((0,Cn.AA)({onError:function(e){return b(e.message)},onCompleted:function(e){var n;"UserError"===(null===(n=e.updateTemplateTest)||void 0===n?void 0:n.__typename)?b(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(y("Test updated!"),L.writeFragment({fragment:Cn.Gg,data:e.updateTemplateTest}))}}),2),H=V[0],Y=V[1],q=(0,l.Z)((0,Cn.pV)({onError:function(e){return b(e.message)},onCompleted:function(e){var n;"UserError"===(null===(n=e.createTemplateTest)||void 0===n?void 0:n.__typename)?b(e.createTemplateTest.message):(y("Test created!"),_.refetch())}}),2),K=q[0],$=q[1],Q=_.loading||F.called&&F.loading||Y.called&&Y.loading||$.called&&$.loading;c.useEffect((function(){Q||A(S&&j&&j.length>0?{runInfo:S,tests:j.map(cP)}:void 0)}),[j,S,A,Q]);var J=(0,l.Z)(c.useState(!1),2),ee=J[0],ne=J[1],te=(0,l.Z)(c.useState(!1),2),ie=te[0],ae=te[1],le=(0,l.Z)(c.useState(!1),2),ce=le[0],ue=le[1],de=(0,l.Z)(c.useState(),2),pe=de[0],fe=de[1],he="undefined"!==typeof pe&&"Repl"===(null===(i=_.data)||void 0===i?void 0:i.repl.__typename)&&_.data.repl.ioTests[pe]||void 0,ve="Repl"===(null===(o=_.data)||void 0===o?void 0:o.repl.__typename)&&_.data.repl.isProject;if(_.error)return(0,r.BX)("div",{className:"jsx-fb1466c53ace89ca wrapper",children:[(0,r.tZ)(Be.Z,{align:"center",children:"Unable to fetch tests"}),(0,r.tZ)(Fe(),{id:"fb1466c53ace89ca",children:".wrapper.jsx-fb1466c53ace89ca{padding:var(--deprecated-spacing-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]});var me=function(e){var n;if(void 0!==(null===(n=w[e])||void 0===n?void 0:n.status))return w[e].status===v.kQ.Passed?"Passed":"Failed"};return(0,r.BX)("div",{className:"jsx-69bed4444090144f tests-panel",children:[(0,r.tZ)("div",{className:"jsx-69bed4444090144f tests-header",children:(0,r.tZ)(De.Z,{level:4,children:"Input/Output Tests"})}),_.loading?(0,r.tZ)("div",{className:"jsx-69bed4444090144f spinner",children:(0,r.tZ)(se.Z,{})}):(0,r.BX)("div",{className:"jsx-69bed4444090144f tests",children:[(0,r.BX)("div",{className:"jsx-69bed4444090144f button-bar",children:[ve?(0,r.tZ)(Le.Z,{color:"green",Icon:pc.Z,className:"create-test-button",disabled:Q||P!==bP.Z.Idle,onClick:function(){fe(void 0),ne(!0)},children:"Create test"}):null,!ve&&j&&0===j.length?(0,r.tZ)(Be.Z,{children:"This project has no tests "}):(0,r.tZ)(Le.Z,{color:"positive",Icon:DZ.Z,onClick:function(){var e;if(!U||"Repl"!==(null===X||void 0===X?void 0:X.__typename)||"Team"!==(null===(e=X.owner)||void 0===e?void 0:e.__typename)||p.state!==bP.Z.Idle){var n=new Error("no tests or run info");throw sf.Tb(n,(function(e){return e.setExtra("payload",U)})),n}k({}),p.run(U).catch((function(e){sf.Tb(e,(function(e){return e.setExtra("payload",U)})),b(e.message)}))},disabled:Q||P!==bP.Z.Idle||!U||E!==Aw.em.CONNECTED,children:"Run tests"})]}),null===j||void 0===j?void 0:j.map((function(e,n){return(0,r.tZ)(hP,{test:e,onEdit:function(){fe(n),ne(!0)},onDelete:function(){N({variables:{testId:e.id}})},onView:function(){fe(n),ae(!0),ue(!1)},onShowFailed:function(){fe(n),ae(!0),ue(!0)},isRunning:P!==bP.Z.Idle&&void 0!==w[e.id]&&void 0===w[e.id].status,isTeacherView:ve,status:me(e.id),disableButtons:Q||P!==bP.Z.Idle},e.id)})),(0,r.tZ)(fP,{test:he,isOpen:ee,readOnly:!ve,onRequestClose:function(){ne(!1),fe(void 0)},onCancel:function(){ne(!1),fe(void 0)},onSubmit:function(e){var n,t,r,i;void 0!==e.testId?(H({variables:{input:e}}),fe(void 0)):"Repl"===(null===(n=_.data)||void 0===n||null===(t=n.repl)||void 0===t?void 0:t.__typename)&&(null===(r=_.data)||void 0===r||null===(i=r.repl)||void 0===i?void 0:i.template)&&K({variables:{input:(0,oe.Z)((0,m.Z)({},e),{templateId:_.data.repl.template.id})}}),ne(!1)}}),(0,r.tZ)(ZP,{test:he,isOpen:ie,actualOutput:"undefined"!==typeof he?null===(a=w[he.id])||void 0===a?void 0:a.output:void 0,error:he&&(null===(s=w[he.id])||void 0===s?void 0:s.error),didFail:he&&(null===(u=w[he.id])||void 0===u?void 0:u.status)===v.kQ.Failed,isResults:ce,onRequestClose:function(){ae(!1),fe(void 0)}})]}),(0,r.tZ)(Fe(),{id:"69bed4444090144f",children:".flex-grow.jsx-69bed4444090144f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.spacer-1.jsx-69bed4444090144f{padding:var(--space-4)}.tests-header.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;padding:var(--space-4)0 var(--space-8)0;margin-bottom:var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.button-bar.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.button-bar.jsx-69bed4444090144f>button{margin-right:var(--space-8);margin-bottom:var(--space-8)}.spinner.jsx-69bed4444090144f{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tests-panel.jsx-69bed4444090144f{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto}.section.jsx-69bed4444090144f{height:-webkit-calc(100% - 50px);height:-moz-calc(100% - 50px);height:calc(100% - 50px)}"})]})},wP=t(35692);function kP(e){var n=(0,l.Z)(c.useState(null),2),t=n[0],i=n[1],o=c.useRef(pP.None),a=(0,Ie.Z)(),s=(0,wP.Z)(),u=s.language,d=s.isLoading,p=(0,Cn.CH)({variables:{replId:a}}),f=p.loading;return c.useEffect((function(){var e,n,t=null===(e=p.data)||void 0===e?void 0:e.repl;if("Repl"===(null===t||void 0===t?void 0:t.__typename)){var r=t.unitTests,a=t.ioTests,l=pP.Choose;l=a.length>0?pP.IO:(null===r||void 0===r?void 0:r.tests)&&(null===(n=r.tests)||void 0===n?void 0:n.length)>0||(null===r||void 0===r?void 0:r.meta)?pP.Unit:t.currentUserPermissions.writeTests?o.current!==pP.None?o.current:pP.Choose:pP.None,i(l)}}),[p.data]),f||d?(0,r.BX)("div",{className:"jsx-1652fb32f8a812d3",children:[(0,r.tZ)(se.Z,{size:32}),(0,r.tZ)(Fe(),{id:"1652fb32f8a812d3",children:"div.jsx-1652fb32f8a812d3{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}):(0,r.BX)("div",{className:"jsx-ba2c7540ad19d138 testing-controller",children:[t===pP.None&&(0,r.tZ)("div",{className:"jsx-ba2c7540ad19d138 empty",children:(0,r.tZ)(Be.Z,{children:"No tests found"})}),t===pP.Choose&&(0,r.BX)(Ue.gC,{align:"center",spacing:2,children:[(0,r.tZ)(De.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,r.BX)("div",{onClick:function(){i(pP.Unit),o.current=pP.Unit},className:"jsx-ba2c7540ad19d138 "+(Tp()("panel",{"is-disabled":!u})||""),children:[(0,r.tZ)(De.Z,{level:4,children:"Unit tests"}),(0,r.tZ)(Be.Z,{align:"center",children:u?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,r.tZ)("div",{onClick:function(){i(pP.IO),o.current=pP.IO},className:"jsx-ba2c7540ad19d138 panel",children:(0,r.BX)(Ue.gC,{spacing:1,align:"center",children:[(0,r.tZ)(De.Z,{level:4,children:"Input output tests"}),(0,r.tZ)(Be.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),t===pP.IO&&(0,r.tZ)(xP,{}),t===pP.Unit&&(0,r.tZ)(QG.Z,{onBack:function(){return i(pP.Choose)},getRunnerOutput:e.getRunnerOutput}),(0,r.tZ)(Fe(),{id:"ba2c7540ad19d138",children:".empty.jsx-ba2c7540ad19d138{padding:var(--space-16);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.testing-controller.jsx-ba2c7540ad19d138{overflow-y:auto;padding:var(--space-8);height:100%;width:100%;background-color:var(--background-default);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1)}.panel.jsx-ba2c7540ad19d138{width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--background-higher);max-width:200px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding:var(--space-8)}.panel.jsx-ba2c7540ad19d138:hover{background-color:var(--background-root)}.panel.is-disabled.jsx-ba2c7540ad19d138{opacity:.5;pointer-events:none}"})]})}!function(e){e[e.None=0]="None",e[e.Choose=1]="Choose",e[e.Unit=2]="Unit",e[e.IO=3]="IO"}(pP||(pP={}));var CP=Ou.Type.Object({type:Ou.Type.Literal("autograder")}),SP={Content:function(e){var n=e.options,t=function(){var e=i().find((function(e){var n=(0,l.Z)(e,2);n[0];return"runnerOutput"===n[1].type}));if(e)return e[0]},i=(0,Ai.nC)(),o=(0,vc.dr)();return(0,r.tZ)(kP,{getRunnerOutput:function(){var e=t();if(e||n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=t()){var r=o(e);if("runnerOutput"===(null===r||void 0===r?void 0:r.type))return r}}})},Icon:function(e){var n=e.size;return(0,r.tZ)(Sn.Z,{size:n})},getTitle:function(){return"Tests"},decode:function(e){return Fu.B4.Decode(CP,e)}};function IP(){var e=(0,g.Z)(["\n  fragment EducationPaneRepl on Repl {\n    id\n    title\n    url\n    timeCreated\n    slug\n  }\n"]);return IP=function(){return e},e}function TP(){var e=(0,g.Z)(["\n  fragment EducationPaneTemplate on ReplTemplate {\n    id\n    dueDate\n    repl {\n      id\n      ...EducationPaneRepl\n    }\n  }\n  ","\n"]);return TP=function(){return e},e}function EP(){var e=(0,g.Z)(["\n  fragment EducationPaneUser on User {\n    id\n    username\n    firstName\n    lastName\n    fullName\n    image\n  }\n"]);return EP=function(){return e},e}function RP(){var e=(0,g.Z)(["\n  fragment EducationPaneReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...EducationPaneUser\n    }\n    repl {\n      id\n      ...EducationPaneRepl\n    }\n    isGroupSubmission\n    submissionGroup {\n      users {\n        id\n        ...EducationPaneUser\n      }\n    }\n  }\n  ","\n  ","\n"]);return RP=function(){return e},e}function GP(){var e=(0,g.Z)(["\n  fragment EducationPaneTemplateWithSubmissions on ReplTemplate {\n    id\n    ...EducationPaneTemplate\n    submissions {\n      id\n      ...EducationPaneReplSubmission\n    }\n  }\n  ","\n  ","\n"]);return GP=function(){return e},e}function PP(){var e=(0,g.Z)(['\n  fragment EducationPaneTeam on Team {\n    id\n    templates {\n      id\n      ...EducationPaneTemplate\n    }\n    username\n    displayName\n    image\n    students: members(permissions: "member") {\n      id\n      permissions\n      nickname\n      user {\n        id\n        ...EducationPaneUser\n      }\n    }\n  }\n  ',"\n  ","\n"]);return PP=function(){return e},e}function DP(){var e=(0,g.Z)(["\n  fragment EducationPaneReplAttachment on ReplAttachment {\n    id\n    fileName\n    mimeType\n    contents\n    timeCreated\n    timeUpdated\n  }\n"]);return DP=function(){return e},e}function BP(){var e=(0,g.Z)(["\n  query EducationPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        ...EducationPaneRepl\n        owner {\n          ... on Team {\n            id\n            ...EducationPaneTeam\n          }\n        }\n        template {\n          id\n          ...EducationPaneTemplateWithSubmissions\n        }\n        submission {\n          id\n          ...EducationPaneReplSubmission\n        }\n        attachments {\n          id\n          ...EducationPaneReplAttachment\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return BP=function(){return e},e}function UP(){var e=(0,g.Z)(["\n  mutation EducationPaneUploadReplAttachment(\n    $input: UploadReplAttachmentInput!\n  ) {\n    uploadReplAttachment(input: $input) {\n      ... on Repl {\n        id\n        attachments {\n          id\n          ...EducationPaneReplAttachment\n        }\n      }\n    }\n  }\n  ","\n"]);return UP=function(){return e},e}function AP(){var e=(0,g.Z)(["\n  mutation MarkSubmissionReviewed($replId: String!, $status: Boolean!) {\n    reviewRepl(replId: $replId, status: $status) {\n      ... on UserError {\n        message\n      }\n      ... on Repl {\n        id\n        submission {\n          id\n          timeLastReviewed\n        }\n      }\n    }\n  }\n"]);return AP=function(){return e},e}function LP(){var e=(0,g.Z)(["\n  mutation UnsubmitSubmission($replId: String!) {\n    unsubmitRepl(replId: $replId) {\n      ... on UserError {\n        message\n      }\n      ... on Repl {\n        id\n        submission {\n          id\n          timeSubmitted\n          timeLastReviewed\n        }\n      }\n    }\n  }\n"]);return LP=function(){return e},e}var OP={},_P=(0,Z.Ps)(IP()),XP=(0,Z.Ps)(TP(),_P),zP=(0,Z.Ps)(EP()),MP=(0,Z.Ps)(RP(),zP,_P),jP=(0,Z.Ps)(GP(),XP,MP),WP=(0,Z.Ps)(PP(),XP,zP),NP=(0,Z.Ps)(DP()),FP=(0,Z.Ps)(BP(),_P,WP,jP,MP,NP);var VP=(0,Z.Ps)(UP(),NP);var HP=(0,Z.Ps)(AP());var YP=(0,Z.Ps)(LP());var qP,KP=t(99401),$P=t(69214),QP=function(){return(0,r.BX)(d.G,{title:"late",css:[p.l0.fontSize("small"),p.l0.px(4),p.l0.borderRadius(4),p.l0.color.accentNegativeDefault,{border:"1px solid",borderColor:p.TV.accentNegativeDefault}],children:["late",(0,r.tZ)(Fe(),{id:"4b00beb7f87eecca",children:"span.jsx-4b00beb7f87eecca{color:var(--accent-negative-default)}"})]})},JP=t(30452),eD=d.K.a,nD=d.K.div;function tD(e){var n=qP.NotStarted,t=qP.Started,r=qP.Submitted,i=qP.Reviewed;switch(e){case n:return"Not Started";case t:return"Not submitted yet";case r:return"Submitted (waiting for review)";case i:return"Reviewed";default:return""}}function rD(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?qP.Submitted:!e.timeSubmitted&&e.timeLastReviewed?qP.Reviewed:e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?qP.Submitted:qP.Reviewed:void 0:qP.Started:qP.NotStarted}!function(e){e.NotStarted="not-started",e.Started="started",e.Submitted="submitted",e.Reviewed="reviewed"}(qP||(qP={}));var iD,oD=function(e,n){var t=e.indexOf("?"),r=new URLSearchParams(-1===t?"":e.slice(t));r.append("submissionReview","true");var i=-1===t?e:e.slice(0,t);return n?"".concat(i,"?").concat(r.toString(),"#").concat(n):"".concat(i,"?").concat(r.toString())},aD=(iD={},(0,f.Z)(iD,qP.Started,p.TV.blueDefault),(0,f.Z)(iD,qP.NotStarted,p.TV.foregroundDimmest),(0,f.Z)(iD,qP.Reviewed,p.TV.greenDefault),(0,f.Z)(iD,qP.Submitted,p.TV.yellowDefault),iD);function lD(e){var n=e.status,t=e.highlighted?p.TV.foregroundDefault:aD[n];return(0,r.tZ)(le.u,{tooltip:tD(n),placement:"right",children:(0,r.BX)(d.G,{children:[n===qP.Submitted?(0,r.tZ)(JP.Z,{color:t}):null,n===qP.Reviewed?(0,r.tZ)(Sn.Z,{color:t}):null,n===qP.Started?(0,r.tZ)(Kn.Z,{color:t}):null,n===qP.NotStarted?(0,r.tZ)(Td.Z,{color:t}):null]})})}function cD(e){var n=e.result,t=e.highlighted,i=e.current,o=e.isLate,a=(0,Re.R3)(),l=!i&&n.url?oD(n.url,a):"",c=(0,r.BX)(d.G,{css:[p.l0.p(8),p.l0.rowWithGap(8),p.l0.justify.spaceBetween,p.l0.align.center,n.status===qP.NotStarted&&{opacity:t?1:.4},t&&{backgroundColor:te.gU.listItem["@media (hover: hover)"][":not([disabled])"][":not(textarea):active"].backgroundColor},i&&{backgroundColor:p.TV.accentPrimaryDimmer,color:p.TV.foregroundDefault}],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center,p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(ae.q,{size:24,username:n.name,src:n.image}),(0,r.tZ)(ne.xv,{css:p.l0.flex.growAndShrink(1),multiline:!1,children:n.name}),o?(0,r.tZ)(QP,{}):null]}),n.status?(0,r.tZ)(lD,{status:n.status,highlighted:t||i}):null]});return l?(0,r.tZ)(eD,{href:l,style:{color:"inherit"},children:c}):c}var sD=function(e){var n=e.team,t=e.submission,i=e.submissionList,o=e.template,a=(0,l.Z)(c.useState([]),2),s=a[0],u=a[1],f=(0,l.Z)(c.useState(""),2),h=f[0],v=f[1],g=(0,lE.Kb)({items:s,defaultHighlightedIndex:0}),Z=g.isOpen,b=g.getComboboxProps,y=g.getInputProps,x=g.getMenuProps,w=g.getItemProps,k=g.getToggleButtonProps,C=g.highlightedIndex,S=g.openMenu,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t.isGroupSubmission){var r=i;0!==e.length&&(r=r.filter((function(n){var t;return null===(t=n.submissionGroup)||void 0===t?void 0:t.users.some((function(n){var t;return null===(t=(null===n||void 0===n?void 0:n.fullName)||(null===n||void 0===n?void 0:n.username))||void 0===t?void 0:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))})));var o=r.map((function(e){var n,t,r,i,o=(null===e||void 0===e||null===(n=e.submissionGroup)||void 0===n?void 0:n.users.map((function(e){return(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.username)||""})).join(", "))||"";return{image:(null===(r=null===e||void 0===e||null===(t=e.submissionGroup)||void 0===t?void 0:t.users[0])||void 0===r?void 0:r.image)||"",name:o,url:null===(i=e.repl)||void 0===i?void 0:i.url,status:rD(e),submissionId:e.id,timeSubmitted:null===e||void 0===e?void 0:e.timeSubmitted}}));u((0,We.Z)(o))}else{var a=n.students;a=0===e.length?a.filter((function(e){return e.user})).sort((function(e,n){var t,r,i,o;return(e.nickname||(null===(t=e.user)||void 0===t?void 0:t.fullName)||(null===(r=e.user)||void 0===r?void 0:r.username)||"").localeCompare(n.nickname||(null===(i=n.user)||void 0===i?void 0:i.fullName)||(null===(o=n.user)||void 0===o?void 0:o.username)||"")})):a.filter((function(n){var t,r,i;return null===(i=n.nickname||(null===(t=n.user)||void 0===t?void 0:t.fullName)||(null===(r=n.user)||void 0===r?void 0:r.username))||void 0===i?void 0:i.toLocaleLowerCase().includes(e.toLocaleLowerCase())}));var l=a.map((function(e){var n,t,r,o,a=i.find((function(n){var t,r;return(null===(t=n.author)||void 0===t?void 0:t.id)===(null===(r=e.user)||void 0===r?void 0:r.id)}));return{image:(null===(n=e.user)||void 0===n?void 0:n.image)||"",name:e.nickname||(null===(t=e.user)||void 0===t?void 0:t.fullName)||(null===(r=e.user)||void 0===r?void 0:r.username)||"",url:null===a||void 0===a||null===(o=a.repl)||void 0===o?void 0:o.url,status:rD(a),submissionId:null===a||void 0===a?void 0:a.id,timeSubmitted:null===a||void 0===a?void 0:a.timeSubmitted}}));u((0,We.Z)(l))}};return(0,r.BX)(d.G,{css:[p.l0.position.relative,{zIndex:2}],children:[(0,r.BX)(nD,(0,oe.Z)((0,m.Z)({css:[p.l0.position.relative]},b()),{children:[(0,r.tZ)(Hp.II,(0,m.Z)({},y({value:h,placeholder:"Switch submission",onKeyDown:function(e){"Escape"===e.key&&u([])},onChange:function(e){var n=e.target.value;I(n),v(n)},onFocus:function(){I(),S()}}))),(0,r.tZ)(d.G,{css:[p.l0.position.absolute,p.l0.top(0),p.l0.right(0),p.l0.height("100%"),p.l0.center],children:h?(0,r.tZ)(d.G,{css:[p.l0.reset.button,p.l0.cursor.pointer,p.l0.px(8)],onClick:function(){return v("")},tag:"button",children:(0,r.tZ)(xp.Z,{})}):(0,r.tZ)(d.G,(0,oe.Z)((0,m.Z)({css:[p.l0.reset.button,p.l0.cursor.pointer,p.l0.px(8)]},k({refKey:"innerRef"})),{tag:"button",children:(0,r.tZ)(vs.Z,{})}))})]})),(0,r.tZ)(Q.Tg,(0,oe.Z)((0,m.Z)({tag:"ul",elevated:!0,css:[{zIndex:1,position:"absolute",overflowY:"auto",width:"100%",left:0,top:"calc(100% + ".concat(p.TV.space8,")"),border:"1px solid",borderColor:p.TV.outlineDimmest,listStyle:"none"},!Z&&{visibility:"hidden"},p.l0.borderRadius(8),p.l0.maxHeight(400)]},x({refKey:"innerRef"})),{children:s.map((function(e,n){var i=e.submissionId===t.id,a=!e.url;return(0,r.tZ)(d.G,(0,oe.Z)((0,m.Z)({tag:"li",css:[!a&&p.l0.cursor.pointer]},w({index:n,item:e,refKey:"innerRef",disabled:a,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}})),{children:(0,r.tZ)(cD,{result:e,highlighted:C===n,current:i,isLate:o.dueDate&&e.timeSubmitted&&new Date(o.dueDate)<new Date(e.timeSubmitted)||!1})}),e.name)}))}))]})},uD=t(92961),dD=function(e){return{short:(0,yE.Z)(e,"do MMM"),long:(0,yE.Z)(e,"do MMM, hh:mm a")}},pD=function(e,n){var t=e.students.find((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===(null===n||void 0===n?void 0:n.id)}));return(null===t||void 0===t?void 0:t.nickname)||(null===n||void 0===n?void 0:n.fullName)||"@".concat(null===n||void 0===n?void 0:n.username)};function fD(e){var n=e.submission,t=e.submissionList,i=(0,Re.R3)(),o=t.findIndex((function(e){return e.id===n.id})),a=t[o-1],l=t[o+1],c=t.filter((function(e){return e.timeLastReviewed})).length;return(0,r.BX)(d.G,{css:p.l0.rowWithGap(8),children:[t.length===c?(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(Sn.Z,{color:p.TV.greenDefault}),(0,r.BX)(ne.xv,{color:"dimmer",css:[p.l0.flex.growAndShrink(1)],multiline:!1,children:["All ",c," submissions reviewed"]})]}):(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.flex.growAndShrink(1),p.l0.align.center],children:[(0,r.tZ)(le.u,{tooltip:"Reviewed",children:(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Sn.Z,{color:p.TV.greenDefault}),(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:c})]})}),(0,r.tZ)(le.u,{tooltip:"Waiting for review",children:(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(JP.Z,{size:12,color:p.TV.yellowDefault}),(0,r.tZ)(ne.xv,{variant:"small",color:"dimmer",multiline:!1,children:t.length-c})]})})]}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4)],children:[(null===a||void 0===a?void 0:a.repl)?(0,r.tZ)(ts.Z,{size:"small",variant:"outlined",href:oD(a.repl.url,i),text:"",iconLeft:(0,r.tZ)(iT.Z,{})}):(0,r.tZ)(J.zx,{size:"small",variant:"outlined",text:"",disabled:!0,iconLeft:(0,r.tZ)(iT.Z,{})}),(null===l||void 0===l?void 0:l.repl)?(0,r.tZ)(ts.Z,{size:"small",variant:"outlined",href:oD(l.repl.url,i),text:"",iconRight:(0,r.tZ)(Lu.Z,{})}):(0,r.tZ)(J.zx,{size:"small",variant:"outlined",text:"",disabled:!0,iconRight:(0,r.tZ)(Lu.Z,{})})]})]})}function hD(e){var n,t=e.submission,i=e.dueDate,o=e.team,a=Boolean(i&&new Date(i)<new Date(t.timeSubmitted));return(0,r.BX)(Q.Tg,{css:[p.l0.colWithGap(16),p.l0.p(16),p.l0.borderRadius(8)],elevated:!0,children:[t.isGroupSubmission&&t.submissionGroup?(0,r.tZ)(d.G,{css:[p.l0.colWithGap(8),p.l0.maxHeight(400),p.l0.overflow("auto")],children:t.submissionGroup.users.map((function(e){return(0,r.tZ)(d.G,{children:(0,r.tZ)(KP.n,{src:(null===e||void 0===e?void 0:e.image)||null,username:pD(o,e)})},null===e||void 0===e?void 0:e.id)}))}):(0,r.tZ)(r.HY,{children:(0,r.tZ)(KP.n,{src:(null===(n=t.author)||void 0===n?void 0:n.image)||null,username:pD(o,t.author)})}),t.timeSubmitted?(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(d.G,{css:[p.l0.colWithGap(4)],children:(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Sn.Z,{}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(ne.xv,{css:[p.l0.flex.growAndShrink(1)],multiline:!1,children:"Submitted"}),a?(0,r.tZ)(QP,{}):null,t.timeLastReviewed?null:(0,r.tZ)(ne.xv,{multiline:!1,variant:"small",color:"dimmer",css:[p.l0.flex.growAndShrink(1)],children:"(waiting for review)"})]})]})}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(Kn.Z,{}),(0,r.tZ)(ne.xv,{multiline:!1,children:dD(new Date(t.timeSubmitted)).long})]})]}):(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Kn.Z,{}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(ne.xv,{css:[p.l0.flex.growAndShrink(1)],multiline:!1,children:"In progress"}),(0,r.tZ)(ne.xv,{multiline:!1,variant:"small",color:"dimmer",css:[p.l0.flex.growAndShrink(1)],children:"(not submitted)"})]})]}),t.repl?(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)($P.Z,{}),(0,r.BX)(ne.xv,{multiline:!1,children:["Forked"," ",dD(new Date(t.repl.timeCreated)).short]})]}):(0,r.tZ)(ne.xv,{multiline:!1,children:"Submission repl missing"})]})]})}function vD(e){var n=e.repl,t=e.submission,i=(0,Rn.U)(),o=(0,qe.Z)().showError,a=(0,l.Z)(function(e){var n=(0,m.Z)({},OP,e);return b.D(HP,n)}({onError:function(e){return o(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&o(e.reviewRepl.message)}}),2),c=a[0],s=a[1].loading,u=(0,l.Z)(function(e){var n=(0,m.Z)({},OP,e);return b.D(YP,n)}(),1)[0],f=Boolean(t.timeLastReviewed);return(0,r.BX)(d.G,{css:p.l0.colWithGap(16),children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(zn.X,{id:i("reviewed-status"),disabled:s,checked:f,onChange:function(){return e=!f,void c({variables:{replId:n.id,status:e},optimisticResponse:{__typename:"RootMutationType",reviewRepl:(0,oe.Z)((0,m.Z)({},n),{__typename:"Repl",submission:(0,oe.Z)((0,m.Z)({},t),{timeLastReviewed:e?(new Date).toJSON():null})})}});var e}}),(0,r.tZ)("label",{htmlFor:i("reviewed-status"),children:f?"Reviewed":"Mark as reviewed"})]}),t.timeSubmitted?(0,r.tZ)(J.zx,{css:{alignSelf:"start"},iconLeft:(0,r.tZ)(uD.Z,{}),onClick:function(){u({variables:{replId:n.id},optimisticResponse:{__typename:"RootMutationType",unsubmitRepl:(0,oe.Z)((0,m.Z)({},n),{__typename:"Repl",submission:(0,oe.Z)((0,m.Z)({},t),{timeLastReviewed:null})})}})},text:"Unsubmit",size:"small"}):null]})}function mD(e){var n=e.repl,t=e.submission,i=e.team,o=e.template,a=o.submissions;return(0,r.BX)(d.G,{css:[p.l0.colWithGap(16),p.l0.flex.growAndShrink(1)],children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(16),p.l0.flex.grow(1)],children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(fD,{submission:t,submissionList:a}),(0,r.tZ)(sD,{team:i,template:o,submission:t,submissionList:a})]}),(0,r.tZ)(hD,{team:i,submission:t,dueDate:o.dueDate}),(0,r.tZ)(vD,{repl:n,submission:t})]}),(0,r.tZ)(ts.Z,{css:[{alignSelf:"start"}],size:"small",href:"/team/".concat(i.username,"/templates/").concat(o.repl.slug),iconLeft:(0,r.tZ)(iT.Z,{}),text:"Return to submissions"})]})}var gD,ZD=t(49914),bD=t(48587),yD=t(87708),xD=t(20476),wD=t(7986),kD=function(e){var n=e.fileName,t=e.docRef,i=e.initialContents,o=(0,wD.Z)(),a=o.ref,l=o.view;return c.useEffect((function(){if(l){var e=bD.tk.updateListener.of((function(e){t.current=e.state.doc}));l.dispatch({effects:yD.Py.appendConfig.of(e)}),l.focus()}}),[l,t]),c.useEffect((function(){l&&(l.state.doc.length||l.dispatch({changes:{from:0,insert:i}}))}),[l,i]),(0,r.BX)("div",{className:"jsx-d59ba8968f57599c editable-area",children:[(0,r.tZ)("div",{className:"jsx-d59ba8968f57599c editor-wrapper",children:(0,r.tZ)("div",{className:"jsx-d59ba8968f57599c editor",children:(0,r.tZ)(xD.ZP,{ref:a,filePath:n,fontSize:14,indentSize:4,indentIsSpaces:!0})})}),(0,r.tZ)(Fe(),{id:"d59ba8968f57599c",children:".editable-area.jsx-d59ba8968f57599c{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor-wrapper.jsx-d59ba8968f57599c{height:450px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;position:relative}.editor.jsx-d59ba8968f57599c{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-d59ba8968f57599c{height:100%;width:100%;z-index:5}"})]})},CD=function(e){var n=e.title,t=e.fileName,i=e.initialContents,o=e.isOpen,a=e.onSave,l=e.onCancel,s=c.useRef(null);return(0,r.BX)(He.u,{maxWidth:872,isOpen:o,onRequestClose:function(){},preventClose:!0,children:[(0,r.tZ)("div",{className:"jsx-c68269737c22d0ec editor-modal",children:(0,r.BX)(Ue.gC,{align:"stretch",spacing:2,children:[(0,r.BX)(De.Z,{level:3,children:["Edit ",n.toLowerCase()]}),(0,r.tZ)(kD,{docRef:s,fileName:t,initialContents:i}),(0,r.tZ)(Ue.Ug,{justify:"end",align:"end",children:(0,r.BX)(Ue.Ug,{justify:"end",align:"end",spacing:1,children:[(0,r.tZ)(Le.Z,{onClick:function(){return l()},children:"Cancel"}),(0,r.tZ)(Le.Z,{color:"primary",onClick:function(){var e;return s.current&&a(null===(e=s.current)||void 0===e?void 0:e.toString())},children:"Save"})]})})]})}),(0,r.tZ)(Fe(),{id:"c68269737c22d0ec",children:".editor-modal.jsx-c68269737c22d0ec{padding:var(--space-16)}"})]})};!function(e){e.LessonPlan="lessonplan.md",e.Instructions="instructions.md"}(gD||(gD={}));var SD=t(67043),ID=t(49500);function TD(e){var n=e.attachments;return(0,r.tZ)("div",{className:"manage-attachments",children:(0,r.BX)(Ue.gC,{spacing:2,children:[(0,r.tZ)(ED,{attachment:n.find((function(e){return e.fileName===gD.LessonPlan})),fileName:gD.LessonPlan,label:"Lesson plan",helpText:"Upload teacher facing materials"}),(0,r.tZ)(ED,{attachment:n.find((function(e){return e.fileName===gD.Instructions})),fileName:gD.Instructions,label:"Instructions",helpText:"Upload student facing materials"})]})})}function ED(e){var n,t=e.attachment,i=e.fileName,o=e.label,a=e.helpText,s=(0,SD.Z)(),u=(0,qe.Z)(),d=u.showConfirm,p=u.showError,f=(0,l.Z)(function(e){var n=(0,m.Z)({},OP,e);return b.D(VP,n)}({onCompleted:function(){return d("Updated "+i)},onError:function(e){ID.log(e),p("Error")}}),2),h=f[0],v=f[1],g=c.useCallback(function(){var e=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){return s&&h({variables:{input:{replId:s.id,fileName:i,contents:e,lastModified:(new Date).toISOString()}}}),[2]}))}));return function(n){return e.apply(this,arguments)}}(),[s,i,h]);return s&&(n=i===gD.LessonPlan?Jd({language:s.language}):ep({language:s.language})),(0,r.tZ)(RD,{loading:!s||v.loading,fileName:i,contents:null===t||void 0===t?void 0:t.contents,defaultContents:n,label:o,helpText:a,attachmentLastUploadedAgo:t?(0,OZ.F)(new Date(t.timeUpdated)):void 0,onUploadFile:g})}function RD(e){var n=e.loading,t=e.fileName,i=e.contents,o=e.defaultContents,a=e.label,s=e.helpText,u=e.attachmentLastUploadedAgo,d=e.onUploadFile,p=(0,l.Z)(c.useState(!1),2),f=p[0],h=p[1];return(0,r.BX)("div",{className:"jsx-5b5c01bd3abb3f44 attachment",children:[(0,r.tZ)(CD,{title:a,fileName:t,isOpen:f,initialContents:i||o,onCancel:function(){return h(!1)},onSave:function(e){h(!1),d(e)}}),(0,r.BX)(Ue.Ug,{justify:"space-between",align:"center",wrap:"nowrap",children:[(0,r.BX)(Ue.gC,{spacing:1,children:[(0,r.BX)(Ue.Ug,{align:"center",spacing:1,wrap:"nowrap",children:[(0,r.tZ)(Be.Z,{fontWeight:"medium",children:a}),(0,r.tZ)(ZD.Z,{label:s})]}),u?(0,r.BX)(Be.Z,{size:"xsmall",children:["Uploaded ",u]}):null]}),n?(0,r.tZ)(se.Z,{size:16}):(0,r.tZ)(Le.Z,{border:!1,filled:!1,Icon:Ad.Z,onClick:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){return h(!0),[2]}))}))})]}),(0,r.tZ)(Fe(),{id:"5b5c01bd3abb3f44",children:".attachment.jsx-5b5c01bd3abb3f44{padding:var(--space-8);background-color:var(--background-root);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"})]})}function GD(e){var n=e.attachments;return(0,r.BX)("div",{className:"jsx-ea2ca64296d8f56a project-view-container",children:[(0,r.tZ)("div",{className:"jsx-ea2ca64296d8f56a project-view-contents",children:(0,r.tZ)(TD,{attachments:n})}),(0,r.tZ)("div",{className:"jsx-ea2ca64296d8f56a bottom-dock",children:(0,r.tZ)(Be.Z,{size:"small",children:(0,r.tZ)("a",{href:"/curriculum",target:"_blank",className:"jsx-ea2ca64296d8f56a",children:"Find more curriculum on Curriculum Hub"})})}),(0,r.tZ)(Fe(),{id:"ea2ca64296d8f56a",children:".project-view-container.jsx-ea2ca64296d8f56a{padding-top:var(--space-32);max-width:400px;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.bottom-dock.jsx-ea2ca64296d8f56a{display:grid;grid-gap:var(--space-8);margin-top:auto}"})]})}function PD(){var e,n=function(e){var n=(0,m.Z)({},OP,e);return M.a(FP,n)}({variables:{replId:(0,Ie.Z)()}}),t=n.data,i=n.loading,o=n.error;if(i)return(0,r.tZ)(d.G,{css:[p.l0.center,p.l0.flex.growAndShrink(1)],children:(0,r.tZ)(se.Z,{size:24})});if(o)return(0,r.tZ)(d.G,{css:p.l0.center,children:(0,r.tZ)(ne.xv,{multiline:!1,children:"Something went wrong"})});var a="Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl:null,l="Team"===(null===a||void 0===a||null===(e=a.owner)||void 0===e?void 0:e.__typename)?a.owner:null,c=null===a||void 0===a?void 0:a.template;return a&&l&&c?(0,r.BX)(d.G,{css:[p.l0.height("100%")],children:[(0,r.tZ)(ne.xv,{css:[p.l0.p(8)],variant:"subheadBig",multiline:!1,children:a.submission?"Submissions":"Curriculum"}),(0,r.tZ)(d.G,{css:[p.l0.px(8),p.l0.pb(8),p.l0.flex.growAndShrink(1),p.l0.overflowY("auto")],children:a.submission?(0,r.tZ)(mD,{repl:a,team:l,template:c,submission:a.submission}):(0,r.tZ)(GD,{attachments:a.attachments})})]}):(0,r.tZ)(d.G,{css:p.l0.center,children:(0,r.tZ)(ne.xv,{multiline:!1,children:"Something went wrong"})})}var DD=Ou.Type.Object({type:Ou.Type.Literal("education")}),BD={Content:function(){return(0,r.tZ)(PD,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(ds.Z,{size:n})},getTitle:function(){return"Submissions"},decode:function(e){return Fu.B4.Decode(DD,e)}},UD=t(60966),AD=t(32874),LD=t(25457),OD=".lesson/".concat("instructions.md"),_D=function(e){var n=e.contents,t=(0,re.Z)().fs,i=(0,AD.l)(t,OD);return(0,r.BX)("div",{className:Fe().dynamic([["4a2a9dfc904beede",[Ee.j.tabletMin]]])+" root",children:[(0,r.tZ)("div",{className:Fe().dynamic([["4a2a9dfc904beede",[Ee.j.tabletMin]]])+" content",children:(0,r.tZ)(UD.ZP,{components:{img:i},sourcePos:!0,children:n})}),(0,r.tZ)(Fe(),{id:"4a2a9dfc904beede",dynamic:[Ee.j.tabletMin],children:".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative}.content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32)var(--space-16)}@media only screen and (min-width:".concat(Ee.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48)var(--space-32)}}")})]})},XD=function(){var e=(0,Ie.Z)(),n=(0,re.Z)().fs,t=(0,Dp.Z)(),i=(0,l.Z)(c.useState(null),2),o=i[0],a=i[1],s=(0,qe.Z)().showError;return c.useEffect((function(){n.readFile(OD).then((function(e){t.current&&(e.error?e.error===Tn.Df.NotFound?s("Instructions file not found. Please contact your instructor."):e.error===Tn.Df.IsDirectory?s("Instructions file is misconfigured. Please contact your instructor."):sf.$e((function(n){n.setTag("instructions-viewer",!0),sf.Tb("Error loading instructions viewer: ".concat(e.error))})):a(e.content.toString()))}))}),[n,t,s,e]),o?(0,r.tZ)(_D,{contents:o}):(0,r.tZ)(LD.Z,{preventHighlightBorder:!0})},zD=Ou.Type.Object({type:Ou.Type.Literal("instructions")}),MD={Content:function(){return(0,r.tZ)(XD,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(ds.Z,{size:n})},getTitle:function(){return"Instructions"},decode:function(e){return Fu.B4.Decode(zD,e)}},jD=t(50419),WD=t(75331),ND=Ou.Type.Object({type:Ou.Type.Literal("config")}),FD={Content:function(e){var n=e.options.paneId,t=wl();return(0,r.tZ)(jD.Z,{closeConfigPane:function(){return t(n)},useReadFile:WD.Z})},Icon:function(){return null},getTitle:function(){return"Configure Repl"},decode:function(e){return Fu.B4.Decode(ND,e)}};var VD,HD=t(81890),YD={Content:function(){var e=Og();return(0,r.tZ)(d.G,{css:[p.l0.width("100%"),p.l0.maxWidth(640),p.l0.overflow("auto"),{marginRight:"auto",marginLeft:"auto"}],children:(0,r.tZ)(HD.Z,{resetLayout:e,css:[{backgroundColor:"transparent"}]})})},Icon:function(e){var n=e.size;return(0,r.tZ)(Um.Z,{size:n})},getTitle:function(){return"User Settings"},decode:t(3973).J},qD=t(49970),KD=t(18490),$D=t(30779),QD=t(8367),JD=t(24769),eB=t(28568),nB=(0,de.X)({codeBlock:[p.l0.p(8),p.l0.borderRadius(8),p.l0.position.relative],codeBlockCopyButton:[p.l0.position.absolute,p.l0.top(4),p.l0.right(4)],selectionContainer:[p.l0.colWithGap(16),p.l0.maxHeight(400),p.l0.overflowY("scroll")],fsNode:[p.l0.flex.row,p.l0.rowWithGap(8),p.l0.align.center,p.l0.px(4),p.l0.py(2),p.l0.borderRadius(8),p.l0.cursor.pointer],fsNodeActive:[p.l0.backgroundColor.backgroundHigher],noResultsContainer:[p.l0.p(8),p.l0.flex.row,p.l0.center]});function tB(e){var n=e.content,t=(0,qe.Z)().showConfirm;return(0,r.BX)(Q.Tg,{tag:"code",elevated:!0,css:nB.codeBlock,children:[n,(0,r.tZ)(ee.hU,{alt:"Copy",tooltipHidden:!0,css:nB.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(n).then((function(){return t("Copied")}))},children:(0,r.tZ)(rs.Z,{})})]})}function rB(e){var n,t=e.glob,i=e.openFile,o=e.children,a=(0,c.useState)([]),l=a[0],s=a[1],u=(0,c.useState)(""),f=u[0],h=u[1],v=(0,Rn.U)(),g=(0,re.Z)().fs,Z=(0,za.gI)(),b=(0,c.useMemo)((function(){return(0,Md.Z)(t)}),[t]);return(0,c.useEffect)((function(){b&&g.listFiles().then((function(e){e.files&&s(e.files.filter((function(e){return e.match(b)})).map((function(e){var n=e.split("/");return{path:e,dir:n.slice(0,n.length-1).join("/"),filename:n[n.length-1]||""}})))}))}),[b,Z]),b?(0,r.BX)(d.G,{css:nB.selectionContainer,children:[(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(12)],children:[(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:"Choose an image"}),Z?(0,r.tZ)(Xn.E,{icon:(0,r.tZ)(kT.Z,{}),colorway:"primary",text:(0,r.BX)(d.G,{css:[p.l0.colWithGap(2)],children:[(0,r.BX)(ne.xv,{children:["Images must be served from"," ",(0,r.tZ)("span",{css:[p.l0.font.code,p.l0.backgroundColor.accentPrimaryDimmer,p.l0.borderRadius(4),p.l0.px(4),p.l0.py(2),p.l0.mr(2),p.l0.border({color:p.TV.accentPrimaryDefault})],children:Z.path}),"."]}),(0,r.tZ)(ne.xv,{css:[p.l0.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,r.BX)(ne.xv,{css:[p.l0.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,r.tZ)("span",{css:[p.l0.font.code,p.l0.fontSize("small"),p.l0.backgroundColor.backgroundHigher,p.l0.borderRadius(4),p.l0.px(4),p.l0.py(2),p.l0.mr(2),p.l0.border({color:p.TV.outlineDefault})],children:null===(n=t.match(/\{(.*)\}/))||void 0===n?void 0:n[1].split(",").map((function(e){return e.replace(".","")})).join(", ")})]})]})}),o,(0,r.tZ)(lE.ZP,{onChange:function(e){return i(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null===e||void 0===e?void 0:e.path)||""},children:function(e){var n=e.getInputProps,i=e.getItemProps,o=e.highlightedIndex,a=e.getRootProps,c=e.getMenuProps;return(0,r.BX)(d.G,(0,oe.Z)((0,m.Z)({},a({refKey:"innerRef"})),{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(d.G,{css:[p.l0.position.relative],children:(0,r.tZ)(Hp.II,(0,m.Z)({id:v("file-search")},n({ref:null,value:f,onChange:function(e){return h(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,r.tZ)(d.G,{children:l&&l.length?(0,r.tZ)(d.G,(0,oe.Z)((0,m.Z)({elevated:!0,tag:"ul",css:(p.l0.pt(8),p.l0.colWithGap(8))},c({refKey:"innerRef"})),{children:l.filter((function(e){return e.path.includes(f)})).filter((function(e){return!Z||(e.path.startsWith(Z.relativePath)||e.path.startsWith("public"))})).map((function(e,n){return(0,r.BX)(d.G,(0,oe.Z)((0,m.Z)({tag:"li",css:[nB.fsNode,n===o&&nB.fsNodeActive]},i({item:e,index:n,disabled:!!Z&&!e.path.startsWith(Z.relativePath)})),{children:[(0,r.tZ)(fc.Z,{path:e.path,size:16}),(0,r.tZ)(ne.xv,{children:e.filename}),(0,r.tZ)(ne.xv,{variant:"small",color:"dimmest",children:e.dir})]}),n)}))})):(0,r.tZ)(d.G,{css:[p.l0.pt(8)],children:(0,r.tZ)(ne.xv,{color:"dimmer",children:(0,r.BX)("em",{children:["No files found matching ",(0,r.tZ)("code",{children:t})]})})})})]}))}})]}):(0,r.BX)(d.G,{css:[p.l0.flex.column,p.l0.colWithGap(16)],children:[(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,r.BX)(ne.xv,{children:["The glob pattern ",(0,r.tZ)("code",{children:t})," could not be parsed."]}),(0,r.tZ)(d.G,{css:p.l0.border({direction:"bottom",color:p.TV.backgroundHigher})}),(0,r.BX)(d.G,{css:p.l0.colWithGap(8),children:[(0,r.tZ)(ne.xv,{children:(0,r.tZ)("strong",{children:"Match all Javascript Files"})}),(0,r.tZ)(tB,{content:"**/*.js"})]}),(0,r.BX)(d.G,{css:p.l0.colWithGap(8),children:[(0,r.tZ)(ne.xv,{children:(0,r.tZ)("strong",{children:"Match JSON files at root level"})}),(0,r.tZ)(tB,{content:"*.json"})]}),(0,r.BX)(d.G,{css:p.l0.colWithGap(8),children:[(0,r.tZ)(ne.xv,{children:(0,r.tZ)("strong",{children:"Match specified file extensions"})}),(0,r.tZ)(tB,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}!function(e){e.Installing="Installing",e.Loading="Loading",e.Failed="Failed",e.Success="Success"}(VD||(VD={}));var iB={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function oB(e){var n=e.isOpen,t=e.close,i=e.onSubmit,o=e.hostedUrl,a=(0,iS.I1)(),l=(0,iS.zm)(),s=(0,c.useState)(null),u=s[0],f=s[1],h=(0,c.useState)(!0),v=h[0],m=h[1],g=(0,c.useState)(null),Z=g[0],b=g[1],y=(0,c.useState)(null),x=y[0],w=y[1],k=(0,c.useRef)(null),C=(0,c.useState)(null),S=C[0],I=C[1],T=(0,c.useState)(null),E=T[0],R=T[1],G=(x||E||"").startsWith("/")?x||E:"/"+(x||E),P=(0,c.useState)(null),D=P[0],B=P[1],U=function(){R(null),f(null),w(null),I(null),B(null),b(null)};(0,c.useEffect)((function(){w(E)}),[E]);var A=(0,c.useCallback)(function(){var e=(0,Hn.Z)((function(e){var n,t,r,i;return(0,Yn.__generator)(this,(function(c){switch(c.label){case 0:if(!G||!v||u===VD.Success||u===VD.Failed)return[2];if(n=function(){var e=(0,Hn.Z)((function(e,n){var t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return f(VD.Loading),t=(0,zd.Vh)(o||e.baseUrl,n),b(t),[4,fetch(t)];case 1:return r.sent().ok?(B(n),f(VD.Success),m(!1),[2,!0]):[2,!1]}}))}));return function(n,t){return e.apply(this,arguments)}}(),t=e||l)return[3,8];f(VD.Installing),c.label=1;case 1:return c.trys.push([1,5,,8]),[4,a()];case 2:return(r=c.sent())?[4,A(r)]:[3,4];case 3:return c.sent(),[2];case 4:return[3,8];case 5:return c.sent(),l?[4,A(l)]:[3,7];case 6:return c.sent(),[2];case 7:return[3,8];case 8:return t?(i=G.replace(/^(\/public|\/static)/,""),[4,n(t,i.slice(1))]):[3,11];case 9:return c.sent()?[3,11]:[4,n(t,G)];case 10:c.sent(),c.label=11;case 11:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[l,G,a,u,v,o]);(0,c.useEffect)((function(){if(S){var e=S.split("/"),n=e.pop(),t=e.findIndex((function(e){return["public","static"].includes(e)})),r=-1!==t?"/".concat(S):"/".concat(e.slice(t+1).join("/"),"/").concat(n);R(r||S),m(!0),A()}}),[A,S]);var L=S?S.split("/"):[],O=L[L.length-1];return(0,r.tZ)(He.u,{isOpen:n,onRequestClose:t,children:S?(0,r.BX)(d.G,{css:[p.l0.flex.column,p.l0.colWithGap(16)],children:[(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(J.zx,{text:"Back",size:"small",iconLeft:(0,r.tZ)(iT.Z,{}),onClick:function(){I(null),U()}}),(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(eB.Z,{}),(0,r.tZ)(ne.xv,{color:"dimmer",children:O||""})]})]}),(0,r.tZ)(ne.xv,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(4)],children:[(0,r.tZ)(Hp.II,{defaultValue:x||"",ref:k,placeholder:"/icon.png",onChange:function(e){return w(e.target.value)},autoFocus:!0,disabled:u===VD.Loading||u===VD.Installing||u===VD.Success}),!Z||u!==VD.Loading&&u!==VD.Success&&u!==VD.Failed?null:(0,r.tZ)("a",{href:Z,target:"_blank",children:(0,r.BX)(ne.xv,{color:"dimmer",variant:"small",css:[p.l0.rowWithGap(4),p.l0.display.flex,{fontStyle:"italic"}],children:[(0,r.BX)("span",{css:[p.l0.truncate],children:[u===VD.Loading?"Checking ":null,u===VD.Success?"Found at ":null,u===VD.Failed?"Failed to load ":null,Z]}),(0,r.tZ)(d.G,{css:[p.l0.display.inlineBlock],children:(0,r.tZ)(yp.Z,{})})]})})]}),(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(d.G,{css:[p.l0.flex.row,p.l0.rowWithGap(4),p.l0.align.center],children:u?(0,r.tZ)(r.HY,{children:u===VD.Loading?(0,r.tZ)(se.Z,{}):(0,r.tZ)(Xn.E,{text:iB[u],colorway:u===VD.Failed?"negative":"positive",icon:u===VD.Failed?(0,r.tZ)(tm.Z,{}):(0,r.tZ)(Sn.Z,{})})}):null}),u===VD.Failed?(0,r.BX)(d.G,{css:p.l0.rowWithGap(8),children:[(0,r.tZ)(J.zx,{text:"Add Anyways",onClick:function(){var e=E||S;null!==e&&i(e),U(),t()},size:"small"}),(0,r.tZ)(J.zx,{text:"Try Again",onClick:function(){m(!0),f(null)},size:"small"})]}):null,D&&u===VD.Success?(0,r.tZ)(J.zx,{text:"Continue",iconLeft:(0,r.tZ)(Sn.Z,{}),colorway:"primary",onClick:function(){i(D),U(),t()}}):null]})]}):(0,r.tZ)(rB,{openFile:I,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var aB=t(91888),lB=(0,de.X)({centerRowGap8:[p.l0.rowWithGap(8),p.l0.align.center],featureContainer:[p.l0.flex.column,p.l0.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[p.l0.border({style:"dashed"}),p.l0.borderRadius(8),p.l0.p(16),p.l0.colWithGap(8),p.l0.center],featureDetails:[p.l0.flex.column,p.l0.colWithGap(4),p.l0.flex.growAndShrink(1)],featureOptionsRow:[p.l0.flex.row,p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween],newFeatureFieldWrapper:[p.l0.p(8),p.l0.flex.row,p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween,p.l0.border({direction:"bottom",color:p.TV.backgroundHighest})],inputCounterFlex:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center]}),cB=function(e){return[p.l0.flex.row,p.l0.rowWithGap(8),p.l0.align.center,p.l0.p(8),e?null:p.l0.border({direction:"bottom",color:p.TV.backgroundHighest})]},sB=function(e,n,t){return[t?te.gU.filledAndOutlined:null,p.l0.flex.row,p.l0.center,p.l0.width(e),p.l0.height(.75*e),p.l0.maxWidth(e),p.l0.maxHeight(.75*e),p.l0.borderRadius(4),p.l0.border({color:p.TV.backgroundHighest}),p.l0.flex.grow(1),{background:n?"".concat(p.TV.backgroundDefault," url(").concat(n,") no-repeat center center / cover"):p.TV.backgroundDefault}]};function uB(e){var n=e.features,t=e.onCreate,i=e.onUpdate,o=e.onDelete,a=(0,c.useState)([]),l=a[0],s=a[1],u=(0,c.useState)(!1),f=u[0],h=u[1];return(0,r.BX)(d.G,{children:[(0,r.BX)(d.G,{css:p.l0.pb(12),children:[(0,r.BX)(d.G,{css:lB.centerRowGap8,children:[(0,r.BX)(d.G,{css:lB.centerRowGap8,children:[(0,r.tZ)(aB.Z,{}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,r.tZ)(ee.hU,{onClick:function(){h(!f)},alt:"Add a new Feature",tooltipHidden:f,disabled:f,children:(0,r.tZ)(pc.Z,{})})]}),(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,r.BX)(d.G,{css:p.l0.colWithGap(8),children:[f?(0,r.tZ)(pB,{onSubmit:function(e){t(e),h(!1)},onCancel:function(){return h(!1)}}):null,(0,r.tZ)(d.G,{css:lB.featureContainer,children:n.length>0?n.map((function(e,t){return l.includes(t)?(0,r.tZ)(pB,{feature:e,isLast:t===n.length-1,onSubmit:function(e){i(e,t),s((function(e){return e.filter((function(e){return e!==t}))}))},onCancel:function(){return s((function(e){return e.filter((function(e){return e!==t}))}))}},t):(0,r.tZ)(dB,{isLast:t===n.length-1,feature:e,onEdit:function(){return s((function(e){return(0,We.Z)(e).concat([t])}))},onDelete:function(){o(t)}},t)})):(0,r.tZ)(r.HY,{children:f?null:(0,r.BX)(d.G,{css:lB.noFeaturesPlaceholder,children:[(0,r.tZ)(ne.xv,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,r.tZ)(J.zx,{variant:"outlined",text:"New Feature",iconLeft:(0,r.tZ)(pc.Z,{}),onClick:function(){return h(!0)}})]})})})]})]})}function dB(e){var n=e.feature,t=e.onEdit,i=e.onDelete,o=e.isLast;return(0,r.BX)(Q.Tg,{elevated:!0,css:cB(o),children:[(0,r.tZ)(fB,{size:64,icon:n.image}),(0,r.BX)(d.G,{css:lB.featureDetails,children:[(0,r.BX)(d.G,{css:lB.featureOptionsRow,children:[(0,r.tZ)(ne.xv,{children:n.title}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(ee.hU,{alt:"Delete",tooltipHidden:!0,onClick:i,children:(0,r.tZ)(Xd.Z,{color:p.TV.accentNegativeStronger})}),(0,r.tZ)(ee.hU,{alt:"Edit",tooltipHidden:!0,onClick:t,children:(0,r.tZ)(Ad.Z,{})})]})]}),(0,r.tZ)(ne.xv,{color:"dimmest",multiline:!0,maxLines:1,children:n.body})]})]})}function pB(e){var n=e.onSubmit,t=e.onCancel,i=e.feature,o=e.isLast,a=(0,c.useState)((null===i||void 0===i?void 0:i.title)||""),l=a[0],s=a[1],u=(0,c.useState)((null===i||void 0===i?void 0:i.body)||""),f=u[0],h=u[1],v=(0,c.useState)((null===i||void 0===i?void 0:i.image)||null),m=v[0],g=v[1],Z=l.length>=3&&f.length>=16;return(0,r.BX)(Q.Tg,{css:[p.l0.flex.column,o||i?null:p.l0.borderRadius(8),i?p.l0.border({color:p.TV.outlineDefault}):[o?null:p.l0.border({direction:"bottom",color:p.TV.backgroundHighest})]],elevated:!0,children:[(0,r.BX)(d.G,{css:lB.newFeatureFieldWrapper,children:[(0,r.tZ)(ne.xv,{children:l||"New Feature"}),(0,r.BX)(d.G,{css:p.l0.rowWithGap(8),children:[(0,r.tZ)(J.zx,{text:"Cancel",onClick:t}),(0,r.tZ)(J.zx,{text:i?"Save":"Create",colorway:"primary",onClick:function(){return n({title:l,body:f,image:m})},disabled:!Z})]})]}),(0,r.BX)(d.G,{css:[p.l0.p(8),p.l0.colWithGap(8)],children:[(0,r.BX)(d.G,{css:p.l0.colWithGap(4),children:[(0,r.BX)(d.G,{css:lB.inputCounterFlex,children:[(0,r.tZ)(ne.xv,{color:"dimmer",children:"Title"}),(0,r.tZ)(hB,{value:l.length,min:3})]}),(0,r.tZ)(Hp.II,{value:l,onChange:function(e){return s(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(4)],children:[(0,r.BX)(d.G,{css:lB.inputCounterFlex,children:[(0,r.tZ)(ne.xv,{color:"dimmer",children:"Body"}),(0,r.tZ)(hB,{value:f.length,min:16})]}),(0,r.tZ)(Hp.B,{value:f,onChange:function(e){return h(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,r.BX)(d.G,{css:p.l0.rowWithGap(8),children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(4),p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(ne.xv,{color:"dimmer",children:"Image (Recommended)"}),(0,r.tZ)(ne.xv,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your Repl. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,r.tZ)(fB,{size:100,icon:m,editable:!0,onSubmit:function(e){g(e)}})]})]})]})}function fB(e){var n=e.size,t=e.icon,i=e.editable,o=void 0!==i&&i,a=e.onSubmit,l=(0,za.oo)(),s=l&&t?(0,zd.Vh)(l,t):null,u=(0,c.useState)(!1),d=u[0],f=u[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Q.Tg,{background:"default",css:sB(n,s,o),onClick:function(){return f(!0)},children:s?null:(0,r.tZ)(eB.Z,{color:p.TV.foregroundDimmest,size:24})}),o?(0,r.tZ)(oB,{isOpen:d,close:function(){return f(!1)},onSubmit:function(e){null===a||void 0===a||a(e)}}):null]})}function hB(e){var n=e.value,t=e.min;return(0,r.BX)(ne.xv,{css:{color:n>=t?p.TV.accentPositiveStronger:p.TV.foregroundDimmest},children:[n,"/",t]})}var vB=function(){return(0,r.tZ)(d.G,{css:[p.l0.justify.center,p.l0.align.center,p.l0.display.flex,p.l0.width("100%"),p.l0.height("100%")],children:(0,r.tZ)(se.Z,{})})};function mB(e){var n=e.children;return(0,r.tZ)(d.G,{css:[p.l0.colWithGap(12),p.l0.p(16)],children:(0,r.tZ)(Q.Tg,{elevated:!0,css:[p.l0.p(16),p.l0.borderRadius(8),p.l0.colWithGap(8)],children:n})})}var gB=t(94099),ZB=function(e){var n=e.error,t=e.performPaneOperation,i=e.manifestPath;return(0,r.tZ)(mB,{children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(16),p.l0.p(8)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.display.flex,p.l0.align.center],children:[(0,r.tZ)(tm.Z,{}),(0,r.tZ)(ne.xv,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:"Details:"}),(0,r.tZ)(d.G,{css:[p.l0.colWithGap(8)],children:(0,uS.Z)(n,gB.Jg)?n.issues.map((function(e,n){var t=e.path,i=e.message;return(0,r.BX)(d.G,{css:[p.l0.display.flex,p.l0.flex.row,p.l0.rowWithGap(4)],children:[(0,r.tZ)(ne.xv,{css:[p.l0.font.code,p.l0.color.orangeStrongest,p.l0.backgroundColor.orangeDimmest],children:t}),(0,r.tZ)(ne.xv,{children:i})]},n)})):(0,r.tZ)(d.G,{tag:"pre",children:n.message})}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(J.zx,{colorway:"primary",text:"Open extension.json",onClick:function(){t({operation:"open",secondary:!0,pane:(0,Ud.$E)(i)})}}),(0,r.tZ)(J.zx,{iconLeft:(0,r.tZ)(ds.Z,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},bB=t(15843),yB=t(8082);function xB(e){var n=e.filePaths,t=e.outputDir,r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if("extension.json"===s)return s;s.endsWith("/extension.json")&&r.push(s)}}catch(g){o=!0,a=g}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}var u,d=!0,p=!1,f=void 0;try{for(var h,v=r[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;if(!m.startsWith(t))return m}}catch(g){p=!0,f=g}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}return null!==(u=r[0])&&void 0!==u?u:null}var wB,kB=function(){var e=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),CB="Failed to read manifest file, please try again",SB="No extension.json found",IB="Failed to parse manifest file",TB="extension.json was moved or deleted, please re-create it in your static directory",EB="State should be defined",RB=function(){var e=(0,re.Z)(),n=e.fs,t=e.dotReplit,r=function(){var e=(0,c.useState)(null),n=e[0],t=e[1],r=(0,c.useCallback)((function(e){t((function(n){if(!n)throw new Error(EB);return(0,oe.Z)((0,m.Z)({},n),{manifestStr:e})}))}),[]);return{state:n,setState:t,updateString:r}}(),i=r.state,o=r.setState,a=r.updateString,s=(0,c.useState)(0),u=s[0],d=s[1],p=(0,c.useState)(!1),f=p[0],h=p[1],v=(0,c.useCallback)((0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return[4,kB(n)];case 1:return e.sent(),[2]}}))})),[n]);(0,c.useEffect)((function(){o(null);var e=!1,r=function(){};function i(){return i=(0,Hn.Z)((function(){var i,c,s,u,d,p,f;return(0,Yn.__generator)(this,(function(h){switch(h.label){case 0:return[4,Promise.all([n.listFiles(),t.getConfig()])];case 1:return c=l.Z.apply(void 0,[h.sent(),2]),s=c[0],u=c[1],e?[2]:!s.files||u.error?(o({fileReadError:CB}),[2]):(p=(0,BS.Oh)((0,bB.AH)(null!==(d=null===(i=u.config.extension)||void 0===i?void 0:i.outputDirectory)&&void 0!==d?d:"dist")),(f=xB({filePaths:s.files,outputDir:p}))?(r=n.watchTextFile(f,{onReady:function(e){var n=e.writeChange,t=e.initialContent;o({fileReadError:null,writeChange:n,manifestStr:t,manifestPath:f})},onChange:function(e){var n=e.latestContent;a(n)},onMoveOrDelete:function(){o({fileReadError:TB})},onError:function(){o({fileReadError:CB})}}),[2]):(o({fileReadError:SB}),[2]))}}))})),i.apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){r(),e=!0}}),[n,a,t,u,o]);var g=function(e){return(0,c.useMemo)((function(){if(!e||null!==e.fileReadError)return null;try{var n=Ck.ku(e.manifestStr);return(0,zd.U4)(n)}catch(t){return{error:t,manifest:null}}}),[e])}(i),Z=function(e,n,t){return(0,c.useCallback)((function(r){if(!e||(null===n||void 0===n?void 0:n.error)||null!==e.fileReadError)throw new Error(IB);var i=Ck.r$(e.manifestStr,r);e.writeChange((0,yB.F)(e.manifestStr,i)),t(i)}),[e,n,t])}(i,g,a),b={retry:function(){d((function(e){return e+1}))},creatingExtensionJson:f,setCreatingExtensionJson:h,createExtensionJson:v,updateString:a,updateManifest:Z};return i?"string"===typeof i.fileReadError?(0,oe.Z)((0,m.Z)({},b),{__status:wB.fileReadError,state:{fileReadError:i.fileReadError},parsed:null}):g?g.manifest?(0,oe.Z)((0,m.Z)({},b),{__status:wB.success,state:{fileReadError:null,writeChange:i.writeChange,manifestStr:i.manifestStr,manifestPath:i.manifestPath},parsed:g}):(0,oe.Z)((0,m.Z)({},b),{__status:wB.fileParseError,state:i,parsed:{manifest:null,error:g.error}}):(0,oe.Z)((0,m.Z)({},b),{__status:wB.fileReadError,state:{fileReadError:SB},parsed:null}):(0,oe.Z)((0,m.Z)({},b),{__status:wB.loading,state:null,parsed:null})};!function(e){e.loading="loading",e.fileReadError="fileReadError",e.fileParseError="fileParseError",e.success="success"}(wB||(wB={}));var GB=function(e){var n=e.message,t=RB(),i=t.createExtensionJson,o=t.creatingExtensionJson,a=t.retry,l=t.setCreatingExtensionJson;return(0,r.BX)(mB,{children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.display.flex,p.l0.align.center],children:[(0,r.tZ)(tm.Z,{}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:n})]}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(J.zx,{colorway:"primary",text:"Create extension.json",loading:o,iconLeft:o?(0,r.tZ)(se.Z,{}):(0,r.tZ)(pc.Z,{}),onClick:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return l(!0),[4,i()];case 1:return e.sent(),a(),l(!1),[2]}}))}))}),(0,r.tZ)(J.zx,{text:"Retry",iconLeft:(0,r.tZ)(UZ.Z,{}),onClick:function(){a()}})]})]})};function PB(){var e=(0,g.Z)(["\n  query DevtoolsHomeHostedUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostedUrl\n        title\n        user {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return PB=function(){return e},e}function DB(){var e=(0,g.Z)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return DB=function(){return e},e}function BB(){var e=(0,g.Z)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return BB=function(){return e},e}var UB={},AB=(0,Z.Ps)(PB());function LB(e){var n=(0,m.Z)({},UB,e);return M.a(AB,n)}DB();var OB=(0,Z.Ps)(BB());var _B=(0,de.X)({iconContainer:[p.l0.position.relative,p.l0.width(64),p.l0.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[p.l0.flex.column,p.l0.position.absolute,p.l0.top(0),p.l0.left(0)],iconOverlay:[p.l0.flex.column,p.l0.colWithGap(4),p.l0.center,p.l0.position.absolute,p.l0.top(0),p.l0.left(0),p.l0.width("100%"),p.l0.height("100%"),p.l0.backgroundColor.backgroundOverlay,p.l0.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}],metadataContainer:[p.l0.flex.row,p.l0.rowWithGap(8),p.l0.width("100%")],metadataWrapper:[p.l0.flex.column,p.l0.colWithGap(8),p.l0.align.start,p.l0.flex.grow(1)],listingLabel:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(8)],metadataOptionsContainer:[p.l0.rowWithGap(8),p.l0.justify.spaceBetween,p.l0.width("100%")]});function XB(e){var n=e.performPaneOperation,t=e.setSelectedTab,i=(0,iS.zm)(),o=(0,iS.I1)(),a=(0,iS.EO)(),l=(0,iS.bN)(),s=(0,za.nP)(),u=(0,c.useState)(!1),f=u[0],h=u[1],v=(0,c.useState)(!1),m=v[0],g=v[1];return(0,r.tZ)(d.G,{css:[p.l0.rowWithGap(8),p.l0.flex.wrap,{rowGap:8}],children:(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[i||m?(0,r.BX)(r.HY,{children:[(0,r.tZ)(J.zx,{size:"small",text:"Reload",iconLeft:m?(0,r.tZ)(se.Z,{}):(0,r.tZ)(UZ.Z,{}),disabled:m,onClick:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return i?(g(!0),[4,a(i.installationId)]):[2];case 1:return e.sent(),g(!1),[2]}}))}))}),(0,r.tZ)(J.zx,{size:"small",text:"Unload",iconLeft:(0,r.tZ)(JD.Z,{}),disabled:!i,onClick:function(){i&&l(i.installationId)}})]}):(0,r.tZ)(J.zx,{size:"small",text:"Load locally",colorway:"primary",iconLeft:f?(0,r.tZ)(se.Z,{}):(0,r.tZ)(Id.Z,{}),loading:f,onClick:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return h(!0),[4,o()];case 1:return e.sent(),h(!1),[2]}}))}))}),s?(0,r.tZ)(J.zx,{size:"small",text:"View on Store",iconLeft:(0,r.tZ)(pR.Z,{}),onClick:function(){return n({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:s}}})}}):null,(0,r.tZ)(J.zx,{size:"small",text:"Edit Store Listing",onClick:function(){t(1)},iconLeft:(0,r.tZ)(Ad.Z,{})})]})})}function zB(e){var n,t=e.performPaneOperation,i=e.setSelectedTab,o=LB({variables:{replId:(0,Ie.Z)()}}).data,a=RB(),l=a.parsed,c=a.state,s=a.__status,u="Repl"===(null===o||void 0===o||null===(n=o.repl)||void 0===n?void 0:n.__typename)?o.repl.hostedUrl:null;if(s===wB.loading)return(0,r.tZ)(vB,{});if(s===wB.fileReadError)return(0,r.tZ)(GB,{message:c.fileReadError});var f=l.manifest,h=l.error;return h?(0,r.tZ)(ZB,{performPaneOperation:t,manifestPath:c.manifestPath,error:h}):(0,r.tZ)(d.G,{css:[p.l0.colWithGap(16),p.l0.width("100%")],children:(0,r.BX)(Q.Tg,{elevated:!0,css:[p.l0.p(12),p.l0.borderRadius(8),p.l0.colWithGap(8)],children:[(0,r.BX)(d.G,{css:[p.l0.flex.row,p.l0.rowWithGap(16),p.l0.align.center],children:[(0,r.tZ)(d.G,{css:[p.l0.flex.grow(0),p.l0.display.flex,p.l0.flex.row],children:(0,r.tZ)(KD.I,{size:64,baseUrl:u,icon:f.icon})}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(Ue.Ug,{align:"center",justify:"space-between",children:(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:f.name})}),(0,r.tZ)(ne.xv,{variant:"text",color:"dimmest",children:f.description})]})]}),(0,r.tZ)(XB,{setSelectedTab:i,performPaneOperation:t})]})})}function MB(e){var n,t,i,o,a,s,u,f,h,v,g=e.manifest,Z=e.onSubmit,b=e.updateManifest,y=(0,za.nP)(),x=(0,oS.d)(),w=(0,Ie.Z)(),k=(0,Rn.U)(),C=(0,c.useState)(null!==(u=g.name)&&void 0!==u?u:""),S=C[0],I=C[1],T=(0,c.useState)(null!==(f=g.description)&&void 0!==f?f:""),E=T[0],R=T[1],G=(0,c.useState)(null!==(h=g.longDescription)&&void 0!==h?h:void 0),P=G[0],D=G[1],B=(0,c.useState)(!1),U=B[0],A=B[1],L=LB({variables:{replId:w}}).data,O=function(e){var n=(0,m.Z)({},UB,e);return M.a(OB,n)}({variables:{id:y||""},skip:!y}),_=O.data,X=O.loading,z=O.refetch,j=(0,l.Z)((0,qD.Ne)(),2),W=j[0],N=j[1].loading,F="Extension"===(null===_||void 0===_||null===(n=_.extension)||void 0===n?void 0:n.__typename)&&(null===_||void 0===_||null===(t=_.extension)||void 0===t?void 0:t.user.id)===x,V="Extension"===(null===_||void 0===_||null===(i=_.extension)||void 0===i?void 0:i.__typename)&&(null===_||void 0===_||null===(o=_.extension)||void 0===o?void 0:o.isListed),H="Repl"===(null===L||void 0===L||null===(a=L.repl)||void 0===a?void 0:a.__typename)?L.repl.hostedUrl:null;return"Repl"===(null===L||void 0===L||null===(s=L.repl)||void 0===s?void 0:s.__typename)?(0,r.BX)(d.G,{tag:"form",css:[p.l0.colWithGap(16)],onSubmit:function(e){e.preventDefault(),Z({name:S,description:E,longDescription:P})},children:[(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(4)],children:[(0,r.tZ)(ne.xv,{css:[p.l0.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),X||N?(0,r.tZ)(se.Z,{}):(0,r.BX)($D.E,{css:p.l0.colWithGap(8),name:"extensionListingStatus",value:V?"listed":"unlisted",disabled:!F,onChange:function(e){var n=e.target.value;W({variables:{extensionId:y||"",isListed:"listed"===n}}).then((function(){return z()}))},children:[F?null:(0,r.tZ)(d.G,{css:[p.l0.width("fit-content")],children:(0,r.tZ)(Xn.E,{text:"You need to release this extension before listing it.",icon:(0,r.tZ)(kT.Z,{}),colorway:"yellow"})}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)($D.Y,{id:k("listed"),value:"listed"}),(0,r.tZ)("label",{htmlFor:k("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)($D.Y,{id:k("unlisted"),value:"unlisted"}),(0,r.tZ)("label",{htmlFor:k("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,r.tZ)(Hv.R,{}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(4)],tag:"label",htmlFor:k("name"),children:[(0,r.tZ)(ne.xv,{children:"Extension Name"}),(0,r.tZ)(Hp.II,{id:k("name"),placeholder:"Give your extension a name",value:S,onChange:function(e){I(e.currentTarget.value)},required:!0})]}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(4)],children:[(0,r.tZ)(ne.xv,{children:"Extension Icon"}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.align.center],children:[(0,r.BX)(d.G,{css:_B.iconContainer,children:[(0,r.tZ)(d.G,{css:_B.iconWrapper,children:(0,r.tZ)(KD.I,{size:64,baseUrl:H,icon:g.icon})}),(0,r.BX)(d.G,{css:_B.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return A(!0)},children:[(0,r.tZ)(Ad.Z,{}),(0,r.tZ)(ne.xv,{variant:"small",children:"Edit"})]})]}),(0,r.tZ)(J.zx,{text:"Choose from file system",iconLeft:(0,r.tZ)(QD.Z,{}),onClick:function(){return A(!0)}})]})]}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(4)],tag:"label",htmlFor:k("tagline"),children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(0)],children:[(0,r.tZ)(ne.xv,{children:"Tagline"}),(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,r.tZ)(Hp.II,{id:k("tagline"),placeholder:"Give your extension a short tagline",value:E,onChange:function(e){R(e.currentTarget.value)},required:!0})]}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(4)],tag:"label",htmlFor:k("longDescription"),children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(0)],children:[(0,r.tZ)(ne.xv,{children:"Description"}),(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,r.tZ)(Hp.B,{id:k("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!==P&&void 0!==P?P:"",onChange:function(e){D(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,r.tZ)(Hv.R,{}),(0,r.tZ)(uB,{features:null!==(v=g.features)&&void 0!==v?v:[],onDelete:function(e){var n;if(1===(null===(n=g.features)||void 0===n?void 0:n.length)&&0===e){var t=(0,m.Z)({},g);delete t.features,b(t)}else{var r;b((0,oe.Z)((0,m.Z)({},g),{features:null===(r=g.features)||void 0===r?void 0:r.filter((function(n,t){return t!==e}))}))}},onUpdate:function(e,n){var t,r,i,o;b((0,oe.Z)((0,m.Z)({},g),{features:(0,We.Z)(null!==(i=null===(t=g.features)||void 0===t?void 0:t.slice(0,n))&&void 0!==i?i:[]).concat([e],(0,We.Z)(null!==(o=null===(r=g.features)||void 0===r?void 0:r.slice(n+1))&&void 0!==o?o:[]))}))},onCreate:function(e){var n;b((0,oe.Z)((0,m.Z)({},g),{features:(0,We.Z)(null!==(n=g.features)&&void 0!==n?n:[]).concat([e])}))}}),(0,r.tZ)(d.G,{css:[p.l0.rowWithGap(12),{alignSelf:"end"},p.l0.pt(8)],children:(0,r.tZ)(J.zx,{text:"Continue",iconRight:(0,r.tZ)(ey.Z,{}),colorway:"primary",type:"submit",disabled:!S||!E||!P})}),(0,r.tZ)(oB,{isOpen:U,close:function(){return A(!1)},onSubmit:function(e){b((0,oe.Z)((0,m.Z)({},g),{icon:e}))}})]}):null}function jB(e){var n=e.fileHandlers,t=e.onCreate,i=e.onUpdate,o=e.onOpen,a=e.onDelete,l=(0,c.useState)([]),s=l[0],u=l[1],f=(0,c.useState)(!1),h=f[0],v=f[1];return(0,r.BX)(d.G,{children:[(0,r.BX)(d.G,{css:[p.l0.pb(12)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(Jb.Z,{}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,r.tZ)(ee.hU,{onClick:function(){return v(!h)},alt:"Add a new File Handler",tooltipHidden:h,disabled:h,children:(0,r.tZ)(pc.Z,{})})]}),(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[h?(0,r.tZ)(WB,{onSubmit:function(e){t(e),v(!1)},onCancel:function(){v(!1)}}):null,n.length?n.map((function(e,n){return s.includes(n)?(0,r.tZ)(WB,{initialFileHandler:e,onSubmit:function(e){i(e,n),u((function(e){return e.filter((function(e){return e!==n}))}))},onCancel:function(){u((function(e){return e.filter((function(e){return e!==n}))}))}},n):(0,r.BX)(Q.Tg,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center,p.l0.p(8),p.l0.borderRadius(8),p.l0.flex.wrap,{rowGap:8}],elevated:!0,children:[(0,r.tZ)(ne.xv,{multiline:!1,children:null!==(t=e.name)&&void 0!==t?t:"Unnamed"}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.align.center],children:[(0,r.tZ)(ee.hU,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){a(n)},children:(0,r.tZ)(Xd.Z,{})}),(0,r.tZ)(ee.hU,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){u((function(e){return(0,We.Z)(e).concat([n])}))},children:(0,r.tZ)(Ad.Z,{})}),(0,r.tZ)(J.zx,{iconLeft:(0,r.tZ)(QD.Z,{}),variant:"outlined",text:"Preview",onClick:function(){o(e)}})]})]},n);var t})):(0,r.tZ)(r.HY,{children:h?null:(0,r.BX)(d.G,{css:[p.l0.border({style:"dashed"}),p.l0.borderRadius(8),p.l0.p(16),p.l0.colWithGap(8),p.l0.center],children:[(0,r.tZ)(ne.xv,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,r.tZ)(J.zx,{variant:"outlined",text:"New File Handler",iconLeft:(0,r.tZ)(pc.Z,{}),onClick:function(){return v(!0)}})]})})]})]})}function WB(e){var n,t,i,o,a=e.onSubmit,l=e.onCancel,s=e.initialFileHandler,u=(0,c.useState)(null!==(n=null===s||void 0===s?void 0:s.name)&&void 0!==n?n:""),f=u[0],h=u[1],v=(0,c.useState)(null!==(t=null===s||void 0===s?void 0:s.icon)&&void 0!==t?t:""),m=v[0],g=v[1],Z=(0,c.useState)(null!==(i=null===s||void 0===s?void 0:s.handler)&&void 0!==i?i:""),b=Z[0],y=Z[1],x=(0,c.useState)(null!==(o=null===s||void 0===s?void 0:s.glob)&&void 0!==o?o:""),w=x[0],k=x[1],C=(0,Rn.U)();return(0,r.BX)(Q.Tg,{css:[p.l0.borderRadius(8),p.l0.border({color:p.TV.outlineDimmest}),p.l0.p(8),p.l0.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),a({name:f,icon:m,handler:b,glob:w})},elevated:!0,children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(2),p.l0.justify.spaceBetween,p.l0.border({color:p.TV.outlineDimmest,direction:"bottom"}),p.l0.align.center,p.l0.flex.wrap,{rowGap:8}],children:[(0,r.tZ)(ne.xv,{multiline:!1,children:f||"New File Viewer"}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(J.zx,{text:"Cancel",onClick:function(){l()}}),(0,r.tZ)(J.zx,{colorway:"primary",iconLeft:(0,r.tZ)(Sn.Z,{}),text:"Save Changes",type:"submit"})]})]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(2)],tag:"label",htmlFor:C("name"),children:[(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"Name"}),(0,r.tZ)(Hp.II,{id:C("name"),label:"Name",placeholder:"SVG Editor",value:f,onChange:function(e){h(e.currentTarget.value)},required:!0})]}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(2)],tag:"label",htmlFor:C("handler"),children:[(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,r.tZ)(Hp.II,{id:C("handler"),placeholder:"/svg-editor",value:b,onChange:function(e){y(e.currentTarget.value)},required:!0})]}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(2)],tag:"label",htmlFor:C("glob"),children:[(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,r.tZ)(Hp.II,{id:C("glob"),placeholder:"*.svg",value:w,onChange:function(e){k(e.currentTarget.value)},required:!0})]}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(2)],tag:"label",htmlFor:C("icon"),children:[(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,r.tZ)(Hp.II,{id:C("icon"),placeholder:"/svg-editor-logo.png",value:m,onChange:function(e){g(e.currentTarget.value)},required:!0})]})]})]})}function NB(e){var n=e.tools,t=e.onCreate,i=e.onUpdate,o=e.onOpen,a=e.onDelete,l=(0,c.useState)([]),s=l[0],u=l[1],f=(0,c.useState)(!1),h=f[0],v=f[1];return(0,r.BX)(d.G,{children:[(0,r.BX)(d.G,{css:[p.l0.pb(12)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(lc.Z,{}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,r.tZ)(ee.hU,{onClick:function(){return v(!h)},alt:"Add a new tool",disabled:h,tooltipHidden:h,children:(0,r.tZ)(pc.Z,{})})]}),(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[h?(0,r.tZ)(FB,{onSubmit:function(e){t(e),v(!1)},onCancel:function(){v(!1)}}):null,n.length?n.map((function(e,n){return s.includes(n)?(0,r.tZ)(FB,{initialTool:e,onSubmit:function(e){i(e,n),u((function(e){return e.filter((function(e){return e!==n}))}))},onCancel:function(){u((function(e){return e.filter((function(e){return e!==n}))}))}},n):(0,r.BX)(Q.Tg,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center,p.l0.p(8),p.l0.borderRadius(8),p.l0.flex.wrap,{rowGap:8}],elevated:!0,children:[(0,r.tZ)(ne.xv,{multiline:!1,children:null!==(t=e.name)&&void 0!==t?t:"Unnamed"}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.align.center],children:[(0,r.tZ)(ee.hU,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){a(n)},children:(0,r.tZ)(Xd.Z,{})}),(0,r.tZ)(ee.hU,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){u((function(e){return(0,We.Z)(e).concat([n])}))},children:(0,r.tZ)(Ad.Z,{})}),(0,r.tZ)(J.zx,{iconLeft:(0,r.tZ)(wg.Z,{}),variant:"outlined",text:"Preview",onClick:function(){o(e)}})]})]},n);var t})):(0,r.tZ)(r.HY,{children:h?null:(0,r.BX)(d.G,{css:[p.l0.border({style:"dashed"}),p.l0.borderRadius(8),p.l0.p(16),p.l0.colWithGap(8),p.l0.center],children:[(0,r.tZ)(ne.xv,{color:"dimmest",children:"You haven't added any tools"}),(0,r.tZ)(J.zx,{variant:"outlined",text:"New Tool",iconLeft:(0,r.tZ)(pc.Z,{}),onClick:function(){return v(!0)}})]})})]})]})}function FB(e){var n,t,i,o=e.onSubmit,a=e.onCancel,l=e.initialTool,s=(0,c.useState)(null!==(n=null===l||void 0===l?void 0:l.name)&&void 0!==n?n:""),u=s[0],f=s[1],h=(0,c.useState)(null!==(t=null===l||void 0===l?void 0:l.icon)&&void 0!==t?t:null),v=h[0],m=h[1],g=(0,c.useState)(null!==(i=null===l||void 0===l?void 0:l.handler)&&void 0!==i?i:""),Z=g[0],b=g[1],y=(0,Rn.U)();return(0,r.BX)(Q.Tg,{tag:"form",css:[p.l0.borderRadius(8),p.l0.border({color:p.TV.outlineDimmest}),p.l0.p(8)],elevated:!0,onSubmit:function(e){e.preventDefault(),o({name:u,icon:v,handler:Z})},children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(2),p.l0.justify.spaceBetween,p.l0.border({color:p.TV.outlineDimmest,direction:"bottom"}),p.l0.align.center,p.l0.flex.wrap,{rowGap:8}],children:[(0,r.tZ)(ne.xv,{multiline:!1,children:u||"New Tool"}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(J.zx,{text:"Cancel",onClick:function(){a()}}),(0,r.tZ)(J.zx,{colorway:"primary",iconLeft:(0,r.tZ)(Sn.Z,{}),text:"Save Changes",type:"submit"})]})]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(2)],tag:"label",htmlFor:y("name"),children:[(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"Name"}),(0,r.tZ)(Hp.II,{id:y("name"),label:"Name",placeholder:"SQL Viewer",value:u,onChange:function(e){f(e.currentTarget.value)},required:!0})]}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(2)],tag:"label",htmlFor:y("handler"),children:[(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,r.tZ)(Hp.II,{id:y("handler"),placeholder:"/sql",value:Z,onChange:function(e){b(e.currentTarget.value)},required:!0})]}),(0,r.BX)(d.G,{css:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(2)],tag:"label",htmlFor:y("icon"),children:[(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,r.tZ)(Hp.II,{id:y("icon"),placeholder:"/sql-logo.png",value:null!==v&&void 0!==v?v:"",onChange:function(e){m(e.currentTarget.value||null)},required:!0})]})]})]})}function VB(e){var n,t,i=e.manifest,o=e.performPaneOperation,a=e.update,l=(0,iS.zm)(),s=(0,iS.I1)(),u=(0,c.useState)(null),f=u[0],h=u[1];return(0,r.BX)(d.G,{css:[p.l0.colWithGap(24),p.l0.width("100%")],children:[(0,r.tZ)(jB,{onOpen:function(){var e=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){return h(e),[2]}))}));return function(n){return e.apply(this,arguments)}}(),onDelete:function(e){var n;a((0,oe.Z)((0,m.Z)({},i),{fileHandlers:null===(n=i.fileHandlers)||void 0===n?void 0:n.filter((function(n,t){return t!==e}))}))},onUpdate:function(e,n){var t,r,o,l;a((0,oe.Z)((0,m.Z)({},i),{fileHandlers:(0,We.Z)(null!==(o=null===(t=i.fileHandlers)||void 0===t?void 0:t.slice(0,n))&&void 0!==o?o:[]).concat([e],(0,We.Z)(null!==(l=null===(r=i.fileHandlers)||void 0===r?void 0:r.slice(n+1))&&void 0!==l?l:[]))}))},onCreate:function(e){var n;a((0,oe.Z)((0,m.Z)({},i),{fileHandlers:(0,We.Z)(null!==(n=i.fileHandlers)&&void 0!==n?n:[]).concat([e])}))},fileHandlers:null!==(n=i.fileHandlers)&&void 0!==n?n:[]}),(0,r.tZ)(NB,{onOpen:function(){var e=(0,Hn.Z)((function(e){var n,t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return(n=l)?[3,2]:[4,s()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw new Error("Expected current repl to be installed as an extension");return o({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!==(t=e.name)&&void 0!==t?t:n.manifest.name,baseUrl:n.baseUrl,icon:e.icon,path:e.handler}}}),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),onDelete:function(e){var n;a((0,oe.Z)((0,m.Z)({},i),{tools:null===(n=i.tools)||void 0===n?void 0:n.filter((function(n,t){return t!==e}))}))},onUpdate:function(e,n){var t,r,o,l;a((0,oe.Z)((0,m.Z)({},i),{tools:(0,We.Z)(null!==(o=null===(t=i.tools)||void 0===t?void 0:t.slice(0,n))&&void 0!==o?o:[]).concat([e],(0,We.Z)(null!==(l=null===(r=i.tools)||void 0===r?void 0:r.slice(n+1))&&void 0!==l?l:[]))}))},onCreate:function(e){var n;a((0,oe.Z)((0,m.Z)({},i),{tools:(0,We.Z)(null!==(n=i.tools)&&void 0!==n?n:[]).concat([e])}))},tools:null!==(t=i.tools)&&void 0!==t?t:[]}),(0,r.tZ)(He.u,{isOpen:!!f,onRequestClose:function(){return h(null)},children:f?(0,r.tZ)(rB,{glob:f.glob,openFile:function(){var e=(0,Hn.Z)((function(e){var n,t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:if(!f)throw new Error("Expected pending file handler");return(n=l)?[3,2]:[4,s()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw new Error("Expected current repl to be installed as an extension");return o({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!==(t=f.name)&&void 0!==t?t:n.manifest.name,baseUrl:n.baseUrl,path:(0,zd.Vh)(n.baseUrl,f.handler),filePath:e}}}),h(null),[2]}}))}));return function(n){return e.apply(this,arguments)}}()}):null})]})}var HB=t(50048),YB=t(29884);var qB=function(e){var n=e.complete,t=e.onClick,i=e.description,o=e.title,a=e.icon,l=n?"dimmer":"default";return(0,r.BX)(d.G,{tag:"li",css:[te.gU.filled,p.l0.position.relative,p.l0.p(4),n?p.l0.backgroundColor.backgroundDefault:p.l0.backgroundColor.backgroundHigher,{border:"1px solid ".concat(p.TV.outlineDimmer)},n&&{pointerEvents:"none"}],children:[(0,r.BX)(d.G,{css:[p.l0.p(4)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(6),p.l0.align.center],children:[n?(0,r.tZ)(Sn.Z,{color:p.TV.accentPositiveStrongest,size:16,css:[p.l0.mr(4)]}):null!==a&&void 0!==a?a:null,(0,r.tZ)(ne.xv,{variant:"small",color:l,css:[p.l0.fontWeight.medium],children:o})]}),i?(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",children:i}):null,(0,r.tZ)(d.G,{children:(0,r.tZ)("button",{onClick:function(){t&&"function"===typeof t&&t()},type:"button",className:"jsx-6c599e90d55a1346",children:"Start"})})]}),(0,r.tZ)(Fe(),{id:"6c599e90d55a1346",children:'button.jsx-6c599e90d55a1346{overflow:hidden;margin:-1px;border-width:0;padding:0;width:1px;height:1px;background:none;clip:rect(0,0,0,0);white-space:nowrap;cursor:pointer}button.jsx-6c599e90d55a1346::after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;display:block;cursor:pointer;z-index:1}'})]})},KB=function(e){var n=e.performPaneOperation,t=e.setSelectedTab,i=(0,lh.o)("extensions-onboarding-checklist"),o=i.isDone,a=i.setAsDone,l=(0,lh.o)("extensions-onboarding-checklist-create"),s=l.isDone,u=l.setAsDone,f=(0,lh.o)("extensions-onboarding-checklist-concepts"),v=f.isDone,g=f.setAsDone,Z=(0,lh.o)("extensions-onboarding-checklist-api"),b=Z.isDone,y=Z.setAsDone,x=(0,lh.o)("extensions-onboarding-checklist-publish").isDone;if((0,c.useEffect)((function(){u()}),[]),void 0===o||!0===o)return null;var w=[s,v,b,x].filter(Boolean).length,k=[{name:"create",title:"Create an Extension",complete:!!s,icon:(0,r.tZ)(eb.Z,{})},{name:"concepts",title:"Learn key concepts",complete:!!v,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:lt.TT.EXTENSIONS}}}),(0,h.j)(h.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"concepts"}),g()},icon:(0,r.tZ)(HB.Z,{})},{name:"learn",title:"Use the API",complete:!!b,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:lt.TT.EXTENSIONS}}}),(0,h.j)(h.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"learn"}),y()},icon:(0,r.tZ)(Mh.Z,{})},{name:"publish",title:"Publish your Extension",complete:!!x,onClick:function(){t(1)},icon:(0,r.tZ)(YB.Z,{})}];return(0,r.tZ)("section",{css:[p.l0.width("100%")],children:(0,r.BX)(d.G,{css:[p.l0.colWithGap(12)],children:[(0,r.tZ)(d.G,{css:[p.l0.colWithGap(2)],children:(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.align.center,p.l0.flex.wrap],children:[(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.align.center],children:[(0,r.tZ)(d.G,{css:[p.l0.rowWithGap(2),p.l0.align.center,p.l0.justify.center],children:Array.from({length:k.length}).map((function(e,n){return(0,r.tZ)(d.G,{css:[p.l0.borderRadius(8),p.l0.width(12),p.l0.height(4),n<w?p.l0.backgroundColor.accentPositiveDefault:p.l0.backgroundColor.backgroundHighest]},n)}))}),(0,r.tZ)(ne.xv,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(w,"/").concat(k.length)}),(0,r.tZ)(ee.hU,{alt:"Hide section",onClick:a,children:(0,r.tZ)(xp.Z,{})})]})]})}),(0,r.tZ)(d.G,{tag:"ul",css:[p.l0.flex.row,p.l0.flex.wrap,{listStyleType:"none",gap:p.TV.space8}],children:k.map((function(e,n){return(0,r.tZ)(qB,(0,m.Z)({},e),n)}))})]})})},$B=t(14723);function QB(e){var n=e.performPaneOperation,t=e.setSelectedTab,i=RB(),o=i.__status,a=i.parsed,l=i.state,c=i.updateString;if("loading"===o)return(0,r.tZ)(vB,{});if("fileReadError"===o)return(0,r.tZ)(GB,{message:(null===l||void 0===l?void 0:l.fileReadError)||"Unknown error"});if("fileParseError"===o){var s=a.error;return(0,r.tZ)(ZB,{performPaneOperation:n,manifestPath:l.manifestPath,error:s})}var u=a.manifest;return"success"===o&&u?(0,r.BX)(d.G,{css:[p.l0.colWithGap(24),p.l0.align.center,p.l0.pt(12),p.l0.width("100%")],children:[(0,r.tZ)(zB,{performPaneOperation:n,setSelectedTab:t}),(0,r.tZ)(KB,{performPaneOperation:n,setSelectedTab:t}),(0,r.tZ)(d.G,{css:[p.l0.border({direction:"bottom",width:4,color:p.TV.outlineDimmest}),p.l0.width("100%")]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(8),p.l0.width("100%")],children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(2)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(Bh.Z,{}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,r.BX)(ne.xv,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,r.tZ)("a",{onClick:function(){return n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:lt.TT.EXTENSIONS+"/api/manifest#scopetype"}}})},children:"read the docs"}),"."]})]}),(0,r.tZ)(d.G,{css:[p.l0.borderRadius(4),p.l0.border({color:p.TV.outlineDimmest,width:1}),p.l0.flex.row,p.l0.align.center,p.l0.p(8),p.l0.flex.wrap,{gap:12},p.l0.width("fit-content")],children:$B.k.map((function(e){var n;return(0,r.BX)(d.G,{css:[p.l0.rowWithGap(6),p.l0.align.center],children:[(0,r.tZ)(zn.X,{id:e.key,checked:null===(n=u.scopes)||void 0===n?void 0:n.some((function(n){return n.name===e.key})),onChange:function(n){var t,r,i,o=(null===(t=u.scopes)||void 0===t?void 0:t.some((function(n){return n.name===e.key})))&&!n.target.checked?Ck.r$(l.manifestStr,(0,oe.Z)((0,m.Z)({},u),{scopes:null===(r=u.scopes)||void 0===r?void 0:r.filter((function(n){return n.name!==e.key}))})):Ck.r$(l.manifestStr,(0,oe.Z)((0,m.Z)({},u),{scopes:(0,We.Z)(null!==(i=u.scopes)&&void 0!==i?i:[]).concat([{name:e.key,reason:e.description}])}));l.writeChange((0,yB.F)(l.manifestStr,o)),c(o)}}),(0,r.tZ)("label",{htmlFor:e.key,css:[p.l0.fontSize(12),p.l0.cursor.pointer],children:(0,r.tZ)("abbr",{title:e.description,css:[{textDecorationColor:p.TV.foregroundDimmest}],children:e.friendlyName})})]},e.key)}))})]}),(0,r.tZ)(VB,{performPaneOperation:n,manifest:u,update:function(e){var n=Ck.r$(l.manifestStr,e);l.writeChange((0,yB.F)(l.manifestStr,n)),c(n)}})]}):(0,r.tZ)("div",{children:"unknown state"})}var JB=t(59177),eU=t(15436);function nU(){var e=(0,g.Z)(["\n  query ExtensionOwner($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return nU=function(){return e},e}function tU(){var e=(0,g.Z)(["\n  mutation DeployExtension(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n  ) {\n    deployExtension(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return tU=function(){return e},e}function rU(){var e=(0,g.Z)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return rU=function(){return e},e}var iU={},oU=(0,Z.Ps)(nU());var aU=(0,Z.Ps)(tU(),JC.R9);var lU=(0,Z.Ps)(rU());var cU,sU=t(97766),uU=t(44094),dU=t(18837),pU=t(49313),fU=d.K.button;!function(e){e.Pending="pending",e.Active="active",e.Complete="complete",e.Error="error"}(cU||(cU={}));var hU,vU=function(){return(0,r.tZ)(d.G,{css:[p.l0.flex.row,p.l0.flex.grow(1),p.l0.border({color:p.TV.outlineDimmest,direction:"top"})]})},mU=function(e){var n=e.text,t=e.size,i=void 0===t?"default":t,o=e.state,a=e.onClick,l=e.disabled,c=e.hideLoadingIcon,s=(0,J.TS)(i),u=(0,J.m2)(i);return(0,r.tZ)(fU,{type:"button",css:[p.l0.reset.button,p.l0.position.relative,a&&te.gU.nofill,p.l0.px(8),p.l0.py(2),p.l0.borderRadius(4),p.l0.rowWithGap(4),p.l0.align.center,{borderRadius:p.TV.borderRadiusRound}].concat((0,We.Z)(o===cU.Error?[p.l0.color.accentNegativeStronger]:o===cU.Active?[p.l0.backgroundColor.accentPrimaryDimmer,p.l0.color.accentPrimaryStrongest]:o===cU.Complete?[p.l0.color.accentPositiveStronger]:[p.l0.color.foregroundDimmest])),onClick:a,disabled:l,children:(0,r.tZ)(J.BQ,{text:n,iconSize:u,textVariant:s,iconRight:function(){if(o===cU.Error)return(0,r.tZ)(tm.Z,{});if(o===cU.Active){if(c)return;return(0,r.tZ)(se.Z,{})}return o===cU.Complete?(0,r.tZ)(Sn.Z,{}):(0,r.tZ)(Bh.Z,{})}()})})};!function(e){e.Details="Details",e.Init="Init",e.Building="Building",e.BuildError="BuildError",e.Validating="Validating",e.ValidationError="ValidationError",e.CreatingExtension="CreatingExtension",e.CreatingExtensionError="CreatingExtensionError",e.Deploying="Deploying",e.DeployError="DeployError",e.Success="Success"}(hU||(hU={}));var gU,ZU=[hU.Building,hU.Validating,hU.CreatingExtension,hU.Deploying];!function(e){e.Details="Details",e.Init="Configure",e.Build="Build",e.Validate="Validate",e.Create="Create",e.Deploy="Deploy"}(gU||(gU={}));var bU=[gU.Details,gU.Init,gU.Build,gU.Validate,gU.Deploy];function yU(e){var n,t=e.performPaneOperation,i=function(){return te?"Build error: ".concat(te):ae?"Validation error: ".concat(ae):ae?"Create extension error: ".concat(de):he?"Deploy error: ".concat(he):void 0},o=(0,re.Z)(),a=o.container,s=o.fs,u=o.dotReplit,f=(0,l.Z)(function(e){var n=(0,m.Z)({},iU,e);return wu.t(oU,n)}(),1)[0],v=(n="publish",(0,lh.o)("extensions-onboarding-checklist-".concat(n)).setAsDone),g=(0,oS.d)(),Z=(0,l.Z)(c.useState(null),2),y=Z[0],x=Z[1],w=(0,l.Z)(c.useState(hU.Details),2),k=w[0],C=w[1],S=(0,l.Z)(c.useState(null),2),I=S[0],T=S[1],E=RB(),R=E.__status,G=E.parsed,P=E.state,D=E.updateManifest,B=(0,eU.Y)("",(function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}})),U=B.value,A=B.setValue,L=B.error,O=B.validate,_=(0,l.Z)(c.useState([]),2),X=_[0],z=_[1],M=(0,c.useCallback)((function(e){return t({operation:"open",secondary:!0,pane:{type:(0,qn.Dp)(e),data:e}})}),[t]),j=(0,l.Z)((0,dU.Z)({openFile:M,listFiles:s.listFiles}),2),W=j[0],N=j[1],F=(0,pU.f)();c.useEffect((function(){W&&(W.clear(),X.forEach((function(e){W.write(e.replaceAll("\n","\r\n"))})))}),[X,W]);var V=c.useCallback((function(e){if(null===e||void 0===e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension)return x(null),T(null),void A(null);n.buildCommand&&T(n.buildCommand),n.outputDirectory&&A(n.outputDirectory),n.extensionID&&x(n.extensionID)}}),[A]);c.useEffect((function(){var e=!1;return(0,Hn.Z)((function(){var n;return(0,Yn.__generator)(this,(function(t){switch(t.label){case 0:return[4,u.getConfig()];case 1:return n=t.sent(),e?[2]:(V(n),[2])}}))}))(),function(){e=!0}}),[u,V]);var H=c.useCallback(function(){var e=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return x(e),[4,u.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[u]),Y=c.useCallback(function(){var e=(0,Hn.Z)((function(e){return(0,Yn.__generator)(this,(function(n){switch(n.label){case 0:return T(e),[4,u.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[u]),q=(0,l.Z)(c.useState(null),2),K=q[0],$=q[1],ee=(0,l.Z)(c.useState(null),2),te=ee[0],ie=ee[1],oe=(0,l.Z)(c.useState(null),2),ae=oe[0],ce=oe[1],ue=(0,l.Z)(c.useState(null),2),de=ue[0],pe=ue[1],fe=(0,l.Z)(c.useState(null),2),he=fe[0],ve=fe[1],me=(0,l.Z)(function(e){var n=(0,m.Z)({},iU,e);return b.D(aU,n)}(),1)[0],ge=(0,Ie.Z)(),Ze=(0,l.Z)(function(e){var n=(0,m.Z)({},iU,e);return b.D(lU,n)}(),1)[0],be=(0,l.Z)(c.useState(null),2),ye=be[0],xe=be[1],we=c.useCallback(function(){var e=(0,Hn.Z)((function(e){var n,t,r,i,o;return(0,Yn.__generator)(this,(function(a){switch(a.label){case 0:return n=e.name,t=e.description,[4,Ze({variables:{name:n,description:t}})];case 1:if((i=a.sent()).errors)return[2,{error:i.errors.map((function(e){return e.message})).join(", "),result:null}];if(!(o=null===(r=i.data)||void 0===r?void 0:r.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===o.__typename||"UserError"===o.__typename||"UnauthorizedError"===o.__typename)return[2,{error:"Failed to create extension: "+o.message,result:null}];if("Extension"===o.__typename)return[2,{error:null,result:o}];throw new Error("Unexpected response from createExtension mutation")}}))}));return function(n){return e.apply(this,arguments)}}(),[Ze]),ke=c.useCallback(function(){var e=(0,Hn.Z)((function(e,n){var t;return(0,Yn.__generator)(this,(function(r){return t=a.client(),[2,new Promise((function(r){var i=t.openChannel({service:"exec"},(function(t){var o=t.channel,a="";o.onCommand((function(e){e.output&&(a+=e.output,n(e.output))})),o.request({exec:{args:["bash","-c",e],env:null}}).then((function(e){e.channelClosed?r({error:"Channel closed",output:a||null}):("open"===o.status&&i(),e.error?r({error:e.error,output:a||null}):r({output:a,error:null}))}))}))}))]}))}));return function(n,t){return e.apply(this,arguments)}}(),[a]),Ce=c.useCallback((0,Hn.Z)((function(){var e,n,t,r,i,o,l,c,u,d,p,m,Z,b,x;return(0,Yn.__generator)(this,(function(w){switch(w.label){case 0:return e=y,[4,O()];case 1:if(null===(n=w.sent())||void 0===n?void 0:n.message)return ce(null===n||void 0===n?void 0:n.message),[2];if(!U)throw new Error("expected output folder");return t=(0,BS.AH)(U),(r=function(){C(hU.Init),z([]),ve(null),ce(null),ie(null),$(null)})(),C(hU.Building),[4,s.flush()];case 2:return w.sent(),I?[4,ke(I,(function(e){z((function(n){return n?(0,We.Z)(n).concat([e]):[e]}))}))]:[3,4];case 3:if((i=w.sent()).error)return C(hU.BuildError),ie(i.error+" "+(i.output||" ")),[2];w.label=4;case 4:return C(hU.Validating),[4,a.exec("test","-d",t)];case 5:return w.sent().error?(C(hU.ValidationError),ce("The output folder ".concat(t," does not exist. Please create it and ensure the path is relative to your project's root directory.")),[2]):[4,s.readFile("".concat(t,"/extension.json"),{fromDisk:!0})];case 6:if((o=w.sent()).error)return C(hU.ValidationError),ce("The output folder ".concat(t," does not have an extension.json file. Please make sure you have an extension.json file in your output folder.")),[2];l=o.content.toString("utf8");try{c=Ck.ku(l)}catch(k){return C(hU.ValidationError),ce("The extension.json file in the output folder ".concat(t," is not a valid JSON file: ").concat(k)),[2]}return(u=(0,zd.U4)(c)).error?(C(hU.ValidationError),ce("The extension.json file in the output folder ".concat(t," is not a valid manifest: ").concat(u.error.issues.map((function(e){return"".concat(e.path,": ").concat(e.message)})))),[2]):e?[4,f({variables:{extensionId:e}})]:[3,12];case 7:if((d=w.sent()).error||!d.data)throw new Error("Encountered an unknown error. Please contact support.");return"NotFoundError"!==(null===(p=d.data.extension)||void 0===p?void 0:p.__typename)?[3,9]:[4,new Promise((function(n){xe({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){xe(null),n(e)}})}))];case 8:return w.sent()?(e=null,[3,12]):(r(),[2]);case 9:return"Extension"!==(null===p||void 0===p?void 0:p.__typename)||p.user.id===g?[3,11]:[4,new Promise((function(n){xe({message:"The extension referenced in .replit (".concat(e,") belongs to another user. Would you like to create a new extension?"),callback:function(e){xe(null),n(e)}})}))];case 10:return w.sent()?(e=null,[3,12]):(r(),[2]);case 11:if("Extension"!==(null===p||void 0===p?void 0:p.__typename)||p.user.id!==g)throw new Error("Encountered an unknown error. Please contact support.");w.label=12;case 12:return e?[3,14]:(C(hU.CreatingExtension),[4,we({description:u.manifest.description,name:u.manifest.name})]);case 13:if(null!==(m=w.sent()).error)return C(hU.CreatingExtensionError),pe(m.error),[2];e=m.result.id,H(e),w.label=14;case 14:if(!e)throw new Error("expected extension id to be set");return[4,(0,uU.r)(a,t)];case 15:w.sent(),C(hU.Deploying),w.label=16;case 16:return w.trys.push([16,18,,19]),[4,me({variables:{extensionId:e,replId:ge,outputDirectory:t}})];case 17:return Z=w.sent(),[3,19];case 18:return b=w.sent(),C(hU.DeployError),b.message.includes("received message larger than max")?(ve("Your extension's size is too large. Please compress assets or remove files, and try again."),[2]):(ve(b.message),[2]);case 19:return Z.errors?(C(hU.DeployError),ve("Internal error. Please contact support: "+Z.errors.map((function(e){return e.message})).join(", ")),[2]):Z.data?"Extension"===(x=Z.data.deployExtension).__typename?x.url?(v(),(0,h.j)(h.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),C(hU.Success),$(x),[2]):(C(hU.DeployError),ve("Encountered an unknown error. Please contact support."),[2]):"message"in x?(C(hU.DeployError),ve(x.message),[2]):(C(hU.DeployError),ve("Encountered an unknown error. Please contact support."),[2]):(C(hU.DeployError),ve("Encountered an unknown error. Please contact support."),[2])}}))})),[ke,I,a,U,O,ge,s,C,me,g,f,y,we,H,v]),Se=function(e){switch(e){case hU.Details:return gU.Details;case hU.Init:return gU.Init;case hU.Building:case hU.BuildError:return gU.Build;case hU.Validating:case hU.ValidationError:return gU.Validate;case hU.CreatingExtension:case hU.CreatingExtensionError:return gU.Create;case hU.Deploying:case hU.DeployError:return gU.Deploy;default:return gU.Details}}(k),Te=bU.indexOf(Se),Ee=(0,QC.Mu)().find((function(e){return e.extensionId===y})),Re=(0,l.Z)(c.useState(!1),2),Ge=Re[0],Pe=Re[1],De=(0,QC.WF)(),Be=c.useMemo((function(){return Ge?(0,r.tZ)(se.Z,{}):Ee?(0,r.tZ)(Sn.Z,{}):(0,r.tZ)(Id.Z,{})}),[Ge,Ee]),Ue=(0,Qv.F)().values.global,Ae=(0,qc.$0)().fireBurst,Le=(0,l.Z)(c.useState(!1),2),Oe=Le[0],_e=Le[1],Xe=c.useRef(null);if((0,c.useEffect)((function(){Xe.current&&!Oe&&k===hU.Success&&(Ae({x:Xe.current.getBoundingClientRect().left,y:Xe.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,qc.hd)(300,5e3)},size:function(){return{width:(0,qc.hd)(8,16),height:(0,qc.hd)(8,16)}},color:[Ue.tealStronger,Ue.blurpleStronger,Ue.yellowStronger]}),Ae({x:Xe.current.getBoundingClientRect().right,y:Xe.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,qc.hd)(300,5e3)},size:function(){return{width:(0,qc.hd)(8,16),height:(0,qc.hd)(8,16)}},color:[Ue.blueStronger,Ue.greenStronger,Ue.pinkStronger]}),_e(!0))}),[k,Ue,Ae,Oe]),R===wB.loading)return(0,r.tZ)(vB,{});if(R===wB.fileReadError)return(0,r.tZ)(GB,{message:P.fileReadError});var ze=G.manifest,Me=G.error;return Me?(0,r.tZ)(ZB,{performPaneOperation:t,manifestPath:P.manifestPath,error:Me}):(0,r.BX)(d.G,{css:[p.l0.flex.column,p.l0.display.flex,p.l0.height("100%"),p.l0.justify.center,p.l0.align.center,p.l0.position.relative],children:[(0,r.tZ)(d.G,{css:[p.l0.position.absolute,p.l0.top(0),p.l0.left(0),p.l0.right(0)],className:"Confetti",innerRef:Xe}),(0,r.BX)(d.G,{css:[p.l0.p(12),p.l0.pt(16),p.l0.colWithGap(24),p.l0.flex.growAndShrink(1),p.l0.width("100%"),p.l0.maxWidth(sU.Y)],children:[k!==hU.Success?(0,r.BX)(r.HY,{children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(ne.xv,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,r.tZ)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:bU.map((function(e,n){return(0,r.BX)(c.Fragment,{children:[0!==n&&(0,r.tZ)(vU,{}),(0,r.tZ)(mU,{state:(t=n,t<Te?cU.Complete:t===Te?[hU.BuildError,hU.ValidationError,hU.CreatingExtensionError,hU.DeployError].includes(k)?cU.Error:cU.Active:cU.Pending),text:e,hideLoadingIcon:e===gU.Init||e===gU.Details})]},e);var t}))})]}),k===hU.Details?(0,r.tZ)(d.G,{css:[p.l0.flex.column,p.l0.colWithGap(8),p.l0.width("100%")],children:(0,r.tZ)(MB,{manifest:ze,updateManifest:D,onSubmit:function(e){D((0,m.Z)({},ze,e)),C(hU.Init)}})}):null,k!==hU.Details?(0,r.BX)(r.HY,{children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(16)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(Lh.Z,{}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:"Build settings"}),(0,r.tZ)(d.G,{css:[p.l0.flex.grow(1),p.l0.border({color:p.TV.backgroundHighest,direction:"y"})]})]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(4)],children:[(0,r.BX)("label",{htmlFor:"buildCommand",css:[p.l0.display.flex,p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,r.tZ)(le.u,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,r.tZ)(kT.Z,{size:12})})]}),(0,r.tZ)(Hp.II,{value:null!==I&&void 0!==I?I:"",onChange:function(e){return Y(e.target.value)},placeholder:"Example: npm run build",disabled:k!==hU.Init&&ZU.includes(k)})]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(4)],children:[(0,r.BX)("label",{htmlFor:"outputFolder",css:[p.l0.display.flex,p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(ne.xv,{color:"dimmer",variant:"small",children:"Output folder"}),(0,r.tZ)(le.u,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,r.tZ)(kT.Z,{size:12})})]}),(0,r.tZ)(Hp.II,{id:"outputFolder",value:null!==U&&void 0!==U?U:"",disabled:k!==hU.Init&&ZU.includes(k),onChange:function(e){A(e.currentTarget.value),u.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),L?(0,r.tZ)(ne.xv,{css:[p.l0.color.accentNegativeStronger],children:L.message}):null]}),(0,r.tZ)(J.zx,{text:k===hU.Init||k.endsWith("Error")?"Deploy and Release":"Deploying\u2026",iconLeft:k===hU.Init||k.endsWith("Error")?(0,r.tZ)(Th.Z,{}):(0,r.tZ)(se.Z,{}),onClick:Ce,disabled:k!==hU.Init&&ZU.includes(k),colorway:"primary"}),(0,r.BX)(ne.xv,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,r.tZ)("a",{href:lt.Gu.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),X.length>0?(0,r.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(NE.Z,{}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:"Build logs"}),(0,r.tZ)(d.G,{css:[p.l0.flex.grow(1),p.l0.border({color:p.TV.backgroundHighest,direction:"y"})]})]}),i()?(0,r.tZ)(Xn.E,{text:i(),colorway:"red",icon:(0,r.tZ)(Ch.Z,{})}):null,(0,r.tZ)(d.G,{css:[p.l0.display.flex,p.l0.py(12),p.l0.pl(16),p.l0.borderRadius(8),p.l0.overflow("hidden"),{border:"1px solid var(--outline-dimmest)",backgroundColor:null===F||void 0===F?void 0:F.background}],children:(0,r.tZ)(d.K.div,{css:[p.l0.width("100%"),p.l0.maxWidth("100%")],ref:N})})]}):null,ye?(0,r.BX)(Q.Tg,{elevated:!0,css:[p.l0.colWithGap(8),p.l0.p(8),p.l0.borderRadius(8)],children:[(0,r.tZ)(ne.xv,{variant:"text",multiline:!0,maxLines:3,children:ye.message}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(J.zx,{text:"No",css:[p.l0.flex.grow(1)],onClick:function(){return ye.callback(!1)}}),(0,r.tZ)(J.zx,{text:"Yes",colorway:"primary",css:[p.l0.flex.grow(1)],onClick:function(){return ye.callback(!0)}})]})]}):null]}):null]}):null,K?(0,r.BX)(d.G,{css:[p.l0.colWithGap(16)],children:[(0,r.BX)(d.G,{css:[p.l0.colWithGap(4)],children:[(0,r.tZ)(ne.xv,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,r.tZ)(ne.xv,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,r.tZ)(d.G,{css:[p.l0.py(8)],children:(0,r.tZ)(JB.m,{showMetadata:!1,extension:K,onClick:function(){t({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,Gu.T8)(K.id)}}})}})}),(0,r.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(HB.Z,{}),(0,r.tZ)(ne.xv,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,r.tZ)(d.G,{css:[p.l0.flex.grow(1),p.l0.border({color:p.TV.backgroundHighest,direction:"y"})]})]}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(8),p.l0.p(12),p.l0.border({color:p.TV.outlineDimmest}),p.l0.borderRadius(8)],children:[(0,r.tZ)(ne.xv,{variant:"subheadDefault",children:"Install your Extension"}),(0,r.tZ)(ne.xv,{color:"dimmer",children:"Once installed, you can use the extension in any of your Repls."}),(0,r.tZ)(J.zx,{text:Ee?"Already installed":"Install Extension",colorway:Ee?"green":"primary",disabled:Ge||!!Ee,iconLeft:Be,loading:Ge,onClick:(0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return Pe(!0),[4,De({extensionId:(0,Gu.T8)(K.id),replId:null})];case 1:return e.sent(),Pe(!1),[2]}}))}))})]})]}):null]})]})}var xU=t(36129),wU=t(41143),kU=(0,de.X)({logViewerTopLevel:[p.l0.height("100%")],logsContainer:[p.l0.scrollbar.thin,p.l0.backgroundColor.backgroundDefault,p.l0.overflowY("scroll"),p.l0.flex.growAndShrink(1)],logViewerHeader:[p.l0.p(8),p.l0.border({direction:"bottom",width:p.TV.borderWidthDefault}),p.l0.display.flex,p.l0.flex.row,p.l0.rowWithGap(8),p.l0.align.center],logViewerHeaderControl:[p.l0.flex.row,p.l0.rowWithGap(4),p.l0.align.center],logLine:[p.l0.p(2),p.l0.font.code,te.gU.listItem,p.l0.rowWithGap(2),p.l0.align.center],logLineIcon:[p.l0.p(4),{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function CU(e){var n=e.log,t=e.prevLevel,i=e.isLast,o=e.isFirst,a=function(){return n.logLevel===xU.i.warn?(0,r.tZ)(tm.Z,{size:16}):n.logLevel===xU.i.error?(0,r.tZ)(Ch.Z,{size:16}):(0,r.tZ)(kT.Z,{size:16,css:{opacity:0}})},s=(0,l.Z)(c.useState(!1),2),u=s[0],f=s[1],h=(0,wD.Z)().ref;return(0,r.BX)(d.G,{css:[p.l0.flex.column,function(e){if(e===xU.i.warn)return{color:p.TV.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:o?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:i?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===xU.i.error)return{color:p.TV.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:o?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:i?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var n=p.TV.backgroundHigher;return t===xU.i.warn?n="rgba(150, 125, 0, 0.5)":t===xU.i.error&&(n="rgba(229, 34, 34, 0.5)"),{color:p.TV.foregroundDefault,borderTop:o?void 0:"1px solid ".concat(n),borderBottom:i?"1px solid ".concat(n):void 0}}(n.logLevel)],children:[(0,r.BX)(d.G,{css:kU.logLine,onClick:function(){return f((function(e){return!e}))},children:[(0,r.tZ)(d.G,{css:kU.logLineIcon,children:(0,r.tZ)(a,{})}),(0,r.tZ)(ne.xv,{maxLines:10,css:kU.logMessage,variant:"small",children:n.message}),u?(0,r.tZ)(vs.Z,{size:16}):(0,r.tZ)(Lu.Z,{size:16})]}),u?(0,r.tZ)(d.G,{children:(0,r.tZ)(xD.ZP,{ref:h,css:wU.Mp,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(n,null,2)})}):null]})}var SU=function(){var e=(0,jx.ZC)(Ru.ep),n=(0,jx.E4)(Ru.UB),t=(0,l.Z)((0,jx.OA)(Ru.UT),2),i=t[0],o=t[1],a=c.useRef(null);return c.useEffect((function(){var e,n=a.current;n&&(null===(e=n.children[n.children.length-1])||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),(0,r.BX)(d.G,{css:kU.logViewerTopLevel,children:[(0,r.BX)(d.G,{className:"log-viewer-header",css:kU.logViewerHeader,children:[(0,r.tZ)(d.G,{css:kU.logViewerHeaderControl,style:{flexGrow:1},children:(0,r.tZ)(Hp.II,{type:"search",placeholder:"Filter logs",value:null!==i&&void 0!==i?i:"",onChange:function(e){return o(e.target.value)}})}),(0,r.BX)(d.G,{css:kU.logViewerHeaderControl,children:[(0,r.tZ)(ee.hU,{alt:"Clear logs",onClick:function(){return n()},children:(0,r.tZ)(xp.Z,{id:"clear-logs"})}),(0,r.tZ)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,r.tZ)(d.G,{css:kU.logsContainer,innerRef:a,children:e.map((function(n,t){var i;return(0,r.tZ)(CU,{log:n,prevLevel:null===(i=e[t-1])||void 0===i?void 0:i.logLevel,isFirst:0===t,isLast:t===e.length-1},n.index)}))})]})},IU=t(43594);function TU(e){var n=e.performPaneOperation,t=(0,l.Z)(c.useState(0),2),i=t[0],o=t[1];return(0,r.tZ)(d.G,{css:[p.l0.flex.column,p.l0.height("100%"),p.l0.position.relative],children:(0,r.BX)(dR.mQ,{css:[p.l0.flex.grow(1),p.l0.flex.column,p.l0.align.center,p.l0.display.flex,p.l0.overflow("hidden")],selectedIndex:i,onSelectionChange:function(e){return o(e)},children:[(0,r.tZ)(Q.Tg,{css:[p.l0.align.center,p.l0.top(0),p.l0.width("100%"),p.l0.zIndex(1)],children:(0,r.BX)(dR.td,{css:[p.l0.align.center,p.l0.width("100%"),p.l0.pb(0),p.l0.maxWidth(sU.Y)],children:[(0,r.tZ)(dR.OK,{css:[p.l0.p(12),p.l0.height("100%"),p.l0.borderRadius(0)],iconLeft:(0,r.tZ)(IU.Z,{}),children:"Home"}),(0,r.tZ)(dR.OK,{css:[p.l0.p(12),p.l0.height("100%"),p.l0.borderRadius(0)],iconLeft:(0,r.tZ)(Xm.Z,{}),children:"Releases"}),(0,r.tZ)(dR.OK,{css:[p.l0.p(12),p.l0.height("100%"),p.l0.borderRadius(0)],iconLeft:(0,r.tZ)(Ch.Z,{}),children:"Logs"}),(0,r.tZ)(d.G,{css:p.l0.flex.grow(1)}),(0,r.tZ)(Q.Tg,{css:[p.l0.p(8),{boxShadow:"inset 0 -1px 0 var(--outline-dimmest)"}],children:(0,r.tZ)(J.zx,{text:"Docs",onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:lt.TT.EXTENSIONS}}})},variant:"outlined",size:"small",iconLeft:(0,r.tZ)(ds.Z,{}),css:[p.l0.display.inlineFlex]})})]})}),(0,r.BX)(dR.nP,{css:[p.l0.flex.grow(1),p.l0.align.center,p.l0.justify.center,p.l0.width("100%"),p.l0.display.flex,p.l0.overflow("hidden")],children:[(0,r.tZ)(dR.x4,{css:[p.l0.height("100%"),p.l0.p(12),p.l0.maxWidth(sU.Y),p.l0.display.flex,p.l0.width("100%"),p.l0.justify.center,p.l0.overflowY("scroll")],children:(0,r.tZ)(QB,{performPaneOperation:n,setSelectedTab:o})}),(0,r.tZ)(dR.x4,{css:[p.l0.height("100%"),p.l0.width("100%"),p.l0.overflowY("scroll")],children:(0,r.tZ)(yU,{performPaneOperation:n})}),(0,r.tZ)(dR.x4,{css:[p.l0.height("100%"),p.l0.width("100%")],children:(0,r.tZ)(SU,{})})]})]})})}var EU=Ou.Type.Object({type:Ou.Type.Literal("extensionDevtools")}),RU={Content:function(e){var n=e.options.performPaneOperation;return(0,r.tZ)(TU,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,r.tZ)(eb.Z,{size:n})},getTitle:function(){return"Extensions Devtools"},decode:function(e){return Fu.B4.Decode(EU,e)}};function GU(){var e=(0,YI.U)();return(0,oe.Z)((0,m.Z)({},e),{webview:Kx,commands:qI,debugger:gT,docs:CR,chat:GR,threadInbox:jE,tutorial:$E,videoPlayer:TR,extension:iR,extensionStore:uR,replAuth:NT,searchReplace:$G,modules:kR,deployments:PR.R,education:BD,autograder:SP,instructions:MD,config:FD,preferences:YD,multiplayer:KI.Z,submitEduRepl:KI.Z,extensionDevtools:RU})}var PU=t(5670),DU=t(67121),BU=t(42586),UU=t(83422),AU=(0,de.X)({root:[p.l0.position.absolute,p.l0.borderRadius(8),p.l0.pt(16),p.l0.align.center,{border:"1px solid",borderColor:p.TV.outlineDimmest}],content:[p.l0.width("100%"),p.l0.flex.growAndShrink(1),{"& > div > label + div":[p.l0.maxWidth(600),p.l0.width("100%"),{alignSelf:"center"}],'& [role="listbox"] > div':[p.l0.align.center],'& [role="listbox"] > div > div':[p.l0.maxWidth("calc(".concat(600,"px - ").concat(p.TV.space16,")")),p.l0.width("100%")],'& [role="option"] > div':[p.l0.borderRadius(8)]}]});function LU(){var e=io(Eo),n=Nl(),t=function(){var e=(0,l.Z)((0,Ib.L)({accept:[Tn.Tv.File,uf.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){r.drag()},drop:function(e){if("nodes"===e.type){var n=(0,qn.ME)(e.nodes);n.length>0&&r.drop({panes:n})}if(e.type===uf.z.NewPane){var t=e.pane;r.drop({panes:[t]})}}}),2),n=e[0].isOver,t=e[1],r=function(e){var n=e.isOver,t=ao(po);return(0,c.useEffect)((function(){n||t(null)}),[n,t]),{drag:ao(Io),drop:ao(To)}}({isOver:n});return t}(),i=Gc({openPane:(0,c.useCallback)((function(e){(0,h.j)(h.U3.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),n({pane:e.pane,edge:"left"})}),[n])});return(0,r.tZ)(d.G,{style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},css:AU.root,innerRef:t,children:(0,r.tZ)(d.G,{css:AU.content,children:(0,r.tZ)(Nn.X,{autoFocus:!0,command:i})})})}var OU=".config/gh/hosts.yml";function _U(){var e=(0,Ie.Z)(),n=(0,re.Z)(),r=n.fs,i=n.secrets,o=(0,qe.Z)(),a=(0,c.useRef)(0),l=(0,u.P5)({controlName:"flag-migrate-gh-creds",default:!1,logFlagToAnalytics:!1});return(0,c.useEffect)((function(){var e=r.watchFilePath(OU,{onChange:function(e){return(0,Hn.Z)((function(){var n,c,s,u,d,p;return(0,Yn.__generator)(this,(function(f){switch(f.label){case 0:return n=++a.current,ww.kg.info("Workspace: sensitive credentials identified",{type:"github",path:".config/gh/hosts.yml"}),l?[4,t.e(487).then(t.bind(t,80487))]:[2];case 1:if(c=f.sent(),n!==a.current)return[2];f.label=2;case 2:return f.trys.push([2,8,,9]),s=c.load(e.toString()),u=Object.keys(s)[0],d=s[u],n!==a.current?[2]:(p=[],"github.com"===u?p.push({key:"GH_TOKEN",value:d.oauth_token}):(p.push({key:"GH_HOST",value:u}),p.push({key:"GH_ENTERPRISE_TOKEN",value:d.oauth_token})),[4,i.writeSecrets(p)]);case 3:if(f.sent(),n!==a.current)return[2];f.label=4;case 4:return f.trys.push([4,6,,7]),[4,r.deleteFile(OU)];case 5:return f.sent().error?o.showError("Failed to remove GitHub authentication token in: ".concat(OU)):o.showNotice("GitHub authentication token safely stored in Secrets"),[3,7];case 6:return f.sent(),o.showError("Failed to remove GitHub authentication token in: ".concat(OU)),[3,7];case 7:return[3,9];case 8:return f.sent(),o.showError("Failed to remove GitHub authentication token in: ".concat(OU)),[3,9];case 9:return[2]}}))}))()}});return function(){e()}}),[r,e,l]),null}var XU=t(20387),zU=t(29580),MU=t(4630),jU=t(90275),WU=t(75441),NU=t(49500);function FU(e){var n=new URL(e.gurl);return n.pathname="/wsv2/".concat(e.token),n.toString()}var VU=function(e,n){var t=function(){var e=(0,Hn.Z)((function(){var e;return(0,Yn.__generator)(this,(function(t){switch(t.label){case 0:return[4,n()];case 1:return e=t.sent(),[2,new WU.Z(FU(e))]}}))}));return function(){return e.apply(this,arguments)}}(),r=new MU.q(t,e);return(0,jU.nb)(NU.log),(0,jU.uR)("info"),[(0,zU.e)(r),function(){return r.close()}]},HU=t(19024),YU=t(20643);var qU=t(13299);function KU(e){var n=e.repl,t=e.currentUser,r=El(),i=ao(Xo),o=(0,Gw.uV)(),a=(0,u.P5)({controlName:"flag-channel-request-priority",logFlagToAnalytics:!1})?void 0:lS.h.High,s=(0,u.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),d=function(e,n){var t=(0,c.useState)(void 0),r=t[0],i=t[1],o=(0,u.P5)({controlName:"flag-pid2",logFlagToAnalytics:!1});return(0,c.useEffect)((function(){if(o&&e){var t=(0,l.Z)(VU(e,(0,Hn.Z)((function(){var t;return(0,Yn.__generator)(this,(function(r){switch(r.label){case 0:return t={replId:n,isLoggedIn:!!e,pid2Version:"ee5d942d41bd0f4367c63bdcb0cb4906f238e1cc"},[4,(0,YU.Z)()];case 1:return[2,HU.Z.apply(void 0,[(t.overrideClusterMetadata=r.sent(),t)])]}}))}))),2),r=t[0],a=t[1];return i(r),a}}),[o,e,n]),r}(t?"".concat(t.username,"-").concat(t.id):void 0,n.id),p=n.flagOutputs?"outputs":"shellrunner",f="html"===n.language?"html":p,h=(0,c.useState)(!1),v=h[0],m=h[1],g=(0,c.useState)(!1),Z=g[0],b=g[1],y=(0,c.useState)(!1),x=y[0],w=y[1],k=(0,xu.e_)();return{services:(0,UU.H)({pid2:d,runnerMode:f,onPresenceCommand:k,onUnrecoverableError:(0,PU.Z)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===DU.Gs.NotAllowed?b(!0):e===DU.Gs.FirewallDenied?m(!0):e===DU.Gs.RequiresRefresh&&w(!0)},throwBsod:o}),openFile:r,openMultipleFiles:i,onFirewallDenied:function(){return m(!0)},enableUserEvents:s,channelRequestPriority:{fs:a,dotReplit:a}}),isFirewallDenied:v,isPleaseRefresh:x,isNotAllowed:Z}}function $U(e){var n=e.repl,t=e.currentUser,i=(0,nn.useRouter)().query,o=Boolean(i.deploymentPane),a=(0,c.useState)((function(){return(0,qn.fK)({config:GU()})}))[0],l=n.layoutState?Ag(n.layoutState,a.decode):null;return(0,r.tZ)(Re.eA,{children:(0,r.tZ)(to,{deploymentPane:o,savedLayoutState:l,isHTML:n.language.startsWith("html"),isStacked:t.editorPreferences.isLayoutStacked,isExtension:Boolean(n.config.isExtension),children:(0,r.tZ)(QU,{ui:a,repl:n,currentUser:t})})})}function QU(e){var n,t=e.repl,i=e.currentUser,o=e.ui,a=KU({repl:t,currentUser:i}),l=a.services,c=a.isFirewallDenied,s=a.isPleaseRefresh,d=a.isNotAllowed;(0,qU.mK)(Boolean(t.layoutState));var p,f=(0,$n.Z)((function(){return(0,Wx._)(null===i||void 0===i?void 0:i.keybindings.keybindings)}),[i]),h=(0,u.P5)({controlName:"flag-warn-gh-creds",default:!1,logFlagToAnalytics:!1});return(0,r.tZ)(Cd.du,{children:(0,r.BX)(aw,{ui:o,services:l,replId:t.id,replSlug:t.slug,replLanguage:t.language,replConfigIsExtension:t.config.isExtension,userKeybindings:f,children:[(0,r.BX)(Gb.Z,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,r.tZ)(Yy,{}),(0,r.tZ)(JZ,{isAdmin:i.isAdmin,isServer:Boolean(t.config.isServer),hostedUrl:t.hostedUrl}),(0,r.tZ)(VI.Z,{replTitle:t.title}),(0,r.tZ)(Cb,{repl:t,currentUser:i}),(0,r.tZ)(Nc,{}),(0,r.tZ)(ik,{}),(0,r.tZ)($C,{repl:t,currentUser:i}),(0,r.tZ)(sw,{}),(0,r.tZ)(rA,{}),(0,r.tZ)(Ow,{container:l.container}),(0,r.tZ)(gw,{}),h?(0,r.tZ)(_U,{}):null,(0,r.tZ)(Ew,{}),(0,r.tZ)(Hw,{}),(0,r.tZ)(eA,{isMultiplayerSession:t.multiplayers.length>0}),(0,r.tZ)(tk,{repl:t}),(0,r.tZ)(_w.Z,{isOpen:c&&!d&&!s}),(0,r.tZ)(Xw.Z,{isOpen:d}),(0,r.tZ)(XU.Z,{isOpen:s}),(0,r.tZ)(pw.E,{}),(0,r.tZ)(FI,{hostedUrl:t.hostedUrl}),(0,r.tZ)(Zw,{}),(0,r.tZ)(BU.Z,{isOwnRepl:(null===(n=t.user)||void 0===n?void 0:n.id)===i.id,userSubscriptionType:null!==(p=i.userSubscriptionType)&&void 0!==p?p:null,runner:l.runner}),(0,r.tZ)(qw,{replId:t.id})]}),(0,r.tZ)(JU,{})]})})}function JU(){var e=(0,l.Z)((0,Gw.qg)(),1)[0],n=$l();return(0,c.useEffect)((function(){e&&n()}),[e,n]),(0,r.tZ)(Rw.Z,{})}function eA(e){var n=function(e){var n=(0,l.Z)(c.useState(!1),2),t=n[0],r=n[1],i=(0,Qw.X)(),o=i&&!i.isDone&&!i.isLoading;return c.useEffect((function(){o||e&&"default"===Kk()&&r(!0)}),[e,o]),{shouldShowModal:t,hideModal:c.useCallback((function(){tC(!0),r(!1)}),[]),confirm:c.useCallback((0,Hn.Z)((function(){return(0,Yn.__generator)(this,(function(e){switch(e.label){case 0:return[4,Jk()];case 1:return e.sent(),r(!1),[2]}}))})),[])}}(e.isMultiplayerSession),t=n.shouldShowModal,i=n.hideModal,o=n.confirm;return t?(0,r.tZ)(zw,{onCancel:i,onConfirm:o}):null}var nA=d.K.div,tA=(0,de.X)({container:[p.l0.height("calc(100% - ".concat(s.Mz,"px)")),p.l0.width("100%"),p.l0.top(s.Mz),p.l0.left(0),p.l0.position.absolute],containerWithGlobalStatusBar:[p.l0.height("calc(100% - ".concat(s.Mz+28+2+4,"px)"))]});function rA(){var e,n=HI(),t=io(tr),i=io(Et),o=io(Rt),a=io(Gt),l=(0,Ta.Z)().preferences,c=null!==(e=vl())&&void 0!==e?e:"",s=al(c),d=(0,vc.Y6)(c),p=Yb(c),f=(0,u.P5)({controlName:"flag-floating-drop-points"}),h=(0,u.P5)({controlName:"flag-global-status-bar",default:!1});return(0,r.tZ)(nA,{ref:n,css:[tA.container,h&&tA.containerWithGlobalStatusBar],children:t?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Cv,{}),(0,r.BX)("main",{id:"main-content",children:[o.map((function(e){return(0,r.tZ)(nu,{handleId:e},e)})),a.map((function(e){return(0,r.tZ)(_x,{headerId:e},e)})),i.map((function(e){return(0,r.tZ)($b,{paneId:e},e)})),0===i.length?(0,r.tZ)(LU,{}):null]}),h?(0,r.tZ)(mv,{activePane:s,activePaneBindings:d,performActivePaneOperation:p}):null,(0,r.tZ)(So,{}),f?null:(0,r.tZ)(il,{}),(0,r.tZ)(dw,{}),(0,r.tZ)(Ix,{}),(0,r.tZ)(Cd.xV,{fontSize:l.fontSize})]}):null})}function iA(e){var n=e.src,t=e.autoPlay,i=void 0===t||t,o=e.loop,a=void 0===o||o,l=e.width,c=void 0===l?280:l;return(0,r.tZ)(d.G,{css:[p.l0.p(4),p.l0.borderRadius(8),p.l0.width(c),p.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(p.TV.outlineDimmest)}],children:(0,r.tZ)("video",{style:{width:"100%"},css:p.l0.borderRadius(8),src:n,autoPlay:i,loop:a,playsInline:!0,muted:!0})})}var oA=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},aA={id:"workspace-desktop-new-user-tour",steps:[{id:Vc.y.Welcome,isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,r.tZ)(d.G,{"data-cy":"workspace-tour-welcome",css:[p.l0.maxWidth(400)],children:(0,r.BX)(ne.xv,{children:["The Workspace is where you create projects on Replit. These are called"," ",(0,r.tZ)("strong",{children:"Repls."}),(0,r.tZ)("br",{}),"Let's explore around!"]})})}},{id:Vc.y.Editor,title:"Code Editor",content:function(){return(0,r.BX)(d.G,{css:[p.l0.width("100%"),p.l0.center,p.l0.position.relative],children:[(0,r.tZ)(iA,{src:oA("editor"),autoPlay:!0,loop:!0}),(0,r.tZ)(d.G,{css:[p.l0.colWithGap(8),p.l0.width("100%"),p.l0.py(8)],children:(0,r.tZ)(ne.xv,{children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:Vc.y.Examples,title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:Vc.y.Run,title:"Run Button",content:function(){return(0,r.BX)(d.G,{css:[p.l0.width("100%"),p.l0.center,p.l0.position.relative],children:[(0,r.tZ)(iA,{src:oA("run-button"),autoPlay:!0,loop:!0}),(0,r.tZ)(d.G,{css:[p.l0.colWithGap(8),p.l0.width("100%"),p.l0.py(8)],children:(0,r.tZ)(ne.xv,{children:"Tap the Run button to \u201crun\u201d your code and see its output."})})]})}},{id:Vc.y.Output,title:"Output",content:function(){return(0,r.BX)(d.G,{css:[p.l0.width("100%"),p.l0.center,p.l0.position.relative],children:[(0,r.tZ)(iA,{src:oA("output"),autoPlay:!0,loop:!0}),(0,r.tZ)(d.G,{css:[p.l0.colWithGap(8),p.l0.width("100%"),p.l0.py(8)],children:(0,r.tZ)(ne.xv,{children:"This is where your run output appears. This can be text, websites, games, and more depending on the template you\u2019re using."})})]})}},{id:Vc.y.Sidepane,title:"Sidebar",content:function(){return(0,r.BX)(d.G,{css:[p.l0.width("100%"),p.l0.center,p.l0.position.relative],children:[(0,r.tZ)(iA,{src:oA("sidebar"),autoPlay:!0,loop:!0}),(0,r.BX)(d.G,{css:[p.l0.colWithGap(8),p.l0.width("100%"),p.l0.p(8)],children:[(0,r.BX)(ne.xv,{children:[(0,r.tZ)("strong",{children:"Files"})," is where all of your Repl\u2019s code is."]}),(0,r.BX)(ne.xv,{children:[(0,r.tZ)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,r.tZ)(ne.xv,{children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:Vc.y.Share,title:"Invite & Collaborate",content:function(){return(0,r.BX)(d.G,{css:[p.l0.width("100%"),p.l0.center,p.l0.position.relative],children:[(0,r.tZ)(iA,{src:oA("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,r.tZ)(d.G,{css:[p.l0.colWithGap(8),p.l0.width("100%"),p.l0.py(8)],children:(0,r.tZ)(ne.xv,{children:"Invite others to your Repl to collaborate and work together at the same time."})})]})}}]};function lA(e){var n=e.children,t=e.tour,i=function(e){var n;o&&t&&"function"===typeof(null===(n=window.analytics)||void 0===n?void 0:n.user)&&(0,h.yV)({id:window.analytics.user().id(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})};if(!t)return(0,r.tZ)(r.HY,{children:n});var o="workspace-desktop-new-user-tour"===t.id;return(0,r.tZ)(Fc.r,{tour:t,onStep:i,onDone:i,children:n})}var cA=t(2088),sA=t(12286),uA=t(92373),dA=t(6325),pA=t(98896);function fA(){var e=(0,g.Z)(["\n  query ReplEnvironmentDesktop(\n    $url: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    repl(url: $url) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n        ...ReplEnvironmentTourRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n        isOwner\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return fA=function(){return e},e}var hA={},vA=(0,Z.Ps)(fA(),z,A,X);var mA=(0,i.iv)([p.l0.position.fixed,p.l0.top(0),p.l0.left(0),p.l0.height("100%"),p.l0.width("100%")]),gA=(0,i.iv)([p.l0.center,p.l0.flex.growAndShrink(1),p.l0.dragRegion]),ZA=function(){var e=null,n=(0,nn.useRouter)().query;if(!n.replUrl)throw new Error("Expected replUrl to be set");var t,i=n.replUrl.toString(),l=function(e){var n=(0,m.Z)({},hA,e);return M.a(vA,n)}({variables:{url:i,environment:(0,dA.O)(),platform:(0,pA.X)()},ssr:Boolean(n.ssr)}),s=l.data,f=l.loading,h=l.error,v=s&&"Repl"===s.repl.__typename?s.repl:null,g=(null===s||void 0===s?void 0:s.currentUser)||void 0,Z="https://replit.com".concat(i),b=null!==(t=null===v||void 0===v?void 0:v.description)&&void 0!==t?t:void 0,y=(0,c.useState)(!1),x=y[0],w=y[1];(0,c.useEffect)((function(){return w(!0)}),[]),function(e,n){var t=(0,nn.useRouter)(),r=(0,u.P5)({controlName:"migrate2nix-enabled",logFlagToAnalytics:!1}),i="Repl"===(null===e||void 0===e?void 0:e.__typename)?e.language:null,o=(0,u.P5)({controlName:"migrate-".concat(i,"-to-nix"),default:!1,logFlagToAnalytics:!1});(0,c.useEffect)((function(){if(r&&o&&"Repl"===(null===e||void 0===e?void 0:e.__typename)&&"nix"!==e.language&&"html"!==e.language){var n=new URL(window.location.href);t.query.skipMigration||n.searchParams.get("skipMigration")||"/migrateReplToNix"!==t.pathname&&(t.query.migrateNonNix||(n.searchParams.set("migrateNonNix","1"),window.location.replace(n)))}}),[e,t,o,r]),(0,c.useEffect)((function(){if("SubscriptionExpiredError"===(null===e||void 0===e?void 0:e.__typename)){var r,i=e.replId,o=e.isOwner,a=n.split("/")[1].slice(1);t.replace({pathname:"/expiredPrivateRepl",query:{isOwner:(r={isOwner:o,ownerUsername:a,replId:i}).isOwner,ownerUsername:r.ownerUsername,replId:r.replId}},t.asPath)}}),[e,t,n])}((null===s||void 0===s?void 0:s.repl)||null,i);var k=function(e){var n=e.repl,t=e.currentUser;return n&&t?null!=n.lesson||t.hasSeenOldWorkspaceTour||t.hasSeenOldSidebarTour?null:aA:null}({repl:v,currentUser:g});return e=h?(0,r.tZ)(d.G,{css:[p.l0.center,p.l0.flex.growAndShrink(1)],children:(0,r.tZ)(ne.xv,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):f||!x?(0,r.tZ)(d.G,{css:gA,children:(0,r.tZ)(cA.Z,{height:100})}):v&&g?k?(0,r.tZ)(lA,{tour:k,children:(0,r.tZ)($U,{repl:v,currentUser:g},v.id)}):(0,r.tZ)($U,{repl:v,currentUser:g},v.id):(0,r.tZ)(d.G,{css:gA,children:(0,r.tZ)(cA.Z,{height:100})}),(0,r.tZ)(o.Z,{children:(0,r.tZ)(a.Z,{dataCy:"workspace-page",title:"".concat((null===v||void 0===v?void 0:v.title)||""),oembedUrl:Z,description:b,noHeader:!0,noFooter:!0,noMain:!0,noSidebar:!0,hideEmailVerify:!0,children:(0,r.BX)(Q.Tg,{css:mA,children:[(0,r.tZ)(sA.g,{}),(0,r.tZ)(uA.G,{}),e]})})})}},8938:function(e,n,t){"use strict";t.d(n,{Pc:function(){return y},Pu:function(){return C}});var r=t(72006),i=t(43119),o=t(71440),a=t(50531);function l(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplateMember on TeamMembership {\n    id\n    user {\n      id\n      image\n      username\n      firstName\n      lastName\n    }\n    nickname\n    email\n    permissions\n  }\n"]);return l=function(){return e},e}var c=(0,o.Ps)(l()),s=t(8619),u=t(24635);function d(){var e=(0,i.Z)(["\n  fragment TeamTemplateUser on User {\n    id\n    username\n    displayName\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...TeamTemplateUser\n    }\n    repl {\n      id\n      title\n      timeCreated\n      template {\n        id\n        dueDate\n      }\n      ...ReplLinkRepl\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment TeamTemplateSubmissionGroup on ReplSubmissionGroup {\n    submission {\n      id\n      timeSubmitted\n      timeLastReviewed\n      isGroupSubmission\n      repl {\n        id\n        url\n        nextPagePathname\n      }\n    }\n    users {\n      id\n      ...TeamTemplateUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplate on ReplTemplate {\n    id\n    isGroupProject\n    isPublished\n    imageUrl\n    url\n    dueDate\n    repl {\n      id\n    }\n    team {\n      id\n      username\n      displayName\n      members {\n        id\n        ...TeamTemplateReplTemplateMember\n      }\n    }\n    author {\n      id\n      username\n      image\n      ...UserLinkUser\n    }\n    submissions {\n      id\n      ...TeamTemplateReplSubmission\n    }\n    submissionGroups {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamTemplateRepl on Repl {\n    id\n    title\n    slug\n    description\n    ...ReplLinkRepl\n    template {\n      id\n      ...TeamTemplateReplTemplate\n    }\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  query TeamTemplate($replUrl: String!) {\n    repl(url: $replUrl) {\n      ... on Repl {\n        id\n        ...TeamTemplateRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n        repl {\n          id\n        }\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},Z=(0,o.Ps)(d()),b=(0,o.Ps)(p(),Z,a.Y),y=(0,o.Ps)(f(),Z),x=(0,o.Ps)(h(),c,s._,b,y),w=(0,o.Ps)(v(),a.Y,x),k=(0,o.Ps)(m(),w);function C(e){var n=(0,r.Z)({},g,e);return u.a(k,n)}},91813:function(e,n,t){"use strict";t.d(n,{D$:function(){return l},Ex:function(){return r},OH:function(){return a}});var r,i=t(57135),o=t(96583);!function(e){e.Initializing="initialize",e.Connecting="connect",e.GettingInitialConfig="get init config",e.ImportingMigrationTemplate="import migration template",e.MergeDotReplit="merge dot replit",e.ExecingPostMigration="exec post migration",e.UpdatingLanguage="set language",e.Finished="finished",e.Failed="error"}(r||(r={}));var a=".cache/replit/migrate2nix";function l(e){return c.apply(this,arguments)}function c(){return(c=(0,i.Z)((function(e){var n,t,r,i,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.fs,t=e.templateId,[4,n.stat(a)];case 1:return o.sent().exists?(r=[],t?(i="".concat(a,"/").concat(t),[4,n.stat(i)]):[3,3]):[2,[]];case 2:o.sent().exists&&r.push(i),o.label=3;case 3:return l="".concat(a,"/_"),[4,n.stat(l)];case 4:return o.sent().exists&&r.push(l),[2,r]}}))}))).apply(this,arguments)}}},function(e){e.O(0,[6105,2799,3993,3709,711,2100,130,2550,3084,1869,668,2456,610,5995,5753,9538,5878,7243,8814,1207,7721,4001,5859,2003,8521,7225,8873,3398,1273,7929,8859,6865,2068,966,4377,3266,9749,3032,6821,851,358,937,9863,4165,2254,7542,3207,9774,2888,179],(function(){return n=90017,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
//# sourceMappingURL=replEnvironmentDesktop-5bb275bfdfab4b19.js.map