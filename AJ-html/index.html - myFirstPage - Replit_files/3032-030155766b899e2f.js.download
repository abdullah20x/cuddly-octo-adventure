!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="ef807c7d-d0e9-47e7-a68b-513c3f06cb50",n._sentryDebugIdIdentifier="sentry-dbid-ef807c7d-d0e9-47e7-a68b-513c3f06cb50")}catch(n){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"dd1337ad"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3032],{45987:function(n,e,t){t.d(e,{Fh:function(){return m},IN:function(){return Z},s7:function(){return w}});var r=t(72006),o=t(43119),i=t(71440),u=t(88207),a=t(24635),s=t(50216);function l(){var n=(0,o.Z)(["\n  fragment HostingTierReplPowerUps on Repl {\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        hostingTier {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return l=function(){return n},n}function c(){var n=(0,o.Z)(["\n  fragment HostingTierPowerUpCostDetails on PowerUpCostsType {\n    hostingTierE2Micro {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Small {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Medium {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierN1Custom1_4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard2 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n  }\n"]);return c=function(){return n},n}function d(){var n=(0,o.Z)(["\n  fragment HostingTierPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      __typename\n      ... on PowerUpCostsType {\n        ...HostingTierPowerUpCostDetails\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return n},n}function p(){var n=(0,o.Z)(["\n  query HostingTierPowerUp($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          __typename\n        }\n        ...HostingTierReplPowerUps\n        ...HostingTierPowerUpCosts\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return n},n}function f(){var n=(0,o.Z)(["\n  mutation SetHostingTier($input: SetHostingTierInput!) {\n    setHostingTier(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on SetHostingTierResult {\n        repl {\n          ... on Repl {\n            ...HostingTierReplPowerUps\n            ...HostingTierPowerUpCosts\n          }\n        }\n        currentUser {\n          ...PowerUpMutationReturnFields\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return f=function(){return n},n}var g={},m=(0,i.Ps)(l()),y=(0,i.Ps)(c()),v=(0,i.Ps)(d(),y),h=(0,i.Ps)(p(),m,v);function w(n){var e=(0,r.Z)({},g,n);return a.a(h,e)}var D=(0,i.Ps)(f(),m,v,u.E_);function Z(n){var e=(0,r.Z)({},g,n);return s.D(D,e)}},89855:function(n,e,t){t.d(e,{BX:function(){return Z},VR:function(){return D},hD:function(){return P}});var r,o=t(57389),i=t(74985),u=t(88965),a=t(53312),s=t(26473),l=t(51631),c=t(27773),d=t(78572),p=t(69600),f=t(61025),g=t(16296),m=t(91888),y=t(16572),v=t(79824),h=t(74970),w=t(95183),D=(r={},(0,o.Z)(r,l.Fe.Suspended,{title:"Paused",color:u.TV.greyDefault,colorway:"grey",icon:(0,i.tZ)(h.Z,{})}),(0,o.Z)(r,l.Fe.UpdatingTier,{title:"Updating tier",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,l.Fe.Suspending,{title:"Pausing",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,l.Fe.Resuming,{title:"Resuming",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,l.Fe.Pending,{title:"Provisioning",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,l.Fe.Building,{title:"Building",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,l.Fe.Running,{title:"Bundling",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,l.Fe.Promoting,{title:"Promoting",color:u.TV.orangeStronger,colorway:"orange",icon:(0,i.tZ)(w.Z,{})}),(0,o.Z)(r,l.Fe.Failed,{title:"Failed",color:u.TV.accentNegativeDefault,colorway:"negative",icon:(0,i.tZ)(v.Z,{})}),(0,o.Z)(r,l.Fe.Success,{title:"Deployed",color:u.TV.accentPositiveDefault,colorway:"positive"}),r);function Z(n){switch(n){case l.Fe.Building:case l.Fe.Promoting:case l.Fe.Running:case l.Fe.Pending:return"is deploying";case l.Fe.Resuming:return"is resuming";case l.Fe.Suspending:return"is pausing";case l.Fe.Failed:return"failed to deploy";case l.Fe.Success:return"deployed";case l.Fe.Suspended:return"paused";case l.Fe.UpdatingTier:return"is updating tier"}}function C(n){switch(n){case l.Fe.Building:case l.Fe.Promoting:case l.Fe.Running:case l.Fe.Pending:case l.Fe.Failed:case l.Fe.Success:return!0;case l.Fe.Resuming:case l.Fe.Suspending:case l.Fe.Suspended:case l.Fe.UpdatingTier:return!1}}var b=(0,f.X)({root:[u.l0.rowWithGap(0),u.l0.flex.shrink(1)],dot:[u.l0.width("8px"),u.l0.height("8px"),u.l0.borderRadius("full"),u.l0.flex.shrink(0),u.l0.pr(4)],name:[u.l0.color.foregroundDefault,u.l0.fontWeight.medium],item:[u.l0.rowWithGap(8),u.l0.pr(4),u.l0.align.center,u.l0.flex.growAndShrink(1)],itemMainText:[u.l0.flex.growAndShrink(1),u.l0.align.center],itemRight:[u.l0.textAlign.right],itemContent:[u.l0.rowWithGap(8),u.l0.flex.growAndShrink(1),u.l0.align.center]}),P=function(n){var e=n.onClick,t=(0,d.kW)(),r=(0,d.$y)();if(t===p.z.Loading||!r)return(0,i.tZ)(c.Z,{size:12});var o=r.status,l=(o in D?D[o]:{color:u.TV.greyDefault}).color;return(0,i.tZ)(s.G,{css:b.root,children:(0,i.BX)(s.G,{css:b.item,children:[(0,i.tZ)(s.G,{tag:"span",css:b.dot,style:{backgroundColor:l,boxShadow:"0 0 12px ".concat(l)}}),(0,i.tZ)(s.G,{css:b.itemMainText,children:(0,i.BX)(a.xv,{multiline:!1,children:[(0,i.tZ)("span",{css:b.name,children:r.user.displayName+" "}),Z(o)+" ",C(o)?(0,y.Z)(new Date(r.timeCreated),Date.now(),{addSuffix:!0}):null]})}),(0,i.tZ)(s.G,{css:b.itemRight,children:(0,i.tZ)(g.hU,{alt:"View deploy logs",onClick:e,children:(0,i.tZ)(m.Z,{})})})]})})}},77068:function(n,e,t){t.d(e,{u:function(){return i}});var r=t(43119);function o(){var n=(0,r.Z)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return o=function(){return n},n}var i=(0,t(71440).Ps)(o())},78572:function(n,e,t){t.d(e,{jd:function(){return _n},CK:function(){return Q},My:function(){return q},bA:function(){return j},_U:function(){return Dn},rm:function(){return Bn},XA:function(){return Fn},$y:function(){return cn},ev:function(){return gn},Sl:function(){return an},hn:function(){return tn},pn:function(){return pn},kW:function(){return nn},H7:function(){return on},v5:function(){return Y},XZ:function(){return J},gg:function(){return xn},U:function(){return Zn},m8:function(){return Sn},FN:function(){return sn},mF:function(){return In}});var r=t(57135),o=t(72006),i=t(4405),u=t(2272),a=t(96583),s=t(51467),l=t(34547),c=t(51631),d=t(92153),p=t(90234),f=t(50959),g=t(96742),m=t(76449),y=t(89720),v=t(20854),h=t(43119),w=t(71440),D=t(45987),Z=t(22295),C=t(24635),b=t(9125),P=t(86615),_=t(50216);function S(){var n=(0,h.Z)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return S=function(){return n},n}function H(){var n=(0,h.Z)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    lang {\n      id\n      displayName\n    }\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    ...HostingTierReplPowerUps\n  }\n  ","\n  ","\n"]);return H=function(){return n},n}function T(){var n=(0,h.Z)(["\n  query DeploymentSession($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n    }\n  }\n  ","\n"]);return T=function(){return n},n}function F(){var n=(0,h.Z)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n      }\n    }\n  }\n"]);return F=function(){return n},n}function R(){var n=(0,h.Z)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return R=function(){return n},n}function I(){var n=(0,h.Z)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          ...HostingTierReplPowerUps\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return I=function(){return n},n}function U(){var n=(0,h.Z)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return U=function(){return n},n}var B={},x=(0,w.Ps)(S(),Z.uC,Z.MX),E=(0,w.Ps)(H(),x,D.Fh),N=(0,w.Ps)(T(),E);var $=(0,w.Ps)(F());var V=(0,w.Ps)(R(),Z.MX,Z.uC);var X=(0,w.Ps)(I(),D.Fh,x);var k=(0,w.Ps)(U(),Z.MX);function z(n){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)((function(n){var e,t,r,o,i,u,s,l,c,d,p;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(e=n.command,t=n.replId,r=n.buildId,o=n.machineConfigurationId,i=n.maxMachineInstances,!v.l)throw new Error("expected apolloClient to be initialized");return[4,v.l.mutate({mutation:X,variables:{input:{command:e,replId:t,buildId:r,machineConfigurationId:o,maxMachineInstances:i}}})];case 1:if(c=a.sent(),null===(u=c.errors)||void 0===u?void 0:u.length)throw new Error(c.errors.map((function(n){return n.message})).join(", "));if("SendDeploymentLifecycleCommandResult"!==(null===(s=c.data)||void 0===s||null===(l=s.sendDeploymentLifecycleCommand)||void 0===l?void 0:l.__typename))throw new Error((null===(d=c.data)||void 0===d||null===(p=d.sendDeploymentLifecycleCommand)||void 0===p?void 0:p.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}}))}))).apply(this,arguments)}function M(n){return L.apply(this,arguments)}function L(){return(L=(0,r.Z)((function(n){var e,t,r,o,i,u,s,l;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(e=n.buildId,t=n.targetDeploymentId,!v.l)throw new Error("expected apolloClient to be initialized");return[4,v.l.mutate({mutation:k,variables:{input:{buildId:e,targetDeploymentId:t}}})];case 1:if(u=a.sent(),null===(r=u.errors)||void 0===r?void 0:r.length)throw new Error(u.errors.map((function(n){return n.message})).join(", "));if("FailHostingBuildResult"!==(null===(o=u.data)||void 0===o||null===(i=o.failHostingBuild)||void 0===i?void 0:i.__typename))throw new Error((null===(s=u.data)||void 0===s||null===(l=s.failHostingBuild)||void 0===l?void 0:l.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}}))}))).apply(this,arguments)}var G=t(37487),O=t(69600),W=t(52994),Q=(0,p.cn)({}),j=(0,p.cn)({}),q=(0,p.cn)({});function J(){return(0,G.Hg)(j)}function Y(){return(0,G.Hg)(q)}var K=(0,p.cn)(O.z.Loading);function nn(){return(0,G.Hg)(K)}var en=(0,p.cn)(void 0);function tn(){return(0,G.Hg)(en)}var rn=(0,p.cn)(void 0);function on(){return(0,G.Hg)(rn)}var un=(0,p.cn)(void 0);function an(n){var e,t=function(n){var e=(0,o.Z)({},B,n);return C.a(N,e)}({variables:{replId:n}}),r=t.data,i=t.refetch,u="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null,a="ReplPowerUpTypes"===(null===u||void 0===u?void 0:u.powerUps.__typename)?u.powerUps:null;return{hostingTier:null!==(e=null===a||void 0===a?void 0:a.hostingTier)&&void 0!==e?e:null,refetch:i}}function sn(n){var e=an(n).hostingTier;return Boolean(e)}var ln=(0,p.cn)(void 0);function cn(){return(0,G.Hg)(ln)}var dn=(0,p.cn)(void 0);function pn(){return(0,G.Hg)(dn)}var fn=(0,p.cn)(void 0);function gn(){return(0,G.Hg)(fn)}var mn=(0,p.cn)(null,(function(n,e){e(en,void 0),e(rn,void 0),e(ln,void 0),e(dn,void 0),e(K,O.z.Ready)})),yn=(0,p.cn)(null,(function(n,e,t){var r,o="Repl"===t.repl.__typename?t.repl:null;if(o){e(un,{id:o.lang.id,displayName:o.lang.displayName,isVnc:Boolean(o.config.isVnc)});var i,u=o.hostingDeployment;if(u)return"HostingDeployment"!==u.__typename?e(fn,"Unexpected hosting deployment typename: ".concat(u.__typename)):(e(en,u.id),e(ln,u.currentBuild),e(rn,u.replitAppSubdomain||(0,g.Jw)({replSlug:o.slug,username:null===(i=o.owner)||void 0===i?void 0:i.username})),u.inProgressBuild?(e(dn,u.inProgressBuild),void e(K,O.z.Deploying)):void e(K,(0,W.Zx)(u.currentBuild.status)));e(rn,(0,g.Jw)({replSlug:o.slug,username:null===(r=o.owner)||void 0===r?void 0:r.username})),e(K,O.z.Ready)}}));function vn(){var n=(0,G.$X)(yn),e=(0,G.$X)(Hn);return(0,u.Z)(function(n){var e=(0,o.Z)({},B,n);return b.t(N,e)}({fetchPolicy:"no-cache",onCompleted:n,onError:function(n){e(n.message)}}),1)[0]}var hn=(0,p.cn)(null,(function(n,e,t){if("HostingBuildDeployStatusAction"===t.__typename){var r=n(K),o=n(dn),i=n(ln),u=t.status;if(r===O.z.Deploying){if(!o)return void e(Hn,"No deployment in progress found");e(dn,(0,d.ZP)(o,(function(n){n.status=u}))),u!==c.Fe.Success&&u!==c.Fe.Failed||(e(dn,void 0),u!==c.Fe.Success&&i||e(ln,(0,d.ZP)(o,(function(n){n.status=u,n.hasImageTag=o.provider!==c.r4.Static&&u===c.Fe.Success}))))}else if(r===O.z.ProcessingLifecycleCommand){if(!i)return void e(Hn,"No current build found");e(ln,(0,d.ZP)(i,(function(n){n.status=u})))}e(K,(0,W.Zx)(u)),t.message&&u===c.Fe.Failed&&e(Hn,t.message)}})),wn=(0,p.cn)(null);function Dn(){return(0,G.Hg)(wn)}function Zn(n){var e=(0,G.yL)(wn),t=(0,s.Z)(n);f.useEffect((function(){return e.subscribe((function(n){n&&t.current(n)}))}),[e,t])}var Cn=(0,p.cn)((function(n){switch(n(K)){case O.z.Deploying:var e;return null===(e=n(dn))||void 0===e?void 0:e.id;case O.z.ProcessingLifecycleCommand:var t;return null===(t=n(ln))||void 0===t?void 0:t.id;default:return}})),bn=(0,p.cn)(null,function(){var n=(0,r.Z)((function(n,e,t){var r;return(0,a.__generator)(this,(function(n){return(r=t.data.data)?(e(hn,r.hostingBuildDeployActionUpdates),e(wn,r.hostingBuildDeployActionUpdates),[2]):[2]}))}));return function(e,t,r){return n.apply(this,arguments)}}());function Pn(n){var e=vn(),t=(0,G.$X)(bn),r=(0,G.$X)(Hn);(0,f.useEffect)((function(){e({variables:{replId:n}})}),[e,n]);var i=(0,G.Hg)(Cn);!function(n){var e=(0,o.Z)({},B,n);P.m($,e)}({variables:{input:{buildId:null!==i&&void 0!==i?i:""}},skip:!i,onData:t,onError:function(n){r(n.message)}})}function _n(n){return Pn(n.replId),null}function Sn(){var n=(0,l.Z)(),e=vn(),t=(0,G.$X)(K);return f.useCallback((function(){return t(O.z.Loading),e({variables:{replId:n}})}),[e,t,n])}var Hn=(0,p.cn)(null,(function(n,e,t){e(fn,t)}));var Tn=(0,p.cn)(null,(function(n,e,t){var r,o=t.deployHostingBuild2;o&&("DeployHostingBuild2Result"===o.__typename?(e(dn,o.build),e(en,o.targetDeployment.id),e(rn,null!==(r=o.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),e(K,O.z.Deploying)):e(Hn,o.message))}));function Fn(){var n=(0,l.Z)(),e=tn(),t=Y(),i=(0,G.Hg)(Q),s=J(),d=(0,u.Z)(function(n){var e=(0,o.Z)({},B,n);return _.D(V,e)}(),1)[0],p=(0,G.$X)(Tn),v=(0,G.$X)(Hn),h=(0,G.$X)(K),w=(0,G.XD)(dn),D=cn();return f.useCallback(function(){var o=(0,r.Z)((function(r){var o,u,l,f,Z,C,b,P,_,S,H,T,F,R;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(o=r.envVars,u=r.subdomain,l=r.machineConfigurationId,f=r.maxMachineInstances,Z=r.config,w())return v("Deployment already in progress"),[2];a.label=1;case 1:return a.trys.push([1,5,,6]),h(O.z.Preparing),[4,(0,m.$f)(t)];case 2:if(C=a.sent(),P=(b=Z||C).buildCommand,_=b.runCommand,S=b.publicDir,H=b.ignorePorts,T=D?function(n){var e=n.provider,t=n.ignorePorts;switch(e){case c.r4.Static:return c.Vp.Static;case c.r4.CloudRun:return c.Vp.CloudRun;default:return t?c.Vp.Worker:c.Vp.Server}}({provider:null===D||void 0===D?void 0:D.provider,ignorePorts:Boolean(H)}):b.appType,!T)throw new y.P3;if(!u)throw new y.Q5;if(T===c.Vp.Static){if(!(0,g.Ar)(S))throw new y.SF}else if(!(0,g.Ar)(_))throw new y.ZG;return[4,(0,m.OD)({buildCommand:P,runCommand:_,appType:T,publicDir:S,ignorePorts:H},C,{dotReplit:t,fs:s,container:i})];case 3:return a.sent(),F=(0,W.oU)(T),[4,d({variables:{input:{replId:n,targetDeploymentId:e,targetMachineConfigurationId:l,maxMachineInstances:f,commands:{build:P,run:_||""},envVars:o,subdomain:u,provider:F,appType:T}},onCompleted:p})];case 4:return a.sent(),[3,6];case 5:throw R=a.sent(),h(O.z.Ready),R;case 6:return[2]}}))}));return function(n){return o.apply(this,arguments)}}(),[d,p,v,h,w,e,n,i,s,t])}var Rn=(0,p.cn)(null,function(){var n=(0,r.Z)((function(n,e,t){var r,u,s,l,p,f,g,m,y;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(r=t.args,u=t.replId,s=void 0,(l=r.command)===c.Qc.UpdateMachineConfiguration){if(!(p=n(ln)))return e(Hn,"No current build found"),[2];if(!r.machineConfigurationId)return e(Hn,"No machine configuration found"),[2];(f=(0,W.Ti)(l))&&(e(ln,(0,d.ZP)(p,(function(n){n.status=f}))),e(K,(0,W.Zx)(f)))}if(l===c.Qc.Resume||l===c.Qc.Suspend){if(!(g=n(ln)))return e(Hn,"No current build found"),[2];s=g.id,(m=(0,W.Ti)(l))&&(e(ln,(0,d.ZP)(g,(function(n){n.status=m}))),e(K,(0,W.Zx)(m)))}a.label=1;case 1:return a.trys.push([1,3,,4]),[4,z((0,i.Z)((0,o.Z)({},r),{buildId:s,replId:u}))];case 2:return a.sent(),l===c.Qc.Destroy&&e(mn),[3,4];case 3:return y=a.sent(),e(Hn,y.message),[3,4];case 4:return[2]}}))}));return function(e,t,r){return n.apply(this,arguments)}}());function In(){var n=(0,l.Z)(),e=(0,G.$X)(Rn);return f.useCallback(function(){var t=(0,r.Z)((function(t){return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,e({replId:n,args:t})];case 1:return r.sent(),[2]}}))}));return function(n){return t.apply(this,arguments)}}(),[e,n])}var Un=(0,p.cn)(null,function(){var n=(0,r.Z)((function(n,e){var t,r,o,i;return(0,a.__generator)(this,(function(u){switch(u.label){case 0:if(!(t=n(en)))return e(Hn,"No deployment found"),[2];if(!(r=n(dn)))return e(Hn,"No deployment in progress found"),[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,M({buildId:r.id,targetDeploymentId:t})];case 2:return u.sent(),[3,4];case 3:return o=u.sent(),e(Hn,o.message),[2];case 4:return e(dn,void 0),e(K,O.z.Ready),!(i=n(ln))||i.status!==c.Fe.Success&&i.status!==c.Fe.Failed?(e(ln,(0,d.ZP)(r,(function(n){n.status=c.Fe.Failed}))),[2]):[2]}}))}));return function(e,t){return n.apply(this,arguments)}}());function Bn(){return(0,G.$X)(Un)}function xn(){var n=(0,G.Hg)(un);return n?"nix"!==n.id&&"html"!==n.id?{isDeployableRepl:!1,reason:"You will need to upgrade your ".concat(n.displayName," Repl to a Nix template in order to deploy.")}:{isDeployableRepl:!0}:{isDeployableRepl:!1,reason:"Could not find repl language."}}},37487:function(n,e,t){t.d(e,{$X:function(){return d},Hg:function(){return l},XD:function(){return p},aT:function(){return a},yL:function(){return c}});var r=t(50959),o=t(71999),i=t(28999),u=t(28132),a=(0,r.createContext)(null);function s(){var n=(0,r.useContext)(a);if(!n)throw new Error("Expected store in context");return n}function l(n){return(0,o.Dv)(n,{store:s()})}function c(n){return(0,u.b)(n,s())}var d=function(n){return(0,o.b9)(n,{store:s()})};function p(n){return(0,i.lV)((0,r.useCallback)((function(e){return e(n)}),[n]),{store:s()})}},22295:function(n,e,t){t.d(e,{MX:function(){return g},bN:function(){return f},uC:function(){return p}});var r=t(43119),o=t(71440);function i(){var n=(0,r.Z)(["\n  fragment ReplDomain2 on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return i=function(){return n},n}function u(){var n=(0,r.Z)(["\n  fragment CustomDomain on Domain {\n    ...ReplDomain2\n  }\n  ","\n"]);return u=function(){return n},n}function a(){var n=(0,r.Z)(["\n  fragment TargetHostingDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,r.Z)(["\n  fragment MachineConfiguration on HostingMachineConfiguration {\n    id\n    label\n    vcpu\n    memory\n  }\n"]);return s=function(){return n},n}function l(){var n=(0,r.Z)(["\n  fragment CurrentBuild2 on HostingBuild {\n    id\n    description\n    status\n    timeCreated\n    hasImageTag\n    envVars {\n      name\n      value\n    }\n    repl {\n      id\n      slug\n      apexProxy\n      domains {\n        ... on Domain {\n          ...CustomDomain\n        }\n      }\n      owner {\n        ... on Team {\n          id\n          username\n        }\n        ... on User {\n          id\n          username\n        }\n      }\n      hostingDeployment {\n        ... on HostingDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n    }\n    provider\n    machineConfiguration {\n      ...MachineConfiguration\n    }\n    maxMachineInstances\n    user {\n      id\n      displayName\n      username\n    }\n  }\n  ","\n  ","\n  ","\n"]);return l=function(){return n},n}var c=(0,o.Ps)(i()),d=(0,o.Ps)(u(),c),p=(0,o.Ps)(a()),f=(0,o.Ps)(s()),g=(0,o.Ps)(l(),d,p,f)}}]);
//# sourceMappingURL=3032-030155766b899e2f.js.map