!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ed900561-ae77-4d2d-9c73-e9cf73e36351",e._sentryDebugIdIdentifier="sentry-dbid-ed900561-ae77-4d2d-9c73-e9cf73e36351")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"dd1337ad"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3207],{84059:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(74985),i=n(50959),o=n(26881),a=n(88965),l=n(55418),c=n(53312),s=n(26473),u=n(94979),d=n(85289),f=n(72006),h=n(43119),p=n(71440),m=n(24635);function v(){var e=(0,h.Z)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return v=function(){return e},e}function g(){var e=(0,h.Z)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var y={},Z=(0,p.Ps)(v()),b=(0,p.Ps)(g(),Z);var w=n(87693),x=n(5741),C=function(e){var t=e.data;o.kL.register(o.ZL);var n=(0,w.F)().values;return(0,r.tZ)(d.$Q,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:(0,x.o)()},scales:{y:{title:{display:!0,text:"# Requests",color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:n.global.foregroundDimmer,callback:function(e){if("number"===typeof e&&Math.floor(e)===e)return e}},grid:{color:n.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:n.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:n.global.outlineDimmest}}}},data:{labels:t.results.map((function(e){var t=e.value.replace("ms","").split("-"),n=t[t.length-1];return n.includes("s+")?n.replace("s+","000+"):"< "+n})),datasets:[{borderWidth:0,data:t.results.map((function(e){return e.count})),backgroundColor:Array(t.results.length).fill(n.global.tealDefault)}]}})},k=function(e){var t,n,o=e.replId,d=e.start,h=e.hours,p=e.deployment,v=(0,i.useState)(void 0),g=v[0],Z=v[1],w=function(e){var t=(0,f.Z)({},y,e);return m.a(b,t)}({variables:{id:o,input:{start:d,hours:h,deployment:p}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsDuration.__typename){case"UserError":case"NotFoundError":Z(new Error(e.repl.analyticsDuration.message))}}}),k=w.data,S=w.loading,E=w.error;return E&&Z(E),(0,r.BX)(s.G,{css:a.l0.colWithGap(8),children:[(0,r.tZ)(c.xv,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,r.BX)(s.G,{children:[S?(0,r.tZ)(s.G,{css:[x.m,a.l0.borderRadius(8),u.p.backgroundPulse()]}):null,g?(0,r.tZ)(l.E,{text:g.message,colorway:"negative"}):null,"Repl"===(null===k||void 0===k||null===(t=k.repl)||void 0===t?void 0:t.__typename)&&"ReplAnalyticsDuration"===(null===(n=k.repl.analyticsDuration)||void 0===n?void 0:n.__typename)?(0,r.tZ)(s.G,{css:x.m,children:(0,r.tZ)(C,{data:k.repl.analyticsDuration})}):null]})]})}},25095:function(e,t,n){var r=n(72006),i=n(4405),o=n(74985),a=n(26881),l=n(56412),c=n(81995),s=n(85289),u=n(87693),d=n(5741);a.kL.register(a.uw,a.f$,a.od,a.jn,a.u);t.Z=function(e){var t=e.labels,n=e.datasets,a=e.maintainAspectRatio,f=void 0===a||a,h=(0,u.F)().values,p={labels:t.map((function(e){return e.toISOString()})),datasets:n.map((function(e){return(0,i.Z)((0,r.Z)({},e),{data:e.data.map((function(e){var t=e.x,n=e.y;return{x:t.toISOString(),y:n}})),pointRadius:.5,tension:.1})}))},m=t.length;return(0,o.tZ)(s.x1,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:f,plugins:{tooltip:(0,i.Z)((0,r.Z)({},(0,d.o)()),{callbacks:{title:function(e){var t=new Date(e[0].label);return(0,l.Z)(t,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:"# Requests",color:h.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:h.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:h.global.foregroundDimmer,callback:function(e){if("number"===typeof e&&Math.floor(e)===e)return e}},min:0},x:{title:{display:!0,text:"Time",color:h.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:h.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:h.global.foregroundDimmer,callback:function(e,n){var r=t[n];if(m<=24){if(r.getHours()%4!==0)return;return(0,l.Z)(r,"HH:mm")}if(r.toISOString()===(0,c.Z)(r).toISOString())return(0,l.Z)(r,"MMM d")}}}}},data:p})}},52481:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(74985),i=n(86306),o=n(50959),a=n(88965),l=n(55418),c=n(53312),s=n(26473),u=n(87693),d=n(94979),f=n(72006),h=n(43119),p=n(71440),m=n(24635);function v(){var e=(0,h.Z)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return v=function(){return e},e}function g(){var e=(0,h.Z)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,h.Z)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,p.Ps)(v()),w=(0,p.Ps)(g(),b),x=(0,p.Ps)(y(),w);var C=n(25095),k=n(5741),S=function(e){var t=e.data,n=e.start,o=e.hours,a=(0,u.F)().values,l=new Array(o).fill(0).map((function(e,t){return(0,i.Z)(n,t)})),c=t.results.reduce((function(e,t){return e.set(t.timestamp,t),e}),new Map),s=[{label:"Connected",data:l.map((function(e){var t;return{y:(null!==(t=c.get(e.toISOString()))&&void 0!==t?t:{success:0}).success,x:e}})),borderColor:a.global.accentPrimaryDefault,backgroundColor:a.global.accentPrimaryDefault},{label:"Failed",data:l.map((function(e){var t;return{y:(null!==(t=c.get(e.toISOString()))&&void 0!==t?t:{failure:0}).failure,x:e}})),borderColor:a.global.accentNegativeDefault,backgroundColor:a.global.accentNegativeDefault}];return(0,r.tZ)(C.Z,{labels:l,datasets:s,maintainAspectRatio:!1})},E=function(e){var t,n,i=e.replId,u=e.start,h=e.hours,p=e.deployment,v=(0,o.useState)(void 0),g=v[0],y=v[1],b=function(e){var t=(0,f.Z)({},Z,e);return m.a(x,t)}({variables:{id:i,input:{start:u,hours:h,deployment:p}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":y(new Error(e.repl.analyticsPageViews.message))}}}),w=b.data,C=b.loading,E=b.error,T="Repl"===(null===w||void 0===w||null===(t=w.repl)||void 0===t?void 0:t.__typename)&&"ReplAnalyticsPageViews"===(null===(n=w.repl.analyticsPageViews)||void 0===n?void 0:n.__typename)?w.repl.analyticsPageViews:void 0,R=T?T.uniques:void 0;return E&&y(E),(0,r.BX)(s.G,{css:[a.l0.colWithGap(8)],children:[(0,r.BX)(s.G,{css:[a.l0.flex.row,a.l0.align.center,a.l0.justify.spaceBetween],children:[(0,r.tZ)(c.xv,{variant:"subheadDefault",multiline:!1,children:"Requests"}),R?(0,r.BX)(c.xv,{multiline:!1,children:[(0,r.tZ)("strong",{children:R})," unique visitors"]}):null]}),(0,r.BX)(s.G,{children:[C?(0,r.tZ)(s.G,{css:[a.l0.width("100%"),k.m,a.l0.borderRadius(8),d.p.backgroundPulse()]}):null,g?(0,r.tZ)(l.E,{text:g.message,colorway:"negative"}):null,T?(0,r.tZ)(s.G,{css:k.m,children:(0,r.tZ)(S,{data:T,start:u,hours:h})}):null]})]})}},35927:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(9970),i=n(74985),o=n(86306),a=n(50959),l=n(88965),c=n(55418),s=n(53312),u=n(26473),d=n(94979),f=n(72006),h=n(43119),p=n(71440),m=n(24635);function v(){var e=(0,h.Z)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n  }\n"]);return v=function(){return e},e}function g(){var e=(0,h.Z)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,h.Z)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,p.Ps)(v()),w=(0,p.Ps)(g(),b),x=(0,p.Ps)(y(),w);var C=n(25095),k=n(5741),S=function(e){var t=e.data,n=e.start,a=e.hours,l=e.colorFn,c=new Array(a).fill(0).map((function(e,t){return(0,o.Z)(n,t)})),s=t.results.reduce((function(e,t){var n,r=t.timestamp,i=t.value,o=t.count,a=null!==(n=e.get(i))&&void 0!==n?n:new Map;return a.set(r,o),e.set(i,a),e}),new Map),u=(0,r.Z)(s.keys()).map((function(e,t){var n=l(e,t),r=s.get(e);return{label:e,data:c.map((function(e){var t,n=null!==(t=null===r||void 0===r?void 0:r.get(e.toISOString()))&&void 0!==t?t:0;return{x:new Date(e),y:n}})),borderColor:n,backgroundColor:n}}));return(0,i.tZ)(C.Z,{labels:c,datasets:u,maintainAspectRatio:!1})},E=function(e){var t,n,r=e.replId,o=e.title,h=e.metric,p=e.start,v=e.hours,g=e.deployment,y=e.colorFn,b=(0,a.useState)(void 0),w=b[0],C=b[1],E=function(e){var t=(0,f.Z)({},Z,e);return m.a(x,t)}({variables:{id:r,input:{metric:h,start:p,hours:v,deployment:g}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTimeSeries.__typename){case"UserError":case"NotFoundError":C(new Error(e.repl.analyticsTimeSeries.message))}}}),T=E.data,R=E.loading,D=E.error,I="Repl"===(null===T||void 0===T||null===(t=T.repl)||void 0===t?void 0:t.__typename)&&"ReplAnalyticsTimeSeries"===(null===(n=T.repl.analyticsTimeSeries)||void 0===n?void 0:n.__typename)?T.repl.analyticsTimeSeries:void 0;return D&&C(D),(0,i.BX)(u.G,{css:[l.l0.colWithGap(8)],children:[(0,i.tZ)(u.G,{css:[l.l0.flex.row,l.l0.align.center,l.l0.justify.spaceBetween],children:(0,i.tZ)(s.xv,{variant:"subheadDefault",multiline:!1,children:o})}),(0,i.BX)(u.G,{children:[R?(0,i.tZ)(u.G,{css:[l.l0.width("100%"),k.m,l.l0.borderRadius(8),d.p.backgroundPulse()]}):null,w?(0,i.tZ)(c.E,{text:w.message,colorway:"negative"}):null,I?(0,i.tZ)(u.G,{css:k.m,children:(0,i.tZ)(S,{data:I,start:p,hours:v,colorFn:y})}):null]})]})}},52163:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(9970),i=n(74985),o=n(50959),a=n(26881),l=n(88965),c=n(55418),s=n(53312),u=n(26473),d=n(94979),f=n(55021),h=n(85289),p=n(72006),m=n(43119),v=n(71440),g=n(24635);function y(){var e=(0,m.Z)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return y=function(){return e},e}function Z(){var e=(0,m.Z)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}var b={},w=(0,v.Ps)(y()),x=(0,v.Ps)(Z(),w);var C=n(87693),k=n(73194),S=n.n(k),E=n(59589),T=n(68989),R=n(16296),D=n(5741),I=function(e){var t=e.data,n=e.variant;if(0===t.results.length)return(0,i.tZ)(s.xv,{multiline:!1,children:"No results"});switch(n){case"map":return(0,i.tZ)(G,{data:t});case"pie":return(0,i.tZ)(B,{data:t,devices:!1});case"device-pie":return(0,i.tZ)(B,{data:t,devices:!0});case"table":return(0,i.tZ)(_,{data:t})}},_=function(e){var t=e.data;return a.kL.register(a.qi),(0,i.tZ)(u.G,{children:t.results.map((function(e,t){return(0,i.BX)(u.G,{css:[l.l0.rowWithGap(16),l.l0.py(8),{borderBottom:"1px solid ".concat(l.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,i.tZ)(u.G,{css:[l.l0.flex.grow(1),l.l0.maxWidth("90%")],children:(0,i.tZ)(s.xv,{title:e.value,multiline:!1,children:e.value})}),(0,i.tZ)(u.G,{children:(0,i.tZ)(s.xv,{multiline:!1,children:e.count})})]},t)}))})},B=function(e){var t=e.data,n=e.devices,o=(0,C.F)().values,a=[o.global.blueDefault,o.global.blurpleDefault,o.global.greenDefault,o.global.limeDefault,o.global.magentaDefault,o.global.orangeDefault,o.global.pinkDefault,o.global.purpleDefault,o.global.redDefault,o.global.tealDefault,o.global.yellowDefault],l=new Map;return n?t.results.forEach((function(e){var t=e.value,n=e.count,r=t.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+n)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+n)}})):t.results.forEach((function(e){var t=e.value,n=e.count,r=t.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+n)})),(0,i.tZ)(u.G,{css:D.m,children:(0,i.tZ)(h.by,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:(0,D.o)()}},data:{labels:(0,r.Z)(l.keys()),datasets:[{borderWidth:(0,r.Z)(l.keys()).length>1?1:0,borderColor:o.global.outlineDimmest,data:(0,r.Z)(l.values()),backgroundColor:Array(l.size).fill(0).map((function(e,t){return a[t%a.length]}))}]}})})},G=function(e){var t=e.data,r=S()((function(){return Promise.all([n.e(5381),n.e(4096),n.e(8742),n.e(6489)]).then(n.bind(n,6489))}),{loadableGenerated:{webpack:function(){return[6489]}},ssr:!1}),o=t.results.map((function(e){return{country:e.value,numHits:e.count}}));return(0,i.tZ)(r,{countries:o})},P=function(e){var t,n,r=e.replId,a=e.start,h=e.hours,m=e.metric,v=e.deployment,y=e.count,Z=e.variant,w=void 0===Z?"table":Z,C=e.expandable,k=void 0!==C&&C,S=(0,f.CZ)(m),D=(0,o.useState)(void 0),_=D[0],B=D[1],G=(0,o.useState)(!1),P=G[0],A=G[1],N=function(e){var t=(0,p.Z)({},b,e);return g.a(x,t)}({variables:{id:r,input:{metric:m,start:a,hours:h,deployment:v,count:P?3*y:y}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTopList.__typename){case"UserError":case"NotFoundError":B(new Error(e.repl.analyticsTopList.message))}}}),U=N.data,L=N.loading,O=N.error;return O&&B(O),(0,i.BX)(u.G,{css:l.l0.colWithGap(8),children:[(0,i.BX)(u.G,{css:l.l0.rowWithGap(8),children:[(0,i.tZ)(s.xv,{variant:"subheadDefault",multiline:!1,children:"device-pie"===w?"Top Devices":"Top ".concat(S)}),k?(0,i.tZ)(R.hU,{alt:P?"Collapse list":"Expand list",onClick:function(){return A(!P)},children:P?(0,i.tZ)(T.Z,{}):(0,i.tZ)(E.Z,{})}):null]}),(0,i.BX)(u.G,{children:[L?(0,i.tZ)(u.G,{css:[l.l0.height(80),l.l0.borderRadius(8),d.p.backgroundPulse()]}):null,_?(0,i.tZ)(c.E,{text:_.message,colorway:"negative"}):null,"Repl"===(null===U||void 0===U||null===(t=U.repl)||void 0===t?void 0:t.__typename)&&"ReplAnalyticsTopList"===(null===(n=U.repl.analyticsTopList)||void 0===n?void 0:n.__typename)?(0,i.tZ)(I,{variant:w,data:U.repl.analyticsTopList}):null]})]})}},5741:function(e,t,n){n.d(t,{m:function(){return a},o:function(){return l}});var r=n(43312),i=n(88965),o=n(87693),a=(0,r.iv)([i.l0.maxHeight(320),i.l0.minHeight(240),{aspectRatio:"2 / 1"}]);function l(){var e=(0,o.F)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},bodyFont:{family:"'IBM Plex Sans', sans-serif"},footerFont:{family:"'IBM Plex Sans', sans-serif"},padding:8,cornerRadius:6}}},30278:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(74985),i=n(48306),o=n.n(i),a=(n(50959),n(97754)),l=n.n(a);function c(e){var t=e.unreadDot,n=e.size,i=void 0===n?12:n,a=e.count,c=void 0===a?null:a,s=c&&c>99,u=s?"99+":null===c||void 0===c?void 0:c.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),t?(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}):null,Boolean(c)&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(l()("count",{overflow:s})||""),children:u}),(0,r.tZ)(o(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},95861:function(e,t,n){n.d(t,{AS:function(){return R},Hj:function(){return P},Rp:function(){return I},Tt:function(){return N},gE:function(){return B},j7:function(){return k},xT:function(){return E},yi:function(){return S}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635),l=n(50216),c=n(86615);function s(){var e=(0,i.Z)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    image\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i.Z)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i.Z)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return Z=function(){return e},e}var b={},w=(0,o.Ps)(s()),x=(0,o.Ps)(u()),C=(0,o.Ps)(d(),w,x),k=(0,o.Ps)(f(),w,C),S=(0,o.Ps)(h(),k);function E(e){var t=(0,r.Z)({},b,e);return a.a(S,t)}var T=(0,o.Ps)(p(),k);function R(e){var t=(0,r.Z)({},b,e);return l.D(T,t)}var D=(0,o.Ps)(m(),k);function I(e){var t=(0,r.Z)({},b,e);return l.D(D,t)}var _=(0,o.Ps)(v(),k);function B(e){var t=(0,r.Z)({},b,e);return l.D(_,t)}var G=(0,o.Ps)(g());function P(e){var t=(0,r.Z)({},b,e);return l.D(G,t)}var A=(0,o.Ps)(y(),k);function N(e){var t=(0,r.Z)({},b,e);return c.m(A,t)}Z()},56671:function(e,t,n){n.d(t,{Ft:function(){return f},Vy:function(){return v},kL:function(){return m}});var r=n(57135),i=n(2272),o=n(96583),a=n(43182),l=n(87708);function c(e,t,n){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)((function(e,t,n){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e.path&&"number"===typeof e.indexStart&&"number"===typeof e.indexEnd&&e.otVersion?n===e.otVersion?[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}]:[4,t({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:n})]:[2];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:n}]}}))}))).apply(this,arguments)}var u=n(28435),d=n(50959);function f(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)((function(e){var t,n,r,i,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.anchor,n=e.version,r=e.transformSelection,i=e.content,t.path?[4,c(t,r,n)]:[2,null];case 1:return(s=o.sent())?[2,{anchor:t,newSelection:s,newPosition:undefined,getHighlight:function(){if(s){var e=s.indexStart,t=s.indexEnd;try{var n=l.xv.of(i.split("\n")),r=n.lineAt(e),o=n.lineAt(t),c=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),u=n.sliceString(t,n.line(Math.min(o.number+2,n.lines)).to);return{precode:c,code:n.sliceString(e,t),postcode:u}}catch(d){a.Tb(d)}}},snippet:p(i,s)}]:[2,null]}}))}))).apply(this,arguments)}var p=function(e,t){var n=l.xv.of(e.split("\n")),r=n.lineAt(t.indexStart).number,i=n.lineAt(t.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(n.lines,i+1));for(var a=r;a<=i;a++)o.push(n.line(a).text);return{startLineNumber:r,lines:o}};function m(e){var t=(0,u.Z)().fs,n=d.useRef(null),r=d.useRef(null),o=(0,i.Z)(d.useState(!1),2),a=o[0],l=o[1];return d.useEffect((function(){if(e){var i=function(){r.current=null,l(!1)},o=t.watchTextFile(e,{onReady:function(e){var t=e.transformSelection,i=e.initialContent;n.current=i.toString(),r.current=t,l(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){i(),o()}}}),[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:a}}function v(e){var t=(0,u.Z)().fs,n=(0,i.Z)(d.useState(null),2),r=n[0],o=n[1],l=m(null===e||void 0===e?void 0:e.path),c=l.contentRef,s=l.loadedFile,h=l.transformSelectionRef;return d.useEffect((function(){(null===e||void 0===e?void 0:e.path)&&s&&h.current&&null!==c.current&&f({anchor:e,version:t.getOTVersion(e.path),transformSelection:h.current,content:c.current}).then((function(e){o(e)})).catch((function(e){o(null),a.Tb(e)}))}),[t,e,s,h,c]),r}},23556:function(e,t,n){n.d(t,{n:function(){return u}});var r=n(72006),i=n(43119),o=n(71440),a=n(50216);function l(){var e=(0,i.Z)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r.Z)({},c,e);return a.D(s,t)}},72010:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(2272),i=n(50959),o=n(34547),a=n(23556);function l(e){var t=(0,o.Z)(),n=(0,r.Z)((0,a.n)(),1)[0];i.useEffect((function(){if(e){var r=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[t,e,n])}},48034:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());var u=n(34547);function d(){var e,t=function(e){var t=(0,r.Z)({},c,e);return a.a(s,t)}({variables:{replId:(0,u.Z)()}}).data;if("Repl"!==(null===t||void 0===t?void 0:t.repl.__typename))return[];var n=[];(null===(e=t.repl.owner)||void 0===e?void 0:e.username)&&"User"===t.repl.owner.__typename&&n.push(t.repl.owner);var i=!0,o=!1,l=void 0;try{for(var d,f=t.repl.permissions[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var h,p=d.value;(null===(h=p.user)||void 0===h?void 0:h.username)&&n.push(p.user)}}catch(m){o=!0,l=m}finally{try{i||null==f.return||f.return()}finally{if(o)throw l}}return n}},15621:function(e,t,n){n.d(t,{S:function(){return o}});var r=n(75356),i=n(7225);function o(e,t,n){if(i.Command.is(e))t.request.executeCommand(e.command,e.arguments);else{var o=e.edit,a=e.command;if(o&&(0,r.w)({edit:o,fs:n,client:t}),a&&"java.apply.workspaceEdit"===a.command&&a.arguments){var l=!0,c=!1,s=void 0;try{for(var u,d=a.arguments[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;i.WorkspaceEdit.is(f)&&(0,r.w)({edit:f,fs:n,client:t})}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}a&&t.request.executeCommand(a.command,a.arguments)}}},64127:function(e,t,n){n.d(t,{R$:function(){return P},Wo:function(){return G},XZ:function(){return U},sN:function(){return L}});var r=n(57389),i=n(2272),o=n(74985),a=n(50959),l=n(88965),c=(n(53312),n(26473)),s=n(46861),u=n(42629),d=n(3282),f=n(62385),h=n(73823),p=n(47381),m=n(5687),v=n(91606),g=n(35650),y=n(91333),Z=n(58292),b=(n(88149),n(37268)),w=(n(76594),n(77770)),x=n(50048),C=n(75509),k=n(36732),S=(n(25404),n(9434),n(16296),n(6108)),E=(n(77205),n(27773),n(23743),n(28435),n(38029),n(15621),n(61811),n(14951),n(61025));(0,E.X)({item:[S.gU.listItem,l.l0.p(8),l.l0.flex.row,l.l0.align.center,{border:"none"}],text:[l.l0.pl(8),l.l0.flex.growAndShrink(1)],dropdownWrapper:[l.l0.height(16),l.l0.width(16),l.l0.center],loading:[l.l0.py(8),l.l0.px(12),l.l0.rowWithGap(8),l.l0.align.center,l.l0.color.foregroundDimmest],subItem:{paddingLeft:20,maxWidth:"100%"},none:[l.l0.py(8),l.l0.px(12),l.l0.flex.row,l.l0.align.center]});var T,R,D=n(84761),I=n(39199),_=n(60773),B=n(1169);!function(e){e.Cut="Cut",e.Copy="Copy",e.Paste="Paste",e.JumpToDefinition="JumpToDefinition",e.JumpToTypeDefinition="JumpToTypeDefinition",e.JumpToImplementation="JumpToImplementation",e.FindReferences="FindReferences",e.Rename="Rename",e.SelectAllOccurrences="SelectAllOccurrences",e.CodeActions="CodeActions",e.CopyLinkToPos="CopyLinkToPos",e.ToggleBreakpoint="ToggleBreakpoint",e.StartThread="StartThread",e.ExplainCode="ExplainCode",e.GenerateCode="GenerateCode",e.TransformCode="TransformCode",e.SearchCode="SearchCode"}(T||(T={}));var G=(R={},(0,r.Z)(R,T.Cut,{text:"Cut",icon:(0,o.tZ)(v.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"X"}}),(0,r.Z)(R,T.Copy,{text:"Copy",icon:(0,o.tZ)(g.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"C"}}),(0,r.Z)(R,T.Paste,{text:"Paste",icon:(0,o.tZ)(y.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"V"}}),(0,r.Z)(R,T.JumpToDefinition,{text:"Jump to definition",icon:(0,o.tZ)(Z.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"F12"}}),(0,r.Z)(R,T.JumpToTypeDefinition,{text:"Jump to type definition",icon:(0,o.tZ)(C.Z,{})}),(0,r.Z)(R,T.JumpToImplementation,{text:"Jump to implementation",icon:(0,o.tZ)(k.Z,{})}),(0,r.Z)(R,T.FindReferences,{text:"Find references",icon:(0,o.tZ)(d.Z,{}),keyboardShortcut:{shiftKey:!0,key:"F12"}}),(0,r.Z)(R,T.Rename,{text:"Rename all occurrences",icon:(0,o.tZ)(f.Z,{}),keyboardShortcut:{key:"F2"}}),(0,r.Z)(R,T.SelectAllOccurrences,{text:"Select all occurrences",icon:(0,o.tZ)(u.Z,{}),keyboardShortcut:{key:"F2",cmdOrCtrlKey:!0}}),(0,r.Z)(R,T.CodeActions,{text:"Code actions",icon:(0,o.tZ)(x.Z,{}),keyboardShortcut:{key:".",cmdOrCtrlKey:!0}}),(0,r.Z)(R,T.CopyLinkToPos,{text:"Copy link to position",icon:(0,o.tZ)(h.Z,{})}),(0,r.Z)(R,T.ToggleBreakpoint,{text:"Toggle breakpoint",icon:(0,o.tZ)(p.Z,{})}),(0,r.Z)(R,T.StartThread,{text:"Start thread",icon:(0,o.tZ)(m.Z,{}),keyboardShortcut:{key:"/",altKey:!0}}),(0,r.Z)(R,T.ExplainCode,{text:"Explain code",icon:(0,o.tZ)(w.Z,{})}),(0,r.Z)(R,T.GenerateCode,{text:"Generate code",icon:(0,o.tZ)(D.Z,{}),keyboardShortcut:{key:"g",altKey:!0}}),(0,r.Z)(R,T.TransformCode,{text:"Edit code",icon:(0,o.tZ)(I.Z,{}),keyboardShortcut:{key:"t",altKey:!0}}),(0,r.Z)(R,T.SearchCode,{text:"Search code",icon:(0,o.tZ)(d.Z,{})}),R);var P=35;function A(e){var t=e.dom,n=e.verticalOffset,r=e.coords,i=r.x,o=r.y,a=t.getBoundingClientRect().bottom,l=document.documentElement.clientWidth;if(i+275>l&&(i=l-275-5),o+n>a){var c=o-n;return c<0?{x:i+5,y:0}:{x:i,y:c}}return{x:i,y:o}}var N=(0,E.X)({ul:[l.l0.maxHeight("100vh"),l.l0.overflowY("auto"),{"& > button":[S.gU.listItem,{margin:0,borderRadius:0}]}],divider:[l.l0.my(2),{borderBottom:"1px solid ".concat(l.TV.outlineDimmer)}],menuItem:[l.l0.p(8),l.l0.pr(4),l.l0.flex.row,l.l0.align.center],actionMenuItem:[l.l0.px(8),l.l0.flex.growAndShrink(1),l.l0.align.start]});function U(e){var t=e.view,n=e.coords,r=e.closeMenu,u=e.verticalOffset,d=e.children,f=e.width,h=void 0===f?275:f,p=t.dom,m=(0,s.Z)(r,[]),v=(0,i.Z)(a.useState((function(){return A({dom:p,verticalOffset:u,coords:n})})),2),g=v[0],y=g.x,Z=g.y,w=v[1],x=Z+t.scrollDOM.scrollTop;return a.useEffect((function(){w(A({dom:p,verticalOffset:u,coords:n}))}),[n,u,p]),(0,o.tZ)(b.Tg,{innerRef:m,background:"higher",className:"cm-custom-context-menu",css:[l.l0.position.fixed,l.l0.flex.column,l.l0.justify.center,l.l0.borderRadius(8),l.l0.shadow(2),l.l0.width(h),l.l0.zIndex(101),{left:y,top:x,overflow:"hidden",border:"1px solid ".concat(l.TV.outlineDefault)}],children:(0,o.tZ)(_.ZP,{children:(0,o.tZ)(B.uP,{options:{direction:"vertical"},children:(0,o.tZ)(c.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",css:N.ul,children:d})})})})}function L(e){var t=e.children,n=e.item;return(0,o.tZ)(c.G,{"data-cy":n?"context-menu-".concat(n):null,css:N.menuItem,children:t})}},14951:function(e,t,n){var r=n(2272),i=n(74985),o=n(1169),a=n(26473),l=n(6108),c=n(88965),s=n(50959),u=n(43312),d=a.K.button,f=(0,u.iv)([c.l0.reset.button,l.gU.listItem,c.l0.mx(4),c.l0.borderRadius(4),{border:"none"}]);t.Z=function(e){var t=e.onClick,n=e.children,a=s.useRef(null),l=(0,r.Z)((0,o.XZ)(a,!1),4),c=l[0],u=l[1],h=l[2],p=l[3];return(0,o.Ym)(u,a),(0,i.tZ)(d,{ref:a,role:"menuitem",css:f,onClick:function(e){p(),t(e)},onKeyDown:h,tabIndex:c,children:n})}},25202:function(e,t,n){n.d(t,{q:function(){return I},J:function(){return D}});var r=n(72006),i=n(4405),o=n(77637),a=n(2272),l=n(74985),c=n(66091),s=n(5683),u=n(45347),d=n(87708),f=n(48587),h=n(1292),p=f.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),m=f.p.line({attributes:{class:"cm-diff-inserted"}}),v=f.p.line({attributes:{class:"cm-diff-deleted"}}),g=d.Py.define({map:function(e,t){return e.map(t)}}),y=function(e){"use strict";(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},n}(f.l9);function Z(e){var t=new d.f_,n=new y;e.sort((function(e,t){return e.character-t.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,s=c.character,u=c.padding,h=0;h<u;h++)t.add(s,s,f.p.widget({widget:n,side:-1,block:!0}))}catch(p){i=!0,o=p}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}function b(e){var t=e.coloredLines,n=e.colorDecoration,r=f.lg.fromClass((function e(r){"use strict";(0,c.Z)(this,e);var i=new d.f_,o=!0,a=!1,l=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var f=s.value,h=r.state.doc.line(f);i.add(h.from,h.from,n)}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=d.QQ.define({create:function(){return f.p.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(g))return l.value}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return f.tk.decorations.from(e)}});return[p,r,i]}var w=function(){var e=function(e,t){return f.tk.domEventHandlers({scroll:function(n,r){if(r===e&&n.target){var i=n.target;if(i.scrollTop){var o=i.scrollTop;t.scrollDOM.scrollTo({top:o})}}}})},t=new d.F6,n=new d.F6;return{extensions:function(){return{right:t.of([]),left:n.of([])}},setup:function(r,i){r.dispatch({effects:n.reconfigure(e(r,i))}),i.dispatch({effects:t.reconfigure(e(i,r))})}}},x=n(20476),C=n(7986),k=n(50959),S=n(18950),E=w(),T=E.extensions,R=E.setup;function D(e){var t=e.left,n=e.right,l=e.showDiffDecorations,c=void 0===l||l,s=t.code,u=(0,o.Z)(t,["code"]),f=n.code,p=(0,o.Z)(n,["code"]),y=(0,C.Z)(),w=y.ref,x=y.view,S=(0,C.Z)(),E=S.ref,D=S.view,I=k.useMemo((function(){var e=T().left;return u.extensions?[u.extensions,e]:e}),[u.extensions]),_=k.useMemo((function(){var e=T().right;return p.extensions?[p.extensions,e]:e}),[p.extensions]);u=(0,i.Z)((0,r.Z)({},u),{extensions:I}),p=(0,i.Z)((0,r.Z)({},p),{extensions:_});var B=(0,a.Z)(k.useState(!1),2),G=B[0],P=B[1],A=(0,a.Z)(k.useState(!1),2),N=A[0],U=A[1];return k.useEffect((function(){if(x&&D&&G&&N&&c){var e=setTimeout((function(){R(x,D),function(e,t){var n=(0,h.Bz)(e.state.doc.sliceString(0),t.state.doc.sliceString(0));e.dispatch({effects:[d.Py.appendConfig.of(b({coloredLines:n.leftColored.sort((function(e,t){return e-t})),colorDecoration:v})),g.of(Z(n.leftPadded))]}),t.dispatch({effects:[d.Py.appendConfig.of(b({coloredLines:n.rightColored.sort((function(e,t){return e-t})),colorDecoration:m})),g.of(Z(n.rightPadded))]})}(x,D)}));return function(){return clearTimeout(e)}}}),[x,D,G,N,c]),k.useEffect((function(){x&&(x.dispatch({changes:{from:0,to:x.state.doc.length,insert:s}}),P(!0))}),[s,x]),k.useEffect((function(){D&&(D.dispatch({changes:{from:0,to:D.state.doc.length,insert:f}}),U(!0))}),[f,D]),{left:{view:x,ref:w,code:s,options:u,ready:G},right:{view:D,ref:E,code:f,options:p,ready:N}}}function I(e){var t=e.diffViewer,n=(0,o.Z)(e,["diffViewer"]),i=(0,r.Z)({},t.options,n);return(0,l.BX)(l.HY,{children:[(0,l.tZ)(x.ZP,(0,r.Z)({ref:t.ref,css:{height:t.ready?0:"auto"},initialDoc:t.code,lineWrapping:!1,readOnly:!0},i)),!t.ready&&(0,l.tZ)(S.Z,{code:t.code,language:i.language,filePath:i.filePath,lineNumbers:!i.hideGutter,fontSize:i.fontSize})]})}},1292:function(e,t,n){n.d(t,{Bz:function(){return m},PO:function(){return v}});var r=n(66091),i=n(2272),o=n(96583),a=n(85386),l=n.n(a),c=l().DIFF_DELETE,s=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,t){var n=new(l()),r=n.diff_linesToChars_(e,t),i=r.chars1,o=r.chars2,a=r.lineArray,c=n.diff_main(i,o,!1);return n.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t)return 0;var r=e.indexOf("\n",n);return-1===r?null:1===t?r+1:h(e,t-1,r+1)}function p(e,t,n){if(e>0){var r=h(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function m(e,t){for(var n,r,o=d(e+((n="\n"===e[e.length-1])?"":"\n"),t+((r="\n"===t[t.length-1])?"":"\n")),a=0,l=0,h=[],m=[],v=[],g=[],y=0,Z=0,b=0;b<o.length;b++){var w=(0,i.Z)(o[b],2),x=w[0],C=f(w[1]);switch(x){case c:var k,S=(0,i.Z)(null!==(k=o[b+1])&&void 0!==k?k:[],2),E=S[0],T=S[1];a+=C;for(var R=0;R<C;R++)h.push(a-R);var D=C;E===s&&(D-=f(T));var I=p(D,l,t);I&&g.push(I);break;case s:var _,B=(0,i.Z)(null!==(_=o[b-1])&&void 0!==_?_:[],2),G=B[0],P=B[1];l+=C;for(var A=0;A<C;A++)m.push(l-A);var N=C;G===c&&(N-=f(P));var U=p(N,a,e);U&&v.push(U);break;case u:l>Z&&(Z=l),a>y&&(y=a),a+=C,l+=C}}var L=v.filter((function(e){return e.lineNumber<Z})),O=g.filter((function(e){return e.lineNumber<y}));return{leftPadded:L,rightPadded:O,leftColored:h,rightColored:m,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var v=function(){"use strict";function e(t,n){(0,r.Z)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===t[t.length-1],this.otherTrailingNewline="\n"===n[n.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(t,n),a=[],l=!0,f=!1,h=void 0;try{for(var p,m=o[Symbol.iterator]();!(l=(p=m.next()).done);l=!0){var v=(0,i.Z)(p.value,2),g=v[0],y=v[1].split("\n");""===y[y.length-1]&&y.pop();var Z=!0,b=!1,w=void 0;try{for(var x,C=y[Symbol.iterator]();!(Z=(x=C.next()).done);Z=!0){var k=x.value;a.push([g,k])}}catch(L){b=!0,w=L}finally{try{Z||null==C.return||C.return()}finally{if(b)throw w}}}}catch(L){f=!0,h=L}finally{try{l||null==m.return||m.return()}finally{if(f)throw h}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([s,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var S=1,E=0,T=1,R=!0,D=!1,I=void 0;try{for(var _,B=a[Symbol.iterator]();!(R=(_=B.next()).done);R=!0){var G=(0,i.Z)(_.value,2),P=G[0],A=G[1];switch(P){case c:this.linePositions.set(S,E),this.lineLengths.set(S,A.length),this.deleted.add(S),E+=A.length+1,S++;break;case s:var N=S-1,U=this.inserted.get(N);U||(U=[],this.inserted.set(N,U)),U.push({number:T,content:A}),T++;break;case u:this.linePositions.set(S,E),this.lineLengths.set(S,A.length),E+=A.length+1,S++,T++}}}catch(L){D=!0,I=L}finally{try{R||null==B.return||B.return()}finally{if(D)throw I}}}var t=e.prototype;return t.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},t.lineIsDeleted=function(e){return this.deleted.has(e)},t.lineInsertions=function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null},t.lineInsertedContent=function(e){var t=this.lineInsertions(e);return t?t.map((function(e){return e.content})).join("\n"):null},t.offsetFor=function(e){var t,n,r=0;r+=null!==(n=null===(t=this.inserted.get(0))||void 0===t?void 0:t.length)&&void 0!==n?n:0;for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},t.linePosition=function(e){var t;return null!==(t=this.linePositions.get(e))&&void 0!==t?t:null},t.lineLength=function(e){var t;return null!==(t=this.lineLengths.get(e))&&void 0!==t?t:null},t.line=function(e){var t=this.linePosition(e),n=this.lineLength(e);return null===t||null===n?null:{number:e,from:t,to:t+n,length:n,offset:this.offsetFor(e),isDeleted:this.lineIsDeleted(e),insertions:this.lineInsertions(e)}},t.lines=function(){var e,t,n,r,a,l,c,s,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:e=!0,t=!1,n=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i.Z)(a.value,1),c=l[0],!(s=this.line(c)))throw new Error("line should not be null");return[4,s];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return u=o.sent(),t=!0,n=u,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))},e}()},43758:function(e,t,n){n.d(t,{z:function(){return a}});var r=n(66091),i=n(96583),o=n(77824),a=function(){"use strict";function e(t,n,i,o){(0,r.Z)(this,e),this.a=t,this.b=n,this.chunks=i,this.map=o}var t=e.prototype;return t.line=function(e,t){return t===o.MF.A?this.a.line(e):this.b.line(e)},t.bounds=function(e){if(0===this.chunks.length)return null;var t=(0,o.Cf)(this.chunks[0],e),n=(0,o.Cf)(this.chunks[this.chunks.length-1],e),r=e===o.MF.A?this.a.length:this.b.length,i=Math.min(n.to,r);return{from:t.from,to:i}},t.hasChanges=function(){return this.chunks.length>0},t.updateA=function(t,n){var r=this.b,i=(0,o.U_)(t,r,{chunks:this.chunks,changesA:n});return new e(t,r,i,(0,o.XW)(t,r,i))},t.updateB=function(t,n){var r=this.a,i=(0,o.U_)(r,t,{chunks:this.chunks,changesB:n});return new e(r,t,i,(0,o.XW)(r,t,i))},t.getContainingChunk=function(e,t){for(var n=0,r=this.chunks.length-1;n<=r;){var i=n+r>>>1,a=this.chunks[i],l=(0,o.Cf)(a,t);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(n=i+1)}return null},t.getCorrespondingLine=function(e,t){var n=this.map.get(t===o.MF.A?-e:e);return n?this.line(n,(0,o.rN)(t)):null},t.getLineChangeType=function(e,t){if(this.map.get(t===o.MF.A?-e:e))return o.dQ.UNCHANGED;var n=this.line(e,t),r=this.getContainingChunk(n.from,t);return r?(0,o.dx)(n,t,r.changes,r):o.dQ.UNCHANGED},t.iterLines=function(e){var t,n,r,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:t=e===o.MF.A?this.a:this.b,n=1,i.label=1;case 1:return n<=t.lines?(r=t.line(n),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))},t.iterRanges=function(){var e,t,n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];t=this.chunks[e].fromA,n=this.chunks[e].fromB,r=0,i.label=2;case 2:return r<this.chunks[e].changes.length?(o=this.chunks[e].changes[r],[4,{fromA:t+o.fromA,toA:t+o.toA,fromB:n+o.fromB,toB:n+o.toB}]):[3,5];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}}))},e.create=function(t,n){var r=(0,o.U_)(t,n);return new e(t,n,r,(0,o.XW)(t,n,r))},e}()},19825:function(e,t,n){n.d(t,{y:function(){return s},m:function(){return u}});var r,i=n(87708),o=n(66091),a=n(96583),l=n(77824),c=function(){"use strict";function e(t,n,r,i,a,l){(0,o.Z)(this,e),this.original=t,this.current=n,this.chunks=r,this.desc=i,this.pending=a,this.ranges=l}var t=e.prototype;return t.hasChanges=function(){return this.ranges.length>0},t.update=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.original,a=this.chunks,c=this.desc,s=this.pending,u=this.ranges,d=this.pending?this.pending.length:this.current.length,f=Math.abs(d-t.length);if(f>=250||r){var h=(0,l.Gj)(c,s,n),p=h.pending;a=(0,l.U_)(o,t,{chunks:a,changesB:p}),c=(0,l.fu)(a,o.length),s=null,u=(0,l.Hu)(c)}else{var m;s=(m=(0,l.Gj)(c,s,n)).pending,c=m.desc,u=(0,l.Hu)(c)}return s&&t.eq(o)&&(a=[],c=i.as.empty(o.length),s=null,u=[]),new e(o,t,a,c,s,u)},t.isAccurate=function(){return null===this.pending},t.getLineChangeType=function(e){var t=this.current.line(e);return 0===this.original.length&&this.current.length>0?l.dQ.COVERED:(0,l.dx)(t,l.MF.B,this.ranges)},t.iterRanges=function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[5,(0,a.__values)(this.ranges)];case 1:return e.sent(),[2]}}))},e.create=function(t,n){var r=(0,l.U_)(t,n),i=(0,l.fu)(r,t.length);return new e(t,n,r,i,null,(0,l.Hu)(i))},e}(),s=i.r$.define({combine:function(e){return null!==(r=e.filter(Boolean)[0])&&void 0!==r?r:null}});var u=i.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.facet(s);return n?(e&&e.original.eq(n)?t.docChanged&&(e=e.update(t.newDoc,t.changes,function(e){return!(e.isUserEvent("input.type")||e.isUserEvent("delete.forward")||e.isUserEvent("delete.backward"))}(t))):e=c.create(n,t.newDoc),e):null}})},58444:function(e,t,n){n.d(t,{p:function(){return K}});var r,i,o=n(87708),a=n(66091),l=n(57988),c=n(5683),s=n(81962),u=n(45347),d=n(48587),f=n(68935),h=n(57600),p=n(43758),m=n(37105),v=o.r$.define({combine:function(e){return null!==(r=e.filter(Boolean)[0])&&void 0!==r?r:null}}),g=o.QQ.define({create:function(){return{diff:null,tree:h.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(v),o=null===(n=t.state.facet(f.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===h.mp.empty?e:{diff:null,tree:h.mp.empty};var a=e.diff,l=e.tree;return a&&a.a.eq(i)?t.docChanged&&(a=a.updateB(t.newDoc,t.changes)):(a=p.z.create(i,t.newDoc),l=h.mp.empty),(null===(r=t.startState.facet(f.dK))||void 0===r?void 0:r.parser)!==o&&(l=h.mp.empty),o&&l.length!==a.a.length?{diff:a,tree:l=(0,m.p)({parser:o,text:a.a,maxTime:16,base:l})}:e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),y=n(57389),Z=n(88965),b="cm-inline-diff-line-deletion-base",w="cm-inline-diff-line-deletion",x="cm-inline-diff-text-deletion",C="cm-inline-diff-line-insertion-base",k="cm-inline-diff-line-insertion",S="cm-inline-diff-text-insertion",E="rgba(180, 0, 0, 0.075)",T="rgba(180, 0, 0, 0.125)",R="rgba(0, 180, 0, 0.075)",D="rgba(0, 180, 0, 0.125)",I="cm-inline-diff-marker",_="cm-inline-diff-marker-left",B="cm-inline-diff-marker-right";function G(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var P=d.tk.theme((i={},(0,y.Z)(i,".".concat(b,", .").concat(w),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(Z.TV.accentPrimaryDimmest," !important")}}),(0,y.Z)(i,".".concat(b),{background:G(E)}),(0,y.Z)(i,".".concat(w),{background:G(E,T)}),(0,y.Z)(i,".".concat(C),{background:G(R)}),(0,y.Z)(i,".".concat(k),{background:G(R,D)}),(0,y.Z)(i,".".concat(S),{display:"inline-block",background:D,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(D),paddingLeft:"3px",marginLeft:"-6px"}}),(0,y.Z)(i,".".concat(x),{display:"inline-block",background:T,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(T),paddingLeft:"3px",marginLeft:"-6px"}}),(0,y.Z)(i,".".concat(I),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,y.Z)(i,".".concat(_),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,y.Z)(i,".".concat(B),{width:"50%",textAlign:"right"}),i)),A=n(77824),N=n(57385),U=n(3341),L=n.n(U),O=function(e){"use strict";(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i){var o;return(0,a.Z)(this,n),(o=t.call(this)).line=e,o.index=r,o.changed=i,o}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(b):"cm-line ".concat(w),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!==s&&void 0!==s?s:"",t.appendChild(u)}}catch(T){r=!0,i=T}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,h=null,p=null,m=function(t,n){if(!h)throw new Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-h.from,n-h.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!==o&&void 0!==o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!h){var v=this.line[f].text;h={from:d,to:d+v.length}}if(!p){var g=!0,y=!1,Z=void 0;try{for(var C,k=this.changed[Symbol.iterator]();!(g=(C=k.next()).done);g=!0){var S=C.value;if(!(S.from>=h.to||S.to<=d)){var E=document.createElement("span");E.className=x,p={from:S.from,to:S.to,dom:E},d<p.from&&m(t,p.from),t.appendChild(E);break}}}catch(T){y=!0,Z=T}finally{try{g||null==k.return||k.return()}finally{if(y)throw Z}}}p?(d<p.to&&m(p.dom,p.to),d>=p.to&&(p=null)):m(t,h.to),d>=h.to&&(h=null,f++)}return t},r.eq=function(e){var t,r;return(0,s.Z)(e,n)&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&L()(this.line,e.line)&&L()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,l.Z)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(d.l9),X=d.p.line({class:C}),M=d.p.line({class:k}),F=d.p.mark({class:S}),W=d.tk.decorations.compute([g],(function(e){var t=function(e,t){if(r.getLineChangeType(e.number,A.MF.B)===A.dQ.COVERED)o.push(M.range(e.from));else{o.push(X.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,A.Po)(e,t,A.MF.B,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(F.range(s.from,s.to))}}catch(u){i=!0,a=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(g,!1);if(!n||!n.diff)return d.p.none;var r=n.diff,i=n.tree,o=[],a=!0,l=!1,c=void 0;try{for(var s,u=r.chunks[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var f=s.value;if(f.fromB!==f.endB)for(var h=r.b.lineAt(f.fromB),p=r.b.lineAt(f.endB),m=h.number;m<=p.number;m++)t(r.b.line(m),f);else f.fromA===f.endA&&t(r.b.lineAt(f.fromB),f);if(f.fromA!==f.toA)for(var v=r.a.lineAt(f.fromA),y=(0,N.CT)(i,r.a,e,f.fromA,f.endA),Z=0;Z<y.length;Z++){var b=y[Z],w=r.a.line(v.number+Z),x=r.getLineChangeType(w.number,A.MF.A)===A.dQ.COVERED?null:(0,A.Po)(w,f,A.MF.A,!0),C=d.p.widget({widget:new O(b,w.number,x),block:!0,side:-(y.length-Z)});o.push(C.range(f.fromB))}}}catch(k){l=!0,c=k}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return d.p.set(o,!0)})),H=n(60382),V=(0,d.v5)({class:H.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(g,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;if(0===n.diff.a.length)return H.vP;var r=e.state.doc.lineAt(t.from);switch(n.diff.getLineChangeType(r.number,A.MF.B)){case A.dQ.COVERED:case A.dQ.MODIFIED:return H.vP;default:return null}},widgetMarker:function(e,t){if(!(0,s.Z)(t,O))return null;var n=e.state.field(g,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;switch(n.diff.getLineChangeType(t.index,A.MF.A)){case A.dQ.COVERED:case A.dQ.MODIFIED:return H.We;default:return null}},initialSpacer:function(e){var t=e.state.field(g,!1);return(null===t||void 0===t?void 0:t.diff)?H.vP:H.Do},updateSpacer:function(e,t){var n=t.state.field(g,!1),r=(null===n||void 0===n?void 0:n.diff)?H.vP:H.Do;return e===r?e:r}}),z=n(12606),j=function(e){"use strict";(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this)).left=e,i.right=r,i}var r=n.prototype;return r.toDOM=function(e){var t=e.state.doc.lines.toString().length,n=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return n.className=I,r.className=_,i.className=B,n.style.width="".concat(2*t+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),n.appendChild(r),n.appendChild(i),n},r.eq=function(e){return(0,s.Z)(e,n)&&this.left===e.left&&this.right===e.right},n}(d.SJ),q=z.X4.of((function(e,t){if((0,s.Z)(t,O))return new j(t.index,null)})),$=z.gy.of((function(e,t){var n=e.state.field(g,!1);if(n&&n.diff&&n.diff.hasChanges()){var r,i=e.state.doc.lineAt(t.from),o=n.diff.getCorrespondingLine(i.number,A.MF.B);return new j(null!==(r=null===o||void 0===o?void 0:o.number)&&void 0!==r?r:null,i.number)}})),Y=[$,q],K=o.r$.define({enables:function(e){return[v.computeN([e],(function(t){return t.facet(e)})),H.Lw,g,P,W,Y,V]}})},60382:function(e,t,n){n.d(t,{Do:function(){return I},Lw:function(){return S},Tr:function(){return d},Vt:function(){return D},We:function(){return T},vP:function(){return E},wp:function(){return R}});var r,i=n(66091),o=n(57389),a=n(5683),l=n(45347),c=n(48587),s=n(88965),u=s.TV.space2,d="cm-diff-gutter",f="".concat(d,"-element"),h="".concat(f,"-insertion"),p="".concat(f,"-modified"),m="".concat(f,"-deleted"),v="".concat(f,"-file-added"),g=s.TV.greenDefault,y=s.TV.greenStronger,Z=s.TV.blueDefault,b=s.TV.blueStronger,w=s.TV.redDefault,x=s.TV.redStronger,C=s.TV.greenDimmer,k=s.TV.greenDefault,S=c.tk.theme((r={},(0,o.Z)(r,".".concat(f),{width:u}),(0,o.Z)(r,".".concat(h),{backgroundColor:g,"&.cm-activeLineGutter":{backgroundColor:y}}),(0,o.Z)(r,".".concat(p),{backgroundColor:Z,"&.cm-activeLineGutter":{backgroundColor:b}}),(0,o.Z)(r,".".concat(m),{backgroundColor:w,"&.cm-activeLineGutter":{backgroundColor:x}}),(0,o.Z)(r,".".concat(v),{backgroundColor:C,"&.cm-activeLineGutter":{backgroundColor:k}}),r)),E=new(function(e){"use strict";(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).elementClass="".concat(f," ").concat(h),e}return n}(c.SJ)),T=new(function(e){"use strict";(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).elementClass="".concat(f," ").concat(m),e}return n}(c.SJ)),R=new(function(e){"use strict";(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).elementClass="".concat(f," ").concat(p),e}return n}(c.SJ)),D=new(function(e){"use strict";(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).elementClass="".concat(f," ").concat(v),e}return n}(c.SJ)),I=new(function(e){"use strict";(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return n}(c.SJ))},1235:function(e,t,n){n.d(t,{U:function(){return l}});var r=n(48587),i=n(31764),o=r.tk.theme({".cm-content":{paddingBottom:"".concat(80,"px")}}),a=r.tk.theme({".cm-content":{paddingBottom:"".concat(400,"px")}}),l=new i.j((function(e){return e?o:a}))},83389:function(e,t,n){n.d(t,{v:function(){return p}});var r=n(39995),i=n(64918),o=n(30312),a=n(72006),l=n(43119),c=n(71440),s=n(24635);function u(){var e=(0,l.Z)(['\n  query ChatEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-chat-engine")\n      hasOverride: gate(feature: "flag-ghostwriter-chat-engine-override")\n    }\n  }\n']);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());var h=n(25367);function p(){var e,t,n=(0,r.Z)().preferences,l=function(e){var t=(0,a.Z)({},d,e);return s.a(f,t)}().data,c=(0,h.T9)().useAdvancedModel,u=(0,h.ll)(),p=(0,h.Lw)(),m=null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasOverride,v=null===n||void 0===n?void 0:n.chatEngine,g=null===l||void 0===l||null===(t=l.currentUser)||void 0===t?void 0:t.defaultEngine;if(m&&v&&(0,i.uL)(v))return v;if(!(0,i.uL)(g))return o.Fp;var y=g;return c&&u?y=i.hf.model:p&&(y=o.Dm),y}},66656:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(39995),i=n(98416),o=n(72006),a=n(43119),l=n(71440),c=n(24635);function s(){var e=(0,a.Z)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());function f(){var e,t,n,a=(0,r.Z)().preferences,l=function(e){var t=(0,o.Z)({},u,e);return c.a(d,t)}().data,s=null===a||void 0===a?void 0:a.completeCodeEngine;if(s&&(null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasOverride)&&i.vw.has(s))return{engine:s,settings:i.Uw[s]};var f=null!==(n=null===l||void 0===l||null===(t=l.currentUser)||void 0===t?void 0:t.defaultEngine)&&void 0!==n?n:i.OO;return{engine:f,settings:i.Uw[f]}}},2918:function(e,t,n){n.d(t,{Yy:function(){return s},ZP:function(){return h},G_:function(){return f}});var r=n(63723),i=n(72006),o=n(43119),a=n(71440),l=n(24635);function c(){var e=(0,o.Z)(['\n  query CompleteCode {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return c=function(){return e},e}var s,u={},d=(0,a.Ps)(c());function f(e){return e!==s.None&&e!==s.BackendOnly}function h(){var e,t,n,o=function(e){var t=(0,i.Z)({},u,e);return l.a(d,t)}().data,a=(0,r.P5)({controlName:"flag-gw-charmander",logFlagToAnalytics:!0}),c=(0,r.P5)({controlName:"flag-gw-charizard",logFlagToAnalytics:!0}),f="UserPowerUpsTypes"===(null===o||void 0===o||null===(e=o.currentUser)||void 0===e||null===(t=e.userPowerUpsByType)||void 0===t?void 0:t.__typename)&&(null===o||void 0===o?void 0:o.currentUser.userPowerUpsByType.ghostwriter.active);return(null===o||void 0===o||null===(n=o.currentUser)||void 0===n?void 0:n.hasKillswitch)?s.None:f?s.Pro:a?c?s.Basic:s.BackendOnly:s.None}!function(e){e.None="None",e.Basic="Basic",e.Pro="Pro",e.BackendOnly="BackendOnly"}(s||(s={}))},89845:function(e,t,n){n.d(t,{S:function(){return f},t:function(){return d}});var r=n(72006),i=n(4405),o=n(2272),a=n(74906),l=n(50959),c=n(90234),s=n(71999),u="ai.codecomplete.lastTooltipHintTimestamp",d=(0,c.cn)({tooltipOpen:!1,consecutiveRejections:0});function f(){var e=(0,o.Z)((0,s.KO)(d),2),t=e[0],n=e[1];(0,l.useEffect)((function(){if(t.tooltipOpen){var e=setTimeout((function(){return n((function(e){return(0,i.Z)((0,r.Z)({},e),{tooltipOpen:!1})}))}),2500);return function(){return clearTimeout(e)}}}),[t.tooltipOpen,n]);return{recordAccept:function(){n((function(e){return(0,i.Z)((0,r.Z)({},e),{consecutiveRejections:0})}))},recordReject:function(){n((function(e){var t=e.consecutiveRejections+1;if(t>=5){var n=a.Z.get(u,"number");if(!n)return a.Z.set(u,Date.now()),(0,i.Z)((0,r.Z)({},e),{consecutiveRejections:t,tooltipOpen:!0});if(Date.now()-n>=432e6)return a.Z.set(u,Date.now()),(0,i.Z)((0,r.Z)({},e),{consecutiveRejections:t,tooltipOpen:!0})}return(0,i.Z)((0,r.Z)({},e),{consecutiveRejections:t})}))},resetState:function(){n((function(e){return(0,i.Z)((0,r.Z)({},e),{tooltipOpen:!1,consecutiveRejections:0})}))},tooltipOpen:t.tooltipOpen}}},5132:function(e,t,n){n.d(t,{Z:function(){return ce}});var r=n(50672),i=n(39995),o=n(34547),a=n(85919),l=n(50959),c=n(92650),s=n(66091),u=n(95844),d=n(50329),f=function(){"use strict";function e(){(0,s.Z)(this,e),this.cache=new u.L(d.vq)}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.get=function(e){return this.cache.get(e)},t.set=function(e,t){this.cache.set(e,t)},t.setSuggestion=function(e,t){this.cache.set(e,JSON.stringify({text:t})+"\n")},e}(),h=n(88733),p=n(57135),m=n(72006),v=n(4405),g=n(96583),y=n(43182),Z=n(65753),b=n(68935),w=n(87708),x=n(48587),C=n(32645),k=n(9434);var S=n(86763),E=n.n(S),T=n(13019),R=n(18125),D=n(72781),I=n(36791);function _(e){var t=e.onComplete,n=e.onEscape,r=null,i=null;return x.tk.domEventHandlers({touchstart:function(e){i=null,r=e.targetTouches[0].clientX},touchmove:function(e){i=e.targetTouches[0].clientX},touchend:function(e,o){if(r&&i)return r-i<-50&&t(o),n(o),!0}})}var B=n(28863),G=n(2918);var P=n(49500);function A(e){var t=e.language,n=e.infill,r=e.alternateDebounce,i=e.completeCodeAccessLevel,o=e.completeCode,a=e.freeUserDebounceTime,l=e.logMetadata,c=e.newRendering,s=e.keybindings,u=e.tooltipControl,f=function(){var e;return{abort:function(){null===e||void 0===e||e.abort()},requestSignal:function(){var t=new AbortController;return null===e||void 0===e||e.abort(),e=t,t.signal}}}(),S=function(e,t,n){var r=null,i=function(){};return{queue:function(o){if(!(Math.random()>n)){r&&clearTimeout(r);var a=function(){(0,k.j)(k.U3.CODE_SUGGESTION_USED,(0,m.Z)({type:e},o))};r=setTimeout(a,t),i=a}},flush:function(){r&&clearTimeout(r),i()},cancel:function(){r&&clearTimeout(r)}}}("suggestionPresented",500,.1),A=null,N=function(){var e=(0,p.Z)((function(e){var r,a,c,s,u,p,w,x,C,E,R,I,_,B,N,U,L,O,X,M;return(0,g.__generator)(this,(function(g){switch(g.label){case 0:if(a=e.state,c=a.doc,s=a.selection,0===(u=s.main.head))return[2];if(p=c.sliceString(u-1,u),d.mP.has(p))return[2];if(!(w=c.sliceString(Math.max(0,u-d.ed),u))||w.length<d.jr)return[2];A=w.length,w=e.state.facet(b.c)+"\n"+w,x=n?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("\n"),r=0;r<n.length;r++){var i=n[r];if(i[0]&&i[0].match(/\S/))return t?n.slice(0,r).join("\n")+"\n":n.slice(0,r+1).join("\n")}return e}(c.sliceString(u),d.NX.has(t)):void 0,C=(0,D.i)(e.state)?d.Pz:d._7,E=null===(r=w.match(/[^\s]([ \t]+)$/))||void 0===r?void 0:r[1],g.label=1;case 1:g.trys.push([1,14,,15]),R=!0,I=!1,_=!1,g.label=2;case 2:g.trys.push([2,7,8,13]),N=(0,h.Z)(o({code:E?w.slice(0,-E.length):w,suffix:x,maxTokens:C,signal:f.requestSignal()})),g.label=3;case 3:return[4,N.next()];case 4:if(!(I=!(U=g.sent()).done))return[3,6];if(L=U.value,O=L,"active"===(0,Z.LR)(e.state))return f.abort(),[3,6];if(i===G.Yy.BackendOnly)return y.n_({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,k.j)(k.U3.CODE_SUGGESTION_USED,(0,v.Z)((0,m.Z)({type:"suggestionNotPresented"},l),{reason:"ghostTextNotEnabledForFreeUser"})),[3,5];if(R&&E){if(!O.startsWith(E))return f.abort(),[3,6];O=O.slice(E.length)}R&&(y.n_({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),S.queue((0,v.Z)((0,m.Z)({},l),{prefixLength:A}))),e.dispatch({effects:R?T.t8.of({code:O,language:t,infill:n}):T.R3.of(O)}),R=!1,g.label=5;case 5:return I=!1,[3,3];case 6:return[3,13];case 7:return X=g.sent(),_=!0,B=X,[3,13];case 8:return g.trys.push([8,,11,12]),I&&null!=N.return?[4,N.return()]:[3,10];case 9:g.sent(),g.label=10;case 10:return[3,12];case 11:if(_)throw B;return[7];case 12:return[7];case 13:return!1!==R?(y.n_({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),e.dispatch({effects:T.t8.of(null)}),[2]):(y.n_({category:"ghostwriter",message:"Suggestion completely presented",level:"debug"}),e.dispatch({effects:T.dp.of(!0)}),[3,15]);case 14:return"AbortError"===(null===(M=g.sent())||void 0===M?void 0:M.name)?[2]:(y.$e((function(e){e.setExtra("prefix",w),e.setExtra("maxTokens",C),e.setExtra("language",t),e.setExtra("selection-head",u),e.setExtra("previous-character",p),e.setExtras(l),e.setTag("ghostwriter",!0),y.Tb(M)})),P.error("CodeSuggestionExtension"),P.error(M),[3,15]);case 15:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),U=new Map,L=function(){var e=(0,p.Z)((function(e,t){var n,o,l,c,s,u,f,h;return(0,g.__generator)(this,(function(p){return n=e.state,o=n.doc,l=n.selection,0===(c=l.main.head)||(s=o.sliceString(c-1,c),u=!(d.AX.has(s)||!r),f=function(e){var t=e.isInsideWordDebounce,n=e.completeCodeAccessLevel,r=e.freeUserDebounceTime;return t?n===G.Yy.Pro?d.Dd:d.VF:n===G.Yy.Pro?d.Dz:r}({isInsideWordDebounce:u,completeCodeAccessLevel:i,freeUserDebounceTime:a}),h=function(e,t){var n=U.get(t);return n||(n=E()(e,t),U.set(t,n)),n}(N,f),h(e),t===I.z.Now&&i===G.Yy.Pro&&h.flush()),[2]}))}));return function(t,n){return e.apply(this,arguments)}}(),O=function(e){var t=(0,R.$o)(e);if(t){var n=t.texts.reduce((function(e,t){return e+t.text.length}),0);return S.cancel(),(0,k.j)(k.U3.CODE_SUGGESTION_USED,(0,v.Z)((0,m.Z)({type:"suggestionAccepted"},l),{prefixLength:A,suggestionLength:n})),y.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),(0,Z._B)(e),u&&u.recordAccept(),!0}return!1};return[w.Wl.high(x.$f.of([{key:(0,B.cU)(s.acceptPrimaryCompletion),run:O},{key:(0,B.cU)(s.cancelCompletion),run:function(e){return!!(0,R._n)(e)&&(f.abort(),S.flush(),(0,k.j)(k.U3.CODE_SUGGESTION_USED,(0,v.Z)((0,m.Z)({type:"suggestionDismissed"},l),{prefixLength:A})),y.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),u&&u.recordReject(),!0)}},{key:"Enter",run:R.gT}])),x.tk.domEventHandlers({blur:function(e,t){setTimeout((function(){t.dispatch({effects:T.t8.of(null)})}),100),S.cancel(),f.abort()}}),x.tk.updateListener.of((function(e){(0,C.j)(e,T.he,(function(t){var n,r;t.value!==I.z.Stop?(n=e.view,r=t.value,S.cancel(),f.abort(),L(n,r)):(S.cancel(),f.abort())}))})),(0,R.G0)(c),_({onComplete:O,onEscape:R._n})]}var N=n(66656),U=n(63723),L=n(28435),O=n(87978);function X(e,t,n){var r=(0,c.S)(t),i=e.split("\n");return{code:i.slice(Math.max(0,i.length-n)).join("\n"),language:r,filePath:t}}var M=n(86813);function F(e,t,n){var r=(0,l.useState)([]),i=r[0],o=r[1],a=(0,l.useState)(!1),c=a[0],s=a[1];return(0,l.useEffect)((function(){e&&(s(!0),(0,p.Z)((function(){var r;return(0,g.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all(e.map(function(){var e=(0,p.Z)((function(e){var r,i;return(0,g.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n(e)];case 1:return(r=o.sent()).error?[2,!1]:(i=r.content.toString(),[2,t(i,e)]);case 2:return o.sent(),[2,!1];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return r=i.sent().filter(Boolean),s(!1),o(r),[2]}}))}))())}),[e,n,t]),{cachedFiles:i,loading:c}}var W={javascript:["javascript","typescript"],python:["python","python3"],python3:["python","python3"],typescript:["javascript","typescript"]},H=["json"];function V(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n===r||(!!H.includes(n)||!!W[n]&&W[n].includes(r))}function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=(0,U.P5)({controlName:"flag-ghostwriter-neighboring-context",logFlagToAnalytics:!1}),i=(0,M.Bx)(),o=(0,l.useState)(null),a=o[0],s=o[1];return(0,l.useEffect)((function(){s(r?i.filter((function(n){return V((0,c.S)(n),e)&&n!==t&&(0,O.Mb)(n)})).slice(0,n):null)}),[e,t,r,n,i]),a}var j=n(72123),q=n(85460),$=n(73012),Y=n(81962),K=n(11858),Q=n(95284);var J=n(12443),ee=n(7131),te=new Map,ne={beforeCompletion:function(e){y.n_({category:"ghostwriter",message:"Called completeCode: "+e.engine,level:"debug"});var t=J.YX.add(e),n=ee.kg.timeStart({language:e.language,engine:e.engine,replid:e.replId,codeLength:e.code.length});return te.set(t,n),t},afterCompletion:function(e,t,n,r){switch(e){case"aborted":J.YX.abort(r),te.delete(r);break;case"success":y.n_({category:"ghostwriter",message:"Suggestion emitted: "+n.partialSuggestion,level:"debug"});var i=te.get(r);if(!i)throw new Error("No latency logger found for handle: "+JSON.stringify(r));i("code suggestion",{type:"success"}),te.delete(r);break;case"finished":J.YX.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:n.completeSuggestion});break;default:throw new Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,t){t&&(J.YX.abort(t),te.delete(t)),ee.kg.error("CompleteCode: error in completion provider",{err:String(e)})}},re=n(89845);function ie(e){return oe.apply(this,arguments)}function oe(){return(oe=(0,K.Z)((function(e){var t,n,r,i;return(0,g.__generator)(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:return[4,(0,$.Z)(t.read())];case 2:return n=o.sent(),r=n.done,i=n.value,r?[3,4]:[4,i];case 3:return o.sent(),[3,1];case 4:return t.releaseLock(),[2]}}))}))).apply(this,arguments)}function ae(){return(ae=(0,K.Z)((function(e){var t,n,r,i,o,a,l,c,s;return(0,g.__generator)(this,(function(u){switch(u.label){case 0:t=new TextDecoder("utf-8"),n=!1,r=!1,u.label=1;case 1:u.trys.push([1,7,8,13]),o=(0,h.Z)(ie(e)),u.label=2;case 2:return[4,(0,$.Z)(o.next())];case 3:return(n=!(a=u.sent()).done)?(l=a.value,c=l,[4,t.decode(c,{stream:!0})]):[3,6];case 4:u.sent(),u.label=5;case 5:return n=!1,[3,2];case 6:return[3,13];case 7:return s=u.sent(),r=!0,i=s,[3,13];case 8:return u.trys.push([8,,11,12]),n&&null!=o.return?[4,o.return()]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,12];case 11:if(r)throw i;return[7];case 12:return[7];case 13:return[2]}}))}))).apply(this,arguments)}function le(){var e=function(){var e=(0,p.Z)((function(e,t){var n,r,i,o,a,l,c;return(0,g.__generator)(this,(function(s){switch(s.label){case 0:return[4,fetch("/ai/complete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},signal:t,body:JSON.stringify(e)})];case 1:return n=s.sent(),r=n.body,200===(i=n.status)?[3,3]:(o=Error.bind,l=(a="Error (".concat(i,") response from /ai/complete: ")).concat,[4,n.text()]);case 2:throw new(o.apply(Error,[void 0,l.apply(a,[s.sent()])]));case 3:if(!r)throw new Error("No body in response");return c=function(){return function(e){return ae.apply(this,arguments)}(r)},[2,c]}}))}));return function(t,n){return e.apply(this,arguments)}}();return e}function ce(e){var t,n=e.filePath,s=e.view,u=(0,o.Z)(),v=(0,c.S)(n),Z=(0,i.Z)().preferences,b=(0,N.Z)(),w=b.engine,x=b.settings,C=(0,U.P5)({controlName:"flag-ghostwriter-alternate-debounce",logFlagToAnalytics:!0}),k=null!==(t=null===x||void 0===x?void 0:x.infill)&&void 0!==t&&t,S=(0,j.gf)(q.CN.acceptPrimaryCompletion.id),E=(0,j.gf)(q.CN.cancelCompletion.id),T=(0,G.ZP)(),R=(0,U.P5)({controlName:"flag-code-suggestion-markdown",logFlagToAnalytics:!1}),D="markdown"===v&&R,I=(0,U.P5)({controlName:"flag-gw-new-ghost-text",logFlagToAnalytics:!1}),_=(0,U.P5)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:d.yr,type:"number"}),B=(0,U.P5)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1}),P=(0,r.Z)({view:s}),O=(0,re.S)(),M=B?O:void 0;(0,l.useEffect)((function(){J.YX.toggle(Boolean(Z.codeSuggestion))}),[Z.codeSuggestion]);var W=(0,a.Z)((function(){return le()}),[]),H=(0,a.Z)((function(){return new f}),[v,n,u,w]),V=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,i=(0,L.Z)().fs,o=F(z(e,t,r),(0,l.useCallback)((function(e,t){return X(e,t,n)}),[n]),(0,l.useCallback)(function(){var e=(0,p.Z)((function(e){return(0,g.__generator)(this,(function(t){switch(t.label){case 0:return[4,i.readFile(e)];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),[i])).cachedFiles;return null!==o&&void 0!==o?o:[]}(v,n),ee=function(e){var t=e.language,n=e.engine,r=e.replId,i=e.filePath,o=e.additionalContext,a=e.settings,c=e.provider,s=e.cache,u=e.hooks,d=a.infill,f=a.isMarkdownOverridden,p=(0,l.useCallback)(function(){var e=(0,K.Z)((function(e){var a,l,p,v,y,Z,b,w,x,C,k,S,E,T,R,D,I,_,B,G,P,A,N,U,L,O;return(0,g.__generator)(this,(function(X){switch(X.label){case 0:return a=e.code,l=e.suffix,p=e.signal,v=e.maxTokens,a?(y=f?{maxTokens:75,stop:[]}:{},Z=(0,m.Z)({language:t,code:a,suffix:d?l:void 0,replId:r,filePath:i,engine:n,maxTokens:v,additionalContext:o,stop:["\n\n","```"]},y),b=null===u||void 0===u?void 0:u.beforeCompletion(Z),null==(x=s.get(a))?[3,1]:(w=(0,K.Z)((function(){return(0,g.__generator)(this,(function(e){switch(e.label){case 0:return[4,x];case 1:return e.sent(),[2]}}))})),[3,4])):[2];case 1:return X.trys.push([1,3,,4]),[4,(0,$.Z)(c(Z,p))];case 2:return w=X.sent(),[3,4];case 3:return"AbortError"===(null===(C=X.sent())||void 0===C?void 0:C.name)||null===u||void 0===u||u.erroredCompletion((0,Y.Z)(C,Error)?C:new Error("Unknown error"),b),[2];case 4:k="",S="",E=!0,T=!1,p.addEventListener("abort",(function(){b&&(null===u||void 0===u||u.afterCompletion("aborted",Z,{},b)),T=!0})),R=!1,D=!1,X.label=5;case 5:X.trys.push([5,13,14,19]),_=(0,h.Z)(w()),X.label=6;case 6:return[4,(0,$.Z)(_.next())];case 7:if(!(R=!(B=X.sent()).done))return[3,12];G=B.value,S+=G,P=void 0,X.label=8;case 8:return-1===(P=S.indexOf("\n"))?[3,11]:(A=JSON.parse(S.substring(0,P)),N=A.text,S=S.substring(P+1),U=(0,Q.Hy)(N,t),L=U.replacementSuggestion,k+=L,T?[3,10]:[4,L]);case 9:X.sent(),E&&b&&(null===u||void 0===u||u.afterCompletion("success",Z,{fromCache:!!x,partialSuggestion:L},b)),X.label=10;case 10:return E=!1,(0,Q.cx)(k).haltAfter&&(T=!0),[3,8];case 11:return R=!1,[3,6];case 12:return[3,19];case 13:return O=X.sent(),D=!0,I=O,[3,19];case 14:return X.trys.push([14,,17,18]),R&&null!=_.return?[4,_.return()]:[3,16];case 15:X.sent(),X.label=16;case 16:return[3,18];case 17:if(D)throw I;return[7];case 18:return[7];case 19:return k.trim().length&&!s.has(a)&&s.setSuggestion(a,k),T||!S?[3,21]:[4,S];case 20:X.sent(),X.label=21;case 21:return b&&(null===u||void 0===u||u.afterCompletion("finished",Z,{completeSuggestion:k,fromCache:!!x},b)),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[t,n,r,i,o,d,f,s,u,c]);return p}({language:v,engine:w,replId:u,filePath:n,additionalContext:V,settings:{infill:k,isMarkdownOverridden:D},provider:W,cache:H,hooks:ne});(0,l.useEffect)((function(){if(s&&T!==G.Yy.None){if(Z.codeSuggestion&&(d.PE.has(v)||D)){var e={filePath:n,language:v,engine:w,additionalContextCount:V.length,additionalContextLength:V.reduce((function(e,t){return e+t.code.length}),0)};return s.dispatch({effects:P.reconfigure(A({language:v,infill:k,alternateDebounce:C,completeCodeAccessLevel:T,completeCode:ee,freeUserDebounceTime:_,logMetadata:e,newRendering:I,keybindings:{acceptPrimaryCompletion:S,cancelCompletion:E},tooltipControl:M}))}),function(){s.dispatch({effects:P.reconfigure([])})}}y.n_({category:"ghostwriter",message:"Explicitly skipped useCompleteCode effect.",level:"info"})}}),[s,H,ee,P,n,v,u,w,Z.codeSuggestion,k,C,T,_,V,S,E,D,I,M])}},96037:function(e,t,n){n.d(t,{$:function(){return f},u:function(){return h}});var r=n(72006),i=n(4405),o=n(87708),a=n(48587),l=n(18967),c=n(28984),s=n(32645),u=n(9434);function d(e){var t=e.state.field(f);if(t){var n=t.type;return"explainCode"===n?(0,u.j)(u.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"EXPLAIN"}):"generateCode"===n?(0,u.j)(u.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"GENERATE"}):"transformCode"===n&&(0,u.j)(u.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:"TRANSFORM"}),e.dispatch({effects:l.Q.of(null)}),!0}return!1}var f=o.QQ.define({create:function(){return null},update:function(e,t){if((0,s.j)(t,l.Q,(function(t){e=t.value?{codeReference:t.value.codeReference,type:t.value.type,loading:t.value.loading,data:t.value.data}:null})),!e||t.changes.empty)return e;var n=e.codeReference.range.indexFrom>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexTo);return n>=o?null:e=(0,i.Z)((0,r.Z)({},e),{codeReference:(0,i.Z)((0,r.Z)({},e.codeReference),{range:{indexFrom:n,indexTo:o,lineFrom:t.newDoc.lineAt(n).number,lineTo:t.newDoc.lineAt(o).number}})})},provide:function(e){return[o.Wl.highest(a.$f.of([{key:"Escape",run:d}])),c.gb.from(e,(function(e){var t;return null!==(t=(null===e||void 0===e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==t?t:null}))]}}),h=o.QQ.define({create:function(){return null},update:function(e,t){if(!t.state.field(f))return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;c.is(l.Q)&&(e=null),c.is(l.h)&&(e=c.value)}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}})},67112:function(e,t,n){n.d(t,{Ut:function(){return r},Ou:function(){return g},W2:function(){return Z},x9:function(){return v}});var r,i=n(57135),o=n(66091),a=n(96583),l=n(48587),c=n(87708),s=n(19825),u=n(60382),d=n(77824),f=(0,l.v5)({class:u.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(s.m,!1);if(!n||!n.hasChanges())return null;if(0===n.original.length)return u.Vt;var r=e.state.doc.lineAt(t.from);switch(n.getLineChangeType(r.number)){case d.dQ.COVERED:return u.vP;case d.dQ.MODIFIED:return u.wp;default:return null}},initialSpacer:function(e){return e.state.field(s.m,!1)?u.Vt:u.Do},updateSpacer:function(e,t){var n=t.state.field(s.m,!1)?u.Vt:u.Do;return e===n?e:n}}),h=c.r$.define({enables:function(e){return[s.y.computeN([e],(function(t){return t.facet(e)})),u.Lw,s.m,c.Wl.highest(f)]}}),p=n(58444);!function(e){e.GUTTER_DIFF="GUTTER_DIFF",e.INLINE_DIFF="INLINE_DIFF"}(r||(r={}));var m=c.Py.define(),v=c.Py.define(),g=c.QQ.define({create:function(){return{head:null,mode:r.GUTTER_DIFF}},update:function(e,t){var n=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,c=t.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.is(m)?n=s.value:s.is(v)&&(r=s.value)}}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n!==e.head||r!==e.mode?{head:n,mode:r}:e},provide:function(e){return[h.from(e,(function(e){return e.mode===r.GUTTER_DIFF?e.head:null})),p.p.from(e,(function(e){return e.mode===r.INLINE_DIFF?e.head:null}))]}}),y=function(){"use strict";function e(t,n,r){var i=this;(0,o.Z)(this,e),this.view=t,this.git=n,this.path=r,this.disposed=!1,this.dispose=n.onRefresh((function(){return i.fetchThenUpdateState()})),this.fetchThenUpdateState()}var t=e.prototype;return t.fetchThenUpdateState=function(){var e=this;return(0,i.Z)((function(){var t,n,r,i,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD"})];case 1:return t=a.sent(),e.disposed?[2]:(n=e.view.state.field(g,!1))?(i=t.error?null:null!==(r=t.content)&&void 0!==r?r:"",(!(o=null===i?null:e.view.state.toText(i))!==!n.head||o&&n.head&&!o.eq(n.head))&&e.view.dispatch({effects:m.of(o)}),[2]):[2]}}))}))()},t.destroy=function(){this.dispose(),this.disposed=!0},e}();function Z(e,t){if(!t)return[];var n=l.lg.define((function(n){return new y(n,e,t)}));return[g,n]}},63119:function(e,t,n){n.d(t,{M:function(){return c}});var r=n(9970),i=n(48587),o=n(50959),a=n(51467),l=n(87708);function c(e,t,n,c){var s=(0,o.useState)((function(){return new l.F6}))[0],u=(0,a.Z)(e);(0,o.useEffect)((function(){if(n){var e=u.current();if(e){var t=void 0===s.get(n.state)?l.Py.appendConfig.of(s.of(e)):s.reconfigure(e);try{n.dispatch({effects:t})}catch(r){(0,i.OO)(n.state,r,c)}return function(){try{n.dispatch({effects:s.reconfigure([])})}catch(r){(0,i.OO)(n.state,r,c)}}}}}),[n,s,u,c].concat((0,r.Z)(t)))}},97424:function(e,t,n){n.d(t,{EE:function(){return m},Gj:function(){return l},ZF:function(){return v},_j:function(){return c},f3:function(){return h},fI:function(){return p},gm:function(){return f},yK:function(){return u}});var r=n(2272),i=n(59672),o=n(32508),a=n.n(o),l={regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,t,n){var r=Number(e)+n.movementX;isNaN(r)||t(r.toString())}},c={regexp:/true|false/g,cursor:"pointer",onClick:function(e,t){switch(e){case"true":return t("false");case"false":return t("true")}}};function s(e){var t=new RegExp("".concat(e,"\\(-?\\b\\d+\\.?\\d*\\b\\s*(,\\s*-?\\b\\d+\\.?\\d*\\b)?"),"g"),n=new RegExp("".concat(e,"\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?"));return{regexp:t,cursor:"move",onDrag:function(t,r,i){var o,a,l=n.exec(t),c=Number(null===l||void 0===l||null===(o=l.groups)||void 0===o?void 0:o.x),s=Number(null===l||void 0===l||null===(a=l.groups)||void 0===a?void 0:a.y);isNaN(c)||(isNaN(s)&&(s=c),r("".concat(e,"(").concat(c+i.movementX,", ").concat(s+i.movementY)))}}}var u=s("vec2");s("ellipse"),s("circle"),s("point"),s("rect"),s("square"),s("vertex");function d(e){var t=new RegExp("".concat(e,"\\(.*\\)"),"g"),n=new RegExp("".concat(e,"\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"));return{regexp:t,cursor:"pointer",onClick:function(t,o){var a,l,c,s=n.exec(t),u=Number(null===s||void 0===s||null===(a=s.groups)||void 0===a?void 0:a.r),d=Number(null===s||void 0===s||null===(l=s.groups)||void 0===l?void 0:l.g),f=Number(null===s||void 0===s||null===(c=s.groups)||void 0===c?void 0:c.b),h=document.createElement("input");h.type="color",isNaN(u+d+f)||(h.value=(0,i.C)(u,d,f)),h.addEventListener("input",(function(t){var n=t.target;if(n.value){var a=(0,r.Z)((0,i.w)(n.value),3),l=a[0],c=a[1],s=a[2];o("".concat(e,"(").concat(l,", ").concat(c,", ").concat(s,")"))}})),h.click()}}}var f=d("rgb"),h=d("background"),p=d("fill"),m=d("stroke"),v={regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){a()(e)&&window.open(e,"_blank")}}},54457:function(e,t,n){n.d(t,{F:function(){return R},V:function(){return D}});var r=n(2272),i=n(74985),o=n(48306),a=n.n(o),l=n(50959),c=n(12235),s=n(97754),u=n.n(s),d=n(48587),f=n(22004),h=n(26473),p=n(88965),m=n(16296),v=n(91625),g=n(53312),y=n(50769),Z=n(50672),b=n(64116),w=n(20476),x=n(43312),C=n(7986);function k(e){var t=e.height,n=e.loading;return(0,i.BX)("div",{className:a().dynamic([["5a8d0f5b84417a3b",[t]]])+" "+(u()("loader",{loading:n})||""),children:[(0,i.BX)(c.Z,{viewBox:"0 0 100 36",backgroundColor:p.TV.backgroundHighest,foregroundColor:p.TV.backgroundHigher,children:[(0,i.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"4",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[t]]])}),(0,i.tZ)("rect",{x:"6",y:"0",rx:"2",ry:"2",width:"92",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[t]]])})]}),(0,i.tZ)(a(),{id:"5a8d0f5b84417a3b",dynamic:[t],children:".loader.__jsx-style-dynamic-selector{padding:var(--space-8);display:none}.loader.loading.__jsx-style-dynamic-selector{height:".concat(t,";display:block}")})]})}var S=(0,x.iv)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),E=(0,x.iv)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),T={root:p.l0.backgroundColor.backgroundRoot,higher:p.l0.backgroundColor.backgroundHigher,highest:p.l0.backgroundColor.backgroundHighest,default:p.l0.backgroundColor.backgroundDefault};function R(e){var t=e.maxHeight,n=e.minHeight,o=e.extensions,a=void 0===o?[]:o,c=e.allowScroll,s=void 0===c||c,u=e.fontSize,f=e.hideGutter,h=e.path,p=e.snippet,m=e.style,v=e.elevation,g=e.onNavigateToCode,y=(0,r.Z)(l.useState(!1),2),R=y[0],D=y[1],I=(0,C.Z)(),_=I.ref,B=I.view,G=l.useMemo((function(){return function(e){return(0,x.iv)({".cm-editor":e,".cm-gutters":e})}(T[null!==v&&void 0!==v?v:"default"])}),[v]),P=(0,Z.Z)({view:B});return l.useEffect((function(){if(B&&p&&h){var e="lines"in p?p.lines.join("\n"):p.doc;return B.dispatch({changes:{from:0,to:B.state.doc.length,insert:e},effects:P.reconfigure([(0,d.Eu)({formatNumber:function(e,t){for(var n=String(t.doc.lines).length,r=String(e+p.startLineNumber-1);n>r.length;)r="\xa0"+r;return r}}),a])}),D(!0),function(){B.dispatch({effects:P.reconfigure([])})}}}),[B,p,h,P,a,v]),(0,i.BX)("div",{style:m,children:[(0,i.tZ)(w.ZP,{ref:_,css:[S,G,s?null:E],style:{minHeight:n,maxHeight:null!==t&&void 0!==t?t:"10em"},hideGutter:f,filePath:h,fontSize:u,readOnly:!0,onClick:function(e){if(g&&B){var t=e.clientX,n=e.clientY,r=B.posAtCoords({x:t,y:n}),i=null!==r?(0,b.s)(B.state.doc,r):null;g(i)}}}),(0,i.tZ)(k,{loading:!R,height:t})]})}function D(e){var t=e.path,n=e.doc,o=e.extensions,a=void 0===o?[]:o,c=e.numMatches,s=e.onNavigateToCode,u=e.initiallyExpanded,d=(0,r.Z)(l.useState(u),2),Z=d[0],b=d[1],w=Z?"block":"none",x=Z?180:0,C=Z?"Collapse snippet":"Expand snippet";return(0,i.BX)(h.G,{children:[(0,i.BX)(h.G,{css:[p.l0.width("100%"),p.l0.p(4),p.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,i.tZ)(f.Z,{path:t}),(0,i.tZ)(g.xv,{multiline:!1,title:t,css:[p.l0.flex.shrink(1),{textOverflow:"ellipsis"}],children:t}),(0,i.tZ)(g.xv,{color:"dimmest",multiline:!1,children:(0,y.Z)("match",c,!0)}),(0,i.tZ)(h.G,{css:p.l0.flex.grow(1)}),(0,i.tZ)(m.hU,{alt:C,tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,i.tZ)(v.Z,{rotate:x,style:{transition:"200ms ease"}})})]}),(0,i.tZ)(h.G,{css:[p.l0.p(4),{display:w}],children:(0,i.tZ)(R,{path:t,snippet:{doc:n,startLineNumber:1},extensions:a,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:s})})]})}},14081:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(66091),i=n(5683),o=n(45347),a=n(48587),l=n(87708),c=n(88965),s=n(50769),u=new(function(e){"use strict";(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(a.SJ)),d=function(e){"use strict";(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this)).numLines=e,i}var a=n.prototype;return a.eq=function(e){return e.numLines===this.numLines},a.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,s.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(a.l9),f=a.p.mark({class:"cm-searchResultMatch"}),h=a.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:c.TV.foregroundDefault,backgroundColor:c.TV.accentPrimaryDimmest,outline:c.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:c.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function p(e,t){var n=e.sort((function(e,t){return e.from-t.from})),r=n.map((function(e){var t=e.from,n=e.to;return f.range(t,n)})),i=a.lg.define((function(){return{}}),{decorations:function(){return a.p.set(r)}}),o=function(e,t){var n=[],r=1;e.forEach((function(i,o){var a=t.lineAt(i.from),l=t.lineAt(i.to);r<a.number-2&&n.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<t.lines&&n.push({startLine:r,endLine:t.lines})}));var i=n.map((function(e){var n=t.line(e.startLine),r=t.line(e.endLine);return a.p.replace({widget:new d(e.endLine-e.startLine+1)}).range(n.from,r.to)})),o=n.map((function(e){var n=t.line(e.startLine);return a.p.line({class:"cm-line-hidden"}).range(n.from)})),c=l.QQ.define({create:function(){return a.p.set(i)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),s=l.QQ.define({create:function(){return a.p.set(o)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),f=n.map((function(e){var n=t.line(e.startLine);return u.range(n.from)})),p=a.p2.of(l.Xs.of(f));return[c,s,h,p]}(n,t);return[i,o]}},10207:function(e,t,n){n.d(t,{Ny:function(){return f},_S:function(){return d},oZ:function(){return u}});var r=n(72006),i=n(4405),o=n(2272),a=n(50959),l=n(87708),c=n(45362),s=n(95844);function u(e){var t=Array.from(e.fileMap.entries()).map((function(e){var t,n=(0,o.Z)(e,2),a=n[0],l=n[1];return[a,(t=l,(0,i.Z)((0,r.Z)({},t),{editorState:t.editorState.toJSON({history:c.cE})}))]}));return JSON.stringify({fileMap:t})}function d(e){var t=JSON.parse(e).fileMap,n=new s.L(20);return t.forEach((function(e){var t,a=(0,o.Z)(e,2),s=a[0],u=a[1];n.set(s,(t=u,(0,i.Z)((0,r.Z)({},t),{editorState:l.yy.fromJSON(t.editorState,void 0,{history:c.cE})})))})),{fileMap:n}}function f(){return{fileMap:new s.L(20)}}var h=a.createContext(null);t.ZP=h},85027:function(e,t,n){n.d(t,{OQ:function(){return m},PQ:function(){return g},UQ:function(){return u},YM:function(){return h},ZS:function(){return v},cR:function(){return p},eR:function(){return f},qi:function(){return s}});var r=n(72006),i=n(4405),o=n(87708),a=n(32645),l=n(88965),c=n(48587),s=o.Py.define(),u=o.Py.define(),d=o.Py.define(),f=o.Py.define(),h=o.Py.define(),p=c.tk.baseTheme({".replit-thread-highlight":{background:l.TV.accentPrimaryDimmest,transition:"".concat(l.TV.transitionDurationSnappy," all\n            ").concat(l.TV.transitionTimingFunctionSnappy)},".replit-thread-highlight .replit-thread-highlight":{background:"transparent"},".cm-thread-indicator-gutter":{transform:"translate(calc(-100% - var(--space-8)));",width:"20px",overflow:"visible"}}),m=o.QQ.define({create:function(){return{}},update:function(e,t){var n=e;return(0,a.j)(t,s,(function(e){n=e.value})),t.changes.empty?n:n=Object.values(n).map((function(e){var n=e.indexStart>t.state.doc.length?t.state.doc.length:t.changes.mapPos(e.indexStart),o=e.indexEnd>t.state.doc.length?t.state.doc.length:t.changes.mapPos(e.indexEnd);return(0,i.Z)((0,r.Z)({},e),{indexStart:n,indexEnd:o})})).reduce((function(e,t){return e[t.id]=t,e}),{})}}),v=o.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,a.j)(t,u,(function(e){var r=t.state,i=r.selection.main,o=i.from,a=i.to;if(o===a){var l=r.doc.lineAt(o);o=Math.max(l.from-1,0),a=l.to}n={id:e.value,indexStart:o,indexEnd:a}})),(0,a.j)(t,d,(function(){n=null})),(0,a.j)(t,h,(function(){n=null})),null!==n&&(0,a.j)(t,s,(function(e){if(!n)throw new Error("expected newPlaceholder");e.value[n.id]&&(n=null)})),!t.changes.empty&&n&&(n=(0,i.Z)((0,r.Z)({},n),{indexStart:t.changes.mapPos(n.indexStart),indexEnd:t.changes.mapPos(n.indexEnd)})),n}}),g=o.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,a.j)(t,h,(function(e){n=e.value})),(0,a.j)(t,u,(function(e){n=e.value})),n}})},4014:function(e,t,n){n.d(t,{AL:function(){return w},GD:function(){return m},VO:function(){return p},Y:function(){return Z},tT:function(){return g}});var r=n(72006),i=n(43119),o=n(71440),a=n(95861),l=n(24635),c=n(50216);function s(){var e=(0,i.Z)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},p=(0,o.Ps)(s(),a.j7);function m(e){var t=(0,r.Z)({},h,e);return l.a(p,t)}var v=(0,o.Ps)(u(),a.j7);function g(e){var t=(0,r.Z)({},h,e);return c.D(v,t)}var y=(0,o.Ps)(d(),a.j7);function Z(e){var t=(0,r.Z)({},h,e);return c.D(y,t)}var b=(0,o.Ps)(f(),a.j7);function w(e){var t=(0,r.Z)({},h,e);return c.D(b,t)}},56469:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(72006),i=n(4405),o=n(2272),a=n(9970),l=n(50959),c=n(25404),s=n(4014),u=n(24065),d=n(95861),f=n(48034),h=n(34547),p=n(67813),m=n(28435),v=n(85027),g=n(85919),y=n(30826),Z=n.n(y);function b(e,t){if(!e)return null;var n,r=e.state.field(v.OQ),i=e.state.field(v.ZS),o=null!==(n=r[t])&&void 0!==n?n:(null===i||void 0===i?void 0:i.id)===t?i:null;return o||null}function w(e,t){if(!e)return null;var n=b(e,t);if(!n)return null;var r=Math.min(n.indexStart,n.indexEnd),i=Math.max(n.indexStart,n.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function x(e,t,n){var y=(0,c.Z)().showError,x=(0,h.Z)(),C=(0,f.Z)().map((function(e){return e.username})),k=(0,m.Z)().fs,S=(0,s.GD)({variables:{id:e}}),E=S.data,T=S.error,R=S.loading,D=S.client,I=function(){var n;return R||!E?!!t&&(null===(n=t.state.field(v.ZS))||void 0===n?void 0:n.id)===e:"AnnotationAnchor"!==E.thread.__typename}(),_=R,B=l.useMemo((function(){return _||!E?null:"UserError"===E.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===E.thread.__typename?E.thread:null}),[E,e,_]),G=(0,o.Z)((0,s.tT)({onError:function(e){return y(e.message)},update:function(e,t){var n,r;t.errors?t.errors.forEach((function(e){return y(e.message)})):"UserError"!==(null===(n=t.data)||void 0===n||null===(r=n.createThread)||void 0===r?void 0:r.__typename)||y(t.data.createThread.message)}}),1),P=G[0],A=(0,o.Z)((0,s.AL)({onError:function(e){return y(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return y(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createThreadMessage;r&&"UserError"===r.__typename&&y(r.message)}}}),1),N=A[0],U=(0,o.Z)((0,s.Y)({onError:function(e){return y(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return y(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateThread;r&&"UserError"===r.__typename&&y(r.message)}}}),1),L=U[0],O=(0,o.Z)((0,d.Hj)(),1)[0],X=(0,g.Z)((function(){return Z()(O,1e3,{trailing:!1})}),[O]),M=function(){var e=null===E||void 0===E?void 0:E.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,image:e.image}}:{}};return{thread:B,isPlaceholder:I,error:T,loading:_,getHighlight:w,getLatestAnchor:function(){return b(t,e)},updateThread:function(e){var t,n=e.changes,o="AnnotationAnchor"===(null===E||void 0===E||null===(t=E.thread)||void 0===t?void 0:t.__typename)?E.thread:null;if(!o)throw new Error("expected thread");L({variables:{id:o.id,changes:n},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i.Z)((0,r.Z)({},o,n),{isResolved:"boolean"===typeof n.isResolved?n.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l,c=o.message,d=o.messageId,f={id:d,text:c,mentions:(0,p.kW)(c,{users:(0,a.Z)(C).concat(["everyone"])}).mentions};if(I&&t&&n){var h=t.state.field(v.ZS),m={id:e,replId:x,indexStart:null===h||void 0===h?void 0:h.indexStart,indexEnd:null===h||void 0===h?void 0:h.indexEnd,otVersion:k.getOTVersion(n),path:n};P({variables:{thread:m,message:f,highlight:w(t,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i.Z)((0,r.Z)({__typename:"AnnotationAnchor"},m,M()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:(new Date).toISOString(),currentUserIsAuthor:!0},M()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:m.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),D.writeQuery({query:s.VO,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i.Z)((0,r.Z)((0,i.Z)((0,r.Z)({},m),{isResolved:!1,isGeneral:!1}),M()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:(new Date).toISOString(),currentUserIsAuthor:!0},M()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:m.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null===E||void 0===E?void 0:E.currentUser}});var g=D.readQuery({query:u.Jq,variables:{replId:x,path:n}});if(g){var y,Z="ThreadsByFileResult"===(null===(y=g.threadsByFile)||void 0===y?void 0:y.__typename)?g.threadsByFile.threads:[],b=M().user;D.writeQuery({query:u.Jq,variables:{replId:x,path:n},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a.Z)(Z).concat([(0,r.Z)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:b,isResolved:!1,participants:[b]},m)])}}})}}else{var S="AnnotationAnchor"===(null===E||void 0===E||null===(l=E.thread)||void 0===l?void 0:l.__typename)?E.thread:null;if(!S)throw new Error("expected thread");N({variables:{replId:x,threadId:S.id,threadMessage:f,highlight:w(t,S.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i.Z)((0,r.Z)({},S),{messages:(0,a.Z)(S.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,i.Z)((0,r.Z)({},M(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:S.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:(new Date).toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})}},changeThreadMessage:function(t){var n=t.messageId;X({variables:{threadId:e,messageId:n,message:null}})}}}},24065:function(e,t,n){n.d(t,{Jq:function(){return s},eR:function(){return u}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r.Z)({},c,e);return a.a(s,t)}},32645:function(e,t,n){function r(e,t,n){if("effects"in e){var i=!0,o=!1,a=void 0;try{for(var l,c=e.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.is(t)&&n(s)}}catch(m){o=!0,a=m}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{var u=!0,d=!1,f=void 0;try{for(var h,p=e.transactions[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){r(h.value,t,n)}}catch(m){d=!0,f=m}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}}}n.d(t,{j:function(){return r}})},64116:function(e,t,n){function r(e,t){var n=Math.max(t.line+1,1),r=e.line(Math.min(n,e.lines));if(n>e.lines)return r.to;var i=r.from+t.character;return Math.min(i,r.to)}function i(e,t){var n=e.lineAt(t);return{line:n.number-1,character:t-n.from}}n.d(t,{R:function(){return r},s:function(){return i}})},25183:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(87708),i=n(32645);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.Py.define(),o=r.QQ.define({create:function(){return t},update:function(t,r){return(0,i.j)(r,n,(function(n){t=e(n.value,t)})),t}});return{effect:n,state:o}}},94821:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(74985),i=n(18950),o=n(50959);function a(e){var t=e.json,n=(0,o.useMemo)((function(){return JSON.stringify(t,null,2)}),[t]);return(0,r.tZ)(i.Z,{language:"json",code:n})}},99829:function(e,t,n){n.d(t,{X:function(){return Dt}});var r=n(57389),i=n(72006),o=n(74985),a=n(58125),l=n(92361),c=n(61025),s=n(94979),u=n(88965),d=n(55418),f=n(26473),h=n(50959),p=n(85919),m=n(51467),v=n(27773),g=n(6108),y=n(57135),Z=n(2272),b=n(96583),w=n(90234),x=n(92153),C=n(38029),k=n(9970);function S(e){return e.map((function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label})).join(":")}function E(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e.slice(t)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;"group"!==c.data.type&&n.push(c.data.label)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,k.Z)(new Set(n))}function T(e,t){for(var n=e.indexPath,r=t.indexPath,i=Math.min(n.length,r.length),o=0;o<i;o++){if(n[o]>r[o])return 1;if(n[o]<r[o])return-1}return n.length-r.length}var R=n(71999),D=n(28132),I=n(28999),_=(0,h.createContext)(void 0);function B(){var e=(0,h.useContext)(_);if(!e)throw new Error("Expected store in context");return e}function G(e){var t=B();return(0,R.Dv)(e,{store:t})}function P(e){return(0,I.lV)((0,h.useCallback)((function(t){return t(e)}),[e]),{store:B()})}var A=function(e){var t=B();return(0,R.b9)(e,{store:t})};function N(e){return(0,D.b)(e,B())}var U=n(15859),L=function(e){return"item-"+e},O=(0,w.cn)(0),X=(0,w.cn)(0),M=(0,w.cn)(0),F=(0,w.cn)((function(e){return e(O)+e(X)+e(M)})),W=(0,w.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),H=(0,w.cn)(!0);function V(){return G(H)}var z=(0,w.cn)(!1);function j(){return G(z)}var q,$,Y=(0,w.cn)(null),K=(0,w.cn)({}),Q=(0,U.kv)(K,(function(e){return Boolean(e.openOnInput)})),J=(0,U.kv)(K,(function(e){return Boolean(e.autoFocus)})),ee=(0,U.kv)(K,(function(e){return e.keyboardShortcut})),te=(0,U.kv)(K,(function(e){return e.command})),ne=(0,U.kv)(K,(function(e){return e.overscan})),re=(0,U.kv)(K,(function(e){return e.footer})),ie=(0,U.kv)(K,(function(e){return e.focusRef})),oe=(0,U.kv)(K,(function(e){return null!==(q=e.fontSize)&&void 0!==q?q:14})),ae=(0,U.kv)(K,(function(e){return Boolean(e.compact)})),le=(0,U.kv)(K,(function(e){return null!==($=e.minItemHeight)&&void 0!==$?$:32})),ce=(0,w.cn)((function(e){return!e(Q)})),se=(0,U.kv)(K,(function(e){return Boolean(e.iconBreadcrumbs)})),ue=(0,w.cn)(null),de=(0,w.cn)((function(e){return e(ge)>-1})),fe=(0,w.cn)((function(e){var t=e(W);return!t.isLoading&&0===t.rows.length})),he=(0,w.cn)({label:"",input:"",menu:""});var pe=(0,w.cn)(""),me=(0,w.cn)(""),ve=(0,w.cn)(""),ge=(0,w.cn)(-1),ye=(0,w.cn)((function(e){var t=e(ge);return e(Ze).findIndex((function(e){return"item"===e.type&&e.index===t}))}));var Ze=(0,w.cn)((function(e){return e(W).rows})),be=(0,w.cn)((function(e){return e(W).items})),we=(0,w.cn)((function(e){return e(be).length})),xe=(0,w.cn)((function(e){return e(Be).filter((function(e){return"context"===e.data.type&&Boolean(e.match)}))})),Ce=(0,w.cn)((function(e){return e(xe).length>0})),ke=(0,w.cn)(!1),Se=(0,w.cn)(null,(function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(t(ke,!0),t(W,(function(e){return(0,x.ZP)(e,(function(e){e.path=[e.path[0]]}))})),e(Ve).setPath(e(Be)),t(ge,-1),t(pe,""),t(me,""),t(ve,""),e(Q)&&t(H,!1),r.focus)&&(null===(n=e(Xe))||void 0===n||n.focus())})),Ee=(0,w.cn)((function(e){return e(W).placeholder}));var Te=(0,w.cn)((function(e){return e(W).isLoading}));var Re=(0,w.cn)((function(e){return e(W).path.length}));function De(){return G(Re)}var Ie=(0,w.cn)((function(e){return e(Ce)||Boolean(e(pe))}));var _e=(0,w.cn)(null,function(){var e=(0,y.Z)((function(e,t,n,r){var i,o,a,l,c,s;function u(n){var r;t(Ue,null!==n&&void 0!==n?n:"Something went wrong"),null===(r=e(Xe))||void 0===r||r.focus()}return(0,b.__generator)(this,(function(d){switch(d.label){case 0:if("group"===n.data.type)return[2];if(t(ue,n),o=e(K),"context"===n.data.type)return l=n.path,t(Oe,l),t(ge,-1),e(Ve).setPath(l),null===(a=e(Xe))||void 0===a||a.focus(),[2];switch(n.data.type){case"output":case"error":return t(Se),null===(c=o.onSelect)||void 0===c||c.call(o,n),[2]}t(z,!0),s=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.resolve(n.data.run(r.nativeEvent))];case 2:return s=d.sent(),[3,4];case 3:return d.sent(),t(z,!1),u(),[2];case 4:return t(z,!1),"error"===(null===s||void 0===s?void 0:s.type)?(u(s.message),[2]):(t(Se),null===(i=o.onAction)||void 0===i||i.call(o),[2])}}))}));return function(t,n,r,i){return e.apply(this,arguments)}}());var Be=(0,w.cn)((function(e){return e(W).path})),Ge=(0,w.cn)((function(e){return 1===e(Be).length})),Pe=(0,w.cn)(null,(function(e,t,n){var r=e(Be),i=r.indexOf(n);-1!==i&&(r=r.slice(0,i+1),t(ge,0),e(Ve).setPath(r),t(pe,""))}));function Ae(e,t){return t.match.score-e.match.score}var Ne=(0,w.cn)(null,(function(e,t,n){var r=e(ve);if(r===e(ve)){var i,o=n.items.sort(Ae),a=n.path.length?n.path[n.path.length-1]:null,l=function(e,t){var n=new Map;e.forEach((function(e){var t=e.path.slice(0,-1),r="section:"+S(t),i=n.get(r);if(i)i.items.push(e);else{var o=t[t.length-1],a="group"===(null===o||void 0===o?void 0:o.data.type);n.set(r,{type:"section",path:t,score:e.match.score,items:[e],unlabeled:a,key:r})}}));var r=(0,k.Z)(n.entries()).sort((function(e,n){var r=(0,Z.Z)(e,2),i=r[0],o=r[1],a=(0,Z.Z)(n,2),l=a[0],c=a[1];if(!t||!t.includes(i)&&!t.includes(l))return c.score-o.score;var s=t.indexOf(i),u=t.indexOf(l);return s>-1&&u>-1?s-u:-1===s?1:-1})),i={items:[],rows:[]},o=0;return r.forEach((function(e){var t=(0,Z.Z)(e,2),n=t[0],r=t[1];i.rows.push({type:r.type,key:n,path:r.path,unlabeled:r.unlabeled}),r.items.forEach((function(e){i.items.push(e),i.rows.push({type:"item",item:e,index:o++})}))})),i}(o,r?e(W).rows.filter((function(e){return"section"===e.type})).map((function(e){return e.key})):void 0),c=l.items,s=l.rows,u=null!==(i=null===a||void 0===a?void 0:a.data)&&void 0!==i?i:null,d=null===u||void 0===u?void 0:u.description;e(se)&&"group"!==(null===u||void 0===u?void 0:u.type)&&(d=null===u||void 0===u?void 0:u.label),t(W,(function(e){return{items:c,rows:s,isLoading:Boolean(n.partial),path:n.path,placeholder:d||e.placeholder}}))}})),Ue=(0,w.cn)(null,(function(e,t,n){t(Y,n),t(W,(function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}}))})),Le=(0,w.cn)(null,(function(e,t,n){t(pe,n),t(ge,n?0:-1),t(Y,null),t(W,(function(e){return(0,x.ZP)(e,(function(e){e.isLoading=Boolean(n)}))})),e(Q)&&t(H,Boolean(n))}));var Oe=(0,w.cn)(null,(function(e,t,n){t(W,(function(e){return(0,x.ZP)(e,(function(e){e.items=[],e.rows=[],e.path=n}))})),t(Le,""),t(me,""),t(ve,"")})),Xe=(0,w.cn)(null),Me=(0,w.cn)(null,(function(e,t,n){var r=e(ge);if(!(r<0)){var i=e(be)[r];i&&t(_e,i,n)}})),Fe=(0,w.cn)(null,(function(e,t,n){var r=e(H),i=e(we),o=e(ge);switch(n.key){case"ArrowDown":n.preventDefault();var a=o+1;return t(ge,a<i?a:0),void t(H,!0);case"ArrowUp":n.preventDefault();var l=o-1;return void t(ge,Math.max(-1,l));case"Home":return n.preventDefault(),void(n.shiftKey?n.currentTarget.selectionStart=0:n.currentTarget.setSelectionRange(0,0));case"End":n.preventDefault();var c=n.currentTarget.value.length;return void(n.shiftKey?n.currentTarget.selectionEnd=c:n.currentTarget.setSelectionRange(c,c));case"Escape":if(!e(pe))return;if(n.preventDefault(),t(Le,""),t(me,""),e(ce))return;return void t(H,!1);case"Enter":if(!r)return;return n.preventDefault(),void t(Me,n);case"PageUp":case"PageDown":if(!r)return;n.preventDefault();var s="PageUp"===n.key?-10:10;return void t(ge,(function(e){return Math.max(Math.min(e+s,i-1),0)}))}}));function We(){var e=A(Xe),t=G(Ee),n=(0,Z.Z)(function(){var e=G(pe),t=A(Le),n=A(me),r=(0,h.useTransition)()[1];return[e,(0,h.useCallback)((function(e){var i="string"===typeof e?e:e.currentTarget.value;t(i),r((function(){return n(i)}))}),[t,r,n])]}(),2),r=n[0],i=n[1],o=A(ge),a=G(ge),l=G(he),c=V();return{onBlur:function(){return o(-1)},onChange:i,placeholder:t,value:r,ref:e,disabled:j(),ariaAttrs:{id:l.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":a>-1?L(a):"","aria-controls":l.menu,"aria-expanded":c,"aria-labelledby":l.label}}}var He=(0,w.cn)(null,(function(e,t,n){var r=Array.isArray(n)?n:[n];e(ke)&&(r=[r[0]]);var i=e(me);t(ve,i),e(Ve).setPath(r,i)})),Ve=(0,w.cn)({});var ze=(0,w.cn)(null,(function(e,t){var n=e(Be),r=e(xe);if(r.pop()){var i=r.pop();if(i){var o=n.indexOf(i);n=n.slice(0,o+1),t(ge,0),t(Oe,n),e(Ve).setPath(n)}else t(Se)}}));function je(){var e=V(),t=G(Ie),n=G(pe),r=G(fe),i=j(),o=G(Y),a=A(Fe),l=G(de),c=A(Se),s=P(Xe);!function(){var e=G(Ve),t=G(te),n=N(Ge),r=N(me),i=A(ve),o=A(He),a=(0,m.Z)(t);(0,h.useEffect)((function(){n.current&&o(t)}),[e,n,t,r,o]),(0,h.useEffect)((function(){return n.subscribe((function(e){e&&o(a.current)}))}),[e,r,n,o,a]),(0,h.useEffect)((function(){var t=function(t){i(t),e.search(t)};return t(r.current),r.subscribe(t)}),[e,r,n,i,a])}();var u=(0,p.Z)((function(){return function(){var e;return null===(e=s())||void 0===e?void 0:e.focus()}}),[s]),d=A(ze);return{focus:u,onKeyDown:(0,p.Z)((function(){return function(e){if("Backspace"!==e.key||e.currentTarget.value)return a(e);d()}}),[a,d]),inputValue:n,isOpen:e,isClearable:t,noResults:r,hasHighlightedItem:l,isRunning:i,actionError:o,clearCommands:c}}function qe(e){var t=(0,C.U)(),n={label:t("label"),input:t("input"),menu:t("menu")},r=(0,h.useState)((function(){var t,r=(0,w.MT)();r.set(he,n),r.set(K,e),r.set(H,!e.openOnInput),r.set(Ve,function(e){var t=e.initialPath,n=e.partialUpdateTimeout,r=e.onUpdate,i=function(e){a&&clearTimeout(a);var t=++l,i=0,c=[],s=o[o.length-1];s.commands?(void 0!==n&&(a=setTimeout((function(){c.length&&r({items:(0,k.Z)(c).sort(T),partial:!0,path:o})}),n)),function n(s,u,d){if(i++,!s.commands)throw new Error("Expected commands");var f=(0,k.Z)(u).concat([s]),h=f.length===o.length;Promise.resolve(s.commands({active:h,search:e,path:f})).then((function(s){t===l?(i--,s.forEach((function(t,r){var i=(0,k.Z)(f).concat([t]),o=(0,k.Z)(d).concat([r]),a=t.match?t.match({search:e,data:t.data,path:i,active:h}):null;a&&c.push({path:i,data:t.data,match:a,indexPath:o}),t.commands&&n(t,f,o)})),i>0||(a&&clearTimeout(a),r({items:(0,k.Z)(c).sort(T),path:o}))):a&&clearTimeout(a)}))}(s,o.slice(0,o.length-1),[])):r({items:c,path:o})},o=t,a=null,l=0;return{search:i,setPath:function(e){o=e,i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")},getPath:function(){return o}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:30,onUpdate:function(e){return r.set(Ne,e)}}));var i,o=Array.isArray(e.command)?e.command[0]:e.command,a=null!==(i=null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.description)&&void 0!==i?i:null;return a&&r.set(W,(function(e){return(0,x.ZP)(e,(function(e){e.placeholder=a}))})),r})),i=r[0];return(0,h.useEffect)((function(){i.set(K,e)}),[i,e]),i}var $e=n(77205),Ye=n(81382),Ke=(0,c.X)({root:[u.l0.reset.button,u.l0.viewStyle,u.l0.flex.row,u.l0.align.center,u.l0.borderRadius(0),u.l0.cursor.pointer,u.l0.color.foregroundDimmer,{gap:(0,Ye.fP)(4),paddingLeft:(0,Ye.fP)(4),paddingRight:(0,Ye.fP)(4),"&:hover":{color:u.TV.foregroundDefault}}],icon:[u.l0.position.relative,(0,Ye.D$)(16),{width:(0,Ye.fP)(16),height:(0,Ye.fP)(16)}],iconRight:[(0,Ye.D$)(12),{width:(0,Ye.fP)(12),height:(0,Ye.fP)(12)}],text:[u.l0.truncate,u.l0.flex.shrink(1),{fontSize:"1em"}]}),Qe=(0,h.memo)((function(){var e={iconOnly:G(se),breadcrumbs:G(xe),onClick:A(Pe)},t=e.breadcrumbs,n=e.iconOnly,r=e.onClick;return t.length?(0,o.tZ)(o.HY,{children:t.map((function(e,t){if(!e.data)return null;if(!("label"in e.data))return null;var i=e.data,a=i.label,l=i.icon,c=a+t;return(0,o.BX)("button",{css:Ke.root,onClick:function(){return r(e)},children:[(0,o.tZ)(f.G,{css:Ke.icon,children:l}),n?null:(0,o.tZ)(f.G,{css:Ke.text,children:a}),(0,o.tZ)(f.G,{css:Ke.iconRight,children:(0,o.tZ)($e.Z,{})})]},c)}))}):null})),Je=n(43312),et=n(68912),tt=(0,Je.iv)([u.l0.reset.button,u.l0.viewStyle,u.l0.center,u.l0.height("100%"),u.l0.cursor.pointer,u.l0.color.foregroundDimmest,{paddingLeft:(0,Ye.fP)(4),paddingRight:(0,Ye.fP)(4),"&:hover":{color:u.TV.foregroundDefault}},(0,Ye.D$)(16)]);function nt(e){return(0,o.tZ)("button",{css:tt,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,o.tZ)(v.Z,{}):(0,o.tZ)(et.Z,{})})}var rt=n(4405),it=n(86033),ot=n(37268),at=n(6190),lt=function(e){return Math.round(e.value/14*e.fontSize)};var ct=[u.l0.position.absolute,u.l0.top(0),u.l0.left(0),u.l0.width("100%")],st=(0,c.X)({item:[ct,{userSelect:"none",cursor:"pointer","&:hover > div":{backgroundColor:"var(".concat(g.dj.interactiveBackground,")")}}],divider:[ct,u.l0.justify.center,{padding:"0 ".concat((0,Ye.fP)(8))}]}),ut=(0,h.memo)((function(e){var t=function(e){var t=A(_e),n=(0,h.useRef)(null),r=G((0,h.useMemo)((function(){return(0,U.kv)(Ze,(function(t){return t[e]}))}),[e])),i="item"===r.type?r.index:null,o=G((0,h.useMemo)((function(){return(0,w.cn)((function(e){return null!==i&&e(ge)===i}))}),[i])),a="item"===(null===r||void 0===r?void 0:r.type)?function(e){return t(r.item,e)}:void 0,l="item"===r.type?{id:L(e),role:"option","aria-selected":o}:void 0;return{row:r,active:o,ref:n,onClick:a,ariaAttrs:l}}(e.index),n=t.row,r=t.active,a=t.onClick,l=t.ariaAttrs,c=t.ref;if(!n)return null;var s={height:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===n.type)return(0,o.tZ)(vt,{path:n.path,style:s,border:e.index>0});var u=n.item,d=u.data,p=u.match;if("group"===d.type)return null;var m=p.render;if(m&&"content"in m&&m.content)return(0,o.tZ)(f.G,(0,rt.Z)((0,i.Z)({innerRef:c,css:st.item,style:s,onClick:a},l),{children:(0,o.tZ)(ot.Tg,{elevated:r,children:(0,h.cloneElement)(m.content,{active:r})})}));var v=d.label,g=d.icon,y=d.dataCy,Z=m&&"ranges"in m?m.ranges:void 0;return(0,o.tZ)(f.G,(0,rt.Z)((0,i.Z)({innerRef:c,css:st.item,style:s,onClick:a,dataCy:y},l),{children:(0,o.tZ)(ht,{active:r,icon:g,text:v,highlight:Z,description:d.description,shortcut:d.keyboardShortcut,hasChildren:"context"===u.data.type})}))})),dt=[{padding:(0,Ye.fP)(8)}],ft=(0,c.X)({root:[dt,u.l0.align.center,u.l0.flex.row,u.l0.height("100%"),{gap:(0,Ye.fP)(8),userSelect:"none"}],iconText:[u.l0.align.center,u.l0.flex.row,u.l0.maxWidth("100%"),{gap:(0,Ye.fP)(8)}],description:[u.l0.truncate,u.l0.flex.growAndShrink(1),{fontSize:"0.9em"}],right:[u.l0.flex.row,u.l0.align.center,{gap:(0,Ye.fP)(4),justifySelf:"end",marginLeft:"auto"}],shortcut:[{"& > div > div":{fontSize:"0.8em",paddingLeft:(0,Ye.fP)(4),paddingRight:(0,Ye.fP)(4),paddingTop:(0,Ye.fP)(2),paddingBottom:(0,Ye.fP)(2)}}],chevron:(0,Ye.D$)(12)});function ht(e){return(0,o.BX)(ot.Tg,{elevated:e.active,css:ft.root,children:[(0,o.BX)(f.G,{css:ft.iconText,children:[(0,o.tZ)(f.G,{className:"icon",css:pt.root,children:e.icon}),(0,o.tZ)(at.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,o.tZ)(f.G,{css:ft.description,style:{color:e.active?u.TV.foregroundDimmer:u.TV.foregroundDimmest},children:e.description}):null,(0,o.BX)(f.G,{css:ft.right,children:[e.shortcut?(0,o.tZ)(f.G,{css:ft.shortcut,children:(0,o.tZ)(a.bM,{keyCombo:e.shortcut,small:!0})}):null,e.hasChildren?(0,o.tZ)(f.G,{css:ft.chevron,children:(0,o.tZ)($e.Z,{size:12})}):null]})]})}var pt=(0,c.X)({root:[u.l0.position.relative,(0,Ye.D$)(16),{width:(0,Ye.fP)(16),height:(0,Ye.fP)(16)}]}),mt=(0,c.X)({borderHeaderWrap:[{userSelect:"none",padding:[8,8,4,8].map(Ye.fP).join(" ")},ct,u.l0.colWithGap(0),u.l0.justify.spaceBetween],borderWrap:[{userSelect:"none",paddingLeft:(0,Ye.fP)(8),paddingRight:(0,Ye.fP)(8)},ct,u.l0.justify.center],headerWrap:[{userSelect:"none",paddingLeft:(0,Ye.fP)(8),paddingRight:(0,Ye.fP)(8),paddingBottom:(0,Ye.fP)(4)},ct,u.l0.justify.end],header:[{userSelect:"none"},u.l0.align.center,u.l0.flex.row,{gap:(0,Ye.fP)(4)},(0,Ye.D$)(12)],text:[{userSelect:"none"},u.l0.flex.shrink(1),u.l0.color.foregroundDimmest,u.l0.truncate,{fontSize:"0.9em"}],border:[u.l0.height(1),u.l0.width("100%")]}),vt=(0,h.memo)((function(e){var t=De(),n=E(e.path,t),r=(0,o.tZ)(ot.Tg,{elevated:!0,css:mt.border}),i=0===n.length;if(e.border&&i)return(0,o.tZ)(f.G,{css:mt.borderWrap,style:e.style,children:r});var a=(0,o.tZ)(f.G,{css:mt.header,children:n.map((function(e,t){return(0,o.BX)(h.Fragment,{children:[t>0?(0,o.tZ)($e.Z,{color:u.TV.foregroundDimmest}):null,(0,o.tZ)(f.G,{css:mt.text,children:e})]},e+t)}))});return e.border||i?(0,o.BX)(f.G,{css:mt.borderHeaderWrap,style:e.style,children:[r,a]}):(0,o.tZ)(f.G,{css:mt.headerWrap,style:e.style,children:a})})),gt=(0,c.X)({root:[u.l0.flex.growAndShrink(1),u.l0.overflow("hidden"),{paddingTop:Ye.Cn.menuPaddingTop}],scrollParent:[u.l0.height("100%"),u.l0.overflowY("auto"),u.l0.flex.growAndShrink(1)]}),yt=(0,h.memo)((function(e){var t,n=function(){var e=G(Ze),t=V(),n=(0,h.useRef)(null),r=De(),i=G(he);return{rows:e,isOpen:t,scrollRef:n,currentPathIndex:r,ariaAttrs:{id:i.menu,"aria-labelledby":i.label,role:"listbox"}}}(),r=n.rows,a=n.isOpen,l=n.scrollRef,c=n.currentPathIndex,s=n.ariaAttrs,d=A(X),p=G(oe),m=(0,it.MG)({count:r.length,overscan:null!==(t=e.overscan)&&void 0!==t?t:1,getScrollElement:function(){return l.current},getItemKey:function(e){var t=r[e];return t?"section"===t.type?t.key:S(t.item.path):""},estimateSize:function(t){var n=r[t];return n?function(e){var t=e.row,n=e.currentPathIndex,r=e.isFirst,i=e.fontSize,o=e.minItemHeight;if("section"===t.type){var a=E(t.path,n).length?24:0;return r?0===a?a:lt({fontSize:i,value:a}):a+lt({fontSize:i,value:16})}var l,c=t.item.match.render;return c&&"content"in c?Math.max(lt({fontSize:i,value:null!==(l=c.height)&&void 0!==l?l:32}),o):Math.max(lt({fontSize:i,value:32}),o)}({fontSize:p,row:n,currentPathIndex:c,isFirst:0===t,minItemHeight:e.minItemHeight}):0},onChange:function(e){d(e.getTotalSize())}}),v={borderRadius:e.hasFooter?void 0:u.TV.space8,display:a?void 0:"none"},g=m.scrollToIndex,y=G(ye);return(0,h.useEffect)((function(){var e=y;e<0||(1===e&&(e=0),g(e,{behavior:"smooth"}))}),[g,y]),(0,o.tZ)(f.G,(0,rt.Z)((0,i.Z)({css:gt.root},s),{style:v,children:(0,o.tZ)(f.G,{innerRef:l,css:gt.scrollParent,children:(0,o.tZ)(f.G,{style:{height:"".concat(m.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:a?m.getVirtualItems().map((function(e){return(0,o.tZ)(ut,{index:e.index,height:e.size,y:e.start},e.key)})):null})})}))})),Zt=(0,c.X)({root:[u.l0.flex.shrink(1),u.l0.height("100%"),{fontSize:Ye.Cn.fontSize}],footer:{paddingTop:(0,Ye.fP)(8)},keyComboBlocks:{paddingRight:(0,Ye.fP)(8)},menuWrap:[u.l0.flex.shrink(1)],row:[u.l0.position.absolute,u.l0.top(0),u.l0.left(0),u.l0.width("100%")],menu:[u.l0.flex.shrink(1),u.l0.overflow("auto")],running:[u.l0.center,u.l0.flex.growAndShrink(1)],error:{padding:(0,Ye.fP)(8)}}),bt=(0,c.X)({root:[u.l0.viewStyle,u.l0.flex.growAndShrink(1),u.l0.height("100%"),{fontSize:"1em",padding:"0 ".concat((0,Ye.fP)(8)),backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:u.TV.foregroundDimmest},"&:hover::placeholder":{color:u.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:u.TV.foregroundDimmest}}]}),wt=(0,h.memo)((function(e){var t=We();return(0,o.tZ)("input",(0,i.Z)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:bt.root,placeholder:t.placeholder,value:t.value,onChange:t.onChange,ref:t.ref,onBlur:t.onBlur,disabled:t.disabled,autoComplete:"off"},t.ariaAttrs))})),xt=[g.gU.filled,u.l0.viewStyle,u.l0.flex.row,u.l0.align.center,u.l0.flex.growAndShrink(1),{height:(0,Ye.fP)(32),borderRadius:(0,Ye.fP)(4)}],Ct=(0,c.X)({container:[{padding:(0,Ye.fP)(8),"& > div > button + input":{paddingLeft:0}},u.l0.pb(0)],surface:xt,surfaceRunning:[xt,s.p.foregroundPulse()]}),kt=[g.gU.nofill,u.l0.flex.row,u.l0.align.center,u.l0.flex.growAndShrink(1),{height:(0,Ye.fP)(36),borderRadius:(0,Ye.fP)(4),borderBottomLeftRadius:0,borderBottomRightRadius:0}],St=(0,c.X)({container:[{"& > div > button + input":{paddingLeft:0}},u.l0.pb(0)],surface:kt,surfaceRunning:[kt,s.p.foregroundPulse()],border:[u.l0.height(1)]});function Et(e){var t=j(),n=A(O),r=(0,l.Z)((function(e){var t=e.height;return n(t)})),i=G(ae),a=i?St:Ct;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(f.G,{css:a.container,innerRef:r,children:(0,o.tZ)(f.G,{css:t?a.surfaceRunning:a.surface,children:e.children})}),i?(0,o.tZ)(ot.Tg,{elevated:!0,css:St.border}):null]})}var Tt=(0,h.memo)((function(e){var t=G(Ie),n=G(Te);return t?(0,o.tZ)(nt,{onClick:e.onClick,isLoading:n}):null}));var Rt=(0,h.memo)((function(){var e=je(),t=e.isOpen,n=e.focus,i=e.clearCommands,c=e.isClearable,s=e.onKeyDown,g=e.inputValue,y=e.noResults,Z=e.hasHighlightedItem,b=e.isRunning,w=e.actionError,x=(0,m.Z)({inputValue:g,noResults:y,hasHighlightedItem:Z});!function(){var e=P(K),t=G(O),n=N(F);(0,h.useEffect)((function(){var r=function(t){var n=e().onTotalHeightChange;n&&(0===i&&(i=t),n({initial:i,current:t}))};if(0!==t){var i=0;return r(n.current),n.subscribe(r)}}),[t,e,n])}();var C=G(J),k=G(ee),S=G(ne),E=G(re),T=G(ie),R=G(le),D=P(K),I=(0,p.Z)((function(){return function(e){var t,n=x.current,r=D();null===(t=r.onKeyDown)||void 0===t||t.call(r,e,{inputValue:n.inputValue,noResults:n.noResults,hasHighlightedItem:n.hasHighlightedItem}),e.defaultPrevented||("Enter"===e.key&&n.inputValue&&n.noResults&&r.onSubmit?r.onSubmit(n.inputValue):s(e))}}),[x,s,D]);(0,h.useEffect)((function(){T&&(T.current=n)}),[n,T]);var _,B=G(he),U=A(M),L=(0,l.Z)((function(e){var t=e.height;return U(t)})),X=G(oe),W=G(ae);return(0,o.BX)(f.G,{css:Zt.root,style:(_={},(0,r.Z)(_,Ye.Dq.fontSize,X+"px"),(0,r.Z)(_,Ye.Dq.menuPaddingTop,W?"0px":(0,Ye.fP)(8)),_),children:[(0,o.tZ)("label",{id:B.label,htmlFor:B.input,css:u.l0.visuallyHidden,children:"Commands"}),(0,o.BX)(Et,{children:[(0,o.tZ)(Qe,{}),(0,o.tZ)(wt,{autoFocus:C,onKeyDown:I}),(0,o.tZ)(Tt,{onClick:function(){return i({focus:!0})}}),k&&!c?(0,o.tZ)(f.G,{css:Zt.keyComboBlocks,children:(0,o.tZ)(a.bM,{keyCombo:k,small:!0})}):null]}),w?(0,o.tZ)(f.G,{css:Zt.error,children:(0,o.tZ)(d.E,{colorway:"warning",text:w})}):null,t&&!b?(0,o.BX)(o.HY,{children:[(0,o.tZ)(yt,{minItemHeight:R,overscan:S,hasFooter:Boolean(E)}),E?(0,o.tZ)(f.G,{innerRef:L,css:Zt.footer,children:E}):null]}):null,b?(0,o.tZ)(f.G,{css:Zt.running,children:(0,o.tZ)(v.Z,{size:24})}):null]})}));function Dt(e){var t=qe(e);return(0,o.tZ)(_.Provider,{value:t,children:(0,o.tZ)(Rt,{})})}},81382:function(e,t,n){n.d(t,{Cn:function(){return o},D$:function(){return c},Dq:function(){return i},fP:function(){return l}});var r=(0,n(86093).$)(["fontSize","menuPaddingTop"]),i=r.cssVars,o=r.styleTokens,a=function(e){return Math.round(100*e)/100},l=function(e){return a(e/14)+"em"},c=function(e){var t=a(e/14)+"em";return{"&& svg":{minWidth:t,minHeight:t,width:t,height:t}}}},45636:function(e,t,n){n.d(t,{j:function(){return m},m:function(){return p}});var r=n(72006),i=n(4405),o=n(77637),a=n(2272),l=n(74985),c=n(50959),s=n(95141),u=n(88794),d=n(61623),f=n(16296),h=n(34204);function p(e){var t=e.textToCopy,n=e.tooltip,f=e.timeout,p=void 0===f?4e3:f,m=(0,o.Z)(e,["textToCopy","tooltip","timeout"]),v=(0,a.Z)(c.useState(!1),2),g=v[0],y=v[1],Z=c.useRef(null);return c.useEffect((function(){return function(){Z.current&&clearTimeout(Z.current)}}),[]),(0,l.tZ)(d.u,{isOpen:g,tooltip:null!==n&&void 0!==n?n:"".concat(t," copied to clipboard"),placement:"bottom-end",children:function(e,n){return(0,l.tZ)(s.zx,(0,i.Z)((0,r.Z)({},(0,h.dG)(m,e)),{ref:n,onClick:function(e){(0,u.Z)(t),y(!0),Z.current&&clearTimeout(Z.current),Z.current=setTimeout((function(){return y(!1)}),p),m.onClick&&m.onClick(e)}}))}})}function m(e){var t=e.textToCopy,n=e.tooltip,s=e.timeout,p=void 0===s?4e3:s,m=e.children,v=(0,o.Z)(e,["textToCopy","tooltip","timeout","children"]),g=(0,a.Z)(c.useState(!1),2),y=g[0],Z=g[1],b=c.useRef(null);return c.useEffect((function(){return function(){b.current&&clearTimeout(b.current)}}),[]),(0,l.tZ)(d.u,{isOpen:y,tooltip:null!==n&&void 0!==n?n:"".concat(t," copied to clipboard"),placement:"bottom-end",children:function(e,n){return(0,l.tZ)(f.hU,(0,i.Z)((0,r.Z)({},(0,h.dG)(e,v)),{innerRef:n,onClick:function(e){(0,u.Z)(t),Z(!0),b.current&&clearTimeout(b.current),b.current=setTimeout((function(){return Z(!1)}),p),v.onClick&&v.onClick(e)},children:m}))}})}},30251:function(e,t,n){n.d(t,{E:function(){return h}});var r=n(74985),i=n(9434),o=n(95141),a=n(53312),l=n(21651),c=n(88965),s=n(26473),u=n(28435),d=n(44385),f=n(50959);function h(){var e=(0,u.Z)().replspaceApi,t=(0,f.useState)(null),n=t[0],h=t[1];return(0,f.useEffect)((function(){return e.onConfirmSendToken((function(e){e&&(0,i.j)(i.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),h((function(){return e}))}))}),[e]),(0,r.tZ)(l.u,{isOpen:"function"===typeof n,onRequestClose:function(){null===n||void 0===n||n(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),h(null)},children:(0,r.BX)(s.G,{css:[c.l0.colWithGap(16)],children:[(0,r.tZ)(a.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,r.tZ)(a.xv,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,r.tZ)(a.xv,{children:"If you did not initiate a git command, you should deny this."}),(0,r.BX)(s.G,{css:[c.l0.justify.end,c.l0.rowWithGap(16)],children:[(0,r.tZ)(o.zx,{onClick:function(){null===n||void 0===n||n(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),h(null)},text:"Deny"}),(0,r.tZ)(o.zx,{onClick:function(){null===n||void 0===n||n(!0),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),h(null)},iconLeft:(0,r.tZ)(d.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},10321:function(e,t,n){n.d(t,{$:function(){return l},i:function(){return a}});var r=n(51631),i=n(70232),o=n(14351);function a(e,t){if(void 0!==t)switch(t){case r.DZ.HostingTierE2Micro:return e.hostingTierE2Micro;case r.DZ.HostingTierE2Small:return e.hostingTierE2Small;case r.DZ.HostingTierE2Medium:return e.hostingTierE2Medium;case r.DZ.HostingTierN1Custom_1_4:return e.hostingTierN1Custom1_4;case r.DZ.HostingTierE2Standard_2:return e.hostingTierE2Standard2;case r.DZ.HostingTierE2Standard_4:return e.hostingTierE2Standard4;default:(0,i.Z)(t)}}function l(e){var t=o.r4[e],n=t.vCpu,r=t.ram,i=t.dedicated;return"".concat(i?"Dedicated ":"").concat(n," vCPU / ").concat(r," GiB RAM")}},71818:function(e,t,n){n.d(t,{e:function(){return p}});var r=n(74985),i=n(75277),o=n(89855),a=n(51631),l=n(61025),c=n(88965),s=n(16572),u=n(61623),d=n(26473),f=n(53312),h=(0,l.X)({root:[c.l0.py(4),c.l0.rowWithGap(4),c.l0.align.center]});function p(e){var t=e.deployment,n=e.small,l=t.currentBuild,c=o.VR[l.status],p=c.title,m=c.color,v=(0,s.Z)(new Date(l.timeCreated),Date.now(),{addSuffix:!0}),g="Deployed ".concat(v," by ").concat(l.user.displayName),y=l.status===a.Fe.Success?"Deployed":p;return(0,r.tZ)(u.u,{tooltip:g,children:(0,r.BX)(d.G,{css:h.root,children:[(0,r.tZ)(i.Z,{size:n?12:16,color:m}),(0,r.tZ)(f.xv,{variant:n?"small":void 0,color:"dimmest",multiline:!1,children:y})]})})}},29095:function(e,t,n){n.d(t,{$:function(){return c}});var r=n(74985),i=n(50959),o=n(90234),a=n(78572);var l=n(37487);function c(e){var t=(0,i.useState)((function(){return function(e){var t=e.container,n=e.fs,r=e.dotReplit,i=(0,o.MT)();return i.set(a.CK,t),i.set(a.bA,n),i.set(a.My,r),i}({fs:e.fs,container:e.container,dotReplit:e.dotReplit})})),n=t[0];return(0,r.BX)(l.aT.Provider,{value:n,children:[e.children,(0,r.tZ)(a.jd,{replId:e.replId})]})}},31445:function(e,t,n){n.d(t,{Gs:function(){return d},Qw:function(){return u},un:function(){return f}});var r=n(72006),i=n(74985),o=n(43312),a=n(26473),l=n(61025),c=n(50959),s=n(36855),u=(0,l.X)({maxWidth:{width:"100%",maxWidth:600,marginLeft:"auto",marginRight:"auto"}}),d=function(e,t){return(0,o.F4)("\n  0% {\n    opacity: 0;\n    height: ".concat((null===t||void 0===t?void 0:t.from)?t.from:0,"px;\n  }\n  99% {\n    opacity: 1;\n    height: ").concat(e,"px;\n  }\n  ").concat((null===t||void 0===t?void 0:t.noAuto)?"100% {\n        opacity: 1;\n        height: ".concat(e,"px;\n      }"):"100% {\n    height: auto;\n  }","\n"))};function f(e){var t=e.children,n=e.render,o=e.timeout,l=void 0===o?300:o,u=e.initialHeight,d=(0,c.useRef)(null),f=(0,c.useRef)(null),h=function(e){var t=(0,c.useState)(0),n=t[0],r=t[1];return(0,c.useEffect)((function(){if(e.current){var t=new ResizeObserver((function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value.borderBoxSize[0].blockSize;r(l)}}catch(c){n=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}));return t.observe(e.current),function(){return t.disconnect()}}}),[n,e]),n}(f),p=h>0?h:u,m={transition:l+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},v={entering:{opacity:1,height:p},entered:{transitionProperty:"opacity",opacity:1,height:p,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,i.tZ)(s.ZP,{nodeRef:d,timeout:l,in:n,children:function(e){return(0,i.tZ)(a.G,{innerRef:d,style:(0,r.Z)({},m,v[e]),children:(0,i.tZ)(a.G,{innerRef:f,children:t})})}})}},13090:function(e,t,n){var r,i;n.d(t,{a:function(){return i},k:function(){return r}}),function(e){e.Intro="intro",e.Deployment="deployment",e.DeploymentInProgress="deployment_in_progress",e.Analytics="analytics",e.Logs="logs",e.Settings="settings",e.ReservedVMTierSelection="reserved_vm_tier_selection",e.AutoscaleMachineConfiguration="autoscale_machine_configuration"}(r||(r={})),function(e){e.SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",e.ChangeView="change_view"}(i||(i={}))},92604:function(e,t,n){n.d(t,{E:function(){return r},c:function(){return i}});var r="Procfile";function i(e){var t={};return e.split("\n").forEach((function(e){if(""!==e){var n=e.match(/^([A-Za-z0-9_]+):\s*(.+)$/);if(n){var r=n[2].trim().split(" "),i=n[1];t[i]={command:r[0],options:r.slice(1)}}}})),t}},20380:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(50959);function i(){return(0,r.useMemo)((function(){return function(){if("undefined"===typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()}),[])}},6210:function(e,t,n){var r=n(50959);t.Z=function(e,t,n){r.useEffect((function(){var t=setTimeout(e,n);return function(){clearTimeout(t)}}),t)}},80027:function(e,t,n){n.d(t,{f6:function(){return c},oj:function(){return l},xZ:function(){return u}});var r=n(2272),i=n(50959),o=n(28435);function a(e){var t=(0,r.Z)(i.useState(!1),2),n=t[0],a=t[1],l=(0,o.Z)().dotReplit;return i.useEffect((function(){var t=!1;return l.getConfig().then((function(n){t||n.error||n.config.language===e&&a(!0)})),function(){t=!0}}),[e,l]),n}function l(){return a("kaboom")}function c(){return a("kaboomdraw")}var s=/^draw.[tj]s$/;function u(e){return c()&&Boolean(null===e||void 0===e?void 0:e.match(s))}},49055:function(e,t,n){function r(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function i(){return!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}n.d(t,{Z:function(){return r},y:function(){return i}})},91050:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(90171),i=n.n(r),o=n(28435),a=n(50959),l=n(4561),c=n(68625),s=n(12901),u="You have unsaved changes";function d(){var e=(0,s.Z)(),t=(0,o.Z)().fs,n=(0,r.useRouter)(),d=(0,a.useRef)(!1),f=(0,a.useCallback)((function(){if(!e&&(!d.current&&t.getStatus()!==l.kO.Clean&&!window.confirm(u)))throw i().events.emit("routeChangeError"),new Error("Abort route change. Please ignore this error.")}),[t,e]);return(0,a.useEffect)((function(){var r=function(n){if(!e&&!d.current&&t.getStatus()!==l.kO.Clean)return n.preventDefault(),n.returnValue=u,u};return window.addEventListener("beforeunload",r),c.gn||n.events.on("routeChangeStart",f),function(){window.removeEventListener("beforeunload",r),c.gn||n.events.off("routeChangeStart",f)}}),[n.events,t,f,e]),function(e){return d.current=e}}},12798:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(2272),i=n(50959),o=n(72006),a=n(43119),l=n(71440),c=n(50216);function s(){var e=(0,a.Z)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());var f=n(12290),h=n(67043),p=n(28435);function m(){var e=(0,r.Z)(function(e){var t=(0,o.Z)({},u,e);return c.D(d,t)}(),1)[0],t=(0,p.Z)().fs,n=(0,h.Z)(),a=null===n||void 0===n?void 0:n.currentUserPermissions.containerWrite,l=null===n||void 0===n?void 0:n.id;(0,i.useEffect)((function(){if(a&&l){var n=(0,f.Z)((function(){return e({variables:{replId:l}})}),{wait:6e4,maxWait:6e5}),r=t.onStatusChange((function(){n()}));return function(){n.isScheduled()&&n.flush(),r()}}}),[t,l,a,e])}},70505:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(28435),i=n(61600);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},70399:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(50959),i=n(46130);function o(){var e=(0,r.useRef)(0),t=(0,r.useState)(!1),n=t[0],o=t[1],a=(0,i.T3)(),l=window.visualViewport;return(0,r.useEffect)((function(){if(l&&a){var t=function(){var t=l.height<.8*e.current;o(t)};return e.current=l.height,l.addEventListener("resize",t),function(){l.removeEventListener("resize",t)}}}),[l,a]),n}},91842:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(72006),i=n(4405),o=n(7131),a=n(31146),l=n(28435),c=n(50959);function s(){var e=function(){var e=(0,l.Z)().container,t=(0,c.useState)(null),n=t[0],r=t[1];return(0,c.useEffect)((function(){if(e)return e.onConnectionStateChanged((function(){var t=e.getConnectionMetadata();r(t)}))}),[e]),n}();return(0,c.useMemo)((function(){return e?(0,a.he)(e.token):null}),[e])}var u=n(91926);function d(e,t){var n=s();(0,c.useEffect)((function(){var a,l,c;if(e&&t){var s="Repl"===(null===(a=e.origin)||void 0===a?void 0:a.__typename)?e.origin.id:null,d=(0,u.cR)(e.rootOriginReplUrl);return(0,o.Fy)((0,i.Z)((0,r.Z)({id:e.id,slug:e.slug,originId:s,roles:t.roles&&t.roles.map((function(e){return e.name})),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(l=e.source)||void 0===l||null===(c=l.release)||void 0===c?void 0:c.id},0!==d.length&&{languages:d}),{tokenCluster:null===n||void 0===n?void 0:n.cluster})),function(){(0,o.dv)()}}}),[e,t,n])}},59672:function(e,t,n){n.d(t,{C:function(){return i},w:function(){return r}});var r=function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]},i=function(e,t,n){return"#"+e.toString(16)+t.toString(16)+n.toString(16)}},75850:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(57135),i=n(96583),o=n(87978),a=/\(copy\)( \d+)?$/,l=/\d+$/;function c(e,t){for(var n=(0,o.r6)(e),r=(0,o.eb)(e),i=a.test(r)?e:"".concat(r," (copy)").concat(n.length>0?".".concat(n):""),c=1;c<=t.size;c++){if(!t.has(i))return i;var s=(0,o.eb)(i),u=s.split(" ");l.test(s)&&u.pop(),i="".concat(u.join(" ")," ").concat(c),n.length>0&&(i+=".".concat(n))}return i}var s=n(12583);function u(e,t){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((function(e,t){var n,r,a,l,u,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=(0,o.Il)(e),[4,t.readDir(0===n.length?s.Ql:n)];case 1:if((r=i.sent()).error)throw r.error;return a=new Set(r.children.map((function(e){return e.filename}))),l=c((0,o.UO)(e),a),u=n?"".concat(n,"/").concat(l):l,[4,t.copyFile(e,u)];case 2:if((d=i.sent()).error)throw d.error;return[2,u]}}))}))).apply(this,arguments)}},92650:function(e,t,n){n.d(t,{S:function(){return a}});var r=n(87978),i={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",go:"go"},o={rs:"rust",lsp:"lisp",sh:"bash",cpp:"c++",hs:"haskell",go:"go",rb:"ruby",md:"markdown"};function a(e){var t=(0,r.r6)(e);return Object.prototype.hasOwnProperty.call(i,t)?i[t]:Object.prototype.hasOwnProperty.call(o,t)?o[t]:t}},21070:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(2272),i=n(74985),o=(n(50959),n(26473)),a=n(88965),l=n(37268),c=n(20685),s=n(53312),u=n(46550),d=n(61025),f=n(65790),h=n(25404),p=n(72006),m=n(43119),v=n(71440),g=n(24635),y=n(50216);function Z(){var e=(0,m.Z)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}function b(){var e=(0,m.Z)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,m.Z)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return w=function(){return e},e}var x={},C=(0,v.Ps)(Z());var k=(0,v.Ps)(b());var S=(0,v.Ps)(w());var E=n(40176),T=n(45636),R=n(73823),D=n(27773),I=n(79824),_=n(88794),B=n(9434),G=(0,d.X)({container:[a.l0.colWithGap(12),a.l0.px(16),a.l0.pt(12),{borderTop:"solid 1px ".concat(a.TV.outlineDimmest)}],header:[a.l0.flex.row,a.l0.justify.spaceBetween],globeIconContainer:[a.l0.width(40),a.l0.height(40),a.l0.backgroundColor.accentPrimaryDimmer,a.l0.borderRadius("full"),a.l0.align.center,a.l0.justify.center],title:[a.l0.fontWeight.medium],loading:[a.l0.rowWithGap(4),a.l0.align.center],inviteUrlContainer:[a.l0.borderRadius(8),a.l0.flex.row],input:[a.l0.borderRadius(8,0,0,8),a.l0.color.foregroundDimmer],copyToClipboard:[a.l0.borderRadius(0,8,8,0)],titleGroup:[a.l0.rowWithGap(12)]}),P=function(){return(0,i.BX)(o.G,{css:G.titleGroup,children:[(0,i.tZ)(o.G,{css:G.globeIconContainer,children:(0,i.tZ)(E.Z,{color:a.TV.accentPrimaryStrongest,size:20})}),(0,i.BX)(o.G,{children:[(0,i.tZ)(s.xv,{css:G.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.tZ)(s.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function A(e){var t,n,d,m,v,Z,b,w,E=e.replId,A=(0,h.Z)(),N=A.showConfirm,U=A.showError,L=function(e){var t=(0,p.Z)({},x,e);return g.a(C,t)}({variables:{replId:E}}),O=L.data,X=L.loading,M=L.error,F=L.refetch,W=(0,r.Z)(function(e){var t=(0,p.Z)({},x,e);return y.D(k,t)}({variables:{replId:E},onError:function(e){return U(e.message)},onCompleted:function(){return N("Join link created")}}),2),H=W[0],V=W[1],z=(0,r.Z)(function(e){var t=(0,p.Z)({},x,e);return y.D(S,t)}({variables:{replId:E},optimisticResponse:{deleteMultiplayerInviteLink:{id:E,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return U(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&N("Join link deleted"):U(e.deleteMultiplayerInviteLink.message)}}),2),j=z[0],q=z[1],$="Repl"===(null===O||void 0===O||null===(t=O.repl)||void 0===t?void 0:t.__typename)?O.repl:null,Y=V.loading||q.loading,K="Repl"===(null===O||void 0===O||null===(n=O.repl)||void 0===n?void 0:n.__typename)&&"Team"===(null===$||void 0===$||null===(d=$.owner)||void 0===d?void 0:d.__typename),Q="Repl"===(null===O||void 0===O||null===(m=O.repl)||void 0===m?void 0:m.__typename)&&"Team"===(null===$||void 0===$||null===(v=$.owner)||void 0===v?void 0:v.__typename)&&(null===(Z=null===$||void 0===$?void 0:$.owner.capabilities)||void 0===Z?void 0:Z.isBusinessPlan)&&(null===(b=null===$||void 0===$?void 0:$.owner.capabilities)||void 0===b?void 0:b.hasValidSubscription),J="Repl"===(null===O||void 0===O||null===(w=O.repl)||void 0===w?void 0:w.__typename)&&(null===$||void 0===$?void 0:$.inviteUrl)?window.location.origin+(null===$||void 0===$?void 0:$.inviteUrl):null;return X||K&&!Q?null:M?(0,i.BX)(o.G,{css:G.container,children:[(0,i.BX)(o.G,{css:G.header,children:[(0,i.tZ)(P,{}),(0,i.tZ)(u.r,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(f.u,{css:[a.l0.textAlign.left],icon:(0,i.tZ)(I.Z,{color:a.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return F({replId:E})}})]}):(0,i.BX)(o.G,{css:G.container,children:[(0,i.BX)(o.G,{css:G.header,children:[(0,i.tZ)(P,{}),X?(0,i.BX)(o.G,{css:G.loading,children:[(0,i.tZ)(D.Z,{color:a.TV.foregroundDimmer}),(0,i.tZ)(s.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.tZ)(u.r,{isSelected:!!J,isDisabled:Y,onChange:function(e){Y||(e?H():j())},"aria-labelledby":"link-switch-label"})]}),!X&&J?(0,i.BX)(i.HY,{children:[(0,i.BX)(l.Tg,{css:G.inviteUrlContainer,children:[(0,i.tZ)(c.II,{type:"url",readOnly:!0,disabled:!0,value:Y?"Loading...":J,css:G.input}),(0,i.tZ)(T.m,{textToCopy:J,onClick:function(){J?((0,_.Z)(J),(0,B.j)(B.U3.JOIN_LINK_COPIED,{replId:null===$||void 0===$?void 0:$.id,isTeamRepl:K,source:"replEnvironment"}),N("Link copied")):U("Could not copy link")},tooltip:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(R.Z,{}),css:G.copyToClipboard,colorway:"primary",disabled:Y})]}),(0,i.tZ)(o.G,{children:(0,i.BX)(s.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:a.l0.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){if("Enter"===e.key){if(e.preventDefault(),Y)return;H()}},onClick:function(e){e.preventDefault(),Y||H()},children:"Generate a new link"})]})})]}):null]})}},91547:function(e,t,n){n.d(t,{Jh:function(){return C},RJ:function(){return T},U:function(){return w},dE:function(){return g},mH:function(){return Z},z8:function(){return S}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635),l=n(50216);function c(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerManagerEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(c()),g=(0,o.Ps)(s()),y=(0,o.Ps)(u(),v);function Z(e){var t=(0,r.Z)({},m,e);return a.a(y,t)}var b=(0,o.Ps)(d(),v);function w(e){var t=(0,r.Z)({},m,e);return l.D(b,t)}var x=(0,o.Ps)(f(),v);function C(e){var t=(0,r.Z)({},m,e);return l.D(x,t)}var k=(0,o.Ps)(h(),v,g);function S(e){var t=(0,r.Z)({},m,e);return l.D(k,t)}var E=(0,o.Ps)(p(),v);function T(e){var t=(0,r.Z)({},m,e);return l.D(E,t)}},82496:function(e,t,n){n.d(t,{_U:function(){return D},ln:function(){return I}});var r=n(2272),i=n(9970),o=n(74985),a=n(47805),l=n(25404),c=n(46130),s=n(9434),u=n(13609),d=n(23007),f=n(37268),h=n(53312),p=n(26473),m=n(88965),v=n(86890),g=n(27773),y=n(90171),Z=n(50959),b=n(4821),w=n(91547),x=n(93397),C=n(86813),k=n(14709),S=n.n(k),E=n(61623),T=n(3689);function R(e,t){return t.some((function(t){return t.id===e}))}var D={root:[m.l0.color.foregroundDefault,m.l0.flex.column,m.l0.colWithGap(12),m.l0.align.stretch,m.l0.flex.growAndShrink(1)],header:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center,m.l0.px(16)],header_mobile:[m.l0.px(0)],titleContainer:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center],limitsContainer:[m.l0.align.center,m.l0.rowWithGap(8)],loading:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.grow(1),m.l0.justify.center],measureBar:[m.l0.height(8),m.l0.width(60)],searchContainer:[m.l0.px(16),m.l0.position.relative,m.l0.maxHeight(32)],userList:[m.l0.flex.column,m.l0.colWithGap(16),m.l0.scrollbar.thin,m.l0.position.relative,m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1),m.l0.pb(8),{maxHeight:300,"::-webkit-scrollbar-thumb":[m.l0.backgroundColor.backgroundHighest,m.l0.borderRadius(4)],scrollbarColor:"".concat(m.TV.backgroundDefault," ").concat(m.TV.backgroundHighest)}],userGroup:{root:[m.l0.colWithGap(8)],titleContainer:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.px(16)],title:[m.l0.fontWeight.medium]},emptyContainer:[m.l0.position.relative,m.l0.flex.row,m.l0.rowWithGap(12),m.l0.py(64),m.l0.center,m.l0.px(16),{maxHeight:220,borderBottom:"solid 1px ".concat(m.TV.outlineDimmest)}]},I=function(e){var t=e.title,n=e.count,r=e.color,i=e.tooltip;return(0,o.BX)(p.G,{css:D.userGroup.titleContainer,children:[(0,o.tZ)(v.Z,{color:r,size:6}),(0,o.tZ)(h.xv,{variant:"small",css:D.userGroup.title,multiline:!1,children:t}),(0,o.tZ)(h.xv,{multiline:!1,variant:"small",color:"dimmest",css:D.userGroup.title,children:n}),i?(0,o.tZ)(E.u,{tooltip:i,children:(0,o.tZ)(T.Z,{})}):null]})};t.ZP=function(e){var t=e.replId,n=e.handleUpgradeTriggered,v=(0,y.useRouter)(),k=(0,c.Vg)(v),E=(0,l.Z)(),T=E.showConfirm,_=E.showError,B=(0,C.aG)(),G=(0,w.mH)({variables:{replId:t},pollInterval:8e3}),P=G.data,A=G.loading,N=(0,r.Z)((0,w.U)({onCompleted:function(e){var n,r=null===(n=e.addMultiplayerUser.user)||void 0===n?void 0:n.username;r&&((0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"username"}),T("Added @".concat(r)))}}),2),U=N[0],L=N[1],O=(0,r.Z)((0,w.z8)({update:function(e,n){var r,o=null===(r=n.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(o)if("UserError"!==o.__typename){if("MultiplayerInvite"===o.__typename){var a=o.email;return(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),void T("Invited ".concat(a," via email"))}if("ReplPermission"===o.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:t}),fields:{permissions:function(t){var n=e.writeFragment({data:o,fragment:w.dE});return(0,i.Z)(t).concat([n])}}});var c=null===(l=o.user)||void 0===l?void 0:l.username;if(!c)return;(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:t,inviteMethod:"email"}),T("Invited @".concat(c))}}else _(o.message)}}),2),X=O[0],M=O[1];(0,Z.useEffect)((function(){var e=L.error||M.error;e&&(e.message.includes("reached the limit")?k?_("You have reached the invite limit for a free account, visit https://replit.com/pricing to upgrade."):n&&n(!0):_(e.message))}),[L.error,M.error,_,k,n]);var F="Repl"===(null===P||void 0===P?void 0:P.repl.__typename)?P.repl:null,W=null===P||void 0===P?void 0:P.currentUser,H=null===F||void 0===F?void 0:F.multiplayers.reduce((function(e,t){return(0,i.Z)(e).concat([t.username])}),[]),V=(null===F||void 0===F?void 0:F.currentUserPermissions.editMultiplayers)||!1,z=Boolean(F&&!F.multiplayers.length&&!F.multiplayerInvites.length),j=null===F||void 0===F?void 0:F.multiplayers.filter((function(e){return e.id!==(null===W||void 0===W?void 0:W.id)})),q=null===j||void 0===j?void 0:j.filter((function(e){return e&&R(e.id,B)})),$=null===j||void 0===j?void 0:j.filter((function(e){return e&&!R(e.id,B)})),Y=j?j.length:null;return(0,o.BX)(f.Tg,{background:"default",css:D.root,children:[(0,o.BX)(p.G,{css:[D.header,k&&D.header_mobile],children:[(0,o.tZ)(p.G,{css:D.titleContainer,children:(0,o.tZ)(h.xv,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,o.BX)(p.G,{css:D.limitsContainer,children:[A?(0,o.BX)(p.G,{css:D.loading,children:[(0,o.tZ)(g.Z,{color:m.TV.foregroundDimmer}),(0,o.tZ)(h.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,null===Y||(null===W||void 0===W?void 0:W.isSubscribed)?null:(0,o.BX)(o.HY,{children:[(0,o.BX)(h.xv,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[Y," / ",b.z]}),(0,o.tZ)(d.J,{css:D.measureBar,total:b.z,current:Y,tooltip:"".concat(b.z-Y," free editors remaining")})]}),A||(null===W||void 0===W?void 0:W.isSubscribed)||k?null:(0,o.tZ)(a.Z,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){n&&n(!0)},onCancel:function(){n&&n(!1)}})]})]}),V&&H&&F?(0,o.tZ)(p.G,{css:D.searchContainer,children:(0,o.tZ)(u.Z,{existingUsernames:H,onSubmit:function(e){A&&!(null===W||void 0===W?void 0:W.isSubscribed)||(!S()(e)||M.loading?L.loading||U({variables:{username:e,replId:t,type:"rw"}}):X({variables:{replId:t,email:e,type:"rw"}}))}})}):null,z?(0,o.tZ)(p.G,{css:D.emptyContainer,children:(0,o.tZ)(p.G,{children:(0,o.tZ)(h.xv,{variant:"subheadDefault",color:"dimmer",multiline:!1,children:"No one else is here"})})}):(0,o.BX)(f.Tg,{css:D.userList,children:[(null===q||void 0===q?void 0:q.length)?(0,o.BX)(p.G,{css:D.userGroup.root,children:[(0,o.tZ)(I,{title:"Online",count:q.length||0,color:m.TV.greenStrongest}),q.map((function(e){return e?(0,o.tZ)(x.Z,{isPendingInvitation:!1,replId:t,canEditMultiplayers:V,user:e},e.id):null}))]}):null,(null===$||void 0===$?void 0:$.length)?(0,o.BX)(p.G,{css:D.userGroup.root,children:[(0,o.tZ)(I,{title:"Offline",count:$.length||0,color:m.TV.outlineStrongest}),null===$||void 0===$?void 0:$.map((function(e){return e?(0,o.tZ)(x.Z,{canEditMultiplayers:V,isPendingInvitation:!1,user:e,replId:t},e.id):null}))]}):null,(null===F||void 0===F?void 0:F.multiplayerInvites.length)?(0,o.BX)(p.G,{css:D.userGroup.root,children:[(0,o.tZ)(I,{title:"Pending Invitations",count:(null===F||void 0===F?void 0:F.multiplayerInvites.length)||0,color:m.TV.outlineStrongest}),F.multiplayerInvites.map((function(e){return(0,o.tZ)(x.Z,{canEditMultiplayers:V,replId:t,isPendingInvitation:!0,email:e.email},e.email)}))]}):null]})]})}},93397:function(e,t,n){var r=n(2272),i=n(74985),o=n(94784),a=n(16296),l=n(53312),c=n(99401),s=n(26473),u=n(61025),d=n(88965),f=n(63211),h=n(68912),p=n(12068),m=n(82893),v=n.n(m),g=n(91547),y=n(25404),Z=(0,u.X)({root:[d.l0.px(16),d.l0.py(4),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,d.l0.cursor.default,d.l0.justify.spaceBetween],userContainer:d.l0.color.foregroundDefault,userContainer_pending:[d.l0.flex.grow(1),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center]});t.Z=function(e){var t,n=e.isPendingInvitation,u=e.canEditMultiplayers,m=e.replId,b=(0,y.Z)(),w=b.showError,x=b.showConfirm,C=(0,r.Z)((0,g.Jh)({onError:function(e){return w(e.message)},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n&&x("".concat(n," removed"))}}),2),k=C[0],S=C[1],E=(0,r.Z)((0,g.RJ)({onError:function(e){return w(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;x("Invite canceled for ".concat(t))}}else w(e.deleteMultiplayerInvite.message)}}),2),T=E[0],R=E[1],D=!n,I=D?(0,i.tZ)(o.Z,{size:"m",url:e.user.image}):(0,i.tZ)(f.Z,{color:d.TV.outlineDefault,size:32}),_=D?e.user.username:e.email;return(0,i.BX)(s.G,{css:Z.root,children:[D?(0,i.tZ)(p.Z,{username:e.user.username,children:(0,i.tZ)(v(),{legacyBehavior:!0,href:"/@".concat(e.user.username),passHref:!0,children:(0,i.tZ)(s.G,{tag:"a",css:Z.userContainer,children:(0,i.tZ)(c.n,{username:e.user.username,src:null!==(t=e.user.image)&&void 0!==t?t:null})})})}):(0,i.BX)(s.G,{css:[Z.userContainer_pending],children:[I,(0,i.tZ)(l.xv,{color:D?"default":"dimmest",multiline:!1,children:_})]}),(0,i.BX)(s.G,{css:Z.permissionsContainer,children:[(0,i.tZ)(l.xv,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),u?(0,i.tZ)(a.hU,{alt:D?"Remove member":"Cancel invitation",onClick:function(){u&&(S.loading||R.loading||(D?k({variables:{replId:m,username:e.user.username}}):T({variables:{replId:m,email:e.email}})))},children:(0,i.tZ)(h.Z,{size:12})}):null]})]})}},13609:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(72006),i=n(4405),o=n(2272),a=n(74985),l=n(94784),c=n(60200),s=n(25404),u=n(95141),d=n(20685),f=n(37268),h=n(53312),p=n(26473),m=n(61025),v=n(88965),g=n(44385),y=n(27773),Z=n(21371),b=n(50959),w=n(38029),x=n(14709),C=n.n(x),k=n(27937),S=(0,m.X)({form:[v.l0.align.start,v.l0.display.flex,v.l0.rowWithGap(8),v.l0.width("100%")],searchContainer:[v.l0.position.relative,v.l0.flex.growAndShrink(1)],dropdownMenu:[v.l0.borderRadius(8),v.l0.overflow("hidden"),v.l0.mt(2),v.l0.zIndex(2),v.l0.border({color:v.TV.outlineDimmer,width:1,style:"solid"}),v.l0.maxHeight(280),v.l0.overflowY("auto"),v.l0.scrollbar.thin,{scrollbarColor:v.TV.backgroundHigher+" "+v.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:v.TV.backgroundHighest}}],result:[v.l0.p(8),v.l0.rowWithGap(8),v.l0.justify.spaceBetween,v.l0.align.center,v.l0.cursor.pointer],result_active:[v.l0.backgroundColor.accentPrimaryDimmer],userContainer:[v.l0.rowWithGap(8),v.l0.align.center],loadingContainer:[v.l0.align.center,v.l0.m(8),v.l0.rowWithGap(8),v.l0.align.center],emptyText:[v.l0.m(8)]});function E(e){var t=e.onSubmit,n=e.existingUsernames,m=e.isDisabled,x=e.onChange,E=e.placeholder,T=(0,o.Z)(b.useState(""),2),R=T[0],D=T[1],I=(0,w.U)(),_=(0,c.Z)(R.trim().replace(/^@/,""),250),B=(0,k.sk)({skip:!_||C()(R),variables:{query:_,limit:6}}),G=B.data,P=B.loading,A=B.error,N=(0,s.Z)().showError;b.useEffect((function(){A&&N(A.message)}),[A,N]);var U=null===G||void 0===G?void 0:G.usernameSearch,L=function(e){D(e.currentTarget.value),null===x||void 0===x||x(e.currentTarget.value)},O=function(e){"Enter"===e.key&&R.match(/.+@.+/)&&(t(R),D(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),t(R),D("")},css:S.form,children:[(0,a.tZ)(Z.ZP,{onChange:function(e){e&&D(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var t=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,s=e.isOpen,u=e.highlightedIndex,m=e.getRootProps;return(0,a.BX)(p.G,(0,i.Z)((0,r.Z)({css:S.searchContainer},m({refKey:"innerRef"})),{children:[(0,a.tZ)(d.II,(0,r.Z)({id:I("username-search")},t({ref:null,value:R,onChange:L,placeholder:null!==E&&void 0!==E?E:"Add people by username or email",autoComplete:"off",onKeyDown:O}))),s?(0,a.BX)(p.G,{children:[U&&U.length?(0,a.tZ)(f.Tg,(0,i.Z)((0,r.Z)({elevated:!0,css:S.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:U.map((function(e,t){return(0,a.BX)(p.G,(0,i.Z)((0,r.Z)({tag:"li"},o({item:e,index:t})),{css:[S.result,t===u&&S.result_active],children:[(0,a.BX)(p.G,{css:S.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image}),(0,a.tZ)(h.xv,{multiline:!1,children:e.username})]}),n.includes(e.username)?(0,a.tZ)(p.G,{children:(0,a.tZ)(g.Z,{color:v.TV.accentPositiveStronger})}):null]}),t)}))})):null,P?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(p.G,{css:S.loadingContainer,children:[(0,a.tZ)(y.Z,{}),(0,a.tZ)(h.xv,{color:"dimmer",multiline:!1,children:"Loading\u2026"})]})}):null,U&&0===U.length?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(h.xv,{css:S.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',R,'"']})}):null]}):null]}))}}),(0,a.tZ)(p.G,{children:(0,a.tZ)(u.zx,{colorway:"primary",type:"submit",disabled:m||!R,text:"Invite"})})]})}},51801:function(e,t,n){n.d(t,{s:function(){return Fe}});var r=n(74985),i=n(1446),o=n(9434),a=n(44225),l=n(57135),c=n(72006),s=n(4405),u=n(2272),d=n(96583),f=n(14366),h=n(96969),p=n(66980),m=n(76444),v=n(80692),g=n(88965),y=n(53312),Z=n(26473),b=n(90114);function w(e){var t=e.amount,n=e.includeUsd,i=e.variant,o=e.color,a=void 0===o?"default":o,l=(0,v.$E)(t),c=(0,v.H2)(t);return(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(b.Z,{size:"small"===i?12:16,css:[y.E_[a]]}),(0,r.BX)(y.xv,{variant:i,color:a,multiline:!1,children:[c,n?" (".concat(l,")"):""]})]})}var x=n(49205),C=n(51631),k={boost:C.kL.Boost,hosting_tier:C.kL.HostingTier},S={boost_2cpu_2ram:C.s2.Boost_2cpu_2ram,boost_4cpu_4ram:C.s2.Boost_4cpu_4ram,boost_8cpu_8ram:C.s2.Boost_8cpu_8ram,boost_16cpu_16ram:C.s2.Boost_16cpu_16ram,hosting_tier_e2_micro:C.s2.HostingTierE2Micro,hosting_tier_e2_small:C.s2.HostingTierE2Small,hosting_tier_e2_medium:C.s2.HostingTierE2Medium,hosting_tier_n1_custom_1_4:C.s2.HostingTierN1Custom_1_4,hosting_tier_e2_standard_2:C.s2.HostingTierE2Standard_2,hosting_tier_e2_standard_4:C.s2.HostingTierE2Standard_4},E=n(68640),T=n(8662),R=n(95141),D=n(90602),I=n(16296),_=n(61025),B=n(62385),G=n(27773),P=n(3861),A=n(22554),N=n(42769),U=n(50959),L=n(14351),O=n(66e3),X=n(43119),M=n(71440),F=n(15346),W=n(88207),H=n(9125);function V(){var e=(0,X.Z)(["\n  query RefetchPowerUps($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...MultiBoostReplPowerUps\n        ...ReplPowerUpMutationReturnFields\n      }\n    }\n    currentUser {\n      ...PowerUpMutationReturnFields\n    }\n  }\n  ","\n  ","\n  ","\n"]);return V=function(){return e},e}var z={},j=(0,M.Ps)(V(),F.s1,W.sh,W.E_);function q(e){var t=e.cycles,n=e.description;return(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:n}),(0,r.tZ)(D.R,{}),(0,r.tZ)(w,{amount:t,includeUsd:!1,color:"dimmest"})]})}var $=(0,_.X)({iconBackground:[g.l0.width(40),g.l0.height(40),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.blueDimmer],loadingContainer:[g.l0.justify.center,g.l0.align.center,g.l0.minHeight(80)]});function Y(e){var t=e.powerUpCategory,n=e.cyclesCost,o=e.description,a=i.S0[t];return(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(16)],children:(0,r.BX)(Z.G,{css:[g.l0.flex.row,g.l0.justify.spaceBetween],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:$.iconBackground,children:(0,r.tZ)(a.iconComponent,{size:24})}),(0,r.BX)(Z.G,{css:[g.l0.px(8),g.l0.py(2),g.l0.colWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:a.name}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:o})]})]}),(0,r.BX)(Z.G,{css:[g.l0.px(8),g.l0.py(2),g.l0.colWithGap(4),g.l0.justify.spaceBetween,g.l0.align.end],children:[(0,r.tZ)(w,{amount:n,includeUsd:!0}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:["per / ",a.orderDuration]})]})]})})}function K(e){var t=e.product,n=e.goToCheckoutSuccess,o=e.goToNewPaymentMethodForm,a=(0,f.useStripe)(),v=(0,h.Z)({forceFetch:!0}),b=v.cycles,w=v.loading,C=(0,T.Q)(),_=C.paymentMethod,X=C.loading,M=i.S0[t.powerUpCategory],F=i.$[t.powerUpSku].provisionDescription,W=(0,U.useState)(null),V=W[0],K=W[1],Q=(0,U.useState)(!1),J=Q[0],ee=Q[1],te=(0,U.useState)(!1),ne=te[0],re=te[1],ie=(0,E.M)().createCheckoutSession,oe=(0,u.Z)(function(e){var t=(0,c.Z)({},z,e);return H.t(j,t)}({variables:{replId:t.replId}}),1)[0],ae=(0,O.B)().startPolling,le=(0,p.kr)({defaultAutoRefillEnabledValue:!0}),ce=le.autoRefillEnabled,se=le.autoRefillMonthlyBudget,ue=le.autoRefillHasError,de=le.autoRefillHasChanged,fe=le.cardAutoRefillPreferencesProps,he=function(e){var t=e.productCost,n=e.cyclesBalance;if(t<=n)return{cyclesToBePurchased:0,cyclesBalanceAfterUpgrade:n,excessPurchaseExplanation:"no-purchase"};var r,i=t-n,o="no-excess";return i>=L.gp?(r=i,o="no-excess"):(r=L.gp,o="minimum"),{cyclesToBePurchased:r,cyclesBalanceAfterUpgrade:n+r-t,excessPurchaseExplanation:o}}({productCost:t.cyclesCostNow,cyclesBalance:null!==b&&void 0!==b?b:0}),pe="This will purchase ".concat(he.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,L.qJ)(he.cyclesToBePurchased)," and activate your ").concat(M.name,".");"minimum"===he.excessPurchaseExplanation&&(pe="This will purchase the minimum purchase amount of ".concat(he.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,L.qJ)(he.cyclesToBePurchased)," and activate your ").concat(M.name,"."));var me=(0,U.useState)("Processing..."),ve=me[0],ge=me[1],ye=(0,N.i)(),Ze=ye.isPurchaseAllowed,be=ye.reasonPurchaseNotAllowed;if(!Ze&&be)return(0,r.tZ)(A.Z,{reason:be});var we=function(){ee(!1)},xe=function(){var e=(0,l.Z)((function(){return(0,d.__generator)(this,(function(e){switch(e.label){case 0:if(ee(!0),null==_)throw new Error("paymentMethod is null");if(null==a)throw new Error("stripe is null");return ge("Checking out..."),[4,ie({input:{cyclesQuantity:he.cyclesToBePurchased,postPurchasePowerUp:{replPowerUp:{replId:t.replId,sku:S[t.powerUpSku],type:k[t.powerUpCategory]}},cyclesAutoRefillConfiguration:de?{enabled:ce,monthlyBudget:se}:null},onError:function(e){K(e),we()},onSucceed:function(){var e=(0,l.Z)((function(e){var r,i;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return ge("Processing payment..."),[4,a.confirmCardPayment(e.clientSecret)];case 1:return(r=o.sent().error)?(K(null!==(i=r.message)&&void 0!==i?i:"An error occurred. Please try again."),we(),[2]):(ge("Provisioning Power Up..."),function(e){var r=e.checkoutSessionId;ae({checkoutSessionId:r,onSucceeded:function(){re(!0),oe(),n(t)},onFailed:function(){K("Payment failed. Please try again."),we(),oe()},onError:function(e){K(e),we(),oe()}})}({checkoutSessionId:e.checkoutSessionId}),[2])}}))}));return function(t){return e.apply(this,arguments)}}()})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Ce=X||w||null==b,ke=null!=_&&!Ce&&!J;return(0,r.BX)(Z.G,{css:[g.l0.colWithGap(16)],children:[(0,r.tZ)(Y,{powerUpCategory:t.powerUpCategory,cyclesCost:L.z4[t.powerUpSku],description:F}),(0,r.tZ)(D.R,{}),Ce?(0,r.tZ)(Z.G,{css:$.loadingContainer,children:(0,r.tZ)(G.Z,{})}):(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(12),g.l0.align.start],children:null==_?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.xv,{color:"dimmer",children:"You need to add a payment method to complete this purchase."}),(0,r.tZ)(R.zx,{iconLeft:(0,r.tZ)(P.Z,{}),text:"Add Payment Method",size:"big",onClick:o,colorway:"primary",stretch:!0})]}):(0,r.tZ)(r.HY,{children:(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(16)],children:(0,r.BX)(Z.G,{css:[g.l0.colWithGap(4)],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(I.hU,{alt:"Update Payment Method",onClick:o,children:(0,r.tZ)(B.Z,{})}),(0,r.tZ)(m.R,{last4:_.last4})]}),(0,r.tZ)(Z.G,{css:[g.l0.pl(24),g.l0.pr(16),g.l0.colWithGap(8)],children:(0,r.tZ)(p.OK,(0,s.Z)((0,c.Z)({},fe),{loading:fe.loading||J,showSaveButton:!1}))})]})})})}),null!==_?(0,r.BX)(r.HY,{children:[(0,r.tZ)(D.R,{}),(0,r.tZ)(y.xv,{variant:"small",css:[g.l0.color.foregroundDimmer],children:pe}),(0,r.tZ)(x.q,{isMakingPayment:!0,showSuccessState:ne,showProcessingState:J,disabled:!ke||ue,initialStateTextOverride:"Purchase ".concat(he.cyclesToBePurchased.toLocaleString()," Cycles & Upgrade ").concat(M.name),processingStateTextOverride:ve,size:"big",onClick:xe}),null!=V?(0,r.tZ)(y.xv,{css:[g.l0.color.accentNegativeDefault],children:V}):null,(0,r.BX)(Z.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)(q,{description:"Cycles balance after purchase",cycles:he.cyclesToBePurchased}),(0,r.tZ)(q,{description:"1st ".concat(M.orderDuration," of ").concat(M.name),cycles:-1*t.cyclesCostNow}),(0,r.tZ)(q,{description:"Cycles balance after upgrade",cycles:he.cyclesBalanceAfterUpgrade})]})]}):null]})}var Q=n(24635);function J(){var e=(0,X.Z)(["\n  query CheckOutSuccess($replId: String!) {\n    currentUser {\n      id\n      cyclesAutoRefillConfiguration {\n        ... on CyclesAutoRefillConfiguration {\n          id\n          enabled\n          refillAmount\n          monthlyBudget\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return J=function(){return e},e}var ee={},te=(0,M.Ps)(J());var ne=n(55418),re=n(83966),ie=n(79824);function oe(e){var t=e.autoRefillEnabled;return e.loadingAutoRefill?"...":t?"on":"off"}var ae=(0,_.X)({powerUpIconBackground:[g.l0.width(32),g.l0.height(32),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.blueDimmer],autoRefillIconBackground:[g.l0.width(32),g.l0.height(32),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.greyDimmer]});function le(e){var t,n,o,a=e.product,l=e.goToCardPreferences,s=e.goToPowerUpDetails,u=(0,h.Z)({forceFetch:!0}).cycles,d=function(e){var t=(0,c.Z)({},ee,e);return Q.a(te,t)}({variables:{replId:a.replId}}),f=d.data,p=d.loading,m="CyclesAutoRefillConfiguration"===(null===f||void 0===f||null===(t=f.currentUser)||void 0===t||null===(n=t.cyclesAutoRefillConfiguration)||void 0===n?void 0:n.__typename)?f.currentUser.cyclesAutoRefillConfiguration:null,v="Repl"===(null===f||void 0===f?void 0:f.repl.__typename)&&"Team"===(null===(o=f.repl.owner)||void 0===o?void 0:o.__typename),b=Boolean(null===m||void 0===m?void 0:m.enabled),x=i.S0[a.powerUpCategory],C=i.$[a.powerUpSku];return(0,r.BX)(Z.G,{css:[g.l0.colWithGap(16)],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:ae.powerUpIconBackground,children:(0,r.tZ)(x.iconComponent,{size:20})}),(0,r.BX)(Z.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.xv,{multiline:!1,children:[x.name," activated"]}),(0,r.BX)(Z.G,{css:g.l0.rowWithGap(8),children:[(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:C.provisionDescription}),v?null:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(4)],children:[(0,r.tZ)(w,{amount:L.z4[a.powerUpSku],includeUsd:!0,variant:"small",color:"dimmer"}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:["/ ",x.orderDuration]})]})]})]})]}),(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return s(a.powerUpCategory)},onClick:function(){return s(a.powerUpCategory)},css:[g.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),v||p?null:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:ae.autoRefillIconBackground,children:(0,r.tZ)(re.Z,{size:20})}),(0,r.BX)(Z.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.xv,{multiline:!1,children:["Auto-Refill is"," ",oe({autoRefillEnabled:b,loadingAutoRefill:p})]}),(0,r.tZ)(Z.G,{css:g.l0.rowWithGap(4),children:null==u?(0,r.tZ)(G.Z,{}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{amount:u,includeUsd:!1,variant:"small",color:"dimmer"}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:"left"})]})})]})]}),(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return l(a.powerUpCategory)},onClick:function(){return l(a.powerUpCategory)},css:[g.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),p||b||v?null:(0,r.tZ)(ne.E,{colorway:"warning",icon:(0,r.tZ)(ie.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your ".concat(x.name," Power Up from being disabled when you run out of Cycles.")})]})}var ce=n(25149),se=n(89138),ue=n(44385),de=n(70232),fe=n(11953),he=n(54314),pe=n(37268),me=n(43312),ve=n(10321),ge={tier:(0,me.iv)([g.l0.borderRadius(12),g.l0.colWithGap(12),g.l0.p(12)]),tierHeader:(0,me.iv)([g.l0.rowWithGap(8),g.l0.flex.grow(1),g.l0.justify.spaceBetween,g.l0.align.baseline]),tierHeaderTitle:(0,me.iv)(g.l0.rowWithGap(8)),tierHeaderCost:(0,me.iv)([g.l0.rowWithGap(4),g.l0.align.baseline]),tierFeatures:(0,me.iv)(g.l0.colWithGap(8)),tierFeature:(0,me.iv)(g.l0.rowWithGap(4),g.l0.align.center),tierPicker:(0,me.iv)([g.l0.border({color:g.TV.outlineDefault})])},ye=function(e){var t=e.selectedOption,n=e.onChange,i=e.disabled,o=L.r4[t.sku].egress,a=["".concat(o," GiB egress"),"Deploy to any URL, cover page optional","Configurable machine","Always on"],l="INCLUDED_IN_SUBSCRIPTION"!==t.cost.explanation&&"NOT_SUPPORTED_FOR_TEAMS"!==t.cost.explanation;return(0,r.BX)(pe.Tg,{elevated:!0,css:ge.tier,children:[(0,r.BX)(Z.G,{css:ge.tierHeader,children:[(0,r.tZ)(Z.G,{css:ge.tierHeaderTitle,children:(0,r.tZ)(y.xv,{variant:"subheadBig",multiline:!1,children:"Reserved VM"})}),(0,r.tZ)(Z.G,{css:g.l0.rowWithGap(4),children:l?(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(b.Z,{}),(0,r.BX)(Z.G,{css:[ge.tierHeaderCost],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t.cost.cyclesCostRecurring}),(0,r.tZ)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:"per day"})]})]}):null})]}),(0,r.tZ)(he.P,{css:ge.tierPicker,initialSelectedItem:{title:(0,ve.$)(t.sku),sku:t.sku},items:Object.keys(L.r4).map((function(e){return{title:(0,ve.$)(e),sku:e}})),onChange:function(e){var t=e.sku;return n(t)},disabled:i}),(0,r.tZ)(Z.G,{css:ge.tierFeatures,children:a.map((function(e,t){return(0,r.BX)(Z.G,{css:ge.tierFeature,children:[(0,r.tZ)(ue.Z,{}),(0,r.tZ)(y.xv,{multiline:!1,children:e})]},t)}))})]})},Ze=n(34547),be=n(61623),we=n(3689),xe=n(30504),Ce=n(43182),ke=n(48818),Se=n(25404),Ee=n(18314),Te=n(45987),Re=function(e){var t=e.context,n=e.selectedOption,i=e.currentOption,a=e.onBuyMoreCycles,c=e.onPowerUpUpdated,s=e.onPowerUpRequested,f=(0,Ze.Z)(),h=(0,ke.Z)(),m=(0,Se.Z)().showError,v=(0,u.Z)(U.useState(!1),2),y=v[0],Z=v[1],b=(0,p.kr)({}).autoRefillEnabled,w=(0,u.Z)((0,Te.IN)({onCompleted:function(){var e=(0,l.Z)((function(e){var t;return(0,d.__generator)(this,(function(r){switch(r.label){case 0:return"UserError"===(t=e.setHostingTier).__typename?(m(t.message),[2]):(Z(!0),[4,new Promise((function(e){return setTimeout(e,2e3)}))]);case 1:return r.sent(),c({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:n.sku,cyclesCostNow:n.cost.cyclesCostNow,replId:f}),h.current,[2]}}))}));return function(t){return e.apply(this,arguments)}}(),onError:function(e){s(!1),Ce.Tb(e),m(e.message)}}),2),x=w[0],k=w[1].loading;if(y)return(0,r.tZ)(R.zx,{text:"Tier Purchased",colorway:"positive",loading:!0,css:{color:"".concat(g.TV.accentPositiveStronger," !important")}});var S,E=(null===i||void 0===i?void 0:i.sku)===n.sku,T=!0;switch(n.cost.explanation){case C.Ch.IncludedInExistingOrder:case C.Ch.ActivateExistingOrder:case C.Ch.SpendCycles:case C.Ch.NeedsCycles:case C.Ch.IncludedInSubscription:T=!1}return k?(T=!0,S="Processing"):E?(T=!0,S="Current tier"):S="INCLUDED_IN_SUBSCRIPTION"===n.cost.explanation?"Activate and deploy":"NOT_SUPPORTED_FOR_TEAMS"===n.cost.explanation?"Not available for teams":"Purchase and deploy",(0,r.tZ)(R.zx,{text:S,disabled:T,loading:k,colorway:k||!T?"primary":void 0,iconRight:k?void 0:(0,r.tZ)(Ee.Z,{}),onClick:function(){var e;(s(!0),k)||(n.cost.explanation!==C.Ch.NeedsCycles?(x({variables:{input:{replId:f,sku:n.sku}}}),null!==(e=n.cost.cyclesCostNow)&&void 0!==e&&e&&((0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:t,powerUpCategory:"boost"}),(0,o.j)(o.U3.CYCLES_USED,{powerUp:"hosting_tier",sku:n.sku,source:t}),(0,o.j)(o.U3.CHECKOUT_COMPLETED,{source:t,powerUpCategory:"boost",autoRefill:b}))):a({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:n.sku,cyclesCostNow:n.cost.cyclesCostNow,replId:f}))},css:k&&{color:"".concat(g.TV.accentPrimaryStronger," !important")}})},De=function(e){var t=e.context,n=e.onBuyMoreCycles,i=e.onPowerUpUpdated,o=(0,Ze.Z)(),a=(0,u.Z)(U.useState("ready"),2),l=a[0],c=a[1],s=(0,u.Z)(U.useState(null),2),d=s[0],f=s[1],h=(0,u.Z)(U.useState(null),2),p=h[0],m=h[1],b=(0,u.Z)(U.useState(null),2),w=b[0],x=b[1],k=(0,Te.s7)({fetchPolicy:"network-only",ssr:!1,variables:{replId:o},onCompleted:function(e){var t,n,r,i,o,a;if("Repl"===(null===e||void 0===e?void 0:e.repl.__typename)&&"ReplPowerUpTypes"===(null===(t=e.repl)||void 0===t||null===(n=t.powerUps)||void 0===n?void 0:n.__typename)&&"PowerUpCostsType"===(null===(r=e.repl)||void 0===r||null===(i=r.powerUpCosts)||void 0===i?void 0:i.__typename)){var l=null===(o=e.repl.powerUps.hostingTier)||void 0===o?void 0:o.sku,c=l||("Team"===(null===(a=e.repl.owner)||void 0===a?void 0:a.__typename)?C.DZ.HostingTierE2Micro:C.DZ.HostingTierE2Small),s=(0,ve.i)(e.repl.powerUpCosts,l),u=(0,ve.i)(e.repl.powerUpCosts,c);s&&l&&m({sku:l,cost:s}),u&&f({sku:c,cost:u}),x(e.repl.powerUpCosts)}}}).loading;if(k||!d||!w)return(0,r.tZ)(Z.G,{css:[g.l0.flex.row,g.l0.justify.center],children:(0,r.tZ)(G.Z,{})});var S=null;if("INCLUDED_IN_SUBSCRIPTION"===d.cost.explanation)S="Included in your subscription plan.";else if(d.cost.cyclesCostRecurring>0){var E=(0,v.$E)(d.cost.cyclesCostRecurring),T=(0,v.$E)(d.cost.cyclesCostRecurring*xe.Dj);S="".concat(E,"/day (Approximately ").concat(T,"/month).")}var R=null;switch(d.cost.explanation){case C.Ch.IncludedInExistingOrder:break;case C.Ch.NeedsCycles:R="You'll be able to purchase Cycles while activating.";break;case C.Ch.SpendCycles:R="Today's charge will be ".concat(d.cost.cyclesCostNow," Cycles.")}return(0,r.BX)(Z.G,{css:g.l0.colWithGap(16),children:[(0,r.tZ)(ye,{selectedOption:d,onChange:function(e){var t=(0,ve.i)(w,e);t&&f({sku:e,cost:t})},disabled:"requesting"===l}),(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(12)],children:(0,r.BX)(Z.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(Z.G,{css:[g.l0.minHeight(50),g.l0.colWithGap(16),g.l0.justify.end,g.l0.mb(16)],children:[null!=S?(0,r.tZ)(y.xv,{css:[g.l0.textAlign.center],multiline:!1,children:S}):null,null!=R?(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.center,g.l0.color.foregroundDimmer],children:[(0,r.tZ)(y.xv,{multiline:!1,children:R}),(0,r.tZ)(be.u,{tooltip:"Upgrades and downgrades are immediate. Upgrading within a 24 hour period following a downgrade will incur a charge.",children:(0,r.tZ)(we.Z,{})})]}):null]}),(0,r.tZ)(Re,{context:t,selectedOption:d,currentOption:p,onBuyMoreCycles:n,onPowerUpUpdated:i,onPowerUpRequested:function(e){return c(e?"requesting":"ready")}})]})})]})},Ie=n(68877),_e=n(12901),Be=n(89559),Ge=n(70135),Pe=(0,_.X)({self:[g.l0.flex.column]}),Ae=function(){var e=(0,_e.Z)(),t=(0,U.useState)(!1),n=t[0],i=t[1],o=(0,Ie.Pf)({fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0}),a=o.data,l=o.loading,c=o.refetch;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.G,{css:Pe.self,children:(0,r.tZ)(Be.h,{loading:l,isInDesktopApp:e,data:a,setShowUpgradeModal:i,slim:!0})}),(0,r.tZ)(Ge.Z,{isOpen:n,context:"workspace_info_modal",powerUp:"storage",uponPurchaseGoTo:"workspace",onRequestClose:function(){c(),i(!1)}})]})},Ne=n(47716),Ue=n(20236),Le=n(97307),Oe="workspace_info_modal";function Xe(e){var t=e.powerUpCategory,n=e.goToCheckout,i=e.goToCheckoutSuccess,o=e.onRequestPowerUp,a=(0,u.Z)(U.useState(null),2),l=a[0],c=a[1];switch(t){case"boost":return(0,r.tZ)(fe.Z,{isCheckoutFlow:!0,powerUp:t,onPowerUpUpdated:i,onBuyMoreCycles:n,context:Oe});case"hosting_tier":return(0,r.tZ)(De,{context:"workspace_hosting_pane",onPowerUpUpdated:i,onBuyMoreCycles:n});case"storage":return(0,r.tZ)(Ae,{});case"always-on":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Le.Z,{initialTab:"default",isOpen:l===Ue.x.BuyCycles,onRequestClose:function(){return c(null)},uponPurchaseGoTo:"workspace",context:Oe,allowCyclesPage:!1}),(0,r.tZ)(Ne.Z,{onRequestBuyMore:function(){return c(Ue.x.BuyCycles)},powerUp:"always-on",context:Oe,onRequestPowerUp:o})]});case"gpu":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Le.Z,{initialTab:"default",isOpen:l===Ue.x.BuyCycles,onRequestClose:function(){return c(null)},uponPurchaseGoTo:"workspace",context:Oe,allowCyclesPage:!1}),(0,r.tZ)(Ne.Z,{onRequestBuyMore:function(){return c(Ue.x.BuyCycles)},powerUp:"gpu",context:Oe,onRequestPowerUp:o})]});default:throw new Error("Unknown power up category: ".concat(t))}}function Me(e){var t=e.title,n=e.children,i=e.goBack,o=e.canGoBack,a=e.allowBack,l=void 0===a||a;return(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.p(8),g.l0.align.center],children:[l&&o?(0,r.tZ)(I.hU,{alt:"Back",tooltipHidden:!0,onClick:function(){return i()},dataCy:"purchase-flow-back-button",children:(0,r.tZ)(se.Z,{})}):null,"string"===typeof t?(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t}):t]}),(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(8),g.l0.p(8)],children:n})]})}function Fe(e){var t=e.currentStep,n=e.goBack,l=e.canGoBack,c=e.goTo,s=e.analyticsContext,u=e.onRequestPowerUp;switch(t.step){case"power_up_details":var d=t.powerUpCategory,f=i.S0[d];return(0,r.tZ)(Me,{goBack:n,canGoBack:l,title:f.name,children:(0,r.tZ)(Xe,{powerUpCategory:d,goToCheckout:function(e){c({step:"checkout",product:e}),(0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:s,powerUpCategory:d})},goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})},onRequestPowerUp:u})});case"checkout":return(0,r.tZ)(Me,{goBack:n,canGoBack:l,title:"Checkout",children:(0,r.tZ)(K,{product:t.product,goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})},goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form"})},context:s})});case"checkout_success":return(0,r.tZ)(Me,{goBack:n,canGoBack:l,allowBack:!1,title:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[l?(0,r.tZ)(I.hU,{tooltipHidden:!0,alt:"Back",onClick:function(){return n()},children:(0,r.tZ)(se.Z,{})}):null,(0,r.tZ)(y.xv,{multiline:!1,css:[g.l0.color.accentPositiveStronger],children:"Success"}),(0,r.tZ)(ue.Z,{color:g.TV.accentPositiveStronger})]}),children:(0,r.tZ)(le,{product:t.product,goToCardPreferences:function(e){return c({step:"card_preferences",powerUpCategory:e})},goToPowerUpDetails:function(e){return c({step:"power_up_details",powerUpCategory:e})}})});case"card_preferences":var h=t.powerUpCategory;return(0,r.tZ)(Me,{goBack:n,canGoBack:l,title:"Card Preferences",children:(0,r.tZ)(a.t,{goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form",powerUpCategory:h})}})});case"new_payment_method_form":var p=t.powerUpCategory;return(0,r.tZ)(Me,{goBack:n,canGoBack:l,title:"Update Payment Method",children:(0,r.tZ)(ce.q,{onSuccess:function(){return l&&n()},powerUpCategory:p,context:s})});case"not_shown":throw new Error("This step should never be rendered");default:(0,de.Z)(t)}}},86080:function(e,t,n){n.d(t,{FW:function(){return h},NH:function(){return v}});var r=n(72006),i=n(43119),o=n(71440),a=n(23023),l=n(63615),c=n(24635);function s(){var e=(0,i.Z)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    currentUserPermissions {\n      containerWrite\n      publish\n      changeIconUrl\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},h=(0,o.Ps)(s(),a.C,l.B),p=(0,o.Ps)(u(),a.D),m=(0,o.Ps)(d(),p);function v(e){var t=(0,r.Z)({},f,e);return c.a(m,t)}},56803:function(e,t,n){n.d(t,{e9:function(){return h},wd:function(){return d}});var r=n(72006),i=n(43119),o=n(71440),a=n(63615),l=n(24635);function c(){var e=(0,i.Z)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(s());function h(e){var t=(0,r.Z)({},u,e);return l.a(f,t)}},63615:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(43119);function i(){var e=(0,r.Z)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,n(71440).Ps)(i())},48153:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(57135),i=n(96583),o=n(74985),a=(n(50959),n(20685)),l=n(26473),c=n(53312),s=n(88965),u=n(95141),d=n(55418),f=n(38029),h=n(51631),p=n(15436),m=n(79824),v=n(4429),g=n(9434),y=n(5687),Z=n(28317),b=(0,n(61025).X)({content:[s.l0.p(8),s.l0.colWithGap(16)],section:[s.l0.colWithGap(8)]});function w(e){var t=e.header;return(0,o.tZ)(Z.Q,{headerContent:t,children:(0,o.BX)(l.G,{css:b.content,children:[(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Bold Text"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"**bold**"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Italic Text"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"__italic__"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Links"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"[Link Name](https://yourlink.com)"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Images"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Header Text"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"# Header"})]}),(0,o.BX)(l.G,{css:[s.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Code Blocks"}),(0,o.BX)(c.xv,{color:"dimmer",multiline:!1,children:["```",(0,o.tZ)("br",{}),"this is for large, multiline code blocks",(0,o.tZ)("br",{}),"```"]})]}),(0,o.BX)(l.G,{css:[s.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Inline Code"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"`this is for code in the middle of sentences`"})]}),(0,o.BX)(l.G,{css:[s.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Horizontal Rules"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"***"})]})]})})}var x=l.K.form;function C(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function k(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function S(e){var t,n,Z=e.repl,b=e.source,S=e.onDone,E=(0,f.U)(),T=E("titleIdInput"),R=E("descriptionIdInput"),D=(0,p.Y)("",C),I=(0,p.Y)("",k),_=(0,v.O)();return(0,o.BX)(x,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),D.validate()||I.validate()?[2]:[4,_.publish({input:{replId:Z.id,title:D.value,body:I.value}})];case 1:return t.sent().error||((0,g.j)(g.U3.UPDATE_SHARED,{source:b,replType:Z.publishedAs===h.O2.Template?"template_repl":"regular_repl"}),S()),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),css:[s.l0.colWithGap(16)],children:[(0,o.tZ)(c.h4,{level:1,variant:"headerDefault",children:"Add an update"}),(0,o.BX)(c.xv,{multiline:!1,children:["Explain what has changed about this"," ",Z.publishedAs===h.O2.Template?"Template":"Repl","."]}),(0,o.BX)(l.G,{css:s.l0.colWithGap(8),children:[(0,o.BX)(l.G,{css:s.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:s.l0.color.foregroundDimmer,htmlFor:T,children:"Title"}),(0,o.tZ)(a.II,{id:T,onChange:function(e){D.setValue(e.target.value)},disabled:_.loading,placeholder:"Give your post a title"})]}),D.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(m.Z,{}),text:null===(t=D.error)||void 0===t?void 0:t.message,colorway:"negative"}):null]}),(0,o.BX)(l.G,{css:s.l0.colWithGap(8),children:[(0,o.BX)(l.G,{css:s.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:s.l0.color.foregroundDimmer,htmlFor:R,children:"Description"}),(0,o.tZ)(a.B,{id:R,onChange:function(e){I.setValue(e.target.value)},css:[s.l0.width("100%"),{minHeight:s.TV.space128,maxHeight:s.TV.space256,resize:"vertical",lineHeight:s.TV.lineHeightDefault}],disabled:_.loading,placeholder:"Write something about this post"})]}),I.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(m.Z,{}),text:null===(n=I.error)||void 0===n?void 0:n.message,colorway:"negative"}):null]}),(0,o.tZ)(w,{header:"Style your description with Markdown"}),_.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(m.Z,{}),colorway:"negative",text:_.error}):null,(0,o.tZ)(u.zx,{text:_.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(_.loading||D.error||I.error),css:{alignSelf:"end"},iconLeft:(0,o.tZ)(y.Z,{})})]})}},4429:function(e,t,n){n.d(t,{O:function(){return m}});var r=n(57135),i=n(2272),o=n(96583),a=n(72006),l=n(43119),c=n(71440),s=n(86080),u=n(50216);function d(){var e=(0,l.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},h=(0,c.Ps)(d(),s.FW);function p(e){var t,n,r,i,o,a,l;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(n=t.createReplPost2)||void 0===n?void 0:n.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(o=e.data)||void 0===o||null===(a=o.createReplPost2)||void 0===a?void 0:a.__typename)?e.data.createReplPost2.message:(null===(l=e.data)||void 0===l?void 0:l.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function m(){var e=(0,i.Z)(function(e){var t=(0,a.Z)({},f,e);return u.D(h,t)}(),2),t=e[0],n=e[1],l=function(){var e=(0,r.Z)((function(e){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r=e.input,n.loading)return[2,{data:null,error:null}];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t({variables:{input:r}})];case 2:return[2,{data:(i=o.sent()).data,error:p(i)}];case 3:return o.sent(),[2,{data:null,error:"Something went wrong publishing your Repl"}];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return{publish:l,data:n.data,loading:n.loading,error:p(n)}}},24144:function(e,t,n){n.d(t,{Z:function(){return h},_:function(){return v}});var r=n(2272),i=n(74985),o=n(48306),a=n.n(o),l=n(50959),c=n(5875),s=n(21423),u=n(39059),d=n(52544),f=n(88965);function h(e){var t=(0,r.Z)(l.useState(!1),2),n=t[0],o=t[1],a=[],u=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,h=!0,p=!1,m=void 0;try{for(var g,y=e.variables[Symbol.iterator]();!(h=(g=y.next()).done);h=!0){var Z=g.value;Z.parentVariableReference===f?a.push(Z):u.push(Z)}}catch(b){p=!0,m=b}finally{try{h||null==y.return||y.return()}finally{if(p)throw m}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(s.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(t){return(0,i.tZ)(v,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})),u.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(d.Z,{filled:!1,border:!1,onClick:function(){return o((function(e){return!e}))},children:["See ",n?"Less":"More"]}),n&&u.map((function(t){return(0,i.tZ)(v,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}))]})]})]})}function p(e){var t=e.variable,n=e.expanded;return t.variablesReference>0?(0,i.tZ)("div",{css:[f.l0.transition.snappy,{transform:"rotate(".concat(n?0:-90,"deg)")}],children:(0,i.tZ)(u.Z,{})}):null}function m(e){var t=e.expanded,n=e.depth,r=e.variable;return 0===n&&!("parentVariableReference"in r)?(0,i.tZ)(p,{expanded:t,variable:r}):(0,i.tZ)("div",{css:[f.l0.flex.grow(0),f.l0.flex.shrink(0),f.l0.width(f.TV.space16),f.l0.display.flex,f.l0.align.center,f.l0.justify.end],children:(0,i.tZ)(p,{expanded:t,variable:r})})}function v(e){var t=e.depth,n=e.variable,o=e.client,c=(0,r.Z)(l.useState(!1),2),u=c[0],d=c[1],f=(0,r.Z)(l.useState([]),2),h=f[0],p=f[1];return l.useEffect((function(){u&&o.fetchVariables(n.variablesReference).then((function(e){return p(e)}),(function(){return d(!1)}))}),[u,o,n.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{onClick:function(){n.variablesReference>0&&d((function(e){return!e}))},className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" variable",children:[(0,i.tZ)(m,{expanded:u,variable:n,depth:t}),(0,i.BX)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" label",children:[n.name,n.type?(0,i.BX)("span",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" type",children:[" ",n.type]}):null,""!==n.value&&": "]}),(0,i.tZ)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" label value",children:(0,i.tZ)("pre",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]]),children:n.value})})]}),u?(0,i.tZ)(s.gC,{align:"stretch",constrainWidth:!0,children:h.map((function(e){return(0,i.tZ)(v,{depth:t+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)}))}):null,(0,i.tZ)(a(),{id:"d2db4fbc08fcf9b",dynamic:[t],children:".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);min-height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:-webkit-calc(".concat(t," * var(--space-16));padding-left:-moz-calc(").concat(t," * var(--space-16));padding-left:calc(").concat(t," * var(--space-16));font-family:var(--font-family-code)}.variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-webkit-flex:1 0 auto;-moz-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.type.__jsx-style-dynamic-selector{opacity:.5}.value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}")})]})}},59689:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(2272),i=n(74985),o=(n(50959),n(26473)),a=n(88965),l=n(53312),c=n(95141),s=n(51631),u=n(72006),d=n(43119),f=n(71440),h=n(65522),p=n(50216);function m(){var e=(0,d.Z)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var v={},g=(0,f.Ps)(m(),h.jN);var y=n(25404),Z=n(9434),b=n(95148),w=o.K.form;function x(e){var t=e.repl,n=e.source,d=e.onDone,f=(0,y.Z)(),h=f.showConfirm,m=f.showError,x=(0,r.Z)(function(e){var t=(0,u.Z)({},v,e);return p.D(g,t)}({variables:{input:{replId:t.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var r=e.unpublishReplFromCommunity,i=r.runCount,o=r.likeCount,a=r.commentCount;(0,Z.j)(Z.U3.REPL_UNPUBLISHED,{source:n,numRuns:i,numLikes:o,numComments:a,replType:t.publishedAs===s.O2.Template?"template_repl":"regular_repl"}),h("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?m(e.unpublishReplFromCommunity.message):m("An unexpected error occurred.");d()},onError:function(){m("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:t.id}),fields:{comments:function(e,t){return t.DELETE},tags:function(e,t){return t.DELETE}}})}}),2),C=x[0],k=x[1].loading;return(0,i.BX)(o.G,{css:[a.l0.colWithGap(24)],children:[(0,i.tZ)(l.xv,{variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(w,{onSubmit:function(e){e.preventDefault(),C()},css:[a.l0.colWithGap(32)],children:[(0,i.tZ)(l.xv,{children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(o.G,{css:[a.l0.rowWithGap(8),a.l0.justify.end],children:[(0,i.tZ)(o.G,{children:(0,i.tZ)(c.zx,{type:"button",text:"Cancel",onClick:function(){return d()}})}),(0,i.tZ)(o.G,{children:(0,i.tZ)(c.zx,{disabled:k,colorway:"negative",text:k?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(b.Z,{})})})]})]})]})}},48940:function(e,t,n){n.d(t,{d:function(){return l}});var r=n(43119),i=n(71440),o=n(77068);function a(){var e=(0,r.Z)(["\n  fragment BulkDeleteConfirmationModalRepl on Repl {\n    id\n    iconUrl\n    title\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ...BuildStatusBadgeHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o.u)},54016:function(e,t,n){var r=n(74985),i=n(50959),o=n(21651),a=n(26473),l=n(53312),c=n(88965),s=n(50769),u=n(95141),d=n(2580),f=n(56123),h=n(61025),p=n(71818),m=n(55418),v=n(79824),g=n(20685),y=(0,h.X)({wrapper:[c.l0.colWithGap(16)],repls:[c.l0.maxHeight("60vh"),c.l0.overflow("auto"),{"& > div":[c.l0.py(8),{borderTop:"1px solid "+c.TV.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+c.TV.outlineDimmest}}],row:[c.l0.colWithGap(8)],replRow:[c.l0.rowWithGap(8),c.l0.align.center],additionalReplsCount:[c.l0.pl(12),c.l0.pt(8)],buttons:[c.l0.rowWithGap(12),c.l0.justify.end]}),Z=function(e){var t,n=e.repl,o=e.onConfirmedChange,c=(0,i.useState)(""),s=c[0],u=c[1],d="HostingDeployment"===(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)?n.hostingDeployment:null,h=(0,i.useRef)(!1);return(0,r.BX)(a.G,{css:y.row,children:[(0,r.BX)(a.G,{css:y.replRow,children:[(0,r.tZ)(f.ZP,{size:24,iconUrl:n.iconUrl,alt:""}),(0,r.tZ)(l.xv,{height:"singleLine",multiline:!1,children:n.title}),d?(0,r.tZ)(p.e,{deployment:d}):null]},n.id),d?(0,r.BX)(r.HY,{children:[(0,r.tZ)(m.E,{icon:(0,r.tZ)(v.Z,{}),colorway:"red",text:"This repl has been deployed. If you delete this Repl, the associated\nproduction deployment will also be shut down and deleted. To\nproceed, please type: ".concat(d.replitAppSubdomain)}),(0,r.tZ)(g.II,{placeholder:"Type here",value:s,onChange:function(e){var t=e.currentTarget.value;u(t);var n=t===d.replitAppSubdomain;n!==h.current&&o(n),h.current=n}})]}):null]})};t.Z=function(e){var t=e.selectedRepls,n=e.isOpen,c=e.onClose,f=e.onDelete,h=e.deleting,p=t.length,m=(0,s.Z)("Repl",p),v=t.filter((function(e){var t;return"HostingDeployment"===(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)})).length,g=(0,s.Z)("Deployment",v),b=v>0?" & ".concat(v>1?v+" ":""," ").concat(g):"",w=(0,i.useState)(0),x=w[0],C=w[1];return(0,i.useEffect)((function(){n||C(0)}),[n]),(0,r.tZ)(o.u,{isOpen:n,onRequestClose:c,children:(0,r.BX)(a.G,{css:y.wrapper,children:[(0,r.BX)(l.h4,{variant:"subheadBig",level:2,children:["Delete ",m,v>0?" & ".concat(g):"","?"]}),(0,r.tZ)(l.xv,{color:"dimmer",children:"Are you sure? This cannot be undone. Some Repls may take a few minutes to finish deleting."}),(0,r.tZ)(a.G,{css:y.repls,children:t.map((function(e){return(0,r.tZ)(Z,{css:y.row,repl:e,onConfirmedChange:function(e){return C((function(t){return t+(e?1:-1)}))}},e.id)}))}),(0,r.BX)(a.G,{css:y.buttons,children:[(0,r.tZ)(u.zx,{text:"Cancel",onClick:c,disabled:h}),(0,r.tZ)(u.zx,{iconLeft:(0,r.tZ)(d.Z,{}),onClick:f,disabled:h||x<v,text:"Yes, delete ".concat(p>1?p+" ":""," ").concat(m).concat(b),colorway:"negative"})]})]})})}},7551:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(72006),i=n(4405),o=n(77637),a=n(74985),l=n(43312),c=n(50959),s=n(38029),u=n(26473),d=n(20685),f=n(88965),h=n(53312),p=n(27773),m=n(44385),v=n(28696),g=n(79824);var y={success:(0,l.iv)({":not([disabled])":{borderColor:f.TV.accentPositiveStrongest}}),error:(0,l.iv)({":not([disabled])":{borderColor:f.TV.accentNegativeStrongest}}),warning:(0,l.iv)({":not([disabled])":{borderColor:f.TV.yellowStrongest}}),default:void 0,loading:void 0},Z={success:(0,l.iv)([{color:f.TV.accentPositiveStrongest}]),error:(0,l.iv)([{color:f.TV.accentNegativeStrongest}]),warning:(0,l.iv)([{color:f.TV.yellowStrongest}]),default:void 0,loading:void 0},b={success:(0,a.tZ)(m.Z,{}),error:(0,a.tZ)(v.Z,{}),warning:(0,a.tZ)(g.Z,{}),default:void 0,loading:(0,a.tZ)(p.Z,{})},w=function(e){var t=b[e.state];return(0,a.BX)(u.G,{css:[Z[e.state],f.l0.rowWithGap(4)],children:[c.isValidElement(t)?c.cloneElement(t,{size:12}):null,(0,a.tZ)(h.xv,{variant:"small",multiline:!1,children:e.message})]})},x=(0,l.iv)("display:grid;grid-gap:",f.TV.space8,";grid-template-areas:'label . status'\n    'input input input'\n    'validation validation validation'\n    'details details details';> .label{grid-area:label;}> .status{grid-area:status;}> .input{grid-area:input;}> .details{grid-area:details;}> .validation{grid-area:validation;}"),C=function(e){var t,n=e.id,l=e.label,c=e.status,u=e.description,p=e["aria-describedby"],m=e.error,v=e.isValid,g=e.touched,b=e.value,C=e.warning,k=e.successText,S=(0,o.Z)(e,["id","label","status","description","aria-describedby","error","isValid","touched","value","warning","successText"]),E=(0,s.U)(),T=n||E("input"),R=c&&E("status"),D=u?E("description"):void 0,I=[R,D,p].filter(Boolean).join(" "),_=!(t={description:u,error:m,isValid:v,touched:g,value:b,warning:C,successText:k}).touched&&t.description?{state:"default",message:t.description}:t.error?{message:t.error.message,state:"error"}:t.warning?{message:t.warning.message,state:"warning"}:t.isValid?{message:t.successText||"",state:"success"}:t.touched?{message:"",state:"loading"}:void 0;return(0,a.BX)("div",{css:x,children:[(0,a.tZ)("label",{htmlFor:T,className:"label",children:(0,a.tZ)(h.xv,{variant:"small",color:"dimmer",multiline:!1,children:l})}),c?(0,a.tZ)(h.xv,{multiline:!1,variant:"small",color:"dimmer",css:[f.l0.textAlign.right],className:"status",children:c}):null,(0,a.tZ)(d.II,(0,i.Z)((0,r.Z)({id:T,className:"input",value:b,css:[y[(null===_||void 0===_?void 0:_.state)||"default"]]},S),{"aria-describedby":I,"aria-invalid":"error"===(null===_||void 0===_?void 0:_.state)})),(0,a.tZ)("div",{id:D,className:"validation",css:[Z[(null===_||void 0===_?void 0:_.state)||"default"]],"aria-live":"default"!==(null===_||void 0===_?void 0:_.state)?"polite":void 0,children:_?(0,a.tZ)(w,(0,r.Z)({},_)):null})]})}},2088:function(e,t,n){var r=n(72006),i=n(4405),o=n(74985),a=n(43312),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},c=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),s=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),u=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");t.Z=function(e){var t=e.height,n=void 0===t?24:t,a=e.color,d=void 0===a?"#F26207":a,f=e.slow,h=void 0!==f&&f,p={width:84,height:64,fill:d,rx:12};return(0,o.BX)("svg",{width:n/1.2,height:n,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(h),{animationName:c}]},p),{x:8,y:8})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(h),{animationName:s}]},p),{x:108,y:88})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(h),{animationName:u}]},p),{x:8,y:168}))]})}},23007:function(e,t,n){n.d(t,{J:function(){return y}});var r=n(72006),i=n(4405),o=n(77637),a=n(74985),l=n(50959),c=n(43312),s=n(90843),u=n(61025),d=n(6108),f=n(94979),h=n(88965),p=n(61623),m=n(26473),v=(0,c.F4)("from{opacity:0}to{opacity:1}"),g=(0,u.X)({self:[h.l0.flex.row,h.l0.flex.growAndShrink(1),h.l0.height(h.TV.space12),h.l0.borderRadius(16),h.l0.position.relative,d.gU.filledAndOutlined],progressWrapper:[h.l0.flex.row,h.l0.flex.growAndShrink(1),h.l0.height("100%"),h.l0.width("100%"),h.l0.borderRadius(16),h.l0.overflow("clip"),h.l0.position.relative],progress:[h.l0.position.relative,h.l0.width("100%"),h.l0.height("100%"),{top:0,left:0}],loading:f.p.backgroundPulse(),smoke:[h.l0.width("100%"),h.l0.height("500%"),h.l0.position.absolute,h.l0.left("50%"),h.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(v," 120ms forwards ease-out alternate")}});function y(e){var t=e.total,n=e.tooltip,c=e.className,u=e.disabled,d=void 0!==u&&u,f=e.smoke,h=void 0!==f&&f,v=e.loading,y=void 0!==v&&v,b=e.tooltipHidden,w=void 0!==b&&b,x=(0,o.Z)(e,["total","tooltip","className","disabled","smoke","loading","tooltipHidden"]),C=!(0,s.T)(),k=null;if(n)k=n;else if("current"in x)k="".concat(x.current||"0","/").concat(t);else if("data"in x){var S;k=null===(S=x.data)||void 0===S?void 0:S.map((function(e){var n=e.current;return"".concat(n||"0","/").concat(t)})).join(" | ")}return(0,a.tZ)(p.u,{placement:"top",tooltip:k,maxWidth:280,isDisabled:y||w,children:function(e,n){var o;if(y)o=null;else if("current"in x&&x.current)o=(0,a.tZ)(Z,{total:t,disabled:d,current:x.current,color:x.color});else if("data"in x){var s;o=null===(s=x.data)||void 0===s?void 0:s.map((function(e,n){var o;return(0,l.createElement)(Z,(0,i.Z)((0,r.Z)({},e),{key:"measure-bar-".concat(n),total:t,disabled:d,isLast:n+1===(null===(o=x.data)||void 0===o?void 0:o.length)}))}))}return(0,l.createElement)(m.G,(0,i.Z)((0,r.Z)({},e),{css:[g.self,g.fadeInAnim,y&&g.loading],className:c,innerRef:n,onClick:void 0,key:y?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group",children:[(0,a.tZ)(m.G,{css:g.progressWrapper,children:o},"measureBarProgress"),C?(0,a.tZ)("img",{src:"/public/images/smoke.gif",alt:"",style:{opacity:h?void 0:0},css:g.smoke},"measureBarSmoke"):null]}))}})}function Z(e){var t=e.current,n=e.total,i=e.color,o=void 0===i?h.TV.accentPrimaryDefault:i,l=e.disabled,c=void 0!==l&&l,s=e.isLast,u=void 0!==s&&s,d=(0,r.Z)({backgroundColor:c?h.TV.outlineDefault:o,width:b(t,n)+"%"},u?{borderTopRightRadius:h.TV.borderRadiusRound,borderBottomRightRadius:h.TV.borderRadiusRound}:{});return(0,a.tZ)(m.G,{css:g.progress,style:d,role:"meter","aria-label":"".concat(t," out of ").concat(n),"aria-valuemin":0,"aria-valuenow":t,"aria-valuemax":n})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===t||0===e?0:Math.max(0,Math.min(100,e/t*100))}},59893:function(e,t,n){n.d(t,{T:function(){return u}});var r=n(72006),i=n(4405),o=n(77637),a=n(74985),l=(n(50959),n(26473)),c=n(95134),s=l.K.button;function u(e){var t=e.iconLeft,n=e.iconRight,l=e.text,u=e.innerRef,d=e.colorway,f=(0,o.Z)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.BX)(s,(0,i.Z)((0,r.Z)({ref:u},f),{css:[(0,c.E)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!t,iconRight:!!n}),{color:"inherit"}],children:[t,(0,a.tZ)("span",{children:l}),n]}))}},51971:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(50959),i=n(28435);function o(){var e=(0,i.Z)().container,t=(0,r.useState)(e.getConnectionState()),n=t[0],o=t[1];return(0,r.useEffect)((function(){return e.onConnectionStateChanged(o)}),[e]),n}},40193:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(57135),i=n(2272),o=n(96583),a=n(50959),l=n(68408),c=n(51467);function s(e){var t=(0,l.Z)({container:e,service:"exec"}).channel,n=(0,a.useRef)(!1),s=(0,a.useRef)([]),u=(0,c.Z)((0,r.Z)((function(){var e,r,a,l,c,d,f,h,p,m;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(n.current)return[2];if(!s.current.length)return[2];if("open"!==(null===t||void 0===t?void 0:t.status))return[2];if(!(e=s.current.pop()))throw new Error("Expected request");return r=(0,i.Z)(e,2),a=r[0],l=a.args,c=a.env,d=r[1],f="",h=t.onCommand((function(e){e.output&&(f+=e.output)})),n.current=!0,[4,t.request({exec:{args:l,env:c}})];case 1:return p=o.sent(),n.current=!1,h(),m=p.channelClosed?"Channel closed":p.error,d(m?{error:m,output:f||null}:{output:f,error:null}),u.current(),[2]}}))}))),d=null===t||void 0===t?void 0:t.status;return(0,a.useEffect)((function(){"open"===d&&u.current()}),[d,u]),(0,a.useCallback)((function(e){var t=e.args,n=e.env;return new Promise((function(e){s.current.push([{args:t,env:n},e]),u.current()}))}),[u])}},67043:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(2272),i=n(50959),o=n(28435),a=n(44267);function l(){var e,t,n=(0,o.Z)().container,l=(0,r.Z)(i.useState(null!==(t=null===(e=n.getContext())||void 0===e?void 0:e.repl)&&void 0!==t?t:null),2),c=l[0],s=l[1];return i.useEffect((function(){return n.onConnectionStateChanged((function(e){var t,r;e===a.em.CONNECTED&&s(null!==(r=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==r?r:null)}))}),[s,n]),c}},83422:function(e,t,n){n.d(t,{H:function(){return sr}});var r,i=n(57135),o=n(72006),a=n(96583),l=n(44267),c=n(22946);!function(e){e.USER_JOIN="USER_JOIN",e.USER_LEAVE="USER_LEAVE",e.USERS_UPDATE="USERS_UPDATE",e.USER_OPENED_FILE="USER_OPENED_FILE",e.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED"}(r||(r={}));var s=n(9970),u=n(19499),d=n(72098);var f=n(27327),h=n(87978),p=n(81202),m=n.n(p);function v(e){var t=e.container,n=e.onCommand,o=function(e){m()(p,e)||(p=e,l.emit(r.FOLLOWED_USER_CHANGED,e))},l=(0,f.ZP)();l.setMaxListeners(1/0);var c=[],p=null,v=[],g={},y=null;function Z(){return b.apply(this,arguments)}function b(){return(b=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return y?[2,y]:[2,new Promise((function(e){l.once(r.USERS_UPDATE,(function(){if(!y)throw new Error("Expected presenceChannel to be set");e(y)}))}))]}))}))).apply(this,arguments)}function w(){return(w=(0,i.Z)((function(e){var t,n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:if((null===p||void 0===p?void 0:p.username)===e)throw new Error("Already following user with username ".concat(e));return p?[4,x()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[4,Z()];case 3:return t=r.sent(),(n=c.find((function(t){return t.username===e})))?(o(n),n.sessions.forEach((function(e){t.send({followUser:{session:e.id}})})),[2]):[2]}}))}))).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,i.Z)((function(){var e,t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:if(!p)throw new Error("No user to unfollow");return e=p,o(null),[4,Z()];case 1:return t=n.sent(),e.sessions.forEach((function(e){t.send({unfollowUser:{session:e.id}})})),[2]}}))}))).apply(this,arguments)}return t.openChannel({service:"presence",name:"presencer"},(function(e){var t=e.channel;return t.onCommand((function(e){null===n||void 0===n||n(e);var t={cmd:e,emitter:l,activeUsers:c,userIdToFile:g,followedUser:p,setFollowedUser:o,followingUsers:v};switch(e.body){case"roster":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=e.followedUser,l=e.followingUsers,c=e.setFollowedUser,u=t.roster;if(u){var f=u.user,h=u.files;if(f&&h){var p=new Set;if(i.splice(0,i.length),f.forEach((function(e){if(e.id&&e.name&&e.roles&&!p.has(e.id)){var t=h.filter((function(t){return t.userId===e.id})).map((function(e){if(!e.session||!e.timestamp)throw new Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,d.gs)(e.timestamp)}}));i.push({id:e.id,username:e.name,roles:e.roles,color:(0,d.i7)(i),sessions:t}),p.add(e.id)}})),i.forEach((function(e){o[e.id]=(0,d.f0)(e)})),n.emit(r.USERS_UPDATE,(0,s.Z)(i)),l.filter((function(e){return!i.some((function(t){return t.id===e.id}))})).forEach((function(e){var t=l.indexOf(e);-1!==t&&(l.splice(t,1),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,s.Z)(l),user:e,type:"unfollow"}))})),a)if(i.some((function(e){return e.id===a.id}))){var m=o[a.id];n.emit(r.USER_OPENED_FILE,{user:a,file:m})}else c(null)}}}(t);break;case"join":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=t.join;if(a.id&&a.name&&a.roles&&a.session){var l=i.find((function(e){return e.id===a.id})),c=Math.floor(Date.now()/1e3),f=u.google.protobuf.Timestamp.create({seconds:c}),h=(0,d.gs)(f);if(l)l.sessions.push({id:a.session,activeFile:null,timestamp:h});else{var p={id:a.id,username:a.name,roles:a.roles,color:(0,d.i7)(i),sessions:[{id:a.session,activeFile:null,timestamp:h}]};o[a.id]=null,i.push(p),n.emit(r.USER_JOIN,p),n.emit(r.USERS_UPDATE,(0,s.Z)(i))}}}(t);break;case"part":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=e.followedUser,l=e.followingUsers,c=e.setFollowedUser;if(t.part&&t.part.id&&t.part.session){var u=t.part,f=u.id,h=u.session,p=i.findIndex((function(e){return e.id===f})),m=i[p];if(1===m.sessions.length){i.splice(p,1),delete o[m.id],n.emit(r.USER_LEAVE,m),n.emit(r.USERS_UPDATE,(0,s.Z)(i)),a&&c(null);var v=l.findIndex((function(e){return e.id===m.id}));-1!==v&&(l.splice(v,1),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,s.Z)(l),user:m,type:"unfollow"}))}else{m.sessions=m.sessions.filter((function(e){return e.id!==h}));var g=(0,d.f0)(m);o[m.id]!==g&&(o[m.id]=g,n.emit(r.USER_OPENED_FILE,{user:m,file:g}))}}}(t);break;case"fileOpened":!function(e){var t=e.emitter,n=e.cmd,i=e.activeUsers,o=e.userIdToFile;if(n.fileOpened){var a=n.fileOpened,l=a.userId,c=a.file,s=a.timestamp,u=a.session,f=c||null;if(!l||!s)throw new Error("Expected userId and timestamp associated with file opened command");var h=i.find((function(e){return e.id===l}));if(!h)throw new Error("Expected user with ID ".concat(l));var p=h.sessions.find((function(e){return e.id===u}));if(!p)throw new Error("Expected session with ID ".concat(p));p.activeFile=f,p.timestamp=(0,d.gs)(s),o[l]=f,t.emit(r.USER_OPENED_FILE,{user:h,file:f})}}(t);break;case"followUser":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.followingUsers,a=t.followUser;if(!a.session)throw new Error("Expected session associated with follow user");var l=a.session,c=(0,d.N5)(l,i);o.some((function(e){return e.id===c.id}))||(o.push(c),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,s.Z)(o),user:c,type:"follow"}))}(t);break;case"unfollowUser":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.followingUsers,a=t.unfollowUser;if(!a.session)throw new Error("Expected session associated with follow user");var l=a.session,c=(0,d.N5)(l,i),u=o.findIndex((function(e){return e.id===c.id}));-1!==u&&(o.splice(u,1),n.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,s.Z)(o),user:c,type:"unfollow"}))}(t);break;case"sessionTimestampUpdated":!function(e){var t=e.cmd,n=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=t.sessionTimestampUpdated;if(!a.session||!a.timestamp)throw new Error("Expected session and tiemstamp associated with update");var l=a.session,c=(0,d.N5)(l,i),s=o[c.id],u=c.sessions.find((function(e){return e.id===l}));if(!u)throw new Error("Expected user ".concat(c.id," to have a session with ID ").concat(l));u.timestamp=(0,d.gs)(a.timestamp);var f=u.activeFile;f!==s&&(o[c.id]=f,n.emit(r.USER_OPENED_FILE,{user:c,file:f}))}(t)}})),y=t,function(){y=null}})),{onUserLeave:function(e){return l.on(r.USER_LEAVE,e),function(){l.removeListener(r.USER_LEAVE,e)}},onUserJoin:function(e){return l.on(r.USER_JOIN,e),function(){l.removeListener(r.USER_LEAVE,e)}},onActiveUsersChange:function(e){return l.on(r.USERS_UPDATE,e),function(){l.removeListener(r.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return l.on(r.USER_OPENED_FILE,e),function(){l.removeListener(r.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return l.on(r.FOLLOWED_USER_CHANGED,e),function(){l.removeListener(r.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return l.on(r.FOLLOWING_USERS_CHANGED,e),function(){l.removeListener(r.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var t=g[e];if("undefined"===typeof t)throw new Error("Expected file for user with ID ".concat(e," to be defined"));return t},updateOpenFile:function(e){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,Z()];case 1:return t.sent().send({openFile:{file:e}}),[2]}}))}))()},updateSessionTimestamp:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,Z()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}}))}))()},followUser:function(e){return w.apply(this,arguments)},unfollowUser:x,getActiveUsers:function(){return c},getFollowedUser:function(){return p},getFollowingUsers:function(){return v},getUserIdToFile:function(){return g},getPathToUserIds:function(){var e=new Map;function t(n,r){var i;if(""!==n){e.has(n)||e.set(n,[]);var o=e.get(n);if(!o)throw new Error("Expected user Ids");o.some((function(e){return e===r}))||(null===(i=e.get(n))||void 0===i||i.push(r),t((0,h.Il)(n),r))}}return c.forEach((function(e){var n=e.id,r=g[n];r&&t(r,n)})),e}}}var g,y=n(4405);!function(e){e.DEEPLINK_CHANGED="DEEPLINK_CHANGED",e.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED"}(g||(g={}));var Z=n(4520),b=n(97746),w=n(46335),x=n(43182),C=n(32902);var k,S=n(2272);!function(e){e.MESSAGE_RECEIVED="MESSAGE_RECEIVED"}(k||(k={}));var E=n(50968),T=n(81962),R=n(10310),D=n(66091),I=n(7131),_="{".charCodeAt(0),B="}".charCodeAt(0),G="[".charCodeAt(0),P="]".charCodeAt(0),A='"'.charCodeAt(0),N="\\".charCodeAt(0);var U=n(91620).lW,L=new TextEncoder,O=new TextDecoder,X="\r".charCodeAt(0),M="\n".charCodeAt(0);var F=function(){var e=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source;return RegExp("(".concat(e,"\\r\\n)*(").concat(e,")$"),"i")}();function W(e,t,n){var r=O.decode(e.slice(0,t));try{return{json:JSON.parse(r),buffer:e.slice(t)}}catch(c){var i=U.from(e).toString();if((0,T.Z)(c,SyntaxError)&&"Unexpected end of JSON input"===c.message){I.kg.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:t,rpcContent:r,attempt:"original-length",headers:JSON.stringify(n)});var o=function(e,t){for(var n=0,r=0,i=!1,o=t;o<e.length+1;o++){if(o!==t&&!n&&!r&&!i)return o;var a=e[o];switch(a){case N:o++;continue;case A:i=!i;continue}if(!i)switch(a){case _:n++;break;case B:n--;break;case G:r++;break;case P:r--}}return-1}(e,0);if(-1!==o){var a=e.slice(0,o),l=O.decode(a);try{return{json:JSON.parse(l),buffer:e.slice(o)}}catch(s){I.kg.error("Failed to parse LSP message",{givenError:s,buffer:i,length:t,rpcContent:r,attempt:"recomputed-length"})}}}else I.kg.error("Failed to parse LSP message",{givenError:c,buffer:i,length:t,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(t)}}}var H=function(){"use strict";function e(t){(0,D.Z)(this,e),this.onMessage=t,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var t=e.prototype;return t.consumeHeaders=function(){var e=function(e){var t=e.findIndex((function(t,n){return t===X&&e[n+1]===M&&e[n+2]===X&&e[n+3]===M}));if(-1!==t){var n=O.decode(e.slice(0,t)),r=n.match(F);if(!r)throw I.kg.error("Failed to parse LSP header, no matches",{fragment:n}),new Error("Unable to match header, text: ".concat(n));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,c=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=d.indexOf(":");if(-1===f)throw I.kg.error("Failed to parse LSP header, missing colon",{fragment:n}),new Error('Message header must separate key and value using ":"');var h=d.substr(0,f),p=d.substr(f+1).trim();if("Content-Length"===h){var m=parseInt(p,10);if(isNaN(m))throw I.kg.error("Failed to parse LSP header, NaN content length",{fragment:n}),new Error("Content-Length value must be a number.");i[h]=parseInt(p,10)}else i[h]=p}}catch(v){l=!0,c=v}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}if(null==i["Content-Length"])throw I.kg.error("Failed to parse LSP header, no Content-Length",{fragment:n}),new Error("Header must provide a Content-Length property.");return{headerLength:t,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},t.read=function(e){var t;for(this.buffer=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(this.buffer,L.encode(e));null!==(t=this.headers)&&void 0!==t?t:this.headers=this.consumeHeaders();){var n=this.headers.value["Content-Length"];if(this.buffer.length<n)return;var r=W(this.buffer,n,this.headers),i=r.json,o=r.buffer;if(this.headers=void 0,this.buffer=o,void 0!==i)try{this.onMessage(i)}catch(a){x.Tb(a)}}},e}();function V(e,t){var n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:if(e.length!==t.length)return[2];n=0,r.label=1;case 1:return n<e.length?[4,[e[n],t[n]]]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}var z=n(91620).lW;function j(e){var t,n=e.channel,r=e.beforeRun,l=e.isUsingOutputsRunner,c=function(){h.current="terminated",p.current=[],m.current=[],g.current=null,b.handleDebugSessionEnded(),w.current=!1},d=function(e){return Z.on("started",e),function(){Z.removeListener("started",e)}},h=(0,E.u)("terminated"),p=(0,E.u)([]),m=(0,E.u)([]),v=(0,E.u)(new Map),g=(0,E.u)(null),Z=(0,f.ZP)(),b=function(e,t){var n=function(){var e=new Map,t=new Set,n=!0,i=!1,o=void 0;try{for(var a,s=r.entries()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=(0,S.Z)(a.value,2),d=u[0],f=u[1];if(0!==f.length){var h=[],p=!0,m=!1,v=void 0;try{for(var g,y=f[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var Z=g.value;if(Z.breakpointId&&Z.line){var b=c.get(Z.breakpointId),w=void 0===b?void 0:l.get(b);w&&t.add(b),h.push({dapId:b,pid1Id:Z.breakpointId,line:w&&w.line||Z.line,verified:Boolean(null===w||void 0===w?void 0:w.verified),logMessage:Z.logMessage||void 0})}}}catch(H){m=!0,v=H}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}e.set(d,h)}}}catch(H){i=!0,o=H}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}var x=!0,C=!1,k=void 0;try{for(var E,T=l.entries()[Symbol.iterator]();!(x=(E=T.next()).done);x=!0){var D,I,_=(0,S.Z)(E.value,2),B=_[0],G=_[1];if(!t.has(B)){var P=(0,R.IT)((null===(D=G.source)||void 0===D?void 0:D.path)||(null===(I=G.source)||void 0===I?void 0:I.name)||""),A=G.line;if(P&&A){var N=e.get(P);N||(N=[],e.set(P,N));var U=!1,L=!0,O=!1,X=void 0;try{for(var M,F=N[Symbol.iterator]();!(L=(M=F.next()).done);L=!0){var W=M.value;if(W.line===G.line){W.dapId=B,W.verified=G.verified,U=!0;break}}}catch(H){O=!0,X=H}finally{try{L||null==F.return||F.return()}finally{if(O)throw X}}U||N.push({dapId:B,line:A,verified:G.verified})}}}}catch(H){C=!0,k=H}finally{try{x||null==T.return||T.return()}finally{if(C)throw k}}return e},r=new Map,l=new Map,c=new Map;function s(){return(s=(0,i.Z)((function(t){var n,i,s,u,d,f,h;return(0,a.__generator)(this,(function(p){switch(p.label){case 0:n=!0,i=!1,s=void 0,p.label=1;case 1:p.trys.push([1,6,7,8]),u=function(){var n,r,i,s,u,d,p,m,v,g,y,Z,b,w,x,C,k,E,T,R,D,I,_,B,G,P,A,N,U,L,O,X,M,F,W;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=(0,S.Z)(f.value,2),r=n[0],i=n[1],void 0!==t&&t!==r?[2,"continue"]:[4,e({command:"setBreakpoints",arguments:{source:{name:r,path:r},breakpoints:i.map((function(e){return{line:e.line,logMessage:e.logMessage||void 0}}))}})];case 1:if(!(s=a.sent()).success)return[2,"continue"];u=!0,d=!1,p=void 0;try{for(m=l[Symbol.iterator]();!(u=(v=m.next()).done);u=!0){g=(0,S.Z)(v.value,2),y=g[0],Z=g[1],(null===(b=Z.source)||void 0===b?void 0:b.name)===r&&l.delete(y),w=!0,x=!1,C=void 0;try{for(k=c[Symbol.iterator]();!(w=(E=k.next()).done);w=!0)T=(0,S.Z)(E.value,2),R=T[0],T[1]===y&&c.delete(R)}catch(h){x=!0,C=h}finally{try{w||null==k.return||k.return()}finally{if(x)throw C}}}}catch(h){d=!0,p=h}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}D=s,I=!0,_=!1,B=void 0;try{for(G=D.body.breakpoints[Symbol.iterator]();!(I=(P=G.next()).done);I=!0)null!=(A=P.value).id&&l.set(A.id,(0,o.Z)({source:{name:r,path:r}},A))}catch(h){_=!0,B=h}finally{try{I||null==G.return||G.return()}finally{if(_)throw B}}N=!0,U=!1,L=void 0;try{for(O=V(i,D.body.breakpoints)[Symbol.iterator]();!(N=(X=O.next()).done);N=!0)M=(0,S.Z)(X.value,2),F=M[0],W=M[1],F.breakpointId&&null!=W.id&&c.set(F.breakpointId,W.id)}catch(h){U=!0,L=h}finally{try{N||null==O.return||O.return()}finally{if(U)throw L}}return[2]}}))},d=r.entries()[Symbol.iterator](),p.label=2;case 2:return(n=(f=d.next()).done)?[3,5]:[5,(0,a.__values)(u())];case 3:p.sent(),p.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return h=p.sent(),i=!0,s=h,[3,8];case 7:try{n||null==d.return||d.return()}finally{if(i)throw s}return[7];case 8:return[2]}}))}))).apply(this,arguments)}return{findPathByBreakpointId:function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=r.entries()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,S.Z)(o.value,2),c=l[0];if(l[1].some((function(t){return t.breakpointId===e})))return c}}catch(s){n=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null},getBreakpoints:n,flush:function(e){return s.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var r=e.body,i=r.reason,a=r.breakpoint,c=a.id;if(null!==c&&void 0!==c){switch(i){case"changed":case"new":l.set(c,(0,o.Z)({},l.get(c),a));break;case"removed":l.delete(c);break;default:return}t(n())}},handlePID1BreakpointEvent:function(e){var i=e.absolutePath?(0,R.IT)(e.absolutePath):null;i&&(r.set(i,e.breakpoints||[]),t(n()))},handleDebugSessionEnded:function(){l.clear(),c.clear();var e=!0,i=!1,o=void 0;try{for(var a,s=r.entries()[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var u=(0,S.Z)(a.value,2),d=u[0];0===u[1].length&&r.delete(d)}}catch(f){i=!0,o=f}finally{try{e||null==s.return||s.return()}finally{if(i)throw o}}t(n())}}}(_,(function(e){v.current=e})),w=(0,E.u)(!1),x=[],C=new H((function(e){if(x.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":h.current="running";break;case"stopped":var t;h.current="paused",g.current=null!==(t=e.body.threadId)&&void 0!==t?t:null,Z.emit("paused",e.body.reason),function(){A.apply(this,arguments)}();break;case"breakpoint":b.handleDAPBreakpointEvent(e)}else if("response"===e.type){var n=e,r=k.get(n.request_seq);r&&(k.delete(n.request_seq),r(e))}})),k=new Map,D=100,I=!1;function _(e){return B.apply(this,arguments)}function B(){return(B=(0,i.Z)((function(e){return(0,a.__generator)(this,(function(t){return[2,new Promise((function(t){var r=D++;k.set(r,t);var i=(0,y.Z)((0,o.Z)({},e),{type:"request",seq:r});x.push({time:Date.now(),direction:"out",data:i});var a={debugInput:{session:"main",adapterInput:q(i)}};x.push({time:Date.now(),direction:"out",data:a}),n.send(a)}))]}))}))).apply(this,arguments)}function G(e){return P.apply(this,arguments)}function P(){return(P=(0,i.Z)((function(e){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return x.push({time:Date.now(),direction:"out",data:e}),[4,n.request(e)];case 1:if(t=r.sent(),x.push({time:Date.now(),direction:"in",data:t}),t.error)throw t.error;return[2,t]}}))}))).apply(this,arguments)}function A(){return A=(0,i.Z)((function(){var e,t,n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return p.current=[],m.current=[],[4,_({command:"stackTrace",arguments:{threadId:g.current}})];case 1:return(e=r.sent()).success?(p.current=e.body.stackFrames,0===p.current.length?[2]:[4,_({command:"scopes",arguments:{frameId:p.current[0].id}})]):[2];case 2:return(t=r.sent()).success?[4,Promise.all(t.body.scopes.map((function(e){return _({command:"variables",arguments:{variablesReference:e.variablesReference}}).then((function(t){return{response:t,parentVariableReference:e.variablesReference}}))})))]:[2];case 3:return n=r.sent(),m.current=n.filter((function(e){return e.response.success})).reduce((function(e,t){var n=t.response,r=t.parentVariableReference;return e.concat(n.body.variables.map((function(e){return(0,y.Z)((0,o.Z)({},e),{parentVariableReference:r})})))}),[]),[2]}}))})),A.apply(this,arguments)}function N(e){return U.apply(this,arguments)}function U(){return U=(0,i.Z)((function(e){var t,i,o,c,s,u,d;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if("terminated"!==h.current)throw new Error("Cant start while debugger is already running");return h.current="preinitializing",p.current=[],[4,r()];case 1:return a.sent(),"stopping"===h.current?(h.current="terminated",[2]):(I=!0,h.current="initializing",o={session:"main",readOnly:!1},e&&(o.debuggerId=e.debuggerOption.id,e.filePath&&(o.filePath=e.filePath)),c={debugMain:o},x.push({time:Date.now(),direction:"out",data:c}),[4,n.request(c)]);case 2:return s=a.sent(),x.push({time:Date.now(),direction:"in",data:s}),s.error?(Z.emit("output",s.error),l||(h.current="terminated"),[2]):[4,_({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:return(u=a.sent()).success?(w.current=Boolean(null===(t=u.body)||void 0===t?void 0:t.supportsStepBack),d=!(null===(i=u.body)||void 0===i?void 0:i.supportsConfigurationDoneRequest),[4,b.flush()]):(h.current="terminated",[2]);case 4:return a.sent(),d?[3,6]:[4,_({command:"configurationDone"})];case 5:a.sent(),a.label=6;case 6:return"initializing"===h.current&&(h.current="running"),Z.emit("started",d),[2]}}))})),U.apply(this,arguments)}function L(e,t){return O.apply(this,arguments)}function O(){return O=(0,i.Z)((function(e,t){var n,r,i,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=t.line,r=t.otIndex,i=t.otVersion,o=t.logMessage,[4,G({debugAddBreakpointRequest:{path:(0,R.om)(e)||e,line:n,otIndex:r,otVersion:i,logMessage:o}})];case 1:return a.sent(),"terminated"===h.current?[3,3]:[4,b.flush(e)];case 2:a.sent(),a.label=3;case 3:return Z.emit("breakpoint","added"),[2]}}))})),O.apply(this,arguments)}function X(e){return M.apply(this,arguments)}function M(){return(M=(0,i.Z)((function(e){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return t=b.findPathByBreakpointId(e),[4,G({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:return n.sent(),"terminated"!==h.current&&t?[4,b.flush(t)]:[3,3];case 2:n.sent(),n.label=3;case 3:return Z.emit("breakpoint","removed"),[2]}}))}))).apply(this,arguments)}function F(){return(F=(0,i.Z)((function(e,t){var n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return(n=b.findPathByBreakpointId(e))?[4,G({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:t.logMessage}})]:[2];case 1:return r.sent(),"terminated"===h.current?[3,3]:[4,b.flush(n)];case 2:r.sent(),r.label=3;case 3:return Z.emit("breakpoint","updated"),[2]}}))}))).apply(this,arguments)}function W(){return W=(0,i.Z)((function(e,t){var n,r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return(i=null===(r=null===(n=v.current.get(e))||void 0===n?void 0:n.find((function(e){return e.line===t.line&&void 0!==e.pid1Id})))||void 0===r?void 0:r.pid1Id)?[4,X(i)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,L(e,t)];case 3:o.sent(),o.label=4;case 4:return[2]}}))})),W.apply(this,arguments)}return n.onCommand((function(e){var t,n;x.push({time:Date.now(),direction:"in",data:e});var r=e.debugOutput,i=e.debugState,o=e.debugBreakpointEvent,a=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&C.read(r.adapterOutput),r.output&&Z.emit("output",r.output)}if(o&&b.handlePID1BreakpointEvent(o),i&&i.state===u.api.State.Stopped&&c(),(null===a||void 0===a||null===(t=a.sessions)||void 0===t?void 0:t.main)!==u.api.State.Running&&(null===i||void 0===i?void 0:i.state)!==u.api.State.Running||"terminated"===h.current&&N(),(null===a||void 0===a||null===(n=a.sessions)||void 0===n?void 0:n.main)===u.api.State.Stopped||(null===i||void 0===i?void 0:i.state)===u.api.State.Stopped){if(I)return void(I=!1);c()}})),{state:h,stackFrames:p,variables:m,breakpoints:v,supportsStepBack:w,onOutput:function(e){return Z.on("output",e),function(){Z.removeListener("output",e)}},onStarted:d,onPaused:function(e){return Z.on("paused",e),function(){Z.removeListener("paused",e)}},onBreakpoint:function(e){return Z.on("breakpoint",e),function(){Z.removeListener("breakpoint",e)}},sendInput:function(e){return(0,i.Z)((function(){var t,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return t={debugInput:{session:"main",input:e}},x.push({time:Date.now(),direction:"out",data:t}),[4,n.request(t)];case 1:if(r=i.sent(),x.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}}))}))()},fetchVariables:function(e){return(0,i.Z)((function(){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,_({command:"variables",arguments:{variablesReference:e}})];case 1:if((t=n.sent()).success)return[2,t.body.variables.map((function(t){return(0,y.Z)((0,o.Z)({},t),{parentVariableReference:e})}))];throw new Error(t.message)}}))}))()},evaluate:function(e){var n=e.frameId,r=void 0===n?null===(t=p.current[0])||void 0===t?void 0:t.id:n,o=e.expression,l=e.context;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,_({command:"evaluate",arguments:{frameId:r,expression:o,context:l}})];case 1:return[2,e.sent()]}}))}))()},addBreakpoint:L,removeBreakpoint:X,updateBreakpoint:function(e,t){return F.apply(this,arguments)},toggleBreakpoint:function(e,t){return W.apply(this,arguments)},start:N,continue:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return p.current=[],h.current="running",[4,_({command:"continue",arguments:{threadId:g.current}})];case 1:return e.sent(),[2]}}))}))()},reverseContinue:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return p.current=[],h.current="running",[4,_({command:"reverseContinue",arguments:{threadId:g.current}})];case 1:return e.sent(),[2]}}))}))()},back:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return h.current="running",[4,_({command:"stepBack",arguments:{threadId:g.current}})];case 1:return e.sent(),[2]}}))}))()},next:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return h.current="running",[4,_({command:"stepIn",arguments:{threadId:g.current}})];case 1:return e.sent(),[2]}}))}))()},skip:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return h.current="running",[4,_({command:"next",arguments:{threadId:g.current,granularity:"line"}})];case 1:return e.sent(),[2]}}))}))()},stepOut:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return h.current="running",[4,_({command:"stepOut",arguments:{threadId:g.current}})];case 1:return e.sent(),[2]}}))}))()},stop:function(){return(0,i.Z)((function(){var e,t,r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:if("terminated"===h.current)throw new Error("Debugger already terminated");return e=h.current,h.current="stopping","preinitializing"===e?[2]:"initializing"!==e?[3,2]:(t=[],[4,Promise.race([new Promise((function(e){t.push(h.subscribe((function(){return e()})))})),new Promise((function(e){t.push(d((function(){return e()})))}))])]);case 1:if(o.sent(),t.forEach((function(e){return e()})),"terminated"===h.current)return[2];o.label=2;case 2:return r={debugStop:{session:"main"}},x.push({time:Date.now(),direction:"out",data:r}),[4,n.request(r)];case 3:if(i=o.sent(),x.push({time:Date.now(),direction:"in",data:i}),i.error)throw new Error("Failed to stop debugger "+i.error);return[2]}}))}))()},getSource:function(e){return(0,i.Z)((function(){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,_({command:"source",arguments:{source:{path:e}}})];case 1:if(!(t=n.sent()).success)throw new Error(t.message);return[2,t.body.content]}}))}))()},getDebugLogs:function(){return Object.entries({state:h,stackFrames:p,variables:m,breakpoints:v,threadId:g}).map((function(e){var t=(0,S.Z)(e,2),n=t[0],r=t[1];return"".concat(n," = ").concat(JSON.stringify((0,T.Z)(r.current,Map)?(0,s.Z)(r.current):r.current,void 0,2))})).join("\n")+"\n\n"+x.map((function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")})).join("\n")}}}function q(e){var t=JSON.stringify(e);return"Content-Length: ".concat(z.byteLength(t),"\r\n\r\n").concat(t)}var $=n(10702),Y=n(20854),K=n(43119),Q=n(71440);function J(){var e=(0,K.Z)(["\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return J=function(){return e},e}var ee,te=(0,Q.Ps)(J());function ne(){return re.apply(this,arguments)}function re(){return(re=(0,i.Z)((function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:if(!Y.l)throw new Error("Expected apollo");return[4,Y.l.query({query:te})];case 1:if(!(null===(e=t.sent().data)||void 0===e?void 0:e.currentUser))throw new Error("Expected current user");return[2,e.currentUser]}}))}))).apply(this,arguments)}function ie(){(0,T.Z)(document.activeElement,HTMLElement)&&document.activeElement.blur()}!function(e){e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED"}(ee||(ee={}));var oe=n(51446);var ae=n(20776),le=n(80724),ce=n(29339),se=n.n(ce);function ue(e){var t=e.container,n=e.beforeRun,r=(0,f.ZP)(),o=le.Z.Idle,l=new Date(0),c=!1;r.on(le.z.TEST_RESULT,(function(e){c=c&&"passed"===e.body}));var s=function(e){r.emit(le.z.STATE_CHANGED,e),o=e},d=function(){var e=(0,i.Z)((function(e,t){var n,i,o,l,c,d,f,h,p,m,v;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(n=ae.api.Payload.fromObject(t),i=ae.api.Payload.verify(n))throw i;return o=new(se())((function(e){var t=ae.api.Response.fromObject(e),i=ae.api.Response.verify(t);if(i)x.Tb(new TypeError("invalid payload received"),(function(r){return r.setExtras({validationError:i,payload:n,message:e,response:t})}));else switch(t.body){case"error":return r.emit(le.z.ERROR,t.error);case"instructionResult":return r.emit(le.z.INSTRUCTION_RESULT,t.instructionResult);case"testResult":return r.emit(le.z.TEST_RESULT,t.testResult);case"status":switch(t.status){case ae.api.Status.Ready:return s(le.Z.Ready);case ae.api.Status.Building:return s(le.Z.Building);case ae.api.Status.Running:return s(le.Z.Running)}}})),l=e.onCommand((function(e){if(e.output)try{o.submit(e.output)}catch(h){x.Tb(new SyntaxError("invalid response received from i/o testing binary"),(function(r){return r.setExtras({err:h,payload:n,cmd:e})}))}})),c=e.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:u.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),[4,new Promise((function(e,t){var n,i=function(){n(),e()};r.once(le.z.STATE_CHANGED,i);var o=setTimeout((function(){n(),t(new Error("timeout while waiting for iotester to start"))}),2e4);n=function(){clearTimeout(o),r.off(le.z.STATE_CHANGED,i)}}))];case 1:return a.sent(),[4,e.request({input:JSON.stringify(n)+"\n"})];case 2:if(!(d=a.sent()).ok)throw h=new Error(null!==(f=d.error)&&void 0!==f?f:"unexpected error occurred while sending input to i/o testing binary"),x.Tb(h,(function(e){return e.setExtra("status",d)})),h;return[4,c];case 3:return(p=a.sent()).ok||(v=new Error(null!==(m=p.error)&&void 0!==m?m:"unexpected error occurred while executing i/o testing binary"),x.Tb(v,(function(e){return e.setExtra("result",p)}))),l(),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();return{run:function(e){if(o!==le.Z.Idle)throw new Error("iotester already running");return s(le.Z.Starting),l=new Date,c=!0,n().then((function(){return new Promise((function(n){var r=t.openChannel({service:"exec"},(function(t){var i="",o="",a=t.channel.onCommand((function(e){e.log?i+=e.log:e.stderr&&(o+=e.stderr)}));return n(d(t.channel,e).finally((function(){a(),r(),(o||i)&&x.Tb(new Error("logs received from IOTester"),(function(t){return t.setExtras({logs:i,stderr:o,payload:e})}))}))),r}))}))})).catch((function(e){return c=!1,Promise.reject(e)})).finally((function(){return s(le.Z.Idle)}))},get lastRunAt(){return l},get state(){return o},get lastRunDidPass(){return c},onInstructionResult:function(e){return r.on(le.z.INSTRUCTION_RESULT,e),function(){r.off(le.z.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return r.on(le.z.STATE_CHANGED,e),function(){r.off(le.z.STATE_CHANGED,e)}},onTestResult:function(e){return r.on(le.z.TEST_RESULT,e),function(){r.off(le.z.TEST_RESULT,e)}},onError:function(e){return r.on(le.z.ERROR,e),function(){r.off(le.z.ERROR,e)}}}}var de=n(79836),fe=n(3341),he=n.n(fe),pe=n(77637),me=n(99127),ve=n(39151),ge=function(e){var t=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:ve.Z}},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,completionItem:{documentationFormat:["markdown","plaintext"],snippetSupport:!0}},codeAction:{dynamicRegistration:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(me.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:t.clientToServer||t.serverToClient?{dynamicRegistration:!0}:void 0,configuration:t.serverToClient,executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[me.ResourceOperationKind.Create,me.ResourceOperationKind.Delete,me.ResourceOperationKind.Rename]}}}},ye=n(35554),Ze=n.n(ye),be=n(61e3),we=n(70065),xe=function(){"use strict";function e(){(0,D.Z)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("css-language-server")},t.onResponse=function(e,t){return"textDocument/hover"===e?this.onHover(t):t},t.onHover=function(e){if("error"in e)return e;var t=e.result;return"cancelled"in e&&!1!==e.cancelled||!t?e:(Array.isArray(t.contents)&&(t.contents={kind:"markdown",value:["```html",t.contents[0],"```",t.contents[1],""].join("\n")}),(0,y.Z)((0,o.Z)({},e),{result:t}))},e}(),Ce=[new(function(){"use strict";function e(){(0,D.Z)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("typescript-language-server")},t.onResponse=function(e,t){return"textDocument/completion"===e?this.onCompletion(t):t},t.onCompletion=function(e){if("error"in e)return e;if("cancelled"in e&&!1!==e.cancelled)return e;var t=e.result;if(!t)return e;Array.isArray(t)&&(t={isIncomplete:!1,items:t});for(var n=0;n<t.items.length;n++){var r=t.items[n];r.sortText&&r.sortText.startsWith("\uffff")&&(r.sortText=r.sortText.replace("\uffff",""))}return(0,y.Z)((0,o.Z)({},e),{result:t})},e}()),new xe];function ke(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Ce[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.supports(e))return a}}catch(l){n=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return new Ee}var Se,Ee=function(){"use strict";function e(){(0,D.Z)(this,e)}var t=e.prototype;return t.supports=function(){return!0},t.onResponse=function(e,t){return t},e}(),Te=n(91620).lW;function Re(e,t){return(0,be.D)(e,t)||t}function De(e,t){return e.line<t.line||e.line===t.line&&e.character<=t.character}function Ie(){return Math.floor(Math.random()*(Math.pow(2,31)-1))}function _e(e){var t=JSON.stringify((0,y.Z)((0,o.Z)({},e),{jsonrpc:"2.0"})),n=Te.byteLength(t,"utf8");return"Content-Length: ".concat(n,"\r\n\r\n").concat(t)}function Be(e){var t=e.connection,n=e.isSupportedFile,r=e.clientId,l=e.clientName,c=e.getWorkspaceConfiguration,s=e.onWorkspaceConfigurationChange,u=e.applyWorkspaceEdit,d=function(e){if(!E)throw new Error("Expected rootUri");var t=e.slice(E.length+1);try{return decodeURIComponent(t)}catch(n){throw x.$e((function(e){e.setExtra("fragment_to_decode",t),x.Tb(n)})),n}},h=function(e){if(!E)throw new Error("Expected rootUri");if(e.startsWith("/"))throw new Error("Path must be relative. Got: ".concat(e));return E+"/"+e},p=function(e){T!==e&&(T!==de.a.INITIALIZED&&v(de.N.NOT_READY),T=e,k.emit(Se.SERVER_STATE_CHANGE,T))},v=function(e){R!==e&&(R=e,k.emit(Se.SERVER_HEALTH_CHANGE,R))},g=function(e){k.emit(Se.SEND_NOTIFICATION,e),t.write(_e(e))},Z=function(e,n){t.write(_e((0,y.Z)((0,o.Z)({},n),{id:e})))},b=function(e){var t=G.get(e);t&&(k.emit(Se.CANCEL_REQUEST,e),t({result:null,cancelled:!0}),G.delete(e),g({method:"$/cancelRequest",params:{id:e}}))},w=function(e){if(!D)throw new Error("Expected client to be initialized");if(!D[e])throw new Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return D[e]},C=function(e){return E&&e?e.filter((function(e){return"uri"in e?e.uri.startsWith(E):e.targetUri.startsWith(E)})):e},k=(0,f.ZP)();k.setMaxListeners(1/0);var S,E=null,T=de.a.OFFLINE,R=de.N.NOT_READY,D=null,_=!1,B=new Map,G=new Map,P=null;function A(e){return N.apply(this,arguments)}function N(){return(N=(0,i.Z)((function(e){var n,i,l,c,s,u,d,f;return(0,a.__generator)(this,(function(a){if(n=e.options,l=(i=void 0===n?{}:n).id,c=void 0===l?Ie():l,s=i.signal,u=i.tap,d=(0,pe.Z)(e,["options"]),!Number.isInteger(c))throw new Error("Request ID must be an integer");return t.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(k.emit(Se.REQUEST,{id:c,data:d}),null===s||void 0===s||s.addEventListener("abort",(function(){b(c)}),{once:!0}),t.write(_e((0,y.Z)((0,o.Z)({},d),{id:c}))),null===P&&(P=setTimeout((function(){v(de.N.STALLED)}),3e4)),f=new Promise((function(e){G.set(c,e)})),u&&u(f),[2,f.then((function(e){return null!==P&&(clearTimeout(P),P=null),T!==de.a.INITIALIZED||e.cancelled||v(de.N.READY),ke(r).onResponse(d.method,e)}))])}))}))).apply(this,arguments)}var U=new H((function(e){var t=G.get(e.id);if(e.id&&t){G.delete(e.id);var n=e.result,i=e.error;if((void 0!==n||i)&&k.emit(Se.RESPONSE,e),"undefined"!==typeof n)return void t({result:n,cancelled:!1});if(i){var a=i.code,l=i.message,s=i.data;return I.kg.error("LSP request failed",{code:a,lspId:r,errorMessage:l,data:JSON.stringify(s)}),void t({error:i})}throw I.kg.error("LSP response message contained neither error nor result"),new we.Z("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var f=e.method;if("client/registerCapability"===f){var h=e.params.registrations;if(!h||!Array.isArray(h))throw new Error("Expected registrations array");return h.forEach((function(e){var t=e.method;if(!t)throw new Error("Expected registration method");if(!D)throw new Error("Expected server capabilities");var n=e.registerOptions||!0;switch(t){case"textDocument/definition":D.definitionProvider=!0;break;case"textDocument/typeDefinition":D.typeDefinitionProvider=!0;break;case"textDocument/implementation":D.implementationProvider=!0;break;case"textDocument/references":D.referencesProvider=!0;break;case"textDocument/hover":D.hoverProvider=!0;break;case"textDocument/completion":D.completionProvider=n;break;case"textDocument/formatting":D.documentFormattingProvider=n;break;case"textDocument/rename":D.renameProvider=n;break;case"textDocument/codeAction":D.codeActionProvider=n;break;case"textDocument/signatureHelp":D.signatureHelpProvider=n;break;case"textDocument/didSave":if("number"===typeof D.textDocumentSync)break;D.textDocumentSync=(0,y.Z)((0,o.Z)({},D.textDocumentSync||{}),{save:n});break;case"textDocument/willSaveWaitUntil":if("number"===typeof D.textDocumentSync)break;D.textDocumentSync=(0,y.Z)((0,o.Z)({},D.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"===typeof D.textDocumentSync)break;D.textDocumentSync=(0,y.Z)((0,o.Z)({},D.textDocumentSync||{}),{change:n});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"===typeof D.textDocumentSync)break;D.textDocumentSync=(0,y.Z)((0,o.Z)({},D.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":D.executeCommandProvider=n;break;default:I.kg.info("Unexpected dynamically registered capability in LSP client",{method:t})}k.emit(Se.SERVER_CAPABILITIES_CHANGE,D)})),void Z(e.id,{result:void 0,cancelled:!1})}if("workspace/applyEdit"!==f){if("textDocument/publishDiagnostics"===f){var p=d(e.params.uri),v=B.get(p);if(!v)return;var g=e.params.diagnostics;if(m()(v.diagnostics,g))return;return v.diagnostics=g,void k.emit(Se.DIAGNOSTICS,{path:p,diagnostics:g})}if("workspace/configuration"===f){var b,w=e.params,x=Array(w.items.length).fill(null),C=null!==(b=null===c||void 0===c?void 0:c())&&void 0!==b?b:null;C&&(x=w.items.map((function(e){return e.section?Ze()(C,e.section):C}))),Z(e.id,{result:x,cancelled:!1})}}else{var S=u(e.params);Z(e.id,{result:S,cancelled:!1})}}));t.read(U.read);var L=function(){};return{initialize:function(e){var t=e.pwd,n=e.initializationOptions;return(0,i.Z)((function(){var e,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return p(de.a.INITIALIZING),E="file://".concat(t),[4,A({method:"initialize",params:{initializationOptions:n,capabilities:ge({configurationSupport:{serverToClient:Boolean(c),clientToServer:Boolean(s)}}),processId:null,rootUri:E,workspaceFolders:[{name:E,uri:E}]}})];case 1:if("error"in(e=i.sent()))throw new Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw new Error("Initialize request cancelled");if(!e.result)throw new Error("Expected result in initialize request");return g({method:"initialized",params:{}}),D=e.result.capabilities,S=e.result.serverInfo,k.emit(Se.SERVER_CAPABILITIES_CHANGE,D),p(de.a.INITIALIZED),s&&(L=s((function(e){g({method:"workspace/didChangeConfiguration",params:{settings:e}})}))),c&&(r=c())&&g({method:"workspace/didChangeConfiguration",params:{settings:r}}),[2]}}))}))()},generateId:Ie,notify:{didOpen:function(e,t){if(!n(e))throw new Error("Path not supported");var i,o=B.get(e);if(o&&0!==o.buffers)return o.buffers++,void B.set(e,o);var a=null!==(i=null===o||void 0===o?void 0:o.version)&&void 0!==i?i:0;B.set(e,{version:a,buffers:1,diagnostics:[]}),g({method:"textDocument/didOpen",params:{textDocument:{uri:h(e),languageId:Re(e,r),text:t,version:a}}})},didChange:function(e,t){var n=B.get(e);if(!n)throw new Error('Document for "'.concat(e,'" is not open'));n.version++,g({method:"textDocument/didChange",params:{textDocument:{uri:h(e),version:n.version},contentChanges:t}})},didSave:function(e){if(!B.get(e))throw new Error('Document for "'.concat(e,'" is not open'));w("textDocumentSync"),g({method:"textDocument/didSave",params:{textDocument:{uri:h(e)}}})},didClose:function(e){var t=B.get(e);if(!t)throw new Error('Document for "'.concat(e,'" is not open'));t.buffers--,t.buffers>0||(g({method:"textDocument/didClose",params:{textDocument:{uri:h(e)}}}),B.delete(e))},cancelRequest:function(e){b(e)}},request:{completion:function(e,t,n,r){return w("completionProvider"),A({options:r,method:"textDocument/completion",params:{textDocument:{uri:h(e)},position:t,context:n}})},resolveCompletionItem:function(e){if(!w("completionProvider").resolveProvider)throw new Error("LSP Server does not support resolving completion items");return A({method:"completionItem/resolve",params:e})},signatureHelp:function(e,t,n){return A({options:n,method:"textDocument/signatureHelp",params:{textDocument:{uri:h(e)},position:t}})},hover:function(e,t,n){return A({options:n,method:"textDocument/hover",params:{textDocument:{uri:h(e)},position:t}})},codeActions:function(e,t){var n=B.get(e);if(!n)throw new Error("Document for path ".concat(e," is not open."));var r=n.diagnostics.filter((function(e){return n=e.range,r=t,De(n.start,r.end)&&De(r.start,n.end);var n,r}));return A({method:"textDocument/codeAction",params:{textDocument:{uri:h(e)},range:t,context:{diagnostics:r}}})},executeCommand:function(e,t){return A({method:"workspace/executeCommand",params:{command:e,arguments:t}})},format:function(e,t){return w("documentFormattingProvider"),A({method:"textDocument/formatting",params:{textDocument:{uri:h(e)},options:t}})},findDefinitions:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(0,i.Z)((function(){var i,l;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return w("definitionProvider"),[4,A({options:n,method:"textDocument/definition",params:{textDocument:{uri:h(e)},position:t}})];case 1:return!1!==(i=a.sent()).cancelled?[2,i]:((l=i.result)&&r&&(l=C(Array.isArray(l)?l:[l])),[2,(0,y.Z)((0,o.Z)({},i),{result:l})])}}))}))()},findTypeDefinitions:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(0,i.Z)((function(){var i,l;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return w("typeDefinitionProvider"),[4,A({options:n,method:"textDocument/typeDefinition",params:{textDocument:{uri:h(e)},position:t}})];case 1:return!1!==(i=a.sent()).cancelled?[2,i]:((l=i.result)&&r&&(l=C(Array.isArray(l)?l:[l])),[2,(0,y.Z)((0,o.Z)({},i),{result:l})])}}))}))()},findImplementations:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(0,i.Z)((function(){var i,l;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return w("implementationProvider"),[4,A({options:n,method:"textDocument/implementation",params:{textDocument:{uri:h(e)},position:t}})];case 1:return!1!==(i=a.sent()).cancelled?[2,i]:((l=i.result)&&r&&(l=C(Array.isArray(l)?l:[l])),[2,(0,y.Z)((0,o.Z)({},i),{result:l})])}}))}))()},findReferences:function(e,t,n){return w("referencesProvider"),A({method:"textDocument/references",params:{textDocument:{uri:h(e)},position:t,context:n}})},rename:function(e,t,n,r){return w("renameProvider"),A({options:r,method:"textDocument/rename",params:{textDocument:{uri:h(e)},position:t,newName:n}})},prepareRename:function(e,t){var n=w("renameProvider");if("boolean"===typeof n||!n.prepareProvider)throw new Error("LSP server does not support prepare rename");return A({method:"textDocument/prepareRename",params:{textDocument:{uri:h(e)},position:t}})},documentHighlights:function(e,t,n){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,A({options:n,method:"textDocument/documentHighlight",params:{position:t,textDocument:{uri:h(e)}}})];case 1:return[2,r.sent()]}}))}))()},documentSymbol:function(e,t){return(0,i.Z)((function(){var n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,A({options:t,method:"textDocument/documentSymbol",params:{textDocument:{uri:h(e)}}})];case 1:return"result"in(n=r.sent())?n.result?[2,{result:n.result,cancelled:!1}]:[2]:[2,n]}}))}))()}},onDiagnostics:(0,f.JV)(k,Se.DIAGNOSTICS),onServerStateChange:(0,f.JV)(k,Se.SERVER_STATE_CHANGE),onServerHealthChange:(0,f.JV)(k,Se.SERVER_HEALTH_CHANGE),onServerCapabilitiesChange:(0,f.JV)(k,Se.SERVER_CAPABILITIES_CHANGE),onRequest:(0,f.JV)(k,Se.REQUEST),onResponse:(0,f.JV)(k,Se.RESPONSE),onCancelRequest:(0,f.JV)(k,Se.CANCEL_REQUEST),onSendNotification:(0,f.JV)(k,Se.SEND_NOTIFICATION),shutdown:function(){for(var e in p(de.a.EXITING),B.clear(),G)b(Number(e));L(),A({method:"shutdown"}).then((function(){g({method:"exit"}),p(de.a.EXITED),k.removeAllListeners()}))},isDestroyed:function(){return _},destroy:function(){for(var e in _=!0,B.clear(),G)b(Number(e));L(),p(de.a.EXITED),k.removeAllListeners()},getServerState:function(){return T},getServerHealth:function(){return R},getServerCapabilities:function(){return D},getServerInfo:function(){return S},getDiagnostics:function(e){var t=B.get(e);if(!t)throw new Error("File with path ".concat(e," is not open."));return t.diagnostics},isOpen:function(e){return B.has(e)},documentUriToPath:d,pathToDocumentURI:h,isSupportedFile:n,getLanguageId:function(e){return Re(e,r)},clientId:r,clientName:l}}!function(e){e.INITIALIZED="INITIALIZED",e.READY="READY",e.DIAGNOSTICS="DIAGNOSTICS",e.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",e.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",e.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",e.REQUEST="REQUEST",e.RESPONSE="RESPONSE",e.CANCEL_REQUEST="CANCEL_REQUEST",e.SEND_NOTIFICATION="SEND_NOTIFICATION"}(Se||(Se={}));var Ge=n(75356),Pe=n(83387);function Ae(e,t){var n,r,i,o,a,l;return t&&t?!!he()(null===e||void 0===e?void 0:e.fileTypeAttrs,t.fileTypeAttrs)&&(!!he()(null===e||void 0===e||null===(n=e.config)||void 0===n?void 0:n.startCommand,null===(r=t.config)||void 0===r?void 0:r.startCommand)&&(!!he()(null===e||void 0===e||null===(i=e.config)||void 0===i?void 0:i.initializationOptionsJson,null===(o=t.config)||void 0===o?void 0:o.initializationOptionsJson)&&!!he()(null===e||void 0===e||null===(a=e.config)||void 0===a?void 0:a.configurationJson,null===(l=t.config)||void 0===l?void 0:l.configurationJson))):Boolean(t)===Boolean(t)}function Ne(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,i.Z)((function(e,t){var n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:return null!==(n=r.sent()).error?t()?[2,Ne(e,t)]:[2,{error:new Error("LSPNix: Could not get working directory "+n.error),workingDirectory:null}]:[2,{error:null,workingDirectory:n.output.replace("\n","")}]}}))}))).apply(this,arguments)}var Le,Oe=n(57389),Xe=n(19692);function Me(e){if("object"!==typeof(t=e)||null===t||null===Object.getPrototypeOf(t))throw new Error("encodeBareStruct must be called with a plain object");var t;return{fields:Object.entries(e).reduce((function(e,t){var n=(0,S.Z)(t,2),r=n[0],i=n[1];return void 0===i||"object"===typeof i&&i&&0===Object.keys(i).length?e:(0,y.Z)((0,o.Z)({},e),(0,Oe.Z)({},r,Fe(i)))}),{})}}function Fe(e){switch("undefined"===typeof e?"undefined":(0,Xe.Z)(e)){case"string":return{kind:"stringValue",stringValue:e};case"number":return{kind:"numberValue",numberValue:e};case"boolean":return{kind:"boolValue",boolValue:e};case"object":return null===e?{kind:"nullValue",nullValue:null}:Array.isArray(e)?{kind:"listValue",listValue:{values:e.map(Fe)}}:{kind:"structValue",structValue:Me(e)};default:throw new Error("Unexpected value: ".concat(e))}}!function(e){e.CHANNEL_OPENED="CHANNEL_OPENED",e.EVENT_SENT="EVENT_SENT"}(Le||(Le={}));var We=n(82417),He=["git diff -z --name-only --diff-filter=U","echo -n ".concat("\x1f"),"{ git grep -z -l -E '<{7,}|={7,}|>{7,}' || exit $(( $? == 1 ? 0 : $? )); }"].join(" && ");function Ve(e){return ze.apply(this,arguments)}function ze(){return ze=(0,i.Z)((function(e){var t,n,r,i,o,l,c,s,u,d,f;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,e(He,{serviceMethod:"git-get-conflicting-files"})];case 1:if((t=a.sent()).error)return[2,t];if(n=(0,S.Z)(t.output.split("\x1f").map((function(e){return(0,We.so)(e,"\0")})),2),r=n[0],i=n[1],!r.length)return[2,{files:new Map,error:null}];o=new Map,l=!0,c=!1,s=void 0;try{for(u=r[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)f=d.value,o.set(f,!i.includes(f))}catch(h){c=!0,s=h}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return[2,{files:o,error:null}]}}))})),ze.apply(this,arguments)}var je=n(15935),qe=n(89898),$e="cat '.git/MERGE_HEAD'",Ye='git for-each-ref --format="%(objectname)\t%(refname)" refs/heads/ refs/remotes/';function Ke(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,i.Z)((function(e){var t,n,r,i,o,l;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,(0,je.ZP)(e)];case 1:return(t=a.sent()).error?[2,t]:t.state!==je.yG.MERGING?[2,{error:qe.aq.INVALID_STATE}]:[4,e($e,{serviceMethod:"git-get-merging-refs"})];case 2:return(n=a.sent()).error?[2,n]:(r=(0,We.so)(n.output,"\n")).length?(i="{ grep -F '".concat(r.join("\n"),"' || exit 0; }"),[4,e("".concat(Ye," | ").concat(i),{serviceMethod:"git-get-merging-refs"})]):[2,{commits:[],branches:[],error:null}];case 3:return(o=a.sent()).error?[2,o]:o.output?(l=(0,We.so)(o.output,"\n").map((function(e){return e.split("\t")[1]})).map(We.C),[2,{commits:r,branches:l,error:null}]):[2,{commits:r,branches:[],error:null}]}}))}))).apply(this,arguments)}var Je="if [ -f '.git/FETCH_HEAD' ]; then stat -c %Y '.git/FETCH_HEAD'; fi";function et(e){return tt.apply(this,arguments)}function tt(){return(tt=(0,i.Z)((function(e){var t,n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,e(Je,{serviceMethod:"git-last-fetched"})];case 1:return(t=r.sent()).error?[2,t]:t.output?(n=parseInt(t.output,10),isNaN(n)?[2,{lastFetched:null,error:null}]:(n*=1e3,[2,{lastFetched:new Date(n),error:null}])):[2,{lastFetched:null,error:null}]}}))}))).apply(this,arguments)}var nt=n(55340),rt=n(63732);function it(e,t){return ot.apply(this,arguments)}function ot(){return(ot=(0,i.Z)((function(e,t){var n,r,i,o,l,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=(0,nt.Qj)(t),n=t.startsWith("refs/heads/"),r=t.startsWith("refs/remotes/"),n?[3,2]:(i=r?t:"refs/remotes/".concat(t),[4,e("git show-ref --verify ".concat(i),{serviceMethod:"git-branch-exists"})]);case 1:if(!(o=a.sent()).error)return[2,{exists:!0,ref:(0,rt.L)(i),error:null}];if(o.error!==qe.aq.INVALID_REFERENCE)return[2,o];a.label=2;case 2:return r?[3,4]:(l=n?t:"refs/heads/".concat(t),[4,e("git show-ref --verify ".concat(l),{serviceMethod:"git-branch-exists"})]);case 3:if(!(c=a.sent()).error)return[2,{exists:!0,ref:(0,rt.L)(l),error:null}];if(c.error!==qe.aq.INVALID_REFERENCE)return[2,c];a.label=4;case 4:return[2,{exists:!1,ref:null,error:null}]}}))}))).apply(this,arguments)}var at="( (grep -q -e '^+<* \\.our$' && echo '1') || echo '0')";function lt(e,t,n){return ct.apply(this,arguments)}function ct(){return(ct=(0,i.Z)((function(e,t,n){var r,i,o,l;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if((0,nt.Pi)(t,n)){if(t=(0,nt.bF)(t,!0),n=(0,nt.bF)(n),t===n)return[2,{canMerge:!0,error:null}]}else t=(0,nt.bF)(t),n=(0,nt.bF)(n);return t=(0,We.Gw)(t),n=(0,We.Gw)(n),r="git merge-base ".concat(t," ").concat(n),i='git merge-tree "$('.concat(r,')" ').concat(t," ").concat(n),o="set -eo pipefail; (".concat(i," | ").concat(at,") || test $? -eq 141"),[4,e(o,{serviceMethod:"git-can-merge-branches"})];case 1:return(l=a.sent()).error?[2,l]:[2,{canMerge:"0"===l.output,error:null}]}}))}))).apply(this,arguments)}function st(e){var t=e.branch,n=e.message;t=(0,nt.Qj)(t);var r=["--quiet","--no-edit","--no-ff","--overwrite-ignore","--commit"];return n&&r.push("-m",(0,We.Gw)(n)),r.push((0,We.Gw)(t)),"git merge ".concat(r.join(" "))}function ut(e,t){return dt.apply(this,arguments)}function dt(){return(dt=(0,i.Z)((function(e,t){var n,r,i,o,l,c,s,u,d,f;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=t.branch,r=t.message,i=t.allowConflicts,o=void 0!==i&&i,[4,(0,je.ZP)(e)];case 1:return(l=a.sent()).error?[2,l]:(c=l.state,l.type!==je.y5.NORMAL||c===je.yG.DIRTY_WORKTREE||c===je.yG.DIRTY_INDEX?[2,{error:qe.aq.INVALID_STATE}]:[4,it(e,n)]);case 2:return(s=a.sent()).error?[2,s]:s.exists?o?[3,4]:[4,lt(e,n,"HEAD")]:[2,{error:qe.aq.INVALID_REFERENCE}];case 3:if((u=a.sent()).error)return[2,u];if(!u.canMerge)return[2,{error:qe.aq.MERGE_CONFLICT}];a.label=4;case 4:return d=st({branch:n,message:r}),[4,e(d,{serviceMethod:"git-merge"})];case 5:return(f=a.sent()).error!==qe.aq.MERGE_CONFLICT?[3,8]:o?[3,7]:[4,e("git merge --abort")];case 6:return a.sent(),[2,f];case 7:return[2,{hasConflicts:!0,error:null}];case 8:return f.error?[2,f]:[2,{hasConflicts:!1,error:null}]}}))}))).apply(this,arguments)}function ft(e){return ht.apply(this,arguments)}function ht(){return(ht=(0,i.Z)((function(e){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,e("git merge --abort",{serviceMethod:"git-merge-abort"})];case 1:return(t=n.sent()).error?[2,t]:[2,{error:null}]}}))}))).apply(this,arguments)}function pt(e){return mt.apply(this,arguments)}function mt(){return(mt=(0,i.Z)((function(e){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,e("GIT_EDITOR=/bin/true git merge --continue",{serviceMethod:"git-merge-continue"})];case 1:return(t=n.sent()).error?[2,t]:[2,{error:null}]}}))}))).apply(this,arguments)}var vt=n(87803);function gt(e,t,n){return yt.apply(this,arguments)}function yt(){return yt=(0,i.Z)((function(e,t,n){var r,i,o,l,c,s,u,d,f,h,p,m,v,g,y;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if("string"===typeof t){if(""===t)return[2,{error:null}];t=[t]}return!0!==t&&0===t.length?[2,{error:null}]:void 0===n?[3,2]:(r=["--quiet","--no-overlay","--worktree","--source=".concat(n),!0===t?".":"-- ".concat(t.join(" "))],[4,e("git --literal-pathspecs restore ".concat(r.join(" ")),{serviceMethod:"git-restore-files"})]);case 1:return(i=a.sent()).error?[2,i]:[2,{error:null}];case 2:return[4,(0,vt.Z)(e)];case 3:if((o=a.sent()).error)return[2,o];l=[],c=[],s=!0,u=!1,d=void 0;try{for(f=o.changes[Symbol.iterator]();!(s=(h=f.next()).done);s=!0)if(p=h.value,!0===t||t.includes(p.path))switch(p.type.worktree){case vt.h.UNMODIFIED:continue;case vt.h.UNTRACKED:l.push((0,We.Gw)(p.path));break;default:c.push((0,We.Gw)(p.path))}}catch(Z){u=!0,d=Z}finally{try{s||null==f.return||f.return()}finally{if(u)throw d}}return 0===l.length&&0===c.length&&void 0===n?[2,{error:null}]:(m=[],l.length&&(v=["--quiet","--force","--",l.join(" ")],m.push("git --literal-pathspecs clean ".concat(v.join(" ")))),c.length&&(g=["--quiet","--no-overlay","--worktree","-- ".concat(c.join(" "))],m.push("git --literal-pathspecs restore ".concat(g.join(" ")))),[4,e(m,{serviceMethod:"git-restore-files"})]);case 4:return(y=a.sent()).error?[2,y]:[2,{error:null}]}}))})),yt.apply(this,arguments)}var Zt=n(86763),bt=n.n(Zt);function wt(e,t){return xt.apply(this,arguments)}function xt(){return(xt=(0,i.Z)((function(e,t){var n,r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return n=t.name,r=t.url,n=(0,We.ss)(n),(0,nt.GE)(n)?(n=(0,We.Gw)(n),r=(0,We.Gw)(r),[4,e("git remote add ".concat(n," ").concat(r),{serviceMethod:"git-add-remote"})]):[2,{error:qe.aq.INVALID_REFERENCE}];case 1:return(i=o.sent()).error?[2,i]:[2,{error:null}]}}))}))).apply(this,arguments)}function Ct(e){var t,n=e.message,r=e.files,i=["--allow-empty","--allow-empty-message","--cleanup=whitespace","--no-edit","--quiet","-m ".concat((0,We.Gw)(n))];r&&(t=i).push.apply(t,["--only","--"].concat((0,s.Z)(r.map(We.Gw))));return"git --literal-pathspecs commit ".concat(i.join(" "))}function kt(e,t){return St.apply(this,arguments)}function St(){return(St=(0,i.Z)((function(e,t){var n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,e(Ct(t),{serviceMethod:"git-commit"})];case 1:return(n=r.sent()).error?[2,n]:[2,{error:null}]}}))}))).apply(this,arguments)}function Et(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,i.Z)((function(e,t){var n,r,i,o,l,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=(0,nt.Qj)(t,!0),[4,it(e,t)];case 1:return(n=a.sent()).error?[2,n]:n.exists?(r=["--quiet","--no-guess"],n.ref.type!==rt.l.REMOTE_BRANCH?[3,3]:(i=n.ref.branch,o=n.ref.name,[4,it(e,"refs/heads/".concat(i))])):[2,{error:qe.aq.INVALID_REFERENCE}];case 2:return(l=a.sent()).error?[2,l]:(l.exists?r.push((0,We.Gw)(i),"--"):r.push("-t","-b",(0,We.Gw)(i),(0,We.Gw)(o),"--"),[3,4]);case 3:r.push((0,We.Gw)(n.ref.name),"--"),a.label=4;case 4:return[4,e("git checkout ".concat(r.join(" ")),{serviceMethod:"git-switch-branch"})];case 5:return(c=a.sent()).error?[2,c]:[2,{error:null}]}}))}))).apply(this,arguments)}function Rt(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,i.Z)((function(e,t){var n,r,i,o,l,c,s,u,d,f,h;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=t.name,r=t.startPoint,i=void 0===r?"HEAD":r,o=t.track,l=t.checkout,c=void 0!==l&&l,n=(0,We.C)(n),[4,it(e,n)];case 1:if((s=a.sent()).error)return[2,s];if(s.exists)return[2,{error:qe.aq.BRANCH_ALREADY_EXISTS}];if("HEAD"===i){if(!0===o)return[2,{error:qe.aq.INVALID_REFERENCE}];o=!1}return!1===o?[3,3]:[4,it(e,i)];case 2:if((u=a.sent()).error)return[2,u];if(!u.exists&&!0===o)return[2,{error:qe.aq.INVALID_REFERENCE}];u.exists&&u.ref.type===rt.l.REMOTE_BRANCH&&void 0===o&&(o=!0),a.label=3;case 3:return d=["--quiet",o?"--track":"--no-track",(0,We.Gw)(n),(0,We.Gw)(i)],[4,e("git branch ".concat(d.join(" ")),{serviceMethod:"git-create-branch"})];case 4:return(f=a.sent()).error?[2,f]:c?[4,Et(e,n)]:[3,6];case 5:if((h=a.sent()).error)return[2,h];a.label=6;case 6:return[2,{error:null}]}}))}))).apply(this,arguments)}function It(e){return _t.apply(this,arguments)}function _t(){return _t=(0,i.Z)((function(e){var t,n,r,i,o=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},n=["--quiet"],t.depth&&(r=t.deepen?"--deepen":"--depth",n.push("".concat(r,"=").concat(t.depth))),t.remote?n.push((0,We.Gw)(t.remote)):n.push("--all"),[4,e("git fetch ".concat(n.join(" ")),{serviceMethod:"git-fetch"})];case 1:return(i=a.sent()).error?[2,i]:[2,{error:null}]}}))})),_t.apply(this,arguments)}var Bt='\nif [ -f ".git/refs/remotes/$remote/HEAD" ]; then\n  echo "$(sed -e "s/^ref: refs\\/remotes\\/$remote\\///" < .git/refs/remotes/$remote/HEAD)"\nelse\n  remote_result="$(git ls-remote --symref "$remote" HEAD)"\n  if [ -z "$remote_result" ]; then\n    echo ""\n  else\n    echo "$(\n      echo "$remote_result" | \\\n      head -1 | \\\n      awk \'{print $2}\' | \\\n      sed -e "s/^refs\\/heads\\///"\n    )"\n  fi\nfi\n'.trim(),Gt=["main","master","trunk","dev","develop","development","staging","prod","production"].map((function(e){return'if [ $(git rev-parse --verify --quiet "heads/'.concat(e,'") ]; then\n      echo "refs/heads/').concat(e,'"\n    fi')})).join("\n"),Pt='\ngit remote | while IFS= read -r remote; do\n  if [ -z "$remote" ]; then continue; fi\n  branch="$('.concat(Bt,')"\n  if [ -z "$branch" ]; then continue; fi\n  echo "refs/remotes/$remote/$branch"\n  if [ $(git rev-parse --verify --quiet "heads/$branch") ]; then\n    echo "refs/heads/$branch"\n  fi\ndone\n').concat(Gt,"\n").trim();function At(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,i.Z)((function(e){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,e(Pt,{serviceMethod:"git-find-default-branches"})];case 1:return(t=n.sent()).error?[2,t]:[2,{refs:(0,s.Z)(new Set((0,We.so)(t.output,"\n"))).map((function(e){return(0,rt.L)(e)})),error:null}]}}))}))).apply(this,arguments)}var Ut=n(79697);function Lt(e,t){return Ot.apply(this,arguments)}function Ot(){return Ot=(0,i.Z)((function(e,t){var n,r,i,o,l,c,s,u,d,f,h,p;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=(0,nt.bF)(t,!0),(0,nt.Dc)(t)?(n=(0,We.C)(t),r=(0,S.Z)((0,We.Tg)(t),2),i=r[0],o=r[1],l=["refs/heads/".concat(n),"refs/remotes/*/".concat(n)],i&&o&&(l.push("refs/heads/".concat(o)),l.push("refs/remotes/".concat(i,"/").concat(o))),[4,(0,Ut.ZP)(e,{pattern:l})]):[2,{error:qe.aq.INVALID_REFERENCE}];case 1:if((c=a.sent()).error)return[2,c];if(0===c.branches.length)return[2,{error:qe.aq.INVALID_REFERENCE}];s=!0,u=!1,d=void 0;try{for(f=c.branches[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){if((p=h.value).type!==Ut.HO.REMOTE&&p.name===n)return[2,{branch:p,error:null}];if(i&&o&&p.type!==Ut.HO.LOCAL&&p.remote===i&&p.name===o)return[2,{branch:p,error:null}]}}catch(m){u=!0,d=m}finally{try{s||null==f.return||f.return()}finally{if(u)throw d}}return[2,{error:qe.aq.INVALID_REFERENCE}]}}))})),Ot.apply(this,arguments)}function Xt(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,i.Z)((function(e,t){var n,r,i,o,l,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=t.path,r=t.revision,i=void 0===r?"":r,o=(0,We.Gw)(""===i?n:"".concat(null!==i&&void 0!==i?i:"",":").concat(n)),""!==i?[3,2]:[4,e("cat ".concat(n),{verbatim:!0,serviceMethod:"git-get-file-contents"})];case 1:return c=a.sent(),[3,4];case 2:return[4,e("git --no-pager show --textconv ".concat(o),{verbatim:!0,serviceMethod:"git-get-file-contents"})];case 3:c=a.sent(),a.label=4;case 4:return(l=c).error?l.error===qe.aq.PATH_MATCHED_NO_FILES?[2,{content:null,error:null}]:[2,l]:[2,{content:l.output,error:null}]}}))}))).apply(this,arguments)}function Ft(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,i.Z)((function(e){var t,n,r,i,o,l,c,s,u,d,f,h,p,m;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,e("git remote -v",{serviceMethod:"git-get-remotes"})];case 1:if((t=a.sent()).error)return[2,t];if(""===t.output)return[2,{remotes:new Map,error:null}];n=new Map,r=!0,i=!1,o=void 0;try{for(l=(0,We.so)(t.output,"\n")[Symbol.iterator]();!(r=(c=l.next()).done);r=!0)s=c.value,u=(0,S.Z)(s.split(/\s+/),3),d=u[0],f=u[1],h=u[2],d&&f&&h&&(m=null!==(p=n.get(d))&&void 0!==p?p:{name:d,fetch:"",push:""},"(fetch)"===h?(m.fetch=f,""===m.push&&(m.push=f),n.set(d,m)):"(push)"===h&&(m.push=f,""===m.fetch&&(m.fetch=f),n.set(d,m)))}catch(v){i=!0,o=v}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return[2,{remotes:n,error:null}]}}))}))).apply(this,arguments)}var Ht='git commit --allow-empty --no-edit --quiet -m "Initial commit"',Vt='git add -A && git commit --allow-empty --no-edit --quiet -m "Initial commit"';function zt(e){return jt.apply(this,arguments)}function jt(){return jt=(0,i.Z)((function(e){var t,n,r,i,o,l,c,s,u,d=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=d.length>1&&void 0!==d[1]?d[1]:{},n=t.initialCommit,r=void 0===n||n,i=t.includeAllInitialFiles,o=void 0===i||i,[4,(0,je.ZP)(e)];case 1:return(l=a.sent()).error?[2,l]:l.type!==je.y5.INITIALIZING?[2,{error:qe.aq.ALREADY_INITIALIZED}]:l.state!==je.yG.ON_UNBORN_BRANCH?[3,4]:r?[4,e(o?Vt:Ht,{serviceMethod:"git-init"})]:[3,3];case 2:if((c=a.sent()).error)return[2,c];a.label=3;case 3:return[2,{error:null}];case 4:return[4,e(["git init","git checkout -b main"],{serviceMethod:"git-init"})];case 5:return(s=a.sent()).error?[2,s]:r?[4,e(o?Vt:Ht,{serviceMethod:"git-init"})]:[3,7];case 6:if((u=a.sent()).error)return[2,u];a.label=7;case 7:return[2,{error:null}]}}))})),jt.apply(this,arguments)}function qt(e){return $t.apply(this,arguments)}function $t(){return($t=(0,i.Z)((function(e){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,e("git rev-parse --is-inside-work-tree",{serviceMethod:"git-is-initialized"})];case 1:return(t=n.sent()).error?t.error===qe.aq.NOT_INITIALIZED?[2,{initialized:!1,error:null}]:[2,t]:[2,{initialized:"true"===t.output,error:null}]}}))}))).apply(this,arguments)}var Yt="\0",Kt='--format="format:'+["%D","%H","%P","%an","%ae","%at","%cn","%ce","%ct","%s","%b"].join("%x1f")+'"';function Qt(e){var t=(0,S.Z)(e.trimStart().split("\x1f"),11),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],l=t[5],c=t[6],s=t[7],u=t[8],d=t[9],f=t[10],h=[],p=i?i.split(" "):null,m=!1,v=!0,g=!1,y=void 0;try{for(var Z,b=(0,We.so)(n,",")[Symbol.iterator]();!(v=(Z=b.next()).done);v=!0){var w=Z.value;"grafted"!==w?h.push((0,rt.L)(w)):m=!0}}catch(x){g=!0,y=x}finally{try{v||null==b.return||b.return()}finally{if(g)throw y}}return{refs:h,hash:r,parents:p,grafted:m,author:{name:o,email:a,date:1e3*parseInt(l,10)},committer:{name:c,email:s,date:1e3*parseInt(u,10)},subject:d?d.trim():"",body:f?f.trim():""}}function Jt(e){var t=e.max,n=void 0===t?25:t,r=e.skip,i=e.revRange,o=e.path,a=["-z","--decorate=full","--full-history",Kt];return n=Math.max(1,Math.min(n,200)),a.push("-n ".concat(n)),r&&a.push("--skip ".concat(r)),i&&a.push(i),a.push("--"),o&&a.push(o),"git log ".concat(a.join(" "))}function en(e){return tn.apply(this,arguments)}function tn(){return tn=(0,i.Z)((function(e){var t,n,r=arguments;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:{},[4,e(Jt(t),{serviceMethod:"git-log"})];case 1:return(n=i.sent()).error?n.error===qe.aq.NO_COMMITS?[2,{commits:[],error:null}]:[2,n]:[2,{commits:(0,We.so)(n.output,Yt).map(Qt),error:null}]}}))})),tn.apply(this,arguments)}function nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e.cached&&t.push("--cached"),e.deleted&&t.push("--deleted"),e.modified&&t.push("--modified"),e.others&&t.push("--others"),e.ignored&&t.push("--ignored"),e.directory&&t.push("--directory"),e.noEmptyDirectory&&t.push("--no-empty-directory"),"git ls-files ".concat(t.join(" "))}function rn(e){return on.apply(this,arguments)}function on(){return on=(0,i.Z)((function(e){var t,n,r=arguments;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:{},[4,e(nn(t),{serviceMethod:"git-ls-files"})];case 1:return(n=i.sent()).error?[2,n]:[2,{files:n.output.split("\n").filter((function(e){return e.length>0})),error:null}]}}))})),on.apply(this,arguments)}var an=n(89399);function ln(e){return cn.apply(this,arguments)}function cn(){return cn=(0,i.Z)((function(e){var t,n,r,i,o,l,c,s,u,d,f,h,p=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=p.length>1&&void 0!==p[1]?p[1]:{},[4,(0,vt.Z)(e)];case 1:if((n=a.sent()).error)return[2,n];if(!n.branch)return[2,{error:qe.aq.HEAD_DETACHED}];if(r=null,i=null,t.publish){if(n.upstream)return[2,{error:qe.aq.BRANCH_ALREADY_EXISTS}];r=t.publish.remote,i=null!==(o=t.publish.name)&&void 0!==o?o:n.branch,r=(0,We.C)(r),i=(0,We.C)(i)}else{if(!n.upstream)return[2,{error:qe.aq.UPSTREAM_NOT_SET}];if(!t.force&&n.upstream.behind>0)return[2,{error:qe.aq.PUSH_REJECTED}];l=(0,S.Z)((0,We.Tg)(n.upstream.branch),2),r=l[0],i=l[1]}return r&&i?t.force?[3,3]:[4,It(e,{remote:r})]:[2,{error:qe.aq.UPSTREAM_NOT_SET}];case 2:if((c=a.sent()).error)return[2,c];a.label=3;case 3:return t.publish?(s="refs/remotes/".concat(r,"/").concat(i),[4,it(e,s)]):[3,5];case 4:if((u=a.sent()).error)return[2,u];if(u.exists&&u.ref.type===rt.l.REMOTE_BRANCH)return[2,{error:qe.aq.BRANCH_ALREADY_EXISTS}];a.label=5;case 5:return d=["--quiet"],t.force&&!t.publish&&d.push("--force-with-lease"),t.publish&&d.push("--set-upstream"),f="refs/heads/".concat(n.branch,":refs/heads/").concat(i),d.push((0,We.Gw)(r),(0,We.Gw)(f)),[4,e("git push ".concat(d.join(" ")),{serviceMethod:"git-push"})];case 6:return(h=a.sent()).error?[2,h]:[2,{error:null}]}}))})),cn.apply(this,arguments)}function sn(e,t){return un.apply(this,arguments)}function un(){return un=(0,i.Z)((function(e,t){var n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return t=(0,We.ss)(t),(0,nt.GE)(t)?[4,e("git remote rm ".concat((0,We.Gw)(t)),{serviceMethod:"git-remove-remote"})]:[2,{error:qe.aq.INVALID_REFERENCE}];case 1:return(n=r.sent()).error?[2,n]:[2,{error:null}]}}))})),un.apply(this,arguments)}function dn(e,t){return fn.apply(this,arguments)}function fn(){return fn=(0,i.Z)((function(e,t){var n,r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return n=t.remote,r=t.url,n=(0,We.ss)(n),(0,nt.GE)(n)?(0,nt.LY)(r)?(n=(0,We.Gw)(n),r=(0,We.Gw)(r),[4,e("git remote set-url ".concat(n," ").concat(r),{serviceMethod:"git-set-remote-url"})]):[2,{error:qe.aq.INVALID_REFERENCE}]:[2,{error:qe.aq.INVALID_REFERENCE}];case 1:return(i=o.sent()).error?[2,i]:[2,{error:null}]}}))})),fn.apply(this,arguments)}function hn(e){if("all"in e)return e.all?["git add -A"]:["git reset -q -- ."];var t=e.add,n=e.reset;if(!(null===t||void 0===t?void 0:t.length)&&!(null===n||void 0===n?void 0:n.length))return null;var r=[];if(t){var i=t.map(We.Gw).join(" ");r.push("git --literal-pathspecs add -- ".concat(i))}if(n){var o=n.map(We.Gw).join(" ");r.push("git --literal-pathspecs reset -q -- ".concat(o))}return r}function pn(e,t){return mn.apply(this,arguments)}function mn(){return(mn=(0,i.Z)((function(e,t){var n,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return(n=hn(t))?[4,e(n,{serviceMethod:"git-stage-files"})]:[2,{error:null}];case 1:return(r=i.sent()).error?[2,r]:[2,{error:null}]}}))}))).apply(this,arguments)}var vn=n(90879);function gn(){var e=(0,K.Z)(['\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    gitHubInfo {\n      accessToken\n      userInfo {\n        username\n        email\n        avatarUrl\n      }\n    }\n    repositories(count: 1, after: "0") {\n      ... on RepositoryConnection {\n        items {\n          id\n        }\n      }\n    }\n  }\n']);return gn=function(){return e},e}function yn(){var e=(0,K.Z)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return yn=function(){return e},e}var Zn=(0,Q.Ps)(gn()),bn=(0,Q.Ps)(yn(),Zn);function wn(e){var t,n;return"RepositoryConnection"===(null===e||void 0===e||null===(t=e.currentUser)||void 0===t||null===(n=t.repositories)||void 0===n?void 0:n.__typename)}function xn(e){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,i.Z)((function(e){var t,n,r,i,o,l,c,s,u,d,f,h,p,m,v,g,y,Z;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=e.defaultUsername,n=e.defaultUserId,r=e.onProfiles,l=new Map,[4,null===Y.l||void 0===Y.l?void 0:Y.l.query({query:bn,fetchPolicy:"network-only",context:{noBatch:!0}})];case 1:return s=(null!==(c=a.sent())&&void 0!==c?c:{data:null}).data,d=null!==(u=null===s||void 0===s?void 0:s.currentUser)&&void 0!==u?u:{username:t,id:n},f=d.id,h=d.username,f&&h&&(v={provider:qe.rG.REPLIT_DEFAULT,email:"".concat(f,"-").concat(h,"@").concat(vn.J),username:h,avatar:null!==(m=null===s||void 0===s||null===(p=s.currentUser)||void 0===p?void 0:p.image)&&void 0!==m?m:null},l.set(v.provider,v)),(g=null===s||void 0===s||null===(i=s.currentUser)||void 0===i||null===(o=i.gitHubInfo)||void 0===o?void 0:o.userInfo)&&g.email&&g.username&&wn(s)&&(Z={provider:qe.rG.GITHUB,email:g.email,username:g.username,avatar:null!==(y=g.avatarUrl)&&void 0!==y?y:null},l.set(Z.provider,Z)),r(l),[2]}}))}))).apply(this,arguments)}var kn="replit-git-askpass";function Sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.author,n=e.committer,r={GIT_AUTHOR_NAME:"",GIT_AUTHOR_EMAIL:"",GIT_COMMITTER_NAME:"",GIT_COMMITTER_EMAIL:"",GIT_ASKPASS:kn,GIT_PAGER:"",GIT_EDITOR:"",PAGER:"",EDITOR:""};if(t){r.GIT_AUTHOR_NAME=t.username,r.GIT_COMMITTER_NAME=t.username;var i=En(t);r.GIT_AUTHOR_EMAIL=i,r.GIT_COMMITTER_EMAIL=i,n&&(r.GIT_COMMITTER_NAME=n.username,r.GIT_COMMITTER_EMAIL=En(n))}return r}function En(e){if("id"in e)return"".concat(e.id,"-").concat(e.username,"@users.noreply.replit.com");if("email"in e)return e.email;throw new Error("Invalid user")}var Tn=n(12583),Rn=n(4561),Dn=".git";function In(e,t,n){var r=function(){if(!o){o=!0;var n=!0;t.watchDir(Dn,{onChange:function(){n?n=!1:c()},onMoveOrDelete:function(){o=!1,c()},onError:function(t,n){o=!1,new RegExp(".+permission denied","im").test(t.message)||e.unrecoverableError(t,n)}})}},o=!1,l=!1,c=function(e,t){var n,r=t.wait,i=t.cooldown,o=t.maxWait,a=null,l=!1,c=bt()((function(t){return a=setTimeout((function(){return a=null}),i),l=!1,n=e.apply(void 0,(0,s.Z)(t))}),r,{maxWait:o}),u=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return null!==a?n:(l||(l=!0),c(t))};return u.cancel=function(){null!==a?(clearTimeout(a),a=null):(c.cancel(),l=!1)},u.flush=function(){return null!==a?(clearTimeout(a),a=null,n):c.flush()},u.isPending=function(){return l},u.isInCooldown=function(){return null!==a},u}((function(){return n.emit(qe.dq.FS_CHANGE)}),{wait:1e3,cooldown:5e3,maxWait:5e3});function u(){return u=(0,i.Z)((function(){var n;return(0,a.__generator)(this,(function(i){return n=!0,t.watchDir(Tn.Ql,{onChange:function(e){o||e.find((function(e){return e.filename===Dn&&e.type===Rn.Tv.Directory}))&&(r(),n||c());n&&(n=!1)},onError:function(t,n){return e.unrecoverableError(t,n)}}),[2]}))})),u.apply(this,arguments)}!function(){u.apply(this,arguments)}(),t.onStatusChange((function(e){o&&(e===Rn.kO.Syncing&&c.isInCooldown()?l=!0:e===Rn.kO.Clean&&(l||c(),l=!1))}))}var _n=function(){"use strict";function e(t,n){(0,D.Z)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=t,this.debounceTime=n}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.get=function(e){var t=this.cache.get(e);if(!t)throw new Error("No value found for key: ".concat(e));return t.result},t.set=function(e,t){var n=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:t,timeout:setTimeout((function(){return n.cache.delete(e)}),this.ttl),pending:!0};t.finally((function(){return i.pending=!1})),this.cache.set(e,i)},t.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,t=!0,n=!1,r=void 0;try{for(var i,o=this.cache[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,S.Z)(i.value,2),l=a[0],c=a[1];c.pending?e.set(l,c):clearTimeout(c.timeout)}}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},t.clear=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.cache.clear(),this.lastInvalidation=0},e}(),Bn=n(95614),Gn=/^(fatal: |error: |remote: error: |CONFLICT \([^)]+\): )/im;function Pn(e){return new RegExp("^fatal: ".concat(e.source),"im")}function An(e){return new RegExp("^error: ".concat(e.source),"im")}var Nn,Un=[{error:qe.aq.NOT_INITIALIZED,match:[Pn(/not a git repository/)]},{error:qe.aq.UNAUTHENTICATED,match:[Pn(/Authentication failed/),Pn(/unable to access/),Pn(/repository \S+ not found/),Pn(/could not read Username/),Pn(/could not read Password/),Pn(/Could not read from remote/)]},{error:qe.aq.INDEX_FILE_CORRUPT,match:[Pn(/index file corrupt/),Pn(/index file smaller than expected/),An(/index file .*?\.idx is too small/)]},{error:qe.aq.UNKNOWN_REMOTE,match:[Pn(/No such remote/),An(/No such remote/)]},{error:qe.aq.INDEX_LOCKED,match:[Pn(/Unable to create .*?\.git\/index\.lock/),An(/Unable to create .*?\.git\/index\.lock/)]},{error:qe.aq.NO_COMMITS,match:[Pn(/your current branch '.*?' does not have any commits yet/)]},{error:qe.aq.PATH_MATCHED_NO_FILES,match:[Pn(/pathspec '.*?' did not match any files/),Pn(/pathspec '.*?' did not match any file\(s\) known to git/),Pn(/path '.*?' does not exist/),Pn(/path '.*?' exists on disk, but not in/)]},{error:qe.aq.USER_NOT_CONFIGURED,match:[Pn(/unable to auto-detect email address/),Pn(/unable to auto-detect name/),Pn(/empty ident name \(for <.*?>\) not allowed/)]},{error:qe.aq.INVALID_REFERENCE,match:[Pn(/invalid reference: .*?$/),Pn(/'.*?' - not a valid ref/)]},{error:qe.aq.BRANCH_ALREADY_EXISTS,match:[Pn(/A branch named '.*?' already exists/)]},{error:qe.aq.MERGE_CONFLICT,match:[Pn(/Not possible to fast-forward, aborting/),Pn(/refusing to merge unrelated histories/),Pn(/Exiting because of an unresolved conflict/),Pn(/Exiting because of unfinished merge/),An(/Failed to merge in the changes/),(Nn=/Merge conflict in/,new RegExp("^CONFLICT \\([^\\)]+\\): ".concat(Nn.source),"im"))]},{error:qe.aq.UPSTREAM_NOT_SET,match:[Pn(/The current branch \S+ has no upstream branch/),Pn(/No configured push destination/)]},{error:qe.aq.HEAD_DETACHED,match:[Pn(/HEAD does not point to a branch/),Pn(/ref HEAD is not a symbolic ref/)]},{error:qe.aq.DIRTY_WORKTREE,match:[An(/Your local changes to the following files would be overwritten/),An(/The following untracked working tree files would be overwritten/),An(/\S+ is not possible because you have unmerged files/),An(/cannot rebase: You have unstaged changes/)]},{error:qe.aq.PROTECTED_BRANCH,match:[function(e){return new RegExp("^remote: error: ".concat(e.source),"im")}(/.*? Protected branch update failed/)]},{error:qe.aq.PUSH_REJECTED,match:[An(/failed to push some refs to/)]},{error:qe.aq.REMOTE_ALREADY_EXISTS,match:[Pn(/remote .*? already exists/),An(/remote .*? already exists/)]},{error:qe.aq.INVALID_STATE,match:[Pn(/There is no merge in progress/),Pn(/There is no merge to abort/),Pn(/No rebase in progress/)]}];function Ln(e){if(Gn.test(e)){for(var t=0;t<Un.length;t++)for(var n=0;n<Un[t].match.length;n++)if(Un[t].match[n].test(e))return Un[t].error;return qe.aq.UNKNOWN}return qe.aq.UNKNOWN_NOT_GIT}var On=n(61871),Xn=9e4;function Mn(e,t,n,r){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,i.Z)((function(e,t,n,r){var i,l,c,s,u,d,f;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if("open"!==e.status)return[2,{output:"JS Error\nchannel closed before command was run",error:qe.aq.CHANNEL_CLOSED}];a.label=1;case 1:return a.trys.push([1,3,,4]),i="",l=e.onCommand((function(e){null!==e.output&&void 0!==e.output&&(i+=e.output)})),c=void 0,(s=Promise.race([new Promise((function(e){return c=setTimeout(e,Xn)})),e.request({exec:{env:n,args:t,blocking:!0}})])).finally((function(){l(),clearTimeout(c)})),[4,s];case 2:return void 0===(u=a.sent())?(I.kg.error("Git request timed out.",(0,o.Z)({appService:"git",command:t,gitEnv:JSON.stringify(n),TIMEOUT:Xn},r)),[2,{output:i,error:qe.aq.TIMEOUT}]):!u.ok&&u.channelClosed?[2,{output:"JS Error\nchannel closed during command execution",error:qe.aq.CHANNEL_CLOSED}]:u.error||!u.ok?[2,{output:d="".concat(u.error,"\n").concat(i),error:Ln(d)}]:[2,{output:i,error:null}];case 3:return f=a.sent(),x.$e((function(e){e.setTag("service","git"),e.setExtra("command",t),e.setExtra("env",n),r&&e.setExtra("options",r),x.Tb(f)})),[2,{output:"JS Error\n".concat(String(f)),error:qe.aq.UNKNOWN_NOT_GIT}];case 4:return[2]}}))}))).apply(this,arguments)}var Wn,Hn=function(){"use strict";function e(t){var n=t.container,r=t.getEnv,o=t.awaitPromise,l=this;(0,D.Z)(this,e),this.cache=new _n(3e4,2e3),this.running=(0,E.u)(!1),this.queue=[],n.openChannel({service:"exec"},(function(e){var t=e.channel,n=function(){var e=(0,i.Z)((function(e,n){var i,l,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(0===e.length)throw new Error("Expected at least one command");return o?[4,o]:[3,2];case 1:a.sent(),a.label=2;case 2:return i=Date.now(),l=Array.isArray(e)?e.join(" && "):e,[4,Mn(t,["bash","-c",l],r(),n)];case 3:return c=a.sent(),(0,Bn.J)(e,c,!1,i),c.error?[2,c]:[2,{output:(null===n||void 0===n?void 0:n.verbatim)?c.output:c.output.trim(),error:null}]}}))}));return function(t,n){return e.apply(this,arguments)}}(),c=function(e,t){if(0===e.length)throw new Error("Expected at least one command");var r=Array.isArray(e)?e.join(" && "):e;if(l.cache.has(r)){var i=l.cache.get(r);return i.then((function(t){(0,Bn.J)(e,t,!0)})),i}var o=n(r,t);return l.cache.set(r,o),o},s=function(e,t){return l.cache.clear(),n(e,t)},u=l,d=function(){var e=(0,i.Z)((function(){var e;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return u.queue.length>0?"open"!==t.status?[3,7]:(e=u.queue.shift())?"read"!==e.type?[3,2]:[4,e.fn(c)]:[3,6]:[3,7];case 1:return r.sent(),[3,6];case 2:return"write"!==e.type?[3,4]:[4,e.fn(s)];case 3:return r.sent(),[3,6];case 4:return[4,e.fn(n)];case 5:r.sent(),r.label=6;case 6:return[3,0];case 7:return 0===u.queue.length&&u.running.set(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();return l.running.current&&d(),l.running.subscribe((function(e){e&&d()}))}))}var t=e.prototype;return t.add=function(e,t){var n=(0,On.Z)();return this.queue.push({type:t,fn:function(){var t=(0,i.Z)((function(t){var r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,e(t)];case 1:return r=i.sent(),n.resolve(r),[2]}}))}));return function(e){return t.apply(this,arguments)}}()}),this.running.current||this.running.set(!0),n.promise},t.wrap=function(e,t){var n=this;if("function"!==typeof e)throw new Error("Expected a function");return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.add((function(t){return e.apply(void 0,[t].concat((0,s.Z)(i)))}),t)}},e}();function Vn(e,t){return zn.apply(this,arguments)}function zn(){return(zn=(0,i.Z)((function(e,t){var n,r,i,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=t.upstream,r=t.branchName,i=["--set-upstream-to",n],r&&i.push((0,We.Gw)(r)),[4,e("git branch ".concat(i.join(" ")),{serviceMethod:"git-set-branch-upstream"})];case 1:return(o=a.sent()).error?[2,o]:[2,{error:null}]}}))}))).apply(this,arguments)}function jn(e){switch(e){case"A":return Wn.ADDED;case"C":return Wn.COPIED;case"D":return Wn.DELETED;case"M":return Wn.MODIFIED;case"R":return Wn.RENAMED;case"T":return Wn.TYPE_CHANGED;case"U":return Wn.UNMERGED;case"X":default:return Wn.UNKNOWN;case"B":return Wn.BROKEN}}!function(e){e.ADDED="ADDED",e.COPIED="COPIED",e.DELETED="DELETED",e.MODIFIED="MODIFIED",e.RENAMED="RENAMED",e.TYPE_CHANGED="TYPE_CHANGED",e.UNMERGED="UNMERGED",e.UNKNOWN="UNKNOWN",e.BROKEN="BROKEN"}(Wn||(Wn={}));var qn=function(){var e=(0,i.Z)((function(e,t){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,e("git ls-tree --name-only -r ".concat(t))];case 1:return[2,!n.sent().error]}}))}));return function(t,n){return e.apply(this,arguments)}}(),$n=function(){var e=(0,i.Z)((function(e,t){var n,r,i,o,l,c,s,u,d,f;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n="git ls-tree --name-only -r ".concat(t),[4,e(n,{serviceMethod:"git-get-files-for-commit"})];case 1:if((r=a.sent()).error)return[2,r];i=[],o=r.output.split("\n").filter(Boolean),l=!0,c=!1,s=void 0;try{for(u=o[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)f=d.value,i.push({path:f,type:Wn.ADDED})}catch(h){c=!0,s=h}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return[2,{files:i,error:null}]}}))}));return function(t,n){return e.apply(this,arguments)}}();function Yn(e){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,i.Z)((function(e){return(0,a.__generator)(this,(function(t){return[2,Array.from(e.matchAll(Jn)).map((function(e){var t=(0,S.Z)(e,4),n=t[1],r=t[2];return{path:t[3],originalPath:r,type:jn(n)}}))]}))}))).apply(this,arguments)}var Qn=/([ADMUXBT])\0([^\0]+)/g,Jn=/([RC])\d*\0([^\0]+)\0([^\0]+)/g;function er(e,t){return tr.apply(this,arguments)}function tr(){return(tr=(0,i.Z)((function(e,t){var n,r,i,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,qn(e,t)];case 1:return a.sent()?(n="git diff-tree --no-commit-id --name-status -z -r -M ".concat(t),[4,e(n,{serviceMethod:"git-get-files-for-commit"})]):[2,$n(e,t)];case 2:return(r=a.sent()).error?[2,r]:[4,Yn(r.output)];case 3:return i=a.sent(),o=Array.from(r.output.matchAll(Qn)).map((function(e){var t=(0,S.Z)(e,3),n=t[1];return{path:t[2],type:jn(n)}})),[2,{files:(0,s.Z)(i).concat((0,s.Z)(o)),error:null}]}}))}))).apply(this,arguments)}var nr=n(62069),rr=n(9353),ir=n(9434),or=n(50959);function ar(e){return e.sort((function(e,t){return e.externalPort-t.externalPort}))}var lr=n(94284);function cr(e){var t=e.pid2,n=e.runnerMode,r=void 0===n?"shellrunner":n,s=e.onUnrecoverableError,d=e.openFile,h=e.openMultipleFiles,p=e.onFirewallDenied,T=e.channelRequestPriority,R=e.enableUserEvents,D=void 0!==R&&R,_=e.onPresenceCommand,B=(0,l.ZP)({pid2:t,onUnrecoverableError:s,onFirewallDenied:p}),G=function(e){var t=e.container,n=e.enabled,r=e.onEventSent,l=(0,f.ZP)();r&&l.on(Le.EVENT_SENT,r);var c=null;function s(e,t){return u.apply(this,arguments)}function u(){return(u=(0,i.Z)((function(e,r){var i,c,s,u,f,h,p,m,v;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n?[4,d()]:[2];case 1:return s=a.sent(),u=t.getContext(),f=null===u||void 0===u||null===(i=u.currentUser)||void 0===i?void 0:i.id,h=null===u||void 0===u||null===(c=u.repl)||void 0===c?void 0:c.id,p=window.location.href,m=Me((0,o.Z)({userId:f,replId:h,url:p},r)),v={userEvent:{eventName:e,eventData:m}},"open"!==s.status?(x.$e((function(e){e.setTag("service","user-events"),e.setExtra("command",v),e.setExtra("userId",f),e.setExtra("replId",h),e.setExtra("url",p),e.setExtra("channelId",s.id),x.Tb(new Error("UserEvents channel is not open: ".concat(s.status)))})),[2]):(l.emit(Le.EVENT_SENT,e,r),s.send(v),[2])}}))}))).apply(this,arguments)}function d(){return h.apply(this,arguments)}function h(){return(h=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return c?[2,c]:[2,new Promise((function(e){l.once(Le.CHANNEL_OPENED,(function(t){e(t)}))}))]}))}))).apply(this,arguments)}return s("meta:start",{}),t.openChannel({service:"null",skip:function(){return!n}},(function(e){var t=e.channel;return s("meta:ready",{}),c=t,l.emit(Le.CHANNEL_OPENED,t),function(){c=null}})),{emit:s}}({container:B,enabled:Boolean(D)}),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){m()(a,e)||(a=e,r.emit(g.SESSION_STATE_CHANGED,a))},n=function(e,t){var n=t||a.openFiles.length;if(e<0||e>=n||!Number.isInteger(e))throw new Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(n))},r=(0,f.ZP)();r.setMaxListeners(1e3);var i=null,a={openFiles:[],activeTab:0};return{onSessionStateChanged:function(e){return r.on(g.SESSION_STATE_CHANGED,e),function(){r.removeListener(g.SESSION_STATE_CHANGED,e)}},onDeeplinkUpdated:function(e){return r.on(g.DEEPLINK_CHANGED,e),i&&(e(i),i=null),function(){r.removeListener(g.DEEPLINK_CHANGED,e)}},openFile:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.openFile)e.openFile({path:r,newTab:i.newTab,newPane:i.newPane,newPaneEdge:i.newPaneEdge,col:i.col,line:i.line});else{var l=i.tabIndex,c=i.newTab;if(void 0===l)if(a.openFiles.includes(r))t((0,y.Z)((0,o.Z)({},a),{activeTab:a.openFiles.indexOf(r)}));else{var s=a.openFiles.slice();if(c){var u=0===s.length?0:a.activeTab+1;return s.splice(u,0,r),void t({openFiles:s,activeTab:u})}var d=a.activeTab;s.splice(d,1,r),t({openFiles:s,activeTab:d})}else{n(l,a.openFiles.length+1);var f=a.openFiles.slice(),h=a.openFiles.indexOf(r);if(-1===h)return f.splice(l,1,r),void t({openFiles:f,activeTab:f.indexOf(r)});if(h===l)return void t((0,y.Z)((0,o.Z)({},a),{activeTab:f.indexOf(r)}));f.splice(h,1),f.splice(l,0,r);var p=f.indexOf(r);t({openFiles:f,activeTab:p})}}},updateDeeplink:function(e){r.emit(g.DEEPLINK_CHANGED,e),i=e},getActiveFile:function(){var e=a.openFiles,t=a.activeTab;if(0!==e.length)return e[t]},getState:function(){return a}}}({openFile:d}),A=(0,b.Z)({container:B,channelRequestPriority:null===T||void 0===T?void 0:T.fs}),N=v({container:B,onCommand:_}),U=(0,$.Z)({container:B,fs:A,channelRequestPriority:null===T||void 0===T?void 0:T.dotReplit}),L=function(e){var t=e.container,n=(0,f.ZP)(),r=null;function o(){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return r&&"open"===r.status?[2,r]:[2,new Promise((function(e){n.once(ee.CHANNEL_OPENED,(function(t){e(t)}))}))]}))}))).apply(this,arguments)}function c(){return s.apply(this,arguments)}function s(){return(s=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return[2,(0,oe.Y)({container:t,service:"nix"})]}))}))).apply(this,arguments)}t.openChannel({service:"nix"},(function(e){var t=e.channel;return r=t,n.emit(ee.CHANNEL_OPENED,t),function(){r=null}}));var u={searchPackages:function(){var e=(0,i.Z)((function(e){var t,n,r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return[4,c()];case 1:return t=S.Z.apply(void 0,[o.sent(),2]),n=t[0],r=t[1],[4,n.request({nixPackageSearchRequest:{query:e}})];case 2:return(i=o.sent()).channelClosed?[2,{error:"Channel closed",packages:null}]:(r(),i.error?[2,{error:i.error,packages:null}]:i.nixPackageSearchResponse?[2,{packages:i.nixPackageSearchResponse.packages,error:null}]:[2,{error:"Response expected but none received",packages:null}])}}))}));return function(t){return e.apply(this,arguments)}}(),listPackages:(0,i.Z)((function(){var e,t,n,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,c()];case 1:return e=S.Z.apply(void 0,[i.sent(),2]),t=e[0],n=e[1],[4,t.request({nixPackageListRequest:{}})];case 2:return(r=i.sent()).channelClosed?[2,{error:"Channel closed",packages:null}]:(n(),r.error?[2,{error:r.error,packages:null}]:r.nixPackageListResponse?[2,{packages:r.nixPackageListResponse.packages,error:null}]:[2,{error:"Response expected but none received",packages:null}])}}))})),getChannels:(0,i.Z)((function(){var e,t,n,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,c()];case 1:return e=S.Z.apply(void 0,[i.sent(),2]),t=e[0],n=e[1],[4,t.request({nixChannelsRequest:{}})];case 2:return(r=i.sent()).channelClosed?[2,{error:"Channel closed",channels:null}]:(n(),r.error?[2,{error:r.error,channels:null}]:r.nixChannelsResponse?[2,{channels:r.nixChannelsResponse.channels,error:null}]:[2,{error:"Response expected but none received",channels:null}])}}))})),getLatestStableChannel:(0,i.Z)((function(){var e,t,n,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,c()];case 1:return e=S.Z.apply(void 0,[i.sent(),2]),t=e[0],n=e[1],[4,t.request({nixChannelLatestStableRequest:{}})];case 2:return(r=i.sent()).channelClosed?[2,{error:"Channel closed",channel:null}]:(n(),r.error?[2,{error:r.error,channel:null}]:r.nixChannelLatestStableResponse?[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]:[2,{error:"Response expected but none received",channel:null}])}}))})),addPackages:function(){var e=(0,i.Z)((function(e){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,o()];case 1:return[4,n.sent().request({nixPackageAddRequest:{packages:e}})];case 2:return(t=n.sent()).channelClosed?[2,"channel closed"]:t.error?[2,t.error]:t.nixPackageAddResponse?[2,null]:[2,"response expected but non received"]}}))}));return function(t){return e.apply(this,arguments)}}(),removePackages:function(){var e=(0,i.Z)((function(e){var t;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,o()];case 1:return[4,n.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:return(t=n.sent()).channelClosed?[2,"channel closed"]:t.error?[2,t.error]:t.nixPackageRemoveResponse?[2,null]:[2,"response expected but non received"]}}))}));return function(t){return e.apply(this,arguments)}}()};return u}({container:B}),O=(0,nr.Z)({container:B,dotReplit:U}),X=(0,c.Z)({container:B}),M=function(e){var t=e.container,n=e.fs,r=e.openMultipleFiles,o=new Set,l=!1,c=null;return t.openChannel({service:"open"},(function(e){e.channel.onCommand((function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw new Error("Expected replspaceApiOpenMultipleFiles");var t=e.replspaceApiOpenMultipleFiles.files;if(!r||0===t.length)return;ie(),r({paths:t})}}))})),t.openChannel({service:"git"},(function(e){var t=e.channel;return t.onCommand(function(){var e=(0,i.Z)((function(e){var i,s,u,d,f,h,p,m,v,g,y,Z,b,w,x,C;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw new Error("Expected replspaceApiOpenFile");return i=e.replspaceApiOpenFile,s=i.file,u=i.waitForClose,d=i.nonce,r?[3,3]:s.endsWith(".git/COMMIT_EDITMSG")?(f=window.prompt("Enter a commit message"),[4,n.writeFile(s,null!==f&&void 0!==f?f:"")]):(u&&t.send({replspaceApiCloseFile:{file:s,nonce:d}}),window.alert("tried to open ".concat(s," but failed")),[2]);case 2:return a.sent(),u?[3,5]:[2];case 3:return ie(),r({paths:[s]}),u&&c?[4,c(s)]:[2];case 4:a.sent(),a.label=5;case 5:return[4,n.flush()];case 6:return a.sent(),"open"!==t.status||t.send({replspaceApiCloseFile:{file:s,nonce:d}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw new Error("Expected replspaceApiGetGitHubToken");return h=function(){var n;"open"===t.status&&t.send({replspaceApiGitHubToken:{token:"",nonce:null===(n=e.replspaceApiGetGitHubToken)||void 0===n?void 0:n.nonce}})},[4,ne()];case 8:if(null==(p=a.sent()).gitHubInfo)return h(),[2];if(!o.size)return h(),I.kg.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(m=function(){var n,r;"open"===t.status&&t.send({replspaceApiGitHubToken:{token:null===(n=p.gitHubInfo)||void 0===n?void 0:n.accessToken,nonce:null===(r=e.replspaceApiGetGitHubToken)||void 0===r?void 0:r.nonce}})},l)return m(),[2];v=!1,g=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=o[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},y=!0,Z=!1,b=void 0;try{for(w=o[Symbol.iterator]();!(y=(x=w.next()).done)&&(C=x.value,!v);y=!0)C((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!v){if(v=!0,!e)return h(),void g();t&&(l=e),m(),g()}}))}catch(k){Z=!0,b=k}finally{try{y||null==w.return||w.return()}finally{if(Z)throw b}}a.label=9;case 9:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()),function(){}})),{onConfirmSendToken:function(e){var t=function(t){return e(t)};return o.add(t),function(){o.delete(t)}},setWaitForFileClose:function(e){c=e}}}({container:B,fs:A,openMultipleFiles:h}),F=function(){var e=(0,i.Z)((function(e,t){var n,i,l,c,s,d,f,h,p,m,v,g,y,Z,b;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,O.getConfigs()];case 1:return(n=a.sent()).disableInstallBeforeRun?[2]:(G.emit("user:run:prerun",(0,o.Z)({runnerMode:r},t)),[4,A.flush({consistency:u.api.Flush.Consistency.Disk})]);case 2:if(a.sent(),e&&e("prerun flush finished"),!(null===n||void 0===n?void 0:n.packagers))return[3,10];i=!0,l=!1,c=void 0,a.label=3;case 3:a.trys.push([3,8,9,10]),s=n.packagers[Symbol.iterator](),a.label=4;case 4:return(i=(d=s.next()).done)?[3,7]:(f=d.value).guessImports?(h=performance.now(),p=n.disableGuessImports,[4,X.installPackages(f.id,p)]):[3,6];case 5:m=a.sent(),v=performance.now()-h,e&&(m.error?e("prerun packager install finished",{packagerId:f.id,language:f.language,errorMessage:m.error,success:!1}):(g=m.value,y=(null===g||void 0===g?void 0:g.guessedPkgs)||[],Z=y.length,e("prerun packager install finished",{packagerId:f.id,language:f.language,guessedPkgs:y,guessedPkgsCount:Z,guessedAnyPkgs:Z>0,upmGuessDurationMs:null===g||void 0===g?void 0:g.upmGuessDurationMs,upmAddDurationMs:null===g||void 0===g?void 0:g.upmAddDurationMs,upmLockDurationMs:null===g||void 0===g?void 0:g.upmLockDurationMs,backendTotalDurationMs:null===g||void 0===g?void 0:g.totalDurationMs,frontendTotalDurationMs:v,success:!0}),Z>0&&(0,ir.j)(rr.U3.PACKAGER_PACKAGES_GUESSED,{packages:y}))),a.label=6;case 6:return i=!0,[3,4];case 7:return[3,10];case 8:return b=a.sent(),l=!0,c=b,[3,10];case 9:try{i||null==s.return||s.return()}finally{if(l)throw c}return[7];case 10:return G.emit("user:run:initiate",{}),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),W=function(e){var t=e.container,n=e.beforeRun,r=e.isUsingOutputsRunner,i=void 0!==r&&r,o=(0,E.u)(null);return{mainClient:o,connect:function(){return new Promise((function(e){o.current||t.openChannel({service:"debugger"},(function(t){return o.current=j({channel:t.channel,beforeRun:n,isUsingOutputsRunner:i}),e(null),function(){o.current=null}}))}))}}}({container:B,beforeRun:F,isUsingOutputsRunner:"outputs"===r}),H=(0,Z.Z)({mode:r,container:B,toolchain:O,beforeRun:F,packager:X,debuggest:W}),V=function(e){var t,n=e.container,r=(0,f.ZP)(),o=new Promise((function(e){return t=e})),l=null,c=new Map;return n.openChannel({service:"chat",name:"broadcaster"},(function(e){var n=e.channel,i=e.context;return i.currentUser&&(l=i.currentUser.username),n.onCommand((function(e){if("chatMessage"===e.body){var t=e.chatMessage;if(!t||!t.username||!t.text)throw new Error("unexpected broadcast without a message");r.emit(k.MESSAGE_RECEIVED,{text:t.text,username:t.username})}})),t(n),function(){o=new Promise((function(e){return t=e}))}})),{broadcastMessage:function(e,t){var n=t.text;return(0,i.Z)((function(){var t,r,i,s,u,d,f,h,p,m;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,o];case 1:if(t=a.sent(),!l)throw new Error("Cannot broadcast without as username. Is currentUser in context?");r={text:n,username:l},i=!0,s=!1,u=void 0;try{for(d=c[Symbol.iterator]();!(i=(f=d.next()).done);i=!0)h=(0,S.Z)(f.value,2),p=h[0],m=h[1],p!==e&&m(r)}catch(v){s=!0,u=v}finally{try{i||null==d.return||d.return()}finally{if(s)throw u}}return t.send({chatMessage:r}),[2]}}))}))()},onBroadcastReceived:function(e,t){return c.set(e,t),r.on(k.MESSAGE_RECEIVED,t),function(){r.removeListener(k.MESSAGE_RECEIVED,t),c.delete(e)}}}}({container:B}),z=function(e){var t=e.container,n=e.toolchain,r=e.allowNonNix,o=void 0!==r&&r,l=e.fs,c=function(e){var t=v[e];if(!t)throw new Error("LSPNix: removeLanguage called with lspId never configured");var n=t.client;if(n){t.client=null,n.destroy();var r=!0,i=!1,o=void 0;try{for(var a,l=p[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,S.Z)(a.value,2),s=c[0],u=c[1];if(m.get(s)===n){m.delete(s);var d=!0,f=!1,h=void 0;try{for(var g,y=u[Symbol.iterator]();!(d=(g=y.next()).done);d=!0)(0,g.value)(null)}catch(Z){f=!0,h=Z}finally{try{d||null==y.return||y.return()}finally{if(f)throw h}}}}}catch(Z){i=!0,o=Z}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}t.closeChannel(),delete v[e]},s=function(e,t){if(v[e])throw new Error("LSPNix: addLanguage called with lspId already configured");v[e]={client:null,option:t,closeChannel:function(){}},g&&Z(e)},d=function(e){if(!g)return!1;var t=v[e];return!!t&&!t.client},f=function(e,t,n){if((new Date).getTime()-n.getTime()<5e3)if(t<3){var r=1e3*Math.pow(2,t);setTimeout((function(){d(e)&&Z(e,t+1)}),r)}else I.kg.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"});else setTimeout((function(){d(e)&&Z(e)}))},h=function(e){var t=null===e||void 0===e?void 0:e.languageServers;if(t&&0!==t.length){var n={},r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;n[u.id]=u}}catch(B){i=!0,o=B}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var d=!0,f=!1,h=void 0;try{for(var p,m=Object.keys(v)[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var g=p.value;n[g]||c(g)}}catch(B){f=!0,h=B}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}var y=!0,Z=!1,b=void 0;try{for(var w,x=Object.keys(n)[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var C=w.value,k=v[C],S=n[C];k?Ae(k.option,S)||(c(C),s(C,S)):s(C,S)}}catch(B){Z=!0,b=B}finally{try{y||null==x.return||x.return()}finally{if(Z)throw b}}}else{var E=!0,T=!1,R=void 0;try{for(var D,I=Object.keys(v)[Symbol.iterator]();!(E=(D=I.next()).done);E=!0){var _=D.value;c(_)}}catch(B){T=!0,R=B}finally{try{E||null==I.return||I.return()}finally{if(T)throw R}}}},p=new Map,m=new Map,v={},g=!0,y=new Map;function Z(e){return b.apply(this,arguments)}function b(){return b=(0,i.Z)((function(e){var n,r,c,s,d,h,Z,b,w=arguments;return(0,a.__generator)(this,(function(x){switch(x.label){case 0:if(n=w.length>1&&void 0!==w[1]?w[1]:0,!g)throw new Error("LSPNix: Called startClient while not enabled");if(!v[e])throw new Error("LSPNix: No config found for lspId: ".concat(e));return y.get(e)?[4,y.get(e)]:[3,2];case 1:if(x.sent())return[2];x.label=2;case 2:if(r=v[e],c=r.client,r.closeChannel,s=r.option,c)throw new Error("LSPNix: A previous client is already set for language: ".concat(e));return d=function(){},h=new Promise((function(e){d=e})),y.set(e,h),Z=[],b=t.openChannel({service:"lsp2",skip:function(e){if(o)return!1;var t=e.repl.language,n=t.startsWith("nix")||t.startsWith("html");return n||d(null),!n}},(function(r){var o=r.channel,c=null,h=!1,w=function(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!h){h=!0,n||(d(null),y.delete(e)),Z.forEach((function(e){return e()})),null===c||void 0===c||c.destroy(),(null===(t=v[e])||void 0===t?void 0:t.client)===c&&(v[e].client=null),n&&g||b();var r=!0,i=!1,o=void 0;try{for(var a,l=p[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=(0,S.Z)(a.value,2),u=s[0],f=s[1];if(m.get(u)===c){m.delete(u);var w=!0,x=!1,C=void 0;try{for(var k,E=f[Symbol.iterator]();!(w=(k=E.next()).done);w=!0){(0,k.value)(null)}}catch(T){x=!0,C=T}finally{try{w||null==E.return||E.return()}finally{if(x)throw C}}}}}catch(T){i=!0,o=T}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}};if("open"===o.status){var x=new Date;return o.request({startLSP:{languageServerId:e}}).then((function(r){if(r.ok){if(g&&v[e]){Z.push(o.onCommand((function(t){if(t.state===u.api.State.Stopped){if(I.kg.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),w(),!g)return;f(e,n,x)}})));var h=0;Ne(t,(function(){return h++<5&&g&&Ae(v[e].option,s)&&"open"===o.status})).then((function(t){var n;if(Ae(v[e].option,s))if("open"===o.status)if(t.error){var r;I.kg.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null===(r=t.error)||void 0===r?void 0:r.message})}else{var u;if(c=Be({connection:{read:function(e){"open"===o.status&&o.onCommand((function(t){t.output&&e(t.output)}))},write:function(e){"open"===o.status?o.send({input:e}):(null===c||void 0===c?void 0:c.isDestroyed())&&I.kg.error("LSPNix: tried to write to channel but the lsp client is already destroyed")},didClose:function(){return"open"!==o.status}},clientId:e,clientName:v[e].option.name,isSupportedFile:function(e){return(0,Pe.F)(e,s)},applyWorkspaceEdit:function(e){var t=e.edit;return c?(0,Ge.w)({edit:t,fs:l,client:c}):{applied:!1}},getWorkspaceConfiguration:function(){var e;if(!(null===(e=s.config)||void 0===e?void 0:e.configurationJson))return null;var t=null;try{t=JSON.parse(s.config.configurationJson)}catch(n){I.kg.error("Failed to parse LSP workspace configuration",{configurationJson:s.config.configurationJson})}return t}}),null===(n=s.config)||void 0===n?void 0:n.initializationOptionsJson)try{u=JSON.parse(s.config.initializationOptionsJson)}catch(h){I.kg.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:s.config.initializationOptionsJson})}var f=c.initialize({pwd:t.workingDirectory,initializationOptions:u}).catch((function(t){if("Initialize request cancelled"!==(null===t||void 0===t?void 0:t.message))throw I.kg.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null===t||void 0===t?void 0:t.message}),t}));Z.push(c.onServerStateChange(function(){var t=(0,i.Z)((function(t){var n,r,i,l,u,h,g,Z,b,x,C,k,E;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return"open"!==o.status?(I.kg.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:t}),w(),[2]):c?Ae(v[e].option,s)?t===de.a.EXITED?(I.kg.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),w(),[2]):t!==de.a.INITIALIZED?[2]:[4,f]:(I.kg.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:t}),w(),[2]):(I.kg.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:t}),w(),[2]);case 1:if(a.sent(),"open"!==o.status)return I.kg.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),w(),[2];d(c),y.delete(e),v[e].client=c,n=!0,r=!1,i=void 0;try{for(l=p[Symbol.iterator]();!(n=(u=l.next()).done);n=!0)if(h=(0,S.Z)(u.value,2),g=h[0],Z=h[1],(0,Pe.F)(g,s)&&!m.has(g)){m.set(g,c),b=!0,x=!1,C=void 0;try{for(k=Z[Symbol.iterator]();!(b=(E=k.next()).done);b=!0)(0,E.value)(c)}catch(T){x=!0,C=T}finally{try{b||null==k.return||k.return()}finally{if(x)throw C}}}}catch(T){r=!0,i=T}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return[2]}}))}));return function(e){return t.apply(this,arguments)}}()))}else I.kg.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});else I.kg.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"})}))}}else I.kg.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:r.error})})),function(e){var t=e.willReconnect;w(t)}}I.kg.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"})})),v[e].closeChannel=b,[2]}}))})),b.apply(this,arguments)}function w(){return(w=(0,i.Z)((function(){var e;return(0,a.__generator)(this,(function(t){try{e=n.configs.current,h(e),n.configs.subscribe(h)}catch(r){I.kg.error("LSP initialization failed: "+r.message)}return[2]}))}))).apply(this,arguments)}return function(){w.apply(this,arguments)}(),{disable:function(){if(g){g=!1;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.values(v)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o,a=r.value;a.closeChannel(),null===(o=a.client)||void 0===o||o.destroy(),a.client=null;var l=!0,c=!1,s=void 0;try{for(var u,d=p[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=(0,S.Z)(u.value,2),h=f[0],y=f[1];if(m.has(h)){m.delete(h);var Z=!0,b=!1,w=void 0;try{for(var x,C=y[Symbol.iterator]();!(Z=(x=C.next()).done);Z=!0)(0,x.value)(null)}catch(k){b=!0,w=k}finally{try{Z||null==C.return||C.return()}finally{if(b)throw w}}}}}catch(k){c=!0,s=k}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(k){t=!0,n=k}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},enable:function(){if(!g){g=!0;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.keys(v)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)Z(r.value)}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},onClient:function(e,t){var n;p.has(e)||p.set(e,[]),null===(n=p.get(e))||void 0===n||n.push(t);var r=m.get(e);if(r)t(r);else{var i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(v)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if((0,Pe.F)(e,s.option)){s.client&&t(s.client);break}}}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}return function(){var n,r=null!==(n=p.get(e))&&void 0!==n?n:[];p.set(e,r.filter((function(e){return e!==t})))}}}}({container:B,toolchain:O,fs:A}),q=ue({container:B,beforeRun:F}),Y=function(e){var t=e.container,n=e.fs,r=e.provideProfiles,o=void 0===r?xn:r,l=(0,f.ZP)();l.setMaxListeners(1/0);var c=Sn(),s=!1,u=new Map,d=null,h=t.getContext(),p=function(){var e=(0,i.Z)((function(e){var t,n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,o({defaultUsername:null===h||void 0===h||null===(t=h.currentUser)||void 0===t?void 0:t.username,defaultUserId:null===h||void 0===h||null===(n=h.currentUser)||void 0===n?void 0:n.id,onProfiles:function(t){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=(0,S.Z)(o.value,2),s=c[0],f=c[1];u.set(s,f),l.emit(qe.dq.NEW_PROFILE)}}catch(m){r=!0,i=m}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t.has(qe.rG.GITHUB)||u.delete(qe.rG.GITHUB);var h=u.get(qe.rG.REPLIT_DEFAULT),p=u.get(qe.rG.GITHUB);if(d&&!e&&(e=d.provider),e===qe.rG.GITHUB&&p)d=p;else{if(!h)return;d=h}l.emit(qe.dq.CHANGED_PROFILE)}})];case 1:return[2,r.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),m=p(qe.rG.GITHUB),v=new Hn({container:t,getEnv:function(){return c},awaitPromise:m});return l.on(qe.dq.FS_CHANGE,(function(){return v.cache.invalidate()})),l.on(qe.dq.FORCED_REFRESH,(function(){return v.cache.invalidate()})),l.on(qe.dq.NEW_PROFILE,(function(){return v.cache.invalidate()})),l.on(qe.dq.CHANGED_PROFILE,(function(){return v.cache.invalidate()})),l.on(qe.dq.CHANGED_PROFILE,(function(){null!=d&&(c=Sn({author:{username:d.username,email:d.email}}))})),{getEnv:function(){return c},getProfiles:function(){return Array.from(u.values())},hasProfile:function(e){return u.has(e)},getProfile:function(e){var t=u.get(e);if(!t)throw new Error("Fetched a profile that has not been setup!");return t},addProfile:function(e){u.set(e.provider,e),l.emit(qe.dq.NEW_PROFILE)},getCurrentProfile:function(){return d},setCurrentProfile:function(e){var t=u.get(e);if(!t)throw new Error("Can't set a non-existent profile!");d=t,c=Sn({author:{username:t.username,email:t.email}}),l.emit(qe.dq.CHANGED_PROFILE)},onProfileAdded:function(e){var t=function(){var t=Array.from(u.values());e(t)};return l.on(qe.dq.NEW_PROFILE,t),function(){l.off(qe.dq.NEW_PROFILE,t)}},onCurrentProfileChanged:function(e){var t=function(){e(d)};return l.on(qe.dq.CHANGED_PROFILE,t),function(){l.off(qe.dq.CHANGED_PROFILE,t)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return p(e)},onRefresh:function(e){s||(In(t,n,l),s=!0);var r=function(){return e(qe.dq.FS_CHANGE)},i=function(){return e(qe.dq.FORCED_REFRESH)},o=function(){return e(qe.dq.NEW_PROFILE)},a=function(){return e(qe.dq.CHANGED_PROFILE)};return l.on(qe.dq.FS_CHANGE,r),l.on(qe.dq.FORCED_REFRESH,i),l.on(qe.dq.NEW_PROFILE,o),l.on(qe.dq.CHANGED_PROFILE,a),function(){l.off(qe.dq.FS_CHANGE,r),l.off(qe.dq.FORCED_REFRESH,i),l.off(qe.dq.NEW_PROFILE,o),l.off(qe.dq.CHANGED_PROFILE,a)}},forceRefresh:function(){l.emit(qe.dq.FORCED_REFRESH)},isBusy:function(){return v.running.current},onBusyChange:function(e){var t=!1,n=bt()(e,200);return v.running.subscribe((function(e){t&&!e?(n(!1),t=!1):!t&&e&&(n(!0),t=!0)}))},init:v.wrap(zt,"write"),isInitialized:v.wrap(qt,"read"),lsFiles:v.wrap(rn,"read"),status:v.wrap(vt.Z,"read"),log:v.wrap(en,"read"),findDefaultBranches:v.wrap(At,"read"),listBranches:v.wrap(Ut.ZP,"read"),setBranchUpstream:v.wrap(Vn,"write"),stageFiles:v.wrap(pn,"write"),commit:v.wrap(kt,"write"),switchBranch:v.wrap(Et,"write"),branchExists:v.wrap(it,"read"),createBranch:v.wrap(Rt,"write"),getRemotes:v.wrap(Ft,"read"),fetch:v.wrap(It,"write"),canMergeBranches:v.wrap(lt,"read"),pull:v.wrap(an.Z,"write"),push:v.wrap(ln,"write"),getRepositoryState:v.wrap(je.ZP,"read"),getFileContents:v.wrap(Xt,"read"),addRemote:v.wrap(wt,"write"),removeRemote:v.wrap(sn,"write"),setRemoteURL:v.wrap(dn,"write"),getBranch:v.wrap(Lt,"read"),restoreFiles:v.wrap(gt,"write"),lastFetched:v.wrap(et,"read"),merge:v.wrap(ut,"write"),mergeContinue:v.wrap(pt,"write"),mergeAbort:v.wrap(ft,"write"),getConflictingFiles:v.wrap(Ve,"read"),getMergingRefs:v.wrap(Ke,"read"),getFilesForCommit:v.wrap(er,"read")}}({container:B,fs:A}),K=function(e){var t,n=e.container,r=e.nixService;function o(e){return l.apply(this,arguments)}function l(){return l=(0,i.Z)((function(e){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return e&&(t=void 0),t||(t=new Promise(function(){var e=(0,i.Z)((function(e){var t,n;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,r.listPackages()];case 1:return(null===(n=i.sent())||void 0===n||null===(t=n.packages)||void 0===t?void 0:t.some((function(e){return"pkgs.postgresql"===e.name})))?[3,3]:[4,r.addPackages(["pkgs.postgresql"])];case 2:return i.sent(),e(),[3,4];case 3:e(),i.label=4;case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}())),[4,t];case 1:return n.sent(),[2]}}))})),l.apply(this,arguments)}return{ensureNixPsqlPackageInstalled:o,run:function(){var e=(0,i.Z)((function(e){var t,r,i,l,c,s,d,f,h,p,m,v,g;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=e.query,r=e.connectionString,[4,o()];case 1:a.sent(),i=(0,w.Z)({container:n}),l=[],c=null,s=new C.t((function(e){return l.push(e)})),d=null,f=!1,h=new Promise((function(e){var t=i.onStateChanged((function(n){var r=n.state,i=n.stderrBuffer;r!==u.api.State.Running?f&&(d=i,t(),e()):f=!0}))})),i.onOutput((function(e){try{s.process(e)}catch(t){c||(c=t,x.Tb(t,(function(t){return t.setExtra("chunk",e)})))}})),a.label=2;case 2:return a.trys.push([2,,5,6]),[4,i.request({args:["psql",r,"--csv","--command",t],splitStderr:!0})];case 3:return p=a.sent(),[4,h];case 4:return a.sent(),p.error&&!d&&(d=p.error),s.flush(),[3,6];case 5:return i.dispose(),[7];case 6:return d?[2,{columns:s.headers(),rows:l,error:d}]:c?(m=c.message,[2,{columns:null!==(v=s.headers())&&void 0!==v?v:[],rows:l,error:m}]):[2,{columns:null!==(g=s.headers())&&void 0!==g?g:[],rows:l,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}()}}({container:B,nixService:L}),Q=(0,lr.Z)({fs:A}),J=function(e){var t=e.container,n=(0,E.u)([]);return t.onPortOpened((function(e){e.isForwarded&&n.update((function(t){var n=t.findIndex((function(t){return t.localPort===e.port}));-1===n&&(n=t.length);var r=t.slice();return r[n]={localPort:e.port,externalPort:e.externalPort},ar(r)}))})),t.onPortClosed((function(e){n.update((function(t){return ar(t.filter((function(t){return t.localPort!==e.port})))}))})),{openedPorts:n}}({container:B});return{session:P,presence:N,packager:X,container:B,fs:A,runner:H,debuggest:W,broadcast:V,dotReplit:U,nixService:L,lspnix:z,iotester:q,git:Y,psql:K,userEvents:G,replspaceApi:M,toolchain:O,ports:J,secrets:Q}}function sr(e){var t=(0,or.useState)((function(){return cr(e)}))[0];return(0,or.useEffect)((function(){var e=function(){var e,n;null===(n=(e=t.runner).dispose)||void 0===n||n.call(e)};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[t]),t}},75331:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(2272),i=n(50959);function o(e,t){var n=(0,r.Z)(i.useState(null),2),o=n[0],a=n[1];return i.useEffect((function(){var n=!1;return e.readFile(t).then((function(e){n||a(e)})),function(){n=!0}}),[e,t]),o}},15935:function(e,t,n){n.d(t,{ZP:function(){return d},y5:function(){return i},yG:function(){return r}});var r,i,o=n(57135),a=n(96583),l=n(89898);function c(e){switch(e){case r.NOT_INITIALIZED:case r.ON_UNBORN_BRANCH:return i.INITIALIZING;case r.MERGING:case r.REBASING:case r.REVERTING:case r.CHERRY_PICKING:case r.APPLYING_MAILBOX:case r.BISECTING:return i.INTERMEDIATE;case r.DIRTY_WORKTREE:case r.DIRTY_INDEX:case r.CLEAN:return i.NORMAL;case r.DETACHED_HEAD:return i.DETACHED_HEAD}}function s(e,t){return"{ ".concat(e,"; } > /dev/null 2>&1 && echo -n '").concat(t,"' && exit 0")}!function(e){e.NOT_INITIALIZED="NOT_INITIALIZED",e.ON_UNBORN_BRANCH="ON_UNBORN_BRANCH",e.MERGING="MERGING",e.REBASING="REBASING",e.REVERTING="REVERTING",e.CHERRY_PICKING="CHERRY_PICKING",e.APPLYING_MAILBOX="APPLYING_MAILBOX",e.BISECTING="BISECTING",e.DIRTY_WORKTREE="DIRTY_WORKTREE",e.DIRTY_INDEX="DIRTY_INDEX",e.CLEAN="CLEAN",e.DETACHED_HEAD="DETACHED_HEAD"}(r||(r={})),function(e){e.INITIALIZING="INITIALIZING",e.INTERMEDIATE="INTERMEDIATE",e.NORMAL="NORMAL",e.DETACHED_HEAD="DETACHED_HEAD"}(i||(i={}));var u=[s("! git rev-parse --is-inside-work-tree",r.NOT_INITIALIZED),s('[ "$(! git rev-parse HEAD -- 2>&1)" = "fatal: bad revision \'HEAD\'" ]',r.ON_UNBORN_BRANCH),s("git rev-parse -q --verify MERGE_HEAD",r.MERGING),s("[ -d '.git/rebase-apply' ] && [ -f '.git/rebase-apply/applying' ]",r.APPLYING_MAILBOX),s("[ -d '.git/rebase-apply' ] || [ -d '.git/rebase-merge' ]",r.REBASING),s("git rev-parse -q --verify REVERT_HEAD",r.REVERTING),s("git rev-parse -q --verify CHERRY_PICK_HEAD",r.CHERRY_PICKING),s("[ -f '.git/BISECT_LOG' ]",r.BISECTING),s("! git symbolic-ref -q HEAD",r.DETACHED_HEAD),"git update-index -q --refresh > /dev/null || exit $?",s('{ ! git diff-files --quiet; } || [ -n "$(git ls-files --others --exclude-standard)" ]',r.DIRTY_WORKTREE),s("! git diff-index --cached --quiet HEAD --",r.DIRTY_INDEX),'echo -n "CLEAN"'].join(";");function d(e){return f.apply(this,arguments)}function f(){return(f=(0,o.Z)((function(e){var t,n,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return[4,e(u,{serviceMethod:"git-get-repository-state"})];case 1:return(t=o.sent()).error?[2,t]:t.output in r?(n=t.output,i=c(n),[2,{state:n,type:i,error:null}]):[2,{error:l.aq.UNKNOWN}]}}))}))).apply(this,arguments)}},55340:function(e,t,n){n.d(t,{CH:function(){return v},Dc:function(){return d},GE:function(){return f},LY:function(){return h},Pi:function(){return g},Qj:function(){return m},bF:function(){return p},dC:function(){return u}});var r=n(2272),i=n(82417),o=n(63732),a=n(79697),l=/[~^:?*[\\\0-\x20\x7F]/,c=/^(([A-Za-z0-9]+@|http(|s):\/\/)|(http(|s):\/\/[A-Za-z0-9]+@))([A-Za-z0-9.]+(:\d+)?)(?::|\/)([\d/\w.-]+?)$/,s=new RegExp([l,/^$/,/^\//,/\/$/,/\.lock$/,/\/{2,}/,/^\./,/\.$/,/\/\./,/\.\./,/@\{/,/^@$/,/^-/].map((function(e){return"(?:".concat(e.source,")")})).join("|"));function u(e){return 0===e.length||!l.test(e)}function d(e){return!s.test(e)}function f(e){return!s.test(e)}function h(e){return c.test(e)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"===typeof e?(0,i.C)(e):"commit"in e?e.type===a.HO.LOCAL||t&&e.type===a.HO.TRACKED?e.name:"".concat(e.remote,"/").concat(e.name):e.name}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"===typeof e)return e;if("commit"in e)return e.type===a.HO.LOCAL||t&&e.type===a.HO.TRACKED?"refs/heads/".concat(e.name):"refs/remotes/".concat(e.remote,"/").concat(e.name);if(e.type===o.l.BRANCH)return"refs/heads/".concat(e.name);if(e.type===o.l.REMOTE_BRANCH)return"refs/remotes/".concat(e.remote,"/").concat(e.branch);throw new Error("Unknown branch object")}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"===typeof e){if(t&&!e.startsWith("refs/remotes/"))return null;var n=(0,r.Z)((0,i.Tg)(e),1),l=n[0];return l}if("commit"in e)return t&&e.type!==a.HO.REMOTE?null:e.remote;if(e.type===o.l.BRANCH)return null;if(e.type===o.l.REMOTE_BRANCH)return e.remote;throw new Error("Unknown branch object")}function g(e,t){return e===t||null!==e&&null!==t&&m(e)===m(t)}},63732:function(e,t,n){n.d(t,{L:function(){return f},l:function(){return r}});var r,i=n(2272),o=n(55749),a="HEAD -> ",l="refs/heads/",c="refs/remotes/",s="tag: ",u="refs/tags/",d=/^refs\/remotes\/([^/]+)\/HEAD$/;function f(e){switch(function(e){return"HEAD"===e||"refs/HEAD"===e||e.startsWith(a)?r.HEAD:e.startsWith(l)?r.BRANCH:e.startsWith(c)?d.test(e)?r.REMOTE_HEAD:r.REMOTE_BRANCH:e.startsWith(u)||e.startsWith(s)?r.TAG:r.BRANCH}(e)){case r.HEAD:return e.startsWith(a)?e.endsWith("(detached)")?{type:r.HEAD,name:"HEAD",detached:!0,ref:null}:{type:r.HEAD,name:"HEAD",detached:!1,ref:f(e.slice(a.length))}:{type:r.HEAD,name:"HEAD",detached:!1,ref:null};case r.REMOTE_HEAD:var t=e.slice(c.length),n=(0,i.Z)(t.split("/"),1)[0];return{type:r.REMOTE_HEAD,name:"HEAD",remote:n};case r.BRANCH:return{type:r.BRANCH,name:e.startsWith(l)?e.slice(l.length):e};case r.REMOTE_BRANCH:var h=e.slice(c.length),p=(0,o.Z)(h.split("/")),m=p[0],v=p.slice(1).join("/");return{type:r.REMOTE_BRANCH,name:h,remote:m,branch:v};case r.TAG:return e.startsWith(s)&&(e=e.slice(s.length)),e.startsWith(u)&&(e=e.slice(u.length)),{type:r.TAG,name:e}}}!function(e){e.HEAD="HEAD",e.REMOTE_HEAD="REMOTE_HEAD",e.BRANCH="BRANCH",e.REMOTE_BRANCH="REMOTE_BRANCH",e.TAG="TAG"}(r||(r={}))},79697:function(e,t,n){n.d(t,{HO:function(){return r},ZP:function(){return m},p3:function(){return d}});var r,i=n(57135),o=n(2272),a=n(9970),l=n(96583),c=n(82417),s=n(63732),u='--format="'+["%(refname)","%(push)","%(objectname)","%(authorname)","%(authoremail)","%(authordate:unix)"].join("%09")+'"';function d(e,t){return!(!e||!t)&&(e===t||e.name===t.name&&e.remote===t.remote)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1===e.local&&!1===e.remote)throw new Error("Cannot specify both local and remote as false");var t,n,r=[];if(r.push(u),e.max&&r.push("--count=".concat(e.max)),e.pattern)if("string"===typeof e.pattern)r.push((0,c.Gw)(e.pattern));else{var i,o=e.pattern.map((function(e){return(0,c.Gw)(e)}));(i=r).push.apply(i,(0,a.Z)(o))}else(null===(t=e.local)||void 0===t||t)&&r.push("refs/heads"),(null===(n=e.remote)||void 0===n||n)&&r.push("refs/remotes");return"git for-each-ref ".concat(r.join(" "))}function h(e){var t=(0,o.Z)(e.split("\t"),6),n=t[0],i=t[1],a=t[2],l=t[3],u=t[4],d=t[5],f=(0,s.L)(n),h={hash:a,author:{name:l,email:(0,c.tc)(u),date:1e3*parseInt(d,10)}};if(f.type===s.l.BRANCH){var p=i?(0,s.L)(i):null,m=!p||p.type!==s.l.REMOTE_BRANCH&&p.type!==s.l.BRANCH?null:p;return{type:r.LOCAL,name:f.name,push:m,remote:null,tracking:null,commit:h}}return f.type===s.l.REMOTE_BRANCH?{type:r.REMOTE,name:f.branch,remote:f.remote,push:null,tracking:null,commit:h}:null}function p(e){var t=[],n=[],i=!0,o=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var d=c.value;d.type===r.LOCAL?t.push(d):d.type===r.REMOTE&&n.push(d)}}catch(w){o=!0,l=w}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}var f=new Set,h=[],p=!0,m=!1,v=void 0;try{for(var g,y=function(){var e=g.value,n=t.find((function(t){return t.push&&t.push.type===s.l.REMOTE_BRANCH&&t.push.remote===e.remote&&t.push.branch===e.name&&t.name===e.name}));n&&(f.add(e),f.add(n),h.push({type:r.TRACKED,name:n.name,remote:e.remote,push:n.push,tracking:e,commit:n.commit}))},Z=n[Symbol.iterator]();!(p=(g=Z.next()).done);p=!0)y()}catch(w){m=!0,v=w}finally{try{p||null==Z.return||Z.return()}finally{if(m)throw v}}var b=e.filter((function(e){return!f.has(e)}));return(0,a.Z)(b).concat((0,a.Z)(h))}function m(e){return v.apply(this,arguments)}function v(){return v=(0,i.Z)((function(e){var t,n,r,i,o,a=arguments;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},n=f(t),[4,e(n,{serviceMethod:"git-list-branches"})];case 1:return(r=l.sent()).error?[2,r]:(i=(0,c.so)(r.output,"\n").map(h).filter((function(e){return null!==e})),(o=p(i)).sort((function(e,t){return t.commit.author.date-e.commit.author.date})),[2,{branches:o,error:null}])}}))})),v.apply(this,arguments)}!function(e){e.LOCAL="LOCAL",e.REMOTE="REMOTE",e.TRACKED="TRACKED"}(r||(r={}))},89399:function(e,t,n){n.d(t,{T:function(){return r},Z:function(){return u}});var r,i=n(57135),o=n(2272),a=n(96583),l=n(89898),c=n(82417),s=n(87803);function u(e){return d.apply(this,arguments)}function d(){return d=(0,i.Z)((function(e){var t,n,i,u,d,f,h,p,m,v=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=v.length>1&&void 0!==v[1]?v[1]:{},[4,(0,s.Z)(e)];case 1:if((n=a.sent()).error)return[2,n];if(!n.branch)return[2,{error:l.aq.HEAD_DETACHED}];if(!n.upstream)return[2,{error:l.aq.UPSTREAM_NOT_SET}];if(i=(0,o.Z)((0,c.Tg)(n.upstream.branch),2),u=i[0],d=i[1],!u||!d)return[2,{error:l.aq.UPSTREAM_NOT_SET}];if(n.changes.length>0)return[2,{error:l.aq.DIRTY_WORKTREE}];if((h=null!==(f=t.mode)&&void 0!==f?f:r.FF_ONLY)===r.FF_ONLY&&n.upstream.ahead>0)return[2,{error:l.aq.MERGE_CONFLICT}];switch(h!==r.FF_ONLY&&0===n.upstream.ahead&&(h=r.FF_ONLY),p=["--quiet","--no-edit"],h){case r.FF_ONLY:p.push("--no-rebase","--ff-only");break;case r.MERGE:p.push("--no-rebase","--ff");break;case r.REBASE:p.push("--rebase")}return p.push((0,c.Gw)(u),(0,c.Gw)(d)),[4,e("git pull ".concat(p.join(" ")),{serviceMethod:"git-pull"})];case 2:if((m=a.sent()).error!==l.aq.MERGE_CONFLICT)return[3,8];if(t.allowConflicts)return[2,{hasConflicts:!0,error:null}];switch(h){case r.MERGE:return[3,3];case r.REBASE:return[3,5]}return[3,7];case 3:return[4,e("git merge --abort",{serviceMethod:"git-pull"})];case 4:case 6:return a.sent(),[3,7];case 5:return[4,e("git rebase --abort",{serviceMethod:"git-pull"})];case 7:return[2,m];case 8:return m.error?[2,m]:[2,{hasConflicts:!1,error:null}]}}))})),d.apply(this,arguments)}!function(e){e.FF_ONLY="FF_ONLY",e.MERGE="MERGE",e.REBASE="REBASE"}(r||(r={}))},90879:function(e,t,n){n.d(t,{J:function(){return r},O:function(){return i}});var r="users.noreply.replit.com",i="users.noreply.github.com"},95614:function(e,t,n){n.d(t,{J:function(){return i},e:function(){return r}});var r=(0,n(50968).u)(null);function i(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var a=null!==(i=t.output)&&void 0!==i?i:"",l=t.error,c=n?o:Date.now(),s="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:l,start:o,end:c,cached:n,key:s})}},89898:function(e,t,n){var r,i,o;n.d(t,{aq:function(){return r},dq:function(){return i},rG:function(){return o}}),function(e){e.UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",e.UNKNOWN="UNKNOWN",e.TIMEOUT="TIMEOUT",e.CHANNEL_CLOSED="CHANNEL_CLOSED",e.NOT_INITIALIZED="NOT_INITIALIZED",e.UNAUTHENTICATED="UNAUTHENTICATED",e.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",e.UNKNOWN_REMOTE="UNKNOWN_REMOTE",e.INDEX_LOCKED="INDEX_LOCKED",e.NO_COMMITS="NO_COMMITS",e.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",e.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",e.INVALID_REFERENCE="INVALID_REFERENCE",e.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",e.MERGE_CONFLICT="MERGE_CONFLICT",e.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",e.HEAD_DETACHED="HEAD_DETACHED",e.DIRTY_WORKTREE="DIRTY_WORKTREE",e.PUSH_REJECTED="PUSH_REJECTED",e.REMOTE_ALREADY_EXISTS="REMOTE_ALREADY_EXISTS",e.ALREADY_INITIALIZED="ALREADY_INITIALIZED",e.INVALID_STATE="INVALID_STATE",e.PROTECTED_BRANCH="PROTECTED_BRANCH"}(r||(r={})),function(e){e.FS_CHANGE="FS_CHANGE",e.FORCED_REFRESH="FORCED_REFRESH",e.NEW_PROFILE="NEW_PROFILE",e.CHANGED_PROFILE="CHANGED_PROFILE"}(i||(i={})),function(e){e.REPLIT_DEFAULT="REPLIT_DEFAULT",e.GITHUB="GITHUB"}(o||(o={}))},28991:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(9970),i=n(51467),o=n(85919),a=n(89898),l=n(28435),c=n(50959),s=n(3341),u=n.n(s);function d(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=(0,c.useState)(null),h=f[0],p=f[1],m=(0,i.Z)(h),v=null===(n=null!==(t=d.keepStaleResult)&&void 0!==t?t:d.refresh)||void 0===n||n,g=(0,c.useCallback)((function(e){u()(e,m.current)||p(e)}),[m]),y=(0,o.Z)((function(){return e}),(0,r.Z)(s)),Z=(0,l.Z)().git,b=(0,c.useRef)(null),w=(0,c.useCallback)((function(){b.current?b.current():v||g(null);var e=!1;y(Z).then((function(t){e||(g(t),b.current=null)})).catch((function(){if(!e){var t={error:a.aq.UNKNOWN};g(t),b.current=null}})),b.current=function(){e=!0,b.current=null,v||g(null)}}),[g,y,Z,v]);return(0,c.useEffect)((function(){return w()}),[w]),(0,c.useEffect)((function(){var e;if(null===(e=d.refresh)||void 0===e||e)return Z.onRefresh(w)}),[Z,w,d.refresh]),h}},80724:function(e,t,n){var r,i;n.d(t,{Z:function(){return i},z:function(){return r}}),function(e){e.INSTRUCTION_RESULT="INSTRUCTION_RESULT",e.TEST_RESULT="TEST_RESULT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED"}(r||(r={})),function(e){e[e.Idle=0]="Idle",e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Building=3]="Building",e[e.Running=4]="Running"}(i||(i={}))},75356:function(e,t,n){n.d(t,{w:function(){return l}});var r=n(85521),i=n(4561),o=n(22011);function a(e){var t=e.path,n=e.fs,o=e.edits,a=!1,l=n.watchTextFile(t,{onReady:function(e){var t=e.writeChange,n=e.initialContent;t((0,r.Z)(o,n.toString())),a=!0},onStatusChange:function(e){e===i.KF.Clean&&a&&l()}})}function l(e){var t=e.edit,n=e.fs,r=e.client,l=t.documentChanges,c=t.changes;if(l&&l.forEach((function(e){if("textDocument"in e){var t=e.edits,l=e.textDocument;a({path:r.documentUriToPath(l.uri),fs:n,edits:t})}else switch(e.kind){case"create":var c=r.documentUriToPath(e.uri),s=e.options,u=Boolean((null===s||void 0===s?void 0:s.overwrite)||!(null===s||void 0===s?void 0:s.ignoreIfExists)),d=function(){n.writeFile(c,o.Z.from("")).then((function(e){if(e.error)throw new Error("Something went wrong writing to a file")}))};if(u){d();break}n.stat(c).then((function(e){e.exists||d()}));break;case"delete":var f=r.documentUriToPath(e.uri),h=e.options,p=Boolean(null===h||void 0===h?void 0:h.recursive),m=Boolean(null===h||void 0===h?void 0:h.ignoreIfNotExists);n.stat(f).then((function(e){if(!e.exists)throw new Error("Expected file to exist");if(e.type===i.Tv.Directory&&!p)throw new Error("Trying to delete a directory without recursive option enabled");n.deleteFile(f).then((function(e){var t=e.error;if((t!==i.Df.NotFound||!m)&&t)throw new Error("Something went wrong deleting the file")}))}));break;case"rename":var v=r.documentUriToPath(e.oldUri),g=r.documentUriToPath(e.newUri),y=e.options,Z=Boolean((null===y||void 0===y?void 0:y.overwrite)||!(null===y||void 0===y?void 0:y.ignoreIfExists)),b=function(){n.moveFile(v,g).then((function(e){if(e.error)throw new Error("Something went wrong moving the file")}))};if(Z){b();break}n.stat(g).then((function(e){e.exists||b()}))}})),c)for(var s in c){var u=r.documentUriToPath(s),d=c[s];a({path:u,fs:n,edits:d})}return{applied:!0}}},61e3:function(e,t,n){n.d(t,{D:function(){return o},v:function(){return a}});var r=n(48960),i=[{id:"abap",name:"ABAP",extensions:[".abap"]},{id:"aes",name:"AES",extensions:[".aes"]},{id:"apex",name:"Apex",extensions:[".cls"]},{id:"azcli",name:"Azure CLI",extensions:[".azcli"]},{id:"bat",name:"Batch",extensions:[".bat",".cmd"]},{id:"bibtex",name:"BibTeX",extensions:[".bib",".bbl"]},{id:"bicep",name:"Bicep",extensions:[".bicep"]},{id:"c",name:"C",extensions:[".c",".h"]},{id:"cameligo",name:"CameLigo",extensions:[".mligo"]},{id:"clojure",name:"Clojure",extensions:[".clj",".cljs",".cljc",".edn"]},{id:"coffeescript",name:"Coffeescript",extensions:[".coffee"]},{id:"cpp",name:"C++",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"]},{id:"csharp",name:"C#",extensions:[".cs",".csx",".cake"]},{id:"css",name:"CSS",extensions:[".css"]},{id:"d",name:"D",extensions:[".d"]},{id:"dart",name:"Dart",extensions:[".dart"]},{id:"diff",name:"Diff",extensions:[".diff",".patch"]},{id:"dockerfile",name:"Dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"]},{id:"ecl",name:"ECL",extensions:[".ecl"]},{id:"ejs",name:"EJS",extensions:[".ejs"]},{id:"elisp",name:"Emacs Lisp",extensions:[".el"]},{id:"elixir",name:"Elixir",extensions:[".ex",".exs"]},{id:"elm",name:"Elm",extensions:[".elm"]},{id:"erlang",name:"Erlang",extensions:[".erl",".hrl"]},{id:"flow9",name:"Flow9",extensions:[".flow"]},{id:"forth",name:"Forth",extensions:[".fth"]},{id:"fortran",name:"Fortran",extensions:[".f",".for",".f90"]},{id:"freemarker2",name:"FreeMarker 2",extensions:[".ftl",".ftlh",".ftlx"]},{id:"fsharp",name:"F#",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"]},{id:"gitignore",name:"Ignore"},{id:"glsl",name:"OpenGL Shading Language",extensions:[".vert",".tesc",".tese",".geom",".frag",".comp",".glsl",".glslv",".glslf",".glslg"]},{id:"go",name:"Go",extensions:[".go"]},{id:"graphql",name:"GraphQL",extensions:[".graphql",".gql"]},{id:"groovy",name:"Groovy",extensions:[".groovy",".gvy",".gy",".gsh"]},{id:"handlebars",name:"Handlebars",extensions:[".handlebars",".hbs"]},{id:"haskell",name:"Haskell",extensions:[".hs",".lhs"]},{id:"hcl",name:"HCL",extensions:[".tf",".tfvars",".hcl"]},{id:"html",name:"HTML",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"]},{id:"erb",name:"Ruby",extensions:[".erb",".rhtml",".rhtm"]},{id:"ini",name:"Ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"]},{id:"jade",name:"JADE",extensions:[".jade",".pug"]},{id:"java",name:"Java",extensions:[".java",".jav"]},{id:"javascript",name:"JavaScript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],filenames:["jakefile"]},{id:"javascriptreact",name:"JavaScript JSX",extensions:[".jsx"]},{id:"json",name:"JSON",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"]},{id:"julia",name:"Julia",extensions:[".jl"]},{id:"kotlin",name:"Kotlin",extensions:[".kt",".kts"]},{id:"latext",name:"LaTeX",extensions:[".tex"]},{id:"less",name:"Less",extensions:[".less"]},{id:"lexon",name:"Lexon",extensions:[".lex"]},{id:"liquid",name:"Liquid",extensions:[".liquid"]},{id:"lisp",name:"Lisp",extensions:[".lisp",".lsp",".l",".fasl"]},{id:"lua",name:"Lua",extensions:[".lua"]},{id:"m3",name:"Modula-3",extensions:[".m3",".i3",".mg",".ig"]},{id:"makefile",name:"Makefile",filenames:["Makefile","makefile","GNUmakefile"],extensions:[".mak",".MAKE"]},{id:"markdown",name:"Markdown",extensions:[".md",".mdx",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"]},{id:"mips",name:"MIPS",extensions:[".s"]},{id:"msdax",name:"X++",extensions:[".dax",".msdax"]},{id:"nim",name:"Nim",extensions:[".nim"]},{id:"objective-c",name:"Objective-C",extensions:[".m"]},{id:"objective-cpp",name:"Objective-C++",extensions:[".mm"]},{id:"ocaml",name:"OCaml",extensions:[".ml",".mli"]},{id:"pascal",name:"Pascal",extensions:[".pas",".p",".pp"]},{id:"pascaligo",name:"PascaLigo",extensions:[".ligo"]},{id:"perl",name:"Perl",extensions:[".pl"]},{id:"perl6",name:"Perl 6",extensions:[".pl6",".p6",".pm6",".pod6",".t6",".raku",".rakumod",".rakutest"]},{id:"php",name:"PHP",extensions:[".php",".php4",".php5",".phtml",".ctp"]},{id:"pla",name:"PLA",extensions:[".pla"]},{id:"plaintext",name:"Plain Text",extensions:[".txt"]},{id:"postiats",name:"Postiats",extensions:[".dats",".sats",".hats"]},{id:"powerquery",name:"Power Query",extensions:[".pq",".pqm"]},{id:"powershell",name:"Powershell",extensions:[".ps1",".psm1",".psd1"]},{id:"processing",name:"Processing",extensions:[".pde"]},{id:"prolog",name:"Prolog",extensions:[".pro",".plg"]},{id:"proto",name:"Proto",extensions:[".proto"]},{id:"python",name:"Python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"]},{id:"qsharp",name:"Q#",extensions:[".qs"]},{id:"r",name:"R",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"]},{id:"razor",name:"Razor",extensions:[".cshtml"]},{id:"reason",name:"Reason",extensions:[".re",".rei"]},{id:"redis",name:"Redis",extensions:[".redis"]},{id:"restructuredtext",name:"reStructuredText",extensions:[".rst"]},{id:"ruby",name:"Ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"]},{id:"rust",name:"Rust",extensions:[".rs",".rlib"]},{id:"sass",name:"Sass",extensions:[".sass"]},{id:"sb",name:"Small Basic",extensions:[".sb"]},{id:"scala",name:"Scala",extensions:[".scala",".sc",".sbt"]},{id:"scheme",name:"Scheme",extensions:[".scm",".ss",".sch",".rkt"]},{id:"scss",name:"SCSS",extensions:[".scss"]},{id:"shellscript",name:"Shell Script",extensions:[".sh",".bash"]},{id:"sol",name:"Solidity",extensions:[".sol"]},{id:"sparql",name:"SPARQL",extensions:[".rq"]},{id:"sql",name:"SQL",extensions:[".sql"]},{id:"st",name:"Structured Text",extensions:[".st",".iecst",".iecplc",".lc3lib"]},{id:"svelte",name:"Svelte",extensions:[".svelte"]},{id:"swift",name:"Swift",extensions:[".swift"]},{id:"systemverilog",name:"SystemVerilog",extensions:[".sv",".svh"]},{id:"tcl",name:"Tcl",extensions:[".tcl"]},{id:"toml",name:"TOML",extensions:[".toml"],filenames:[".replit"]},{id:"twig",name:"Twig",extensions:[".twig"]},{id:"typescript",name:"TypeScript",extensions:[".ts"]},{id:"typescriptreact",name:"TypeScript JSX",extensions:[".tsx"]},{id:"vb",name:"Visual Basic",extensions:[".vb"]},{id:"verilog",name:"Verilog",extensions:[".v",".vh"]},{id:"vue",name:"Vue",extensions:[".vue"]},{id:"xml",name:"XML",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"]},{id:"yaml",name:"YAML",extensions:[".yaml",".yml"]}],o=function(e,t){var n=(0,r.extname)(e),o=(0,r.basename)(e),a=i.filter((function(e){var t,r;return(null===(t=e.extensions)||void 0===t?void 0:t.includes(n))||(null===(r=e.filenames)||void 0===r?void 0:r.includes(o))}));if(t){var l=a.find((function(e){return e.id===t.toLowerCase()}));if(l)return l.id}return a.length>0?a[0].id:null},a=function(e,t){var n=o(e,t);if(!n)return null;var r=i.find((function(e){return e.id===n}));return r?r.name:null}},39151:function(e,t,n){var r=n(7225);t.Z=[r.SymbolKind.Array,r.SymbolKind.Boolean,r.SymbolKind.Class,r.SymbolKind.Constant,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.EnumMember,r.SymbolKind.Event,r.SymbolKind.Field,r.SymbolKind.File,r.SymbolKind.Function,r.SymbolKind.Interface,r.SymbolKind.Key,r.SymbolKind.Method,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Object,r.SymbolKind.Operator,r.SymbolKind.Package,r.SymbolKind.Property,r.SymbolKind.String,r.SymbolKind.Struct,r.SymbolKind.TypeParameter,r.SymbolKind.Variable]},85521:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(2272),i=n(87708),o=n(8082),a=n(64116);function l(e,t){var n=i.xv.of(t.split("\n")),l=i.as.empty(n.length);if(!e.length)return l;if(1===e.length){var c=(0,r.Z)(e,1)[0],s=c.range,u=s.start,d=s.end,f=c.newText,h=(0,a.R)(n,u);if(0===h||-1===h){var p=(0,a.R)(n,d);if(p===n.length||-1===p)return(0,o.F)(t,f)}}var m=[],v=!0,g=!1,y=void 0;try{for(var Z,b=e[Symbol.iterator]();!(v=(Z=b.next()).done);v=!0){var w=Z.value,x=w.range,C=w.newText,k=(0,a.R)(n,x.start),S=(0,a.R)(n,x.end);m.push({from:k,to:S,insert:C})}}catch(E){g=!0,y=E}finally{try{v||null==b.return||b.return()}finally{if(g)throw y}}return i.as.of(m,t.length)}},79836:function(e,t,n){var r,i;n.d(t,{N:function(){return r},a:function(){return i}}),function(e){e.NOT_READY="NOT_READY",e.READY="READY",e.STALLED="STALLED"}(r||(r={})),function(e){e.OFFLINE="OFFLINE",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.EXITING="EXITING",e.EXITED="EXITED"}(i||(i={}))},23743:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(2272),i=n(50959),o=n(28435),a=n(72006),l=n(4405),c=n(16783),s=n.n(c),u=n(7131),d=n(68339),f=n(79836);function h(e){return Math.floor(performance.now()-e.startTime)}var p=new WeakSet;function m(e){var t=e.client,n=e.replId,r=e.language;if(!p.has(t)){p.add(t);var i=new Map,o=function(e){var i,o=t.getServerState(),a=null!==(i=t.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===f.a.INITIALIZED?"".concat(null===a||void 0===a?void 0:a.name,"@").concat(null===a||void 0===a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:n,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:t.clientId}},c=s()((function(e,t){var n=h(t);n>1e4&&u.kg.time("LSP unresponsive request",n,o(t))})),m=setInterval((function(){i.forEach((function(e){c(e.id,e)}))}),2e3);return(0,d.uf)([t.onRequest((function(e){var t=e.id,n=e.data;Math.random()<.01&&i.set(t,{id:t,method:n.method,startTime:performance.now()})})),t.onResponse((function(e){var t=e.id,n=e.error,r=i.get(t);null!=r&&(i.delete(t),u.kg.time("LSP request",h(r),(0,l.Z)((0,a.Z)({},o(r)),{result:null==n?"ok":"error"})))})),t.onCancelRequest((function(e){var t=i.get(e);null!=t&&(i.delete(e),u.kg.time("LSP request",h(t),(0,l.Z)((0,a.Z)({},o(t)),{result:"cancelled"})))})),function(){return clearInterval(m)},function(){return p.delete(t)}])}}var v=n(61e3),g=n(73175),y=n(34547);function Z(e){var t=(0,y.Z)(),n=(0,g.Z)(),a=(0,o.Z)().lspnix,l=(0,r.Z)(i.useState(null),2),c=l[0],s=l[1];return i.useEffect((function(){if(e){var t=a.onClient(e,s);return function(){t(),s(null)}}}),[a,e]),i.useEffect((function(){if(c)return m({client:c,replId:t,language:(0,v.D)(e,n)})}),[c,t,e,n]),c}},716:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(2272),i=n(50959);function o(e){var t=e.presence,n=(0,r.Z)(i.useState(t.getActiveUsers()),2),o=n[0],a=n[1];return i.useEffect((function(){return a(t.getActiveUsers()),t.onActiveUsersChange((function(e){return a(e)}))}),[t]),o}},77463:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(2272),i=n(50959),o=n(28435);function a(){var e=(0,o.Z)().presence,t=(0,r.Z)(i.useState(e.getFollowedUser()),2),n=t[0],a=t[1];return i.useEffect((function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)}),[e]),n}},25422:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(77463);function i(){var e=(0,r.Z)();return e?e.color:null}},72098:function(e,t,n){n.d(t,{N5:function(){return l},f0:function(){return a},gs:function(){return c},i7:function(){return o}});var r=n(37047),i=Object.values(r.Z.multiplayer);function o(e){var t={};return i.forEach((function(e){t[e]=0})),e.forEach((function(e){t[e.color]++})),Object.keys(t).sort((function(e,n){return t[e]-t[n]}))[0]}function a(e){var t=e.sessions.sort((function(e,t){return e.timestamp-t.timestamp})),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.activeFile)return l.activeFile}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}function l(e,t){var n=t.find((function(t){return t.sessions.some((function(t){return t.id===e}))}));if(!n)throw new Error("Expected user with session ID ".concat(e));return n}function c(e){var t=e.seconds,n=e.nanos;return Number(t||0)+(n||0)/1e9}},83387:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(45942),i=n(33723);function o(e,t){var n=(0,r.rF)(t.fileTypeAttrs);return!n&&(null===t||void 0===t?void 0:t.language)&&(n=r.$R.from(t.language)),!(!n||!(0,i.JW)(e,n))}},27124:function(e,t,n){n.d(t,{M:function(){return k},l:function(){return C}});var r=n(57389),i=n(72006),o=n(4405),a=n(74985),l=n(34547),c=n(61025),s=n(88965),u=n(53312),d=n(26473),f=n(84786),h=n(62219),p=n(35291),m=n(94979),v=n(50959),g=n(8500),y=n(11278),Z=n(29262),b=n(12273),w=n(17436),x=(0,c.X)({storageBarWrapper:[s.l0.colWithGap(8)],summaryWrapper:[s.l0.colWithGap(8),s.l0.align.start],totalSummaryDot:[s.l0.backgroundColor.backgroundHigher,s.l0.width(8),s.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[s.l0.backgroundColor.accentPrimaryDefault,s.l0.width(8),s.l0.height(8),{borderRadius:"50%"}],summaryRow:[s.l0.rowWithGap(8),s.l0.justify.start,s.l0.align.center,s.l0.fontSize(14),s.l0.height(14)],summaryRowWrap:[s.l0.rowWithGap(8),s.l0.justify.start,s.l0.align.center,s.l0.fontSize(14),{flexWrap:"wrap"}],replSummaryText:[s.l0.color.accentPrimaryStronger],replSummaryUsage:[s.l0.color.accentPrimaryStrongest],replSummaryTextPlaceholder:[m.p.backgroundPulse(s.TV.backgroundHigher,s.TV.backgroundRoot),{opacity:.5},s.l0.borderRadius(4),s.l0.height("100%"),s.l0.width(78)],replUsagePlaceholder:[m.p.backgroundPulse(s.TV.backgroundHigher,s.TV.backgroundRoot),{opacity:.5},s.l0.borderRadius(4),s.l0.height("100%"),s.l0.width(64)],totalUsagePlaceholder:[m.p.backgroundPulse(s.TV.backgroundHigher,s.TV.backgroundRoot),{opacity:.5},s.l0.borderRadius(4),s.l0.height("100%"),s.l0.width(140)],availablePlaceholder:[m.p.backgroundPulse(s.TV.backgroundHigher,s.TV.backgroundRoot),{opacity:.5},s.l0.borderRadius(4),s.l0.height("100%"),s.l0.width(64)],availableText:[s.l0.color.foregroundDimmest,(0,r.Z)({},s.BC.max(390),s.l0.pl(16))]}),C=function(e){var t,n=e.data,r=e.hideAlerts,c=void 0!==r&&r,s=(0,l.Z)(),m=(0,v.useState)(!1),C=m[0],S=m[1],E=(0,w.Q)();if((0,v.useEffect)((function(){var e,t;n&&"AccountStorageUtilization"===(null===(e=n.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)&&"ReplStorageUtilization"===(null===(t=n.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===s})))||void 0===t?void 0:t.__typename)&&S(!0)}),[n,s]),n&&"CurrentUser"===(null===(t=n.currentUser)||void 0===t?void 0:t.__typename)&&"StorageQuota"===n.currentUser.storageInfo.storageQuota.__typename&&"StorageGracePeriodQuota"===n.currentUser.storageInfo.storageGracePeriodQuota.__typename&&"AccountStorageUtilization"===n.currentUser.storageInfo.accountStorageUtilization.__typename&&"UserPowerUpsTypes"===n.currentUser.userPowerUpsByType.__typename&&C){var T,R,D=n.currentUser.username,I=n.currentUser.storageInfo.accountStorageUtilization,_=n.currentUser.storageInfo.storageQuota.quota,B=null!==(T=n.currentUser.userPowerUpsByType.storage.currentSku)&&void 0!==T?T:void 0,G=B?Z.zd[B]:void 0,P=I.total,A=I.perRepl,N=null!==(R=n.currentUser.userSubscriptionType)&&void 0!==R?R:void 0,U=N?Z.XR[N]:Z.XR.FREE,L=Math.max(Number(_)-Number(P),0),O="Bytes",X="(".concat((0,p.fZ)(L,{precision:1,resourceUsageType:O})," available)"),M=A.find((function(e){return e.repl.id===s})),F="0"!==_?(0,a.tZ)(u.xv,{css:x.availableText,multiline:!1,children:X}):null;return(0,a.BX)(d.G,{css:x.storageBarWrapper,children:[(0,a.tZ)(f.$,{context:{type:"workspace_info_modal",replId:s},summary:(0,h._4)((0,o.Z)((0,i.Z)({},I),{quota:_})),username:D,resourceUsageType:O}),(0,a.BX)(d.G,{css:x.summaryWrapper,children:[(0,a.BX)(d.G,{css:x.summaryRowWrap,children:[(0,a.BX)(u.xv,{multiline:!1,children:[(0,g.s)(N,E)," storage: ",U," ","GiB",G?" + ".concat(G," GiB add-on"):null]}),F]}),(0,a.BX)(d.G,{css:x.summaryRow,children:[(0,a.tZ)("div",{css:x.replSummaryDot}),(0,a.tZ)(u.xv,{css:x.replSummaryText,multiline:!1,children:"This Repl:"}),M?(0,a.tZ)(u.xv,{css:x.replSummaryUsage,multiline:!1,children:(0,y.s)(Number(M.usage))}):(0,a.tZ)(d.G,{css:x.replUsagePlaceholder})]}),c?null:(0,a.tZ)(b.q,{})]})]})}return(0,a.tZ)(k,{})},k=function(){return(0,a.BX)(d.G,{css:x.storageBarWrapper,children:[(0,a.tZ)(f.X,{}),(0,a.BX)(d.G,{css:x.summaryWrapper,children:[(0,a.BX)(d.G,{css:x.summaryRow,children:[(0,a.tZ)(d.G,{css:x.totalUsagePlaceholder}),(0,a.tZ)(d.G,{css:x.availablePlaceholder})]}),(0,a.BX)(d.G,{css:x.summaryRow,children:[(0,a.tZ)(d.G,{css:x.replSummaryTextPlaceholder}),(0,a.tZ)(d.G,{css:x.replUsagePlaceholder})]})]})]})}},89559:function(e,t,n){n.d(t,{h:function(){return _},s:function(){return I}});var r=n(72006),i=n(4405),o=n(74985),a=n(50959),l=n(92369),c=n(61025),s=n(21651),u=n(88965),d=n(53312),f=n(26473),h=n(67952),p=n(1797),m=n(68877),v=n(95141),g=n(51631),y=n(94979),Z=n(92470),b=n(59213),w=n(12901),x=n(16296),C=n(89138),k=n(27124),S=n(70135),E=n(30638),T=n(9353),R=n(9434),D=(0,c.X)({self:[u.l0.flex.column],content:[u.l0.pt(16),u.l0.px(12),u.l0.pb(12),u.l0.colWithGap(16)],contentSlim:[u.l0.colWithGap(8)],header:[u.l0.p(12),u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.border({color:u.TV.outlineDefault,width:1,style:"solid",direction:"bottom"})],actions:[u.l0.colWithGap(8)],footer:[u.l0.rowWithGap(16),u.l0.justify.spaceBetween,u.l0.align.center,u.l0.pt(4)],loadingWrapper:[u.l0.center],storageBarWrapper:[u.l0.colWithGap(8)],summaryWrapper:[u.l0.colWithGap(8),u.l0.align.start],totalSummaryDot:[u.l0.backgroundColor.backgroundHigher,u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[u.l0.backgroundColor.accentPrimaryDefault,u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],summaryRow:[u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.fontSize(14),u.l0.height(14)],replSummaryText:[u.l0.color.accentPrimaryStronger],replSummaryUsage:[u.l0.color.accentPrimaryStrongest],replUsagePlaceholder:[y.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(64)],totalUsagePlaceholder:[y.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(140)],availablePlaceholder:[y.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(64)],availableText:[u.l0.color.foregroundDimmest]}),I=function(e){var t=e.isOpen,n=e.onRequestClose,r=(0,w.Z)(),i=(0,a.useState)(!1),l=i[0],c=i[1],u=(0,m.Pf)({fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0}),p=u.data,v=u.loading,g=u.refetch;return(0,o.BX)(s.u,{noPadding:!0,isOpen:t,onRequestClose:n,preventClose:l,hideCloseButton:!0,children:[(0,o.BX)(f.G,{css:D.self,children:[(0,o.BX)(f.G,{css:D.header,children:[(0,o.tZ)(x.hU,{onClick:n,alt:"Back",size:28,children:(0,o.tZ)(C.Z,{size:16})}),(0,o.tZ)(h.Z,{size:16}),(0,o.tZ)(d.xv,{variant:"subheadDefault",multiline:!1,children:"Repl Storage"})]}),(0,o.tZ)(_,{loading:v,isInDesktopApp:r,data:p,setShowUpgradeModal:c})]}),(0,o.tZ)(S.Z,{isOpen:l,context:"workspace_info_modal",powerUp:"storage",uponPurchaseGoTo:"workspace",onRequestClose:function(){g(),c(!1)}})]})},_=function(e){var t,n=e.isInDesktopApp,c=e.loading,s=e.data,u=e.setShowUpgradeModal,h=e.slim;if((0,a.useEffect)((function(){var e;if(s&&"CurrentUser"===(null===(e=s.currentUser)||void 0===e?void 0:e.__typename)&&"StorageQuota"===s.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===s.currentUser.storageInfo.accountStorageUtilization.__typename&&!c)try{var t=parseInt(s.currentUser.storageInfo.storageQuota.quota,10),n=parseInt(s.currentUser.storageInfo.accountStorageUtilization.total,10);(0,R.j)(T.U3.MODAL_VIEWED,{modalName:"workspace_storage_modal",storageQuota:t,storageUtilization:n,storageUtilizationPercentage:n/t})}catch(r){}}),[s,c]),c&&!s)return(0,o.BX)(f.G,{css:h?D.contentSlim:D.content,children:[(0,o.tZ)(k.M,{}),(0,o.tZ)(f.G,{css:D.footer,children:n?(0,o.tZ)(v.zx,{onClick:function(){b.X.openExternalUrl(p.$I.as)},text:"Manage Repls"}):(0,o.tZ)(l.Z,{href:p.$I.href,as:p.$I.as,text:"Manage Repls"})})]});if(s&&"CurrentUser"===(null===(t=s.currentUser)||void 0===t?void 0:t.__typename)&&"StorageQuota"===s.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===s.currentUser.storageInfo.accountStorageUtilization.__typename){var m=s.currentUser.username,y=s.currentUser.userSubscriptionType===g.HP.HackerPro;return(0,o.BX)(f.G,{css:h?D.contentSlim:D.content,children:[s?(0,o.tZ)(k.l,{data:s}):(0,o.tZ)(k.M,{}),(0,o.BX)(f.G,{css:D.footer,children:[(0,o.tZ)(l.Z,(0,i.Z)((0,r.Z)({},(0,Z.Ru)(m)),{text:"Manage Repls"})),(0,o.tZ)(E.U,{isPro:y,setShowUpgradeModal:u,source:"workspace_storage_modal_upgrade_button"})]})]})}return(0,o.BX)(f.G,{css:h?D.contentSlim:D.content,children:[(0,o.tZ)(d.xv,{color:"dimmest",multiline:!1,children:"We had trouble loading your storage information. Please try again later."}),(0,o.tZ)(f.G,{css:D.footer,children:(0,o.tZ)(l.Z,{href:p.$I.href,as:p.$I.as,text:"Manage Repls"})})]})}},12286:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(74985),i=n(43312);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},31547:function(e,t,n){n.d(t,{w:function(){return f}});var r=n(72006),i=n(74985),o=n(30826),a=n.n(o),l=n(50959),c=n(10422),s=n(43312),u=n(92361),d=n(88965);function f(e){var t=e.targetElement,n=(0,l.useState)(null),o=n[0],f=n[1],p=(0,u.Z)((function(){t&&f({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),{type:"throttle",wait:100});if((0,l.useEffect)((function(){t&&p(t)}),[t,p]),(0,l.useEffect)((function(){if(t){var e=a()((function(){f({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[t]),!o||!t)return null;var m=(0,s.iv)({backgroundColor:d.TV.backgroundOverlay,zIndex:d.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,c.createPortal)((0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{id:"wat",css:[h((0,r.Z)({side:"left-top"},o)),m]}),(0,i.tZ)("div",{css:[h((0,r.Z)({side:"top-right"},o)),m]}),(0,i.tZ)("div",{css:[h((0,r.Z)({side:"right-bottom"},o)),m]}),(0,i.tZ)("div",{css:[h((0,r.Z)({side:"bottom-left"},o)),m]})]}),document.body)}function h(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,s.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)});case"top-right":return(0,s.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)});case"right-bottom":return(0,s.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")});case"bottom-left":return(0,s.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")})}}},19532:function(e,t,n){n.d(t,{k:function(){return m}});var r=n(72006),i=n(4405),o=n(74985),a=n(61623),l=n(35837),c=n(50959),s=n(10422),u=n(34335),d=n(71844),f=n(88965),h=n(92361),p=n(46861);function m(e){var t=e.targetElement,n=e.activeStep,m=e.goto,v=e.currentStepIndex,g=e.totalSteps,y=e.done,Z=e.disableAnimation,b=e.placement,w=void 0===b?"right":b,x=e.cypressCloseData,C=void 0===x?"tour-tooltip-close-button":x,k=e.onClickOutside,S=e.innerRef,E=e.width,T=(0,c.useState)(null),R=T[0],D=T[1],I=(0,c.useState)(null),_=I[0],B=I[1],G=(0,u.D)(t,R,{placement:w,modifiers:[{name:"arrow",options:{element:_,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),P=(0,h.Z)((function(){var e;null===(e=G.update)||void 0===e||e.call(G)}),{type:"throttle",wait:100});(0,c.useEffect)((function(){P(t)}),[t,P]),(0,c.useImperativeHandle)(S,(function(){return{updateTooltip:function(){var e;null===(e=G.update)||void 0===e||e.call(G)}}}));var A=(0,p.Z)((function(){k&&k()}),[k]);return(0,s.createPortal)((0,o.BX)("div",(0,i.Z)((0,r.Z)({ref:function(e){A.current=e,D(e)},style:G.styles.popper,css:{transition:Z?"all":"all 0.5s ease-out",zIndex:f.n0+2,width:null!==E&&void 0!==E?E:320}},G.attributes.popper),{children:[(0,o.tZ)(l.O,{title:n.title,content:n.content,onDismiss:function(){y()},currentStepIndex:v,onCurrentStepChange:m,totalSteps:g,cypressCloseData:C}),(0,o.tZ)("span",{style:G.styles.arrow,css:[a.wk,{"&::after":{backgroundColor:d.Br.primary.dimmest,border:"1px solid "+d.Br.primary.dimmer}}],ref:B})]})),document.body)}},48858:function(e,t,n){n.d(t,{r:function(){return g},e:function(){return y.e}});var r=n(57389),i=n(72006),o=n(4405),a=n(2272),l=n(74985),c=n(15738),s=n(50959),u=n(13528),d=n(35837),f=n(21651);function h(){var e=(0,u.X)();if(!e)return null;var t=e.activeStep,n=e.goto,r=e.steps,i=e.done;return(0,l.tZ)(f.u,{preventClose:!0,isOpen:Boolean(t.isModal),onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,l.tZ)(d.O,{title:t.title,content:t.content,onDismiss:function(){i()},currentStepIndex:r.findIndex((function(e){return t.id===e.id})),onCurrentStepChange:n,totalSteps:r.length,cypressCloseData:"tour-tooltip-close-button"})})}var p=n(31547),m=n(19532),v=n(49500);function g(e){var t,n=e.children,d=e.tour,f=e.isDoneInitialOverride,g=e.onStep,y=e.onDone,Z=function(){B(!0),null===y||void 0===y||y(k.id)},b=function(e){P.current=k,null===g||void 0===g||g(e.id),S(e)},w=function(e){var t;if("number"===typeof e)t=e;else{var n=e;t=d.steps.findIndex((function(e){return n===e.id}))}if(!(t<0||t>=d.steps.length)){for(var r=d.steps[t],i=t<G;!T[r.id]&&r.autoSkipIfNoTarget;){if((t=i?t-1:t+1)<0||t>=d.steps.length)return;r=d.steps[t]}b(r)}},x=function(){w(0),B(!1)},C=(0,s.useState)(d.steps[0]),k=C[0],S=C[1],E=(0,s.useState)({}),T=E[0],R=E[1],D=function(e,t){var n,r=(0,c.Pp)({variables:{tours:e}}),i=r.data,o=r.loading,l=(0,a.Z)((0,c.oe)({variables:{name:e},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen:{__typename:"TourSeen",id:e,seen:!0}}}),1)[0],u=(0,s.useState)(t),d=u[0],f=u[1],h=Boolean(null===i||void 0===i||null===(n=i.currentUser)||void 0===n?void 0:n.toursSeen[0].seen);return"boolean"===typeof d&&(h=d),{isLoading:o,isDone:h,setIsDone:function(e){f(e),e&&l()}}}(d.id,f),I=D.isDone,_=D.isLoading,B=D.setIsDone,G=d.steps.findIndex((function(e){return k.id===e.id}));if(-1===G)throw new Error("Current tour step is not in tour steps");var P=(0,s.useRef)(),A=(0,s.useCallback)((function(e,t){var n=d.steps.findIndex((function(t){return e===t.id}));if(-1===n)throw new Error("Invalid step id");if(d.steps[n].isModal)throw new Error("Trying to set a target element for a modal step");R((function(n){return n[e]===t?n:(0,o.Z)((0,i.Z)({},n),(0,r.Z)({},e,t))}))}),[d]),N=T[k.id],U=!I&&!_;window.startTour=function(){v.log("starting tour:",d.id,"from",d.steps[0].id),x()};var L=d.steps.filter((function(e){return!e.autoSkipIfNoTarget||Boolean(T[e.id])})),O=L.findIndex((function(e){return k.id===e.id}));return(0,l.BX)(u.z,{value:(0,o.Z)((0,i.Z)({},d),{setStepTargetElement:A,activeStep:k,next:function(){var e=d.steps[G+1];if(e&&e.autoSkipIfNoTarget)for(var t=G+1;e&&e.autoSkipIfNoTarget&&!T[e.id];)t++,e=d.steps[t];e?b(e):Z()},prev:function(){var e=d.steps[G-1];if(e&&e.autoSkipIfNoTarget)for(var t=G-1;e&&e.autoSkipIfNoTarget&&!T[e.id];)t--,e=d.steps[t];e&&b(e)},goto:w,isDone:I,isLoading:_,done:Z,restart:x}),children:[U&&k.isModal?(0,l.tZ)(h,{}):null,U&&N?(0,l.BX)(l.HY,{children:[(0,l.tZ)(p.w,{targetElement:N}),(0,l.tZ)(m.k,{targetElement:N,activeStep:k,currentStepIndex:O,done:Z,goto:function(e){w(e+G-O)},totalSteps:L.length,disableAnimation:Boolean(0===G||(null===(t=P.current)||void 0===t?void 0:t.isModal))})]}):null,n]})}var y=n(62435)},51861:function(e,t,n){var r;n.d(t,{z:function(){return r}}),function(e){e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE"}(r||(r={}))},37047:function(e,t){t.Z={brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"},brands:{github:"#181717",twitter:"#00A8FF",discord:"#7289DA",facebook:"#3B5998",linkedin:"#0077B5"}}},73126:function(e,t,n){n.d(t,{Y:function(){return x},Z:function(){return E}});var r=n(74985),i=n(50959),o=n(68935),a=n(87708),l=n(48587),c=n(50672),s=n(32645),u=n(61600),d=n(50968),f=n(88965),h=n(26473),p=n(97846),m=n(68339),v=n(21164),g=(0,d.u)(null),y=(0,d.u)(null),Z=(0,d.u)({from:0,to:0}),b=l.p.mark({class:"ast-hover"}),w=l.tk.baseTheme({".ast-hover":{background:f.TV.backgroundHighest}});function x(e){var t=e.view,n=(0,c.Z)({view:t}),r=(0,v.k)();(0,i.useEffect)((function(){if(r&&t){g.current=t.state;var e=a.Py.define(),i=(0,m.uf)([y.subscribe((function(n){t.dispatch({effects:e.of(n)})})),Z.subscribe((function(e){t.dispatch({selection:{anchor:e.from,head:e.to}})}))]);return t.dispatch({effects:n.reconfigure([l.tk.updateListener.of((function(e){(e.selectionSet||e.docChanged)&&(g.current=e.state)})),a.QQ.define({create:function(){return l.p.none},update:function(t,n){return t=t.map(n.changes),(0,s.j)(n,e,(function(e){t=null==e.value?l.p.none:l.p.set([b.range(e.value.from,e.value.to)])})),t},provide:function(e){return l.tk.decorations.from(e)}}),w])}),function(){g.current=null,i(),t.dispatch({effects:n.reconfigure([])})}}}),[t,r,n])}var C=(0,i.memo)((function(e){var t=e.node,n=e.index,i=e.active,o=e.terminal,a=t.type.name,l={from:t.from,to:t.to};return(0,r.BX)(h.G,{css:[{marginLeft:4*n+(o?4:0)},f.l0.mb(4),f.l0.rowWithGap(2),f.l0.align.center,f.l0.cursor.pointer],onMouseEnter:function(){y.current=l},onClick:function(){y.current=null,Z.current=l},children:[(0,r.tZ)(p.Z,{size:"small",fontFamily:a.length>1?"sans-serif":"monospace",fontWeight:i?"bold":"regular",children:a}),(0,r.BX)(p.Z,{size:"xsmall",truncate:!0,children:["(",t.from," \u2013 ",t.to,")"]})]})}));function k(e,t){for(var n=[];t(e);)n.push(e.node);return n}var S=(0,i.memo)((function(e){var t=e.state,n=(0,o.qz)(t),a=t.selection.main.head,l=(0,i.useMemo)((function(){return k(n.cursorAt(a),(function(e){return e.parent()})).reverse()}),[n,a]),c=(0,i.useMemo)((function(){return k(n.cursorAt(a),(function(e){return e.prevSibling()}))}),[n,a]),s=(0,i.useMemo)((function(){return k(n.cursorAt(a),(function(e){return e.nextSibling()}))}),[n,a]);return(0,r.BX)(h.G,{css:f.l0.ml(4),onMouseLeave:function(){y.current=null},children:[l.map((function(e,t){return(0,r.tZ)(C,{node:e,index:t},t)})),c.map((function(e,t){return(0,r.tZ)(C,{node:e,index:l.length,terminal:!0},t)})),(0,r.tZ)(C,{node:n.resolveInner(t.selection.main.head),index:l.length,terminal:!0,active:!0}),s.map((function(e,t){return(0,r.tZ)(C,{node:e,index:l.length,terminal:!0},t)}))]})}));function E(e){var t=e.isHidden,n=(0,u.Z)(g);return t?null:n?(0,r.tZ)(S,{state:n}):null}},12443:function(e,t,n){n.d(t,{YX:function(){return b},ho:function(){return w}});var r=n(66091),i=n(72006),o=n(4405),a=n(2272),l=n(74985),c=n(50959),s=n(88965),u=n(53312),d=n(26473),f=n(57670),h=n(27773),p=n(19949),m=n(44385),v=n(88437),g=n(61600),y=n(50968),Z=n(65592),b=new(function(){"use strict";function e(){var t=this;(0,r.Z)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,y.u)([]),this.clear=function(){t.logs.current=[]}}var t=e.prototype;return t.toggle=function(e){this.enabled=e},t.add=function(e){var t=this,n=this.counter++;if(!this.enabled)return{id:n};var r={id:n,request:e,requestTime:Date.now()};return this.logs.update((function(e){return[r].concat(e).slice(0,t.maxEntries)})),{id:n}},t.update=function(e,t){this.enabled&&this.logs.update((function(n){var r=n.findIndex((function(t){return t.id===e.id}));if(-1===r)return n;var i=n.slice();return i[r]=t(i[r]),i}))},t.complete=function(e,t){this.update(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{response:t,responseTime:Date.now()})}))},t.abort=function(e){this.logs.update((function(t){return t.filter((function(t){return t.id!==e.id||null!=t.responseTime}))}))},e}()),w=function(e){var t,n=e.isHidden,r=(0,g.Z)(b.logs);return n?null:(0,l.BX)(d.G,{css:[s.l0.flex.column],children:[(0,l.BX)(d.G,{css:[s.l0.flex.row,s.l0.align.center,s.l0.m(4),s.l0.position.sticky,s.l0.top(0),s.l0.backgroundColor.backgroundDefault,s.l0.zIndex(1)],children:[(0,l.tZ)(u.xv,{css:s.l0.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.tZ)(f.Z,{onClick:b.clear})]}),(0,l.BX)(d.G,{css:[s.l0.flex.grow(1),s.l0.flex.column,s.l0.overflow("auto")],children:[r.map((function(e){return(0,l.tZ)(x,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf())})),!r.length&&(0,l.tZ)(d.G,{css:s.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},x=(0,c.memo)((function(e){var t=e.log,n=t.requestTime,r=t.responseTime,i=t.request,o=t.response,c=(0,a.Z)((0,v.Z)(!0),2),f=c[0],h=c[1],p=i.code.length>20?"...".concat(i.code.slice(-20)):i.code;return(0,l.BX)(d.G,{css:[s.l0.my(4),s.l0.mx(4)],children:[(0,l.BX)(d.G,{role:"button",onClick:h,onKeyDown:h,tabIndex:0,css:[s.l0.flex.row,s.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(d.G,{css:[s.l0.flex.grow(1),s.l0.rowWithGap(2)],children:[(0,l.tZ)(u.xv,{multiline:!1,children:C(t)}),(0,l.tZ)(u.xv,{multiline:!1,children:(0,l.tZ)("code",{children:p})})]}),(0,l.tZ)(d.G,{css:{opacity:.5},children:null!=r&&(0,l.BX)(u.xv,{css:s.l0.fontSize(13),multiline:!1,children:[r.valueOf()-n.valueOf()," ms"]})})]}),!f&&(0,l.BX)(l.HY,{children:[void 0!==i&&(0,l.tZ)(Z.g,{name:"request",src:i}),void 0!==o&&("CompleteCodeResult"===o.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[s.l0.overflow("scroll"),s.l0.borderRadius(4),s.l0.p(4),{border:"1px solid ".concat(s.TV.outlineDimmest)}],children:o.code})]}):(0,l.tZ)(Z.g,{name:"response",src:o}))]})]})}));function C(e){var t=e.response;return t?"CompleteCodeResult"===t.__typename?(0,l.tZ)(m.Z,{}):(0,l.tZ)(p.Z,{}):(0,l.tZ)(h.Z,{})}},37594:function(e,t,n){n.d(t,{Sj:function(){return l},Th:function(){return o},UB:function(){return c},a0:function(){return s},cF:function(){return i},ot:function(){return a}});var r=n(90234),i=function(e,t){var n=e.dir,r=e.channel,i=e.cmd;return(!t.direction||n===t.direction)&&!!(!t.regexp||!t.regexp.test||r.name&&t.regexp.test(r.name)||r.service&&t.regexp.test(r.service)||t.regexp.test(JSON.stringify(i)))};var o=(0,r.cn)([]),a=(0,r.cn)({regexp:null,direction:"",highlightOnly:!1}),l=(0,r.cn)((function(e){return t=e(o),(n=e(a)).regexp||n.direction?n.highlightOnly?t:t.filter((function(e){return i(e,n)})):t;var t,n})),c=(0,r.cn)(null,(function(e,t){t(o,[])})),s=(0,r.cn)(!1)},8049:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(2272),i=n(9970),o=n(28435),a=n(71999),l=n(90171),c=n(50959),s=n(37594);function u(){var e=(0,l.useRouter)(),t=(0,o.Z)().container,n=(0,r.Z)((0,a.KO)(s.a0),2),u=n[0],d=n[1],f=(0,a.b9)(s.Th);(0,c.useEffect)((function(){e.query.debug&&d(!0)}),[d,e.query.debug]),(0,c.useEffect)((function(){if(u)return t.client().onDebugLog((function(e){if("log"===e.type){var n;if(e.log.channel)if(n={name:e.log.channel.name,service:null},"string"===typeof e.log.channel.service)n.service=e.log.channel.service;else if(e.log.channel.service){var r=t.getContext();r&&(n.service=e.log.channel.service(r))}f((function(t){return(0,i.Z)(t).concat([{index:t[t.length-1]?t[t.length-1].index+1:0,channel:n,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}}))}),[u,f,t])}},65592:function(e,t,n){n.d(t,{L:function(){return G},g:function(){return A}});var r=n(57389),i=n(72006),o=n(4405),a=n(2272),l=n(9970),c=n(74985),s=n(50959),u=n(38029),d=n(86813),f=n(23743),h=n(16296),p=n(20685),m=n(88965),v=n(53312),g=n(26473),y=n(57670),Z=n(16679),b=n(27430),w=n(27773),x=n(14053),C=n(47381),k=n(12294),S=n(9721),E=n(3689),T=n(55132),R=n(68912),D=n(44385),I=n(88437),_=n(68339),B=n(94821);var G=function(e){var t,n=e.isHidden,r=function(){var e=(0,s.useState)(null),t=e[0],n=e[1],r=(0,d.R3)();return(0,s.useEffect)((function(){r!==t&&null!=r&&n(r)}),[r,t]),t}(),w=(0,f.Z)(r||""),C=(0,u.U)(),k=(0,a.Z)((0,I.Z)(!0),2),S=k[0],E=k[1],R=(0,s.useState)(""),D=R[0],B=R[1],G=(0,s.useState)((function(){return[]})),A=G[0],U=G[1],L=(0,a.Z)((0,I.Z)(!0),2),O=L[0],X=L[1],M=(0,a.Z)((0,I.Z)(!0),2),F=M[0],W=M[1],H=(0,s.useCallback)((function(e){U((function(t){return[e].concat((0,l.Z)(t)).slice(0,100)}))}),[]),V=(0,s.useCallback)((function(e,t){U((function(n){for(var r=0;r<n.length;r++)if(n[r].id===e){n[r]=t(n[r]);break}return n.slice(0,100)}))}),[]),z=(0,s.useCallback)((function(){U([])}),[]),j=null===w||void 0===w?void 0:w.isOpen(r||""),q=(0,s.useCallback)((function(){H({canceled:!1,notification:{method:"probe",params:{filePath:r,state:null===w||void 0===w?void 0:w.getServerState(),capabilities:null===w||void 0===w?void 0:w.getServerCapabilities(),diagnostics:j?null===w||void 0===w?void 0:w.getDiagnostics(r||""):[],isOpen:j,isSupportedFile:null===w||void 0===w?void 0:w.isSupportedFile(r||"")}},requestTime:new Date,type:"probe"})}),[H,w,r,j]),$=(0,s.useMemo)((function(){var e=D.split(",").map((function(e){return e.trim()})).filter(Boolean);if(!e.length)return A;var t=A;return O||(t=t.filter((function(e){return null==e.notification}))),F||(t=t.filter((function(e){return null==e.request}))),D&&(t=t.filter((function(t){return e.some((function(e){var n;return null===(n=t.request||t.notification)||void 0===n?void 0:n.method.toLowerCase().includes(e.toLowerCase())}))}))),t}),[A,O,F,D]);return(0,s.useEffect)((function(){return(0,_.uf)([null===w||void 0===w?void 0:w.onRequest((function(e){S&&H({id:e.id,canceled:!1,request:e.data,requestTime:new Date})})),null===w||void 0===w?void 0:w.onResponse((function(e){S&&V(e.id,(function(t){return(0,i.Z)((0,o.Z)((0,i.Z)({},t),{responseTime:new Date}),void 0!==e.result?{response:e.result}:{error:e.error})}))})),null===w||void 0===w?void 0:w.onCancelRequest((function(e){S&&V(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{canceled:!0})}))})),null===w||void 0===w?void 0:w.onDiagnostics((function(e){var t=e.path,n=e.diagnostics;S&&H({canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+t,params:n},requestTime:new Date,type:"diagnostics"})})),null===w||void 0===w?void 0:w.onServerStateChange((function(e){S&&H({canceled:!1,notification:{method:"state",params:{serverState:e}},requestTime:new Date,type:"state"})})),null===w||void 0===w?void 0:w.onServerCapabilitiesChange((function(e){S&&H({canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:e}},requestTime:new Date,type:"capabilities"})})),null===w||void 0===w?void 0:w.onSendNotification((function(e){S&&H({canceled:!1,notification:e,requestTime:new Date})}))])}),[w,H,V,S]),n?null:(0,c.BX)(g.G,{css:[m.l0.flex.column],children:[(0,c.BX)(g.G,{css:[m.l0.flex.row,m.l0.align.center,m.l0.m(4),m.l0.position.sticky,m.l0.top(0),m.l0.backgroundColor.backgroundDefault,m.l0.zIndex(1)],children:[(0,c.tZ)(v.xv,{multiline:!1,children:w?(0,c.BX)(c.HY,{children:[(0,c.tZ)(N,{})," logs for ",(0,c.tZ)("code",{children:r})]}):"No LSP client available"}),(0,c.tZ)(h.hU,{alt:"Probe LSP",onClick:q,children:(0,c.tZ)(x.Z,{})}),(0,c.tZ)(g.G,{css:m.l0.flex.grow(1)}),(0,c.tZ)(b.Z,{id:"toggleIsLogging",isOn:S,onChange:E})," "]}),(0,c.BX)(g.G,{css:[m.l0.rowWithGap(8),m.l0.m(4),m.l0.mb(8)],children:[(0,c.BX)(g.G,{css:m.l0.rowWithGap(4),children:[(0,c.tZ)(T.Z,{}),(0,c.tZ)(v.xv,{multiline:!1,children:"Show"})]}),(0,c.BX)(g.G,{css:m.l0.rowWithGap(4),children:[(0,c.tZ)(Z.X,{id:C("showNotifications"),checked:O,onChange:X}),(0,c.tZ)("label",{htmlFor:C("showNotifications"),children:" Notifications"})]}),(0,c.BX)(g.G,{css:m.l0.rowWithGap(4),children:[(0,c.tZ)(Z.X,{id:C("showRequests"),checked:F,onChange:W}),(0,c.tZ)("label",{htmlFor:C("showRequests"),children:" Requests"})]}),(0,c.tZ)(g.G,{css:m.l0.flex.growAndShrink(1)}),(0,c.tZ)(g.G,{css:m.l0.rowWithGap(4),children:(0,c.tZ)(y.Z,{onClick:z})})]}),(0,c.tZ)(g.G,{css:m.l0.rowWithGap(4),children:(0,c.tZ)(p.II,{id:C("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return B(e.target.value)},value:D})}),(0,c.BX)(g.G,{css:[m.l0.flex.grow(1),m.l0.flex.column,m.l0.overflow("auto")],children:[$.map((function(e,n){return(0,c.tZ)(P,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf()+""+n)})),!$.length&&(0,c.tZ)(g.G,{css:m.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},P=s.memo((function(e){var t,n=e.log,r=n.requestTime,i=n.responseTime,o=n.request,l=n.response,s=n.notification,u=n.id,d=(0,a.Z)((0,I.Z)(!0),2),f=d[0],h=d[1];return(0,c.BX)(g.G,{css:[m.l0.my(4),m.l0.mx(4)],children:[(0,c.BX)(g.G,{role:"button",onClick:h,onKeyDown:h,tabIndex:0,css:[m.l0.flex.row,m.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,c.BX)(g.G,{css:[m.l0.flex.grow(1),m.l0.rowWithGap(2)],children:[(0,c.tZ)(v.xv,{className:"lspLog-emoji",multiline:!1,children:U(n)}),(0,c.BX)(v.xv,{className:"lspLog-requestMethod",multiline:!1,children:[(0,c.tZ)("code",{children:null===(t=o||s)||void 0===t?void 0:t.method}),null!=u&&(0,c.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",u]})]})]}),(0,c.tZ)(g.G,{css:{opacity:.5},children:null!=i&&(0,c.BX)(v.xv,{css:m.l0.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf()," ms"]})})]}),!f&&(0,c.BX)(c.HY,{children:[void 0!==o&&(0,c.tZ)(A,{name:"request.params",src:o.params}),void 0!==s&&(0,c.tZ)(A,{name:"notification.params",src:s.params}),void 0!==l&&(0,c.tZ)(A,{name:"response",src:l})]})]})})),A=(0,s.memo)((function(e){var t=e.name,n=e.src;return(0,c.tZ)(g.G,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,c.tZ)(B.Z,{json:(0,r.Z)({},t,n)})})})),N=function(){return(0,c.tZ)(v.xv,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(m.TV.redDimmer," 2px 2px")},children:"LSP"})};function U(e){var t=e.type,n=e.canceled,r=e.response,i=e.notification;return"state"===t?(0,c.tZ)(S.Z,{}):"diagnostics"===t?(0,c.tZ)(C.Z,{}):"capabilities"===t?(0,c.tZ)(k.Z,{}):"probe"===t?(0,c.tZ)(x.Z,{}):n?(0,c.tZ)(R.Z,{}):i?(0,c.tZ)(E.Z,{}):void 0!==r?(0,c.tZ)(D.Z,{}):(0,c.tZ)(w.Z,{})}},88437:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(50959);function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useState)(e),n=t[0],i=t[1],o=(0,r.useCallback)((function(){return i((function(e){return!e}))}),[]);return[n,o]}},55929:function(e,t,n){n.d(t,{AA:function(){return k},CH:function(){return y},Gg:function(){return v},Ne:function(){return E},pV:function(){return x},vk:function(){return b}});var r=n(72006),i=n(43119),o=n(71440),a=n(51966),l=n(24635),c=n(50216);function s(){var e=(0,i.Z)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        currentUserPermissions {\n          writeTests\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(s()),g=(0,o.Ps)(u(),v,a.aA,a.Rb);function y(e){var t=(0,r.Z)({},m,e);return l.a(g,t)}var Z=(0,o.Ps)(d());function b(e){var t=(0,r.Z)({},m,e);return c.D(Z,t)}var w=(0,o.Ps)(f(),v);function x(e){var t=(0,r.Z)({},m,e);return c.D(w,t)}var C=(0,o.Ps)(h(),v);function k(e){var t=(0,r.Z)({},m,e);return c.D(C,t)}var S=(0,o.Ps)(p(),v);function E(e){var t=(0,r.Z)({},m,e);return c.D(S,t)}},44916:function(e,t,n){n.d(t,{x:function(){return K},W:function(){return Q}});var r=n(74985),i=n(48587),o=n(28863),a=n(66091),l=n(57389),c=n(72006),s=n(4405),u=n(50959),d=n(81202),f=n.n(d),h=n(31764),p=n(61025),m=n(88965),v=n(26473),g=n(53312),y=n(58125),Z=n(98237),b=n(65812),w=n(96037),x=n(66777),C=n(37268),k=n(6108),S=n(86093),E=n(87708),T=n(46266),R=n(61623),D=n(13299),I=n(32645),_=(0,S.$)(["opacity","transform"]),B=_.cssVars,G=_.styleTokens,P=[m.l0.reset.button,m.l0.cursor.pointer,m.l0.center,k.gU.nofill,m.l0.height("100%"),m.l0.borderRadius(0)],A=(0,p.X)({root:[m.l0.align.stretch,m.l0.flex.row,m.l0.borderRadius(6),m.l0.border({color:m.TV.outlineDefault}),m.l0.position.relative,m.l0.height(28),{opacity:G.opacity,transform:G.transform,transition:"opacity 120ms, transform 120ms","button:first-of-type":{borderTopLeftRadius:6,borderBottomLeftRadius:6},"button:last-of-type":{borderTopRightRadius:6,borderBottomRightRadius:6}}],moreButton:[P,m.l0.center,m.l0.width(28)],button:[P,m.l0.rowWithGap(4),m.l0.align.center,m.l0.pl(4),m.l0.pr(6),m.l0.flex.growAndShrink(1),m.l0.border({direction:"right",color:m.TV.outlineDefault}),{fontFamily:m.TV.fontFamilyDefault,"*":{color:m.TV.foregroundDimmer},":hover *":{color:m.TV.foregroundDefault},".shortcut":{color:m.TV.foregroundDimmest},":hover .shortcut":{color:m.TV.foregroundDimmer}}],tooltip:[m.l0.rowWithGap(2),m.l0.align.center]});var N,U=new Z.Jf((function(e){var t=e.controls,n=e.verticalPlacement,i=e.onMoreClick,o=(0,u.useRef)(null),a=(0,D.xx)();(0,u.useEffect)((function(){!function(){var e;a(),(0,T.A)(o,(e={},(0,l.Z)(e,B.opacity,"1"),(0,l.Z)(e,B.transform,"translateY(calc(".concat("top"===n?1:-1," * ").concat(m.TV.space4,"))")),e))}()}),[n,a]);var d,f=(0,u.useRef)((0,D.qm)());return(0,r.BX)(C.Tg,{innerRef:o,elevated:!0,css:A.root,style:(d={},(0,l.Z)(d,B.opacity,"0"),(0,l.Z)(d,B.transform,"translateY(calc(".concat("top"===n?1:-1," * ").concat(m.TV.space16,"))")),d),children:[t.map((function(e){if(f.current){var t=(0,r.BX)(v.G,{css:A.tooltip,children:[(0,r.tZ)(g.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,r.tZ)(g.xv,{variant:"small",className:"shortcut",color:"dimmest",children:(0,y.Ih)(e.shortcut)}):null]});return(0,r.tZ)(R.u,{tooltip:t,children:function(t,n){return(0,u.createElement)(v.G,(0,s.Z)((0,c.Z)({},t),{innerRef:n,key:e.text,css:A.button,onClick:e.onClick,tag:"button"}),e.icon)}})}return(0,r.BX)(v.G,{css:A.button,onClick:e.onClick,tag:"button",children:[e.icon,(0,r.tZ)(g.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,r.BX)(g.xv,{variant:"small",className:"shortcut",children:["(",(0,y.Ih)(e.shortcut),")"]}):null]},e.text)})),(0,r.tZ)(v.G,{"aria-label":"More",css:A.moreButton,onClick:function(e){var t=(o.current||e.currentTarget).getBoundingClientRect();i({top:t.top,right:t.right})},tag:"button",children:(0,r.tZ)(x.Z,{size:12})})]})})),L="cm-selection-controls-layer",O="cm-selection-controls-dom",X=i.tk.theme((N={},(0,l.Z)(N,".".concat(L),{width:"100%"}),(0,l.Z)(N,".".concat(O),{position:"absolute"}),N)),M=function(){"use strict";function e(t){(0,a.Z)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.controls,n=e.onMoreClick,r=e.top,i=e.align,o=e.verticalPlacement,a=U.create({controls:t,onMoreClick:n,verticalPlacement:o});return a.className=O,a.style.top=r+"px","left"===i.side?(a.style.left=i.value+"px",a.style.right=""):(a.style.right=i.value+"px",a.style.left=""),a},t.eq=function(e){return f()(e.options,this.options)},e}(),F=E.Py.define(),W=E.QQ.define({create:function(){return null},update:function(e,t){var n;return!t.state.selection||(null===(n=t.state.selection)||void 0===n?void 0:n.main.empty)?null:((0,I.j)(t,F,(function(t){e=t.value})),e)}}),H=E.QQ.define({create:function(e){return!e.selection.main.empty},update:function(e,t){return!t.state.selection.main.empty}}),V=i.lg.define((function(e){var t=function(){var t=e.state.selection.main;e.dispatch({effects:F.of(t.empty?null:t)})},n=function(e){"Shift"===e.key&&t()},r=function(){document.removeEventListener("mouseup",t),document.removeEventListener("keyup",n)};return{update:function(e){(0,b.a)(e,H)&&(e.state.field(H)?(document.addEventListener("mouseup",t),document.addEventListener("keyup",n)):r())},destroy:r}})),z=new h.j((function(e){var t=(0,i.EY)({above:!0,class:L,update:function(e){return(0,b.a)(e,w.$,W)},markers:function(t){var n=t.state.field(W);if(!n)return[];if(t.state.field(w.$,!1))return[];var r=j(t.state.doc,n);if(!r)return[];var i=t.coordsAtPos(r.to);if(!i)return[];var o=t.lineBlockAt(Math.min(n.anchor,n.head)),a=t.dom.getBoundingClientRect(),l=t.contentDOM.getBoundingClientRect(),c=o.top+t.documentPadding.top-28,s=l.right-i.left<200?{side:"right",value:a.right-l.right+16}:{side:"left",value:i.left-a.left},u="top";if(c<t.scrollDOM.scrollTop){var d=t.lineBlockAt(n.to);c=d.top+d.height,u="bottom"}return[new M({top:c,align:s,controls:e.controls(t),onMoreClick:e.onMoreClick,verticalPlacement:u})]}});return[X,t,H,W,V]}));function j(e,t){for(var n=Math.min(t.from,t.to),r=Math.max(t.from,t.to),i=null;n<=r;){var o=e.lineAt(n);n=o.to+1,null!==i&&o.length<i.length||(i=o)}return i}var q=n(89673),$=n(26169),Y=n(45317),K={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,o.l2)({cmdOrCtrl:!0,key:"i"})};function Q(e){var t=e.editCode,n=e.explainCode,o=e.generateCode,a=e.onMoreClick,l=(0,y.gf)(K.id),c=(0,u.useMemo)((function(){if(!l)return[];var e=Array.isArray(l)?l.join(" "):l;return i.$f.of([{key:e,scope:"editor",run:function(e){return e.state.selection.main.empty?o(e):t(e),!0}}])}),[l,o,t]),s=(0,u.useMemo)((function(){return{controls:function(e){return[{text:"Modify",icon:(0,r.tZ)($.Z,{size:12,color:Y.TV.blurpleStronger}),onClick:function(){return t(e)},shortcut:l},{text:"Explain",icon:(0,r.tZ)(q.Z,{size:12,color:Y.TV.blurpleStronger}),onClick:function(){return n(e)}}]},onMoreClick:a}}),[t,n,a,l]),d=z.use(s);return(0,u.useMemo)((function(){return[d,c]}),[d,c])}},41143:function(e,t,n){n.d(t,{Mp:function(){return l},ac:function(){return a},ev:function(){return o}});var r=n(43312),i=n(88965),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},45843:function(e,t,n){n.d(t,{Rz:function(){return y},xy:function(){return b}});var r=n(57135),i=n(9970),o=n(96583),a=n(74985),l=n(99726),c=n(6190),s=n(61025),u=n(88965),d=n(26473),f=n(22004),h=n(87978),p=(0,s.X)({root:[u.l0.rowWithGap(8),u.l0.align.center,u.l0.flex.growAndShrink(1),u.l0.px(8),{userSelect:"none"}],header:[{fontSize:u.TV.fontSizeSmall,opacity:.6},u.l0.color.foregroundDimmest,u.l0.truncate],result:[u.l0.colWithGap(0)],fileName:[u.l0.truncate,u.l0.flex.row]});function m(e){var t=e.height,n=e.active,r=e.match,i=r.directory,o=r.filename;return(0,a.BX)(d.G,{css:p.root,style:{height:t},children:[(0,a.tZ)(f.Z,{path:o.text,size:16}),(0,a.BX)(d.G,{css:p.result,children:[i?(0,a.tZ)(d.G,{css:p.header,children:(0,a.tZ)(c.x,{text:i.text+"/",highlight:i.ranges,dimmed:!n})}):null,(0,a.tZ)(d.G,{css:p.fileName,children:(0,a.tZ)(c.x,{text:o.text,highlight:o.ranges,dimmed:!n})})]})]})}var v={match:l.kN,forward:!1,tiebreakers:[function(e,t,n){return n(e.item).trim().length-n(t.item).trim().length}]};function g(e){for(var t=(0,i.Z)(e.values()).sort((function(e,t){return e-t})),n=[],r=t[0],o=t[0],a=1;a<t.length;a++)t[a]===o+1?o++:(n.push({from:r,to:o+1}),r=t[a],o=t[a]);return n.push({from:r,to:o+1}),n}function y(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)((function(e,t){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,new l.Zn(t,v).find(e)];case 1:return[2,n.sent().map((function(e){return{path:e.item,score:e.score,ranges:g(e.positions)}}))]}}))}))).apply(this,arguments)}function b(e){var t=e.path,n=e.ranges,r=function(e){var t=e.ranges,n=e.path,r=(0,h.UO)(n),i=(0,h.Il)(n);if(!i)return{filename:{text:r,ranges:t.length?t:void 0}};var o=i.length,a=o+1,l=[],c=[],s=!0,u=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var m=f.value;if(m.from<o){l.push({from:m.from,to:Math.min(m.to,o)});var v=m.to-a;if(v<=0)continue;c.push({from:0,to:v})}else m.from<a||c.push({from:m.from-a,to:m.to-a})}}catch(g){u=!0,d=g}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:l.length?l:void 0}}}({path:t,ranges:null!==n&&void 0!==n?n:[]}),i=r.directory?44:32;return{height:i,content:(0,a.tZ)(m,{match:r,height:i})}}},59341:function(e,t,n){n.d(t,{i:function(){return b},w:function(){return g}});var r=n(57135),i=n(2272),o=n(96583),a=n(74985),l=(n(50959),n(73798)),c=n(79824),s=n(51087),u=n(22004),d=n(26473),f=n(53312),h=n(88965),p=n(22011),m=n(45843),v=n(35742);function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var t,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return t=e.search,n=e.paths,r=e.run,t?[4,(0,m.Rz)(t,n)]:[2,n.map((function(e){return{data:{type:"action",label:e,icon:(0,a.tZ)(u.Z,{path:e}),run:function(){return r(e)}},match:function(){return{score:1,render:(0,m.xy)({path:e})}}}}))];case 1:return[2,i.sent().map((function(e){var t=e.path,n=e.score,i=e.ranges;return{data:{type:"action",label:t,icon:(0,a.tZ)(u.Z,{path:t}),run:function(){return r(t)}},match:function(){return{score:n,render:(0,m.xy)({path:t,ranges:i})}}}}))]}}))}))).apply(this,arguments)}function Z(){return(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8)],children:[(0,a.tZ)(c.Z,{}),(0,a.tZ)(f.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's files. Please try again."})]})}function b(e){return(0,s.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,a.tZ)(l.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,s.zf)({defaultScore:3}),commands:function(){var t=(0,r.Z)((function(t){var n,l,s,d,f,h,m,y,b,w,x,C,k,S,E,T;return(0,o.__generator)(this,(function(R){switch(R.label){case 0:return n=e.fs,l=e.shouldHideFile,t.search||t.active&&!e.lazyLoad?[4,Promise.resolve(e.getRecentFiles())]:[2,[]];case 1:return s=R.sent(),d=[],t.search||t.active?[4,n.listFiles()]:[3,3];case 2:if((f=R.sent()).error)return[2,[{data:{type:"error",label:f.error,icon:(0,a.tZ)(c.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Z,{})}}}}]];if(!f.files)throw new Error("Expected files");h=!0,m=!1,y=void 0;try{for(b=f.files[Symbol.iterator]();!(h=(w=b.next()).done);h=!0)x=w.value,l(x)||s.includes(x)||d.push(x)}catch(D){m=!0,y=D}finally{try{h||null==b.return||b.return()}finally{if(m)throw y}}R.label=3;case 3:return C=[],[4,Promise.all([g({search:t.search,paths:s,run:function(t){e.openFile({path:t})}}),g({search:t.search,paths:d,run:function(t){e.openFile({path:t})}})])];case 4:return k=i.Z.apply(void 0,[R.sent(),2]),S=k[0],E=k[1],S.length&&C.push({data:{type:"context",label:"Recent",icon:(0,a.tZ)(v.Z,{})},commands:function(){return S}}),E.length&&C.push({data:{type:"group",key:"files"},commands:function(){return E}}),0===E.length&&0===S.length&&t.active&&(T=t.search,C.push({data:{label:T,description:"Create a new file",icon:(0,a.tZ)(u.Z,{path:T}),type:"action",run:(0,r.Z)((function(){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.writeFile(T,p.Z.from(""))];case 1:return t.sent().error?[2,{type:"error",message:'Could not create "'+T+'"'}]:(e.openFile({path:T}),[2])}}))}))},match:function(){return{score:1}}})),[2,C]}}))}));return function(e){return t.apply(this,arguments)}}()})}},51087:function(e,t,n){n.d(t,{fA:function(){return i},pl:function(){return a},zf:function(){return o}});var r=n(22245);function i(e,t){var n=t.commands;return{data:e,match:t.match,commands:n}}function o(e){var t=e.defaultScore,n=void 0===t?1:t;return function(e){var t=e.search,i=e.data,o=e.active;if("group"===i.type)return null;if(!t&&o)return{score:n};if(!t)return{score:n};var a=r.Z.match(t,i.label);return a?{score:a.score,render:{ranges:a.ranges}}:null}}var a=o({defaultScore:1})},11730:function(e,t,n){n.d(t,{F:function(){return S},q:function(){return k}});var r=n(57135),i=n(2272),o=n(96583),a=n(74985),l=(n(50959),n(22245)),c=n(51087),s=n(6831),u=n(3282),d=n(79824),f=n(88965),h=n(26473),p=n(53312),m=n(61025),v=n(22004),g=n(28863),y=n(11457),Z=(0,m.X)({root:[f.l0.colWithGap(4),f.l0.align.start,f.l0.flex.growAndShrink(1),f.l0.p(8)],header:[f.l0.rowWithGap(4),f.l0.align.center],singleLine:[{whiteSpace:"nowrap",fontFamily:f.TV.fontFamilyCode},f.l0.truncate,f.l0.color.foregroundDimmest]});function b(e){var t=e.path,n=e.line;return(0,a.BX)(h.G,{css:Z.root,children:[(0,a.BX)(h.G,{css:Z.header,children:[(0,a.tZ)(v.Z,{path:t,size:12}),(0,a.BX)(p.xv,{variant:"small",color:"dimmest",multiline:!1,children:[t.replace(/^\.\//,""),":",n.lineNumber]})]}),(0,a.tZ)(h.G,{css:Z.singleLine,children:(0,a.tZ)(s.xK,{source:n.content,matches:n.matches})})]})}function w(){return(0,a.BX)(h.G,{css:[f.l0.px(8),f.l0.rowWithGap(8),f.l0.align.center],children:[(0,a.tZ)(d.Z,{}),(0,a.tZ)(p.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's contents. Please try again."})]})}function x(){return(0,a.BX)(h.G,{css:[f.l0.rowWithGap(8),f.l0.p(8),f.l0.align.center],children:[(0,a.tZ)(d.Z,{}),(0,a.tZ)(p.xv,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function C(){return(0,a.tZ)(h.G,{css:[f.l0.rowWithGap(8),f.l0.p(8),f.l0.align.center],children:(0,a.tZ)(p.xv,{color:"dimmest",multiline:!1,children:"Nothing came up searching your Repl's content."})})}var k=(0,g.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function S(e){var t,n=(0,y.e)({container:e.container});return(0,c.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(u.Z,{}),keyboardShortcut:e.keyboardShortcut?k:void 0},{match:(0,c.zf)({defaultScore:2}),commands:function(){var c=(0,r.Z)((function(r){var c,s,u,f,p,m,g,y,Z,k,S,E;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r.search?!r.active&&e.activeOnly?[2,[]]:(c=Math.random(),t=c,[4,n({query:r.search})]):[2,[]];case 1:if(s=o.sent(),u=s.results,f=s.error,p=s.isPartialResult,c!==t)return[2,[]];if(null!==f)return r.active?[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(d.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(w,{})}}}}]]:[2,[]];m=[],g=!0,y=!1,Z=void 0;try{for(k=function(){var t=(0,i.Z)(E.value,2),n=t[0];t[1].forEach((function(t){var i=t.matches[0].column;m.push({match:function(){var e=l.Z.match(r.search,t.content);return{score:(null===e||void 0===e?void 0:e.score)||1,render:{height:60,content:(0,a.tZ)(b,{path:n,line:t})}}},data:{type:"action",label:n,icon:(0,a.tZ)(v.Z,{path:n}),key:[n,t.lineNumber,i].join(":"),run:function(){e.openFile({path:n,line:t.lineNumber,col:i})}}})}))},S=Object.entries(u)[Symbol.iterator]();!(g=(E=S.next()).done);g=!0)k()}catch(T){y=!0,Z=T}finally{try{g||null==S.return||S.return()}finally{if(y)throw Z}}if(0===m.length&&r.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(h.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(C,{})}}}}]];if(r.active){if(0===m.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(h.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(C,{})}}}}]];p&&m.push({data:{type:"error",label:"error",icon:(0,a.tZ)(d.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(x,{})}}}})}return[2,m]}}))}));return function(e){return c.apply(this,arguments)}}()})}},50419:function(e,t,n){n.d(t,{Z:function(){return Ce}});var r=n(57135),i=n(72006),o=n(4405),a=n(2272),l=n(96583),c=n(74985),s=n(50959),u=n(91926),d=n(32343),f=n(48306),h=n.n(f),p=function(e){var t=(0,d.Z)({},e);return(0,c.BX)(c.HY,{children:[(0,c.tZ)(h(),{id:"fcfe85a13ecbf46b",children:".one.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.two.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.three.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-moz-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-o-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }"}),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"one"),children:"."})),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"two"),children:"."})),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"three"),children:"."}))]})},m=n(20685),v=n(53312),g=n(95141),y=n(43119),Z=n(71440),b=n(24635),w=n(50216);function x(){var e=(0,y.Z)(["\n  query ConfigReplLanguage($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return x=function(){return e},e}function C(){var e=(0,y.Z)(["\n  mutation ConfigUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n      }\n    }\n  }\n"]);return C=function(){return e},e}var k={},S=(0,Z.Ps)(x());var E=(0,Z.Ps)(C());var T=n(28435),R=n(21651),D=n(21423),I=n(88965),_=n(6108),B=n(26473),G=n(15436),P=n(79824),A=n(10702),N=n(34547),U=n(1645),L=n(48818),O=n(51467),X=n(17387),M=n(3282),F=n(22245),W=n(21371);function H(e){var t,n=e.options,r=e.initialSelectedOption,l=e.inputRef,c=e.setInputValue,u=(0,a.Z)(s.useState(""),2),d=u[0],f=u[1],h=(t={options:n,filter:d},s.useMemo((function(){return t.filter?F.Z.filter(t.filter.toLowerCase(),t.options).map((function(e){return e.original})):t.options}),[t.options,t.filter])),p=(0,W.Kb)({items:h,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,t){var n,r,a=t.type,s=t.changes;(a===W.Kb.stateChangeTypes.ItemClick||a===W.Kb.stateChangeTypes.InputKeyDownEnter&&s.selectedItem)&&(null===(n=l.current)||void 0===n||n.blur());return a!==W.Kb.stateChangeTypes.InputBlur||s.selectedItem?a===W.Kb.stateChangeTypes.InputBlur&&s.selectedItem?(c(null!==(r=s.selectedItem)&&void 0!==r?r:""),s):s:(0,o.Z)((0,i.Z)({},s),{isOpen:!0})}});return{filteredOptions:h,combobox:p,setFilter:f,filter:d}}var V=n(39059),z=n(43312),j=n(80703),q=n(2075),$=(0,z.iv)([I.l0.py(8),I.l0.pl(8),I.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:I.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:I.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),Y=(0,z.iv)([I.l0.reset.button,_.gU.listItem,I.l0.borderRadius(8),I.l0.center,{width:24,height:24}]),K=B.K.button;function Q(e){var t=e.id,n=e.onSelect,r=e.onInit,l=e.options,u=e.initialSelectedOption,d=e.placeholderText,f=e.autoFocus,h=e.disabled,p=s.useRef(null),g=(0,a.Z)(s.useState(null!==u&&void 0!==u?u:""),2),y=g[0],Z=g[1],b=H({options:l,initialSelectedOption:u,inputRef:p,setInputValue:Z}),w=b.filteredOptions,x=b.filter,C=b.combobox,k=b.setFilter,S=(0,O.Z)(n),E=(0,O.Z)(r);return s.useEffect((function(){u&&(E.current(u),Z(u),k(""))}),[u]),(0,X.Z)((function(){var e;C.selectedItem&&(null===(e=p.current)||void 0===e||e.blur(),S.current(C.selectedItem),Z(C.selectedItem),k(""))}),[C.selectedItem,S]),s.useEffect((function(){u&&(C.selectItem(u),Z(u),k(""))}),[u]),(0,c.BX)(B.G,{children:[(0,c.tZ)("div",(0,o.Z)((0,i.Z)({},C.getComboboxProps()),{children:(0,c.BX)(B.G,{css:[I.l0.flex.row,{position:"relative"}],children:[(0,c.tZ)(B.G,{css:[I.l0.flex.growAndShrink(1)],children:(0,c.tZ)(m.II,(0,o.Z)((0,i.Z)({},C.getInputProps({id:t,spellCheck:!1,autoFocus:f,onChange:function(e){k(e.currentTarget.value.toLowerCase()),Z(e.currentTarget.value)},ref:p,onFocus:function(e){C.openMenu(),e.currentTarget.select()}})),{value:y,placeholder:null!==u&&void 0!==u?u:d,css:[$],disabled:h}))}),h?null:(0,c.tZ)(B.G,{css:[{position:"absolute",top:0,right:0,height:"100%"},I.l0.center],children:(0,c.tZ)(K,(0,o.Z)((0,i.Z)({},C.getToggleButtonProps()),{css:Y,type:"button",children:C.inputValue&&!C.isOpen?(0,c.tZ)(V.Z,{}):(0,c.tZ)(M.Z,{})}))})]})})),(0,c.BX)("div",(0,o.Z)((0,i.Z)({},C.getMenuProps()),{css:{position:"relative"},children:[C.isOpen&&w.length?(0,c.tZ)(j.Z,{children:(0,c.tZ)("ul",{css:[I.l0.pt(4),I.l0.pb(8)],children:w.map((function(e,t){return(0,c.tZ)("li",(0,o.Z)((0,i.Z)({},C.getItemProps({item:e,index:t})),{children:(0,c.tZ)(q.Z,(0,o.Z)((0,i.Z)({},J(e)),{filter:x,selected:C.selectedItem===e,highlighted:C.highlightedIndex===t}))}),e.toLowerCase())}))})}):null,x&&!w.length&&C.isOpen?(0,c.tZ)(j.Z,{children:(0,c.tZ)(B.G,{css:[I.l0.p(16),I.l0.colWithGap(4)],children:(0,c.BX)(v.xv,{color:"dimmer",multiline:!1,children:['No results for "',x,'"']})})}):null]}))]})}function J(e){return{title:e,key:e.toLowerCase()}}var ee,te=n(37268),ne=n(87978);!function(e){e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN"}(ee||(ee={}));var re=new RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),ie=new RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function oe(e){var t=e.initRunCommand,n=e.isCompiled,r=e.allFiles,i=new Set(r);return i.has("Makefile")||i.has("makefile")?ee.Make:i.has("package.json")?ee.Npm:i.has("Cargo.toml")?ee.Cargo:n?ee.Unknown:i.has("config/application.rb")?ee.Rails:function(e,t){return e.some((function(e){return(0,ne.r6)(e)===t}))}(r,"csproj")?ee.DotNet:i.has("manage.py")?ee.Django:re.test(t)?ee.RegularRun:ee.Unknown}function ae(e,t){var n=t.initRunCommand,r=t.allFiles;switch(e){case ee.Npm:return"npm run start";case ee.RegularRun:var i=function(e){var t;return null!==(t=e.filter((function(e){return!ie.test(e)})).find((function(e){return re.test(e)})))&&void 0!==t?t:null}(r);return null==i?null:n.replace(re,i);case ee.Django:return"python3 manage.py runserver 0.0.0.0:3000";case ee.Rails:return"bundle exec rails server --binding=0.0.0.0";case ee.DotNet:return"dotnet run";case ee.Cargo:return"cargo run";case ee.Make:case ee.Unknown:default:return null}}function le(e){switch(e){case ee.Make:return"make";case ee.Cargo:case ee.DotNet:case ee.Npm:return"";default:return null}}function ce(e,t,n){if(0===n.length)return{projType:ee.Unknown,runCommand:null,compileCommand:null};var r={initRunCommand:e,isCompiled:t,allFiles:n},i=oe(r);return{projType:i,runCommand:ae(i,r),compileCommand:le(i)}}var se=n(9434),ue=n(8656),de=n(91050),fe=n(75665);var he=n(66860),pe=n(4561),me=n(26289),ve=n(4024),ge=n(92604),ye=n(27773);function Ze(e){var t=e.children;return(0,c.BX)(te.Tg,{background:"default",css:[I.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:[(0,c.tZ)(B.G,{children:(0,c.tZ)(v.xv,{multiline:!1,variant:"subheadDefault",css:[I.l0.color.foregroundDimmest,I.l0.pl(16),I.l0.pt(16)],children:".replit"})}),(0,c.tZ)(B.G,{css:[I.l0.p(16),I.l0.justify.center,I.l0.align.center,{flex:"1 1 auto"}],children:t})]})}function be(e){var t,n=Boolean(e.hasInterpreter),d=e.initialRun,f=null!==(t=e.initialCompile)&&void 0!==t?t:"",h=e.isFrameworkRecommended,p=!!e.projType&&e.projType===ee.Rails,y=e.isApplyingConfig,Z=(0,a.Z)(s.useState("Unknown"===u.ZP.get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),b=Z[0],w=(Z[1],(0,G.Y)(e.initialRun,(function(e){if(!e)return{message:"Add a run command"}}))),x=(0,a.Z)(s.useState(e.initialCompile),2),C=x[0],k=x[1];s.useEffect((function(){w.setValue(d)}),[d]),s.useEffect((function(){k(null!==f&&void 0!==f?f:"")}),[f]);var S=(0,G.Y)("",(function(e){if(!e)return{message:"Choose an entry point file"}})),E=(0,a.Z)(s.useState(Boolean(n&&!h)),2),N=E[0],O=E[1];s.useEffect((function(){O(Boolean(n&&!h))}),[n,h]);var X=B.K.a,M=(0,a.Z)(s.useState([]),2),F=M[0],W=M[1],H=(0,L.Z)(),V=function(){var e=(0,T.Z)(),t=e.fs,n=e.dotReplit,i=(0,he.P)(n),o=(0,L.Z)(),c=(0,a.Z)(s.useState(null),2),u=c[0],d=c[1];return s.useEffect((function(){var e=function(){var e=(0,r.Z)((function(){var e,n,r,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i?[4,t.listFiles()]:[2];case 1:return e=l.sent(),o.current?e.error||!e.files?(d([]),[2]):[4,t.readFile(A.l)]:[2];case 2:return n=l.sent(),r=e.files,a=me.uP.concat(me.nh),d(r.filter((function(e){return(n.error===pe.Df.NotFound||!i.some((function(t){return function(e){var t=e.split("/");if(1===t.length)return t;for(var n=[],r=0;r<t.length;r++)n.push(t.slice(0,r+1).join("/"));return n}(e).some((function(e){return null!=e.match(t)}))})))&&!a.includes(e)}))),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[i,t,o]),u}();return s.useEffect((function(){V&&H.current&&W(V)}),[H,V]),(0,c.BX)("form",{onSubmit:function(t){t.preventDefault(),e.setIsApplyingConfig(!0),w.value||N?e.onSubmit({run:w.value,compile:null!==C&&void 0!==C?C:"",entry:S.value,deleteInterp:!N,onDone:e.closeConfigPane,runChanged:w.value!==d,compileChanged:C!==f,projType:e.projType}):w.validate()},css:[I.l0.maxWidth(400),{width:"100%"}],children:[(0,c.BX)(B.G,{css:[I.l0.colWithGap(8)],children:[e.hasProcfile?(0,c.tZ)(B.G,{css:[I.l0.colWithGap(8)],children:(0,c.BX)(v.xv,{variant:"small",css:[I.l0.mb(24)],children:["Looks like you came from Heroku!",(0,c.tZ)(X,{target:"_blank",href:"https://docs.replit.com/tutorials/import-heroku",rel:"noopener noreferrer",children:"Read more about Replit and Heroku here."})]})}):null,n?(0,c.tZ)(B.G,{css:[I.l0.pb(16)],children:(0,c.BX)(U.hE,{disabled:y,name:"interpreterView",value:N.toString(),row:!0,onChange:function(){return O((function(e){return!e}))},stretch:!0,primary:!0,children:[(0,c.tZ)(U.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,c.tZ)(U.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,c.BX)(B.G,{css:[I.l0.height(e.initialCompile?210:170),I.l0.colWithGap(8)],children:[N?null:(0,c.BX)(B.G,{css:[I.l0.maxWidth(400),I.l0.colWithGap(8)],children:[e.initialCompile?(0,c.BX)(B.G,{css:[I.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,c.tZ)(v.xv,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,c.tZ)(m.II,{disabled:y,id:"compile-sel",type:"text",value:C,placeholder:"Enter a command to compile the program",onChange:function(e){k(e.currentTarget.value)},css:{"&:disabled":{color:I.TV.foregroundDimmer}}})]}):null,(0,c.tZ)("label",{htmlFor:"run-sel",css:[I.l0.mt(4)],"data-cy":"import-config-run-command",children:"Configure the Run Command"}),(0,c.tZ)(m.II,{disabled:y,id:"run-sel","data-cy":"import-config-run-command-input",type:"text",value:w.value,placeholder:"Enter a command to run the program",onChange:function(e){w.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:I.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),p?(0,c.BX)(v.xv,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,c.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit\u2019s features."]}):null,w.error||!w.value?(0,c.BX)(B.G,{css:[I.l0.color.accentNegativeDefault,I.l0.rowWithGap(4),I.l0.align.center],children:[(0,c.tZ)(P.Z,{size:12}),(0,c.tZ)(B.G,{children:w.error?w.error.message:"Add a run command"})]}):null]}),N?(0,c.BX)(B.G,{css:[{maxWidth:400},I.l0.colWithGap(8)],children:[(0,c.tZ)("label",{htmlFor:"entry-sel",children:"Configure entry point"}),(0,c.tZ)(v.xv,{variant:"small",css:[I.l0.color.foregroundDimmest],children:"The entry point is the file that\u2019s run by default and shown first."}),0!==F.length?(0,c.tZ)(Q,(0,o.Z)((0,i.Z)({id:"config-selector",onSelect:S.setValue,onInit:S.setValue,options:F},F.length&&Boolean(V)&&{initialSelectedOption:F[0]}),{disabled:y})):(0,c.tZ)(m.II,{disabled:y,id:"entry-sel",type:"text",value:S.value,placeholder:"Choose entry point file",onChange:function(e){S.setValue(e.currentTarget.value)},css:[_.gU.filled,{cursor:"text"}]}),S.error?(0,c.BX)(B.G,{css:[{color:"var(--accent-negative-default)"},I.l0.rowWithGap(4),I.l0.align.center],children:[(0,c.tZ)(P.Z,{size:12}),(0,c.tZ)(B.G,{children:S.error.message})]}):null]}):null,(0,c.tZ)(X,{css:[I.l0.color.accentPrimaryStronger,{fontWeight:I.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,c.tZ)(B.G,{css:[I.l0.flex.row,I.l0.pt(16)],children:(0,c.tZ)(g.zx,{colorway:"primary",variant:"outlined",type:"submit",text:y?"Saving...":"Done",disabled:y||!N&&(Boolean(w.error)||!w.value),css:[_.gU.filledAndOutlined,{fontWeight:I.TV.fontWeightMedium,color:I.TV.accentPrimaryStronger}],dataCy:"import-config-done"})})]})]}),(0,c.tZ)(R.u,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,c.tZ)(B.G,{css:[I.l0.borderRadius(16),I.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,c.BX)(D.gC,{align:"center",spacing:1,children:[(0,c.tZ)(ye.Z,{size:32}),(0,c.BX)(v.xv,{multiline:!1,children:["Upgrading to ",u.ZP.get(b).displayName]})]})})})]})}function we(){return(0,c.BX)(B.G,{children:[(0,c.tZ)(B.G,{children:".replit looks a lil messed up :/"}),(0,c.tZ)("a",{css:[I.l0.pt(8),{fontSize:I.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function xe(){return(0,c.tZ)(B.G,{children:(0,c.BX)("p",{children:["Initializing run configuration",(0,c.tZ)(p,{style:{color:"var(--foreground-default)"}})]})})}var Ce=function(e){var t,n=(0,N.Z)(),o=(0,T.Z)(),u=o.fs,d=o.dotReplit,f=(0,a.Z)(function(e){var t=(0,i.Z)({},k,e);return w.D(E,t)}(),1)[0],h=(0,L.Z)(),p=function(e){var t=(0,i.Z)({},k,e);return b.a(S,t)}({variables:{replId:n}}),m="Repl"===(null===(t=p.data)||void 0===t?void 0:t.repl.__typename)?p.data.repl:null,v=e.useReadFile(u,A.l),g=(0,a.Z)(s.useState(!1),2),y=g[0],Z=g[1],x=(0,a.Z)(s.useState(!1),2),C=x[0],R=x[1],D=v&&!v.error?v.content.toString("utf8"):"",I=(0,a.Z)(s.useState(""),2),_=I[0],B=I[1],G=(0,a.Z)(s.useState(""),2),P=G[0],U=G[1],O=(0,a.Z)(s.useState(!1),2),X=O[0],M=O[1],F=(0,a.Z)(s.useState(ee.Unknown),2),W=F[0],H=F[1],V=(0,a.Z)(s.useState(!1),2),z=V[0],j=V[1];s.useEffect((function(){function e(){return e=(0,r.Z)((function(){var e,t,n,r,i,o,a,c,s,f,p,m,v,g,b,w;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,d.getConfig()];case 1:return e=l.sent(),t=e.config,e.error?[2]:(r=(0,ve.Cq)(null!==(n=t.run)&&void 0!==n?n:void 0),o=(0,ve.Cq)(null!==(i=t.compile)&&void 0!==i?i:void 0),a=Boolean(t.compile),c=Boolean(t.interpreter),[4,u.listFiles()]);case 2:return s=l.sent(),h.current?(null!=s.error||null==s.files||0===s.files.length||(f=s.files,p=ce(r,a,f),m=p.projType,v=p.runCommand,g=p.compileCommand,b=y?null!==r&&void 0!==r?r:v:null!==v&&void 0!==v?v:r,w=null!==g&&void 0!==g?g:o,Z(f.includes(ge.E)),B(b),U(w),M(m!==ee.Unknown&&m!==ee.RegularRun),H(m),j(c)),[2]):[2]}}))})),e.apply(this,arguments)}D&&function(){e.apply(this,arguments)}()}),[D,h]),s.useEffect((function(){(0,se.j)(se.U3.NIX_GH_IMPORT_USED,{action:ue.D.ImportEnded,replId:n})}),[n]);var q=(0,de.Z)();s.useEffect((function(){q(!1)}),[]);var $=function(){var e=(0,r.Z)((function(e){var t,r,i,o,a,c,s,h,p,m;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.run,r=e.compile,i=e.entry,o=e.deleteInterp,a=e.onDone,c=e.runChanged,s=e.compileChanged,h=e.projType,(0,se.j)(se.U3.NIX_GH_IMPORT_USED,{action:ue.D.ConfigDone,interpUsed:!o,isCompiled:""!==r,runChanged:c,compileChanged:s,projType:h,replId:n}),p=function(e,t,n,r){var i=[];return r?(i.push((0,fe.xz)("interpreter")),i.push((0,fe.xz)("entrypoint")),i.push((0,fe.KQ)(e)),i.push((0,fe.X6)(e)),n?(i.push((0,fe.D3)(n)),i.push((0,fe.pi)(n))):(i.push((0,fe.xz)("compile")),i.push((0,fe.xz)("deployment/build")))):(i.push((0,fe.xz)("run")),i.push((0,fe.If)(t))),i}(t,i,r,o),m=f({variables:{input:{id:n}}}),[4,d.updateDotReplit(p)];case 1:return l.sent(),u.flush().then((function(){u.persist({skipDebounce:!0})})),[4,m];case 2:return l.sent(),a(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return m&&v?(null===v||void 0===v?void 0:v.error)?(0,c.tZ)(Ze,{children:(0,c.tZ)(we,{})}):(0,c.tZ)(Ze,{children:(0,c.tZ)(be,{initialLanguage:"",initialRun:_,initialCompile:P,hasInterpreter:z,fs:u,hasProcfile:y,isApplyingConfig:C,setIsApplyingConfig:R,onSubmit:$,isFrameworkRecommended:X,projType:W,closeConfigPane:e.closeConfigPane})}):(0,c.tZ)(Ze,{children:(0,c.tZ)(xe,{})})}},21927:function(e,t,n){var r=n(74985),i=n(50959),o=n(26473),a=n(40447),l=n(88965),c=n(2088),s=n(53312),u=function(e){var t=e.reason,n=e.children;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.minWidth(225),l.l0.height(225),l.l0.p(16),l.l0.color.foregroundDefault,l.l0.borderRadius(8),l.l0.backgroundColor.backgroundOverlay,l.l0.zIndex(5e5),{cursor:"not-allowed"}],children:[(0,r.tZ)(c.Z,{height:80}),(0,r.BX)(s.xv,{multiline:!1,variant:"subheadBig",css:[l.l0.mt(32)],dataCy:"import-loading-spinner",children:[t,"..."]}),n]})};function d(e){var t=e.reason,n=e.children;return(0,r.tZ)(a.h,{children:(0,r.tZ)(o.G,{css:[l.l0.position.fixed,l.l0.flex.row,l.l0.align.center,l.l0.justify.center,l.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:5e5,cursor:"not-allowed"}],children:(0,r.tZ)(u,{reason:null!==t&&void 0!==t?t:"Importing",children:n})})})}t.Z=(0,i.memo)(d)},30296:function(e,t,n){n.d(t,{xV:function(){return K},du:function(){return T},av:function(){return q}});var r=n(57389),i=n(81962),o=n(72006),a=n(74985),l=n(18988),c=n(99829),s=n(49055),u=n(3715),d=n(61025),f=n(40447),h=n(37268),p=n(88965),m=n(50959),v=n(92153),g=n(90234),y=n(15859),Z=n(71999),b=n(28132);function w(){return(0,m.useState)((function(){return(0,g.MT)()}))[0]}var x=(0,m.createContext)(null);function C(){var e=(0,m.useContext)(x);if(!e)throw new Error("Expected store in context");return e}function k(e){return(0,Z.Dv)(e,{store:C()})}function S(e){return(0,b.b)(e,C())}var E=function(e){return(0,Z.b9)(e,{store:C()})};function T(e){var t=w();return(0,a.tZ)(x.Provider,{value:t,children:e.children})}var R,D=(0,n(86093).$)(["display","visibility","transform","maxHeight","width"]),I=D.cssVars,_=D.styleTokens,B=(0,g.cn)(null),G=(0,g.cn)("default"),P=(0,g.cn)({command:null,offset:{x:0,y:0},visible:!1}),A=(0,y.kv)(P,(function(e){return e.offset})),N=(0,y.kv)(P,(function(e){return e.command})),U=(0,y.kv)(P,(function(e){return e.visible})),L=(0,y.kv)(B,(function(e){return null!==(R=null===e||void 0===e?void 0:e.initial)&&void 0!==R?R:null})),O=(0,g.cn)((function(e){var t=e(A);if(!t)return null;var n=t.y,r=window.innerHeight-n,i=e(L),o=null!==i?i-r:0;return o>0&&(n=Math.max(16,n-Math.min(200,o))),n})),X=(0,g.cn)((function(e){var t=e(A);if(!t)return null;var n=t.x,r=window.innerWidth,i=e(F),o=i?n+i:null,a=o?o-r+16:0;return a>0&&(n=Math.max(16,n-a)),n})),M=(0,g.cn)((function(e){var t=e(X),n=e(O);return null==t||null===n?null:(0,r.Z)({},I.transform,"translate(".concat(t,"px, ").concat(n,"px)"))})),F=(0,g.cn)(null),W=(0,g.cn)((function(e){var t=e(F);return(0,r.Z)({},I.width,(null===t?180:t)+"px")})),H=(0,g.cn)((function(e){var t=e(O);return null===t?null:(0,r.Z)({},I.maxHeight,"calc(100vh - ".concat(p.TV.space16," - ").concat(t,"px)"))})),V=(0,g.cn)(null,(function(e,t){t(B,null),t(F,null),t(z,null),t(P,(function(e){return(0,v.ZP)(e,(function(e){e.visible=!1,e.command=null}))}))})),z=(0,g.cn)(null),j=(0,g.cn)(null,(function(e,t,n){if(t(G,n.background),n.width&&t(F,n.width),n.target){var r=n.target.getBoundingClientRect(),i={x:r.x,y:r.y+r.height+8};return t(z,r),void t(P,(function(e){return(0,v.ZP)(e,(function(e){e.command=n.command,e.offset=i,e.visible=!0}))}))}t(P,(function(e){return(0,v.ZP)(e,(function(e){e.command=n.command,e.offset=n.offset,e.visible=!0}))}))}));function q(){var e=E(j),t=(0,h.nZ)({elevated:!0});return{openContextMenu:(0,m.useCallback)((function(n){e((0,i.Z)(n.target,HTMLElement)?{command:n.command,target:n.target,width:n.width,background:t}:{command:n.command,offset:n.target,target:null,width:n.width,background:t})}),[e,t]),onContextMenu:(0,m.useCallback)((function(n,r){var i=r.command,o=r.width;n.preventDefault(),e({command:i,offset:{x:n.clientX,y:n.clientY},target:null,width:o,background:t})}),[e,t])}}var $=(0,d.X)({surface:[p.l0.shadow(3),p.l0.borderRadius(8),p.l0.position.absolute,{top:0,left:0,border:"1px solid",borderColor:p.TV.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(p.TV.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(p.TV.space16,"))"),maxHeight:_.maxHeight,width:_.width,transform:_.transform,visibility:_.visibility,display:_.display}]});function Y(){var e=k(z);return e?(0,a.tZ)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var K=(0,m.memo)((function(e){var t=e.fontSize,n=void 0===t?14:t,d=E(V),p=k(N),v=S(U),g=(0,m.useRef)((function(){}));(0,m.useEffect)((function(){var e=function(e){var t;e&&(null===(t=g.current)||void 0===t||t.call(g))};return e(v.current),v.subscribe(e)}),[v]);var y=E(B),Z=(0,m.useRef)(null);(0,m.useEffect)((function(){var e=function(e){var t;(0,i.Z)(e.target,HTMLElement)&&(null===(t=Z.current)||void 0===t?void 0:t.contains(e.target))||d()},t=function(t){t?document.addEventListener("pointerdown",e):document.removeEventListener("pointerdown",e)},n=v.subscribe(t);return function(){n(),t(!1)}}),[v,d]);var b=S(M);(0,u.j)(Z,b),(0,u.j)(Z,S(H)),(0,u.j)(Z,v,(function(e){var t;return t={},(0,r.Z)(t,I.visibility,e?"visible":"hidden"),(0,r.Z)(t,I.display,e?"flex":"none"),t}));var w=S(W);(0,u.j)(Z,w);var x=(0,s.Z)(),C=k(U)&&!x,T=k(G),R=(0,o.Z)({},b.current,w.current);return p?(0,a.BX)(f.h,{children:[(0,a.tZ)(Y,{}),(0,a.tZ)(l.MT,{autoFocus:C,restoreFocus:!0,contain:!0,children:(0,a.tZ)(h.Tg,{onKeyDown:function(e){"Escape"===e.key&&d()},innerRef:Z,css:$.surface,style:R,background:T,children:(0,a.tZ)(c.X,{iconBreadcrumbs:!0,command:p,onAction:d,onSelect:d,onTotalHeightChange:y,focusRef:g,fontSize:n,compact:!0})})})]}):null}))},4682:function(e,t,n){n.d(t,{Z:function(){return y},e:function(){return w}});var r=n(72006),i=n(77637),o=n(74985),a=n(37268),l=n(53312),c=n(26473),s=n(61025),u=n(88965),d=n(87978),f=n(25404),h=n(16296),p=n(35650),m=n(95141),v=n(77205),g=(0,s.X)({code:[u.l0.font.code,u.l0.flex.grow(1)],surface:[u.l0.borderRadius(8),u.l0.p(8),u.l0.flex.row,u.l0.rowWithGap(8),u.l0.align.center]});function y(e){var t=w(e.filePath,e.keyName);if(!t)return null;var n=t.import,i=t.access;return(0,o.BX)(c.G,{css:u.l0.colWithGap(8),children:[n?(0,o.tZ)(Z,(0,r.Z)({code:n},e)):null,(0,o.tZ)(Z,(0,r.Z)({code:i},e))]})}function Z(e){var t=e.code,n=e.onInsert,r=(0,i.Z)(e,["code","onInsert"]);return(0,o.BX)(a.Tg,{elevated:r.elevated,css:g.surface,children:[(0,o.tZ)(b,{value:t}),(0,o.tZ)(l.xv,{variant:"small",css:g.code,multiline:!1,children:t}),n?(0,o.tZ)(m.zx,{variant:"outlined",size:"small",onClick:function(){return n(t)},text:"Insert",iconRight:(0,o.tZ)(v.Z,{})}):null]})}function b(e){var t=e.value,n=(0,f.Z)();return(0,o.tZ)(h.hU,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(t).then((function(){n.showConfirm("Copied")}))},children:(0,o.tZ)(p.Z,{})})}function w(e,t){if(!e)return null;switch((0,d.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}},72015:function(e,t,n){n.d(t,{qi:function(){return se},$M:function(){return fe},u_:function(){return ve},BH:function(){return ge},ZP:function(){return xe}});var r,i=n(57135),o=n(72006),a=n(4405),l=n(2272),c=n(96583),s=n(74985),u=n(50959),d=n(4561),f=n(34489),h=n(48818),p=n(62385),m=n(74906),v=n(67043),g=n(9434),y=n(3717),Z=n(43182),b=n(28814),w=n(48587),x=n(20476),C=n(7986),k=n(95141),S=n(21651),E=n(55418),T=n(37268),R=n(53312),D=n(26473),I=n(44385),_=n(158),B=n(28696),G=n(88965),P=n(28863),A=g.U3.ENV_EDITOR_USED;function N(e){var t=e.secrets,n=e.update,r=(0,u.useState)(!1),o=r[0],a=r[1],l=(0,u.useState)(!1),d=l[0],f=l[1],h=(0,u.useState)(!1),p=h[0],m=h[1],v=(0,u.useState)(0),y=v[0],N=v[1],O=0===y,X=(0,u.useRef)();X.current||(X.current=(0,b.ir)((function(e){var t=U(e.state.doc.toString());return N(t),0!==t?(0,g.j)(A,{action:"rawEditorUpdatedError"}):(0,g.j)(A,{action:"rawEditorUpdated"}),[]})));var M=(0,C.Z)(),F=M.ref,W=M.view,H=function(){d||a(!1)},V=function(){var e=(0,i.Z)((function(){var e,t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:if(!W)return[2];if(!function(){if(!W)return!1;var e=U(W.state.doc.toString());return N(e),0===e}())return[2];f(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=JSON.parse(W.state.doc.toString()),[4,n(e)];case 2:return r.sent(),f(!1),m(!0),setTimeout((function(){H(),setTimeout((function(){m(!1)}),500)}),500),[3,4];case 3:return t=r.sent(),Z.Tb(t),(0,g.j)(A,{action:"rawEditorUpdatedError"}),N(3),f(!1),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){if(W){var e=JSON.stringify(t,null,2);"{}"===e&&(e="{\n  \n}"),W.dispatch({changes:{from:0,to:W.state.doc.length,insert:e}}),W.dispatch({selection:{anchor:W.state.doc.length-2}}),W.focus()}}),[W,t]),(0,s.BX)(s.HY,{children:[(0,s.tZ)(k.zx,{onClick:function(){return m(!1),a(!0),void(0,g.j)(A,{action:"rawEditorOpened"})},text:"Edit as JSON",iconLeft:(0,s.tZ)(_.Z,{}),size:"small"}),(0,s.tZ)(S.u,{isOpen:o,onRequestClose:function(){return H()},children:(0,s.BX)(D.G,{css:[G.l0.colWithGap(24)],children:[(0,s.tZ)(R.h4,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,s.tZ)(R.xv,{children:"Secrets are specified in JSON. Values must be strings."}),(0,s.tZ)(T.Tg,{css:[G.l0.borderRadius(8),G.l0.transition.snappy,G.l0.p(4),{border:"1px solid var(--outline-dimmer)",":hover":{borderColor:"var(--outline-stronger)"}}],elevated:!0,children:(0,s.tZ)(x.ZP,{ref:F,readOnly:d||p,extensions:[X.current,w.$f.of([{key:(0,P.l2)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return V(),!0},preventDefault:!0,stopPropagation:!0}])],language:"json",hideGutter:!0})}),(0,s.BX)(D.G,{css:[G.l0.rowWithGap(4),G.l0.justify.end],children:[!O&&(0,s.tZ)(E.E,{icon:(0,s.tZ)(B.Z,{}),colorway:"negative",text:L(y)}),(0,s.BX)(D.G,{css:[G.l0.rowWithGap(12)],children:[(0,s.tZ)(k.zx,{onClick:H,text:"Cancel"}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(I.Z,{}),stretch:!0,colorway:p?"positive":"primary",text:p?"Saved!":"Save",disabled:!O||d||p,onClick:function(){return V()}})]})]})]})})]})}function U(e){try{var t=JSON.parse(e);for(var n in t){if("string"!==typeof n)return 2;if("string"!==typeof t[n])return 2}return 0}catch(r){return 1}}function L(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}!function(e){e[e.VALID=0]="VALID",e[e.ERROR_PARSE=1]="ERROR_PARSE",e[e.ERROR_STRINGS=2]="ERROR_STRINGS",e[e.ERROR_SAVE=3]="ERROR_SAVE"}(r||(r={}));var O=n(20685),X=n(27773),M=n(86813),F=n(16296),W=n(14053),H=n(95148),V=n(75509),z=n(3861),j=n(92369),q=n(2580),$=n(97632),Y=n(25404),K=n(35650),Q=n(61025),J=n(54314),ee=n(84833),te=n(4682),ne=n(85919),re=n(28639),ie=n(90602),oe=n(61623),ae=(0,Q.X)({addSecretContainer:[G.l0.flex.column,G.l0.colWithGap(8),G.l0.py(8)],secretItemEdit:[G.l0.colWithGap(8)],secretItemEditInputs:[G.l0.rowWithGap(8)],secretItem:[G.l0.flex.row,G.l0.rowWithGap(8),G.l0.align.center],headerStyle:[G.l0.flex.row,G.l0.rowWithGap(8),G.l0.align.center,G.l0.p(8)],accessSecrect:[G.l0.px(8),G.l0.py(16),G.l0.colWithGap(8)],accessSecrectHeader:[G.l0.rowWithGap(8),G.l0.align.center]}),le={fontFamily:"text-security-disc"};function ce(e){var t=e.onClose,n=e.onAdd,r=e.otherKeys,i=(0,l.Z)(u.useState(!0),2),c=i[0],d=i[1],f=(0,l.Z)(u.useState({key:"",value:""}),2),h=f[0],p=f[1],m=h.key.length>0&&!r.includes(h.key);return(0,s.tZ)(s.HY,{children:(0,s.BX)(D.G,{css:ae.addSecretContainer,children:[(0,s.BX)(D.G,{css:G.l0.rowWithGap(8),children:[(0,s.BX)(D.G,{css:[G.l0.colWithGap(4),G.l0.width("40%")],children:[(0,s.tZ)(R.xv,{css:[G.l0.pt(2),G.l0.pb(4)],variant:"small",color:"dimmer",multiline:!1,children:"Key"}),(0,s.tZ)(O.II,{value:h.key,onChange:function(e){return p((0,a.Z)((0,o.Z)({},h),{key:e.target.value}))},placeholder:"SECRET_KEY",autoComplete:"off"}),r.includes(h.key)?(0,s.BX)(R.xv,{multiline:!1,variant:"small",css:{color:G.TV.accentNegativeDefault},children:['Secret "',h.key,'" already exists']}):null]}),(0,s.BX)(D.G,{css:[G.l0.colWithGap(4),G.l0.flex.growAndShrink(1)],children:[(0,s.BX)(D.G,{css:[G.l0.flex.row,G.l0.rowWithGap(4),G.l0.align.center],children:[(0,s.tZ)(R.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Value"}),(0,s.tZ)(F.hU,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return d(!c)},children:c?(0,s.tZ)(W.Z,{}):(0,s.tZ)(H.Z,{})})]}),(0,s.tZ)(O.II,{value:h.value,onChange:function(e){return p((0,a.Z)((0,o.Z)({},h),{value:e.target.value}))},style:c?le:void 0,autoComplete:"off",placeholder:"Value"})]})]}),(0,s.BX)(D.G,{css:[G.l0.rowWithGap(8),G.l0.justify.end],children:[(0,s.tZ)(k.zx,{size:"small",text:"Cancel",onClick:function(){return t()}}),(0,s.tZ)(k.zx,{size:"small",text:"Add Secret",colorway:"primary",disabled:!m,onClick:function(){n({key:h.key.trim(),value:h.value}),p({key:"",value:""})}})]})]})})}function se(e){var t=e.value,n=(0,Y.Z)();return(0,s.tZ)(F.hU,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(t).then((function(){n.showConfirm("Copied")}))},children:(0,s.tZ)(K.Z,{})})}var ue=[G.l0.flex.row,G.l0.rowWithGap(8),G.l0.align.center],de=(0,Q.X)({root:[G.l0.height("100%"),G.l0.borderRadius(8),{'& [aria-haspopup="listbox"]':[G.l0.height(32)]}],item:ue,itemDanger:[ue,{color:G.TV.accentNegativeStronger}]});function fe(e){var t=e.onEdit,n=e.onDelete;return(0,s.tZ)(T.Tg,{elevated:!0,css:de.root,children:(0,s.tZ)($.Z,{label:"Options",items:[{label:(0,s.BX)(D.G,{css:de.item,children:[(0,s.tZ)(p.Z,{}),(0,s.tZ)(R.xv,{multiline:!1,children:"Edit"})]}),onClick:t},{label:(0,s.BX)(D.G,{css:de.itemDanger,children:[(0,s.tZ)(q.Z,{}),(0,s.tZ)(R.xv,{multiline:!1,children:"Delete"})]}),isDescructive:!0,onClick:n}],onItemClick:function(e){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)}})})}var he=[G.l0.p(4),G.l0.rowWithGap(4),G.l0.borderRadius(8)],pe=(0,Q.X)({root:[he,G.l0.width("40%"),G.l0.display.flex,G.l0.overflowX("hidden")],text:[G.l0.flex.growAndShrink(1)]}),me=(0,Q.X)({root:[he,G.l0.flex.growAndShrink(1)],text:[G.l0.flex.growAndShrink(1),G.l0.truncate,{fontFamily:G.TV.fontFamilyCode}]});function ve(e){var t=e.value;return(0,s.BX)(T.Tg,{elevated:!0,css:pe.root,children:[(0,s.tZ)(se,{value:t}),(0,s.tZ)(oe.u,{tooltip:(0,s.tZ)(R.xv,{children:t}),children:function(e,n){return(0,s.tZ)(R.xv,(0,a.Z)((0,o.Z)({ref:n},e),{multiline:!1,css:pe.text,children:t}))}})]})}function ge(e){var t=e.value,n=(0,l.Z)(u.useState(!1),2),r=n[0],i=n[1];return(0,s.BX)(T.Tg,{elevated:!0,css:me.root,children:[(0,s.tZ)(se,{value:t}),(0,s.tZ)(R.xv,{multiline:!1,css:me.text,children:r?t:"\u2022".repeat(12)}),(0,s.tZ)(F.hU,{alt:"Toggle Secret",tooltipHidden:!0,onClick:function(){return i(!r)},children:r?(0,s.tZ)(H.Z,{}):(0,s.tZ)(W.Z,{})})]})}function ye(e){var t=(0,l.Z)(u.useState(""===e.secret.value?{key:e.secret.key,value:""}:null),2),n=t[0],r=t[1],i=(0,l.Z)(u.useState(!1),2),c=i[0],d=i[1],f=(0,l.Z)(u.useState(!0),2),h=f[0],p=f[1],m=e.secret;if(n&&!e.readOnly){var v,g=e.onDeleteSecret,y=e.onUpdateSecret;return(0,s.BX)(s.HY,{children:[(0,s.BX)(D.G,{css:ae.secretItemEdit,children:[(0,s.BX)(D.G,{css:ae.secretItemEditInputs,children:[(0,s.BX)(D.G,{css:[G.l0.colWithGap(2),G.l0.width("40%")],children:[(0,s.tZ)(R.xv,{multiline:!1,css:[G.l0.pt(2),G.l0.pb(4)],variant:"small",color:"dimmer",children:"Key"}),(0,s.tZ)(D.G,{children:(0,s.tZ)(O.II,{value:null!==(v=null===n||void 0===n?void 0:n.key)&&void 0!==v?v:"",onChange:function(e){return r((function(t){return t?(0,a.Z)((0,o.Z)({},t),{key:e.target.value}):t}))},placeholder:"SECRET_KEY",autoComplete:"off"})})]}),(0,s.BX)(D.G,{css:[G.l0.flex.growAndShrink(1),G.l0.colWithGap(2)],children:[(0,s.BX)(D.G,{css:[G.l0.flex.row,G.l0.rowWithGap(4),G.l0.align.center],children:[(0,s.tZ)(R.xv,{multiline:!1,css:[G.l0.pt(2),G.l0.pb(4)],variant:"small",color:"dimmer",children:"Value"}),(0,s.tZ)(F.hU,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return p(!h)},children:h?(0,s.tZ)(W.Z,{}):(0,s.tZ)(H.Z,{})})]}),(0,s.tZ)(D.G,{children:(0,s.tZ)(O.II,{value:n.value,style:h?le:void 0,onChange:function(e){return r((function(t){return t?(0,a.Z)((0,o.Z)({},t),{value:e.target.value}):t}))}})})]})]}),(0,s.BX)(D.G,{css:[G.l0.flex.row,G.l0.rowWithGap(8)],children:[(0,s.tZ)(k.zx,{size:"small",text:"Delete",colorway:"negative",onClick:function(){return d(!0)}}),(0,s.tZ)(D.G,{css:G.l0.flex.grow(1)}),(0,s.tZ)(k.zx,{size:"small",text:"Cancel",onClick:function(){return r(null)}}),(0,s.tZ)(k.zx,{size:"small",colorway:"primary",text:""===e.secret.value?"Add Secret":"Update Secret",disabled:!(null===n||void 0===n?void 0:n.key.length),onClick:function(){n&&(y(m.key,{key:n.key.trim(),value:n.value}),r(null))}})]})]}),(0,s.tZ)(S.u,{isOpen:c,onRequestClose:function(){return d(!1)},children:(0,s.BX)(D.G,{children:[(0,s.BX)(R.xv,{variant:"subheadDefault",multiline:!1,children:["Delete ",m.key,"?"]}),(0,s.tZ)(R.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,s.BX)(D.G,{css:[G.l0.justify.end,G.l0.flex.row,G.l0.rowWithGap(8)],children:[(0,s.tZ)(k.zx,{text:"Cancel",onClick:function(){return d(!1)}}),(0,s.tZ)(k.zx,{text:"Delete",colorway:"negative",onClick:function(){return g(m.key)}})]})]})})]})}return(0,s.BX)(D.G,{css:ae.secretItem,children:[(0,s.tZ)(ve,{value:m.key}),(0,s.tZ)(ge,{value:m.value}),e.readOnly?null:(0,s.BX)(s.HY,{children:[(0,s.tZ)(D.G,{children:(0,s.tZ)(fe,{onEdit:function(){return r(m)},onDelete:function(){return d(!0)}})}),(0,s.tZ)(S.u,{isOpen:c,onRequestClose:function(){return d(!1)},children:(0,s.BX)(D.G,{css:[G.l0.colWithGap(24)],children:[(0,s.BX)(R.xv,{multiline:!1,variant:"headerDefault",children:["Delete ",m.key,"?"]}),(0,s.tZ)(R.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,s.BX)(D.G,{css:[G.l0.justify.end,G.l0.flex.row,G.l0.rowWithGap(12)],children:[(0,s.tZ)(k.zx,{text:"Cancel",onClick:function(){return d(!1)}}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(q.Z,{}),text:"Yes, delete secret",colorway:"negative",onClick:function(){return e.onDeleteSecret(m.key)}})]})]})})]})]})}function Ze(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,a=e.onClose,c=Object.entries(t).filter((function(e){var t=(0,l.Z)(e,2);t[0];return""===t[1]})),u=Object.entries(t).filter((function(e){var t=(0,l.Z)(e,2);t[0];return""!==t[1]}));return(0,s.BX)(D.G,{css:[G.l0.colWithGap(8),G.l0.px(8),G.l0.pb(8)],children:[0!==c.length&&(0,s.BX)(s.HY,{children:[(0,s.BX)(D.G,{css:[G.l0.colWithGap(8)],children:[(0,s.tZ)(R.xv,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,s.tZ)(R.xv,{variant:"small",children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,s.tZ)(D.G,{css:[G.l0.colWithGap(8)],children:c.map((function(e){var t=(0,l.Z)(e,2),i=t[0],o=t[1];return(0,s.tZ)(ye,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r},i)}))})]}),(0,s.tZ)(ie.R,{})]}),(0,s.BX)(D.G,{css:[G.l0.colWithGap(8)],children:[o?(0,s.tZ)(ce,{onClose:a,onAdd:i,otherKeys:Object.keys(t)}):null,u.map((function(e){var t=(0,l.Z)(e,2),i=t[0],o=t[1];return(0,s.tZ)(ye,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r},i)}))]})]})}function be(e){var t=e.secrets,n=e.activeFile,r=(0,l.Z)(u.useState(Object.keys(t)[0]),2),i=r[0],o=r[1];return(0,y.Z)(n)&&(0,te.e)(n,i)&&0!==Object.keys(t).length?(0,s.BX)(D.G,{css:ae.accessSecrect,children:[(0,s.BX)(D.G,{css:ae.accessSecrectHeader,children:[(0,s.tZ)(R.xv,{multiline:!1,children:"Access secret"}),(0,s.tZ)(J.P,{css:G.l0.minWidth(48),items:Object.keys(t).map((function(e){return{title:e}})),selectedItem:{title:i},onChange:function(e){return o(e.title)}})]}),(0,s.tZ)(te.Z,{elevated:!0,keyName:i,filePath:n})]}):null}function we(e,t){var n=(0,o.Z)({},e);return"add"===t.type?n[t.key]=t.value:"update"===t.type?(delete n[t.oldKey],n[t.key]=t.value):delete n[t.key],n}function xe(e){var t=e.readRawEnv,n=e.writeRawEnv,r=e.getRunState,a=(0,M.R3)(),p=(0,h.Z)(),y=(0,l.Z)(u.useState(null),2),Z=y[0],b=y[1],w=(0,l.Z)(u.useState(!1),2),x=w[0],C=w[1],S=function(){C(!1)},E=(0,v.Z)();u.useEffect((function(){(0,g.Cn)(g.U3.ENV_EDITOR_USED,{action:"opened"}),m.Z.set("enveditortour",!0)}),[]),u.useEffect((function(){function e(){return(e=(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,t()];case 1:if((e=r.sent()).error===d.Df.NotFound)return p.current&&b({}),[2];if(e.error)throw new Error("Error getting .env");return p.current?(n=f.Z.parse(e.content.toString()),b(n),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,b,p]);var T=u.useRef(null),I=u.useRef([]),_=function(){var e=(0,i.Z)((function(e){var r,i,o,a,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(!Z)throw new Error("trying to write secrets before loading");return r=we(Z,e),b(r),I.current.push(e),i=Math.random(),T.current=i,[4,t()];case 1:return a=c.sent(),T.current!==i?[2]:(a.error?o=r:(o=f.Z.parse(a.content.toString()),I.current.forEach((function(e){o=we(o,e)})),b(o)),I.current=[],l=f.Z.serialize(o),[4,n(l)]);case 2:return c.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),B=(0,Y.Z)().showConfirm,P=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(t){return(0,g.j)(g.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),_((0,o.Z)({type:"add"},e)),r()===re.Ah.RUNNING&&B("Re-run your Repl to use this secret"),S(),[2]}))}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,i.Z)((function(e,t){return(0,c.__generator)(this,(function(n){return(0,g.j)(g.U3.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),_((0,o.Z)({type:"update",oldKey:e},t)),[2]}))}));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(t){return(0,g.j)(g.U3.ENV_EDITOR_USED,{action:"deleted"}),_({type:"delete",key:e}),[2]}))}));return function(t){return e.apply(this,arguments)}}(),L=(0,ne.Z)((function(){return Z&&Object.keys(Z).length>0}),[Z]);return Z&&E?(0,s.BX)(D.G,{css:[G.l0.flex.column],children:[(0,s.BX)(D.G,{css:ae.headerStyle,children:[(0,s.tZ)(R.xv,{css:G.l0.flex.growAndShrink(1),variant:"subheadDefault",multiline:!1,children:"Secrets"}),(0,s.tZ)(N,{secrets:Z,update:function(){var e=(0,i.Z)((function(e){var t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return b(e),t=f.Z.serialize(e),[4,n(t)];case 1:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()}),(0,s.tZ)(j.Z,{iconLeft:(0,s.tZ)(V.Z,{}),href:"https://docs.replit.com/programming-ide/workspace-features/secrets",size:"small",text:"Docs",target:"_blank"}),(0,s.tZ)(k.zx,{iconLeft:(0,s.tZ)(z.Z,{}),text:"New Secret",colorway:"primary",size:"small",onClick:function(){return C(!0)}})]}),(0,s.tZ)(D.G,{css:[G.l0.px(8)],children:(0,s.tZ)(ie.R,{})}),0===Object.keys(Z).length&&!1===x?(0,s.BX)(D.G,{css:[G.l0.center,G.l0.flex.shrink(1)],children:[(0,s.tZ)(ee.Z,{alt:"A rotating key",src:"/public/images/secrets/secretskey.gif",height:200,width:200,objectFit:"contain"}),(0,s.tZ)(R.xv,{variant:"subheadDefault",multiline:!1,children:"Store sensitive information securely using Secrets."}),(0,s.tZ)(R.xv,{css:[G.l0.textAlign.center,G.l0.mt(8),G.l0.color],multiline:!1,children:(0,s.tZ)("a",{href:"https://docs.replit.com/programming-ide/workspace-features/secrets#how-replit-keeps-your-secrets-safe",target:"_blank",rel:"noopener",children:"How does Replit keep my Secrets safe?"})})]}):null,(0,s.tZ)(Ze,{secrets:Z,onUpdateSecret:A,onDeleteSecret:U,onAddSecret:P,showAddSecret:x,onClose:S}),a&&L?(0,s.tZ)(be,{secrets:Z,activeFile:a}):null]}):(0,s.tZ)(D.G,{css:[G.l0.center,G.l0.coverContainer],children:(0,s.tZ)(X.Z,{size:24})})}},45969:function(e,t,n){n.d(t,{tr:function(){return U}});var r=n(57389),i=n(81962),o=n(74985),a=n(50959),l=n(4561),c=n(88965),s=n(26473),u=n(43312),d=n(35343),f=n(22004),h=n(87978),p=n(77205),m=n(88031),v=n(28435),g=n(81920),y=n(61025),Z=n(39995),b=n(40447),w=n(86093),x=n(46861),C=n(37268),k=n(6108),S=n(12583);function E(e){var t=e.node;return t.type===l.Tv.Directory?(0,o.tZ)(d.Z,{size:16}):(0,o.tZ)(f.Z,{size:16,path:t.path})}var T=(0,w.$)(["menuY","menuX"]),R=T.cssVars,D=T.styleTokens,I=(0,y.X)({root:[c.l0.maxHeight(400),c.l0.position.absolute,c.l0.borderRadius(8),c.l0.shadow(3),{border:"1px solid",borderColor:c.TV.outlineDefault,top:D.menuY,left:D.menuX,"& > div":[c.l0.maxHeight(400)]}]}),_=(0,u.iv)([k.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),B={button:(0,u.iv)([c.l0.reset.button,c.l0.p(2),c.l0.rowWithGap(4),c.l0.align.center,_]),text:(0,u.iv)({fontSize:c.TV.fontSizeSmall})},G={opacity:1};function P(e){var t,n=function(){var e,t=null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect();t&&f({x:t.x+"px",y:t.y+t.height+4+"px"})},l=e.node,c=e.openFile,u=(0,a.useState)(!1),d=u[0],f=u[1],p=(0,a.useRef)(null),m=(0,x.Z)((function(e){var t;d&&((0,i.Z)(e.target,HTMLElement)&&(null===(t=p.current)||void 0===t?void 0:t.contains(e.target))||f(!1))}),[d]),v=(0,a.useId)(),g=(0,a.useId)(),y=(0,h.Il)(l.path)||S.Ql,Z=(0,h.UO)(l.path);return(0,o.BX)(o.HY,{children:[(0,o.BX)(s.G,{innerRef:p,tag:"button",id:v,style:d?G:void 0,"aria-haspopup":"true","aria-expanded":Boolean(d),"aria-controls":g,css:B.button,onClick:function(){d?f(!1):n()},onKeyDown:function(e){switch(e.key){case" ":case"Enter":case"ArrowDown":n()}},children:[(0,a.cloneElement)((0,o.tZ)(E,{node:l}),{size:12}),(0,o.tZ)(s.G,{css:B.text,children:Z})]}),d?(0,o.tZ)(b.h,{children:(0,o.tZ)(C.Tg,{id:g,css:I.root,innerRef:m,style:(t={},(0,r.Z)(t,R.menuX,d.x),(0,r.Z)(t,R.menuY,d.y),t),onKeyDown:function(e){var t;"Escape"===e.key&&(f(!1),null===(t=p.current)||void 0===t||t.focus())},children:(0,o.tZ)(A,{openFile:c,parentPath:y,currentPath:l.path})})}):null]})}function A(e){var t=(0,v.Z)().fs,n=(0,Z.Z)().preferences,r=(0,g.T)(!0),i=(0,a.useCallback)((function(e){return!r(e.filename)}),[r]),l=(0,m.p)({fs:t,filter:i,focusedPath:e.currentPath,fontSize:n.fontSize,root:e.parentPath,manageWidth:!0,onFileSelect:function(t){var n=t.path;e.openFile(n)},alwaysShowCreateRow:!0});return(0,o.tZ)(m.s,{store:l.store})}var N=(0,u.iv)([c.l0.flex.row,c.l0.align.center,c.l0.height("100%"),c.l0.px(2)]),U=(0,a.memo)((function(e){var t=e.path,n=e.onFileClick,r=e.children,i=function(e){var t=e.split("/"),n=t.length;return t.map((function(e,r){return{type:r===n-1?l.Tv.File:l.Tv.Directory,path:t.slice(0,r+1).join("/")}}))}(t);return(0,o.BX)(s.G,{css:N,children:[i.map((function(e){return(0,o.BX)(a.Fragment,{children:[(0,o.tZ)(P,{node:e,openFile:n}),e.type===l.Tv.Directory?(0,o.tZ)(p.Z,{size:12}):null]},function(e){return CSS.escape(e.path)}(e))})),r||null]})}))},35429:function(e,t,n){n.d(t,{VY:function(){return P},HK:function(){return N},h4:function(){return I},Qc:function(){return B},H4:function(){return X},$E:function(){return A},Mp:function(){return F}});var r=n(57135),i=n(96583),o=n(74985),a=n(88965),l=n(26473),c=n(43312),s=n(45969),u=n(50959),d=n(24531),f=n(90171),h=n.n(f),p=n(85919),m=n(51087),v=n(35650),g=n(88794),y=n(96073),Z=n(73823),b=n(9694),w=n(86813),x=n(28435),C=n(75850),k=n(91333),S=n(87978);function E(e,t){return T.apply(this,arguments)}function T(){return(T=(0,r.Z)((function(e,t){var n,r,o;return(0,i.__generator)(this,(function(i){return n=(0,S.yC)(e),r=(0,S.UO)(e),(o=document.createElement("a")).setAttribute("href","data:".concat(n,";base64,").concat(t.toString("base64"))),o.setAttribute("download",r),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),[2]}))}))).apply(this,arguments)}var R=n(2580),D=(0,c.iv)([a.l0.height(28),a.l0.flex.row,a.l0.align.center,{borderBottom:"1px solid ".concat(a.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function I(e){return"/replEnvironmentDesktop"===h().pathname?(0,o.tZ)(l.G,{css:D,children:e.children}):null}var _=(0,c.iv)([a.l0.flex.row,a.l0.align.center,a.l0.flex.growAndShrink(1),a.l0.overflowX("auto"),a.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function B(e){return(0,o.tZ)(l.G,{css:_,children:e.children})}var G=(0,c.iv)([a.l0.flex.growAndShrink(1),a.l0.position.relative,a.l0.overflow("hidden"),a.l0.borderRadius(0,0,8,8)]);function P(e){return(0,o.tZ)(l.G,{css:[G,e.children&&a.l0.center],children:e.children})}function A(e){return{type:(0,d.Dp)({path:e}),data:{path:e}}}function N(e){var t=e.path,n=e.performPaneOperation,r=(0,u.useCallback)((function(e){n({operation:"replace",pane:A(e)})}),[n]);return(0,o.tZ)(I,{children:(0,o.tZ)(B,{children:(0,o.tZ)(s.tr,{path:t,onFileClick:r})})})}function U(e){return{match:m.pl,data:{label:"Copy file path",icon:(0,o.tZ)(k.Z,{}),type:"action",run:function(){(0,g.Z)(e)}}}}function L(e){return{match:m.pl,data:{label:"Copy link",icon:(0,o.tZ)(Z.Z,{}),type:"action",run:function(){var t=(0,y.dr)({path:e});(0,g.Z)(t)}}}}function O(e,t,n){return{match:m.pl,data:{label:"Duplicate file",icon:(0,o.tZ)(v.Z,{}),type:"action",run:function(){return(0,r.Z)((function(){var r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,C.Z)(e,t)];case 1:return r=i.sent(),[3,3];case 2:return i.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return n(r),[2]}}))}))()}}}}function X(e,t){return{match:m.pl,data:{label:"Download",icon:(0,o.tZ)(b.Z,{}),type:"action",run:function(){return(0,r.Z)((function(){var n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.readFile(e)];case 1:return(n=r.sent()).error?[2,{type:"error",message:"Error downloading file"}]:[4,E(e,n.content)];case 2:return r.sent(),[2]}}))}))()}}}}function M(e,t){return{match:m.pl,data:{label:"Delete",icon:(0,o.tZ)(R.Z,{color:a.TV.redDefault}),type:"action",run:function(){t(e)}}}}function F(e){var t=e.path,n=e.performPaneOperation,r=(0,x.Z)(),i=(0,w._o)();return(0,p.Z)((function(){return t?[U(t),L(t),O(t,r.fs,(function(e){n({operation:"replace",pane:{type:(0,d.Dp)({path:e}),data:{path:e}}})})),X(t,r.fs),M(t,i)]:null}),[t,r.fs,n,i])}},75970:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(74985),i=(n(50959),n(87978)),o=n(53312),a=n(26473),l=n(88965),c=n(95141),s=n(31241);function u(e){var t,n=e.paths,u=e.onCancel,d=e.onConfirm;return(0,r.BX)(a.G,{css:[l.l0.colWithGap(24)],children:[(0,r.tZ)(o.h4,{level:1,variant:"headerDefault",children:n.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.BX)(o.xv,{children:[(t=n,(t=t.map(i.UO)).length<2?t[0]:"".concat(t.slice(0,-1).join(", ")," and ").concat(t.slice(-1)))," already"," ",n.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",n.length>1?"them":"it","? This cannot be undone."]}),(0,r.BX)(a.G,{css:[l.l0.rowWithGap(12),l.l0.justify.end],children:[(0,r.tZ)(c.zx,{onClick:function(){return u()},text:"Cancel"}),(0,r.tZ)(c.zx,{colorway:"negative",onClick:function(){return d()},text:"Yes, overwrite ".concat(n.length>1?"these files":"this file"),iconLeft:(0,r.tZ)(s.Z,{})})]})]})}},6396:function(e,t,n){n.d(t,{eo:function(){return y},fO:function(){return g},pe:function(){return Z}});var r=n(74985),i=n(61025),o=n(95141),a=n(88965),l=n(50959),c=n(43312),s=n(8151),u=n(88794),d=n(35650),f=n(9434),h=n(61623),p=n(95480),m=(0,c.F4)({"0%":{opacity:0,transform:"translateX(8px)"},"10%":{opacity:1,transform:"translateX(0)"},"95%":{opacity:1},"100%":{opacity:0}}),v=(0,i.X)({buttonContainer:[a.l0.position.relative,{transition:"opacity 75ms linear",opacity:1}],buttonWrapper:[a.l0.flex.row],button:[a.l0.backgroundColor.backgroundDefault],buttonToast:{position:"absolute",display:"block",bottom:"100%",paddingBottom:a.TV.space4,paddingRight:a.TV.space8,animation:"".concat(m," 3s"),fontFamily:a.TV.fontFamilyDefault,fontSize:a.TV.fontSizeDefault,whiteSpace:"nowrap",userSelect:"none"}}),g=function(e){var t=e.code,n=e.language,i=(0,l.useState)(!1),a=i[0],c=i[1];return(0,r.BX)("div",{css:v.buttonContainer,children:[a?(0,r.tZ)("span",{css:v.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){c(!1)}))},"aria-hidden":!0,children:"Copied!"}):null,(0,r.tZ)(o.zx,{css:v.button,text:"Copy",size:"small",iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){(0,f.j)(f.U3.GHOSTWRITER_CHAT_CODE_COPIED,{language:n}),(0,u.Z)(t),c(!0)}})]})},y=function(e){var t=e.code,n=e.disabled,i=e.insertCode,a=(0,l.useState)(!1),c=a[0],u=a[1],d=(0,r.tZ)(o.zx,{css:v.button,text:"Insert",disabled:n,size:"small",iconLeft:(0,r.tZ)(s.Z,{}),onClick:function(){i&&(i(t),u(!0))}});return(0,r.BX)("div",{css:v.buttonContainer,children:[c?(0,r.tZ)("span",{css:v.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){u(!1)}))},"aria-hidden":!0,children:"Inserted!"}):null,(0,r.tZ)(h.u,{placement:"bottom",tooltip:n?"Place cursor in a file to insert code":"Insert code at cursor position",children:d})]})},Z=function(e){var t=e.revertCodeInsert,n=(0,l.useState)(!1),i=n[0],a=n[1],c=(0,r.tZ)(o.zx,{css:v.button,text:"Revert",size:"small",iconLeft:(0,r.tZ)(p.Z,{}),onClick:function(){t(),a(!0)}});return(0,r.BX)("div",{css:v.buttonContainer,children:[i?(0,r.tZ)("span",{css:v.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){a(!1)}))},"aria-hidden":!0,children:"Reverting..."}):null,(0,r.tZ)(h.u,{placement:"bottom",tooltip:"Revert code insertion",children:c})]})}},29161:function(e,t,n){n.d(t,{v:function(){return Me},z:function(){return Ue}});var r=n(72006),i=n(74985),o=n(88965),a=n(53312),l=n(26473),c=n(27773),s=n(50959),u=n(81202),d=n.n(u),f=n(34495),h=n(2272),p=n(9434),m=n(16296),v=n(21978),g=n(448),y=n(96179),Z=n(80231),b=n(19949),w=n(51631),x=n(43119),C=n(71440),k=n(50216);function S(){var e=(0,x.Z)(["\n  mutation AIFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        id\n        __typename\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return S=function(){return e},e}var E={},T=(0,C.Ps)(S());var R=n(90346),D=function(e){var t=e.provideFeedback;return(0,i.BX)(l.G,{css:[o.l0.rowWithGap(4),o.l0.align.center],children:[(0,i.tZ)(m.hU,{alt:"Helpful",colorway:"positive",children:(0,i.tZ)(y.Z,{css:{"&:not(:hover)":[o.l0.color.foregroundDimmer]},onClick:function(){return t(w.TY.Yes)}})}),(0,i.tZ)(m.hU,{alt:"Unhelpful",colorway:"negative",children:(0,i.tZ)(v.Z,{css:{"&:not(:hover)":[o.l0.color.foregroundDimmer]},onClick:function(){return t(w.TY.No)}})})]})},I=function(e){return e.feedback===w.TY.Yes?(0,i.tZ)(Z.Z,{}):(0,i.tZ)(g.Z,{})};function _(e){var t=e.inferenceId,n=e.inferenceClass,o=(0,s.useState)(null),a=o[0],l=o[1],c=(0,R.v)(),u=(0,h.Z)(function(e){var t=(0,r.Z)({},E,e);return k.D(T,t)}(),2),d=u[0];return u[1].error?(0,i.tZ)(b.Z,{}):(0,i.tZ)(i.HY,{children:a?(0,i.tZ)(I,{feedback:a}):(0,i.tZ)(D,{provideFeedback:function(e){n===w.Sg.Chat&&(0,p.j)(p.U3.GHOSTWRITER_CHAT_FEEDBACK_SUBMITTED,{feedback:e}),d({variables:{input:{feedback:e,inferenceClass:n,inferenceId:t}}}),l(e),c(!0)}})})}var B=n(73194),G=n.n(B),P=n(17317),A=n(64918),N=n(79824),U=n(95134),L=n(85919),O=n(89172),X=n(24430),M=n(85465),F=n(54314),W=n(15064),H=n(18950),V=n(61623),z=n(61025),j=n(22004),q=n(62616),$=n(95141),Y=n(73823),K=n(46130),Q=n(16679),J=n(95480),ee=n(4405),te=n(13606);function ne(e){return(0,i.tZ)(te.Z,(0,ee.Z)((0,r.Z)({viewBox:"0 0 13 12"},e),{children:(0,i.tZ)("path",{d:"M6.25 0.721688C6.4047 0.632371 6.5953 0.632371 6.75 0.721688L10.9462 3.14434C11.1009 3.23365 11.1962 3.39872 11.1962 3.57735V8.42265C11.1962 8.60128 11.1009 8.76635 10.9462 8.85566L6.75 11.2783C6.5953 11.3676 6.4047 11.3676 6.25 11.2783L2.05385 8.85566C1.89915 8.76635 1.80385 8.60128 1.80385 8.42265V3.57735C1.80385 3.39872 1.89915 3.23365 2.05385 3.14434L6.25 0.721688Z",fill:"#5239CC",stroke:"#795EFF"})}))}var re=n(3689),ie=n(25367),oe=n(17436),ae=(0,z.X)({footerContainer:[o.l0.rowWithGap(8),o.l0.flex.wrap],retryButton:[o.l0.width(100),{"@keyframes slideLeft":{"0%":{paddingLeft:30},"100%":{paddingLeft:8}},"@keyframes slideRight":{"0%":{paddingLeft:8},"100%":{paddingLeft:30}}}]}),le=function(e){var t,n=e.onRetry,r=e.limitReached,a=(0,ie.T9)(),c=a.useAdvancedModel,u=a.setUseAdvancedModel,d=(0,s.useRef)(!1),f=(0,K.T3)(),h=c&&!r,v=(0,s.useId)(),g=(0,ie.Lw)(),y=(0,oe.Q)();t=!d.current||r?void 0:h?"slideLeft 300ms ease-out":"slideRight 300ms ease-out";var Z=(0,i.BX)(i.HY,{children:[(0,i.tZ)(Q.X,{onChange:function(e){d.current||(d.current=!0),(0,p.j)(p.U3.GHOSTWRITER_CHAT_MODEL_CHANGED,{source:"footer",model:e.target.checked?"advanced":"default"}),u(!h)},id:v,disabled:r,checked:!r&&h}),(0,i.tZ)("label",{htmlFor:v,css:r?[o.l0.color.foregroundDimmer]:void 0,children:"Advanced model"})]}),b=g?"You have reached the weekly limit.":"Upgrade to ".concat(y," for the advanced model");return(0,i.BX)(l.G,{css:[o.l0.rowWithGap(8),o.l0.flex.growAndShrink(1),{justifyContent:"flex-end"}],children:[!c||d.current?(0,i.BX)(l.G,{css:[o.l0.rowWithGap(8),o.l0.align.center],children:[r?(0,i.tZ)(V.u,{tooltip:b,children:(0,i.tZ)(l.G,{css:[o.l0.rowWithGap(8)],children:Z})}):Z,f?null:(0,i.tZ)(m.hU,{alt:r?b:"Useful for more complex, vague, or creative requests.",size:24,children:(0,i.tZ)(re.Z,{})})]}):null,(0,i.tZ)($.zx,{css:[ae.retryButton,{paddingLeft:h?8:30,animation:t}],variant:"outlined",iconLeft:(0,i.tZ)(J.Z,{}),iconRight:(0,i.tZ)(ne,{css:[{transition:"opacity 300ms ease-out",opacity:h?1:0}]}),text:"Retry",onClick:function(e){return n(Boolean(h))}})]})},ce=function(e){var t=e.onRetry,n=e.limitReached;return(0,i.tZ)(l.G,{css:ae.footerContainer,children:(0,i.tZ)(le,{onRetry:t,limitReached:n})})},se=n(21698),ue=n(7653),de=n(53128),fe=(0,n(90234).cn)(null,(function(e,t,n,r){t(de.FH,{messageId:n.id}),t(X.SX,{responseId:n.id,action:n.intent,shouldUseAdvancedModelOverride:!1,aiUsername:r})})),he=n(91625),pe=n(25593),me=function(e){var t=e.isOpen,n=e.onToggle,r=t?(0,i.tZ)(pe.Z,{}):(0,i.tZ)(he.Z,{});return(0,i.tZ)($.zx,{variant:"outlined",text:"Send feedback",iconRight:r,onClick:function(){(0,p.j)(p.U3.GHOSTWRITER_CHAT_INLINE_FEEDBACK_TOGGLED,{state:t?"closed":"opened"}),n()}})},ve=n(20685);function ge(){var e=(0,x.Z)(["\n  mutation GiveChatGhostwriterFeedback($input: WorkflowFeedbackInputType!) {\n    giveWorkflowFeedback(input: $input) {\n      ... on WorkflowFeedbackOutputType {\n        __typename\n        id\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n      ... on TooManyRequestsError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return ge=function(){return e},e}var ye={},Ze=(0,C.Ps)(ge());var be=n(25404),we=n(84221),xe=n(94979),Ce=n(34547),ke=(0,z.X)({wrapper:[o.l0.colWithGap(8)],textInput:[[o.l0.flex.growAndShrink(1),o.l0.width("100%"),o.l0.height(64),{resize:"none"}]],buttonGroup:[o.l0.rowWithGap(8),o.l0.justify.end]}),Se=function(e){var t=e.isOpen,n=e.message,a=e.closeFeedback,u=(0,s.useState)(""),d=u[0],f=u[1],m=(0,be.Z)().showError,v=(0,X.zu)(),g=(0,we.nS)(),y=(0,Ce.Z)(),Z=(0,K.T3)(),b=(0,h.Z)(function(e){var t=(0,r.Z)({},ye,e);return k.D(Ze,t)}({onError:function(){m("Unable to provide feedback")},onCompleted:function(e){var t;"WorkflowFeedbackOutputType"!==(null===(t=e.giveWorkflowFeedback)||void 0===t?void 0:t.__typename)?m(e.giveWorkflowFeedback.message):(g({message:n,feedback:d}),f(""),a())}}),2),w=b[0],x=b[1].loading,C=(0,s.useCallback)((function(){(0,p.j)(p.U3.GHOSTWRITER_CHAT_INLINE_FEEDBACK_CANCELLED),a()}),[a]),S=(0,s.useCallback)((function(){0!==d.length&&((0,p.j)(p.U3.GHOSTWRITER_CHAT_INLINE_FEEDBACK_SUBMITTED),w({variables:{input:{ghostwriterChatFeedback:{chatHistory:JSON.stringify(v),feedback:d,metadata:JSON.stringify({messageId:n.inferenceId,replId:y,chatMessageId:n.id,isMobile:Z})}}}}))}),[v,w,Z,n.id,n.inferenceId,y,d]);if(!t)return null;var E=x?xe.p.backgroundPulse(o.TV.accentPrimaryDimmest,o.TV.accentPrimaryDimmer):null;return(0,i.BX)(l.G,{css:ke.wrapper,children:[(0,i.tZ)(ve.B,{css:[ke.textInput],maxLength:5e3,autoFocus:!0,type:"text",inputMode:"text",placeholder:"Let us know how we can improve this response",value:d,onChange:function(e){f(e.target.value)},onKeyDown:function(e){"Escape"!==e.key||x?"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),S()):C()}}),(0,i.BX)(l.G,{css:ke.buttonGroup,children:[(0,i.tZ)($.zx,{variant:"outlined",text:"Cancel",disabled:x,onClick:C}),(0,i.tZ)($.zx,{css:E,iconLeft:x?(0,i.tZ)(c.Z,{}):void 0,text:x?"Submitting...":"Submit",disabled:x,colorway:"primary",onClick:S})]})]})},Ee=n(44327),Te=n(52362),Re=n(5622),De=n(63044),Ie=n(89673),_e=n(93687),Be=n(96893),Ge=(0,z.X)({inlineCodeReferenceBlockContainer:[o.l0.py(8)],inlineCodeReferenceBlock:[{backgroundColor:o.TV.backgroundHigher},o.l0.p(8),o.l0.borderRadius(8),{borderTopLeftRadius:0}],inlineCodeReferenceFilePathContainer:[o.l0.rowWithGap(4)],inlineCodeReferenceFilePathButton:[{borderBottomWidth:0,borderBottomLeftRadius:0,borderBottomRightRadius:0}],footerContainer:[o.l0.rowWithGap(4),o.l0.justify.spaceBetween,o.l0.flex.wrapReverse]}),Pe=new Map([["GENERATE",(0,i.tZ)(_e.Z,{},"generate")],["EXPLAIN",(0,i.tZ)(Ie.Z,{},"explain")],["TRANSFORM",(0,i.tZ)(De.Z,{},"transform")]]),Ae=[{title:"Ask chat",value:"NONE"},{title:"Generate code",value:"GENERATE"},{title:"Explain code",value:"EXPLAIN"},{title:"Edit code",value:"TRANSFORM"},{title:"Ask Replit docs",value:"REPLIT_DOCS"}].map((function(e){return(0,r.Z)({icon:Pe.get(e.value)||(0,i.tZ)(Be.Z,{})},e)})).sort((function(e,t){return e.title.localeCompare(t.title)})),Ne=G()((function(){return n.e(1197).then(n.bind(n,21197))}),{loadableGenerated:{webpack:function(){return[21197]}}}),Ue=function(e){var t=e.author,n=e.intent,r=e.smallAvatar,c=e.advancedGwAvatar,s=e.id,u=e.regenerate,d="NONE"!==n;return(0,i.BX)(l.G,{css:[o.l0.rowWithGap(4),o.l0.align.center],children:[(0,i.tZ)(Te.Z,{author:t,advancedGwAvatar:c,smallAvatar:r}),n?(0,i.BX)(i.HY,{children:[d?(0,i.tZ)(a.xv,{multiline:!1,children:"used"}):null,u&&s?(0,i.tZ)(Xe,{"aria-label":"Reclassify message",intent:n,id:s,regenerate:u}):d&&(0,i.tZ)(Oe,{intent:n})]}):null]})},Le=function(){return(0,i.BX)(l.G,{css:[o.l0.color.accentNegativeStronger,o.l0.flex.row,o.l0.rowWithGap(4),o.l0.align.center],children:[(0,i.tZ)(N.Z,{}),(0,i.tZ)(a.xv,{children:"Response reached maximum output length"})]})},Oe=function(e){var t=e.intent,n=Ae.find((function(e){return e.value===t}));return(0,i.tZ)(U.D,{css:[o.l0.fontSize(14),o.l0.height(26),o.l0.p(12),o.l0.backgroundColor.blurpleDimmest],text:(null===n||void 0===n?void 0:n.title)||"",iconLeft:null===n||void 0===n?void 0:n.icon})},Xe=function(e){var t=e.id,n=e.intent,r=e.regenerate,a=(0,X.gp)(),l=a?"You cannot change the action while the message is sending":"Change Ghostwriter's action for this message",c="NONE"===n?null:Ae.find((function(e){return e.value===n})),s=Ae.filter((function(e){return e.value!==n}));return(0,i.tZ)(V.u,{tooltip:l,placement:"top",children:(0,i.tZ)(F.P,{items:s,disabled:a,css:[o.l0.backgroundColor.blurpleDimmest,o.l0.borderRadius(16),o.l0.height(26),o.l0.p(8)],placeholder:"Select action",selectedItem:c,onChange:function(e){(0,A.J1)(e.value)&&((0,p.j)(p.U3.GHOSTWRITER_CHAT_INTENT_RECLASSIFIED,{from:n,to:e.value}),r({responseId:t,action:e.value}))}})})},Me=(0,s.memo)((function(e){var t=e.message,n=e.autoScroll,r=e.postMessageComponent,u=e.isLastAssistantMessage,d=void 0!==u&&u,h=t.text,m=t.author,v=t.loading,g=t.error,y=t.attribution,Z=t.inferenceId,b=t.stopReason,x=(0,X.Gd)(),C=(0,O.d$)(),k="Assistant"===y,S="maxTokens"===b,E=(0,O.wK)({messageId:t.id}),T=(0,q.t)(),D=Boolean(t.stopReason||t.aborted),I=(0,K.T3)(),B=(0,ie.ll)(),G=(0,Re.Tt)(),A=k&&t.useAdvancedModel&&!D,N=(0,ue.$X)(fe),U=k&&((t.tokenUsage||G)&&D||t.aborted||t.error)&&d,F=k&&(D||void 0!==t.error)&&void 0!==Z&&d,z=(0,R.M)(),Q=(0,R.v)(),J=(0,s.useRef)(null),ee=(0,P.rM)();(0,s.useLayoutEffect)((function(){n&&J.current&&requestAnimationFrame((function(){n&&J.current&&((0,f.Z)(J.current,{skipOverflowHiddenElements:!0,behavior:"auto",scrollMode:"always"}),ee(!0))}))}),[h,n,ee,U,z]);var te=o.TV.foregroundDefault;k&&v&&(te=o.TV.foregroundDimmer);var ne=(0,L.Z)((function(){return(0,W.BW)(t.id)}),[t.id]);if("transformCode"===t.type&&!C)return null;var re,oe="TRANSFORM"===t.intent?void 0:ne;return re="explainCode"!==t.type||t.loading?"Human"===t.attribution?(0,i.tZ)(M.J,{text:h,textColor:te}):(0,i.tZ)(M.J,{text:h,textColor:te,codeComponent:oe}):"Human"===t.attribution?(0,i.tZ)(l.G,{children:(0,i.tZ)(M.J,{text:"Explain code",textColor:te,codeComponent:oe})}):(0,i.BX)(l.G,{children:[t.codeReference?(0,i.BX)(l.G,{css:Ge.inlineCodeReferenceBlockContainer,children:[(0,i.tZ)(l.G,{css:Ge.inlineCodeReferenceFilePathContainer,children:(0,i.tZ)($.zx,{size:"small",variant:"outlined",css:Ge.inlineCodeReferenceFilePathButton,iconLeft:(0,i.tZ)(j.Z,{size:12,path:t.codeReference.filePath}),iconRight:(0,i.tZ)(Y.Z,{}),text:"".concat(t.codeReference.filePath," ").concat(t.codeReference.range.lineFrom,":").concat(t.codeReference.range.lineTo),onClick:function(){t.codeReference&&T({path:t.codeReference.filePath,line:t.codeReference.range.lineTo})}})}),(0,i.tZ)(H.Z,{css:Ge.inlineCodeReferenceBlock,lineNumbers:!0,lineNumbersStart:t.codeReference.range.lineFrom,language:t.codeReference.language,code:t.codeReference.code,filePath:t.codeReference.filePath})]}):null,(0,i.tZ)(M.J,{text:h,textColor:te,codeComponent:oe})]}),(0,i.BX)(l.G,{css:[Ee.V.messageWrapper,"Assistant"===y?Ee.V.ghostwriterPurpleBackground:null],children:[(0,i.BX)(l.G,{css:[o.l0.flex.row,o.l0.justify.spaceBetween,o.l0.align.center],children:[(0,i.tZ)(Ue,{author:m,intent:t.intent,id:t.id,advancedGwAvatar:k&&t.useAdvancedModel,regenerate:d?x:null}),(0,i.tZ)(l.G,{css:[o.l0.rowWithGap(8)],children:A?(0,i.tZ)(V.u,{tooltip:"Retry with a faster but less advanced model",children:(0,i.tZ)($.zx,{text:I?"":"Speed up",iconLeft:(0,i.tZ)(se.Z,{}),variant:"outlined",onClick:function(){(0,p.j)(p.U3.GHOSTWRITER_CHAT_SPEED_UP_CLICKED,{timeToFirstStream:Number(E.timeToFirstStream)}),N(t,"AI")}})}):null})]}),(0,i.BX)(l.G,{css:[o.l0.rowWithGap(8),o.l0.align.center],children:[k&&v?(0,i.tZ)(c.Z,{}):null,(0,i.tZ)(l.G,{css:[o.l0.colWithGap(8),o.l0.flex.growAndShrink(1)],children:re})]}),r||null,k&&"string"===typeof g?(0,i.tZ)(l.G,{children:(0,i.tZ)(a.xv,{css:[o.l0.color.accentNegativeStronger,o.l0.fontSize(16)],children:g})}):null,S?(0,i.tZ)(Le,{}):null,(0,i.BX)(l.G,{css:Ge.footerContainer,children:[F?(0,i.BX)(l.G,{css:[o.l0.rowWithGap(4)],children:[I?null:(0,i.tZ)(me,{isOpen:z,onToggle:function(){return Q(!z)}}),(0,i.tZ)(l.G,{css:[o.l0.rowWithGap(8),o.l0.align.center],children:(0,i.tZ)(_,{inferenceClass:w.Sg.Chat,inferenceId:Z})})]}):null,U?(0,i.tZ)(ce,{limitReached:!B,onRetry:function(e){(0,p.j)(p.U3.GHOSTWRITER_CHAT_RESPONSE_REGENERATED,{isAdvancedModel:e,timesRegenerated:(t.timesRegenerated||0)+1}),x({responseId:t.id,action:t.intent})}}):null]}),(0,i.tZ)(Se,{isOpen:F&&z,closeFeedback:function(){return Q(!1)},message:t}),C?(0,i.tZ)(Ne,{message:t}):null,n?(0,i.tZ)(l.G,{css:{marginTop:-8,marginBottom:0},innerRef:J}):null]})}),(function(e,t){return t.autoScroll===e.autoScroll&&t.isLastAssistantMessage===e.isLastAssistantMessage&&d()(t.message,e.message)}))},85465:function(e,t,n){n.d(t,{J:function(){return g}});var r=n(72006),i=n(74985),o=n(60966),a=n(88965),l=n(53312),c=n(26473),s=n(37779),u=n(50959),d=n(71253),f=n(66164),h=[n(25462).Z,f.Z,d.Z],p=[],m=function(e){return(0,i.tZ)(c.G,{children:(0,i.tZ)(l.xv,{children:e.children})})},v={h1:m,h2:m,h3:m,h4:m,h5:m,h6:m},g=(0,u.memo)((function(e){var t=e.text,n=e.textColor,l=e.codeComponent,c=l?{code:l}:void 0;return(0,i.tZ)(o.ZP,{remarkPlugins:h,rehypePlugins:p,components:(0,r.Z)({},v,c),css:[s.Z,{p:{color:n,lineHeight:1.875}},a.l0.maxWidth("100%")],lineBreaks:!0,children:t})}))},15064:function(e,t,n){n.d(t,{BW:function(){return h}});var r=n(72006),i=n(74985),o=n(22004),a=n(53312),l=n(26473),c=n(88965),s=n(45942),u=n(91639),d=n(6837),f=n(6396);var h=function(e){return function(t){return p(t,e)}},p=function(e,t){var n=(0,d.G6)();if(e.inline)return(0,i.tZ)(u.Z,(0,r.Z)({},e));var h=(0,u.F)(e.className),p=h&&function(e){switch(e){case"crystal":return"main.cr";case"python":case"py":return"main.py";case"sh":case"fish":case"zsh":case"bash":return"main.sh";case"javascript":case"js":return"index.js";case"typescript":case"ts":return"index.ts";case"csharp":case"cs":return"main.cs";case"java":return"Main.java";case"go":return"main.go";case"ruby":case"rb":return"main.rb";case"php":return"main.php";case"rust":return"main.rs";case"swift":return"main.swift";case"kotlin":return"main.kt";case"scala":return"main.scala";case"c":return"main.c";case"cpp":case"c++":return"main.cpp";case"dart":return"main.dart";case"elixir":return"main.ex";case"haskell":return"Main.hs";case"lua":return"main.lua";case"perl":return"main.pl";case"r":return"main.r";case"sql":return"main.sql";case"ocaml":return"main.ml";case"html":return"index.html";case"json":return"main.json";case"css":return"main.css";default:return}}(h),m=p?s.$R.from(p):void 0,v=null===m||void 0===m?void 0:m.name,g=String(e.children);return(0,i.tZ)(l.G,{css:[c.l0.colWithGap(12)],children:(0,i.BX)(l.G,{children:[(0,i.BX)(l.G,{css:[c.l0.flex.row,c.l0.align.center,c.l0.p(8),c.l0.backgroundColor.backgroundDefault,c.l0.font.default,{borderTopLeftRadius:4,borderTopRightRadius:4}],children:[(0,i.BX)(l.G,{css:[c.l0.flex.row,c.l0.align.center,{flexGrow:1}],children:[p?(0,i.tZ)(o.Z,{size:12,path:p}):null,v?(0,i.tZ)(a.xv,{multiline:!1,css:[c.l0.pl(4),c.l0.fontSize(12),c.l0.color.foregroundDimmer],children:v}):null]}),(0,i.tZ)(f.fO,{code:g,language:h}),(0,i.tZ)(n,{messageId:t,code:g,language:h})]}),(0,i.tZ)(u.Z,(0,r.Z)({disableCopy:!0,blockStyles:[c.l0.p(8),{borderBottomLeftRadius:4,borderBottomRightRadius:4}]},e))]})})}},75165:function(e,t,n){var r=n(74985),i=n(53312),o=n(26473),a=n(84833),l=n(88965);t.Z=function(e){var t=e.textVariant,n=e.showImage;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.textAlign.center,l.l0.px(16),l.l0.colWithGap(8),l.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(i.xv,{variant:t,children:"Ghostwriter is currently unavailable. Please try again later."}),n?(0,r.tZ)(a.Z,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(l.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})}},75615:function(e,t,n){n.d(t,{$L:function(){return d},$h:function(){return u},y6:function(){return f}});var r=n(2272),i=n(6837),o=n(24531),a=n(86813),l=n(10267),c=n(25602),s=n(50959);function u(){var e=(0,i.n3)(),t=(0,i.PM)(),n=(0,c.Vu)();(0,s.useEffect)((function(){e&&(n.includes(e)||t(null))}),[e,n,t])}var d=function(){var e=(0,a.R3)(),t=(0,c.ex)(),n=(0,i.PM)(),u=null!==e&&void 0!==e?e:t,d=function(){var e=(0,c.nC)(),t=(0,l.dr)();return(0,s.useCallback)((function(n){if(!n)return null;var i=e().find((function(e){var t=(0,r.Z)(e,2),i=(t[0],t[1]);return(0,o.Ur)(i)&&i.data.path===n}));if(!i)return null;var a=t(i[0]);if("codeEditor"!==(null===a||void 0===a?void 0:a.type))throw new Error("Expected code editor pane to insert into");if(!a||!a.insertGhostwriterChatCode||!a.revertGhostwriterChatCode)throw new Error("Expected ghostwriter pane bindings");return{insert:a.insertGhostwriterChatCode,revert:a.revertGhostwriterChatCode}}),[t,e])}();return{onInsertCode:(0,s.useCallback)((function(e){var t=e.toInsert,r=e.overwrite,i=e.onInsert,o=d(u);o&&(o.insert(t,r),n(u),null===i||void 0===i||i())}),[d,u,n]),onRevertCode:(0,s.useCallback)((function(e){var t=d(u);t&&(t.revert(),n(null),null===e||void 0===e||e())}),[u,d,n])}},f=function(e){var t=(0,i.n3)(),n=(0,i.U4)();return!!e&&(t&&n&&n===e)}},67493:function(e,t,n){n.d(t,{fT:function(){return T},Th:function(){return R},c8:function(){return G}});var r=n(44758),i=n(88733),o=n(57135),a=n(73012),l=n(72006),c=n(4405),s=n(9970),u=n(11858),d=n(96583),f=n(43182),h=n(52783),p=n(90437),m=n(39995),v=n(34547),g=n(1926),y=n(5622),Z=n(25367),b=n(50959),w=n(35460),x=n(17403);n(94099),x.Type.Object({replId:x.Type.String({format:"uuid"})});var C=x.Type.Object({token:x.Type.String()}),k=n(61871),S=n(46486);function E(e,t){var n=new Error(e);return f.$e((function(e){e.setTag("ghostwriter-chat",!0),t&&e.setExtras(t),f.Tb(n)})),n}var T={production:"wss://production-ai-chat.replit.com/ws",staging:"wss://staging-ai-chat.replit.com/ws",development:"ws://127.0.0.1:8000/ws"},R=function(){var e=(0,m.Z)().preferences.ghostwriterChatServiceEnvironment;return e||T.production},D=function(e){if(h.B4.Check(S.LD,e))return e;if(h.B4.Check(S.t3,e))return e;throw E("Invalid model",{model:e})};function I(e){var t=h.B4.Convert(S.EI,JSON.parse(e.data));if(!h.B4.Check(S.EI,t)){var n=h.B4.Errors(S.EI,t);throw E("Invalid Ghostwriter Chat service message",{errors:(0,s.Z)(n)})}return t}function _(e){return B.apply(this,arguments)}function B(){return(B=(0,o.Z)((function(e){var t;return(0,d.__generator)(this,(function(n){switch(n.label){case 0:return[4,fetch("/ai/auth",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({replId:e})})];case 1:return[4,n.sent().json()];case 2:if(t=n.sent(),!h.B4.Check(C,t))throw E("Authentication to chat service failed");return[2,t.token]}}))}))).apply(this,arguments)}var G=function(){var e=(0,v.Z)(),t=(0,p.d)(),n=(0,g.jC)(),s=(0,b.useState)(!1),h=s[0],m=s[1],x=(0,b.useState)(0),C=x[0],S=x[1],T=R(),B=(0,Z.Rx)(),G=(0,y.Lv)(),P=(0,w.ZP)(T,{shouldReconnect:function(){return C<10},reconnectInterval:function(e){var t=Math.min(1e3*Math.pow(2,Math.max(e,C)),1e4);return t+Math.floor(Math.random()*(t/2))},reconnectAttempts:10,onClose:function(){m(!1)},onOpen:(0,o.Z)((function(){var e;return(0,d.__generator)(this,(function(t){switch(t.label){case 0:return[4,O()];case 1:return e=t.sent(),A({authRequest:{authToken:e}}),[2]}}))})),onError:function(e){throw E("Ghostwriter Chat websocket error",{endpoint:T,event:e})},onMessage:function(e){var t=I(e);t.authResponse?M(t):t.sessionCreationResponse?F(t):t.usageQuota&&W(t)}},null!==t),A=P.sendJsonMessage,N=P.readyState,U=P.getWebSocket,L=N===w.kQ.OPEN&&h;(0,b.useEffect)((function(){if(L){var e=U();if(e){var t=function(){},n=!1,r=function(){var r=(0,o.Z)((function(){var r;return(0,d.__generator)(this,(function(i){switch(i.label){case 0:return n||e.readyState!==w.kQ.OPEN?[3,3]:[4,new Promise((function(n){var r=function(e){I(e).pong&&(t(),n({success:!0}))},i=setTimeout((function(){t(),n({success:!1})}),2e3);e.addEventListener("message",r),t=function(){e.removeEventListener("message",r),clearTimeout(i),t=function(){}},A({ping:{}})}))];case 1:return r=i.sent().success,n?[2]:r?[4,new Promise((function(e){return setTimeout(e,2e4)}))]:(e.close(),[2]);case 2:return i.sent(),[3,0];case 3:return[2]}}))}));return function(){return r.apply(this,arguments)}}();return r(),function(){n=!0,t()}}}}),[U,A,L]);var O=(0,b.useCallback)((0,o.Z)((function(){return(0,d.__generator)(this,(function(t){return[2,_(e)]}))})),[e]),X=(0,b.useCallback)((0,o.Z)((function(){return(0,d.__generator)(this,(function(n){if(!t)throw E("Cannot create session without a user id",{endpoint:T,replId:e});return A({sessionCreationRequest:{userId:t,replId:e}}),[2]}))})),[t,T,e,A]),M=(0,b.useCallback)((function(n){if(n.authResponse){if(!n.authResponse.success)throw S((function(e){return e+1})),E("Authentication failed",{endpoint:T,replId:e,currentUserId:t});X(),m(!0),S(0)}}),[X,t,T,e,S]),F=(0,b.useCallback)((function(r){if(r.sessionCreationResponse){if(!r.sessionCreationResponse.sessionId)throw E("Session creation failed",{endpoint:T,replId:e,currentUserId:t});n(r.sessionCreationResponse.sessionId)}}),[t,T,e,n]),W=(0,b.useCallback)((function(e){var t=e.usageQuota;t&&(G((0,c.Z)((0,l.Z)({advancedModelTTLEnd:1e3*t.advancedLimitRefreshTime+Date.now()},t),{basicModelTTLEnd:1e3*t.basicLimitRefreshTime+Date.now()})),B(t.advancedModelUsage<t.advancedModelLimit))}),[B,G]),H=(0,b.useCallback)(function(){var n=(0,o.Z)((function(n){var r,i,o,l,c,s,p,m,v,g,y,Z,b,w,x,C,S,R,_;return(0,d.__generator)(this,(function(B){if(r=n.body,i=n.options,o=U(),l=r.sessionId,c=r.message,s=r.chatHistory,p=r.model,m=r.context,v=r.useAdvancedModel,g={chatRequest:{sessionId:l,replId:e,message:c,chatHistory:s,model:D(p),context:m,useAdvancedModel:v}},!o||!L)throw E("Websocket is not ready to send messages",{endpoint:T,isAuthed:h,replId:e,currentUserId:t,sessionId:l});return y=Array(),Z=(0,k.Z)(),b=!1,w=0,x="",C=setTimeout((function(){throw E("Request timed out",{endpoint:T,replId:e,currentUserId:t,timeout:6e4})}),6e4),S=function(){clearTimeout(C),b=!0,o.removeEventListener("message",R)},i.abortSignal.onabort=function(){if(!x)throw E("Cannot abort request",{endpoint:T,replId:e,currentUserId:t});A({abortRequest:{requestId:x}})},R=function(n){var r=n;r.data&&"string"===typeof r.data||Z.reject(E("Invalid Event - does not match Message Event",{event:r}));try{var i=I(r);if(i.chatResponseStart&&!x){var o=i.chatResponseStart;x=o.requestId}if(i.chatResponseChunk){var a=i.chatResponseChunk;if(a.requestId!==x)return;y.push(a)}if(i.chatResponseEnd){var l,c=i.chatResponseEnd;if(c.requestId!==x)return;if(!c.success)throw new Error(null!==(l=c.error)&&void 0!==l?l:"Unknown error");b=!0,S()}if(i.abortResponse){var s=i.abortResponse;if((null===s||void 0===s?void 0:s.requestId)!==x)return;S()}Z.resolve(!0)}catch(u){f.$e((function(n){n.setExtra("requestId",x),n.setExtra("finished",b),n.setExtra("dispatched",w),n.setExtra("userId",t),n.setExtra("replId",e),n.setTag("ghostwriter-chat",!0),f.Tb(u)})),Z.reject(u),S()}},o.addEventListener("message",R),A(g),_=function(){var e=(0,u.Z)((function(){return(0,d.__generator)(this,(function(e){switch(e.label){case 0:return b?[3,6]:[4,(0,a.Z)(Z.promise)];case 1:e.sent(),Z=(0,k.Z)(),e.label=2;case 2:return w<y.length?[4,y[w]]:[3,5];case 3:e.sent(),e.label=4;case 4:return w++,[3,2];case 5:return[3,0];case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),[2,_()]}))}));return function(e){return n.apply(this,arguments)}}(),[t,T,U,h,L,e,A]);return(0,b.useCallback)((function(){return{sendMessage:function(e){var t=e.body,n=e.options;return(0,u.Z)((function(){var e;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,a.Z)(H({body:t,options:n}))];case 1:return e=o.sent(),[5,(0,d.__values)((0,r.Z)((0,i.Z)(e),a.Z))];case 2:return o.sent(),[2]}}))}))()},isReady:L,createNewSession:X}}),[X,L,H])}},40816:function(e,t,n){n.d(t,{P:function(){return o}});var r=n(25367),i=n(64918);function o(e){var t=(0,r.T9)().useAdvancedModel,n=(0,r.ll)();return t&&n?i.hf.model:e}},509:function(e,t,n){n.d(t,{yz:function(){return u}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isVerified\n      userSubscriptionType\n      userPowerUpsByType {\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r.Z)({},c,e);return a.a(s,t)}},90346:function(e,t,n){n.d(t,{M:function(){return a},v:function(){return o}});var r=n(7653),i=(0,n(90234).cn)(!1),o=function(){return(0,r.$X)(i)},a=function(){return(0,r.c1)(i)}},5622:function(e,t,n){n.d(t,{Lv:function(){return a},Tt:function(){return o}});var r=n(7653),i=(0,n(90234).cn)(null),o=function(){return(0,r.c1)(i)},a=function(){return(0,r.$X)(i)}},65326:function(e,t,n){n.d(t,{p:function(){return s}});var r=n(83389),i=n(39995),o=n(34547),a=n(509),l=n(25367),c=n(50959),s=function(){var e=(0,r.v)(),t=(0,l.$e)(),n=(0,i.Z)(),s=n.preferences,u=n.update,d=(0,a.yz)(),f=d.data,h=d.loading,p=d.error,m=(0,o.Z)();(0,c.useEffect)((function(){var n=null===f||void 0===f?void 0:f.currentUser,r=Boolean(n&&(0,l.iM)(n)),i={useAdvancedModel:!!r&&s.ghostwriterUseAdvancedModel,setUseAdvancedModel:r?function(e){u({ghostwriterUseAdvancedModel:e})}:function(){}};t({chatModel:e,advancedModelUserPref:i,replId:m,currentUserData:f,currentUserLoading:h,currentUserError:p})}),[e,f,p,h,t,m,s.ghostwriterUseAdvancedModel,u])}},62616:function(e,t,n){n.d(t,{e:function(){return h},t:function(){return f}});var r=n(89172),i=n(85919),o=n(90234),a=n(50959),l=n(7653),c={performPaneOperation:function(){}},s=(0,o.cn)(c),u=(0,o.cn)((function(e){return e(s).performPaneOperation})),d=(0,o.cn)(null,(function(e,t,n){var r=n.path,i=n.line,o=n.col,a=e(u);a&&a({operation:"open",pane:{type:"codeEditor",data:{path:r,line:i,col:o}}})})),f=function(){return(0,l.$X)(d)};function h(e){var t=e.debugMode,n=void 0!==t&&t,o=e.performPaneOperation,u=(0,l.Uu)(),d=(0,i.Z)((function(){return{performPaneOperation:o}}),[o]);(0,a.useEffect)((function(){return u.set(r.nE,n),u.set(s,d),function(){u.set(r.nE,!1),u.set(s,c)}}),[n,d,u])}},20497:function(e,t,n){n.d(t,{r:function(){return I}});var r=n(57135),i=n(96583),o=n(28435),a=n(86813),l=n(64918),c=n(25367),s=n(9970),u=n(87978),d=n(5319),f=n(12583),h=n(4561),p=n(59253),m=n(30312);function v(e){var t=(0,u.r6)(e),n=m.hI.some((function(t){return e.endsWith(t)})),r=m.HH.some((function(t){return e.endsWith(t)})),i=m.Fv.some((function(t){return e.split("/").some((function(e){return e.includes(t)}))}));return!t||n||r||i}function g(e){var t=e.length;if(0===t)return!1;var n=0,r=Math.min(t,512);if(t>=3&&239===e[0]&&187===e[1]&&191===e[2])return!1;if(t>=4&&0===e[0]&&0===e[1]&&254===e[2]&&255===e[3])return!1;if(t>=4&&255===e[0]&&254===e[1]&&0===e[2]&&0===e[3])return!1;if(t>=4&&132===e[0]&&49===e[1]&&149===e[2]&&51===e[3])return!1;if(r>=5&&"%PDF-"===e.slice(0,5).toString())return!0;if(t>=2&&254===e[0]&&255===e[1])return!1;if(t>=2&&255===e[0]&&254===e[1])return!1;for(var i=0;i<r;i++){if(0===e[i])return!0;if((e[i]<7||e[i]>14)&&(e[i]<32||e[i]>127)){if(e[i]>193&&e[i]<224&&i+1<r){if(e[++i]>127&&e[i]<192)continue}else if(e[i]>223&&e[i]<240&&i+2<r&&e[++i]>127&&e[i]<192&&e[i+1]>127&&e[i+1]<192){i++;continue}if(n++,i>=32&&100*n/r>10)return!0}}return 100*n/r>10}var y=n(92650),Z=n(91926),b=n(7131);function w(e){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)((function(e){var t,n,r,o,a,l,c,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.files,n=e.fs,r=e.entrypointFile,o=e.hiddenFiles,r&&t.length<10?(t.push(r),l=(0,u.Il)(r),c=""===l?f.Ql:l,[4,n.readDir(c)]):[3,2];case 1:if(!("children"in(d=i.sent())))return[2];(a=t).push.apply(a,(0,s.Z)(d.children.filter((function(e){return e.type===h.Tv.File})).filter((function(e){return!(v(e.filename)||(0,p.lv)(e.filename,o)||!(0,u.Mb)(e.filename))})).map((function(e){return c===f.Ql?e.filename:"".concat(l,"/").concat(e.filename)})).filter((function(e){return!t.includes(e)})).slice(0,1))),i.label=2;case 2:return[2]}}))}))).apply(this,arguments)}function C(e){var t,n,r,i,o=e.files,a=e.hiddenFiles,l=e.filePreferences,c=null!==(r=null===(t=null===l||void 0===l?void 0:l.filter((function(e){return"include"===e.preference})))||void 0===t?void 0:t.map((function(e){return e.path})))&&void 0!==r?r:[],d=null!==(i=null===(n=null===l||void 0===l?void 0:l.filter((function(e){return"exclude"===e.preference})))||void 0===n?void 0:n.map((function(e){return e.path})))&&void 0!==i?i:[],f=0,h=[],m=[],g=!0,y=!1,Z=void 0;try{for(var w,x=(0,s.Z)(new Set(o))[Symbol.iterator]();!(g=(w=x.next()).done);g=!0){var C=w.value;(c.includes(C)||!(v(C)||(0,p.lv)(C,a)||d.includes(C))&&(0,u.Mb)(C))&&(f>=10?m.push(C):(h.push(C),f+=1))}}catch(k){y=!0,Z=k}finally{try{g||null==x.return||x.return()}finally{if(y)throw Z}}return 0===h.length?(b.kg.info("GhostwriterChat filtered out all files for file context",{numFiles:o.length}),{validFilePaths:h,pathsExceedingMaxFilesLimit:m}):{validFilePaths:h,pathsExceedingMaxFilesLimit:m}}function k(e){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)((function(e){var t,n,r,o,a,l,c,u,f,h,p,m,v,x,k,S,E,T,R,D,I,_,B,G,P,A,N,U,L,O,X,M,F,W;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.recentFiles,n=e.fs,r=e.dotReplit,o=e.maxCharacters,a=e.replLanguage,l=e.filePreferences,[4,r.getConfig()];case 1:return h=i.sent().config,p=(null===h||void 0===h?void 0:h.entrypoint)||Z.ZP.getMainFileName(a)||null,m=((null===h||void 0===h?void 0:h.hidden)||[]).map((function(e){return(0,d.Z)(e)})).filter(Boolean),v=[],k=null!==(x=null===(f=null===l||void 0===l?void 0:l.filter((function(e){return"include"===e.preference})))||void 0===f?void 0:f.map((function(e){return e.path})))&&void 0!==x?x:[],(c=v).push.apply(c,(0,s.Z)(k)),S=k.length,E=t.slice(0,3),(u=v).push.apply(u,(0,s.Z)(E)),T=E.length,[4,w({files:v,entrypointFile:p,fs:n,hiddenFiles:m})];case 2:return i.sent(),R=v.length-T-S,b.kg.info("GhostwriterChat got file context",{numRecentFiles:T,numEntrypointFiles:R,maxFiles:10}),D=C({files:v,hiddenFiles:m,filePreferences:l}),I=D.validFilePaths,_=D.pathsExceedingMaxFilesLimit,[4,Promise.all(I.map((function(e){return n.readFile(e)})))];case 3:for(B=i.sent(),G=[],P=[],A=_,N=o,U=0;U<I.length;U++)L=I[U],O=(0,y.S)(L),(X=B[U]).error?b.kg.info("GhostwriterChat failed to read file",{filePath:L}):g(X.content.toBuffer())?b.kg.info("GhostwriterChat filtered out binary file",{filePath:L}):N<=0?A.push(L):(M=X.content.toString(),F=M.slice(0,N),W=M.length>F.length,N<=0&&A.push(L),W?P.push(L):G.push({filePath:L,language:O,code:F}),N-=F.length);return N<=0?b.kg.info("GhostwriterChat hit character limit for file context",{numFilesIncluded:I.length,filesExcluded:I.length-G.length}):b.kg.info("GhostwriterChat has remaining file context characters",{remainingChars:N}),[2,{fileContext:G,truncatedFiles:P,overflowingFiles:A}]}}))}))).apply(this,arguments)}var E=n(50959),T=n(7653),R=n(73175),D=n(40816);function I(){var e=(0,o.Z)(),t=e.fs,n=e.dotReplit,s=(0,T.c1)(c.aK),u=(0,a.AA)(),d=(0,R.Z)(),f=(0,D.P)(s);return(0,E.useCallback)(function(){var e=(0,r.Z)((function(e){var r,o,a,c,s,h,p,m;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(!t||!n)throw new Error("Expected fs and dotReplit services");return r=(0,l.yL)(f),o=r.fileContextCharacters,[4,k({recentFiles:a=u(),fs:t,dotReplit:n,maxCharacters:o,replLanguage:d,filePreferences:e})];case 1:return c=i.sent(),s=a[0],p=null!==(h=null===e||void 0===e?void 0:e.filter((function(e){return"exclude"===e.preference})).map((function(e){return e.path})))&&void 0!==h?h:[],m=p.includes(s)?null:s,[2,{ghostwriterFileContext:c,mostRecentFile:m}]}}))}));return function(t){return e.apply(this,arguments)}}(),[t,n,f,u,d])}},14065:function(e,t,n){n.d(t,{b:function(){return v}});var r=n(7653),i=n(85919),o=n(20497),a=n(74985),l=n(9434),c=n(6396),s=n(75615),u=n(86813),d=n(6837),f=function(){(0,l.j)(l.U3.GHOSTWRITER_CHAT_CODE_INSERT_REVERTED)},h=function(e){var t=e.code,n=e.messageId,r=e.language,i=(0,s.$L)(),o=i.onInsertCode,h=i.onRevertCode,p=(0,u.R3)(),m=(0,u.ex)(),v=(0,d.$0)(),g=null!==p&&void 0!==p?p:m;return(0,s.y6)(n)?(0,a.tZ)(c.pe,{revertCodeInsert:function(){h(f),v(null)}}):(0,a.tZ)(c.eo,{code:t,disabled:!g,insertCode:function(){o({toInsert:t,onInsert:function(){return function(e){(0,l.j)(l.U3.GHOSTWRITER_CHAT_CODE_INSERTED,{language:e})}(r)}}),n&&v(n)}})},p=n(50959),m=n(67493);function v(e){var t=e.openGhostwriterPane,n=(0,o.r)(),a=(0,r.Uu)(),l=function(){var e=(0,m.c8)();return(0,p.useCallback)((function(){return e()}),[e])}(),c=(0,i.Z)((function(){return{getGhostwriterFileContext:n,insertCodeButtonComponent:h,openGhostwriterPane:t,ghostwriterClient:l()}}),[l,n,t]);(0,p.useEffect)((function(){return a.set(d.Vx,c),function(){a.set(d.Vx,d.f9)}}),[c,a])}},20194:function(e,t,n){n.d(t,{CN:function(){return o},CT:function(){return i},bO:function(){return a}});var r=n(28863),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.l2)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},86885:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(74985),i=n(42362),o=n(16165),a=n(26966),l=n(61025),c=n(45317),s=(0,l.X)({rounded:[{borderBottomRightRadius:c.TV.space6}]});function u(e){var t=e.onOpen,n=e.rounded,l=void 0===n||n;return(0,r.tZ)(a.Z,{text:"History",iconRight:(0,r.tZ)(i.Z,{size:12}),onClick:function(){(0,o.p)("historyOpened"),t()},css:l&&s.rounded})}},80680:function(e,t,n){n.d(t,{Ai:function(){return g},BI:function(){return u},Jp:function(){return d},_H:function(){return f},_Z:function(){return v},bA:function(){return m},ox:function(){return y}});var r=n(72006),i=n(4405),o=n(50968),a=n(90234),l=n(71999),c=n(50959),s=n(85919),u=(0,o.u)((function(){return null})),d=(0,o.u)((function(){return null}));function f(e){var t=d.current();(0,c.useEffect)((function(){e!==t&&d.set((function(){return e}))}),[e,t])}var h=(0,a.cn)(null);var p=(0,a.cn)(null,(function(e,t,n){var o=e(h),a=o?(0,r.Z)({},o,n):(0,r.Z)({},n),l=null===a||void 0===a?void 0:a.changes,c=null===a||void 0===a?void 0:a.filePath;if(!c||!l)throw new Error('"filePath", "changes", "users" required when initializing history state');var s=function(e){var t=e.changes.length;return(0,r.Z)({users:{},count:t,version:Math.max(0,t-1),playing:!1,comparing:!1},e)}((0,i.Z)((0,r.Z)({},a),{changes:l,filePath:c}));u.set((function(){return s}));var d=s.changes.length;0!==d?((null===o||void 0===o?void 0:o.changes)&&s.changes!==o.changes&&(s.count=d,s.version=Math.min(s.version,d-1),s.playing=!1,s.comparing=!1),s.version===d-1&&(s.playing=!1),t(h,s)):t(h,s)}));function m(){return(0,l.Dv)(h,{store:Z()})}function v(){return(0,l.b9)(p,{store:Z()})}function g(){return(0,l.b9)((0,s.Z)((function(){return(0,a.cn)(null,(function(e,t){t(h,null)}))}),[]),{store:Z()})}var y=(0,c.createContext)(null);function Z(){var e=(0,c.useContext)(y);if(!e)throw new Error("Expected store in context");return e}},16165:function(e,t,n){n.d(t,{j:function(){return s},p:function(){return u}});var r=n(72006),i=n(9434),o=n(9558),a=n(50959),l=n(9353),c=n(80680);function s(){var e=(0,o.uV)();return(0,a.useCallback)((function(t,n,i){e({origin:"History2: useHistoryBSOD",error:t,tags:{source:"ws-history2",type:n},extras:(0,r.Z)({state:c.BI.current()},i)})}),[e])}function u(e){(0,i.j)(l.U3.HISTORY_USED,{action:e,which:"ws"})}},10987:function(e,t,n){var r=n(74985),i=(n(50959),n(21651)),o=n(53312),a=n(95141),l=n(26473),c=n(90171),s=n(66209),u=n(88965),d=(0,n(61025).X)({root:[u.l0.colWithGap(32)],header:[u.l0.rowWithGap(16),u.l0.align.center],icon:[u.l0.color.orangeStrongest],body:[u.l0.pr(32),u.l0.colWithGap(16)],list:[u.l0.colWithGap(16),u.l0.pl(16)],buttons:[u.l0.rowWithGap(16),u.l0.justify.end]});t.Z=function(e){var t=e.isOpen,n=(0,c.useRouter)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:d.root,children:[(0,r.BX)(l.G,{css:d.header,children:[(0,r.tZ)(s.Z,{size:24,css:d.icon}),(0,r.tZ)(o.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:d.body,children:[(0,r.tZ)(o.xv,{children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:d.list,children:[(0,r.tZ)(o.xv,{multiline:!1,children:"\u2022 Exit Firewall Mode."}),(0,r.tZ)(o.xv,{multiline:!1,children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:d.buttons,children:[(0,r.tZ)(a.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(n.asPath)}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){n.push("/home","~/")}})]})]})})}},41168:function(e,t,n){n.d(t,{h:function(){return E},w:function(){return k}});var r=n(72006),i=n(4405),o=n(74985),a=n(88149),l=n(20685),c=n(50959),s=n(92153),u=n(90234),d=n(71999);function f(){return(0,c.useState)((function(){return(0,u.MT)()}))[0]}var h=(0,c.createContext)(null);function p(){var e=(0,c.useContext)(h);if(!e)throw new Error("Expected store in context");return e}var m=function(e){return(0,d.b9)(e,{store:p()})};var v=n(85919),g=(0,u.cn)(-1),y=(0,u.cn)([]),Z=(0,u.cn)(void 0),b=(0,u.cn)(null,(function(e,t,n){var r=e(Z);switch(r&&(clearTimeout(r.id),r.cb()),n){case"forward":t(g,(function(t){return Math.min(e(y).length,t+1)}));break;case"backward":t(g,(function(e){return Math.max(0,e-1)}))}var i=e(y),o=e(g);return o>=i.length?"":i[o]})),w=(0,u.cn)(null,(function(e,t,n){var r;clearTimeout(null===(r=e(Z))||void 0===r?void 0:r.id);var i=function(){if(n.length>0){var r=!1;t(y,(function(t){return(0,s.ZP)(t,(function(t){if(n!==t[e(g)])for(r=!0,t.push(n);t.length>20;)t.shift()}))})),r&&t(g,e(y).length-1)}t(Z,void 0)};t(Z,{id:setTimeout(i,2e3),cb:i})}));function x(e){var t=m(w),n=function(){var e=m(b);return{forward:(0,v.Z)((function(){return function(){return e("forward")}}),[e]),backward:(0,v.Z)((function(){return function(){return e("backward")}}),[e])}}(),o=n.forward,l=n.backward,s=(0,c.useRef)(e.value);return(0,c.useEffect)((function(){e.value!==(null===s||void 0===s?void 0:s.current)&&(e.value&&t(e.value),s.current=e.value)}),[t,e.value]),(0,i.Z)((0,r.Z)({},e),{onKeyDown:(0,v.Z)((function(){return function(t){var n;if(t.shiftKey||(0,a.j)(t)){var r;null===(r=e.onKeyDown)||void 0===r||r.call(e,t)}else{var i=t.currentTarget,c=Boolean(i.value.match(/\n/));if("ArrowUp"===t.key){if(c&&i.selectionStart&&i.selectionStart>0)return;return e.onChange(l()),t.preventDefault(),void t.stopPropagation()}if("ArrowDown"===t.key){if(c&&i.selectionEnd&&i.selectionEnd<i.value.length)return;return e.onChange(o()),t.preventDefault(),void t.stopPropagation()}null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}}}),[l,o,e]),onChange:(0,v.Z)((function(){return function(t){e.onChange(t.target.value)}}),[e])})}var C=c.forwardRef((function(e,t){var n=x(e);return(0,o.tZ)(l.B,(0,r.Z)({ref:t},n))})),k=c.forwardRef((function(e,t){var n=f();return(0,o.tZ)(h.Provider,{value:n,children:(0,o.tZ)(C,(0,r.Z)({ref:t},e))})})),S=c.forwardRef((function(e,t){var n=x(e);return(0,o.tZ)(l.II,(0,r.Z)({ref:t},e,n))})),E=c.forwardRef((function(e,t){var n=f();return(0,o.tZ)(h.Provider,{value:n,children:(0,o.tZ)(S,(0,r.Z)({ref:t},e))})}))},36194:function(e,t,n){n.d(t,{m:function(){return p}});var r=n(74985),i=(n(50959),n(43312)),o=n(26473),a=n(88965),l=n(61623),c=n(6558),s=n(35538),u=n(93132),d=n(16155),f=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),h={root:(0,i.iv)([a.l0.height(20),a.l0.width(20),a.l0.center]),pulse:(0,i.iv)({animation:"".concat(f," 2s infinite")})};function p(){var e=(0,c.Z)(),t=e.isSaving;return e.isOffline?(0,r.tZ)(l.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,r.tZ)(o.G,{css:h.root,children:(0,r.tZ)(s.Z,{size:16,color:a.TV.redDefault})})}):t?(0,r.tZ)(l.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(o.G,{css:[h.root,h.pulse],children:(0,r.tZ)(u.Z,{size:16,color:a.TV.foregroundDimmest})})}):(0,r.tZ)(l.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(o.G,{css:h.root,children:(0,r.tZ)(d.Z,{size:16,color:a.TV.foregroundDimmest})})})}},34485:function(e,t,n){n.d(t,{y:function(){return Ge},s:function(){return Be}});var r=n(57389),i=n(72006),o=n(4405),a=n(74985),l=n(26473),c=n(28435),s=n(92153),u=n(50959),d=n(88965),f=n(2272),h=n(18837),p=n(51467),m=n(92361),v=n(30364),g=n(88149),y=n(61025),Z={noScroll:!0};var b=(0,y.X)({wrapper:{display:"grid"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:28,"& .xterm":[d.l0.p(8),d.l0.height("100%"),d.l0.overflow("hidden")],"& .xterm-viewport":[d.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:28,height:30,margin:"2px 0 0 auto",zIndex:4}});function w(e){var t=e.onMessage,n=e.onInput,r=e.openFile,i=e.listFiles,o=e.autoFocus,c=e.maxHeight,s=e.onResizeTerminal,d=e.scrollPosition,y=e.scrollParent,w=(0,f.Z)((0,h.Z)({autoFit:!1,size:{rows:10},openFile:r,listFiles:i}),2),x=w[0],C=w[1],k=(0,u.useMemo)((function(){return null===x||void 0===x?void 0:x._term}),[x]),S=(0,u.useMemo)((function(){var e,t=null===k||void 0===k?void 0:k._core;return null!==(e=null===t||void 0===t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}}),[k]),E=(0,u.useState)(!1),T=E[0],R=E[1],D=(0,u.useState)("normal"),I=D[0],_=D[1],B=(0,u.useState)(1),G=B[0],P=B[1],A=(0,u.useState)(!1),N=A[0],U=A[1],L=(0,u.useState)(!1),O=L[0],X=L[1],M=(0,p.Z)(G),F=(0,p.Z)(N),W=(0,p.Z)(I),H=Math.floor((c-16)/S.height),V=(0,m.Z)((function(e){var t=e.widthChanged;x&&t&&x.fit()}),{type:"debounce",wait:200});(0,u.useLayoutEffect)((function(){x&&x.fit()}),[x]),(0,u.useLayoutEffect)((function(){o&&x&&x.focus()}),[x,o]),(0,u.useEffect)((function(){if(x){var e=x.onData((function(e){n(e)})),t=x.onResize((function(){var e=x.getSize();s(e)}));return function(){e.dispose(),t.dispose()}}}),[x,n,s]),(0,u.useEffect)((function(){if(k){var e=k.buffer.onBufferChange((function(e){_(e.type),"alternate"===e.type&&(P(H),U(!1))}));return function(){e.dispose()}}}),[k,H]),(0,u.useEffect)((function(){var e=function(){if(k&&"alternate"!==W.current){var e=k.buffer.active.cursorY;e>M.current&&P(e),k.buffer.active.viewportY>0&&!1===F.current&&U(!0)}};if(k){var t=[k.onLineFeed(e),k.onCursorMove(e)];return function(){t.forEach((function(e){return e.dispose()}))}}}),[k,M,F,W]),(0,u.useEffect)((function(){if(k&&x)if(x.getSize().rows!==H&&k.resize(k.cols,H),"alternate"===W.current)P(H);else{var e=function(e){for(var t=1,n=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=n[r];if(i){for(var o=!1,a=0;a<e.cols;a++)if(0!==i.hasContent(a)){o=!0;break}if(o){t=r+1;break}}}return t}(k);H<e?P(H):e<H&&P(e)}}),[k,x,H,s,P,W]),(0,u.useEffect)((function(){if(x)return t((function(e){return x.write(e)}))}),[t,x]);var z=(0,u.useMemo)((function(){return(G+1)*S.height+16}),[G,S]),j=(0,u.useMemo)((function(){var e;return N?(null!==(e=null===k||void 0===k?void 0:k.buffer.active.length)&&void 0!==e?e:0)*S.height:z}),[S,N,k,z]);(0,u.useEffect)((function(){if(k)if(d<1)k.scrollToLine(0);else if(N){var e,t=null!==(e=null===k||void 0===k?void 0:k.buffer.active.length)&&void 0!==e?e:0,n=j-z,r=t-G;if(n<1)k.scrollToLine(0);else{var i=Math.round(d/n*r);k.scrollToLine(i)}}else k.scrollToLine(0)}),[d,S,k,N,j,z,G]),(0,u.useEffect)((function(){if(T){var e=setTimeout((function(){R(!1)}),200);return function(){clearInterval(e)}}}),[T]);var q=(0,u.useCallback)((function(){if(k){var e=k.getSelectionPosition();if(e){var t=e.start.y*S.height-c/2;y(t)}}}),[k,S.height,c,y]);return(0,a.tZ)(l.G,{innerRef:V,children:(0,a.BX)(l.G,{css:b.wrapper,style:{height:j,pointerEvents:T?"none":"all"},onWheel:function(){R(!0)},onKeyDown:function(e){"f"===e.key&&(0,g.j)(e)&&(X(!0),e.preventDefault())},children:[O?(0,a.tZ)(l.G,{css:b.searchWidget,children:(0,a.tZ)(v.R,{findPrevious:function(e){(null===x||void 0===x?void 0:x.findPrevious(e,Z))&&q()},findNext:function(e){(null===x||void 0===x?void 0:x.findNext(e,Z))&&q()},exit:function(){return X(!1)}})}):null,(0,a.tZ)(l.G,{style:{height:z,maxHeight:c},css:b.terminal,innerRef:C})]})})}var x=n(24531),C=n(28639),k=n(2580),S=n(10267),E=n(59254),T=n(60200),R=n(49313),D=n(94979),I=n(86093),_=n(95134),B=n(86890),G=n(79824),P=n(44385),A=n(61623),N=n(53312),U=n(56412),L=n(16296),O=n(19594),X=n(24430),M=n(96893),F=n(53028),W=n(70232),H=n(77205),V=n(91625),z=n(59893),j=n(46726),q=n(95141),$=n(3911);function Y(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var K,Q=(0,y.X)({outputBlockMetadataWrapper:[{containerType:"size"},d.l0.pl(4),d.l0.pr(8),d.l0.rowWithGap(4),d.l0.align.center,d.l0.justify.spaceBetween,d.l0.height(28),d.l0.backgroundColor.backgroundDefault,d.l0.border({direction:"bottom",width:1,style:"solid",color:d.TV.backgroundHigher}),d.l0.position.sticky,d.l0.top(0),d.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[d.l0.rowWithGap(4),d.l0.align.center,d.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[d.l0.rowWithGap(4),d.l0.align.center],executionPill:[d.l0.flex.shrink(0),d.l0.display.flex,{"@container (max-width: 200px)":[d.l0.display.none]}],ghostwriterDebuggerButton:[d.l0.flex.shrink(0),{"@container (max-width: 400px)":{padding:"0 4px","& > span":[d.l0.display.none],"& > svg":[d.l0.mr(0)]}}],lastLineTextWrapper:[d.l0.flex.shrink(1)],lastLineText:[d.l0.display.block,d.l0.maxWidth("100%"),d.l0.overflow("hidden"),d.l0.font.code,d.l0.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],dateText:{"@container (max-width: 300px)":[d.l0.display.none]},verticalDivider:[d.l0.mx(6),{width:1,height:28,background:d.TV.backgroundHigher}]}),J=(K={},(0,r.Z)(K,C.kH.DEBUGGER,"debugger"),(0,r.Z)(K,C.kH.PACKAGER,"packager"),(0,r.Z)(K,C.kH.UNIT_TEST,"tests"),(0,r.Z)(K,C.kH.EXECUTION,"run"),(0,r.Z)(K,C.kH.PORT_INFO,"port"),K);function ee(e){return(0,U.Z)(new Date(e),"HH:mm:ss, MM/dd")}function te(e,t){var n=t-e;return n<1e3?"".concat(Math.floor(n),"ms"):n<6e4?"".concat(Math.floor(n/1e3),"s"):"".concat(Math.floor(n/6e4),"m")}function ne(e){var t=e.parsedError,n=e.openPane,r=(0,X.ql)();return(0,a.tZ)(z.T,{iconLeft:(0,a.tZ)(M.Z,{}),text:"Debug with AI",onClick:function(){t&&(n({type:"ghostwriterChat"}),r({chatMessage:{type:"debugger",errorType:"console",text:(0,F.Vh)(t,"debugger")}}))},colorway:"blurple",css:Q.ghostwriterDebuggerButton})}function re(e){var t,n=e.isCollapsed,r=e.setIsCollapsed,i=e.localStartTime,o=e.localEndTime,c=e.isDone,s=e.openNetworkingTool,u=e.openWebview,f=e.data,h=le(!c),p=ee(i);o?t=te(i,o):!c&&i&&(t=te(i,h));var m=(0,$.O)(f.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(f.externalPort);return(0,a.BX)(l.G,{css:Q.outputBlockMetadataWrapper,onDoubleClick:function(){return r(!n)},children:[(0,a.BX)(l.G,{css:Q.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,a.tZ)(L.hU,{alt:n?"Expand":"Collapse",onClick:function(){return r(!n)},children:n?(0,a.tZ)(H.Z,{}):(0,a.tZ)(V.Z,{})}),(0,a.tZ)(_.D,{color:"grey",text:"Port",css:Q.executionPill})]}),(0,a.BX)(l.G,{css:Q.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,a.tZ)(N.xv,{color:"dimmer",css:d.l0.mr(0),children:(0,a.tZ)(q.zx,{size:"small",variant:"underlinedOnHover",text:m,onClick:u})}),(0,a.tZ)(l.G,{css:Q.verticalDivider}),(0,a.tZ)(N.xv,{color:"dimmer",css:d.l0.mr(0),children:(0,a.tZ)(A.u,{maxWidth:400,tooltip:"Internal port :".concat(f.port," forwarded to public port :").concat(f.externalPort),children:(0,a.tZ)(q.zx,{size:"small",variant:"underlinedOnHover",text:":".concat(f.port),onClick:s})})}),(0,a.tZ)(l.G,{css:Q.verticalDivider}),(0,a.BX)(N.xv,{color:"dimmer",variant:"small",css:Q.dateText,children:[t?"".concat(t," on "):"",p]}),(0,a.tZ)(A.u,{tooltip:c?"Port closed":"Port open",children:(0,a.tZ)(B.Z,{color:c?d.TV.greyDefault:d.TV.accentPositiveDefault})})]})]})}function ie(e){var t=e.isDone,n=e.error,r=e.finishedTooltipText,i=e.executionPillText,o=e.runningTooltipText,c=void 0===o?"Running...":o,s=e.circleColor,u=void 0===s?d.TV.accentPositiveDefault:s,f=e.duration,h=e.time,p=e.ghostwriterParsedError,m=e.openPane,v=e.isCollapsed,g=e.setIsCollapsed,y=e.lastMeaningfullLine,Z=ee(h),b=Boolean(p),w=void 0!==n||Boolean(p);return(0,a.BX)(l.G,{css:Q.outputBlockMetadataWrapper,onDoubleClick:function(){return g(!v)},children:[(0,a.BX)(l.G,{css:Q.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,a.tZ)(L.hU,{alt:v?"Expand":"Collapse",onClick:function(){return g(!v)},children:v?(0,a.tZ)(H.Z,{}):(0,a.tZ)(V.Z,{})}),(0,a.tZ)(_.D,{color:"grey",text:Y(i),css:Q.executionPill}),b?(0,a.tZ)(ne,{parsedError:p,openPane:m}):null,(0,a.tZ)(l.G,{css:Q.lastLineTextWrapper,children:v?(0,a.tZ)(N.xv,{css:Q.lastLineText,variant:"small",children:y}):null})]}),(0,a.BX)(l.G,{css:Q.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,a.BX)(N.xv,{color:"dimmer",variant:"small",css:Q.dateText,children:[f?"".concat(f," on "):"",Z]}),t?(0,a.tZ)(A.u,{tooltip:r,children:w?(0,a.tZ)(G.Z,{}):(0,a.tZ)(P.Z,{})}):(0,a.tZ)(A.u,{tooltip:c,children:(0,a.tZ)(B.Z,{color:u})})]})]})}function oe(e){var t,n=e.isCollapsed,r=e.setIsCollapsed,i=e.openPane,o=e.startTime,l=e.endTime,c=e.localStartTime,s=e.localEndTime,u=e.isDone,d=e.data,f=e.error,h=le(!u),p=(0,O.l)(d.onMessage).parsedError,m=ce(d.onMessage);o&&l?t=te(o,l):!u&&c?t=te(c,h):u&&s&&(t=te(c,s));var v,g="Finished";return(void 0!==f||Boolean(p))&&(g=void 0!==f?Y(f):"Finished with error"),(0,a.tZ)(ie,{isDone:u,error:f,finishedTooltipText:g,ghostwriterParsedError:p,executionPillText:null!==(v=d.executionMode)&&void 0!==v?v:"unknown",duration:t,time:null!==o&&void 0!==o?o:c,lastMeaningfullLine:m,openPane:i,isCollapsed:n,setIsCollapsed:r})}function ae(e){var t,n=e.isCollapsed,r=e.setIsCollapsed,i=e.openPane,o=e.localStartTime,l=e.localEndTime,c=e.isDone,s=e.type,u=e.error,f=e.data,h=le(!c),p=(0,O.l)(f.onMessage),m=ce(f.onMessage),v=J[s],g=u?(0,a.BX)(N.xv,{multiline:!0,children:[Y(J[s])," error",(0,a.tZ)("br",{}),u]}):"Finished",y=d.TV.accentPositiveDefault,Z="Running...";if(s===C.kH.DEBUGGER){var b=f.debugState;y="paused"===b?d.TV.yellowDefault:d.TV.accentPositiveDefault,Z="paused"===b?"Paused":"Running..."}return l?t=te(o,l):!c&&o&&(t=te(o,h)),(0,a.tZ)(ie,{isCollapsed:n,setIsCollapsed:r,openPane:i,isDone:c,finishedTooltipText:g,executionPillText:v,duration:t,time:o,circleColor:y,runningTooltipText:Z,ghostwriterParsedError:p.parsedError,lastMeaningfullLine:m})}function le(e){var t=(0,u.useState)((function(){return Date.now()})),n=t[0],r=t[1];return(0,u.useEffect)((function(){if(e){var t=setInterval((function(){r(Date.now())}),100);return function(){clearInterval(t)}}}),[e]),n}function ce(e){var t=(0,u.useState)(""),n=t[0],r=t[1];return(0,u.useEffect)((function(){var t=e((function(e){var t,n=null===(t=(0,j.Z)(e).split("\n").reverse().find((function(e){return e.trim().length>0})))||void 0===t?void 0:t.trim();n&&r(n)}));return t})),n}function se(e){var t=e.isCollapsed,n=e.setIsCollapsed,r=e.openPane,i=e.isDone,o=e.type,l=e.data,c=e.error,s=e.localStartTime,u=e.localEndTime,d=e.startTime,f=e.endTime;switch(o){case C.kH.EXECUTION:return(0,a.tZ)(oe,{isCollapsed:t,setIsCollapsed:n,openPane:r,isDone:i,type:o,startTime:d,endTime:f,localStartTime:s,localEndTime:u,data:l,error:c});case C.kH.DEBUGGER:case C.kH.PACKAGER:case C.kH.UNIT_TEST:return(0,a.tZ)(ae,{isCollapsed:t,setIsCollapsed:n,openPane:r,isDone:i,type:o,localStartTime:s,localEndTime:u,data:l,error:c});default:(0,W.Z)(o)}}var ue=n(78945),de=(0,y.X)({emptyStateWrapper:[d.l0.p(8),d.l0.display.block,{lineHeight:"32px"}],simpleRunButtonWrapper:[d.l0.rowWithGap(6),d.l0.backgroundColor.accentPositiveDimmest,d.l0.color.accentPositiveStrongest,d.l0.align.center,d.l0.borderRadius(8),d.l0.py(2),d.l0.px(6),d.l0.mx(4),d.l0.cursor.pointer,{"&:hover":[d.l0.color.white,d.l0.backgroundColor.accentPositiveDefault]}]});function fe(e){var t=e.runner;return(0,a.tZ)(l.G,{tag:"span",style:{display:"inline-block"},children:(0,a.BX)(l.G,{tag:"button",onClick:function(){return t.run()},css:de.simpleRunButtonWrapper,children:[(0,a.tZ)(ue.Z,{size:12}),(0,a.tZ)(N.xv,{children:"Run"})]})})}function he(){var e=(0,c.Z)().runner,t=(0,u.useState)((function(){return e.getRunState()})),n=t[0],r=t[1];return(0,u.useEffect)((function(){var t=e.onStateChanged((function(e){r(e)}));return function(){return t()}}),[e]),n===C.Ah.OFFLINE?(0,a.tZ)(l.G,{css:de.emptyStateWrapper,children:"The Repl is booting..."}):n===C.Ah.RUNNING?(0,a.tZ)(l.G,{css:de.emptyStateWrapper,children:"Running..."}):(0,a.BX)(l.G,{css:de.emptyStateWrapper,children:["Results of your code will appear here when you"," ",(0,a.tZ)(fe,{runner:e})," the project."]})}var pe=n(97866),me=n(53691),ve=n(58125),ge=n(369),ye=n(46130),Ze=n(85247),be=n(68912),we=n(63723),xe=n(84532),Ce=(0,I.$)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),ke=Ce.cssVars,Se=Ce.styleTokens,Ee=(0,y.X)({outputsListParent:[d.l0.height("100%"),d.l0.overflow("hidden"),d.l0.borderRadius(0,0,8,8)],outputsListWrapper:[d.l0.height("100%")],outputsList:[d.l0.height("100%"),d.l0.overflowY("scroll")],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[d.l0.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[d.l0.minHeight(Se.blockMinHeight)],outputBlockTerminalWrapper:[d.l0.minHeight(Se.blockMinHeight),{backgroundColor:Se.terminalBackgroundColor}],outputBlockClosingBorder:[d.l0.height(1),d.l0.zIndex(1),d.l0.border({direction:"bottom",width:1,style:"solid",color:d.TV.backgroundHigher}),{marginTop:-1}],terminalLoadingWrapper:[d.l0.p(8),d.l0.height(Se.previewHeight)],terminalLoadingLine:[d.l0.borderRadius(2),D.p.foregroundPulse(),d.l0.height(16),d.l0.mb(4)],portInfoBlockWrapper:[d.l0.py(6),d.l0.flex.row,d.l0.align.center],portInfoBodyWrapper:[d.l0.flex.grow(1)],portInfoTextFirstLine:[d.l0.px(6),d.l0.rowWithGap(2),d.l0.align.center],portInfoTextSecondLine:[d.l0.px(6),d.l0.rowWithGap(2),d.l0.align.center,d.l0.color.foregroundDimmest],portInfoButtonsWrapper:[d.l0.flex.row,d.l0.pr(6)]});function Te(e){var t=e.targetHeight,n=Math.min(Math.floor((t-8)/20),4),i=(0,u.useMemo)((function(){return Array.from({length:n}).map((function(e,t){return(0,a.tZ)(l.G,{css:[Ee.terminalLoadingLine],style:{width:100*Math.random()+"%"}},t)}))}),[n]);return(0,a.tZ)(l.G,{css:Ee.terminalLoadingWrapper,style:(0,r.Z)({},ke.previewHeight,t+"px"),children:(0,a.tZ)(l.G,{style:{position:"sticky",top:36},children:i})})}function Re(e){var t=e.rootRef,n=e.maxHeight,r=e.onInput,i=e.openFile,o=e.openPane,l=e.listFiles,c=e.onResizeTerminal,s=e.autoFocus,u=e.isDone,d=e.type,f=e.data,h=e.error,p=e.localStartTime,m=e.localEndTime,v=e.startTime,g=e.endTime;switch(d){case C.kH.EXECUTION:case C.kH.DEBUGGER:case C.kH.PACKAGER:case C.kH.UNIT_TEST:return(0,a.tZ)(_e,{rootRef:t,maxHeight:n,onInput:r,openFile:i,openPane:o,listFiles:l,onResizeTerminal:c,autoFocus:s,isDone:u,data:f,type:d,error:h,localStartTime:p,localEndTime:m,startTime:v,endTime:g});case C.kH.PORT_INFO:return(0,a.tZ)(De,{maxHeight:n,onInput:r,openFile:i,openPane:o,listFiles:l,onResizeTerminal:c,autoFocus:s,isDone:u,localStartTime:p,localEndTime:m,data:f});default:(0,W.Z)(d)}}function De(e){var t=e.maxHeight,n=e.openPane,c=e.openFile,s=e.isDone,u=e.localStartTime,d=e.localEndTime,f=e.data,h=Ie({maxHeight:t}),p=h.isCollapsed,m=h.setIsCollapsed,v=h.blockWrapperRef,g=h.blockWrapperProps,y=h.blockResizeRef,Z=h.measuredBlockHeight,b=function(){n({type:"webview",data:{port:f.port}},!0)},w=function(){c({path:".replit"})},x=(0,$.O)(f.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(f.externalPort);return(0,a.BX)(l.G,{children:[(0,a.tZ)(re,{isCollapsed:p,setIsCollapsed:m,localStartTime:u,localEndTime:d,isDone:s,openNetworkingTool:w,openWebview:b,data:f}),(0,a.tZ)("div",(0,o.Z)((0,i.Z)({ref:v},g),{children:(0,a.tZ)(l.G,{css:Ee.outputBlockCollapsingWrapper,style:(0,r.Z)({},ke.blockMinHeight,Z+"px"),children:(0,a.BX)(l.G,{css:Ee.portInfoBlockWrapper,innerRef:y,children:[(0,a.BX)(l.G,{css:Ee.portInfoBodyWrapper,children:[(0,a.BX)(l.G,{css:Ee.portInfoTextFirstLine,children:[(0,a.BX)(N.xv,{children:["Port :",f.port," opened on"]}),(0,a.tZ)(q.zx,{variant:"underlined",text:x,onClick:b})]}),(0,a.BX)(l.G,{css:Ee.portInfoTextSecondLine,children:[(0,a.tZ)(N.xv,{children:"You can manage this config in the"}),(0,a.tZ)(q.zx,{variant:"underlined",text:"Networking tool",onClick:w})]})]}),(0,a.BX)(l.G,{css:Ee.portInfoButtonsWrapper,children:[(0,a.tZ)(L.hU,{alt:"Networking tool",onClick:w,children:(0,a.tZ)(Ze.Z,{})}),(0,a.tZ)(L.hU,{alt:"Close",onClick:function(){return m(!0)},children:(0,a.tZ)(be.Z,{})})]})]})})})),(0,a.tZ)(l.G,{css:Ee.outputBlockClosingBorder})]})}function Ie(e){var t=e.maxHeight,n=(0,u.useState)(0),r=n[0],i=n[1],o=(0,u.useRef)(null),a=(0,u.useState)("expanded"),l=a[0],c=a[1],s=(0,u.useState)(void 0),d=s[0],f=s[1],h=(0,m.Z)((function(e){var t=e.height;"expanded"===l&&i(t)}),{type:"debounce",wait:200});(0,u.useEffect)((function(){if(o.current)switch(l){case"start-collapsing":c("is-collapsing");break;case"is-collapsing":f(0);break;case"start-expanding":c("is-expanding");break;case"is-expanding":f(r);break;case"expanded":f(void 0)}}),[l,r]);return{collapsedStep:l,isCollapsed:"expanded"!==l&&"is-expanding"!==l,setIsCollapsed:function(e){if(o.current)if(!0===e){var n=Math.min(o.current.getBoundingClientRect().height,t);f(n),c("start-collapsing")}else c("start-expanding")},blockWrapperRef:o,blockWrapperProps:{style:{height:d,transition:"height 120ms ease-out",overflow:"expanded"===l||"start-collapsing"===l?"visible":"hidden"},onTransitionEnd:function(){"is-collapsing"===l&&c("collapsed"),"is-expanding"===l&&c("expanded")}},blockResizeRef:h,measuredBlockHeight:r}}function _e(e){var t=e.onInput,n=e.openFile,c=e.openPane,s=e.listFiles,d=e.autoFocus,f=e.rootRef,h=e.maxHeight,p=e.onResizeTerminal,m=e.isDone,v=e.data,g=e.error,y=e.localStartTime,Z=e.localEndTime,b=e.startTime,x=e.endTime,C=e.type,k=(0,u.useRef)(null),S=(0,u.useState)(!0),D=S[0],I=S[1],_=(0,u.useState)(!1),B=_[0],G=_[1],P=(0,u.useState)(0),A=P[0],N=P[1],U=(0,R.f)(),L=(0,T.Z)(D,B?6e4:500),O=Ie({maxHeight:h}),X=O.collapsedStep,M=O.isCollapsed,F=O.setIsCollapsed,W=O.blockWrapperRef,H=O.blockWrapperProps,V=O.blockResizeRef,z=O.measuredBlockHeight;(0,u.useEffect)((function(){if(f.current){var e,t=f.current,n=function(){var n,r,i=Math.max(0,t.scrollTop-(null!==(r=null===(n=k.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0));N(i),G(!0),e&&clearTimeout(e),e=setTimeout((function(){G(!1)}),500)};return t.addEventListener("scroll",n),function(){clearInterval(e),t.removeEventListener("scroll",n)}}}),[f,k]),(0,u.useEffect)((function(){if(k.current&&f.current)return(0,E.j)(k.current,(function(){return I(!0),function(){I(!1)}}),{root:f.current,threshold:0})}),[f,k]);var j,q=h-28,$=!1;return"collapsed"===X?$=!1:m&&!L||($=!0),(0,a.BX)(l.G,{innerRef:k,children:[(0,a.tZ)(se,{isCollapsed:M,setIsCollapsed:F,openPane:c,isDone:m,data:v,localStartTime:y,localEndTime:Z,startTime:b,endTime:x,type:C,error:g}),(0,a.tZ)("div",(0,o.Z)((0,i.Z)({ref:W},H),{children:(0,a.tZ)(l.G,{css:Ee.outputBlockTerminalWrapper,style:(j={},(0,r.Z)(j,ke.blockMinHeight,z+"px"),(0,r.Z)(j,ke.terminalBackgroundColor,null===U||void 0===U?void 0:U.background),j),children:$?(0,a.tZ)(l.G,{innerRef:V,children:(0,a.tZ)(w,{onMessage:v.onMessage,onInput:t,openFile:n,listFiles:s,maxHeight:q,onResizeTerminal:p,scrollPosition:A,scrollParent:function(e){var t,n,r,i=e+(null!==(r=null===(t=k.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0);null===(n=f.current)||void 0===n||n.scrollTo({top:i})},autoFocus:d})}):(0,a.tZ)(Te,{targetHeight:z})})})),(0,a.tZ)(l.G,{css:Ee.outputBlockClosingBorder})]})}var Be={id:"outputs.clear",name:"Clear console history",default:void 0};function Ge(e){var t=e.performPaneOperation,n=e.isActive,r=(0,c.Z)(),i=r.runner,o=r.fs,d=(0,u.useState)([]),f=d[0],h=d[1],p=(0,u.useState)(0),v=p[0],g=p[1],y=(0,u.useState)(!0),Z=y[0],b=y[1],w=(0,u.useRef)(null),E=(0,pe.Z)(me.y.Output),T=(0,u.useState)(!1),R=T[0],D=T[1],I=(0,u.useRef)(0),_=(0,ye.T3)(),B=(0,we.P5)({controlName:xe.wK,logFlagToAnalytics:!0});if("outputs"!==i.mode)throw new Error("outputs pane actions are only supported with outputs runner");var G=(0,m.Z)((function(e){var t=e.height;g(t)}),{type:"throttle",wait:200}),P=(0,u.useMemo)((function(){return[{type:"action",label:"Clear history",icon:(0,a.tZ)(k.Z,{}),run:function(){return i.clearBlockHistory()}}]}),[i]);(0,S.L5)((function(){return{actions:P,type:"runnerOutput",startBlock:i.startBlock,endBlock:i.endBlock,writeOutputToBlock:i.writeOutputToBlock,writeErrorToBlock:i.writeErrorToBlock}}),[i,P]),(0,ve.Il)((function(){return[Be.id,i.clearBlockHistory]}),[i]);var A=(0,u.useCallback)((function(e){t({operation:"open",secondary:!0,pane:{type:(0,x.Dp)(e),data:e}})}),[t]),N=(0,u.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t({operation:"open",secondary:n,pane:e})}),[t]);(0,u.useEffect)((function(){return i.onStateChanged((function(e){D(e===C.Ah.BEFORE_RUN)}))}),[i]),(0,u.useEffect)((function(){var e=i.getOutputBlocks();h(e)}),[i]),(0,u.useEffect)((function(){var e=i.onAllBlocksChanged((function(e){h(e)})),t=i.onBlockChanged((function(e){!f.find((function(t){return t.id===e.id}))&&w.current&&(w.current.scrollTo(0,w.current.scrollHeight),b(!0)),h((0,s.ZP)((function(t){var n=t.findIndex((function(t){return t.id===e.id}));n>=0?t[n]=e:t.push(e)})))}));return function(){t(),e()}}),[i,f]);var U=B?f:f.filter((function(e){return e.type!==C.kH.PORT_INFO}));return(0,a.BX)(l.G,{css:Ee.outputsListParent,innerRef:E,children:[R?(0,a.tZ)(ge.Z,{}):null,(0,a.tZ)(l.G,{css:Ee.outputsListWrapper,innerRef:G,children:0===U.length?(0,a.tZ)(he,{}):(0,a.BX)(l.G,{css:[Ee.outputsList,Z&&Ee.outputsListSnapToBottom],innerRef:w,onScroll:function(){if(w.current){if(w.current.scrollTop<I.current)b(!1);else{var e=w.current.scrollHeight-w.current.scrollTop-20<v;b(e)}I.current=w.current.scrollTop}},children:[U.map((function(e,t){var r=t===U.length-1;return(0,a.tZ)(Re,{rootRef:w,maxHeight:v,onInput:i.sendInput,openFile:A,openPane:N,listFiles:o.listFiles,onResizeTerminal:function(t){e.isDone||e.type!==C.kH.EXECUTION||i.resizeTerminalForBlock(e.id,t)},autoFocus:n&&r&&!_,isDone:e.isDone,type:e.type,error:e.error,localStartTime:e.localStartTime,localEndTime:e.localEndTime,startTime:e.startTime,endTime:e.endTime,data:e.data},e.id)})),Z?(0,a.tZ)(l.G,{css:Ee.scrollSnap}):null]})})]})}},61439:function(e,t,n){n.d(t,{I:function(){return d}});var r=n(72006),i=n(4405),o=n(63723),a=n(70505),l=n(67043),c=n(28435),s=n(50959),u={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function d(){var e=(0,l.Z)(),t=(0,a.T)(),n=(0,c.Z)(),d=(0,s.useState)(null),f=d[0],h=d[1],p=(0,o.P5)({controlName:"flag-system-dependencies-search-unstable"}),m=(0,o.P5)({controlName:"flag-system-dependencies-search-23_05"});(0,s.useEffect)((function(){var e=n.dotReplit.watch((function(e){var t,n;null===e.error&&h(null!==(n=null===(t=e.config.nix)||void 0===t?void 0:t.channel)&&void 0!==n?n:null)}));return function(){e()}}),[n]);var v=(0,s.useMemo)((function(){var n,o=(null===t||void 0===t?void 0:t.packagers)||[],a=(null===o||void 0===o?void 0:o.map((function(e){var t;return(0,i.Z)((0,r.Z)({},e),{title:e.language,packagerFiles:(null===(t=e.packagerFiles)||void 0===t?void 0:t.length)?e.packagerFiles:null!==(n=u[e.language])&&void 0!==n?n:[]})})))||[];"html"!==(null===e||void 0===e?void 0:e.language)&&"html_beta"!==(null===e||void 0===e?void 0:e.language)||a.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]});var l="unstable"===f&&p||"stable-23_05"===f&&m;return a.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:l,guessImports:!1,packagerFiles:["replit.nix"]}),a}),[t,e,f,p,m]);return v}},59347:function(e,t,n){n.d(t,{C:function(){return p}});var r=n(57135),i=n(96583),o="index.html",a=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/,l={name:"html",getInstalledPackages:function(e){var t=e.services.fs;return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,t.stat(o)];case 1:return e.sent().exists?[2,new Promise(function(){var e=(0,r.Z)((function(e){var n;return(0,i.__generator)(this,(function(r){return n=t.watchTextFile(o,{onReady:function(t){var r=t.initialContent,i=[],o=!0,l=!1,c=void 0;try{for(var s,u=r.split("\n")[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value.match(a);d&&i.push({name:d[1],version:d[2]})}}catch(f){l=!0,c=f}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}n(),e(i)},onError:function(){n(),e([])}}),[2]}))}));return function(t){return e.apply(this,arguments)}}())]:[2,[]]}}))}))()},getPackageInfo:function(e){var t=e.name;return(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:return(n=r.sent())?[2,{name:n.name,version:n.version,description:n.description,homepageURL:n.link,sourceCodeURL:n.include}]:[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}}))}))()},search:function(e){var t=e.query;return(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:return(e=r.sent()).ok?[4,e.json()]:[2,[]];case 2:return n=r.sent(),[2,n.map((function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}}))]}}))}))()},install:function(e){var t=e.pkgs,n=e.services.fs;return(0,r.Z)((function(){var e,a,l,c,s,u,d;return(0,i.__generator)(this,(function(f){switch(f.label){case 0:return[4,n.stat(o)];case 1:if(!f.sent().exists)return[2];e=!0,a=!1,l=void 0,f.label=2;case 2:f.trys.push([2,7,8,9]),c=function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e=u.value,[4,new Promise(function(){var t=(0,r.Z)((function(t){var a;return(0,i.__generator)(this,(function(l){return a=n.watchTextFile(o,{onReady:function(o){var l=o.initialContent,c=o.writeChange;return(0,r.Z)((function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r='<script src="'.concat(e.sourceCodeURL,'"><\/script>\n'),-1===(o=l.indexOf("<script"))&&(o=l.indexOf("</body>")),-1===o&&(o=l.length),c({from:o,insert:r}),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,n.flush()];case 2:return i.sent(),[3,5];case 3:return i.sent(),[3,5];case 4:return a(),t(),[7];case 5:return[2]}}))}))()},onError:function(){a(),t()}}),[2]}))}));return function(e){return t.apply(this,arguments)}}())];case 1:return t.sent(),[2]}}))},s=t[Symbol.iterator](),f.label=3;case 3:return(e=(u=s.next()).done)?[3,6]:[5,(0,i.__values)(c())];case 4:f.sent(),f.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return d=f.sent(),a=!0,l=d,[3,9];case 8:try{e||null==s.return||s.return()}finally{if(a)throw l}return[7];case 9:return[2]}}))}))()},uninstall:function(e){var t=e.pkgs,n=e.services.fs;return(0,r.Z)((function(){var e,l,c,s,u,d,f;return(0,i.__generator)(this,(function(h){switch(h.label){case 0:return[4,n.stat(o)];case 1:if(!h.sent().exists)return[2];e=!0,l=!1,c=void 0,h.label=2;case 2:h.trys.push([2,7,8,9]),s=function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e=d.value,[4,new Promise(function(){var t=(0,r.Z)((function(t){var l;return(0,i.__generator)(this,(function(c){return l=n.watchTextFile(o,{onReady:function(o){var c=o.initialContent,s=o.writeChange;return(0,r.Z)((function(){var r,o,u,d,h,p,m,v,g;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r=0,o=!0,u=!1,d=void 0;try{for(h=c.split("\n")[Symbol.iterator]();!(o=(p=h.next()).done);o=!0)m=p.value,(v=m.match(a))&&(g=v[1],e.name===g&&s({from:r,to:r+m.length+1})),r+=m.length+1}catch(f){u=!0,d=f}finally{try{o||null==h.return||h.return()}finally{if(u)throw d}}i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,n.flush()];case 2:return i.sent(),[3,5];case 3:return i.sent(),[3,5];case 4:return l(),t(),[7];case 5:return[2]}}))}))()},onError:function(){l(),t()}}),[2]}))}));return function(e){return t.apply(this,arguments)}}())];case 1:return t.sent(),[2]}}))},u=t[Symbol.iterator](),h.label=3;case 3:return(e=(d=u.next()).done)?[3,6]:[5,(0,i.__values)(s())];case 4:h.sent(),h.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return f=h.sent(),l=!0,c=f,[3,9];case 8:try{e||null==u.return||u.return()}finally{if(l)throw c}return[7];case 9:return[2]}}))}))()}},c=l,s={name:"upm",getInstalledPackages:function(e){var t=e.id,n=e.services.packager;return(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.listSpecfile(t)];case 1:return(e=r.sent()).error||null===e.packages?[2,[]]:[2,e.packages]}}))}))()},getPackageInfo:function(e){var t=e.id,n=e.name,o=e.services.packager;return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){return[2,o.fetchPackageInfo(n,t)]}))}))()},search:function(e){var t=e.id,n=e.query,o=e.services.packager;return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){return[2,o.searchPackages(n,t)]}))}))()},install:function(e){var t=e.id,n=e.pkgs,o=e.services.packager;return(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,o.addPackages(n,t)];case 1:if(!e.sent())throw new Error("Package install failed");return[2]}}))}))()},uninstall:function(e){var t=e.id,n=e.pkgs,o=e.services.packager;return(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return e=n.filter((function(e){return e.name})).map((function(e){return e.name})),[4,o.removePackages(e,t)];case 1:if(!r.sent())throw new Error("Package uninstall failed");return[2]}}))}))()}},u=n(43119),d=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i;return e.map((function(e,t){return e+(null!==(i=n[t])&&void 0!==i?i:"")})).join("")};function f(){var e=(0,u.Z)(["\n        let\n          pkgs = import <nixpkgs> {};\n          pkg = pkgs."," or {};\n          meta = pkg.meta or {};\n        in {\n          name = pkg.pname or pkg.name or null;\n          version = pkg.version or null;\n          license = meta.license or null;\n          description = meta.description or null;\n          homepage = meta.homepage or null;\n         }\n     "]);return f=function(){return e},e}var h={name:"nix",getInstalledPackages:function(e){var t=e.services.nixService;return(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.listPackages()];case 1:return null!==(e=n.sent()).error?[2,[]]:[2,e.packages.filter((function(e){return Boolean(e.name)})).map((function(e){return{name:e.name,version:e.version}}))]}}))}))()},getPackageInfo:function(e){var t=e.name,n=e.services.container;return(0,r.Z)((function(){var e,r,o,a,l,c,s,u,h,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=t.replace(/^pkgs\./,""),[4,n.exec("nix-instantiate","--strict","--json","--eval","--expr",d(f(),e))];case 1:return null!==(r=i.sent()).error?[2,{name:t}]:(o=JSON.parse(r.output),l=null!==(a=o.license)&&void 0!==a?a:void 0,void 0!==o.license&&"string"!==typeof o.license&&(l=null===(c=o.license)||void 0===c?void 0:c.fullName),[2,{name:t,prettyName:null!==(s=o.name)&&void 0!==s?s:void 0,version:null!==(u=o.version)&&void 0!==u?u:void 0,license:l,description:null!==(h=o.description)&&void 0!==h?h:void 0,homepageURL:null!==(p=o.homepage)&&void 0!==p?p:void 0}])}}))}))()},search:function(e){var t=e.query,n=e.services.nixService;return(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.searchPackages(t)];case 1:if(null!==(e=r.sent()).error)throw new Error("Could not search Nix packages");return[2,e.packages.map((function(e){return{name:"pkgs.".concat(e.name),version:e.version}}))]}}))}))()},install:function(e){var t=e.pkgs,n=e.services.nixService;return(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return e=t.map((function(e){return e.name})).filter((function(e){return null!=e})),[4,n.addPackages(e)];case 1:return r.sent(),[2]}}))}))()},uninstall:function(e){var t=e.pkgs,n=e.services.nixService;return(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return e=t.map((function(e){return e.name})).filter((function(e){return null!=e})),[4,n.removePackages(e)];case 1:return r.sent(),[2]}}))}))()}};function p(e){switch(e){case"html":return c;case"nix":return h;default:return s}}},93452:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(57135),i=n(96583),o=n(74985),a=n(25404),l=n(9434),c=n(28435),s=n(86763),u=n.n(s),d=n(50959),f=n(61439),h=n(59347),p=n(19833);function m(){var e=(0,c.Z)(),t=(0,p.Hg)(p.NC),n=(0,p.Hg)(p.w$),o=(0,p.XD)(p.w$),s=(0,p.$X)(p.w$),m=(0,p.Hg)(p.vO),v=(0,p.Mi)(),g=(0,p.Zq)(),y=(0,p.OO)(),Z=(0,p.np)(),b=(0,a.Z)(),w=(0,f.I)(),x=(0,p.T9)();return(0,d.useEffect)((function(){if(0!==w.length){var t=[],n=!1,r=!0,i=!1,a=void 0;try{for(var l,c=function(){var r=l.value,i=Promise.resolve(),a=g(r.id),c=u()((function(){var t=g(r.id),a=o();if(t===p.C0.Idle||(null===a||void 0===a?void 0:a.id)!==r.id){var l=(0,h.C)(r.id);i=i.then((function(){if(!n)return l.getInstalledPackages({id:r.id,services:e}).then((function(e){n||(y(r.id,e),v(r.id,p.C0.Idle))}))}))}}),500);if(r.packagerFiles.length>0){var s=!0,d=!1,f=void 0;try{for(var m,Z=function(){var n=m.value;if(n.endsWith("/"))return"continue";var r=null!==a&&a!==p.C0.Initializing&&a!==p.C0.Uninitialized,i=e.fs.watchFilePath(n,{onChange:function(){r?c():r=!0}});t.push(i)},b=r.packagerFiles[Symbol.iterator]();!(s=(m=b.next()).done);s=!0)Z()}catch(w){d=!0,f=w}finally{try{s||null==b.return||b.return()}finally{if(d)throw f}}}},s=w[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)c()}catch(d){i=!0,a=d}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return function(){n=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){(0,o.value)()}}catch(d){r=!0,i=d}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}}),[w,e.fs]),(0,d.useEffect)((function(){var t=!1,n=function(){var n=(0,r.Z)((function(){var n,r,o,a,l,c;return(0,i.__generator)(this,(function(i){n=!0,r=!1,o=void 0;try{for(a=function(){var n=c.value,r=g(n.id);if(r&&r!==p.C0.Uninitialized&&r!==p.C0.Initializing)return"continue";v(n.id,p.C0.Initializing),(0,h.C)(n.id).getInstalledPackages({id:n.id,services:e}).then((function(e){t||(y(n.id,e),v(n.id,p.C0.Idle))}))},l=w[Symbol.iterator]();!(n=(c=l.next()).done);n=!0)a()}catch(s){r=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return[2]}))}));return function(){return n.apply(this,arguments)}}();return n(),function(){t=!0}}),[w]),(0,d.useEffect)((function(){if(null===n&&0!==t.length){var e=t[0];g(e.id)===p.C0.Idle&&Z(e)}}),[m,n,t]),(0,d.useEffect)((function(){if(null!==n){var t=!1,o=function(){var o=(0,r.Z)((function(){var r,o,a,c,u,d,f,m,g,Z,w,C,k,S,E,T,R,D;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:switch(r=(0,h.C)(n.id),n.kind){case p.TH.Install:return[3,1];case p.TH.Uninstall:return[3,6]}return[3,11];case 1:v(n.id,p.C0.Installing),o=!0,a=!1,c=void 0;try{for(u=n.pkgs[Symbol.iterator]();!(o=(d=u.next()).done);o=!0)f=d.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:f.name})}catch(I){a=!0,c=I}finally{try{o||null==u.return||u.return()}finally{if(a)throw c}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,r.install({id:n.id,pkgs:n.pkgs,services:e})];case 3:return i.sent(),1===n.pkgs.length?b.showNotice("Installed ".concat(null!==(m=n.pkgs[0].name)&&void 0!==m?m:"package")):b.showNotice("Installed ".concat(n.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===n.pkgs.length?b.showError("Failed to install ".concat(null!==(g=n.pkgs[0].name)&&void 0!==g?g:"package")):b.showError("Failed to install ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,5];case 5:return[3,11];case 6:v(n.id,p.C0.Uninstalling),Z=!0,w=!1,C=void 0;try{for(k=n.pkgs[Symbol.iterator]();!(Z=(S=k.next()).done);Z=!0)E=S.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:E.name})}catch(I){w=!0,C=I}finally{try{Z||null==k.return||k.return()}finally{if(w)throw C}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,r.uninstall({id:n.id,pkgs:n.pkgs,services:e})];case 8:return i.sent(),1===n.pkgs.length?b.showNotice("Removed ".concat(null!==(T=n.pkgs[0].name)&&void 0!==T?T:"package")):b.showNotice("Removed ".concat(n.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===n.pkgs.length?b.showError("Failed to remove ".concat(null!==(R=n.pkgs[0].name)&&void 0!==R?R:"package")):b.showError("Failed to remove ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,10];case 10:return[3,11];case 11:return t?[2]:[4,r.getInstalledPackages({id:n.id,services:e})];case 12:return D=i.sent(),t?[2]:(y(n.id,D),v(n.id,p.C0.Idle),s(null),[2])}}))}));return function(){return o.apply(this,arguments)}}();return o(),function(){t=!0}}}),[n]),null}function v(e){var t=e.children,n=(0,p.ns)();return(0,o.BX)(p.vN.Provider,{value:n,children:[(0,o.tZ)(m,{}),t]})}},19833:function(e,t,n){n.d(t,{$X:function(){return g},$z:function(){return S},B2:function(){return D},C0:function(){return r},Hg:function(){return Z},Mi:function(){return T},NC:function(){return I},OO:function(){return P},T9:function(){return x},TH:function(){return i},Wx:function(){return L},XD:function(){return y},Zq:function(){return E},cW:function(){return _},jh:function(){return N},np:function(){return X},ns:function(){return p},pN:function(){return w},te:function(){return G},vN:function(){return m},vO:function(){return k},w$:function(){return R},wY:function(){return C},zi:function(){return F}});var r,i,o=n(57389),a=n(72006),l=n(4405),c=n(55749),s=n(92153),u=n(90234),d=n(71999),f=n(28999),h=n(50959);(0,u.cn)({replId:"",packageManagers:{}});function p(){return(0,h.useState)((function(){return(0,u.MT)()}))[0]}!function(e){e.Uninitialized="Uninitialized",e.Initializing="Initializing",e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle"}(r||(r={})),function(e){e.Install="Install",e.Uninstall="Uninstall"}(i||(i={}));var m=(0,h.createContext)(null);function v(){var e=(0,h.useContext)(m);if(!e)throw new Error("Expected store in context");return e}var g=function(e){return(0,d.b9)(e,{store:v()})};function y(e){return(0,f.lV)((0,h.useCallback)((function(t){return t(e)}),[e]),{store:v()})}function Z(e){return(0,d.Dv)(e,{store:v()})}(0,u.cn)(null);(0,u.cn)(null);var b=(0,u.cn)({});function w(e){var t,n=Z(b);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function x(){var e=g(b);return function(t,n){e((function(e){return(0,s.ZP)(e,(function(e){var r=e[t];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=function(){var e=l.value;r.find((function(t){return t.name===e.name}))||r.push(e)},s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)c()}catch(u){o=!0,a=u}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}else e[t]=n}))}))}}function C(){var e=g(b);return function(t,n){e((function(e){return(0,s.ZP)(e,(function(e){var r=e[t];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=function(){var e=l.value,t=r.findIndex((function(t){return t.name===e.name}));-1!==t&&r.splice(t,1)},s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)c()}catch(u){o=!0,a=u}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}}))}))}}var k=(0,u.cn)({});function S(e){var t,n=Z(k);return e&&null!==(t=n[e])&&void 0!==t?t:null}function E(){var e=y(k);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null}}function T(){var e=g(k);return function(t,n){e((function(e){return(0,l.Z)((0,a.Z)({},e),(0,o.Z)({},t,n))}))}}var R=(0,u.cn)(null);function D(){return Z(R)}var I=(0,u.cn)([]);function _(){return Z(I)}var B=(0,u.cn)({});function G(e){var t,n=Z(B);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function P(){var e=g(B);return function(t,n){e((function(e){return(0,l.Z)((0,a.Z)({},e),(0,o.Z)({},t,n))}))}}var A=(0,u.cn)(null,(function(e,t,n){var r=n.id,o=n.pkg;if(!o.name)throw new Error("Package does not have a name.");t(I,(function(e){return(0,s.ZP)(e,(function(e){if(!e.find((function(e){return e.pkgs.find((function(t){return e.id===r&&t.name===o.name}))}))){var t=e.find((function(e){return e.kind===i.Install}));t?t.pkgs.push(o):e.push({kind:i.Install,id:r,pkgs:[o]})}}))}))}));function N(){return g(A)}var U=(0,u.cn)(null,(function(e,t,n){var r=n.id,o=n.pkg;if(!o.name)throw new Error("Package does not have a name.");t(I,(function(e){return(0,s.ZP)(e,(function(e){if(!e.find((function(e){return e.pkgs.find((function(t){return e.id===r&&t.name===o.name}))}))){var t=e.find((function(e){return e.kind===i.Uninstall}));t?t.pkgs.push(o):e.push({kind:i.Uninstall,id:r,pkgs:[o]})}}))}))}));function L(){return g(U)}(0,u.cn)(null);var O=(0,u.cn)(null,(function(e,t,n){var r=(0,c.Z)(e(I)),i=r[0],o=r.slice(1);n===i&&(t(I,o),t(R,n))}));function X(){return g(O)}var M=(0,u.cn)(null,(function(e,t,n){t(I,(function(e){return(0,s.ZP)(e,(function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.pkgs.findIndex((function(e){return e.name===n}));-1!==c&&l.pkgs.splice(c,1)}}catch(s){r=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}))}))}));function F(){return g(M)}},74459:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(9970),i=n(74985),o=n(68711),a=n.n(o),l=n(86813);function c(e){var t=e.replTitle,n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.Z)(t.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.ex)(),t);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:n},"title")})}},25457:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(74985),i=n(48306),o=n.n(i),a=(n(50959),n(12235)),l=n(25422),c=n(88965);function s(e){var t=e.preventHighlightBorder,n=(0,l.Z)();return(0,r.BX)("div",{className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(a.Z,{backgroundColor:c.TV.backgroundHighest,foregroundColor:c.TV.backgroundHigher,uniqueKey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(o(),{id:"b8bdeb39d1178985",dynamic:[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";-moz-box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}},65614:function(e,t,n){n.d(t,{ky:function(){return f},qo:function(){return u}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  fragment PowerUpActionsMultiBoostToggle on Repl {\n    id\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        boost {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiBoostToggle($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        ...PowerUpActionsMultiBoostToggle\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l()),d=(0,o.Ps)(c(),u);function f(e){var t=(0,r.Z)({},s,e);return a.a(d,t)}},89835:function(e,t,n){n.d(t,{Ly:function(){return m},ZP:function(){return g},qm:function(){return Z}});var r=n(9970),i=n(74985),o=n(63723),a=n(90602),l=n(20685),c=n(54314),s=n(46550),u=n(53312),d=n(61025),f=n(88965),h=n(39438),p=n(50959),m=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],v=(0,d.X)({sizeInput:[f.l0.py(6),f.l0.flex.growAndShrink(0),{border:"none"}]});function g(e){var t=e.preferences,n=e.update,l=(0,o.P5)({controlName:"flag-editor-indentation-detection",logFlagToAnalytics:!1}),d=(0,o.P5)({controlName:"flag-editor-indentation-format-pastes",logFlagToAnalytics:!1});return(0,i.BX)(i.HY,{children:[l?(0,i.BX)(i.HY,{children:[(0,i.tZ)(h.$,{id:"indentDetection",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(u.xv,{multiline:!1,children:"Indentation detection"}),(0,i.tZ)(u.xv,{variant:"small",color:"dimmest",children:"Automatically detect indentation settings when opening a file."})]}),children:(0,i.tZ)(s.r,{"aria-label":"Indentation detection",isSelected:t.indentDetection,onChange:function(e){n({indentDetection:e})}})}),(0,i.tZ)(a.R,{})]}):null,d?(0,i.BX)(i.HY,{children:[(0,i.tZ)(h.$,{id:"indentFormatPastes",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(u.xv,{multiline:!1,children:"Format pasted text indentation"}),(0,i.tZ)(u.xv,{variant:"small",color:"dimmest",children:"Automatically format the indentation of pasted text."})]}),children:(0,i.tZ)(s.r,{"aria-label":"Format pasted text indentation",isSelected:t.indentFormatPastes,onChange:function(e){n({indentFormatPastes:e})}})}),(0,i.tZ)(a.R,{})]}):null,(0,i.tZ)(h.$,{id:"indentType",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(u.xv,{multiline:!1,children:"Indentation character"}),(0,i.tZ)(u.xv,{variant:"small",color:"dimmest",children:"The character used for indenting lines."})]}),children:(0,i.tZ)(c.P,{initialSelectedItem:m.find((function(e){return e.value===(t.indentIsSpaces?"spaces":"tabs")})),onChange:function(e){n({indentIsSpaces:"spaces"===(null===e||void 0===e?void 0:e.value)})},items:(0,r.Z)(m)})}),(0,i.tZ)(a.R,{}),(0,i.tZ)(h.$,{id:"indentSize",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(u.xv,{multiline:!1,children:"Indentation size"}),(0,i.tZ)(u.xv,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,i.tZ)(Z,{css:v.sizeInput,size:t.indentSize,onChange:function(e){n({indentSize:e})}})})]})}function y(e){return void 0===e||null===e?2:("string"===typeof e&&(e=parseInt(e,10)),isNaN(e)?2:(Number.isInteger(e)||(e=Math.round(e)),e<1?1:e>16?16:e))}function Z(e){var t=e.size,n=e.onChange,r=e.className,o=(0,p.useState)(null),a=o[0],c=o[1],s=null!==a?a:t.toString(),u=""===s?"6ch":s.length+5.5+"ch";return(0,i.tZ)(l.II,{type:"number",style:{width:u},className:r,min:1,max:16,value:s,onBlur:function(){return c(null)},onChange:function(e){var t=e.target.value.trim(),r=e.target.valueAsNumber;""===t||isNaN(r)?c(t):e.target.validity.valid?(c(null),n(y(r))):(c(t),""===t||isNaN(parseInt(t,10))||n(y(t)))}})}},39438:function(e,t,n){n.d(t,{$:function(){return s}});var r=n(74985),i=n(50959),o=n(26473),a=n(53312),l=n(88965),c=n(38029);function s(e){var t=e.id,n=e.title,s=e.children,u=(0,c.U)()(t);return(0,r.BX)(o.G,{css:[l.l0.rowWithGap(8),l.l0.justify.spaceBetween,l.l0.align.center],children:[(0,r.tZ)(o.G,{css:l.l0.flex.growAndShrink(1),tag:"label",htmlFor:u,children:"string"===typeof n?(0,r.tZ)(a.xv,{multiline:!1,children:n}):n}),i.cloneElement(s,{id:u})]})}},81890:function(e,t,n){n.d(t,{Z:function(){return tt}});var r=n(74985),i=n(50959),o=n(26473),a=n(88965),l=n(46130),c=n(9970),s=n(53312),u=n(37268),d=n(54314),f=n(95862),h=n(27773),p=n(39438),m=n(16296),v=n(2272),g=n(95141),y=n(70135);function Z(e){var t=e.context,n=e.text,o=void 0===n?"Activate":n,a=(0,v.Z)(i.useState(!1),2),l=a[0],c=a[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.zx,{text:o,colorway:"primary",onClick:function(){return c(!0)}}),(0,r.tZ)(y.Z,{context:t,isOpen:l,onRequestClose:function(){return c(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var b,w,x=n(57389),C=n(51631),k=n(20970);!function(e){e.None="None",e.Activate="Activate",e.Activated="Activated",e.TrialOngoing="TrialOngoing",e.TrialExpired="TrialExpired"}(b||(b={}));var S=(w={},(0,x.Z)(w,C.e4.Activate,b.Activate),(0,x.Z)(w,C.e4.Activated,b.Activated),(0,x.Z)(w,C.e4.TrialOngoing,b.TrialOngoing),(0,x.Z)(w,C.e4.TrialExpired,b.TrialExpired),w);var E=n(10414),T=n(70232),R=n(66656),D=n(63723),I=n(39995),_=n(9434),B=n(61623),G=n(59989),P=n(98416),A=n(72006),N=n(43119),U=n(71440),L=n(24635);function O(){var e=(0,N.Z)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userSubscriptionType\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return O=function(){return e},e}var X={},M=(0,U.Ps)(O());var F=n(90602),W=n(46550),H=n(17436),V=Array.from(P.vw,(function(e){return{title:e,value:e}})),z={titleContainer:[a.l0.rowWithGap(8),a.l0.align.center],upgradeRow:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.justify.spaceBetween]};function j(){var e,t,n,i=(0,D.P5)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),l=(0,D.P5)({controlName:"flag-gw-charizard"}),u=function(e){var t=(0,A.Z)({},X,e);return L.a(M,t)}().data,f=(null===u||void 0===u||null===(e=u.currentUser)||void 0===e?void 0:e.userSubscriptionType)===C.HP.HackerPro,h=l||"UserPowerUpsTypes"===(null===u||void 0===u||null===(t=u.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&u.currentUser.userPowerUpsByType.ghostwriter.active,m=(0,I.Z)(),v=m.preferences,g=m.update,y=(0,R.Z)().engine,b={value:null,title:"default"},w=function(e,t){g((0,x.Z)({},e,t)),(0,_.j)(_.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:t})},k=l?"AI":"Ghostwriter",S=(0,H.Q)();return h?(0,r.BX)(o.G,{css:a.l0.colWithGap(12),children:[(0,r.tZ)(p.$,{id:"codeSuggestionToggle",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.G,{css:z.titleContainer,children:(0,r.tZ)(s.xv,{multiline:!1,children:"AI code completion"})}),(0,r.BX)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:["Code completion provides inline \u201cghost text\u201d suggestions while you code.",(0,r.tZ)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(W.r,{"aria-label":"Code complete",isSelected:v.codeSuggestion,onChange:function(e){w("codeSuggestion",e)}})})}),f?null:(0,r.BX)(o.G,{css:z.upgradeRow,children:[(0,r.tZ)(s.xv,{children:"Upgrade for full access to Replit AI"}),(0,r.tZ)(Z,{text:"Upgrade to ".concat(S),context:"workspace_settings_pane"})]}),i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(F.R,{}),(0,r.tZ)(p.$,{id:"completeCodeEngine",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:[(0,r.BX)(s.xv,{multiline:!1,children:[k," code completion engine"]}),(0,r.tZ)(B.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(G.Z,{})})]}),(0,r.BX)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:["Current applied engine: ",y]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(d.P,{css:[a.l0.minWidth(184)],initialSelectedItem:null!==(n=V.find((function(e){return e.value===v.completeCodeEngine})))&&void 0!==n?n:b,onChange:function(e){return w("completeCodeEngine",null===e||void 0===e?void 0:e.value)},items:[b].concat((0,c.Z)(V))})})})]}):null]}):null}var q={titleContainer:[a.l0.rowWithGap(8),a.l0.align.center],surface:[a.l0.p(8),a.l0.colWithGap(8),a.l0.borderRadius(8),a.l0.align.start]};function $(){var e=function(){var e,t,n=(0,k.JC)(),r=n.data;if(n.loading)return{loading:!0};if("UnauthorizedError"===(null===r||void 0===r||null===(e=r.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename))return{cta:b.None,loading:!1};if("UserPowerUpsTypes"===(null===r||void 0===r||null===(t=r.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)){var i=r.currentUser.userPowerUpsByType.ghostwriter,o=i.CTA,a=i.timeTrialExpiry;if(null!=o){var l=S[o];if(("TrialOngoing"===l||"TrialExpired"===l)&&a)return{cta:l,trialExpiryDate:new Date(a),loading:!1};if("Activate"===l||"Activated"===l)return{cta:l,loading:!1}}}return{cta:b.None,loading:!1}}(),t=e.cta,n=e.loading,i=(0,l.rv)(),c=(0,D.P5)({controlName:"flag-gw-charizard"});if(n)return(0,r.tZ)(p.$,{id:"ghostwriter",title:"Ghostwriter",children:(0,r.tZ)(h.Z,{})});if(c&&!i)return(0,r.tZ)(j,{});switch(t){case b.None:return null;case b.Activated:case b.TrialOngoing:return(0,r.tZ)(j,{});case b.TrialExpired:case b.Activate:return i?null:(0,r.tZ)(p.$,{id:"ghostwriter",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:q.titleContainer,children:[(0,r.tZ)(s.xv,{multiline:!1,children:"Ghostwriter"}),(0,r.tZ)(E.Z,{context:"workspace_settings_pane",powerUp:"ghostwriter"})]}),(0,r.tZ)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],multiline:!1,children:"Replit's AI pair programmer can complete, generate, explain, and edit code."})]}),children:(0,r.tZ)(Z,{context:"workspace_settings_pane"})});default:(0,T.Z)(t)}}var Y=n(83389),K=n(509),Q=n(20685),J=n(67493),ee=n(44385),te=n(64918),ne=Array.from(te.ce,(function(e){return{title:e,value:e}})),re=Array.from((0,c.Z)(Object.entries(J.fT)).concat([["custom",""]]),(function(e){return{title:e[0],value:e[1]}}));function ie(){var e,t,n,l=(0,D.P5)({controlName:"flag-ghostwriter-chat-engine-override",logFlagToAnalytics:!1}),u=(0,K.yz)().data,h=(null===u||void 0===u||null===(e=u.currentUser)||void 0===e?void 0:e.isStaff)||!1,v=(0,I.Z)(),g=v.preferences,y=v.update,Z=(0,Y.v)(),b={value:null,title:"default"},w=(0,J.Th)(),C=(0,i.useState)(!Object.values(J.fT).includes(w)),k=C[0],S=C[1],E=(0,i.useState)(""),T=E[0],R=E[1],P=function(e,t){y((0,x.Z)({},e,t)),(0,_.j)(_.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:t})};return(0,r.BX)(r.HY,{children:[l?(0,r.BX)(r.HY,{children:[(0,r.tZ)(F.R,{}),(0,r.tZ)(p.$,{id:"ghostwriterChatEngine",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:[(0,r.BX)(s.xv,{multiline:!1,children:["AI"," chat engine"]}),(0,r.tZ)(B.u,{tooltip:'You are seeing this functionality because you have special permissions. If set, this preference overrides "Use Advanced model" preference.',children:(0,r.tZ)(G.Z,{})})]}),(0,r.BX)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:["Current applied engine: ",Z]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(d.P,{css:[a.l0.minWidth(184)],initialSelectedItem:null!==(t=ne.find((function(e){return e.value===g.chatEngine})))&&void 0!==t?t:b,onChange:function(e){return P("chatEngine",null===e||void 0===e?void 0:e.value)},items:[b].concat((0,c.Z)(ne))})})})]}):null,(0,r.BX)(r.HY,{children:[(0,r.tZ)(F.R,{}),(0,r.tZ)(p.$,{id:"ghostwriterChatUseAdvancedModel",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:(0,r.BX)(s.xv,{multiline:!1,children:["AI"," advanced model"]})}),(0,r.tZ)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Advanced models require a lot of power and have usage limits. They're most useful for tasks that are ambiguous or require creativity."})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(W.r,{"aria-label":"Use Advanced model",isSelected:g.ghostwriterUseAdvancedModel,onChange:function(e){(0,_.j)(_.U3.GHOSTWRITER_CHAT_MODEL_CHANGED,{source:"settingsPane",model:e?"advanced":"default"}),P("ghostwriterUseAdvancedModel",e)}})})})]}),h?(0,r.BX)(r.HY,{children:[(0,r.tZ)(F.R,{}),(0,r.tZ)(p.$,{id:"ghostwriterChatService",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:(0,r.tZ)(s.xv,{multiline:!1,children:"Ghostwriter Chat Service V2 "})}),(0,r.BX)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:["Current endpoint: ",w]})]}),children:(0,r.BX)(o.G,{css:a.l0.colWithGap(12),children:[(0,r.tZ)(d.P,{css:[a.l0.minWidth(184)],initialSelectedItem:null!==(n=re.find((function(e){return e.value===g.ghostwriterChatServiceEnvironment})))&&void 0!==n?n:g.ghostwriterChatServiceEnvironment?re[re.length-1]:re[0],onChange:function(e){"custom"!==(null===e||void 0===e?void 0:e.title)?(P("ghostwriterChatServiceEnvironment",null===e||void 0===e?void 0:e.value),S(!1)):S(!0)},items:re}),k?(0,r.BX)(o.G,{css:a.l0.rowWithGap(4),children:[(0,r.tZ)(Q.II,{value:T,onChange:function(e){R(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&P("ghostwriterChatServiceEnvironment",T)}}),(0,r.tZ)(m.hU,{alt:"Update custom url",onClick:function(){return P("ghostwriterChatServiceEnvironment",T)},children:g.ghostwriterChatServiceEnvironment!==T?(0,r.tZ)(f.Z,{}):(0,r.tZ)(ee.Z,{})})]}):null]})})]}):null]})}var oe=n(69997),ae=n(95924),le=n(88149),ce=n(90171),se=n(61025),ue=n(22595),de=n(3861);function fe(e){return e.slice().sort((function(e,t){return e-t}))}var he=(0,se.X)({ruler:[a.l0.py(4),a.l0.px(8),a.l0.rowWithGap(4),a.l0.align.center,a.l0.borderRadius(8)],remove:[a.l0.borderRadius(4)],title:[a.l0.pr(8),a.l0.overflow("visible"),a.l0.flex.shrink(0)],body:[a.l0.flex.row,a.l0.flex.wrapReverse,a.l0.align.start,a.l0.justify.end,a.l0.flex.growAndShrink(1),{gap:a.TV.space4}],list:[a.l0.flex.row,a.l0.flex.wrap,a.l0.flex.growAndShrink(1),a.l0.align.end,a.l0.justify.end,{gap:a.TV.space4}],add:[a.l0.rowWithGap(4),a.l0.align.center]});function pe(e){var t=e.pos,n=e.onRemove;return(0,r.BX)(u.Tg,{css:he.ruler,elevated:!0,children:[(0,r.tZ)(s.xv,{multiline:!1,children:t}),(0,r.tZ)(m.hU,{css:he.remove,alt:"Remove ruler",onClick:n,children:(0,r.tZ)(ue.Z,{})})]})}function me(){var e=(0,i.useState)(!1),t=e[0],n=e[1],a=(0,i.useState)(80),l=a[0],u=a[1],d=(0,i.useRef)(null),f=(0,i.useRef)(null),h=-1===l,m=l>=0&&l<=1e3,v=(0,I.Z)(),y=v.preferences,Z=v.update,b=fe(y.rulers);return(0,r.tZ)(p.$,{id:"rulers",title:(0,r.tZ)(s.xv,{css:he.title,multiline:!1,children:"Rulers"}),children:(0,r.BX)(o.G,{css:he.body,children:[(0,r.tZ)(o.G,{css:he.list,children:b.map((function(e,t){return(0,r.tZ)(pe,{pos:e,onRemove:function(){Z({rulers:b.filter((function(e,n){return n!==t}))})}},t)}))}),t?(0,r.BX)(o.G,{css:he.add,children:[(0,r.tZ)(Q.II,{ref:d,type:"number",style:{width:h?"6ch":l.toString().length+5.5+"ch"},value:l>=0?l.toString():"",onChange:function(e){if(""===e.target.value)u(-1);else{var t=parseInt(e.target.value,10);isNaN(t)||u(t)}},onKeyDown:function(e){"Escape"===e.key?(u(80),n(!1)):"Enter"===e.key&&m&&(Z({rulers:fe((0,c.Z)(b).concat([l]))}),n(!1),u(80))},onBlur:function(e){e.relatedTarget!==f.current&&(n(!1),u(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.tZ)(g.zx,{ref:f,text:"Accept",colorway:"primary",iconLeft:(0,r.tZ)(ee.Z,{}),disabled:!m,onClick:function(){m&&(Z({rulers:fe((0,c.Z)(b).concat([l]))}),n(!1),u(80))},onBlur:function(e){e.relatedTarget!==d.current&&(n(!1),u(80))}})]}):(0,r.tZ)(r.HY,{children:b.length>=10?null:(0,r.tZ)(g.zx,{text:"Add Ruler",iconLeft:(0,r.tZ)(de.Z,{}),onClick:function(){return n(!0)}})})]})})}var ve=(0,se.X)({container:[a.l0.flex.row,a.l0.justify.spaceBetween,a.l0.align.start],title:[a.l0.flex.growAndShrink(1)],body:[a.l0.colWithGap(12)],switch:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.justify.end]});function ge(){var e=(0,I.Z)(),t=e.preferences,n=e.update;return(0,r.BX)(o.G,{css:ve.container,children:[(0,r.BX)(o.G,{css:ve.title,children:[(0,r.tZ)(s.xv,{children:"Show whitespace"}),(0,r.tZ)(s.xv,{multiline:!0,variant:"small",css:[a.l0.color.foregroundDimmest],children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,r.BX)(o.G,{css:ve.body,children:[(0,r.BX)(o.G,{css:ve.switch,tag:"label",children:[(0,r.tZ)(s.xv,{variant:"small",children:"Leading"}),(0,r.tZ)(W.r,{"aria-label":"Show leading whitespace",isSelected:t.showLeadingWhitespace,onChange:function(e){n({showLeadingWhitespace:e})}})]}),(0,r.BX)(o.G,{css:ve.switch,tag:"label",children:[(0,r.tZ)(s.xv,{variant:"small",children:"Enclosed"}),(0,r.tZ)(W.r,{css:[a.l0.flex.rowReverse],"aria-label":"Show enclosed whitespace",isSelected:t.showEnclosedWhitespace,onChange:function(e){n({showEnclosedWhitespace:e})}})]}),(0,r.BX)(o.G,{css:ve.switch,tag:"label",children:[(0,r.tZ)(s.xv,{variant:"small",children:"Trailing"}),(0,r.tZ)(W.r,{"aria-label":"Show trailing whitespace",isSelected:t.showTrailingWhitespace,onChange:function(e){n({showTrailingWhitespace:e})}})]}),(0,r.BX)(o.G,{css:ve.switch,tag:"label",children:[(0,r.tZ)(s.xv,{variant:"small",children:"Selected"}),(0,r.tZ)(W.r,{"aria-label":"Show selected whitespace",isSelected:t.showSelectedWhitespace,onChange:function(e){n({showSelectedWhitespace:e})}})]})]})]})}var ye=n(57326),Ze=n(55418),be=n(89835);function we(e){var t=e.onBeforePreferencesUpdate,n=e.hideLayoutControl,i=e.className,v=e.resetLayout,g=(0,I.Z)(),y=g.preferences,Z=g.update,b=(0,l.Vg)((0,ce.useRouter)()),w=(0,l.T3)(),x=(0,ye.cR)(),C=(0,D.P5)({controlName:"flag-editor-rulers",logFlagToAnalytics:!1}),k=(0,D.P5)({controlName:"flag-editor-visible-whitespace",logFlagToAnalytics:!1}),S=(0,D.P5)({controlName:"flag-chat-audio-notification"}),E=function(e){t&&t(e),Object.keys(e).forEach((function(t){var n=e[t];(0,_.j)(_.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})})),Z(e)};if(!y)return null;var T=[{value:"side-by-side",title:"side-by-side"},{value:"stacked",title:"stacked"}],R=[{value:10,title:"tiny"},{value:12,title:"small"},{value:14,title:"normal"},{value:18,title:"large"},{value:24,title:"huge"}],B=[{value:"default",title:"default"},{value:"emacs",title:"emacs"},{value:"vim",title:"vim"}],G=[{value:"none",title:"none"},{value:"soft",title:"soft wrap"}],P=[{value:"none",title:"none"},{value:"blocks",title:"blocks"},{value:"characters",title:"characters"}],A=["cmdOrCtrlKey","altKey"].map((function(e){return{value:e,title:le.U[e]}}));return(0,r.BX)(u.Tg,{className:i,background:"default",css:[a.l0.p(16),a.l0.colWithGap(12)],children:[n?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.$,{id:"layout",title:"Default layout",children:(0,r.BX)(o.G,{css:[a.l0.align.center,a.l0.rowWithGap(8)],children:[v?(0,r.tZ)(m.hU,{alt:"Reset layout",onClick:function(){v.reset()},children:v.reseting?(0,r.tZ)(h.Z,{}):(0,r.tZ)(f.Z,{})}):null,(0,r.tZ)(d.P,{initialSelectedItem:T.find((function(e){return y.isLayoutStacked?"stacked"===e.value:"side-by-side"===e.value})),onChange:function(e){var t="stacked"===(null===e||void 0===e?void 0:e.value);E({isLayoutStacked:t})},items:(0,c.Z)(T)})]})}),(0,r.tZ)(F.R,{})]}),(0,r.tZ)(p.$,{id:"fontSize",title:"Font size",children:(0,r.tZ)(d.P,{initialSelectedItem:R.find((function(e){return e.value===y.fontSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:14;E({fontSize:t})},items:(0,c.Z)(R)})}),(0,r.tZ)(F.R,{}),(0,r.tZ)(be.ZP,{preferences:y,update:E}),(0,r.tZ)(F.R,{}),(0,r.tZ)(p.$,{id:"wrapping",title:"Wrapping",children:(0,r.tZ)(d.P,{initialSelectedItem:G.find((function(e){return e.value===(y.wrapping?"soft":"none")})),onChange:function(e){var t="soft"===(null===e||void 0===e?void 0:e.value);E({wrapping:t})},items:(0,c.Z)(G)})}),(0,r.tZ)(F.R,{}),w?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.$,{id:"minimap",title:"Minimap",children:(0,r.tZ)(d.P,{initialSelectedItem:P.find((function(e){return e.value===y.minimapDisplay})),onChange:function(e){E({minimapDisplay:e.value})},items:(0,c.Z)(P)})}),(0,r.tZ)(F.R,{})]}),C?(0,r.BX)(r.HY,{children:[(0,r.tZ)(me,{}),(0,r.tZ)(F.R,{})]}):null,(0,r.tZ)(p.$,{id:"keybinds",title:"Keybinds",children:(0,r.tZ)(d.P,{initialSelectedItem:B.find((function(e){return["vim","emacs"].includes(e.value)?e.value===y.keyboardHandler:"default"===e.value&&!y.keyboardHandler})),onChange:function(e){var t=["vim","emacs"].includes(e.value)?e.value:null;E({keyboardHandler:t})},items:(0,c.Z)(B),dataCy:"keybinds"})}),(0,r.tZ)(F.R,{}),(0,r.tZ)(p.$,{id:"multiselectModifier",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(s.xv,{multiline:!1,children:"Multiselect modifier key"}),(0,r.tZ)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Modifier key for selecting multiple items in the filetree."})]}),children:(0,r.tZ)(d.P,{initialSelectedItem:A.find((function(e){return e.value===y.multiselectModifierKey})),onChange:function(e){E({multiselectModifierKey:e.value})},items:(0,c.Z)(A)})}),(0,r.tZ)(F.R,{}),(0,r.tZ)($,{}),(0,r.tZ)(ie,{}),(0,r.tZ)(F.R,{}),(0,r.tZ)(p.$,{id:"codeIntelligence",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(s.xv,{multiline:!1,children:"Code intelligence"}),(0,r.tZ)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Code intelligence gives you autocomplete, syntax highlighting, and hints as you type."})]}),children:(0,r.tZ)(W.r,{"aria-label":"Code Intelligence",isSelected:y.codeIntelligence,onChange:function(e){E({codeIntelligence:e})}})}),(0,r.tZ)(F.R,{}),k?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ge,{}),(0,r.tZ)(F.R,{})]}):null,(0,r.tZ)(p.$,{id:"accessibleTerminal",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(s.xv,{multiline:!1,children:"Accessible terminal output"}),(0,r.tZ)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Enable this setting to use a screen reader. Warning: this can affect performance."})]}),children:(0,r.tZ)(W.r,{"aria-label":"Accessible terminal output",isSelected:y.accessibleTerminal,onChange:function(e){E({accessibleTerminal:e})}})}),(0,r.tZ)(F.R,{}),(0,r.tZ)(p.$,{id:"webviewAutoOpenOnPortOpened",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(s.xv,{multiline:!1,children:x?"Automatic webview (unavailable in this Repl)":"Automatic webview"}),(0,r.tZ)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],multiline:!1,children:"Open a webview automatically when a port is open"}),x?(0,r.tZ)(o.G,{css:[a.l0.pt(8),a.l0.maxWidth("calc(100% - 12px)")],children:(0,r.tZ)(Ze.E,{colorway:"orange",text:'This preference is unavailable in Extension Repls. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,r.tZ)(W.r,{"aria-label":"Automatic Webview",isSelected:y.webviewAutoOpenOnPortOpened,isDisabled:x,onChange:function(e){E({webviewAutoOpenOnPortOpened:e})}})}),b?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(F.R,{}),(0,r.tZ)(p.$,{id:"theme",title:"Theme",children:(0,r.tZ)(oe.Z,{css:[a.l0.minWidth(184),a.l0.backgroundColor.backgroundHigher],context:ae.HY.WorkspacePreferencesPane})})]}),S?(0,r.BX)(r.HY,{children:[(0,r.tZ)(F.R,{}),(0,r.tZ)(p.$,{id:"chat-audio",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(s.xv,{multiline:!1,children:"Chat Audio Notifications"}),(0,r.tZ)(s.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Enables playing a sound when you receive a new chat message."})]}),children:(0,r.tZ)(W.r,{"aria-label":"Chat Audio Notifications",isSelected:y.chatAudioNotification,onChange:function(e){E({chatAudioNotification:e})}})})]}):null]})}var xe=n(38029),Ce=n(72123),ke=n(6108),Se=n(54008),Ee=n(62385),Te=n(86890),Re=n(46861),De=n(18988),Ie=n(79824),_e=n(28863),Be=n(61377),Ge=n(22245),Pe=n(52205),Ae=n(6190),Ne=n(66777),Ue=n(85919),Le=n(43312),Oe=n(44916);function Xe(e){var t=function(){r.current&&clearTimeout(r.current),o.current=[]},n=function(n){e({type:"success",shortcut:n.length>1?[n[0],n[1]]:n[0]}),t()},r=(0,i.useRef)(null),o=(0,i.useRef)([]);return{onKeyDown:function(t){var i=r.current,a=o.current;t.preventDefault(),t.stopPropagation(),i&&clearTimeout(i);var l=(0,_e.lc)(t);if(l)if((0,_e.ZG)(l))e({type:"update",recorded:a.length?[a[0],l]:[l]});else if(a.length>0&&"Enter"===l)n(a);else{a.push(l),e({type:"update",recorded:a});var c=2===a.length?0:600;r.current=setTimeout((function(){return n(a)}),c)}},startRecording:function(){t(),e({type:"start"})},stopRecording:function(){t(),e({type:"stop"})}}}var Me=(0,se.X)({root:[a.l0.colWithGap(8)],row:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.minHeight(28)],left:[a.l0.colWithGap(2),a.l0.flex.grow(0),a.l0.flex.shrink(1)],right:[a.l0.rowWithGap(4),a.l0.align.center,a.l0.justify.end,a.l0.position.relative,a.l0.flex.grow(1),a.l0.flex.shrink(0)],recordingRow:[a.l0.flex.column,a.l0.align.center,a.l0.justify.end,a.l0.pr(24)],recordingRowInner:[a.l0.rowWithGap(8),a.l0.align.center],recordingRowKeys:[a.l0.position.relative],recordingRowHint:[a.l0.position.absolute,a.l0.top(20),a.l0.right(0),{fontStyle:"italic"}],recordingRowPlaceholder:[a.l0.display.flex,a.l0.align.baseline,a.l0.rowWithGap(4),{fontStyle:"italic"}],keys:[a.l0.display.inlineFlex,a.l0.rowWithGap(12)],secondaryText:[a.l0.display.flex,a.l0.flex.row,a.l0.align.center,a.l0.rowWithGap(4)],secondaryTextId:[a.l0.flex.grow(1),a.l0.flex.shrink(0)],secondaryTextDescription:[a.l0.flex.grow(0),a.l0.flex.shrink(1),a.l0.color.foregroundDimmest],buttons:[a.l0.pl(8),a.l0.display.flex,a.l0.flex.row]}),Fe=[a.l0.reset.button,ke.gU.listItem,a.l0.height(24),a.l0.width(24),a.l0.p(2)],We=(0,se.X)({root:[a.l0.rowWithGap(8),a.l0.align.center],recordingRow:[a.l0.rowWithGap(4),a.l0.align.center]});function He(e){var t,n,a,l,c=e.command,u=e.filter,d=(0,Ce.r3)(),f=(0,Ce.wU)(),h=(0,Ce.V_)(c.id),p=(0,i.useState)(null),v=p[0],y=p[1],Z=(0,i.useState)(null),b=Z[0],w=Z[1],x=Xe((function(e){switch(e.type){case"start":return w({recorded:[]}),void y(null);case"stop":return w(null),void y(null);case"update":return w({recorded:e.recorded}),void y(null);case"success":var t=(0,_e.SG)(e.shortcut);if(!t)return w(null),void y(null);var n=d(c.id,t);return n?(w(null),void y('This shortcut conflicts with "'.concat(n.conflict.name,'"'))):void w(null);case"error":var r;return void w((function(t){return{error:e.message,recorded:null!==(r=null===t||void 0===t?void 0:t.recorded)&&void 0!==r?r:[]}}))}})),C=x.stopRecording,k=x.startRecording,S=x.onKeyDown,E=(0,Re.Z)((function(){return C()}),[]),T=Boolean(b);$e(T);var R=null!==(l=null===b||void 0===b?void 0:b.recorded)&&void 0!==l?l:[],D=null===b||void 0===b?void 0:b.error,I=u.length>0,_=null===(t=Ge.Z.match(u,c.name))||void 0===t?void 0:t.ranges,B=null===(n=Ge.Z.match(u,c.id))||void 0===n?void 0:n.ranges,G=(null===c||void 0===c?void 0:c.description)?null===(a=Ge.Z.match(u,c.description))||void 0===a?void 0:a.ranges:void 0,P=(0,Ue.Z)((function(){return u.replaceAll('"',"").split("-").map((function(e){return e.toLowerCase()}))}),[u]),A=[{label:"Remove",key:"remove"}];h&&h!==c.shortcut&&A.push({label:"Reset",key:"reset"});var N,U=(0,Ue.Z)((function(){return function(e){switch(e){case"remove":f(c.id);break;case"reset":var t=d(c.id,h);t&&y("".concat(h,' conflicts with "').concat(t.conflict.name,'"'))}}}),[c.id,h,d,f]);return(0,r.BX)(o.G,{css:Me.root,children:[(0,r.BX)(o.G,{css:Me.row,children:[(0,r.BX)(o.G,{css:Me.left,children:[(0,r.tZ)(Ae.x,{text:c.name,highlight:_,dimmed:I}),(0,r.BX)(s.xv,{variant:"small",css:Me.secondaryText,multiline:!1,children:[I?(0,r.tZ)(Ae.x,{css:Me.secondaryTextId,text:c.id,highlight:B,dimmed:I}):null,c.description?(0,r.BX)(r.HY,{children:[I?(0,r.tZ)(s.xv,{color:"dimmest",multiline:!1,children:"\u2022"}):null,(0,r.tZ)(Ae.x,{css:Me.secondaryTextDescription,text:c.description,highlight:G,dimmed:I})]}):null]})]}),(0,r.BX)(o.G,{innerRef:T?E:void 0,css:Me.right,children:[T?(0,r.tZ)(De.MT,{autoFocus:!0,restoreFocus:!0,children:(0,r.tZ)("input",{onKeyDown:S,css:{opacity:0,width:1}})}):null,c.shortcut&&!T?(0,r.tZ)(Be.bM,{small:!0,keyCombo:c.shortcut,match:P}):null,c.shortcut||T?null:(0,r.tZ)(g.zx,{size:"small",variant:"outlined",iconLeft:(0,r.tZ)(de.Z,{}),text:"Add shortcut",onClick:function(){return k()}}),T?(0,r.tZ)(o.G,{css:Me.recordingRow,children:(0,r.BX)(o.G,{css:Me.recordingRowInner,children:[(0,r.tZ)(o.G,{css:Me.recordingRowKeys,children:R.length>0?(0,r.tZ)(o.G,{css:[Me.keys],children:R.map((function(e,t){return(0,r.tZ)(Be.bM,{small:!0,keyCombo:e},"".concat(e,"-").concat(t))}))}):(0,r.tZ)(s.xv,{multiline:!1,color:"dimmest",css:Me.recordingRowPlaceholder,children:"Recording..."})}),(0,r.tZ)(m.hU,{alt:"Stop",onClick:function(){return C()},children:(0,r.tZ)(Qe,{})})]})}):null,c.shortcut&&!T?(0,r.BX)(o.G,{css:Me.buttons,children:[(0,r.tZ)(m.hU,{alt:"Change",onClick:function(){return k()},children:(0,r.tZ)(Ee.Z,{})}),(0,r.tZ)(Se.ZE,{"aria-label":"More",cssProps:Fe,items:A,icon:(0,r.tZ)(Ne.Z,{size:12}),placement:"bottom-end",onAction:U,children:A.map((function(e){return(0,r.tZ)(Se.ck,{textValue:e.label,children:(0,r.tZ)(s.xv,{multiline:!1,children:e.label})},e.key)}))})]}):null]})]}),D?(0,r.tZ)(Ze.E,{icon:(0,r.tZ)(Ie.Z,{}),colorway:"warning",text:D,closable:!0,closeAction:function(){return w((function(e){return{recorded:null!==(N=null===e||void 0===e?void 0:e.recorded)&&void 0!==N?N:[]}}))}}):null,v?(0,r.tZ)(Ze.E,{icon:(0,r.tZ)(Ie.Z,{}),colorway:"warning",text:v,closable:!0,closeAction:function(){return y(null)}}):null]})}function Ve(e){var t=e.flat();return t.length>1?t.map((function(e){return Ve([e])})).join(" "):(0,_e.QR)(t[0]).map((function(e){return'"'.concat(e,'"')})).join("-").replaceAll(" ","space")}var ze=(0,se.X)({root:[a.l0.colWithGap(8),a.l0.p(0)],surface:[a.l0.pt(8),a.l0.borderRadius(8),a.l0.colWithGap(12)]});function je(e){var t=function(t){l(t),i.startTransition((function(){return e.onSearch(t)}))},n=(0,i.useState)(""),a=n[0],l=n[1],c=(0,i.useRef)(null),u=(0,i.useState)(!1),d=u[0],f=u[1];$e(d);var h=Xe((function(e){switch(e.type){case"start":var n;return f(!0),t(""),void(null===c||void 0===c||null===(n=c.current)||void 0===n||n.focus());case"stop":case"error":var r,i;return f(!1),null===c||void 0===c||null===(r=c.current)||void 0===r||r.focus(),void(null===c||void 0===c||null===(i=c.current)||void 0===i||i.select());case"success":return void t(Ve([e.shortcut]));case"update":return void t(Ve(e.recorded))}})),p=h.stopRecording,v=h.startRecording,g=h.onKeyDown;return(0,r.BX)(o.G,{css:We.root,children:[(0,r.tZ)(De.MT,{children:(0,r.tZ)(Q.II,{ref:c,placeholder:d?"Recording keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:d?p:void 0,onChange:function(e){t(e.currentTarget.value)},onKeyDown:d?function(e){"Escape"===e.key?p():g(e)}:void 0,value:a})}),(0,r.tZ)(o.G,{css:We.recordingRow,children:d?(0,r.BX)(r.HY,{children:[(0,r.tZ)(s.xv,{color:"dimmest",css:[{fontStyle:"italic"}],multiline:!1,children:"Recording..."}),(0,r.tZ)(m.hU,{alt:"Stop Recording",onClick:p,children:(0,r.tZ)(Qe,{})})]}):(0,r.tZ)(m.hU,{alt:"Record Keys",onClick:v,children:(0,r.tZ)(Pe.Z,{})})}),(0,r.tZ)(m.hU,{alt:"Clear Input",disabled:0===a.length,onClick:function(){var e;l(""),null===c||void 0===c||null===(e=c.current)||void 0===e||e.focus()},children:(0,r.tZ)(ue.Z,{})})]})}function qe(){var e=(0,i.useState)(""),t=e[0],n=e[1],a=(0,D.P5)({controlName:"flag-editor-selection-controls"}),l=(0,Ce.xF)(),s=(0,Ue.Z)((function(){return(0,c.Z)(l.values()).filter((function(e){return!(e.id===Oe.x.id&&!a)}))}),[a,l]),d=i.useMemo((function(){return Ge.Z.filter(t,s,{extract:function(e){var t="".concat(e.name," ").concat(e.id);return e.description&&(t+=" ".concat(e.description)),e.shortcut&&(t+=" ".concat(Ve([e.shortcut]))),t}})}),[t,s]);return(0,r.BX)(o.G,{css:ze.root,children:[(0,r.tZ)(je,{onSearch:n}),d.length>0?(0,r.tZ)(u.Tg,{css:ze.surface,children:d.map((function(e,n){return(0,r.BX)(i.Fragment,{children:[n>0?(0,r.tZ)(u.Tg,{elevated:!0,style:{height:1}}):null,(0,r.tZ)(He,{command:e.original,filter:t})]},e.original.id)}))}):null]})}function $e(e){var t="You have unsaved changes";(0,i.useEffect)((function(){var n=function(e){return e.preventDefault(),e.returnValue=t,t};if(e)return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e])}var Ye=(0,Le.F4)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),Ke=(0,se.X)({background:[{animationName:Ye,animation:"".concat(Ye," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(a.TV.redStronger)},a.l0.height(11),a.l0.width(11),a.l0.borderRadius("full"),a.l0.position.absolute],container:[a.l0.position.relative,a.l0.align.center,a.l0.justify.center],icon:[{zIndex:1}]});function Qe(){return(0,r.BX)(o.G,{css:Ke.container,children:[(0,r.tZ)(Te.Z,{css:Ke.icon,color:a.TV.redStronger}),(0,r.tZ)(o.G,{css:Ke.background})]})}function Je(){var e=(0,xe.U)()("keyboard_shortcuts");return(0,r.BX)(u.Tg,{background:"default",css:[a.l0.px(16),a.l0.pb(16),a.l0.colWithGap(12)],children:[(0,r.tZ)(o.G,{tag:"label",htmlFor:e}),(0,r.tZ)(qe,{})]})}var et=n(64309);function tt(e){var t=e.hideLayoutControl,n=e.resetLayout,i=(0,l.T3)();return(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:[a.l0.flex.column,a.l0.justify.center,a.l0.px(16),a.l0.py(8)],children:[(0,r.tZ)(s.h4,{variant:"subheadBig",level:3,children:"User Settings"}),(0,r.tZ)(s.xv,{variant:"small",css:[{fontStyle:"italic"},a.l0.color.foregroundDimmer],children:"The following settings apply to your account and will be used across all your Repls."})]}),i?(0,r.tZ)(we,{hideLayoutControl:t,resetLayout:n}):(0,r.tZ)(o.G,{children:(0,r.BX)(et.mQ,{css:[{width:"100%"}],children:[(0,r.BX)(et.td,{withDividers:!1,css:[{"[aria-selected=true]":[a.l0.fontWeight.medium]}],children:[(0,r.tZ)(et.OK,{css:[a.l0.py(8),a.l0.px(16)],children:"Editor preferences"}),(0,r.tZ)(et.OK,{css:[a.l0.py(8),a.l0.px(16)],children:"Keyboard shortcuts"})]}),(0,r.BX)(et.nP,{children:[(0,r.tZ)(et.x4,{children:(0,r.tZ)(we,{resetLayout:n})}),(0,r.tZ)(et.x4,{children:(0,r.tZ)(Je,{})})]})]})})]})}},79028:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(74985),i=n(61025),o=n(13e3),a=n(68912),l=n(3689),c=n(79824),s=n(88965),u=n(45317),d=n(7225),f=(0,i.X)({errorOuter:[s.l0.display.flex,s.l0.position.relative,s.l0.align.center],errorColor:[s.l0.color.redDefault],errorCloseIcon:[s.l0.position.absolute,s.l0.display.flex]});function h(e){var t=e.severity,n=e.size,i=void 0===n?16:n;switch(t){case d.DiagnosticSeverity.Error:return(0,r.BX)("div",{css:f.errorOuter,children:[(0,r.tZ)("div",{css:f.errorCloseIcon,style:{height:i,width:i,transform:"scale(0.75"},children:(0,r.tZ)(a.Z,{css:f.errorColor,size:i})}),(0,r.tZ)(o.Z,{css:f.errorColor,size:i})]});case d.DiagnosticSeverity.Warning:return(0,r.tZ)(c.Z,{color:u.TV.yellowStronger,size:i});case d.DiagnosticSeverity.Hint:case d.DiagnosticSeverity.Information:default:return(0,r.tZ)(l.Z,{color:u.TV.greyDefault,size:i})}}},43573:function(e,t,n){n.d(t,{BZ:function(){return D},HX:function(){return T},WM:function(){return B},ap:function(){return O},gF:function(){return A},l9:function(){return G},pr:function(){return M},vi:function(){return U},zu:function(){return _}});var r=n(72006),i=n(43119),o=n(71440),a=n(8619),l=n(97566),c=n(49233),s=n(56803),u=n(65614),d=n(48940),f=n(86080),h=n(24635),p=n(50216);function m(){var e=(0,i.Z)(["\n  fragment ReplPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      ... on PowerUpCostsType {\n        alwaysOn {\n          cycles\n          explanation\n        }\n        gpu {\n          cycles\n          explanation\n        }\n      }\n    }\n  }\n"]);return m=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    isAlwaysOn\n    isBoosted\n    hasGpu\n    lastPublishedAt\n    publishedAs\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    currentUserPermissions {\n      containerAttach\n      changeIconUrl\n      changeTemplateLabel\n      changeTitle\n      changeDescription\n      changePrivacy\n      delete\n      changeAlwaysOn\n      publish\n      fork\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...PowerUpActionsMultiBoostToggle\n    ...ReplPowerUpCosts\n    ...BulkDeleteConfirmationModalRepl\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n    currentUser {\n      id\n      canAlwaysOn\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,i.Z)(["\n  query CurrentUserStates {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n      }\n    }\n  }\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query ReplPowerUpStatus {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userPowerUpsByType {\n          ... on UserPowerUpsTypes {\n            privateRepls {\n              active\n              cost {\n                cycles\n                explanation\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}function b(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return x=function(){return e},e}function C(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetAlwaysOn(\n    $replId: ID!\n    $enabled: Boolean!\n  ) {\n    setAlwaysOn(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetGpu($replId: ID!, $enabled: Boolean!) {\n    setGpu(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return k=function(){return e},e}var S={},E=(0,o.Ps)(m()),T=(0,o.Ps)(v(),a._,l.s,c.sY,s.wd,u.qo,E,d.d),R=(0,o.Ps)(g(),T);function D(e){var t=(0,r.Z)({},S,e);return h.a(R,t)}var I=(0,o.Ps)(y());function _(e){var t=(0,r.Z)({},S,e);return h.a(I,t)}var B=(0,o.Ps)(Z());function G(e){var t=(0,r.Z)({},S,e);return h.a(B,t)}var P=(0,o.Ps)(b(),f.FW);function A(e){var t=(0,r.Z)({},S,e);return p.D(P,t)}var N=(0,o.Ps)(w(),T);function U(e){var t=(0,r.Z)({},S,e);return p.D(N,t)}var L=(0,o.Ps)(x());function O(e){var t=(0,r.Z)({},S,e);return p.D(L,t)}var X=(0,o.Ps)(C(),T,E);function M(e){var t=(0,r.Z)({},S,e);return p.D(X,t)}k()},25959:function(e,t,n){n.d(t,{Z:function(){return ut}});var r=n(57135),i=n(72006),o=n(4405),a=n(2272),l=n(96583),c=n(74985),s=n(48306),u=n.n(s),d=n(43182),f=n(50959),h=n(2373),p=n(52060),m=n(42967),v=n(60951),g=n(78572),y=n(12901),Z=n(55904),b=n(51467),w=n(25404),x=n(34547),C=n(5629),k=n(1200),S=n(9434),E=n(8715),T=n(59706),R=n(57389),D=n(26473),I=n(53312),_=n(88965),B=n(20685),G=n(95141),P=n(55418),A=n(61623),N=n(16679),U=n(38029),L=n(51631),O=n(56803),X=n(15436),M=n(79824),F=n(29884),W=n(43119),H=n(71440),V=n(24635);function z(){var e=(0,W.Z)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return z=function(){return e},e}var j={},q=(0,H.Ps)(z());function $(e){var t,n,r=function(e){var t=(0,i.Z)({},j,e);return V.a(q,t)}({variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1}),o=r.data,a=r.loading,l=r.error;if(a)return{loading:a,pendingChanges:null,error:null};if(l)return{loading:!1,pendingChanges:null,error:l};var c="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return c?{loading:!1,pendingChanges:(null===(t=c.deployment)||void 0===t||null===(n=t.activeRelease)||void 0===n?void 0:n.pendingChanges)||[],error:l}:{loading:!1,pendingChanges:null,error:new Error("Repl not found")}}var Y=n(79790),K=n(50216);function Q(){var e=(0,W.Z)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Q=function(){return e},e}var J={},ee=(0,H.Ps)(Q());function te(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}function ne(){var e=(0,a.Z)(function(e){var t=(0,i.Z)({},J,e);return K.D(ee,t)}({refetchQueries:["ReplEnvironmentHeader"]}),2),t=e[0];function n(){return(n=(0,r.Z)((function(e){var n,r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return n=e.input,[4,t({variables:{input:n}})];case 1:return[2,{data:(r=i.sent()).data,error:te(r)}]}}))}))).apply(this,arguments)}return{revertTemplateRelease:function(e){return n.apply(this,arguments)},state:e[1]}}var re=n(27773),ie=n(22004),oe=n(32437),ae=n(87978),le=n(56412),ce=n(30504),se=D.K.form;function ue(e){if(0===e.length)return{message:"You cannot leave this empty."}}function de(e){var t,n,r=e.changeType;return r===L.J5.NewFile?(t=_.TV.accentPositiveStronger,n="Added"):r===L.J5.DeletedFile?(t=_.TV.accentNegativeStronger,n="Deleted"):(t=_.TV.foregroundDefault,n="Changed"),(0,c.tZ)(I.xv,{variant:"small",css:[{color:t}],multiline:!1,children:n})}function fe(e){var t=e.pendingChangesState,n=e.isReplitTemplate;if(t.loading)return(0,c.tZ)(D.G,{css:[_.l0.center],children:(0,c.tZ)(re.Z,{})});if(t.error)return(0,c.tZ)(P.E,{icon:(0,c.tZ)(M.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return n?null:(0,c.tZ)(I.xv,{children:"No changes to publish. Come back when you have made changes to your Repl."});var r=t.pendingChanges,i=r.slice(0,15);return(0,c.BX)(D.G,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:_.TV.space8}],children:[i.map((function(e){return(0,c.BX)(f.Fragment,{children:[(0,c.BX)(D.G,{css:[_.l0.rowWithGap(4),_.l0.align.center],children:[(0,c.tZ)(ie.Z,{size:12,path:e.fileName}),(0,c.tZ)(I.xv,{multiline:!1,children:e.fileName})]},e.fileName),(0,c.tZ)(de,{changeType:e.changeType})]},e.fileName)})),r.length>i.length&&(0,c.BX)(I.xv,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}function he(e){var t=e.repl,n=ne(),i=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.revertTemplateRelease({input:{replId:t.id,releaseId:e}})];case 1:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,c.BX)(D.G,{children:[(0,c.tZ)(I.h4,{level:1,variant:"subheadBig",css:[_.l0.mb(16)],children:"Existing Releases"}),(0,c.tZ)(D.G,{css:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:_.TV.space8}],children:t.releases.items.map((function(e){var n,r;return(0,c.BX)(f.Fragment,{children:[(0,c.tZ)("span",{children:(0,le.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,c.tZ)("span",{children:e.description}),(0,c.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(n=t.deployment)||void 0===n||null===(r=n.activeRelease)||void 0===r?void 0:r.id)?(0,c.tZ)("span",{css:[_.l0.p(4),{display:"flex"}],children:"(active)"}):(0,c.tZ)(G.zx,{text:"revert",colorway:"primary",size:"small",onClick:function(t){t.preventDefault(),i(e.id)}})})]},e.id)}))})]})}function pe(e){var t=e.children;return(0,c.tZ)(D.G,{css:[_.l0.rowWithGap(8),_.l0.py(2)],children:t})}function me(e){var t,n,s,u,d,h,p=e.repl,m=(0,U.U)(),v=(0,a.Z)(f.useState(!1),2),g=v[0],y=v[1],Z=(0,a.Z)(f.useState(!1),2),b=Z[0],w=Z[1],x=function(e){var t=$({replId:e.replId}),n=f.useMemo((function(){if(!t.pendingChanges)return[];var e=t.pendingChanges.slice().sort((function(e,t){return e.fileName.localeCompare(t.fileName)})).map((function(e){return{file:e,pathDepth:(0,ae.U$)(e.fileName)}})).sort((function(e,t){return e.pathDepth-t.pathDepth})).map((function(e){return e.file}));return e}),[t.pendingChanges]);return(0,o.Z)((0,i.Z)({},t),{pendingChanges:n})}({replId:p.id}),C=(0,Y.r)(),k=(0,X.Y)("",ue),S=0!==(null===(t=x.pendingChanges)||void 0===t?void 0:t.length),E=(null===(n=p.user)||void 0===n?void 0:n.username)===ce.IU||"templates"===(null===(s=p.user)||void 0===s?void 0:s.username),T=(0,f.useState)({ran:!1,tested:!1}),N=T[0],L=T[1];f.useEffect((function(){L({ran:!1,tested:!1})}),[L]);var O=Boolean(k.error||!E&&!S||C.loading||E&&(!N.ran||!N.tested)),W=E&&(null===(u=p.releases)||void 0===u||null===(d=u.items)||void 0===d?void 0:d.length)>1,H="";return k.error?H="Please fill out the form":E||S||(H="No changes to publish in this release"),g?(0,c.tZ)(oe.q,{repl:p,isUpdate:!0}):b?(0,c.tZ)(D.G,{css:[_.l0.p(16),_.l0.colWithGap(16)],children:(0,c.tZ)(he,{repl:p})}):(0,c.BX)(se,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),O||k.validate()?[2]:[4,C.createRelease({input:{replId:p.id,description:k.value}})];case 1:return t.sent().error||y(!0),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),css:[_.l0.colWithGap(24),_.l0.p(16)],children:[(0,c.tZ)(I.h4,{level:1,variant:"headerDefault",children:"Publish a new release"}),(0,c.BX)(D.G,{css:[_.l0.colWithGap(8)],children:[(0,c.tZ)(I.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,c.tZ)(fe,{pendingChangesState:x,isReplitTemplate:E})]}),E||S?(0,c.BX)(D.G,{css:[_.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:m("description"),css:[_.l0.color.foregroundDimmer,{fontSize:_.TV.fontSizeSmall,lineHeight:_.TV.lineHeightSmall}],children:"Description"}),(0,c.tZ)(B.B,{id:m("description"),"aria-label":"Description",onChange:function(e){return k.setValue(e.target.value)},css:[_.l0.width("100%"),_.l0.minHeight(64),_.l0.maxHeight(128),{resize:"vertical"}],placeholder:"Explain what has changed about your template"}),k.error?(0,c.tZ)(P.E,{icon:(0,c.tZ)(M.Z,{}),text:null===(h=k.error)||void 0===h?void 0:h.message,colorway:"negative"}):null]}):null,E?(0,c.tZ)(ve,{repl:p,state:N,onChange:function(e,t){return L((function(n){return(0,o.Z)((0,i.Z)({},n),(0,R.Z)({},e,t))}))}}):null,(0,c.tZ)(D.G,{children:C.error?(0,c.tZ)(P.E,{icon:(0,c.tZ)(M.Z,{}),text:C.error,colorway:"negative"}):null}),(0,c.BX)(D.G,{css:[_.l0.rowWithGap(12),_.l0.justify.end],children:[W?(0,c.tZ)(G.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return w(!0)}}):null,(0,c.tZ)(A.u,{tooltip:H,placement:"bottom",isDisabled:!H,children:(0,c.tZ)(G.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,c.tZ)(F.Z,{}),disabled:O})})]})]})}function ve(e){var t,n,r,i=e.repl,o=e.state,a=e.onChange,l=(0,U.U)(),s=(0,O.e9)(),u=s.data,d=s.loading,f=null===u||void 0===u||null===(t=u.currentUser)||void 0===t?void 0:t.username;return(0,c.BX)(D.G,{css:[_.l0.colWithGap(12)],children:[(0,c.tZ)(I.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,c.BX)(D.G,{children:[(0,c.BX)(pe,{children:[(0,c.tZ)(N.X,{id:l("ran"),checked:o.ran,onChange:function(e){return a("ran",e.target.checked)}}),(0,c.tZ)("label",{htmlFor:l("ran"),children:"Ran Repl:"}),(0,c.BX)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,c.tZ)("code",{children:".upm"}),"."]})]}),(0,c.BX)(pe,{children:[(0,c.tZ)(N.X,{id:l("tested"),checked:o.tested,onChange:function(e){return a("tested",e.target.checked)}}),(0,c.tZ)("label",{htmlFor:l("tested"),children:"Ran tests:"}),(0,c.BX)("span",{children:['I ran "Test working copy" for @',null===(n=i.user)||void 0===n?void 0:n.username,"/",i.slug," in"," ",(0,c.tZ)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,c.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),d||(null===(r=i.user)||void 0===r?void 0:r.username)!==f?null:(0,c.tZ)(P.E,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}var ge=n(48153),ye=n(59689),Ze=n(23472),be=n(1645),we=n(21651),xe=n(37268),Ce=n(75277),ke=n(40176),Se=n(76092),Ee=n(91148),Te=n(90171),Re=n(70232),De=n(43573),Ie=n(9766),_e=n(62385),Be=n(52656),Ge=n(21423),Pe=n(5158),Ae=n(34809),Ne=n(32905);function Ue(e){var t=f.useRef(null),n=(0,a.Z)(f.useState(e.value),2),r=n[0],i=n[1],o=(0,a.Z)(f.useState(null),2),l=o[0],s=o[1],d=(0,Be.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){var t=e.dataUrl;i(t)},onError:function(e){s(e.message)}});f.useEffect((function(){i(e.value)}),[e.value]);var h=null===r||void 0===r?void 0:r.startsWith("data:"),p=32;return(0,c.BX)(Ge.gC,{spacing:"var(--space-4)",children:[(0,c.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:u().dynamic([["5de27f185cb9bc33",[p,p]]])+" "+((r?"update-icon":"add-icon")||""),children:[r?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Ie.Z,{iconUrl:r,size:p,alt:"icon"}),h?(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[p,p]]])+" loading-state",children:(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[p,p]]])+" loading-icon",children:(0,c.tZ)(re.Z,{})})}):(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[p,p]]])+" hover-state",children:(0,c.tZ)(_e.Z,{})})]}):(0,c.tZ)(Pe.Z,{}),(0,c.tZ)("input",{ref:t,accept:Ae.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null===r||void 0===r?void 0:r.length)&&(s(null),d.uploadImage(r[0],Ne.N.TemplateIcon))},className:u().dynamic([["5de27f185cb9bc33",[p,p]]])})]}),l?(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[p,p]]])+" error",children:l}):null,(0,c.tZ)(u(),{id:"5de27f185cb9bc33",dynamic:[p,p],children:".add-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(p,"px;height:").concat(p,"px}.add-icon.__jsx-style-dynamic-selector:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.add-icon.__jsx-style-dynamic-selector,.update-icon.__jsx-style-dynamic-selector{position:relative;cursor:pointer;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px}.update-icon.__jsx-style-dynamic-selector:hover .hover-state.__jsx-style-dynamic-selector{opacity:.8}.hover-state.__jsx-style-dynamic-selector{opacity:0}.loading-state.__jsx-style-dynamic-selector{opacity:.8}.loading-icon.__jsx-style-dynamic-selector{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.hover-state.__jsx-style-dynamic-selector,.loading-state.__jsx-style-dynamic-selector{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.error.__jsx-style-dynamic-selector{font-size:var(--font-size-default);color:var(--accent-negative-default)}")})]})}var Le=n(25999),Oe=n(67217),Xe=n(92369),Me=n(16296),Fe=n(92470),We=n(5687),He=n(68912),Ve=n(14053),ze=n(95148),je=n(38256),qe=n(2580),$e=n(59213),Ye=n(54008),Ke=n(61025),Qe=n(73823),Je=n(66777),et=n(97807),tt=n(20236),nt=n(45636),rt=(0,Ke.X)({destructiveMenuItem:[_.l0.color.accentNegativeStronger]});function it(e){var t=e.repl,n=(0,y.Z)(),r=(0,f.useMemo)((function(){return t.user?{text:t.user.username,css:[{"&, & span":_.l0.flex.shrink(1)}],iconLeft:(0,c.tZ)(Oe.q,{src:t.user.image,username:t.user.username})}:{text:""}}),[t]);if(!t.user)return null;var a=(0,Fe.Ru)(t.user);return n?(0,c.tZ)(G.zx,(0,o.Z)((0,i.Z)({},r),{onClick:function(){$e.X.openExternalUrl(a.as)}})):(0,c.tZ)(Xe.Z,(0,o.Z)((0,i.Z)({},r,a),{prefetch:!1}))}function ot(e){var t=e.setActiveDialog,n=e.repl,r=e.isTemplate,a=e.updateIconUrl,l=e.showCloseButton,s=e.setIsEditing,u=e.updateReplInfo,d=(0,et.Z)(),f=Boolean(n.publishedAs),h=n.currentUserPermissions.publish,m=(0,y.Z)(),v=!(null===n||void 0===n?void 0:n.publishedAs)&&!m,g=(null===n||void 0===n?void 0:n.publishedAs)===L.O2.RegularRepl,Z=(0,p.g)().fork,b=[];n.currentUserPermissions.fork&&b.push({value:tt.$.Fork,label:"Fork",icon:(0,c.tZ)(je.Z,{})}),n.publishedAs===L.O2.RegularRepl&&h&&!m&&b.push({value:tt.$.Unpublish,label:"Unpublish",icon:(0,c.tZ)(ze.Z,{})}),r&&h&&!m&&b.push({value:tt.$.UnpublishTemplate,label:"Unpublish template",icon:(0,c.tZ)(ze.Z,{})}),f&&h&&!m&&b.push({value:tt.$.EditPublishSettings,label:"Edit Publish Settings",icon:(0,c.tZ)(_e.Z,{})}),n.currentUserPermissions.delete&&b.push({isDestructive:!0,value:tt.$.Delete,label:"Delete",icon:(0,c.tZ)(qe.Z,{})});var w=(null===n||void 0===n?void 0:n.isPrivate)||!(null===n||void 0===n?void 0:n.isRenamed),x="";return(null===n||void 0===n?void 0:n.isPrivate)?x="This Repl is private. You need to make it public in order to publish it!":(null===n||void 0===n?void 0:n.isRenamed)||(x="You need to give this Repl a name before publishing it."),(0,c.BX)(D.G,{css:[_.l0.colWithGap(8),_.l0.p(8)],children:[(0,c.BX)(D.G,{css:[_.l0.rowWithGap(8),_.l0.align.center,_.l0.justify.spaceBetween,(0,R.Z)({},_.BC.max("mobileMax"),[_.l0.flex.columnReverse,_.l0.align.start,{gap:_.TV.space8}])],children:[(0,c.BX)(D.G,{css:[_.l0.rowWithGap(8),_.l0.center,_.l0.flex.shrink(1)],children:[(0,c.tZ)(it,{repl:n}),n.currentUserPermissions.changeIconUrl&&r?(0,c.tZ)(Ue,{value:n.iconUrl,onChange:a}):null]}),(0,c.BX)(D.G,{css:[_.l0.align.center,_.l0.rowWithGap(8),(0,R.Z)({},_.BC.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],children:[m?null:(0,c.tZ)(Xe.Z,(0,o.Z)((0,i.Z)({prefetch:!1},(0,Le.j3)(n)),{iconLeft:(0,c.tZ)(Ve.Z,{}),colorway:"primary",text:"Cover page",target:"_blank"})),h&&v&&!d?(0,c.tZ)(A.u,{tooltip:x,isDisabled:!w,children:(0,c.tZ)(G.zx,{type:"button",iconLeft:(0,c.tZ)(Pe.Z,{}),onClick:function(){t(tt.x.Publish)},dataCy:"ws-publish-button",text:"Publish",disabled:w})}):null,r&&!m?(0,c.tZ)(G.zx,{type:"button",iconLeft:(0,c.tZ)(Pe.Z,{}),onClick:function(){return t(tt.x.UpdatePublishedTemplate)},text:"Update"}):null,g&&!m?(0,c.tZ)(G.zx,{type:"button",iconLeft:(0,c.tZ)(We.Z,{}),onClick:function(){return t(tt.x.UpdatePublishedRepl)},text:"Update"}):null,m?(0,c.tZ)(nt.j,{textToCopy:window.location.href,alt:"Copy Repl URL",tooltip:"Copied!",tooltipPlacement:"bottom-end",timeout:2e3,children:(0,c.tZ)(Qe.Z,{})}):null,b.length>0&&(0,c.tZ)(Ye.ZE,{icon:(0,c.tZ)(Je.Z,{size:16}),"aria-label":r?"Template Actions":"Repl Actions",cssProps:[_.l0.backgroundColor.backgroundDefault],placement:"bottom-end",onAction:function(e){switch(e){case tt.$.Fork:return void Z();case tt.$.Unpublish:return void t(tt.x.Unpublish);case tt.$.UnpublishTemplate:return void t(tt.x.UnpublishTemplate);case tt.$.Delete:return void t(tt.x.DeleteRepl);case tt.$.EditPublishSettings:t(tt.x.EditPublishSettings)}},children:b.map((function(e){return(0,c.tZ)(Ye.ck,{children:(0,c.BX)(D.G,{css:[_.l0.rowWithGap(8),e.isDestructive&&rt.destructiveMenuItem],children:[e.icon,(0,c.tZ)(D.G,{children:e.label})]})},e.value)}))}),l?(0,c.tZ)(Me.hU,{alt:"Close",tooltipHidden:!0,onClick:function(){u(),s(!1)},children:(0,c.tZ)(He.Z,{})}):null]})]}),n.lastPublishedAt&&h?(0,c.BX)(I.xv,{variant:"small",color:"dimmest",multiline:!1,children:["Last published on"," ",new Date(n.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]})}var at=n(54016),lt=n(70135),ct={query:Z.s8},st={query:v.BW};function ut(e){var t=e.setIsEditing,n=e.showCloseButton,r=e.onDeployClick,i=(0,x.Z)(),o=(0,De.BZ)({variables:{replId:i}}),a=o.data,l=o.refetch,s="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null;return s?(0,c.tZ)(dt,{setIsEditing:t,showCloseButton:n,repl:s,refetch:l,onDeployClick:r}):(0,c.tZ)(D.G,{css:[_.l0.center,_.l0.p(16)],children:(0,c.tZ)(re.Z,{})})}function dt(e){var t,n,s,v=e.repl,Z=e.showCloseButton,x=e.setIsEditing,R=e.onDeployClick,A=(0,Te.useRouter)(),N=(0,y.Z)(),O=(0,a.Z)(f.useState(null),2),X=O[0],M=O[1],F=(0,a.Z)(f.useState(null),2),W=F[0],H=F[1],V=(0,a.Z)(f.useState(v.isRenamed?v.title:""),2),z=V[0],j=V[1],q=(0,a.Z)(f.useState(v.description||""),2),$=q[0],Y=q[1],K=(0,a.Z)(f.useState(v.rawTemplateLabel),2),Q=K[0],J=K[1],ee=(0,De.zu)().data,te=(0,w.Z)().showError,ne=v.publishedAs===L.O2.Template;f.useEffect((function(){Y(v.description||"")}),[v.description]);var re=(0,E.Z)(),ie=f.useRef(v),oe=(0,a.Z)((0,De.ap)({variables:{id:v.id},onCompleted:function(){N?A.push("/desktopApp/home"):A.push("/home","/~")},update:function(e,t){var n;(null===(n=t.data)||void 0===n?void 0:n.deleteRepl)&&(e.evict({id:e.identify(t.data.deleteRepl)}),e.gc())},onError:function(e){return te((0,C.Z)(e.message))}}),2),ae=oe[0],le=oe[1].loading,ce=(0,a.Z)((0,De.vi)({onError:function(e){return te((0,C.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=ie.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url,A.push({pathname:re,query:{replUrl:t.url}},t.url+window.location.search+window.location.hash)),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),ie.current=v,Object.keys(r).length>0&&x(!1)}}),2),se=ce[0],ue=ce[1].loading,de=(0,a.Z)((0,De.gF)({variables:{input:{replId:v.id}},onError:function(e){d.Tb(e),te((0,C.Z)(e.message))}}),2),fe=de[0],he=de[1],pe=(0,De.l9)({fetchPolicy:"cache-and-network",ssr:!1}),ve=pe.data,Ie=pe.loading,_e=pe.error,Be=f.useMemo((function(){return!(!z||z===v.title)||(Q!==v.rawTemplateLabel||!(""===$&&!v.description)&&$!==v.description)}),[v,z,$,Q]),Ge=(0,b.Z)(Be),Pe=f.useCallback((function(){if(Be){var e={id:v.id,title:z.trim()||v.title,description:$,templateLabel:v.currentUserPermissions.changeTemplateLabel?Q:void 0};se({variables:{input:e}})}}),[Be,se,v,z,$,Q]),Ae=(0,b.Z)(Pe);f.useLayoutEffect((function(){return function(){Ge.current&&Ae.current()}}),[Ae,Ge]);var Ne=f.useCallback((function(e){switch(e){case"always-on":return"PowerUpCostsType"===v.powerUpCosts.__typename?v.powerUpCosts.alwaysOn.explanation:null;case"private":var t,n,r;return"UserPowerUpsTypes"===(null===ve||void 0===ve||null===(t=ve.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)?null===(r=null===(n=ve.currentUser.userPowerUpsByType)||void 0===n?void 0:n.privateRepls.cost)||void 0===r?void 0:r.explanation:null;case"gpu":var i,o;return"PowerUpCostsType"===v.powerUpCosts.__typename?null===(i=v.powerUpCosts)||void 0===i||null===(o=i.gpu)||void 0===o?void 0:o.explanation:null;default:(0,Re.Z)(e)}}),[ve,v]),Ue=function(){se({variables:{input:{id:v.id,isPrivate:!v.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},v),{isPrivate:!v.isPrivate})}},refetchQueries:[{query:De.WM,variables:{replId:v.id}},ct,st]}),(0,S.j)(S.U3.PRIVATE_TOGGLED,{enabled:!v.isPrivate,source:"workspace_info_modal"})},Le=v.isRenamed?"Name your Repl":"Default name: ".concat(v.title),Oe=[L.Sy.Submit,L.Sy.PublishTemplate,L.Sy.EditTemplate].includes(v.workspaceCta),Xe=(0,U.U)(),Me="Team"===(null===(t=v.owner)||void 0===t?void 0:t.__typename),Fe=v.hostingDeploymentPermissions.canDeploy&&"function"===typeof R,We="/replEnvironmentDesktop"===re&&Fe,He=(0,g.gg)(),Ve=He.isDeployableRepl,ze=He.reason,je="HostingDeployment"===(null===(n=v.hostingDeployment)||void 0===n?void 0:n.__typename)&&v.hostingDeployment.currentBuild;return(0,c.BX)("div",{css:{overflow:"auto",maxHeight:"80vh"},className:u().dynamic([["703c63e95e4e7e92",[v.currentUserPermissions.changeDescription?"auto":"not-allowed",Ee.j.mobileMax]]]),children:[(0,c.tZ)(p.b,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:v,teamContext:null===(s=v.user)||void 0===s?void 0:s.username,children:(0,c.tZ)(ot,{repl:v,isTemplate:ne,showCloseButton:Z,setActiveDialog:M,setIsEditing:x,updateIconUrl:function(e){return se({variables:{input:{id:v.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},v),{iconUrl:e})}}})},updateReplInfo:Pe})}),(0,c.tZ)("form",{onSubmit:function(e){e.preventDefault(),Pe()},className:u().dynamic([["703c63e95e4e7e92",[v.currentUserPermissions.changeDescription?"auto":"not-allowed",Ee.j.mobileMax]]]),children:(0,c.BX)(D.G,{css:[_.l0.align.stretch,_.l0.colWithGap(16)],children:[(0,c.BX)(xe.Tg,{background:"default",css:[_.l0.colWithGap(16)],children:[(0,c.tZ)(D.G,{css:[_.l0.flex.column],children:(0,c.BX)(D.G,{css:[_.l0.colWithGap(4)],children:[(0,c.BX)(D.G,{css:[_.l0.flex.row,_.l0.justify.spaceBetween,_.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:Xe("name"),className:u().dynamic([["703c63e95e4e7e92",[v.currentUserPermissions.changeDescription?"auto":"not-allowed",Ee.j.mobileMax]]]),children:(0,c.tZ)(I.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,c.tZ)(m.Z,{maxLength:60,value:z,hideLabel:!0})]}),(0,c.tZ)(B.II,{style:{cursor:v.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!v.currentUserPermissions.changeTitle,maxLength:60,placeholder:Le,value:z,onChange:function(e){return j(e.target.value)},spellCheck:!1,id:Xe("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,c.tZ)(D.G,{css:[_.l0.flex.column],children:(0,c.BX)(D.G,{css:[_.l0.colWithGap(4)],children:[(0,c.BX)(D.G,{css:[_.l0.flex.row,_.l0.justify.spaceBetween,_.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:Xe("description"),className:u().dynamic([["703c63e95e4e7e92",[v.currentUserPermissions.changeDescription?"auto":"not-allowed",Ee.j.mobileMax]]]),children:(0,c.tZ)(I.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,c.tZ)(m.Z,{maxLength:Ze.p,value:$,hideLabel:!0})]}),(0,c.tZ)(B.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!v.currentUserPermissions.changeDescription,maxLength:Ze.p,value:$,onChange:function(e){return Y(e.target.value)},placeholder:"What does this Repl do?",css:[_.l0.minHeight(96),_.l0.maxHeight(256),{resize:"vertical"}],id:Xe("description")})]})})]}),ne&&v.currentUserPermissions.changeTemplateLabel?(0,c.tZ)(xe.Tg,{background:"default",css:[_.l0.colWithGap(4)],children:(0,c.BX)(D.G,{css:[_.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:Xe("template"),className:u().dynamic([["703c63e95e4e7e92",[v.currentUserPermissions.changeDescription?"auto":"not-allowed",Ee.j.mobileMax]]]),children:(0,c.tZ)(I.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,c.tZ)(B.II,{value:Q,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return J(e.target.value)},id:Xe("template")})]})}):null]})}),Oe?null:(0,c.BX)(D.G,{css:[_.l0.colWithGap(24),_.l0.p(8),_.l0.pt(0)],children:[v.currentUserPermissions.changePrivacy===L.HA.Allowed&&(0,c.BX)(D.G,{css:[_.l0.colWithGap(8)],children:[(0,c.BX)(be.hE,{tag:"fieldset",name:Xe("privacy"),value:v.isPrivate.toString(),onChange:function(){var e,t,n,r;if(!ue)if(v.isPrivate)Ue();else if(v.currentUserPermissions.changePrivacy===L.HA.Allowed&&null!=(null===(e=v.user)||void 0===e?void 0:e.id)&&null!=(null===ee||void 0===ee||null===(t=ee.currentUser)||void 0===t?void 0:t.id)&&v.user.id!==ee.currentUser.id)Ue();else{var i="UserPowerUpsTypes"===(null===ve||void 0===ve||null===(n=ve.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&(null===(r=ve.currentUser.userPowerUpsByType)||void 0===r?void 0:r.privateRepls.active),o=Ne("private");if(null==o||Ie)te("You're too fast for us! Please try again in a moment.");else{if(!_e)return(0,S.j)(S.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!v.isPrivate,source:"workspace_info_modal",costExplanation:o}),i?void Ue():(H("private"),void M(tt.x.PowerUp));te("This action is currently unavailable. Please refresh and try again.")}}},row:!0,primary:!0,stretch:!0,children:[(0,c.tZ)(be.rK,{id:Xe("false"),value:"false",text:"Public",icon:(0,c.tZ)(ke.Z,{})}),(0,c.tZ)(be.rK,{id:Xe("true"),value:"true",text:"Private",icon:(0,c.tZ)(Se.Z,{})})]}),(0,c.tZ)(I.xv,{variant:"small",color:"dimmest",children:(0,k.Z)(v.isPrivate,Me)})]}),We?(0,c.BX)(D.G,{css:_.l0.colWithGap(8),children:[(0,c.tZ)(G.zx,{text:je?"Redeploy your project":"Deploy your project",iconLeft:(0,c.tZ)(Ce.Z,{}),colorway:je?void 0:"primary",onClick:function(){R(),je||(0,S.j)(S.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_info_modal"})},disabled:!Ve}),Ve?null:(0,c.tZ)(P.E,{text:ze})]}):null]}),(0,c.tZ)(at.Z,{isOpen:X===tt.x.DeleteRepl,onClose:function(){return M(null)},selectedRepls:[v],onDelete:function(){ae()},deleting:le}),(0,c.tZ)(lt.Z,{context:"workspace_info_modal",isOpen:X===tt.x.PowerUp,uponPurchaseGoTo:"workspace",replTitle:v.title,onRequestClose:function(e){"InsertDeploymentsPane"===e&&Fe&&(R(),(0,S.j)(S.U3.DEPLOY_PROJECT_SELECTED,{source:"power_up_modal"})),M(null)},onRequestPowerUp:(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:switch(W){case null:case"always-on":case"gpu":case"boost":case"hosting_tier":break;case"private":Ue();break;default:(0,Re.Z)(W)}return[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 1:return e.sent(),M(null),[2]}}))})),powerUp:null!==W&&void 0!==W?W:"boost",canDeploy:We},X),(0,c.tZ)(we.u,{isOpen:X===tt.x.Unpublish,onRequestClose:function(){return M(null)},children:(0,c.tZ)(ye.Z,{repl:v,source:"replEnvironment",onDone:function(){M(null)}})}),(0,c.tZ)(we.u,{isOpen:X===tt.x.UnpublishTemplate,onRequestClose:function(){return M(null)},children:(0,c.tZ)(h.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return M(null)},onConfirm:function(){he.loading||(fe(),M(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,c.tZ)(we.u,{isOpen:X===tt.x.EditPublishSettings,onRequestClose:function(){return M(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(T.Z,{source:"replEnvironment",replId:v.id})}),(0,c.tZ)(we.u,{isOpen:X===tt.x.Publish,onRequestClose:function(){return M(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(T.Z,{source:"replEnvironment",replId:v.id})}),(0,c.tZ)(we.u,{isOpen:X===tt.x.UpdatePublishedTemplate,onRequestClose:function(){return M(null)},noPadding:!0,children:(0,c.tZ)(me,{repl:v})}),(0,c.tZ)(we.u,{isOpen:X===tt.x.UpdatePublishedRepl,onRequestClose:function(){return M(null)},children:(0,c.tZ)(ge.Z,{repl:v,onDone:function(){return M(null)},source:"replEnvironment"})}),(0,c.tZ)(u(),{id:"703c63e95e4e7e92",dynamic:[v.currentUserPermissions.changeDescription?"auto":"not-allowed",Ee.j.mobileMax],children:"form.__jsx-style-dynamic-selector{padding:var(--space-8)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(v.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}@media screen and (max-width:").concat(Ee.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})}},97566:function(e,t,n){n.d(t,{s:function(){return l}});var r=n(43119),i=n(71440),o=n(8619);function a(){var e=(0,r.Z)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o._)},44119:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(57389),i=n(74985),o=(n(50959),n(61025)),a=n(88965),l=n(53312),c=n(26473),s=n(56123),u=(0,o.X)({metadata:[a.l0.rowWithGap(6),a.l0.align.center,a.l0.flex.growAndShrink(1)],username:[a.l0.maxWidth(160),a.l0.truncate,a.l0.flex.shrink(1)],title:[a.l0.flex.shrink(1),a.l0.truncate]});function d(e){var t=e.repl;return(0,i.BX)(c.G,{css:u.metadata,children:[(0,i.tZ)(c.G,{css:[a.l0.display.none,(0,r.Z)({},a.BC.min("tabletMax"),[a.l0.display.flex])],children:(0,i.tZ)(s.ZP,{iconUrl:t.iconUrl,size:20,alt:""})}),(0,i.tZ)(l.xv,{multiline:!1,css:u.title,"data-cy":"header-repl-title",children:t.title})]})}},20236:function(e,t,n){var r,i;n.d(t,{$:function(){return i},x:function(){return r}}),function(e){e.DeleteRepl="DeleteRepl",e.PowerUp="PowerUp",e.BuyCycles="BuyCycles",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings",e.Publish="Publish",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.UpdatePublishedRepl="UpdatePublishedRepl"}(r||(r={})),function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(i||(i={}))},49019:function(e,t,n){n.d(t,{Z:function(){return ge}});var r=n(72006),i=n(4405),o=n(74985),a=n(43312),l=n(61025),c=n(88965),s=n(53312),u=n(26473),d=n(23007),f=n(77637),h=n(43119),p=n(90234),m=n(71999),v=n(50959),g=n(94979),y=n(16296),Z=n(85919),b=n(3689),w=n(79824);function x(){var e=(0,h.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return x=function(){return e},e}var C=(0,l.X)({self:[c.l0.flex.row,c.l0.flex.wrap,c.l0.justify.spaceBetween,c.l0.align.center],text:[c.l0.rowWithGap(2),c.l0.align.center,c.l0.minHeight(c.TV.space24)],textLoading:[c.l0.height(16),c.l0.width(c.TV.space64),g.p.backgroundPulse(),c.l0.borderRadius(4)],textLoadingWrapper:[c.l0.height("fit-content"),{animation:"".concat((0,a.F4)(x())," 120ms forwards ease-out alternate")}],textWarn:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.px(4)],textPadding:[c.l0.height(16),{lineHeight:"16px"}],textHighlight:[c.l0.color.accentPrimaryStronger],selfMini:[c.l0.rowWithGap(4),c.l0.align.center]});function k(e){var t,n=e.title,r=e.description,i=e.limitStatusAtom,a=e.limitTextSecondaryAtom,l=e.mini,d=e.loading,h=(0,f.Z)(e,["title","description","limitStatusAtom","limitTextSecondaryAtom","mini","loading"]),g=(0,v.useMemo)((function(){return null!==(t=h.limitTextAtom)&&void 0!==t?t:(0,p.cn)(null)}),[h.limitTextAtom]),x=(0,m.Dv)((0,Z.Z)((function(){return(0,p.cn)((function(e){return"At limit"===e(i)||"Close to limit"===e(i)}))}),[i]));if(l)return(0,o.BX)(u.G,{css:C.selfMini,children:[(0,o.tZ)(s.xv,{variant:"small",css:c.l0.color.foregroundDimmer,multiline:!1,children:n}),x?(0,o.tZ)(w.Z,{color:c.TV.orangeStronger}):null]});var k=null;return k=d?(0,o.tZ)(u.G,{css:C.textLoading}):(0,o.tZ)(s.xv,{variant:"small",css:C.textPadding,multiline:!1,children:a?(0,o.BX)(o.HY,{children:[(0,o.BX)("span",{css:C.textHighlight,children:[" ",(0,o.tZ)(S,{text:g})]})," + ",(0,o.tZ)(S,{text:a})]}):(0,o.tZ)(S,{text:g})}),(0,o.BX)(u.G,{css:C.self,children:[(0,o.BX)(u.G,{css:C.text,children:[(0,o.tZ)(s.xv,{multiline:!1,children:n}),(0,o.tZ)(y.hU,{alt:r,size:24,children:(0,o.tZ)(b.Z,{})}),x?(0,o.BX)(u.G,{css:C.textWarn,children:[(0,o.tZ)(w.Z,{color:c.TV.orangeStronger}),(0,o.tZ)(s.xv,{variant:"small",css:C.textPadding,multiline:!1,children:(0,o.tZ)(S,{text:i})})]}):null]}),(0,o.tZ)(u.G,{css:C.textLoadingWrapper,children:k},d?"loadingResources":"finishedLoadingResources")]})}function S(e){var t=e.text,n=(0,m.Dv)(t);return null===n?null:(0,o.tZ)(o.HY,{children:n})}var E=n(45317),T=n(44167);n(28317),c.l0.rowWithGap(4),c.l0.align.center,c.l0.color.foregroundDimmer,c.l0.cursor.pointer,c.l0.colWithGap(4),c.l0.py(8),c.l0.border({direction:"bottom",color:c.TV.outlineDefault,width:1});var R={self:(0,a.iv)([c.l0.width(8),c.l0.height(8),c.l0.borderRadius(8),c.l0.flex.shrink(0)])};function D(e){var t=e.variant;return(0,o.tZ)("div",{css:[R.self,"primary"===t?c.l0.backgroundColor.accentPrimaryDefault:c.l0.backgroundColor.outlineDefault]})}c.l0.rowWithGap(8),c.l0.align.center,c.l0.flex.shrink(1);var I=(0,l.X)({self:[c.l0.colWithGap(2)],selfMini:[c.l0.colWithGap(4),c.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[c.l0.height(8)],selfTiny:[c.l0.width(48),c.l0.height(4)],selfTinyBar:[c.l0.height(4),{borderWidth:"0px",backgroundColor:E.TV.backgroundHigher}]});function _(e){var t=e.totalAtom,n=e.currentAtom,a=e.currentSecondaryAtom,l=e.measure,c=e.cpuCountAtom,s=e.title,d=e.description,f=(0,Z.Z)((function(){return(0,p.cn)((function(e){return(0,T.iS)(e(n),e(t))}))}),[n,t]),h=(0,Z.Z)((function(){return(0,p.cn)((function(e){return(0,T.Ow)(e(f),e(n),e(t),c&&e(c),l)}))}),[f,n,t,c,l]),m=(0,Z.Z)((function(){return(0,p.cn)((function(e){return a?(0,T.Ow)(e(f),e(a),e(t),c&&e(c),l):""}))}),[f,a,t,c,l]),v=(0,Z.Z)((function(){return(0,p.cn)((function(e){return a?Math.round(e(n)).toString():e(h)}))}),[a,n,h]);return e.tiny?(0,o.tZ)(u.G,{css:I.selfTiny,children:(0,o.tZ)(G,(0,i.Z)((0,r.Z)({},e),{limitStatusAtom:f,limitTextAtom:h,limitTextSecondaryAtom:m}))}):(0,o.BX)(u.G,{css:e.mini?I.selfMini:I.self,children:[(0,o.tZ)(k,(0,i.Z)((0,r.Z)({title:s,description:d,limitStatusAtom:f,limitTextAtom:v},a?{limitTextSecondaryAtom:m}:{}),{mini:e.mini,loading:e.loading})),(0,o.tZ)(G,(0,i.Z)((0,r.Z)({},e),{limitStatusAtom:f,limitTextAtom:h,limitTextSecondaryAtom:m}))]})}var B={tooltip:(0,a.iv)(c.l0.colWithGap(2)),tooltipItem:(0,a.iv)(c.l0.rowWithGap(4),c.l0.align.center,c.l0.width("100%"),c.l0.flex.growAndShrink(1)),tooltipItemText:(0,a.iv)(c.l0.flex.row,c.l0.align.center,c.l0.justify.spaceBetween,c.l0.flex.growAndShrink(1),{"&>span":c.l0.display.inlineFlex,gap:E.TV.space4})};function G(e){var t=e.currentAtom,n=e.currentLabel,a=e.currentSecondaryAtom,l=e.currentSecondaryLabel,c=e.totalAtom,s=e.mini,f=e.inactive,h=e.limitStatusAtom,v=e.limitTextAtom,g=e.limitTextSecondaryAtom,y=e.loading,b=e.secondaryLimitDeterminesStatus,w=void 0!==b&&b,x=e.tiny,C=(0,m.Dv)(t),k=(0,m.Dv)((0,Z.Z)((function(){return a||(0,p.cn)(null)}),[a])),S=(0,m.Dv)(c),R=(0,m.Dv)(v),D=(0,m.Dv)(g),_=(0,m.Dv)((0,Z.Z)((function(){return(0,p.cn)((function(e){return(0,T.V_)(e(h))}))}),[h])),G=(0,m.Dv)(h),A="At limit"!==G&&"Close to limit"!==G||!w?E.TV.outlineDimmer:(0,T.V_)(G),N=x?{}:{smoke:"Close to limit"===G||"At limit"===G};return a?(0,o.tZ)(d.J,(0,i.Z)((0,r.Z)({},N),{loading:y,css:s&&I.selfMiniBar||x&&I.selfTinyBar,disabled:f,total:S,tooltip:(0,o.BX)(u.G,{css:B.tooltip,children:[(0,o.tZ)(P,{variant:"primary",label:n,labelValue:R}),(0,o.tZ)(P,{variant:"secondary",label:l,labelValue:D})]}),data:[{current:C,color:_},{current:k||0,color:A}],tooltipHidden:x})):(0,o.tZ)(d.J,(0,i.Z)((0,r.Z)({},N),{loading:y,css:s&&I.selfMiniBar||x&&I.selfTinyBar,disabled:f,total:S,current:C,color:_,tooltip:R,tooltipHidden:x}))}function P(e){var t=e.variant,n=e.label,r=e.labelValue;return(0,o.BX)(u.G,{css:B.tooltipItem,children:[(0,o.tZ)(D,{variant:t}),(0,o.BX)(s.xv,{css:B.tooltipItemText,multiline:!1,children:[(0,o.BX)("span",{children:[n,":"]}),(0,o.tZ)("span",{children:r})]})]})}var A=n(57135),N=n(96583),U=n(68877),L=n(35291),O=n(12290),X=n(34547),M=n(61623),F=(0,l.X)({self:[c.l0.colWithGap(8)],summary:[c.l0.colWithGap(2)],summaryRow:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.width("100%"),c.l0.flex.growAndShrink(1)],summaryRowText:[c.l0.flex.row,c.l0.align.center,c.l0.justify.spaceBetween,c.l0.flex.growAndShrink(1),{"&>span":c.l0.display.inlineFlex,gap:E.TV.space4}],miniBar:[c.l0.height(8)],tinyBar:[c.l0.height(4),{borderWidth:"0px",backgroundColor:E.TV.backgroundHigher}],dot:[c.l0.width(8),c.l0.height(8),c.l0.minWidth(8),c.l0.maxHeight(8),{borderRadius:"50%"}]});function W(e){var t=e.thisReplAtom,n=e.otherReplsAtom,a=e.quotaAtom,l=e.mini,c=e.inactive,s=e.accountLimitStatusAtom,f=e.thisReplTextAtom,h=e.otherReplsTextAtom,v=e.quotaTextAtom,g=e.scratchDiskTextAtom,y=e.scratchLimitStatusAtom,b=e.loading,w=e.tiny,x=(0,m.Dv)(t),C=(0,m.Dv)(n),k=(0,m.Dv)(a),S=(0,m.Dv)(f),R=(0,m.Dv)(h),D=(0,m.Dv)(v),I=(0,m.Dv)(g),_=(0,m.Dv)((0,Z.Z)((function(){return(0,p.cn)((function(e){return(0,T.V_)(e(s))}))}),[s])),B=(0,m.Dv)(s),G=(0,m.Dv)(y),P="At limit"===G||"Close to limit"===G?E.TV.orangeStrongest:E.TV.foregroundDimmer,A="At limit"===B||"Close to limit"===B?(0,T.V_)(B):E.TV.outlineDimmer,N=w?{}:{smoke:"Close to limit"===B||"At limit"===B};return(0,o.tZ)(u.G,{css:F.self,children:(0,o.tZ)(d.J,(0,i.Z)((0,r.Z)({},N),{loading:b,css:l&&F.miniBar||w&&F.tinyBar,disabled:c,total:k,tooltipHidden:w,tooltip:(0,o.BX)(u.G,{css:F.summary,children:[(0,o.tZ)(z,{label:"This Repl",labelValue:S,color:E.TV.accentPrimaryStronger}),(0,o.tZ)(z,{label:"Your other Repls",labelValue:R,color:E.TV.foregroundDimmer}),(0,o.tZ)(z,{label:"Total account storage",labelValue:D,color:E.TV.foregroundDimmest}),(0,o.tZ)(j,{displaySize:I,color:P})]}),data:[{current:x,color:_},{current:C||0,color:A}]}))})}var H=u.K.div,V=u.K.span;function z(e){var t=e.color,n=e.label,r=e.labelValue;return(0,o.BX)(u.G,{css:F.summaryRow,children:[(0,o.tZ)(H,{css:F.dot,style:{backgroundColor:t}}),(0,o.tZ)(s.xv,{variant:"small",css:F.summaryRowText,multiline:!1,children:(0,o.BX)(V,{style:{color:t},children:[n,": ",r]})})]})}var j=function(e){var t=e.displaySize,n=e.tooltip,r=e.color;return(0,o.tZ)(u.G,{css:F.summaryRow,children:n?(0,o.tZ)(M.u,{tooltip:n,children:(0,o.BX)(s.xv,{variant:"small",css:F.summaryRowText,multiline:!1,children:[(0,o.BX)(V,{style:{color:r},children:["Scratch Disk: ",t]}),(0,o.tZ)(b.Z,{style:{color:r}})]})}):(0,o.tZ)(s.xv,{variant:"small",css:F.summaryRowText,multiline:!1,children:(0,o.BX)(V,{style:{color:r},children:["Scratch Disk: ",t]})})})};function q(){var e=(0,h.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return q=function(){return e},e}var $=(0,l.X)({center:[c.l0.flex.row,c.l0.flex.wrap,c.l0.justify.spaceBetween,c.l0.align.center],text:[c.l0.rowWithGap(2),c.l0.align.center,c.l0.minHeight(c.TV.space24)],textLoading:[c.l0.height(16),c.l0.width(c.TV.space64),g.p.backgroundPulse(),c.l0.borderRadius(4)],textLoadingWrapper:[c.l0.height("fit-content"),{animation:"".concat((0,a.F4)(q())," 120ms forwards ease-out alternate")}],textWarn:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.px(4)],textPadding:[c.l0.height(16),{lineHeight:"16px"}],textHighlight:[c.l0.color.accentPrimaryStronger],selfMini:[c.l0.rowWithGap(4),c.l0.align.center]});function Y(e){var t=e.title,n=e.description,a=e.accountLimitStatusAtom,l=e.scratchLimitStatusAtom,d=e.mini,f=e.loading,h=(0,m.Dv)((0,Z.Z)((function(){return(0,p.cn)((function(e){return"At limit"===e(a)||"Close to limit"===e(a)}))}),[a])),v=(0,m.Dv)((0,Z.Z)((function(){return(0,p.cn)((function(e){return"At limit"===e(l)||"Close to limit"===e(l)}))}),[l])),g=h||v;if(d){var x=f?{}:{height:"singleLine"};return(0,o.BX)(u.G,{css:$.selfMini,children:[(0,o.tZ)(s.xv,(0,i.Z)((0,r.Z)({multiline:!1,variant:"small"},x),{css:v?c.l0.color.orangeStrongest:c.l0.color.foregroundDimmer,children:t})),g?(0,o.tZ)(w.Z,{size:12,color:c.TV.orangeStrongest}):null]})}return(0,o.tZ)(u.G,{css:$.center,children:(0,o.BX)(u.G,{css:$.text,children:[(0,o.tZ)(s.xv,{css:{fontWeight:c.TV.fontWeightMedium},multiline:!1,children:t}),(0,o.tZ)(y.hU,{alt:n,size:24,children:(0,o.tZ)(b.Z,{})}),h?(0,o.BX)(u.G,{css:$.textWarn,children:[(0,o.tZ)(w.Z,{color:c.TV.orangeStrongest}),(0,o.tZ)(s.xv,{variant:"small",css:$.textPadding,multiline:!1,children:(0,o.tZ)(K,{text:a})})]}):null]})})}function K(e){var t=e.text,n=(0,m.Dv)(t);return(0,o.tZ)(o.HY,{children:n})}var Q=n(11278);function J(){var e=(0,h.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return J=function(){return e},e}var ee=(0,l.X)({self:[c.l0.colWithGap(2)],selfMini:[c.l0.colWithGap(4),c.l0.flex.growAndShrink(2),{flexBasis:32}],center:[c.l0.flex.row,c.l0.flex.wrap,c.l0.justify.spaceBetween,c.l0.align.center],text:[c.l0.rowWithGap(2),c.l0.align.center,c.l0.minHeight(E.TV.space24),c.l0.fontWeight.medium],textLoading:[c.l0.height(16),c.l0.width(E.TV.space64),g.p.backgroundPulse(),c.l0.borderRadius(4)],textLoadingWrapper:[c.l0.height("fit-content"),{animation:"".concat((0,a.F4)(J())," 120ms forwards ease-out alternate")}],textMini:[{alignSelf:"start"},c.l0.color.foregroundDimmer],textMiniLoading:[c.l0.height(8),c.l0.width(E.TV.space56),g.p.backgroundPulse(),c.l0.borderRadius(4),{justifySelf:"end"}],titleWrapper:[c.l0.rowWithGap(4),c.l0.align.center],titleMini:[c.l0.color.foregroundDimmer],title:[c.l0.fontWeight.normal]});function te(e){var t=e.currentAtom,n=e.mini,a=e.loading,l=e.description,c=(0,Z.Z)((function(){return(0,p.cn)((function(e){return(0,Q.s)(1024*e(t)*1024)}))}),[t]);if(n)return(0,o.BX)(u.G,{css:ee.selfMini,children:[(0,o.tZ)(u.G,{css:ee.titleWrapper,children:(0,o.tZ)(s.xv,(0,i.Z)((0,r.Z)({multiline:!1,variant:"small"},a?{}:{height:"singleLine"}),{css:ee.titleMini,children:"Storage"}))}),a?(0,o.tZ)(u.G,{css:ee.textMiniLoading}):(0,o.tZ)(s.xv,{multiline:!1,variant:"small",css:ee.textMini,height:"singleLine",children:(0,o.tZ)(ne,{text:c})})]});var d=a?null:(0,o.tZ)(s.xv,{variant:"small",height:"singleLine",multiline:!1,children:(0,o.tZ)(ne,{text:c})});return(0,o.tZ)(u.G,{css:n?ee.selfMini:ee.self,children:(0,o.BX)(u.G,{css:ee.center,children:[(0,o.BX)(u.G,{css:ee.text,children:[(0,o.tZ)(s.xv,{css:ee.title,multiline:!1,children:"Storage"}),(0,o.tZ)(y.hU,{alt:l,size:24,children:(0,o.tZ)(b.Z,{})})]}),(0,o.tZ)(u.G,{css:ee.textLoadingWrapper,children:d},a?"loadingResources":"finishedLoadingResources")]})})}function ne(e){var t=e.text,n=(0,m.Dv)(t);return(0,o.tZ)(o.HY,{children:n})}var re=n(9434),ie=n(29262),oe=n(56123),ae=n(67952),le=(0,l.X)({self:[c.l0.colWithGap(8)],content:[c.l0.colWithGap(2)],row:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.width("100%"),c.l0.flex.growAndShrink(1)],warningText:[c.l0.color.orangeStrongest],rowText:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.justify.start,c.l0.flex.growAndShrink(1)],textMini:[{alignSelf:"start"}],textLoading:[c.l0.height(8),c.l0.width(c.TV.space56),g.p.backgroundPulse(),c.l0.borderRadius(4),{justifySelf:"end"}]}),ce=u.K.span;function se(e){var t=e.mini,n=e.replUseTextAtom,r=e.availableQuotaText,i=e.quotaTextAtom,a=e.accountLimitStatusAtom,l=e.scratchDiskTextAtom,d=e.scratchLimitStatusAtom,f=e.loading,h=e.scratchDiskUseInBytes,p=e.replIconUrl,v=void 0===p?"https://icons.util.repl.co/bash.svg":p,g=e.replTitle,y=void 0===g?"This Repl":g,Z=(0,m.Dv)(n),x=(0,m.Dv)(i),C=(0,m.Dv)(l),k=(0,m.Dv)(a),S=(0,m.Dv)(d),E="At limit"===S||"Close to limit"===S,T=E?(0,o.BX)(s.xv,{variant:"small",css:le.warningText,multiline:!1,children:[(0,o.tZ)(w.Z,{})," Scratch Disk: ",C]}):(0,o.BX)(s.xv,{variant:"small",multiline:!1,color:"dimmer",children:[(0,o.tZ)(b.Z,{})," Scratch Disk: ",C]}),R="At limit"!==k&&h>2*ie.lb||E,D="At limit"===k?c.TV.accentNegativeDefault:c.TV.foregroundDimmer;if(t)return f?(0,o.tZ)(u.G,{css:le.textLoading}):(0,o.tZ)(s.xv,{multiline:!1,variant:"small",css:le.textMini,height:"singleLine",children:(0,o.tZ)(ce,{style:{color:D},children:Z})});var I=f?(0,o.tZ)(u.G,{css:le.textLoading}):(0,o.tZ)(s.xv,{variant:"small",color:"dimmer",multiline:!1,children:(0,o.tZ)(ce,{style:{color:D},children:Z})}),_=f?(0,o.tZ)(u.G,{css:le.textLoading}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(s.xv,{variant:"small",color:"dimmer",multiline:!1,children:x}),(0,o.BX)(s.xv,{variant:"small",color:"dimmest",multiline:!1,children:["(",r," available)"]})]});return(0,o.tZ)(u.G,{css:le.self,children:(0,o.BX)(u.G,{css:le.content,children:[(0,o.BX)(u.G,{css:le.row,children:[(0,o.tZ)(oe.ZP,{size:16,iconUrl:v,alt:y}),(0,o.BX)(u.G,{css:le.rowText,children:[(0,o.tZ)(s.xv,{variant:"small",color:"dimmer",multiline:!1,children:"This Repl:"}),I]})]}),(0,o.BX)(u.G,{css:le.row,children:[(0,o.tZ)(ae.Z,{size:16}),(0,o.BX)(u.G,{css:le.rowText,children:[(0,o.tZ)(s.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Account storage:"}),_]})]}),R?(0,o.tZ)(u.G,{css:le.row,children:(0,o.tZ)(M.u,{tooltip:"Scratch disk usage is temporary storage used for package installation or storing files. The first 2 GiB don\u2019t count towards your storage quota.",children:T})}):null]})})}var ue=(0,l.X)({self:[c.l0.colWithGap(2)],selfMini:[c.l0.colWithGap(4),c.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[c.l0.height(8)],selfTiny:[c.l0.width(48),c.l0.height(4)]}),de=3e5;function fe(e){var t,n,i,a,l=(0,X.Z)(),c=e.resources,s=c.dataAtom.disk,u=c.loading,d=(0,U.mE)({variables:{replId:l}}),f=d.data,h=d.loading,p="Repl"===(null===f||void 0===f||null===(t=f.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===(n=f.repl.owner)||void 0===n?void 0:n.__typename),m="Repl"===(null===f||void 0===f||null===(i=f.repl)||void 0===i?void 0:i.__typename)?null===(a=f.repl.owner)||void 0===a?void 0:a.id:void 0;return p?(0,o.tZ)(_,(0,r.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:s.currentAtom,totalAtom:s.totalAtom,measure:"MiB",loading:h||u},e)):(0,o.tZ)(he,(0,r.Z)({title:"Storage",description:"How much space your account has to store files",resourceData:e.resources,replId:l,ownerId:m},e))}function he(e){var t,n,a,l,c=e.title,s=e.description,d=e.resourceData,f=e.replId,h=e.ownerId,g=d.dataAtom.disk,y=g.currentAtom,b=g.totalAtom,w=g.scratchTotalAtom,x=g.scratchCurrentAtom,C=d.loading,k=(0,m.Dv)(b),S=(0,m.Dv)(y),E=(0,m.Dv)(w),R=(0,m.Dv)(x),D=(0,U.Pf)({fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-and-network",ssr:!1}),I=D.data,_=D.refetch,B="number"===typeof h&&(null===I||void 0===I||null===(t=I.currentUser)||void 0===t?void 0:t.id)===h,G=(0,v.useMemo)((function(){return(0,O.Z)((function(){return _()}),{wait:12e4,maxWait:de})}),[_]);(0,v.useEffect)((function(){var e=!1,t=null,n=function(){var r=(0,A.Z)((function(){return(0,N.__generator)(this,(function(r){switch(r.label){case 0:return e?[2]:[4,G()];case 1:return r.sent(),t=setTimeout(n,de),[2]}}))}));return function(){return r.apply(this,arguments)}}();return n(),function(){e=!0,t&&clearTimeout(t),G.isScheduled()&&G.flush()}}),[G,S,k,_]);var P="AccountStorageUtilization"===(null===I||void 0===I||null===(n=I.currentUser)||void 0===n?void 0:n.storageInfo.accountStorageUtilization.__typename)?Number(I.currentUser.storageInfo.accountStorageUtilization.total):0,X="StorageQuota"===(null===I||void 0===I||null===(a=I.currentUser)||void 0===a?void 0:a.storageInfo.storageQuota.__typename)?Number(I.currentUser.storageInfo.storageQuota.quota):0,M="AccountStorageUtilization"===(null===I||void 0===I||null===(l=I.currentUser)||void 0===l?void 0:l.storageInfo.accountStorageUtilization.__typename)?I.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===f})):void 0,F=null===M||void 0===M?void 0:M.repl.iconUrl,H=me(f,I),V=!(X>0&&P>0)||C,z=1024*S*1024,j=Math.max(P-H,0),q=Math.max(X-P,0),$=(0,L.p6)(P),K=(0,L.p6)(j),J=(0,L.p6)(X),ee=1024*R*1024,ne=1024*E*1024,oe=pe(ee,ne);(0,v.useEffect)((function(){var e=ee/ne;e>=.99&&(0,re.j)(re.U3.SCRATCH_DISK_LIMIT_HIT,{scratchDiskUseInBytes:ee,scratchDiskTotalInBytes:ne,scratchDiskUsePercentage:e})}));var ae=(0,T.iS)($,J),le=ve(R,E),ce=(0,Q.s)(z),fe=(0,Q.s)(j),he=(q/ie.lb).toLocaleString(void 0,{maximumFractionDigits:1}),ge=(0,Q.s)(X),ye=(0,Z.Z)((function(){return(0,p.cn)(K)}),[K]),Ze=(0,Z.Z)((function(){return(0,p.cn)(J)}),[J]),be=(0,Z.Z)((function(){return(0,p.cn)(ae)}),[ae]),we=(0,Z.Z)((function(){return(0,p.cn)(le)}),[le]),xe=(0,Z.Z)((function(){return(0,p.cn)(ce)}),[ce]),Ce=(0,Z.Z)((function(){return(0,p.cn)(ge)}),[ge]),ke=(0,Z.Z)((function(){return(0,p.cn)(oe)}),[oe]),Se=(0,Z.Z)((function(){return(0,p.cn)(fe)}),[fe]);return!B&&e.tiny?null:!B&&I&&"number"===typeof h?(0,o.tZ)(te,(0,r.Z)({currentAtom:y,loading:C},e)):e.tiny?(0,o.tZ)(u.G,{css:ue.selfTiny,children:(0,o.tZ)(W,(0,i.Z)((0,r.Z)({},e),{loading:V,thisReplAtom:y,otherReplsAtom:ye,quotaAtom:Ze,accountLimitStatusAtom:be,thisReplTextAtom:xe,otherReplsTextAtom:Se,quotaTextAtom:Ce,scratchDiskTextAtom:ke,scratchLimitStatusAtom:we}))}):(0,o.BX)(u.G,{css:e.mini?ue.selfMini:ue.self,children:[(0,o.tZ)(Y,{title:c,description:s,scratchLimitStatusAtom:we,accountLimitStatusAtom:be,mini:e.mini,loading:V}),(0,o.tZ)(se,{mini:e.mini,replUseTextAtom:xe,availableQuotaText:he,quotaTextAtom:Ce,accountLimitStatusAtom:be,scratchDiskTextAtom:ke,scratchLimitStatusAtom:we,scratchDiskUseInBytes:ee,replIconUrl:F,loading:V})]})}var pe=function(e,t){var n=(0,L.$s)(e).toLocaleString(void 0,{maximumFractionDigits:2}),r=(0,L.$s)(t).toLocaleString(void 0,{maximumFractionDigits:2});return"".concat(n," / ").concat(r," GiB")},me=function(e,t){var n,r;if("AccountStorageUtilization"!==(null===t||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.storageInfo.accountStorageUtilization.__typename))return 0;var i=null===(r=t.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(t){return t.repl.id===e})))||void 0===r?void 0:r.usage;return Number(null!==i&&void 0!==i?i:0)},ve=function(e,t){return e/t>=1?"At limit":(e-2*ie.lb)/t>=.05?"Close to limit":"fine"};function ge(e){var t=e.resources,n=t.dataAtom,a=n.cpu,l=n.ram,c=t.loading;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(_,(0,r.Z)({title:"CPU",description:"How much processing power your Repl is using",currentAtom:a.currentAtom,totalAtom:a.totalAtom,cpuCountAtom:a.cpuCountAtom,measure:"vCPU",loading:c},e)),(0,o.tZ)(_,(0,r.Z)({title:"RAM",description:"How much memory your Repl is using",currentAtom:l.rss.currentAtom,currentLabel:"Project Memory",currentSecondaryAtom:l.cache.currentAtom,currentSecondaryLabel:"Cache Memory",totalAtom:l.totalAtom,measure:"MiB",loading:c},e)),(0,o.tZ)(fe,(0,i.Z)((0,r.Z)({},e),{resources:e.resources}))]})}},44167:function(e,t,n){n.d(t,{Ow:function(){return c},V_:function(){return l},iS:function(){return a},jP:function(){return i},nQ:function(){return o}});var r=n(45317),i=.9,o=1;function a(e,t){if(void 0===e)return"empty";var n=e/t;return n>=o?"At limit":n>=i?"Close to limit":"fine"}function l(e){return"At limit"===e?r.TV.accentNegativeDefault:"Close to limit"===e?r.TV.orangeDefault:void 0}function c(e,t,n,r,i){return"empty"===e||void 0===t?"":"vCPU"===i?Math.round(100*Math.min(1,t/n))+"% of "+r+" vCPUs":Math.round(t).toLocaleString()+"/"+Math.round(n).toLocaleString()+" "+i}},87823:function(e,t,n){n.d(t,{ZP:function(){return te},L7:function(){return J}});var r=n(57135),i=n(57389),o=n(72006),a=n(4405),l=n(96583),c=n(74985),s=n(50959),u=n(43119),d=n(71440),f=n(24635);function h(){var e=(0,u.Z)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        language\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return h=function(){return e},e}var p={},m=(0,d.Ps)(h());var v=n(9434),g=n(34547),y=n(28639),Z=n(88965),b=n(26473),w=n(27773),x=n(53312),C=n(61623),k=n(43312),S=n(91148),E=n(2272),T=n(71999),R=n(15859);function D(){var e=(0,u.Z)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return D=function(){return e},e}var I={},_=(0,d.Ps)(D());var B=n(35382),G=n(43182),P=n(39995),A=new Date("2022-07-08"),N=(0,R.O4)("useCelebrateFirstReplPlay",!1);function U(){var e,t,n=function(e){var t=(0,o.Z)({},I,e);return f.a(_,t)}(),r=(0,P.Z)().preferences.extraDelight,i=(0,B.$0)().fireCircularBurstFrom,a=(0,E.Z)((0,T.KO)(N),2),l=a[0],c=a[1],s=null!==(t=null===(e=n.data)||void 0===e?void 0:e.currentUser)&&void 0!==t?t:null,u=!l&&s&&new Date(s.timeCreated)>=A;return{hasCelebrated:l,celebrate:function(e){e?((r||u)&&i({element:e}),u&&c(!0)):G.Tb(new Error("Cannot find element for celebrate Repl run confetti"))}}}var L,O=n(78945),X=n(56732),M=n(79451),F=n(25404),W=n(7131),H=n(63743),V=n(58125);function z(e){var t=e.runState,n=e.size,r=void 0===n?16:n;switch(t){case y.Ah.IDLE:return(0,c.tZ)(O.Z,{size:r});case y.Ah.RUNNING:return(0,c.tZ)(X.Z,{size:r});default:return(0,c.tZ)(w.Z,{size:r})}}var j,q,$=(L={},(0,i.Z)(L,y.Ah.IDLE,"Run"),(0,i.Z)(L,y.Ah.RUNNING,"Stop"),(0,i.Z)(L,y.Ah.STOPPING,"Stopping"),(0,i.Z)(L,y.Ah.OFFLINE,"Working"),(0,i.Z)(L,y.Ah.BEFORE_RUN,"Working"),L),Y=(j={small:48,large:100},(0,i.Z)(j,y.Ah.IDLE,68),(0,i.Z)(j,y.Ah.RUNNING,72),(0,i.Z)(j,y.Ah.STOPPING,92),(0,i.Z)(j,y.Ah.OFFLINE,86),(0,i.Z)(j,y.Ah.BEFORE_RUN,86),j),K=(0,k.iv)([Z.l0.py(12),Z.l0.width(Y.small),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(6),Z.l0.backgroundColor.accentPositiveDimmest,Z.l0.color.accentPositiveStrongest,Z.l0.cursor.pointer,Z.l0.focusRing,(q={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},Z.l0.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:Z.TV.accentPositiveStrongest}]},(0,i.Z)(q,(0,M.et)("tabletMax"),[Z.l0.width(Y.large)]),(0,i.Z)(q,":focus-visible",{outlineColor:"".concat(Z.TV.accentPositiveStrongest)}),q)]),Q=(0,k.iv)([Z.l0.color.foregroundDimmer,Z.l0.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},Z.l0.backgroundColor.backgroundHighest],"&:active":[{borderColor:Z.TV.accentPrimaryDefault}]}]);function J(e){var t=(0,s.useState)(e.getRunState()),n=t[0],r=t[1];return(0,s.useEffect)((function(){return r(e.getRunState()),e.onStateChanged((function(e){r(e)}))}),[e]),n}var ee=s.forwardRef((function(e,t){var n=e.runner,u=e.runConfig,d=e.onRunInitiated,h=e.style,w=void 0===h?"default":h,k=e.disableTooltip,E=e.shortcut,T=(0,g.Z)(),R=J(n),D=function(e){var t=(0,o.Z)({},p,e);return f.a(m,t)}({variables:{id:T}}).data,I="Repl"===(null===D||void 0===D?void 0:D.repl.__typename)?D.repl:null,_=U().celebrate,B=R!==y.Ah.IDLE&&R!==y.Ah.RUNNING,G=(0,F.Z)().showError,P=(0,s.useRef)(null),A=function(){var e=(0,r.Z)((function(){var e,t,r,i,o,a,c,s;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),R!==y.Ah.IDLE?[3,2]:(d&&d(),P.current&&_(P.current),[4,n.run(u)]);case 1:return l.sent(),I&&(0,v.j)(v.U3.PROJECT_RAN,{placement:"primary_btn",language:I.language,replId:I.id,replTitle:I.title,rootOriginReplUrl:I.rootOriginReplUrl,templateTitle:null===(e=I.source)||void 0===e||null===(t=e.release)||void 0===t||null===(r=t.repl)||void 0===r?void 0:r.title,templateOwner:null===(i=I.source)||void 0===i||null===(o=i.release)||void 0===o||null===(a=o.repl)||void 0===a||null===(c=a.owner)||void 0===c?void 0:c.username}),[2];case 2:return R===y.Ah.RUNNING?[2,n.stopRun()]:[3,4];case 3:return s=l.sent(),G(s.toString()),W.kg.error("run button error",{errorMessage:s.message}),R===y.Ah.RUNNING?[2,n.stopRun()]:[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();if("floating"===w)return(0,c.tZ)(b.G,{tag:"button",disabled:B,css:[{position:"fixed",right:24,bottom:72,zIndex:1},Z.l0.center,{height:"50px",width:"50px",opacity:"0.5",cursor:"pointer",borderRadius:"100%",border:"solid 2px var(--accent-positive-dimmer)",backgroundColor:Z.TV.accentPositiveDimmest}],onClick:A,innerRef:P,children:(0,c.tZ)(z,{runState:R})});var N=R===y.Ah.IDLE;return"inline-small"===w?(0,c.BX)("button",{"data-cy":"ws-run-btn",onClick:A,ref:P,disabled:B,css:[Z.l0.p(12),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(8),N?Z.l0.backgroundColor.accentPositiveDimmest:Z.l0.backgroundColor.backgroundHigher,N?Z.l0.color.accentPositiveStronger:Z.l0.color.foregroundDimmer,{border:"1px solid",borderColor:N?Z.TV.accentPositiveDimmest:Z.TV.backgroundHigher},Z.l0.width("100%"),Z.l0.height("100%")],children:[(0,c.tZ)(z,{runState:R}),(0,c.tZ)(x.xv,{variant:"subheadDefault",css:[Z.l0.pl(8)],multiline:!1,children:$[R]})]}):(0,c.tZ)(C.u,{placement:"bottom",isDisabled:k||!E,tooltip:E?(0,c.tZ)(b.G,{css:{margin:-4},children:(0,c.tZ)(V.bM,{keyCombo:E,small:!0})}):null,children:function(e,n){return(0,c.BX)("button",(0,a.Z)((0,o.Z)({},e),{onClick:A,ref:(0,H.l)(P,n,t),css:[K,!N&&Q,Z.l0.height(32),(0,i.Z)({transition:"width 80ms ease-out"},(0,M.et)("tabletMax"),Z.l0.width(Y[R]))],children:[(0,c.tZ)(z,{runState:R,size:12}),(0,c.tZ)(x.xv,{multiline:!1,css:[Z.l0.pl(6),Z.l0.display.none,Z.l0.fontWeight.medium,(0,i.Z)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(S.j.tabletMax,"px)"),[Z.l0.display.block])],children:$[R]})]}))}})})),te=ee},6686:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(72006),i=n(4405),o=n(77637),a=n(74985),l=n(16296),c=n(88965),s=(0,n(61025).X)({checked:[c.l0.width(32),c.l0.height(32),c.l0.backgroundColor.backgroundHigher],unchecked:[c.l0.width(32),c.l0.height(32),c.l0.color.foregroundDimmest]});function u(e){var t=e.alt,n=e.icon,c=e.checked,u=e.onClick,d=(0,o.Z)(e,["alt","icon","checked","onClick"]);return(0,a.tZ)(l.hU,(0,i.Z)((0,r.Z)({},d),{css:c?s.checked:s.unchecked,alt:"".concat(c?"Disable":"Enable"," ").concat(t),onClick:u,children:n}))}},5681:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(74985),i=n(48587),o=n(61811),a=n(39995),l=n(61623),c=n(88965),s=n(61e3),u=n(79836),d=n(23743),f=n(28435),h=n(22943),p=n(81022),m=n(8555),v=n(62511),g=n(27773),y=n(26966),Z=n(94468),b=n(50959),w=n(68339),x=n(87978),C=n(26473),k=n(63119);function S(){var e,t=(0,Z.uN)(),n=null===t||void 0===t||null===(e=t.state)||void 0===e?void 0:e.facet(o.Yp);return n?(0,r.tZ)(E,{fileName:n}):null}function E(e){var t=e.fileName,n=(0,a.Z)().preferences.codeIntelligence,s=function(){var e=(0,Z.uN)(),t=(0,b.useState)(null===e||void 0===e?void 0:e.state.facet(o.Q$)),n=t[0],r=t[1];return(0,k.M)((function(){return i.tk.updateListener.of((function(e){var t=e.startState.facet(o.Q$),n=e.state.facet(o.Q$);t!==n&&r(n)}))}),[],e,"CodeIntelligenceStatus"),(0,b.useEffect)((function(){if(e)return r(e.state.facet(o.Q$)),function(){r(void 0)};r(void 0)}),[e]),n}(),h=null!=s,p=(0,d.Z)(t),m=function(e){var t=(0,f.Z)().lspnix,n=(0,a.Z)().preferences.codeIntelligence,r=(0,b.useState)(!1),i=r[0],o=r[1];(0,b.useEffect)((function(){null!=e&&o(!1)}),[e]);var l=(0,b.useCallback)((function(){n&&(t.disable(),t.enable(),o(!0))}),[t,n]);return{isRestartingLSP:i,restartLSP:l}}(p),v=m.isRestartingLSP,g=m.restartLSP,x=(0,b.useState)(null===p||void 0===p?void 0:p.getServerState()),C=x[0],S=x[1],E=(0,b.useState)(null===p||void 0===p?void 0:p.getServerHealth()),D=E[0],I=E[1],_=C===u.a.INITIALIZING||v,B=C===u.a.INITIALIZED,G=C===u.a.EXITED||v,P=null!=p&&D===u.N.READY,A=null!=p&&D===u.N.STALLED;(0,b.useEffect)((function(){if(p)return S(p.getServerState()),I(p.getServerHealth()),(0,w.uf)([p.onServerStateChange((function(e){S(e)})),p.onServerHealthChange((function(e){I(e)}))])}),[p]);var N=function(e){var t=e.codeIntelligence,n=e.isRestartingLSP,r=e.isInitializedLSP,i=e.isExitedLSP,o=e.isReadyLSP,a=e.isStalledLSP,l=e.hasPartialSupport;if(n)return"Restarting language server...";if(!t)return"Code intelligence is disabled. Enable it in settings.";if(i)return"Language support is not available because the language server exited.";if(a)return"Language support is stalled due to a resource constraint or error.";if(r&&!o)return"Language support may be inaccurate because it is initializing.";if(!r&&l)return"Language support may be inaccurate because code intelligence is not available."}({codeIntelligence:n,isRestartingLSP:v,isInitializedLSP:B,isReadyLSP:P,isExitedLSP:G,isStalledLSP:A,hasPartialSupport:h}),U=G||_||A||!p;return(0,r.tZ)(l.u,{isDisabled:void 0===N,tooltip:N,children:(0,r.tZ)(y.Z,{disabled:!U,css:[{svg:[c.l0.width(16),c.l0.height(16)]}],iconLeft:R({isLoadingLSP:_,isInitializedLSP:B,isReadyLSP:P,isExitedLSP:G,isStalledLSP:A,hasPartialSupport:h}),text:T({codeMirrorLanguageSupport:s,fileName:t}),onClick:function(){G||_||A?g():p||window.open("https://docs.replit.com/programming-ide/configuring-repl#languages","_blank")}})})}function T(e){var t,n=e.codeMirrorLanguageSupport,r=e.fileName,i=(0,s.v)(r);return i||(n?0===n.language.name.length?(0,x.r6)(r):(t=n.language.name).slice(0,1).toUpperCase()+t.slice(1).toLowerCase():"Plain Text")}function R(e){var t=e.isLoadingLSP,n=e.isInitializedLSP,i=e.isReadyLSP,o=e.isExitedLSP,a=e.isStalledLSP,l=e.hasPartialSupport;return a?(0,r.tZ)(v.Z,{size:16}):t||n&&!i?(0,r.tZ)(g.Z,{size:16,color:c.TV.blueStronger}):i?(0,r.tZ)(C.G,{dataCy:"ws-code-intelligence-active",children:(0,r.tZ)(p.Z,{size:16})}):o?(0,r.tZ)(m.Z,{size:16}):l?(0,r.tZ)(v.Z,{size:16}):(0,r.tZ)(h.Z,{size:16})}},15906:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(57135),i=n(96583),o=n(74985),a=n(15935),l=n(28991),c=n(13081),s=n(26966),u=n(45317);function d(e){var t=e.performPaneOperation,n=(0,l.Z)(function(){var e=(0,r.Z)((function(e){var t,n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getRepositoryState()];case 1:return(t=i.sent()).error?[2,t]:(n=t.type,r=null,n===a.y5.INITIALIZING?[3,3]:[4,e.status()]);case 2:if((o=i.sent()).error)return[2,o];r=o,i.label=3;case 3:return[2,{branchName:null===r||void 0===r?void 0:r.branch,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}()),d=!n||n.error?null:n.branchName;return d?(0,o.tZ)(s.Z,{onClick:function(){return null===t||void 0===t?void 0:t({operation:"open",pane:{type:"git"}})},text:d,iconLeft:(0,o.tZ)(c.Z,{color:u.TV.foregroundDimmer,size:12})}):null}},29353:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(74985),i=n(8286),o=n(82843),a=n(50480),l=n(65812),c=n(88965),s=n(26966),u=n(94468),d=n(50959);function f(e){if(e.facet(o.o))return"";var t=e.selection,n="",r=0;if(t.ranges.length>1){r=t.ranges.reduce((function(e,t){return e+(t.to-t.from)}),0);var i=t.ranges.length;n="".concat(i," selections")}else{var a=t.ranges[0],l=e.doc.lineAt(a.head),c=a.head-l.from;r=a.to-a.from,n="Ln ".concat(l.number,", Col ").concat(c+1)}return r>0&&(n+=" (".concat(r," chars)")),n}function h(){var e,t=(0,d.useRef)(null),n=(0,u.uN)();return(0,d.useEffect)((function(){var e,r=t.current,i=null!==(e=null===n||void 0===n?void 0:n.plugin(a.pE))&&void 0!==e?e:null;if(r&&n&&i&&!i.destroyed){var c=null,s=n.state;r.textContent=f(s);var u=i.bind({changed:function(e){return(0,l.a)(e,"selection",o.o)},callback:function(e){s=e.state,null===c&&(c=requestAnimationFrame((function(){c=null,r.textContent=s?f(s):""})))}});return function(){u(),null!==c&&cancelAnimationFrame(c),r.textContent=""}}}),[n]),!n&&(null===(e=t.current)||void 0===e?void 0:e.textContent)&&(t.current.textContent=""),(0,d.useMemo)((function(){return(0,r.tZ)(s.Z,{text:(0,r.tZ)("span",{ref:t,"data-cy":"current-position"}),css:[c.l0.color.foregroundDimmest],onClick:n?function(){return(0,i.zo)(n)}:void 0})}),[n])}},26966:function(e,t,n){var r=n(72006),i=n(77637),o=n(74985),a=n(95141),l=n(37268),c=n(61025),s=n(88965),u=n(63723),d=(0,c.X)({base:[s.l0.backgroundColor.backgroundDefault,s.l0.color.foregroundDimmer,s.l0.borderRadius(0),s.l0.height("auto"),s.l0.py(4),s.l0.px(6),{"> div":s.l0.rowWithGap(4)}],baseForGlobalStatusBar:[s.l0.backgroundColor.backgroundRoot,s.l0.color.foregroundDimmer,s.l0.borderRadius(2),s.l0.height("auto"),s.l0.py(4),s.l0.px(6),{"> div":s.l0.rowWithGap(4)}],baseForGlobalStatusBarWithHover:{"&:hover":[s.l0.backgroundColor.backgroundDefault,s.l0.color.foregroundDimmer]}});t.Z=function(e){var t=e.css,n=e.innerRef,c=(0,i.Z)(e,["css","innerRef"]),s=(0,u.P5)({controlName:"flag-global-status-bar",default:!1});return(0,o.tZ)(l.Tg,{background:s?void 0:"root",children:(0,o.tZ)(a.zx,(0,r.Z)({size:"small",css:[s?d.baseForGlobalStatusBar:d.base,s&&e.onClick&&d.baseForGlobalStatusBarWithHover,t],ref:n},c))})}},84296:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(2272),i=n(74985),o=n(39995),a=n(9434),l=n(61623),c=n(61025),s=n(96893),u=n(88965),d=n(26966),f=n(63723),h=n(81897),p=n(26473),m=n(20538),v=n(51631),g=n(72006),y=n(43119),Z=n(71440),b=n(24635);function w(){var e=(0,y.Z)(["\n  query StatusBarGhostwriterCompleteCodeStatus {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return w=function(){return e},e}var x={},C=(0,Z.Ps)(w());var k=n(63044),S=n(53312),E=n(50959),T=n(16679),R=n(71999),D=n(37268),I=n(58125),_=n(51467),B=n(74395),G=n(89845),P=n(94468),A=n(13019),N=n(87708),U=n(48587),L=n(32645),O=(0,c.X)({roundedContainer:[{borderBottomLeftRadius:u.TV.space6}],featureHeader:[u.l0.rowWithGap(8),u.l0.align.center],popover:[u.l0.p(8),u.l0.borderRadius(8),u.l0.maxWidth(260),u.l0.colWithGap(8)],featureTitle:[u.l0.rowWithGap(4),u.l0.align.center,u.l0.flex.growAndShrink(1),u.l0.fontWeight.medium],enableAutocomplete:[u.l0.rowWithGap(4),u.l0.align.center],text:[u.l0.colWithGap(8)],hint:[u.l0.rowWithGap(4),u.l0.align.center]});function X(e){var t=(0,E.useId)();return(0,i.BX)(D.Tg,{css:O.popover,children:[(0,i.BX)(p.G,{css:O.featureHeader,children:[(0,i.BX)(p.G,{css:O.featureTitle,children:[(0,i.tZ)(k.Z,{color:u.TV.blurpleDefault}),(0,i.tZ)(S.xv,{children:"AI Autocomplete"})]}),(0,i.BX)(p.G,{css:O.enableAutocomplete,children:[(0,i.tZ)(p.G,{tag:"label",htmlFor:t,children:(0,i.tZ)(S.xv,{color:"dimmer",variant:"small",children:"Enable"})}),(0,i.tZ)(T.X,{id:t,checked:e.checked,onChange:e.onChange})]})]}),(0,i.BX)(p.G,{css:O.text,children:[(0,i.tZ)(S.xv,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,i.BX)(p.G,{css:O.hint,children:[(0,i.tZ)(S.xv,{color:"dimmer",variant:"small",children:"Press"}),(0,i.tZ)(I.bM,{small:!0,keyCombo:"Tab"}),(0,i.tZ)(S.xv,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}var M=function(e){var t=e.rounded,n=void 0===t||t,c=function(){Z({codeSuggestion:!y}),(0,a.j)(a.U3.CODE_SUGGESTION_TOGGLED,{enabled:!y,source:"editor_footer"})},p=(0,o.Z)(),y=p.preferences.codeSuggestion,Z=p.update,w=(0,r.Z)((0,R.KO)(G.t),1)[0],k=(0,E.useRef)(!0),S=(0,m.o)("ai-code-completion"),T=(0,f.P5)({controlName:"flag-gw-charizard"}),D=function(e){var t=(0,g.Z)({},x,e);return b.a(C,t)}({skip:!T}),I=D.data,M=D.loading,F=null===I||void 0===I?void 0:I.currentUser,W=(null===F||void 0===F?void 0:F.userSubscriptionType)===v.HP.HackerPro,H=(0,E.useRef)(null),V=!S.isDone&&!W,z=(0,E.useRef)(!1),j=(0,B.d)({onOpenChange:function(e){e?z.current=!0:(setTimeout((function(){z.current=!1})),V&&S.setAsDone())}}),q=(0,P.uN)();!function(e,t){var n=e.view,r=e.skip,i=e.effect,o=(0,_.Z)(t);(0,E.useEffect)((function(){if(n&&!r){var e=new N.F6,t=U.tk.updateListener.of((function(e){(0,L.j)(e,i,(function(e){return o.current(e)}))}));return n.dispatch({effects:N.Py.appendConfig.of(e.of(t))}),function(){n.dispatch({effects:e.reconfigure([])})}}}),[n,r,o,i])}({view:q,effect:A.dp,skip:!V},(function(){k.current=!1,j.open()}));var $=(0,_.Z)(j);(0,E.useEffect)((function(){w.tooltipOpen&&(null===q||void 0===q?void 0:q.hasFocus)&&(k.current=!1,$.current.open())}),[w.tooltipOpen,q,$]);var Y=(0,i.tZ)(s.Z,{color:y?u.TV.blurpleDefault:void 0});if(M||S.isLoading)return(0,i.tZ)(d.Z,{disabled:!0,css:n&&O.roundedContainer,text:"AI",iconLeft:Y});if(T)return(0,i.BX)(i.HY,{children:[(0,i.tZ)(d.Z,{innerRef:H,css:n&&O.roundedContainer,text:"AI",iconLeft:Y,onClick:function(){z.current||j.open()}}),j.isOpen?(0,i.tZ)(h.J,{noArrow:!0,placement:"top left",allowPageClicks:!0,background:"default",triggerRef:H,state:j,focusOnOpen:k.current,children:(0,i.tZ)(X,{onChange:c,checked:y})}):null]});var K=y?"Disable":"Enable";return(0,i.tZ)(l.u,{tooltip:"".concat(K," ").concat(T?"AI":"Ghostwriter"," Code Completion"),placement:"top-start",children:(0,i.tZ)(d.Z,{text:T?"AI":"Ghostwriter",iconLeft:Y,onClick:c,css:n&&O.roundedContainer})})}},20457:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(72006),i=n(4405),o=n(77637),a=n(9970),l=n(74985),c=n(68935),s=n(87708),u=n(43312),d=n(21163),f=n(51007);function h(e,t,n){var r=[],i=0,o=!0,a=!1,l=void 0;try{for(var c,u=e.iterLines()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var h=c.value,p=i;if(i=i+h.length+1,0!==h.length){var m=(0,f.L)(h,t),v=h.trimStart(),g=p+(h.length-v.length);if(0!==m&&p!==g){var y="";if(n===d.Q.TABS){var Z=Math.floor(m/t),b=m%t;y="\t".repeat(Z)+" ".repeat(b)}else n===d.Q.SPACES&&(y=" ".repeat(m));y+v!==h&&r.push({from:p,to:g,insert:y})}}}}catch(w){a=!0,l=w}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return s.as.of(r,e.length)}function p(e,t,n,r){if(t===d.Q.TABS)return s.as.empty(e.length);var i=" ".repeat(r),o=[],a=0,l=!0,c=!1,u=void 0;try{for(var h,p=e.iterLines()[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var m=h.value,v=a;if(a=a+m.length+1,0!==m.length){var g=(0,f.L)(m,n),y=m.trimStart(),Z=v+(m.length-y.length);if(0!==g&&v!==Z){var b=Math.floor(g/n),w=g%n,x=i.repeat(b)+" ".repeat(w);x+y!==m&&o.push({from:v,to:Z,insert:x})}}}}catch(C){c=!0,u=C}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}return s.as.of(o,e.length)}var m=n(18210),v=n(82843),g=n(50480),y=n(63723),Z=n(39995),b=n(95141),w=n(90602),x=n(16296),C=n(6108),k=n(22004),S=n(81897),E=n(54314),T=n(55418),R=n(53312),D=n(61623),I=n(26473),_=n(61025),B=n(44385),G=n(68912),P=n(13606),A=n(27773),N=n(95862),U=n(85247),L=n(8151),O=n(79824),X=n(88965),M=n(89835),F=n(94468),W=n(50959),H=n(87978),V=n(26966),z=(0,_.X)({surface:[X.l0.height("100%")],cursorOverlay:{cursor:"pointer"},menu:[X.l0.p(8),X.l0.colWithGap(8),X.l0.maxWidth(390)],close:[X.l0.position.absolute,X.l0.top(4),X.l0.right(4)],file:[X.l0.pl(4),X.l0.display.inlineFlex,X.l0.rowWithGap(4),X.l0.align.center,{verticalAlign:"top"}],space:[X.l0.width(2),X.l0.color.foregroundDimmer,X.l0.textAlign.center],section:[X.l0.rowWithGap(8),X.l0.align.center,X.l0.justify.spaceBetween],header:[X.l0.colWithGap(2),X.l0.flex.shrink(1)],selects:[X.l0.rowWithGap(4)],sizeInput:{border:"none"},buttonsGroup:[X.l0.rowWithGap(8),X.l0.align.center,X.l0.justify.spaceBetween],saveButtons:[X.l0.rowWithGap(4)]});function j(e){var t,n=e.path,o=e.openSettings,f=(0,Z.Z)().preferences,_=(0,F.uN)(),P=(0,g.IK)(_,v.o),A=!(null===P||!f.indentDetection)&&P,j=(0,g.IK)(_,m.K_),q=(0,g.IK)(_,m.E2),K=null!==(t=(0,g.IK)(_,s.yy.tabSize))&&void 0!==t?t:f.indentSize,Q="\t"===(0,g.IK)(_,c.c)?d.Q.TABS:d.Q.SPACES,J=(0,y.P5)({controlName:"flag-editor-indentation-convert",logFlagToAnalytics:!1}),ee=(0,W.useState)(!1),te=ee[0],ne=ee[1],re=(0,W.useState)(Q),ie=re[0],oe=re[1],ae=(0,W.useState)(K),le=ae[0],ce=ae[1],se=(0,W.useState)(!1),ue=se[0],de=se[1],fe=(0,W.useState)(!1),he=fe[0],pe=fe[1],me=(0,W.useState)(!1),ve=me[0],ge=me[1];(0,W.useEffect)((function(){ue||(oe(Q),ce(K))}),[Q,K,ue]),(0,W.useEffect)((function(){te||(oe(Q),ce(K),de(!1))}),[te,Q,K]),(0,W.useEffect)((function(){ie===Q&&le===K&&de(!1)}),[ie,le,Q,K]),(0,W.useEffect)((function(){if(he||ve){var e=setTimeout((function(){pe(!1),ge(!1)}),1e3);return function(){return clearTimeout(e)}}}),[he,ve]),A&&te&&ne(!1);var ye=(0,W.useCallback)((function(){if(_){var e=h(_.state.doc,K,Q);_.dispatch({changes:e,effects:m.Fm.of(!0)}),ge(!0)}}),[_,Q,K]),Ze=(0,W.useCallback)((function(){_&&(_.dispatch({effects:m.Fm.of(!0)}),_.state.field(m.E2)&&_.dispatch({effects:m.O4.of({type:void 0,size:void 0})}))}),[_]),be=(0,W.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_){var t=void 0,n=[m.O4.of({type:ie,size:le})];if(e){if(ie!==Q&&(t=h(_.state.doc,K,ie)),ie===d.Q.SPACES&&le!==K){var r=t?t.apply(_.state.doc):_.state.doc,i=p(r,ie,K,le);t=t?t.compose(i):i}t&&n.push(m.Fm.of(!0))}_.dispatch({changes:t,effects:n}),de(!1),pe(!0)}}),[_,Q,K,ie,le]),we=(0,W.useCallback)((function(){ne(!1),o()}),[o]),xe=(0,y.P5)({controlName:"flag-global-status-bar",default:!1}),Ce=(0,W.useMemo)((function(){var e=[xe?X.l0.borderRadius(2):X.l0.borderRadius(0),X.l0.p(4),X.l0.align.center];return te?(e.unshift(C.gU.filled),e.push({pointerEvents:"none"})):e.unshift(C.gU.nofill),A?e.push(X.l0.rowWithGap(4)):e.push(X.l0.rowWithGap(8)),(0,u.iv)(e)}),[te,A,xe]);return(0,l.BX)(S.x,{label:"File indentation",placement:"top",isOpen:te,onOpenChange:ne,allowPageClicks:!0,children:[function(e){return(0,l.tZ)(D.u,{tooltip:"File indentation",isDisabled:te,children:(0,l.tZ)("div",{css:z.cursorOverlay,children:(0,l.tZ)(V.Z,(0,i.Z)((0,r.Z)({},e),{innerRef:e.ref,css:Ce,text:(0,l.BX)(l.HY,{children:[(0,l.tZ)($,{type:Q,loading:A}),(0,l.tZ)(Y,{type:Q,size:K,loading:A})]})}))})})},(0,l.BX)(I.G,{css:z.menu,children:[(0,l.tZ)(I.G,{css:z.close,children:(0,l.tZ)(x.hU,{alt:"Close",onClick:function(){return ne(!1)},children:(0,l.tZ)(G.Z,{})})}),(0,l.BX)(R.h4,{level:1,children:["Indentation for",(0,l.BX)("span",{css:z.file,children:[(0,l.tZ)(k.Z,{path:n,size:16})," ",(0,l.tZ)("span",{children:(0,H.UO)(n)})]})]}),j?(0,l.tZ)(T.E,{colorway:"warning",icon:(0,l.tZ)(O.Z,{}),text:"This file type requires that ".concat(j===d.Q.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,l.tZ)(w.R,{}),(0,l.BX)(I.G,{css:z.section,children:[(0,l.BX)(I.G,{css:z.header,children:[(0,l.tZ)(R.xv,{multiline:!1,children:"Indentation unit"}),(0,l.tZ)(R.xv,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,l.BX)(I.G,{css:z.selects,children:[(0,l.tZ)(M.qm,{css:z.sizeInput,size:le,onChange:function(e){e!==le&&(ce(e),de(!0))}}),(0,l.tZ)(E.P,{items:(0,a.Z)(M.Ly),selectedItem:M.Ly.find((function(e){return e.value===(ie===d.Q.SPACES?"spaces":"tabs")})),onChange:function(e){var t="spaces"===(null===e||void 0===e?void 0:e.value)?d.Q.SPACES:d.Q.TABS;t!==ie&&(oe(t),de(!0))}})]})]}),(0,l.tZ)(w.R,{}),q?(0,l.BX)(l.HY,{children:[(0,l.BX)(I.G,{css:z.section,children:[(0,l.BX)(I.G,{css:z.header,children:[(0,l.tZ)(R.xv,{multiline:!1,children:"Detected indentation unit"}),(0,l.BX)(R.xv,{variant:"small",color:"dimmer",children:["This file appears to use a unit of ",q.size," ",q.type===d.Q.SPACES?"spaces":"tabs","."]})]}),(0,l.tZ)(b.zx,{text:"Re-detect",iconLeft:(0,l.tZ)(N.Z,{}),onClick:Ze})]}),(0,l.tZ)(w.R,{})]}):null,(0,l.BX)(I.G,{css:z.buttonsGroup,children:[(0,l.tZ)(b.zx,{text:"Global settings",iconLeft:(0,l.tZ)(U.Z,{}),onClick:we}),(0,l.tZ)(I.G,{css:z.saveButtons,children:he||ve?(0,l.tZ)(l.HY,{children:he?(0,l.tZ)(b.zx,{text:"Saved!",colorway:"positive",iconLeft:(0,l.tZ)(B.Z,{}),onClick:function(){return be(!1)}}):(0,l.tZ)(b.zx,{text:"Re-indented!",colorway:"positive",iconLeft:(0,l.tZ)(B.Z,{}),onClick:ye})}):(0,l.tZ)(l.HY,{children:ue?(0,l.BX)(l.HY,{children:[J?(0,l.tZ)(b.zx,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,l.tZ)(L.Z,{}),onClick:function(){return be(!0)}}):null,(0,l.tZ)(b.zx,{text:"Save",iconLeft:(0,l.tZ)(B.Z,{}),onClick:function(){return be(!1)}})]}):(0,l.tZ)(l.HY,{children:J?(0,l.tZ)(b.zx,{text:"Re-indent file",iconLeft:(0,l.tZ)(L.Z,{}),onClick:ye}):null})})})]})]})]})}function q(e){var t=e.size,n=void 0===t?16:t,a=(0,o.Z)(e,["size"]);return(0,l.tZ)(P.Z,(0,i.Z)((0,r.Z)({size:n},a),{children:(0,l.tZ)("circle",{cx:n,cy:n,r:n/2,fillRule:"evenodd"})}))}function $(e){var t=e.type;return e.loading?(0,l.tZ)(A.Z,{size:12}):t===d.Q.SPACES?(0,l.tZ)(q,{color:X.TV.foregroundDimmer,size:12}):(0,l.tZ)(L.Z,{color:X.TV.foregroundDimmer,size:12})}function Y(e){var t=e.type,n=e.size;if(e.loading)return(0,l.tZ)(R.xv,{variant:"small",color:"dimmest",children:"Detecting..."});var r=t===d.Q.SPACES?"Spaces":"Tabs";return(0,l.BX)(R.xv,{variant:"small",color:"dimmer",children:[r,": ",n]})}},13974:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(2272),i=n(74985),o=n(23743),a=n(94468),l=n(50959),c=n(7225),s=n(61811),u=n(61623),d=n(25602),f=n(10267),h=n(79028),p=n(26966),m=n(21990),v=n(50769),g=n(26473),y=n(53312),Z=n(61025),b=n(88965),w=(0,Z.X)({group:[b.l0.align.center,b.l0.rowWithGap(4)],row:[b.l0.align.center,b.l0.rowWithGap(8)]});function x(){var e,t=(0,a.uN)(),n=null===t||void 0===t||null===(e=t.state)||void 0===e?void 0:e.facet(s.Yp);return n?(0,i.tZ)(C,{fileName:n}):null}function C(e){var t=e.fileName,n=(0,a.uN)(),s=function(e){var t=(0,l.useState)(null),n=t[0],i=t[1],a=(0,o.Z)(e),c=(0,d.nC)(),s=(0,f.dr)();return(0,l.useEffect)((function(){if(a){var t=function(t){var n,i=c().find((function(e){var t=(0,r.Z)(e,2);return t[0],"problems"===t[1].type}));if(i){var o=s(i[0]);o&&"problems"===o.type&&(null===(n=o.updateProblems)||void 0===n||n.call(o,e,t))}};if(a.isOpen(e)){var n=a.getDiagnostics(e);i(n),t(n)}var o=a.onDiagnostics((function(n){n.path===e&&(i(n.diagnostics),t(n.diagnostics))}));return function(){o(),c().some((function(t){var n=(0,r.Z)(t,2),i=(n[0],n[1]);return"codeEditor"===i.type&&i.data.path===e}))||t([])}}}),[a,e,c,s]),n}(t),Z=(0,l.useMemo)((function(){return s?function(e){var t=e.reduce((function(e,t){return void 0===t.severity||(e[t.severity]=(e[t.severity]||0)+1),e}),{});return e.length>0&&0===Object.keys(t).length&&(t[c.DiagnosticSeverity.Error]=e.length),t}(s):null}),[s]);if(!Z)return null;var b=Z[c.DiagnosticSeverity.Error]||0,x=Z[c.DiagnosticSeverity.Warning]||0,C="";return 0===b&&0===x&&(C="No problems"),b>0&&(C+="".concat((0,v.Z)("Error",b),": ").concat(b)),x>0&&(C.length>0&&(C+=", "),C+="".concat((0,v.Z)("Warning",x),": ").concat(x)),(0,i.tZ)(u.u,{tooltip:C,children:(0,i.tZ)(p.Z,{text:(0,i.BX)(g.G,{css:w.row,children:[(0,i.BX)(g.G,{css:w.group,children:[(0,i.tZ)(h.Z,{severity:c.DiagnosticSeverity.Error,size:12}),(0,i.tZ)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(b)})]}),(0,i.BX)(g.G,{css:w.group,children:[(0,i.tZ)(h.Z,{severity:c.DiagnosticSeverity.Warning,size:12}),(0,i.tZ)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(x)})]})]}),disabled:!n,onClick:n?function(){return(0,m.Z)(n)}:void 0})})}},20087:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(74985),i=n(48587),o=n(39995),a=n(50959),l=n(94468),c=n(26966),s=n(58177),u=n(61025),d=n(63119),f=(0,u.X)({text:[{textTransform:"capitalize"}]});function h(){var e=(0,a.useState)(null),t=e[0],u=e[1],h=(0,a.useRef)(null),p=(0,l.uN)(),m=(0,o.Z)().preferences,v="vim"===(null===m||void 0===m?void 0:m.keyboardHandler),g=(0,a.useCallback)((function(e){if(h.current){var n=null!==e&&void 0!==e?e:"";if(p&&t&&void 0===e){var r,i,o=t.getCM(p);n=null!==(i=null===(r=null===o||void 0===o?void 0:o.state.vim)||void 0===r?void 0:r.mode)&&void 0!==i?i:"normal"}h.current.innerText!==n&&(h.current.innerText=n||"")}}),[p,t]);return(0,a.useEffect)((function(){v&&!t&&n.e(8203).then(n.bind(n,97556)).then((function(e){u(e),g()}))}),[v,t,g]),(0,d.M)((function(){return v&&t?i.tk.updateListener.of((function(){setTimeout((function(){g()}),0)})):(g(null),null)}),[g,v,t],p,"ModeStatus"),(0,r.tZ)(r.HY,{children:v?(0,r.tZ)(c.Z,{disabled:!0,iconLeft:(0,r.tZ)(s.Z,{}),text:(0,r.tZ)("span",{css:f.text,ref:h})}):null})}},27500:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(74985),i=n(67112),o=n(50480),a=n(71549),l=n(26966),c=n(94468);function s(){var e=(0,c.uN)(),t=(0,o.IK)(e,i.Ou);if(!e||!t||null===t.head)return null;var n=t.mode===i.Ut.INLINE_DIFF;return(0,r.tZ)(l.Z,{text:n?"Diffing":"Diff",colorway:n?"primary":void 0,iconLeft:(0,r.tZ)(a.Z,{}),onClick:function(){e.dispatch({effects:i.x9.of(n?i.Ut.GUTTER_DIFF:i.Ut.INLINE_DIFF)})}})}},94681:function(e,t,n){n.d(t,{Z:function(){return z}});var r=n(2272),i=n(74985),o=n(50959),a=n(55418),l=n(99401),c=n(26473),s=n(88965),u=n(95134),d=n(61623),f=n(53312),h=n(44385),p=n(14213),m=n(82893),v=n.n(m),g=n(72006),y=n(3927),Z=n(60966),b=n(66164),w=n(25462),x=n(39995),C=n(43312),k=function(e){return(0,C.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:s.TV.foregroundDefault,fontFamily:"".concat(s.TV.fontFamilyDefault," !important"),fontSize:e,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:s.TV.foregroundDefault,fontWeight:s.TV.fontWeightMedium,marginBottom:s.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:s.TV.space8,borderBottom:"1px solid ".concat(s.TV.backgroundHigher),marginTop:s.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:s.TV.space24},h4:{fontSize:"1em",marginTop:s.TV.space16},h5:{fontSize:"0.875em"},h6:{color:s.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(s.TV.space16,")"),paddingRight:s.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:s.TV.space16,fontSize:e,fontFamily:"".concat(s.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:s.TV.space16,wordBreak:"normal",th:{fontWeight:s.TV.fontWeightMedium},"td, th":{padding:"".concat(s.TV.space8," ").concat(s.TV.space12),border:"1px solid ".concat(s.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:s.TV.backgroundDefault,borderTop:"1px solid ".concat(s.TV.backgroundHighest)},"tr:nth-child(2n)":{backgroundColor:s.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:s.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:s.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:s.TV.space16},ol:{listStyle:"decimal",marginBottom:s.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:s.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(s.TV.fontFamilyCode," !important"),margin:"".concat(s.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:s.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:s.TV.space16,borderLeft:"".concat(s.TV.space2," solid ").concat(s.TV.backgroundHighest),paddingLeft:s.TV.space16},"blockquote > *":{color:"".concat(s.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(s.TV.fontFamilyCode),color:s.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:s.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(s.TV.backgroundHighest)},a:{color:s.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:s.TV.space8,padding:0},details:{marginBottom:s.TV.space16,display:"block",background:s.TV.backgroundHigher,borderRadius:s.TV.borderRadius4,padding:s.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:s.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(s.TV.backgroundHighest),marginBottom:s.TV.space16,paddingBottom:s.TV.space16},hr:{height:1,backgroundColor:s.TV.backgroundHigher,margin:"".concat(s.TV.space24," 0"),border:0}})},S=n(71253),E=n(42173),T=n(32874),R=n(91639),D=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];function I(e){var t=e.content,n=(0,x.Z)().preferences.fontSize,r=o.useCallback((function(e){return(0,i.tZ)(R.Z,(0,g.Z)({},e))}),[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(y.D,{css:k(n),allowedElements:D,remarkPlugins:[Z.Ic,b.Z,w.Z,S.Z],linkTarget:"_blank",rehypePlugins:[E.Z],components:{code:r,img:T.Z},children:t})})}var _=(0,o.memo)(I),B=n(75509),G=n(97632),P=n(2580),A=n(43119),N=n(71440),U=n(95861),L=n(50216);function O(){var e=(0,A.Z)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return O=function(){return e},e}var X={},M=(0,N.Ps)(O(),U.j7);var F=n(90437),W=n(25404),H=n(63723),V=function(e){var t=e.thread,n=e.message,m=(0,F.d)(),y=(0,W.Z)().showError,Z=(0,r.Z)(function(e){var t=(0,g.Z)({},X,e);return L.D(M,t)}({onError:function(e){y(e.message)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteThreadMessage)||void 0===t?void 0:t.__typename)&&y(e.deleteThreadMessage.message)}}),2),b=Z[0],w=Z[1].loading,x=(0,H.P5)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),C=!(!t||t.indexStart!==t.indexEnd),k={resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},S="Outdated",E="The code has changed since the comment was left",T=o.useMemo((function(){return{diff:(0,p.Y)(n.timeCreated),full:(0,p.u)(n.timeCreated)}}),[n]);if(!n.user)return null;var R=m===n.user.id?[{label:"Delete",icon:(0,i.tZ)(P.Z,{}),isDestructive:!0}]:[];return(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.pb(4)],children:[(0,i.BX)(c.G,{css:[s.l0.flex.row,s.l0.align.center,s.l0.rowWithGap(8)],children:[(0,i.tZ)(v(),{legacyBehavior:!0,passHref:!0,href:"/@".concat(n.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(l.n,{small:!0,src:n.user.image,username:n.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(d.u,{tooltip:T.full,placement:"top",children:(0,i.tZ)(f.xv,{variant:"small",color:"dimmer",multiline:!1,children:T.diff})})}),R.length>0&&x?(0,i.tZ)(G.Z,{items:R,onItemClick:function(e){"Delete"!==e.label||w||b({variables:{id:n.id}})},label:"More"}):null]}),C?(0,i.tZ)(d.u,{tooltip:E,children:(0,i.tZ)(u.D,{colorway:"negative",text:S})}):null]}),"StatusMessageContentType"===n.content.__typename&&"resolved"===n.content.status?(0,i.tZ)(a.E,{colorway:"positive",icon:(0,i.tZ)(h.Z,{}),text:k.resolved}):null,"StatusMessageContentType"===n.content.__typename&&"unresolved"===n.content.status?(0,i.tZ)(a.E,{colorway:"primary",icon:(0,i.tZ)(B.Z,{}),text:k.unresolved}):null,"TextMessageContentType"===n.content.__typename&&(0,i.tZ)(_,{content:n.content.text})]})},z=(0,o.memo)(V)},14213:function(e,t,n){n.d(t,{Y:function(){return o},u:function(){return a}});var r=n(84730),i=n(52224),o=function(e){var t=new Date(e),n=new Date;return(0,i.Z)(n,t)<60?"just now":(0,r.F)(t,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},66600:function(e,t,n){n.d(t,{Z:function(){return ye}});var r=n(2272),i=n(74985),o=n(50959),a=n(55929),l=n(5875),c=n(3861),s=n(34547),u=n(27773),d=n(72006),f=n(4405),h=n(51966),p=n(85247),m=n(39059),v=n(21651),g=n(26473),y=n(88965),Z=n(53312),b=n(95141),w=n(92369),x=n(25404),C=n(83832),k=n(75509),S=n(48306),E=n.n(S),T=n(48587),R=n(87708),D=n(20476),I=n(7986),_=R.q6.define();function B(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,a=e.skeleton,l=e.language,c=e.skeletonClosingBracket,s=e.indentSize,u=void 0===s?2:s,d=(0,I.Z)(),f=d.ref,h=d.view,p=o.useRef(a?"".concat(a,"\n"):""),m=c?"\n".concat(c):"",v=" ".repeat(u);return o.useEffect((function(){if(h&&h.state.doc.length){var e=p.current;p.current=a?"".concat(a,"\n"):"",h.dispatch({changes:{from:0,to:e.length-1,insert:a},annotations:[R.YW.addToHistory.of(!1),_.of(!0)]})}}),[h,a]),o.useEffect((function(){if(h){var e=R.yy.changeFilter.of((function(e){return!!e.annotation(_)||[-1,p.current.length,e.startState.doc.length-m.length,e.startState.doc.length+1]})),i=T.tk.updateListener.of((function(e){var t=e.state.doc.slice(p.current.length,e.state.doc.toString().length-m.length).toString();if(t!=="".concat(v).concat(r,"\n").concat(v)?n(t):n(""),e.docChanged&&e.state.doc.length===p.current.length+m.length){var i="\n"+v;h.dispatch({changes:{from:p.current.length-1,insert:"\n"+v},selection:{anchor:p.current.length+i.length-1},annotations:[_.of(!0)]})}})),o="".concat(p.current).concat(v).concat(r,"\n").concat(m);h.dispatch({changes:{from:0,to:h.state.doc.length,insert:o},effects:R.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:R.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=h.state.doc.toString().length;h.dispatch({changes:{from:p.current.length,to:t-m.length,insert:e},annotations:R.YW.addToHistory.of(!1)})}},focus:function(){return h.focus()}})}}),[n,l,h,m,t,r,v]),(0,i.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,i.tZ)(D.ZP,{ref:f,language:l,indentSize:2,fontSize:14,indentIsSpaces:!0}),(0,i.tZ)(E(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}var G=n(9434),P=n(44385);function A(e){var t,n,a,l,c=e.isOpen,u=e.meta,p=e.language,w=e.hasMetadata,k=e.onClose,S=(0,s.Z)(),E=(0,x.Z)().showConfirm,T=(0,r.Z)(o.useState(null),2),R=T[0],D=T[1],I=(0,r.Z)(o.useState(!0),2),_=I[0],B=I[1],A=(0,r.Z)(o.useState((null===u||void 0===u?void 0:u.initialization)||""),2),X=A[0],M=A[1],F=(0,r.Z)(o.useState((null===u||void 0===u?void 0:u.imports)||""),2),W=F[0],H=F[1],V=(0,r.Z)(o.useState((null===u||void 0===u?void 0:u.setup)||""),2),z=V[0],j=V[1],q=(0,r.Z)(o.useState((null===u||void 0===u?void 0:u.tearDown)||""),2),$=q[0],Y=q[1],K=(0,r.Z)((0,h.rU)({onError:function(e){return D(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?D(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:S}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:h.aA});return t?(0,f.Z)((0,d.Z)({},t),{meta:(0,d.Z)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),E("Setup saved!"),k()))}}),2),Q=K[0],J=K[1],ee=(0,r.Z)((0,h.AF)({onError:function(e){return D(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?D(t.message):"ReplUnitTestMeta"===t.__typename&&(E("Imports updated!"),k()))}}),2),te=ee[0],ne=ee[1],re=(0,C.x)(p),ie=W!==(null===u||void 0===u?void 0:u.imports)||X!==(null===u||void 0===u?void 0:u.initialization)||z!==(null===u||void 0===u?void 0:u.setup)||$!==(null===u||void 0===u?void 0:u.tearDown),oe=J.loading||ne.loading;return(0,i.tZ)(v.u,{isOpen:c,onRequestClose:k,maxWidth:872,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(N,{unitTestsLib:re,onChange:H,language:p,initialValue:null!==(t=null===u||void 0===u?void 0:u.imports)&&void 0!==t?t:""}),(0,i.tZ)(g.G,{onClick:function(){return B(!_)},css:{cursor:"pointer"},children:(0,i.BX)(g.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(m.Z,{color:"var(--foreground-default)",size:20,rotate:_?270:0})]})}),_?null:(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(U,{unitTestsLib:re,onChange:M,language:p,initialValue:null!==(n=null===u||void 0===u?void 0:u.initialization)&&void 0!==n?n:""}),(0,i.tZ)(L,{unitTestsLib:re,onChange:j,language:p,initialValue:null!==(a=null===u||void 0===u?void 0:u.setup)&&void 0!==a?a:""}),(0,i.tZ)(O,{unitTestsLib:re,onChange:Y,language:p,initialValue:null!==(l=null===u||void 0===u?void 0:u.tearDown)&&void 0!==l?l:""})]}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],children:R}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(b.zx,{disabled:oe,onClick:k,text:"Cancel"}),(0,i.tZ)(b.zx,{colorway:"primary",disabled:!ie||oe,onClick:function(){(0,G.j)(G.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),w?te({variables:{input:{initialization:X,imports:W,setup:z,tearDown:$,replId:S}}}):Q({variables:{input:{initialization:X,imports:W,setup:z,tearDown:$,replId:S}}})},iconLeft:(0,i.tZ)(P.Z,{}),text:"".concat(oe?"Saving...":"Save")})]})]})]})})}function N(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),s=c[0],u=c[1];o.useEffect((function(){s&&(s.setValue(l),s.focus())}),[s,l]);var d=t.defaultImports().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(k.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(B,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:u,language:a,skeleton:d,skeletonClosingBracket:"",indentSize:0})})})]})}function U(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),s=c[0],u=c[1];o.useEffect((function(){s&&s.setValue(l)}),[s,l]);var d=t.classConstructorName();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(k.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),d?(0,i.BX)(Z.xv,{children:["Hint: constructor name is ",(0,i.tZ)("code",{children:d}),"."]}):null,(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(B,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:u,language:a,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function L(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),s=c[0],u=c[1];o.useEffect((function(){s&&s.setValue(l)}),[s,l]);var d=t.setupIntro().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(k.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(B,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:u,language:a,skeleton:d,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function O(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),s=c[0],u=c[1];o.useEffect((function(){s&&s.setValue(l)}),[s,l]);var d=t.tearDownIntro().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(k.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(B,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:u,language:a,skeleton:d,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var X=function(e){var t=e.language,n=e.meta,a=(0,r.Z)(o.useState(!1),2),l=a[0],c=a[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(b.zx,{iconLeft:(0,i.tZ)(p.Z,{}),onClick:function(){return c(!0)},text:"Setup"}),(0,i.tZ)(A,{language:t,isOpen:l,onClose:function(){return c(!1)},hasMetadata:Boolean(null===n||void 0===n?void 0:n.id),meta:n})]})},M=n(9970),F=n(51631),W=n(84761),H=n(62385),V=n(2580),z=n(68912),j=n(77770),q=n(20685),$=n(16296),Y=n(7551),K=n(15436),Q=n(57135),J=n(96583),ee=n(43182),te=n(33672),ne=n(28435),re=n(76119),ie=n(28639),oe="\x1b[0;31m",ae="\x1b[0m",le=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function ce(e){var t=e.name,n=e.failureMessage,r=e.stack;return"\u274c\t".concat(oe).concat(t).concat(ae,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var se=function(e){var t=e.language,n=e.unitTests,a=e.onResult,l=e.trackingContext,c=e.getRunnerOutput,s=(0,r.Z)(o.useState(!1),2),u=s[0],f=s[1],h=(0,ne.Z)(),p=h.container,m=h.packager,v=h.fs,y=null,Z=c(),w=Z&&void 0!==Z.startBlock&&void 0!==Z.endBlock&&void 0!==Z.writeOutputToBlock&&void 0!==Z.writeErrorToBlock,x=function(){f(!1),(0,re.WT)(v),y&&(y.stopLogSpinner(),y.finish(),y=null)},k=function(){var e=(0,Q.Z)((function(){var e,r,i,o,c,s,h,g,b,k,S,E,T,R,D,I,_,B,P,A,N,U,L,O;return(0,J.__generator)(this,(function(X){switch(X.label){case 0:if(u)return[2];if(r=null,y={startLogSpinner:function(e){if(r)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=e,n=0;return r=setInterval((function(){n++;var e=le[n%le.length];if(!y)throw new Error("Expected logger");y.clearLine(),y.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){r&&clearInterval(r),r=null},finish:function(){var t;w&&e&&(null===Z||void 0===Z||null===(t=Z.endBlock)||void 0===t||t.call(Z,e))},logMessage:function(t){var n,r;w&&e?null===Z||void 0===Z||null===(r=Z.writeOutputToBlock)||void 0===r||r.call(Z,e,t):null===Z||void 0===Z||null===(n=Z.write)||void 0===n||n.call(Z,t)},logError:function(t){var n;w&&e&&(null===Z||void 0===Z||null===(n=Z.writeErrorToBlock)||void 0===n||n.call(Z,e,t))},clearLogs:function(){var e;w||(null===Z||void 0===Z||null===(e=Z.clear)||void 0===e||e.call(Z),null===y||void 0===y||y.logMessage("\r\n"))},clearLine:function(){if(!y)throw new Error("Expected logger");y.logMessage("\x1b[1K\r")}},!n)throw new Error("Run button should not be active if there are no tests");return f(!0),(0,G.j)(G.U3.REPL_UNIT_TEST_USED,{trackingData:{context:l},action:"ranTests"}),y.clearLogs(),w&&(e=null===Z||void 0===Z||null===(i=Z.startBlock)||void 0===i?void 0:i.call(Z,ie.kH.UNIT_TEST).id),[4,(o=(0,C.x)(t)).buildAndRunTests((0,d.Z)({container:p,fs:v,packager:m,logger:y},n))];case 1:if(c=X.sent(),y.stopLogSpinner(),y.clearLine(),y.clearLogs(),null!==c.error)return y.logMessage("".concat(oe).concat(c.error).concat(ae,"\r\n")),x(),n.tests.map((function(e){return{testId:e.id,didPass:!1}})),[2];if(s=c.result.passed?[]:c.result.failures.map((function(e){return o.parseTestResultName(e.name)})),h=[],g=n.tests.map((function(e){return o.getProperTestName(e.name)})),b=s.filter((function(e){return!g.includes(e)})),b.length)S=b[0],E=c.result.failures[0].stack,y.logMessage(ce({name:S,failureMessage:"The following error occurred but was not related to a single unit test",stack:E})),y.logError("Testing failed"),(k=h).push.apply(k,(0,M.Z)(n.tests.map((function(e){return{testId:e.id,didPass:!1}}))));else{T=!0,R=!1,D=void 0;try{for(I=n.tests[Symbol.iterator]();!(T=(_=I.next()).done);T=!0)B=_.value,P=o.getProperTestName(B.name),A=s.indexOf(P),N=-1===A,h.push({testId:B.id,didPass:N}),N?y.logMessage((F=P,"\u2705\t".concat("\x1b[0;32m").concat(F).concat(ae,"\r\n\r\n"))):(U=c.result.failures[A].stack,y.logMessage(ce({name:P,failureMessage:B.failureMessage,stack:U})),y.logError('Test "'.concat(P,'" failed')))}catch(W){R=!0,D=W}finally{try{T||null==I.return||I.return()}finally{if(R)throw D}}}return a(h),L=n.tests.length,c.result.passed?(y.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(L,"/").concat(L,"  ").concat(ae,"\r\n")),x(),[2]):(O=L-c.result.failures.length,y.logMessage("".concat("\x1b[48;5;88m","  ").concat(O,"/").concat(L," passed, see errors above  ").concat(ae)),x(),[2])}var F}))}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,Q.Z)((function(){return(0,J.__generator)(this,(function(e){try{k()}catch(t){ee.$e((function(e){e.setTag("unittestsrun","true"),ee.Tb(t)})),y&&(y.logMessage("\r\n".concat(oe," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(ae,"\r\n")),y.logError("Running tests failed")),x()}return[2]}))}));return function(){return e.apply(this,arguments)}}();return Boolean(n&&n.tests.length>0)?(0,i.tZ)(g.G,{children:(0,i.tZ)(b.zx,{disabled:u,colorway:"primary",iconLeft:(0,i.tZ)(te.Z,{}),onClick:S,text:u?"Running tests...":"Run tests"})}):null},ue=n(60717);function de(e){var t=e.isOpen,n=e.test,a=e.language,l=e.onClose,u=e.trackingContext,p=(0,s.Z)(),m=(0,x.Z)().showConfirm,k=(0,r.Z)(o.useState(null),2),S=k[0],E=k[1],T=(0,r.Z)(o.useState(""),2),R=T[0],D=T[1],I=(0,r.Z)(o.useState(""),2),_=I[0],A=I[1],N=(0,r.Z)(o.useState(""),2),U=N[0],L=N[1],O=(0,r.Z)((0,h.Hd)({onError:function(e){return L(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?L(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:p}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:h.Rb});return t?(0,f.Z)((0,d.Z)({},t),{tests:(0,M.Z)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),m("Test created!"),l()))}}),2),X=O[0],F=O[1],H=(0,r.Z)((0,h.kO)({onError:function(e){return L(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?L(t.message):"ReplUnitTest"===t.__typename&&(m("Test updated!"),l()))}}),2),V=H[0],$=H[1],Q=(0,K.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0}));o.useEffect((function(){Q.setValue((null===n||void 0===n?void 0:n.name)||"",{preventTouch:!0}),A((null===n||void 0===n?void 0:n.failureMessage)||""),D((null===n||void 0===n?void 0:n.code)||""),S&&S.setValue((null===n||void 0===n?void 0:n.code)||"")}),[n,S]),o.useEffect((function(){L("")}),[R,L]);var J=(0,C.x)(a),ee="".concat(J.getCommentChar()," Enter code here"),te=!n||n.name!==Q.value||n.code!==R||n.failureMessage!==_,ne=F.loading||$.loading,re=J.testIntro(Q.value||""),ie=J.hasClosingBrackets()?J.getClosingBrackets():"",oe=(0,r.Z)(o.useState(!1),2),ae=oe[0],le=oe[1],ce=function(){S&&(S.setValue("  "+J.exampleTest.code),S.focus()),D(J.exampleTest.code)};return(0,i.tZ)(v.u,{isOpen:t,onRequestClose:l,maxWidth:872,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(Y.Z,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:Q.value,isValid:Q.isValid,error:Q.error,warning:Q.warning,touched:Q.touched,onChange:function(e){Q.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(4)],children:[(0,i.BX)(ue.Z,{isOpen:ae,onClickOutside:function(){return le(!1)},placement:"bottom-end",children:[(0,i.tZ)(b.zx,{iconLeft:(0,i.tZ)(W.Z,{}),size:"small",variant:"outlined",text:"View an example",onClick:function(){[ee,J.exampleTest.code].includes(R.trim())?ce():le(!0)}}),(0,i.BX)(g.G,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(g.G,{css:[y.l0.rowWithGap(4),y.l0.pt(8)],children:[" ",(0,i.tZ)(b.zx,{text:"No, go back",size:"small",iconLeft:(0,i.tZ)(z.Z,{}),onClick:function(){le(!1)}}),(0,i.tZ)(b.zx,{text:"Yes, delete test",colorway:"negative",size:"small",iconLeft:(0,i.tZ)(P.Z,{}),onClick:function(){ce(),le(!1)}})]})]})]}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(j.Z,{}),size:"small",variant:"outlined",text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(B,{skeleton:re,skeletonClosingBracket:ie,language:a,editorRef:E,onChange:D,placeholder:ee})})})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(q.II,{value:_,onChange:function(e){return A(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],multiline:!1,children:U}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(b.zx,{text:"Cancel",onClick:l}),(0,i.tZ)(b.zx,{text:"".concat(ne?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(c.Z,{}),colorway:"primary",disabled:!te||ne,onClick:function(){Q.validate()||(R.length<=0?L("Test cannot be empty"):n?(V({variables:{input:{name:Q.value,code:R,failureMessage:_,testId:n.id}}}),(0,G.j)(G.U3.REPL_UNIT_TEST_USED,{trackingData:{context:u},action:"modifiedTest"})):(X({variables:{input:{name:Q.value,code:R,failureMessage:_,replId:p}}}),(0,G.j)(G.U3.REPL_UNIT_TEST_USED,{trackingData:{context:u},action:"addedTest"})))}})]})]})]})})}function fe(e){var t=e.testId,n=e.onClose,a=(0,x.Z)().showConfirm,l=(0,s.Z)(),c=(0,r.Z)((0,h.IV)({onError:function(e){return C(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?C(o.message):"ReplUnitTest"===o.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:l}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter((function(e){return r("id",e)!==t}));return(0,f.Z)((0,d.Z)({},e),{tests:(0,M.Z)(i)})}}}),(0,G.j)(G.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),n()))}}),2),u=c[0],p=c[1],m=(0,r.Z)(o.useState(""),2),w=m[0],C=m[1];return(0,i.tZ)(v.u,{isOpen:Boolean(t),onRequestClose:n,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(Z.xv,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],children:w}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12),y.l0.justify.end],children:[(0,i.tZ)(b.zx,{text:"Cancel",disabled:p.loading,onClick:n}),(0,i.tZ)(b.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(V.Z,{}),disabled:p.loading,onClick:function(){if(!t)throw new Error("Expected a testId");u({variables:{testId:t}})}})]})]})]})})}var he=function(e){var t=e.unitTests,n=e.isAddingTest,a=e.onClose,l=e.language,u=e.canWrite,d=e.trackingContext,f=void 0===d?"default":d,p=e.getRunnerOutput,m=(0,r.Z)(o.useState(n),2),v=m[0],w=m[1],x=(0,r.Z)(o.useState(null),2),C=x[0],k=x[1],S=(0,r.Z)(o.useState(null),2),T=S[0],R=S[1],D=(0,s.Z)(),I=(0,r.Z)((0,h.lQ)(),1)[0],_=(null===t||void 0===t?void 0:t.tests)||[];return(0,i.BX)(g.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(se,{language:l,unitTests:t,onResult:function(e){I({variables:{input:{replId:D,results:e},replId:D}})},getRunnerOutput:p,trackingContext:f}),_.length>0?(0,i.tZ)(g.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:_.map((function(e){var t,n;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===F.$I.Passed?n="passed-test":e.lastRun.status===F.$I.Failed&&(n="failed-test")),(0,i.tZ)(g.G,{className:"test ".concat(n),css:{width:"100%"},children:(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,y.l0.p(8),y.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(Z.xv,{multiline:!1,children:e.name}),u?(0,i.BX)(g.G,{css:[y.l0.rowWithGap(8)],children:[(0,i.tZ)($.hU,{onClick:function(){k(e)},alt:"Edit",children:(0,i.tZ)(H.Z,{})}),(0,i.tZ)($.hU,{onClick:function(){R(e.id)},alt:"Delete",children:(0,i.tZ)(V.Z,{})})]}):null]})},e.id)}))}):(0,i.BX)(g.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:[(0,i.tZ)(Z.xv,{css:[y.l0.textAlign.center],children:"Looks like you don\u2019t have any tests yet!"}),u?(0,i.tZ)(b.zx,{text:"Add test",onClick:function(){return w(!0)},iconLeft:(0,i.tZ)(c.Z,{})}):null]}),(0,i.tZ)(de,{isOpen:v||Boolean(C)||n,test:C,language:l,onClose:function(){k(null),w(!1),a&&a()},trackingContext:f}),(0,i.tZ)(fe,{testId:T,onClose:function(){return R(null)}}),(0,i.tZ)(E(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},pe=n(52544),me=n(95862);var ve=function(e){var t=e.onClick,n=e.hasTests,r=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,i.BX)("div",(0,f.Z)((0,d.Z)({},r),{className:"jsx-44786ca38dd3aa42 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,i.tZ)(pe.Z,{filled:!1,border:!1,size:"small",Icon:me.Z,onClick:t,disabled:n,children:"Switch test type"}),(0,i.tZ)(E(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},ge=n(35692);var ye=function(e){var t,n,d,f,h=e.onBack,p=e.getRunnerOutput,m=(0,s.Z)(),v=(0,r.Z)(o.useState(!1),2),b=v[0],w=v[1],x=(0,ge.Z)(),C=x.language,k=x.isLoading,S=(0,a.CH)({variables:{replId:m}}),E=null===(t=S.data)||void 0===t?void 0:t.repl;if(S.loading||k)return(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.flex.row,y.l0.align.center,y.l0.justify.center,y.l0.p(16)],children:(0,i.tZ)(u.Z,{})});if(!E||"Repl"!==E.__typename)return(0,i.tZ)(g.G,{css:[y.l0.p(16)],children:(0,i.tZ)(Z.xv,{css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!C)return(0,i.tZ)(g.G,{css:[y.l0.p(16)],children:(0,i.tZ)(Z.xv,{css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var T="default";(null===E||void 0===E?void 0:E.isProject)?T="project_repl":(null===E||void 0===E?void 0:E.isProjectFork)&&(T="submission_repl");var R=Boolean((null===(n=E.unitTests)||void 0===n?void 0:n.tests)&&E.unitTests.tests.length>0);return(null===E||void 0===E||null===(d=E.currentUserPermissions)||void 0===d?void 0:d.writeTests)?(0,i.BX)(g.G,{css:[y.l0.colWithGap(16),y.l0.align.center],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(l.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)($.hU,{alt:"Add test",size:32,onClick:function(){return w(!0)},children:(0,i.tZ)(c.Z,{})})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8),y.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(X,{language:C,meta:(null===(f=E.unitTests)||void 0===f?void 0:f.meta)||null}),(0,i.tZ)(he,{isAddingTest:b,unitTests:(null===E||void 0===E?void 0:E.unitTests)||null,onClose:function(){return w(!1)},language:C,canWrite:!0,trackingContext:T,getRunnerOutput:p}),h?(0,i.tZ)(ve,{hasTests:R,onClick:h}):null]})]}):(0,i.BX)(g.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(g.G,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(he,{unitTests:(null===E||void 0===E?void 0:E.unitTests)||null,language:C,isAddingTest:!1,canWrite:!1,trackingContext:T,getRunnerOutput:p})})]})}},83832:function(e,t,n){n.d(t,{x:function(){return T},y:function(){return E}});var r=n(57135),i=n(9970),o=n(96583),a=n(43182),l=n(9434),c=n(66091),s=function(){"use strict";function e(t){(0,c.Z)(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),u=n(76119),d={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,u.Og)(d.testSuiteName())," {")},classConstructorName:function(){return(0,u.Og)(d.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(d.testIntroPreName()).concat(e).concat(d.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,u.Og)(d.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new s(d);r.push(d.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(d.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(d.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(d.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.code&&(r.push(d.testIntro(u.name)),r.indent(),r.push(u.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return m.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=d.buildSuite({tests:o,meta:a});return d.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),a.Tb(t)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},f="__UNIT_TEST_RESULT_START__",h="__UNIT_TEST_RESULT_END__",p="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,u.Og)(d.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,u.Og)(d.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(f,'");\n        System.out.println(out);\n        System.out.println("').concat(h,'");\n    }\n}');function m(){return(m=(0,r.Z)((function(e){var t,n,r,a,c,s,m,v,g,y,Z,b,w,x,C,k,S,E,T,R,D,I,_;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,a=e.logger,c=e.suiteCode,m=a.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),m("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:c,filename:"".concat(d.testSuiteName(),".java")})];case 2:return v=o.sent(),(g=v.error)?("Failed to create suite code file",d.captureSetupError({tag:"Failed to create suite code file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(m("Creating your test files 2/2"),[4,(0,u.e3)({fs:n,code:p,filename:"".concat(d.testRunnerName(),".java")})]);case 3:return y=o.sent(),(Z=y.error)?("Failed to create test runner file",d.captureSetupError({tag:"Failed to create test runner file",raw:Z}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(a.stopLogSpinner(),a.clearLine(),a.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])]);case 4:return o.sent(),[4,r.installPackages()];case 5:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(a.clearLogs(),m=a.startLogSpinner("Compiling your files"),[4,t.exec("find",".","-type","f","-name","*.java","-print0")]);case 6:if(b=o.sent(),w=b.output,x=b.error)return C="Failed to fetch working directory java files",d.captureSetupError({tag:C,raw:x}),[2,{error:"".concat(C,"\r\n\r\n")+(null===w||void 0===w?void 0:w.replace(/\n/g,"\n\r"))+"\r\n\r\n"+x}];if("string"!==typeof w)throw new Error("expected working directory files to be a string");return k=w.slice(0,-1).split("\0"),S=".:./target/dependency/*",[4,(s=t).exec.apply(s,["javac","-classpath",S,"-d","."].concat((0,i.Z)(k)))];case 7:return E=o.sent(),T=E.output,(R=E.error)?("Failed to compile test runner file",[2,{error:"".concat("Failed to compile test runner file","\r\n\r\n")+(null===T||void 0===T?void 0:T.replace(/\n/g,"\n\r"))+"\r\n\r\n"+R}]):(m("Running your tests"),[4,t.exec("java","-classpath",S,(0,u.Og)(d.testRunnerName()))]);case 8:if(D=o.sent(),I=D.output,_=D.error)return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===I||void 0===I?void 0:I.replace(/\n/g,"\n\r"))+"\r\n\r\n"+_}];if("string"!==typeof I)throw new Error("expected runOutput to be a string");return[2,{result:JSON.parse(I.slice(I.indexOf(f)+f.length,I.lastIndexOf(h))),error:null}]}}))}))).apply(this,arguments)}var v=d,g=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},y={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return y.testIntroPreName()+e+y.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new s(y);r.push(y.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(y.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),g(n.setup)&&(r.push(y.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),g(n.tearDown)&&(r.push(y.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;r.push(y.testIntro(u.name)),r.indent(),r.push(u.code||"pass"),r.dedent(),r.newLine()}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=y.buildSuite({tests:o,meta:a});return y.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),a.Tb(t)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Z="__UNIT_TEST_RESULT_START__",b="__UNIT_TEST_RESULT_END__",w="import unittest\nimport ".concat((0,u.Og)(y.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,u.Og)(y.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Z,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(b,"');");function x(){return(x=(0,r.Z)((function(e){var t,n,r,i,a,c,s,d,f,h,p,m,v;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:a,filename:"".concat(y.testSuiteName(),".py")})];case 2:return s=o.sent(),(d=s.error)?("Failed to create suite code file",y.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),[4,(0,u.e3)({fs:n,code:w,filename:"".concat(y.testRunnerName(),".py")})]);case 3:return f=o.sent(),(h=f.error)?("Failed to create test runner file",y.captureSetupError({tag:"Failed to create test runner file",raw:h}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(i.clearLogs(),i.startLogSpinner("Running your tests"),[4,t.exec("python","-B",(0,u.Og)("".concat(y.testRunnerName(),".py")))]);case 5:if(p=o.sent(),m=p.output,v=p.error)return(0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===m||void 0===m?void 0:m.replace(/\n/g,"\n\r"))+"\r\n"+v}];if("string"!==typeof m)throw new Error("expected runoutput to be a string");return[2,{result:JSON.parse(m.slice(m.indexOf(Z)+Z.length,m.lastIndexOf(b))),error:null}]}}))}))).apply(this,arguments)}var C={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return C.testIntroPreName()+e+C.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new s(C);r.push(C.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(C.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(C.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(C.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.code&&(r.push(C.testIntro(u.name)),r.indent(),r.push(u.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return k.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=C.buildSuite({tests:o,meta:a});return C.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;a.$e((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),a.Tb(t)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function k(){return(k=(0,r.Z)((function(e){var t,n,r,i,a,c,s,d,f,h,p,m,v,g,y,Z,b,w,x,k,S,E;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,a=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,u.WT)(n)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,u.e3)({fs:n,code:a,filename:"".concat(C.testSuiteName(),".js")})];case 2:return s=o.sent(),(d=s.error)?("Failed to create suite code file",C.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),f=69,h="jest.config.json",p={testRegex:(0,u.Og)("".concat(C.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,u.e3)({fs:n,code:JSON.stringify(p),filename:h})]);case 3:return m=o.sent(),(v=m.error)?("Failed to create config file",C.captureSetupError({tag:"Failed to create config file",raw:v}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(i.clearLogs(),c=i.startLogSpinner("Running your tests"),g=(0,u.Og)("output.json"),[4,t.exec("jest","--json","--outputFile",g,"--config",(0,u.Og)(h),"--forceExit","--passWithNoTests")]);case 5:return y=o.sent(),Z=y.output,(b=y.error)&&!b.endsWith(f.toString())?((0,l.j)(l.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n"+b}]):(c("Parsing your test results"),[4,n.readFile(g)]);case 6:return(w=o.sent()).error?("Error reading test results",C.captureSetupError({tag:"Error reading test results",raw:w.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}]):(x=w.content.toString(),(k=JSON.parse(x)).success?[2,{error:null,result:{passed:!0,failures:[]}}]:(S=k.testResults[0],(E=S.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length?[2,{error:null,result:{passed:!1,failures:E}}]:[2,{error:S.message.replace(/\n/g,"\r\n")}]))}}))}))).apply(this,arguments)}var S={java10:v,java10_beta:v,java:v,python3:y,python3_beta:y,python:y,nodejs:C,javascript:C,nodejs_beta:C};function E(e){return e in S}function T(e){if(!E(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(S)));return S[e]}},76119:function(e,t,n){n.d(t,{Og:function(){return u},WT:function(){return h},e3:function(){return d}});var r=n(57135),i=n(96583),o=n(43182),a=n(22011),l=n(12583),c=n(4561),s="_test_runner";function u(e){return s+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var t,n,r,o,l;return(0,i.__generator)(this,(function(i){return t=e.fs,n=e.code,r=e.filename,o=u(r),l=a.Z.from(n,"utf8"),[2,t.writeFile(o,l)]}))}))).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(l.Ql)];case 1:return(t=r.sent()).error?[2]:[4,Promise.all(t.children.map((function(t){return t.filename.startsWith(s)?t.type===c.Tv.File?e.deleteFile(t.filename):e.deleteDir(t.filename):Promise.resolve(null)})))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.$e((function(e){e.setTag("unitTestLib","true"),o.Tb(n)})),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}},51966:function(e,t,n){n.d(t,{AF:function(){return w},Hd:function(){return C},IV:function(){return T},Rb:function(){return g},aA:function(){return v},kO:function(){return S},lQ:function(){return D},rU:function(){return Z}});var r=n(72006),i=n(43119),o=n(71440),a=n(50216);function l(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(l()),g=(0,o.Ps)(c()),y=(0,o.Ps)(s(),v);function Z(e){var t=(0,r.Z)({},m,e);return a.D(y,t)}var b=(0,o.Ps)(u(),v);function w(e){var t=(0,r.Z)({},m,e);return a.D(b,t)}var x=(0,o.Ps)(d(),g);function C(e){var t=(0,r.Z)({},m,e);return a.D(x,t)}var k=(0,o.Ps)(f(),g);function S(e){var t=(0,r.Z)({},m,e);return a.D(k,t)}var E=(0,o.Ps)(h());function T(e){var t=(0,r.Z)({},m,e);return a.D(E,t)}var R=(0,o.Ps)(p());function D(e){var t=(0,r.Z)({},m,e);return a.D(R,t)}},35692:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67043),i=n(88688),o=n(28435),a=n(50959),l=n(83832);function c(){var e=(0,r.Z)(),t=(0,o.Z)().dotReplit,n=null===e||void 0===e?void 0:e.language,c=(0,a.useState)(null),s=c[0],u=c[1],d=(0,a.useState)(!0),f=d[0],h=d[1];return(0,a.useEffect)((function(){if(n){if((0,l.y)(n))return u(n),void h(!1);var e=!1,r=t.watch((function(t){var n,r;if(e||(e=!0,h(!1)),t.error)t.error===i.Yt.NotFound&&u(null);else{var o=null===(n=t.config.unitTest)||void 0===n||null===(r=n.language)||void 0===r?void 0:r.toLowerCase();o&&(0,l.y)(o)?u(o):u(null)}}));return function(){r()}}}),[n,t]),{language:s,isLoading:f}}},42586:function(e,t,n){n.d(t,{Z:function(){return R}});var r=n(72006),i=n(4405),o=n(2272),a=n(74985),l=n(63723),c=n(48818),s=n(46130),u=n(9434),d=n(95141),f=n(21651),h=n(53312),p=n(26473),m=n(88965),v=n(60168),g=n(54713),y=n(49019),Z=n(46589),b=n(51631),w=n(90234),x=n(71999),C=n(90171),k=n(28639),S=n(50959),E=n(51467),T="resources_upgrade_modal";function R(e){var t=e.isOwnRepl,n=e.userSubscriptionType,r=e.runner,i=(0,C.useRouter)(),c=(0,l.P5)({controlName:"flag-slippery-banana",logFlagToAnalytics:!0}),u=(0,o.Z)(S.useState(!0),2),d=u[0],f=u[1],h=(0,v.Z)("announcement","resources-upgrade-modal"),p=h.shouldDisplay,m=h.register,g=h.dismiss;return S.useEffect((function(){!(0,s.Vg)(i)&&t&&n!==b.HP.HackerPro&&c&&m()}),[c,t,m,i,n]),S.useEffect((function(){var e=setTimeout((function(){f(!1)}),6e4);return function(){return clearTimeout(e)}}),[]),c?d||(0,s.Vg)(i)?null:t?n===b.HP.HackerPro?null:p?(0,a.tZ)(D,{dismissTour:g,runner:r}):null:null:null}function D(e){var t=e.dismissTour,n=e.runner,l=(0,o.Z)(S.useState(null),2),s=l[0],v=l[1],b=(0,o.Z)(S.useState(!1),2),C=b[0],R=b[1],D=(0,Z.ZP)(),I=D.dataAtom,_=I.cpu,B=I.ram,G=I.disk,P=S.useRef(!1),A=(0,c.Z)(),N=(0,x.Dv)(_.currentAtom),U=(0,S.useState)(N),L=U[0],O=U[1],X=(0,E.Z)(N),M=N/(0,x.Dv)(_.totalAtom),F=(0,x.Dv)(B.rss.currentAtom),W=(0,S.useState)(N),H=W[0],V=W[1],z=(0,E.Z)(F),j=F/(0,x.Dv)(B.totalAtom);S.useEffect((function(){if(n&&!C)return n.onStateChanged((function(e){if(e===k.Ah.RUNNING){if(C)return;R(!0)}}))}),[n,C]);var q=S.useCallback((function(e){v("cta"),O(N),V(F),(0,u.j)(u.U3.MODAL_VIEWED,{modalName:T,cause:e,unsolicited:!0})}),[N,F,O,V]);S.useEffect((function(){var e;if(!s&&!P.current&&C)return M>.9?(P.current=!0,e=setTimeout((function(){P.current=!1,X.current>.9&&q("cpu")}),1e4)):j>.9&&(P.current=!0,e=setTimeout((function(){P.current=!1,z.current>.9&&q("ram")}),1e4)),function(){A.current||clearTimeout(e)}}),[M,P,s,A,F,q,X,j,z,C]);var $=(0,i.Z)((0,r.Z)({},D),{dataAtom:{cpu:(0,i.Z)((0,r.Z)({},_),{currentAtom:(0,w.cn)(L)}),ram:(0,i.Z)((0,r.Z)({},B),{rss:(0,i.Z)((0,r.Z)({},B.rss),{currentAtom:(0,w.cn)(H)})}),disk:G}});return(0,a.tZ)(f.u,{isOpen:null!==s,preventOutsideModalClickClose:!0,onRequestClose:function(){v(null),t()},maxWidth:"plans"===s?g.W:360,children:"plans"===s?(0,a.tZ)(g.Z,{context:T,uponPurchaseGoTo:"profile",initialTab:"plans",allowCyclesPage:!0}):(0,a.BX)(p.G,{css:[m.l0.p(8),m.l0.colWithGap(24)],children:[(0,a.BX)(p.G,{css:[m.l0.colWithGap(16)],children:[(0,a.tZ)(h.xv,{variant:"subheadDefault",multiline:!1,children:"Your Repl ran out of resources!"}),(0,a.tZ)(h.xv,{children:"Upgrade to a plan to increase your Repl's resources so your programs can use more power."})]}),(0,a.tZ)(p.G,{css:[m.l0.colWithGap(12)],children:(0,a.tZ)(y.Z,{inactive:!1,resources:$})}),(0,a.tZ)(d.zx,{size:"big",text:"Upgrade to get more resources",colorway:"primary",onClick:function(){(0,u.j)(u.U3.UPGRADE_SELECTED,{source:T}),v("plans")}})]})})}},39191:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(74985),i=n(50959);function o(e){var t=e.uploadFiles,n=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:n,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},84532:function(e,t,n){n.d(t,{ZP:function(){return Re},wK:function(){return Ce}});var r=n(66091),i=n(57389),o=n(72006),a=n(2272),l=n(74985),c=n(50959),s=n(83966),u=n(58292),d=n(26473),f=n(88965),h=n(95183),p=n(43312),m=n(12901),v=n(95141),g=n(92369),y=n(37268),Z=n(77637),b=n(48306),w=n.n(b),x=n(43119),C=n(71440),k=n(24635),S=n(50216);function E(){var e=(0,x.Z)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return E=function(){return e},e}function T(){var e=(0,x.Z)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return T=function(){return e},e}function R(){var e=(0,x.Z)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return R=function(){return e},e}function D(){var e=(0,x.Z)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return D=function(){return e},e}function I(){var e=(0,x.Z)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return I=function(){return e},e}var _={},B=(0,C.Ps)(E()),G=(0,C.Ps)(T(),B);var P=(0,C.Ps)(R());var A=(0,C.Ps)(D(),B);var N=(0,C.Ps)(I(),B);var U,L=n(53312),O=n(20685),X=n(61623),M=n(88794),F=n(43182),W=n(32508),H=n.n(W),V=n(3861),z=n(38029),j=n(73823),q=n(2580),$=n(27773),Y=n(44385),K=n(68912);function Q(e){switch(e.status){case U.Verified:return(0,l.tZ)(Y.Z,{color:f.TV.accentPositiveDefault});case U.Failed:return(0,l.tZ)(K.Z,{color:f.TV.accentNegativeDefault});case U.Verifying:return(0,l.tZ)($.Z,{color:f.TV.accentPrimaryDefault});default:return null}}function J(e){var t=e.replId,n=e.hostedUrl,r=e.desiredARecord,i=e.existingDomain,s=e.onLink,u=e.onGoBack,h=e.onLinkStarted,p=e.onStateChanged,m=(0,c.useState)(i?"loading":null),g=m[0],y=m[1],Z=(0,c.useState)(!1),b=Z[0],w=Z[1],x=(0,c.useState)(null),C=x[0],k=x[1],E=(0,c.useState)(!1),T=E[0],R=E[1],D=(0,a.Z)(function(e){var t=(0,o.Z)({},_,e);return S.D(A,t)}(),2),I=D[0],B=D[1],G=(0,c.useRef)(null),P=(0,c.useRef)(null),N=(0,c.useRef)(null),U=function(e){(null===e||void 0===e?void 0:e.current)&&e.current.select()},X=function(e){var t;(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.value)&&(0,M.Z)(e.current.value).catch((function(e){F.$e((function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),F.Tb(e)}))}))},W=(0,c.useState)(i||""),V=W[0],q=W[1];(0,c.useEffect)((function(){B.data&&"Repl"===B.data.linkReplDomain2.__typename&&s()}),[B.data,s]);var $=function(e){y(e),p()},Y=H()(V,{require_valid_protocol:!1})&&V.split(".").length>=2,K=Y&&2===V.split(".").length,Q=n.replace(/^https:\/\//,""),J="replit-verify=".concat(t),te=(0,z.U)();return(0,l.BX)(d.G,{css:[f.l0.colWithGap(16)],children:[(0,l.BX)(d.G,{css:[f.l0.colWithGap(8)],children:[(0,l.tZ)(L.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,l.BX)(L.xv,{children:["Learn more"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]})]}),(0,l.BX)(d.G,{css:[f.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:te("domain"),children:(0,l.tZ)(L.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Step 1: Enter your domain"})}),(0,l.tZ)(O.II,{className:"cname-url",readOnly:"loading"===g,value:V,onChange:function(e){q(e.target.value)},onBlur:function(){!function(){try{var e=new URL("/",V);q(e.hostname)}catch(t){}}()},placeholder:"example.com",id:te("domain")})]}),K&&!T?(0,l.BX)(d.G,{css:[f.l0.colWithGap(8)],children:[(0,l.BX)(d.G,{css:[f.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:te("record"),children:(0,l.BX)(L.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add an ",(0,l.tZ)("code",{children:"A"})," Record"]})}),(0,l.BX)(d.G,{css:[f.l0.rowWithGap(8),f.l0.align.center],children:[(0,l.tZ)(L.xv,{multiline:!1,css:{fontFamily:f.TV.fontFamilyCode,maxWidth:"40%"},children:V}),(0,l.tZ)(L.xv,{multiline:!1,css:{fontFamily:f.TV.fontFamilyCode},children:"A"}),(0,l.tZ)(O.II,{readOnly:!0,ref:G,onChange:function(){return null},value:r,onFocus:function(){return U(G)},id:te("record")}),(0,l.tZ)(v.zx,{onClick:function(){return X(G)},text:"Copy"})]})]}),(0,l.tZ)(d.G,{css:[f.l0.flex.row,f.l0.align.stretch],children:(0,l.tZ)(v.zx,{variant:"outlined",onClick:function(){return R(!0)},text:"Use CNAME record instead."})})]}):null,!Y||!T&&K?null:(0,l.BX)(d.G,{css:[f.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:te("CNAMERecord"),children:(0,l.BX)(L.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add a ",(0,l.tZ)("code",{children:"CNAME"})," Record"]})}),(0,l.BX)(d.G,{css:[f.l0.rowWithGap(8),f.l0.align.center],children:[(0,l.tZ)(L.xv,{multiline:!1,css:{fontFamily:f.TV.fontFamilyCode,maxWidth:"40%"},children:V}),(0,l.tZ)(L.xv,{multiline:!1,css:{fontFamily:f.TV.fontFamilyCode},children:"CNAME"}),(0,l.tZ)(O.II,{readOnly:!0,ref:N,onChange:function(){return null},value:Q,onFocus:function(){return U(N)},id:te("CNAMERecord")}),(0,l.tZ)(v.zx,{onClick:function(){return X(N)},text:"Copy"})]}),K?(0,l.BX)(d.G,{css:[f.l0.colWithGap(8)],children:[(0,l.tZ)(L.xv,{variant:"small",children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,l.tZ)(d.G,{css:[f.l0.flex.row,f.l0.align.stretch],children:(0,l.tZ)(v.zx,{onClick:function(){return R(!1)},text:"Use A record instead",variant:"outlined"})})]}):null]}),Y?(0,l.BX)(d.G,{css:[f.l0.colWithGap(4)],children:[K?(0,l.tZ)("label",{htmlFor:te("txtRecord"),children:(0,l.BX)(L.xv,{color:"dimmer",variant:"small",multiline:!1,children:["This domain also requires a ",(0,l.tZ)("code",{children:"TXT"})," Record"]})}):(0,l.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,l.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,l.BX)(d.G,{css:[f.l0.rowWithGap(8),f.l0.align.center],children:[(0,l.tZ)(L.xv,{multiline:!1,css:{fontFamily:f.TV.fontFamilyCode,maxWidth:"40%"},children:V}),(0,l.tZ)(L.xv,{multiline:!1,css:{fontFamily:f.TV.fontFamilyCode},children:"TXT"}),(0,l.tZ)(O.II,{readOnly:!0,ref:P,onChange:function(){return null},value:J,onClick:function(){return U(P)},id:te("txtRecord")}),(0,l.tZ)(v.zx,{onClick:function(){return X(P)},text:"Copy"})]})]}):null,"loading"===g?(0,l.tZ)(d.G,{css:[f.l0.colWithGap(12),f.l0.pt(16)],children:(0,l.tZ)(ee,{replId:t,domain:V,onVerified:function(){return $("verified")},onError:function(){return $("error")}})}):null,"verified"===g?(0,l.tZ)(d.G,{css:[f.l0.colWithGap(12),f.l0.pt(16)],children:(0,l.tZ)(L.xv,{multiline:!1,children:"Your domain has been verified."})}):null,"error"===g||C?(0,l.tZ)(d.G,{css:[f.l0.colWithGap(12),f.l0.pt(16)],children:(0,l.BX)(L.xv,{multiline:!1,children:["Creating the domain link failed",C?": "+C:"","."]})}):null,(0,l.BX)(d.G,{css:[f.l0.rowWithGap(12),f.l0.justify.end],children:[(0,l.tZ)(v.zx,{onClick:u,text:"Close"}),Y&&null===g?(0,l.tZ)(v.zx,{disabled:b,onClick:function(){w(!0),k(null),I({variables:{replId:t,domain:V}}).then((function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;"Repl"===(null===n||void 0===n?void 0:n.__typename)?(k(null),$("loading")):("ServiceUnavailable"!==(null===n||void 0===n?void 0:n.__typename)&&"NotFoundError"!==(null===n||void 0===n?void 0:n.__typename)&&"UnauthorizedError"!==(null===n||void 0===n?void 0:n.__typename)||k(null===n||void 0===n?void 0:n.message),$("error")),w(!1),h()})).catch((function(e){w(!1),k(e.message)}))},text:"".concat(b?"Linking domain...":"Link domain"),iconLeft:(0,l.tZ)(j.Z,{}),colorway:"primary"}):null]})]})}function ee(e){var t,n=e.domain,r=e.replId,i=e.onVerified,s=e.onError,u=function(e){var t=(0,o.Z)({},_,e);return k.a(P,t)}({variables:{replId:r,domain:n},pollInterval:1e3}),h=u.data,p=u.stopPolling;if((0,c.useEffect)((function(){var e,t;if(h&&"Repl"===h.repl.__typename){var n=h.repl;if("NotFoundError"!==(null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)){if("DomainStatus2"===(null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)){var r=n.checkDomain2,o=r.retry,a=r.verified;a||o?(!a&&o||p(),a&&i()):s()}}else s()}}),[h,p,i,s]),"Repl"===(null===h||void 0===h?void 0:h.repl.__typename)&&h.repl.checkDomain2){var m,v,g,y="DomainStatus2"===h.repl.checkDomain2.__typename?h.repl.checkDomain2:null,b=null;if(null===y||void 0===y?void 0:y.records){var x=y.records;x.__typename;b=(0,Z.Z)(x,["__typename"])}var C,S=null;if(!(null===y||void 0===y?void 0:y.status))"ServiceUnavailable"===(null===(C=h.repl.checkDomain2)||void 0===C?void 0:C.__typename)&&(S=h.repl.checkDomain2.message),S||(S="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.");return(0,l.BX)(d.G,{css:[f.l0.colWithGap(16),f.l0.justify.spaceBetween],children:[(0,l.BX)(d.G,{css:[f.l0.rowWithGap(16),f.l0.align.center],children:[(0,l.tZ)("div",{css:[f.l0.width("20px"),f.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:f.TV.accentPrimaryDimmer},{borderTopColor:f.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,l.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:S})]}),b||"DomainStatus2"===(null===(m=h.repl.checkDomain2)||void 0===m?void 0:m.__typename)&&(null===(v=h.repl.checkDomain2)||void 0===v?void 0:v.retry)||"ServiceUnavailable"===(null===(g=h.repl.checkDomain2)||void 0===g?void 0:g.__typename)?(0,l.BX)(d.G,{children:[(0,l.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),b?(0,l.BX)(d.G,{children:["Currently, your domain\u2019s records show:",(0,l.tZ)("pre",{css:[f.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(b).map((function(e){var t=(0,a.Z)(e,2),r=t[0],i=t[1];return null===i||void 0===i?void 0:i.map((function(e){return(0,l.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[n," ",r," ",e]},"{domain}-{dnsType}")}))}))})]}):(0,l.tZ)(L.xv,{children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,l.tZ)(w(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return"Repl"===(null===h||void 0===h?void 0:h.repl.__typename)&&"NotFoundError"===(null===(t=h.repl.checkDomain2)||void 0===t?void 0:t.__typename)?(0,l.tZ)(l.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function te(e){var t=e.replId,n=e.domain,r=e.onUnlink,i=e.onGoBack,s=(0,a.Z)(function(e){var t=(0,o.Z)({},_,e);return S.D(N,t)}({variables:{input:{id:t,removeDomain:n}}}),2),u=s[0],h=s[1];return(0,c.useEffect)((function(){h.data&&h.data.updateRepl.repl&&r()}),[h.data,r]),(0,l.BX)(d.G,{css:[f.l0.colWithGap(16)],children:[(0,l.BX)(d.G,{css:[f.l0.colWithGap(8)],children:[(0,l.tZ)(L.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,l.BX)(L.xv,{children:["Are you sure you want to unlink"," ",(0,l.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+n,children:n}),"?"]})]}),(0,l.BX)(d.G,{css:[f.l0.rowWithGap(12),f.l0.justify.end],children:[(0,l.tZ)(v.zx,{onClick:i,text:"Cancel"}),(0,l.tZ)(v.zx,{onClick:function(){h.loading||u()},text:h.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,l.tZ)(q.Z,{}),disabled:h.loading})]})]})}function ne(e){var t=e.replId,n=e.hostedUrl,r=e.apexProxy,i=e.onUnlink,o=e.onLink,a=e.domains,s=e.refetch,u=(0,c.useState)("listing"),h=u[0],p=u[1],m=(0,c.useState)(null),g=m[0],y=m[1],Z=null;return"listing"===h?Z=(0,l.BX)(d.G,{css:[f.l0.colWithGap(16)],children:[(0,l.BX)(d.G,{children:[(0,l.tZ)(L.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,l.tZ)(d.G,{css:[f.l0.colWithGap(16)],children:a.map((function(e){return e?(0,l.tZ)(d.G,{children:(0,l.BX)(d.G,{css:[f.l0.colWithGap(4),f.l0.justify.spaceBetween,f.l0.align.center],children:[(0,l.BX)(d.G,{css:[f.l0.rowWithGap(8),f.l0.align.center,f.l0.justify.spaceBetween,f.l0.width("100%")],children:[(0,l.tZ)(d.G,{css:[f.l0.flex.shrink(1)],children:(0,l.tZ)(X.u,{tooltip:e.domain,children:(0,l.tZ)(L.xv,{multiline:!1,children:e.domain})})}),(0,l.tZ)(d.G,{children:(0,l.tZ)(X.u,{tooltip:(0,l.tZ)(L.xv,{css:{textTransform:"capitalize"},multiline:!1,children:e.state}),children:(0,l.tZ)(Q,{status:e.state})})})]}),(0,l.BX)(d.G,{css:[f.l0.rowWithGap(12),f.l0.justify.end,f.l0.align.center,f.l0.width("100%"),"verified"!==e.state&&f.l0.pl(12)],children:[(0,l.tZ)(v.zx,{text:"Unlink",css:f.l0.width("verified"!==e.state?"50%":"100%"),onClick:function(){y(e.domain),p("unlinking")}}),"verified"!==e.state?(0,l.tZ)(v.zx,{text:"Check status",css:f.l0.width("50%"),onClick:function(){y(e.domain),p("linking")}}):null]})]})},e.domain):null}))})]}),(0,l.tZ)(v.zx,{text:"Create domain link",onClick:function(){return p("linking")},iconLeft:(0,l.tZ)(V.Z,{})})]}):"linking"===h?Z=(0,l.tZ)(J,{replId:t,desiredARecord:r,hostedUrl:n,existingDomain:g,onLink:o,onGoBack:function(){p("listing"),y(null)},onLinkStarted:s,onStateChanged:s}):"unlinking"===h&&null!==g&&(Z=(0,l.tZ)(te,{replId:t,domain:g,onUnlink:function(){s(),p("listing"),i()},onGoBack:function(){p("listing"),y(null)}})),(0,l.BX)(d.G,{css:[f.l0.colWithGap(16)],children:[(0,l.tZ)(L.h4,{level:1,variant:"subheadDefault",children:"Domain Linking"}),(0,l.BX)(L.xv,{css:{fontStyle:"italic"},children:["Domain linking to the development preview is deprecated, please consider switching to"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/about-deployments",target:"_blank",children:"deployments"})," ","as a more scalable solution."]}),Z]})}function re(e){var t,n,r=function(e){var t=(0,o.Z)({},_,e);return k.a(G,t)}({variables:{replId:e}}),i=r.data,a=r.refetch,l=(0,c.useState)(!1),s=l[0],u=l[1],d=(0,c.useRef)(!1);if(!i||"Repl"!==i.repl.__typename)return{showEditReplcoDomainButton:!1};var f=null!==(n=null===(t=i.repl.domains)||void 0===t?void 0:t.filter(Boolean).filter((function(e){return!(null===e||void 0===e?void 0:e.hosting_deployment_id)})).map((function(e){return{domain:e.domain,state:e.state}})))&&void 0!==n?n:[];return f.length||d.current?(d.current=!0,{showEditReplcoDomainButton:!0,setIsEditingDomain:u,isEditingDomain:s,editDomainProps:{domains:f,refetch:a,replId:e,apexProxy:i.repl.apexProxy,hostedUrl:i.repl.hostedUrl,onUnlink:function(){a(),u(!1)},onLink:function(){a(),u(!1)}}}):{showEditReplcoDomainButton:!1}}!function(e){e.Verified="verified",e.Verifying="verifying",e.Failed="failed"}(U||(U={}));var ie=n(61025),oe=n(62385),ae=n(21651),le=n(16296),ce=n(18314),se=n(58125),ue=n(89138),de=n(85919),fe=n(71053),he=n(79824),pe=n(51467),me=n(82893),ve=n.n(me),ge=n(35650),ye=n(85247),Ze=n(63723),be=n(50769),we=n(30779),xe=n(3911),Ce="flag-ocean-easy",ke=(0,p.iv)([f.l0.borderRadius(6),f.l0.color.foregroundDimmer,f.l0.height(24),f.l0.m(4)]),Se=[f.l0.reset.button,O.u3,f.l0.colWithGap(0),f.l0.flex.grow(0),f.l0.color.accentPositiveStronger,f.l0.fontSize("small"),f.l0.focusRing,{"&:hover":[f.l0.cursor.pointer,f.l0.color.accentPositiveStrongest]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},f.l0.py(0),f.l0.px(4)],Ee=(0,ie.X)({root:[f.l0.flex.row,f.l0.align.center,f.l0.justify.spaceBetween,f.l0.border({color:f.TV.outlineDimmest,direction:"bottom"}),f.l0.p(2),f.l0.container("root")],navControls:[f.l0.align.center,f.l0.rowWithGap(4),f.l0.flex.grow(1)],urlWrapper:[f.l0.position.relative,f.l0.flex.row,f.l0.flex.grow(1)],urlOptions:[f.l0.position.absolute,f.l0.width("100%"),f.l0.backgroundColor.backgroundHigher,f.l0.p(8),f.l0.colWithGap(6),f.l0.border(),f.l0.borderRadius(0,0,12,12),{top:"100%",borderTop:0}],urlOptionsSection:[f.l0.colWithGap(4),f.l0.pb(8),f.l0.border({direction:"bottom"}),{":last-child":{borderBottom:0}}],urlOptionsTitle:[f.l0.rowWithGap(0),f.l0.justify.spaceBetween,f.l0.flex.grow(1)],portRadioGroup:[f.l0.colWithGap(8)],portOption:[f.l0.rowWithGap(8),f.l0.color.foregroundDimmer],portOptionSelected:[f.l0.rowWithGap(8),f.l0.color.foregroundDefault],portOptionLabel:[{"&:hover":[f.l0.cursor.pointer,f.l0.color.foregroundDefault]}],temporaryDevLink:[f.l0.color.accentPositiveStronger,f.l0.fontSize("small"),f.l0.focusRing,{"&:hover":[f.l0.cursor.pointer,f.l0.color.accentPositiveStrongest]}],url:Se,urlSelected:[Se,f.l0.backgroundColor.backgroundHighest,{borderBottomLeftRadius:0}],urlPath:[f.l0.py(0),f.l0.fontSize(12),f.l0.flex.grow(1)],urlPath2:[f.l0.py(0),f.l0.fontSize(12),f.l0.flex.grow(1),{borderTopLeftRadius:0,borderBottomLeftRadius:0}],goButton:[f.l0.position.absolute,f.l0.right(4),f.l0.top("50%"),{transform:"translateY(-50%)"}],text:[f.l0.ml(8),f.l0.mr(4),f.l0.color.foregroundDimmest],buttons:[f.l0.flex.row,f.l0.align.center,(0,i.Z)({},f.nC.max("mobileMax","root"),{span:{fontSize:0},svg:{marginRight:0}})],navButton:[f.l0.p(6),f.l0.height("auto"),f.l0.width("auto"),f.l0.borderRadius(0),f.l0.flex.shrink(0),{border:"none"}],fakeUrl:[f.l0.fontSize(12),f.l0.border(),{boxSizing:"content-box"},f.l0.borderRadius(6),f.l0.px(8),f.l0.py(2),f.l0.flex.grow(1),f.l0.rowWithGap(4),f.l0.align.center],devtoolsErrorsBadge:[f.l0.position.absolute,f.l0.center,f.l0.textAlign.center,f.l0.backgroundColor.accentNegativeStronger,f.l0.color.accentNegativeDimmest,f.l0.right(0),f.l0.top(-2),f.l0.p(2),f.l0.minWidth(14),f.l0.height(14),f.l0.borderRadius(16),f.l0.fontSize(10)]}),Te=function e(t,n,i,o){"use strict";var a=this;(0,r.Z)(this,e),this.history=[],this.historyIndex=-1,this.init=function(e,t){a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1,a.notifyChanges()},this.notifyChanges=function(){a.onChange(a.canGoBack(),a.canGoForward(),a.getCurrentRelativeUrl(),a.getCurrentPort())},this.canGoBack=function(){return a.historyIndex>0},this.canGoForward=function(){return a.historyIndex<a.history.length-1},this.getCurrentRelativeUrl=function(){return a.history[a.historyIndex].relativeUrl},this.getCurrentPort=function(){return a.history[a.historyIndex].port},this.push=function(e,t){e===a.getCurrentRelativeUrl()&&t===a.getCurrentPort()||(a.history=a.history.slice(0,a.historyIndex+1),a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1),a.notifyChanges()},this.relativeUrlUpdate=function(e){a.pendingNavigations>0?a.pendingNavigations-=1:a.push(e,a.getCurrentPort())},this.back=function(){(0,fe.xn)(),a.canGoBack()&&(a.historyIndex-=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.forward=function(){(0,fe.Yl)(),a.canGoForward()&&(a.historyIndex+=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.navigate=function(e,t){var n=null!==t&&void 0!==t?t:a.getCurrentPort();a.requestIframeNavigateTo(e,n),a.push(e,n),a.pendingNavigations+=1},this.refresh=function(){var e,t;(0,fe.rJ)(),a.requestIframeNavigateTo(null!==(e=a.getCurrentRelativeUrl())&&void 0!==e?e:"/",null!==(t=a.getCurrentPort())&&void 0!==t?t:80)},this.setPort=function(e){var t=a.getCurrentRelativeUrl();a.navigate(t,e)},this.onChange=i,this.pendingNavigations=0,this.requestIframeNavigateTo=o,this.init(t,n)};function Re(e){var t=e.canEditDomain,n=e.onToggleDevtools,r=e.navigationState,i=e.replId,s=e.url,p=e.requestIframeNavigateTo,Z=e.openedPorts,b=e.onOpenPortSettings,w=e.devtoolsErrorCount,x=e.setRefreshCb,C=(0,m.Z)()?"Open in the browser":"New tab",k=function(e){var t=e.navigationState,n=e.requestIframeNavigateTo,r=(0,a.Z)(c.useState(!1),2),i=r[0],o=r[1],l=(0,a.Z)(c.useState(!1),2),s=l[0],u=l[1],d=(0,a.Z)(c.useState("Loading..."),2),f=d[0],h=d[1],p=(0,a.Z)(c.useState(80),2),m=p[0],v=p[1],g=c.useCallback((function(e,t,n,r){o(e),u(t),h(n),v(r)}),[]),y=(0,pe.Z)(n),Z=(0,de.Z)((function(){return new Te("/",80,g,y.current)}),[g,y]);return c.useEffect((function(){"active"===t.state&&Z.relativeUrlUpdate(t.relativeUrl)}),[t.state,t.relativeUrl,Z]),{canNavigateBack:i,canNavigateForward:s,navigateBack:Z.back,navigateForward:Z.forward,canNavigateToInputRelativeUrl:f!==t.relativeUrl,navigateToInputRelativeUrl:function(){(0,fe.Fq)(f),Z.navigate(f)},inputRelativeUrl:f,setInputRelativeUrl:h,refresh:Z.refresh,setPort:Z.setPort,selectedPort:m}}({navigationState:r,requestIframeNavigateTo:p}),S=k.canNavigateForward,E=k.navigateForward,T=k.canNavigateBack,R=k.navigateBack,D=k.canNavigateToInputRelativeUrl,I=k.navigateToInputRelativeUrl,_=k.inputRelativeUrl,B=k.setInputRelativeUrl,G=k.refresh,P=k.setPort,A=k.selectedPort;c.useEffect((function(){x((function(){return G}))}),[G,x]);var N=re(i),U=(0,l.tZ)(Ge,{});return"external-page"===r.state?U=(0,l.tZ)(Be,{backToLocal:function(){return G()}}):"active"===r.state&&(U=(0,l.tZ)(_e,{canNavigateForward:S,navigateForward:E,canNavigateBack:T,navigateBack:R,canNavigateToInputRelativeUrl:D,navigateToInputRelativeUrl:I,inputRelativeUrl:_,setInputRelativeUrl:B,refresh:G,openedPorts:Z,setPort:P,selectedPort:A,url:s,onOpenPortSettings:b})),(0,l.BX)(y.Tg,{css:Ee.root,children:[U,(0,l.tZ)(d.G,{css:f.l0.flex.row,children:(0,l.BX)(d.G,{css:Ee.buttons,children:[t&&N.showEditReplcoDomainButton?(0,l.BX)(l.HY,{children:[(0,l.tZ)(v.zx,{variant:"outlined",size:"small",text:"Edit custom domain",onClick:function(){return N.setIsEditingDomain(!N.isEditingDomain)},iconLeft:(0,l.tZ)(oe.Z,{size:16})}),(0,l.tZ)(ae.u,{isOpen:N.isEditingDomain,onRequestClose:function(){return N.setIsEditingDomain(!1)},children:(0,l.tZ)(ne,(0,o.Z)({},N.editDomainProps))})]}):null,"active"===r.state?(0,l.BX)(d.G,{css:f.l0.position.relative,children:[(0,l.tZ)(v.zx,{size:"small",variant:"outlined",onClick:n,css:ke,text:"Devtools",iconLeft:(0,l.tZ)(h.Z,{})}),w>0?(0,l.tZ)(d.G,{css:Ee.devtoolsErrorsBadge,children:(0,l.tZ)(L.xv,{variant:"small",multiline:!1,children:w>99?"99+":w.toString()})}):null]}):null,(0,l.tZ)(g.Z,{size:"small",variant:"outlined",css:ke,href:s,target:"_blank",iconLeft:(0,l.tZ)(u.Z,{}),text:C,onClick:function(){(0,fe.Ji)()}})]})})]})}function De(e){var t=e.url,n=(0,a.Z)(c.useState(!1),2),r=n[0],i=n[1],o=c.useRef(null);return c.useEffect((function(){return function(){o.current&&clearTimeout(o.current)}}),[]),(0,l.tZ)(X.u,{isOpen:r,placement:"bottom",tooltip:r?"Copied!":"Copy link",delay:"none",children:(0,l.tZ)(le.hU,{alt:"Copy link",size:18,tooltipHidden:!1,onClick:function(){(0,M.Z)(t),i(!0),o.current=setTimeout((function(){i(!1)}),1500)},children:(0,l.tZ)(ge.Z,{})})})}function Ie(e){var t=e.canNavigateToInputRelativeUrl,n=e.navigateToInputRelativeUrl,r=e.inputRelativeUrl,i=e.setInputRelativeUrl,o=e.openedPorts,s=e.setPort,u=e.selectedPort,h=e.url,p=e.onOpenPortSettings,m=(0,a.Z)(c.useState(!1),2),v=m[0],g=m[1],Z=(0,z.U)(),b=Z("radioGroup");return(0,l.BX)(l.HY,{children:[v?(0,l.BX)(y.Tg,{css:Ee.urlOptions,elevated:!0,children:[(0,l.BX)(d.G,{css:Ee.urlOptionsSection,children:[(0,l.BX)(d.G,{css:Ee.urlOptionsTitle,children:[(0,l.BX)(L.xv,{children:["Listening on ",(0,be.Z)("port",o.length),":"]}),(0,l.tZ)(le.hU,{alt:"Port settings",onClick:p,children:(0,l.tZ)(ye.Z,{})})]}),(0,l.tZ)(we.E,{tag:"fieldset",css:Ee.portRadioGroup,name:b,value:u.toString(),onChange:function(e){s(parseInt(e.target.value,10)),g(!1)},children:o.map((function(e,t){return(0,l.BX)(d.G,{css:u===e.externalPort?Ee.portOptionSelected:Ee.portOption,children:[(0,l.tZ)(we.Y,{id:Z(e.externalPort),value:e.externalPort.toString()}),(0,l.tZ)("label",{htmlFor:Z(e.externalPort),css:Ee.portOptionLabel,children:":".concat(e.localPort.toString()," \u2192 :").concat(e.externalPort.toString())})]},"".concat(t,"-").concat(e.externalPort,":").concat(e.localPort))}))})]}),(0,l.BX)(d.G,{css:Ee.urlOptionsSection,children:[(0,l.tZ)(L.xv,{children:"Dev URL:"}),(0,l.BX)(d.G,{css:[f.l0.rowWithGap(4)],children:[(0,l.tZ)(ve(),{legacyBehavior:!0,href:h,passHref:!0,children:(0,l.tZ)("a",{css:Ee.temporaryDevLink,target:"_blank",children:h})}),(0,l.tZ)(De,{url:h})]})]})]}):null,(0,l.tZ)("button",{css:v?Ee.urlSelected:Ee.url,onClick:function(){return g(!v)},children:"{...}.repl.co".concat((0,xe.O)(u)?"":":"+u)}),(0,l.tZ)(O.II,{css:Ee.urlPath2,style:v?{borderBottomRightRadius:0}:{},value:r,onKeyDown:function(e){"Enter"===e.key&&t&&n()},onChange:function(e){""!==e.currentTarget.value?i(e.target.value):i("/")}})]})}function _e(e){var t=e.canNavigateForward,n=e.navigateForward,r=e.canNavigateBack,i=e.navigateBack,o=e.canNavigateToInputRelativeUrl,a=e.navigateToInputRelativeUrl,c=e.inputRelativeUrl,u=e.setInputRelativeUrl,f=e.refresh,h=e.openedPorts,p=e.setPort,m=e.selectedPort,v=e.url,g=e.onOpenPortSettings,Z=(0,Ze.P5)({controlName:Ce,logFlagToAnalytics:!0});return(0,l.BX)(d.G,{css:Ee.navControls,children:[(0,l.tZ)(le.hU,{alt:"back",onClick:i,disabled:!r,css:Ee.navButton,children:(0,l.tZ)(ue.Z,{})}),(0,l.tZ)(le.hU,{alt:"forward",onClick:n,disabled:!t,css:Ee.navButton,children:(0,l.tZ)(ce.Z,{})}),(0,l.tZ)(le.hU,{alt:"Refresh",onClick:f,css:Ee.navButton,children:(0,l.tZ)(s.Z,{})}),(0,l.BX)(d.G,{css:Ee.urlWrapper,children:[Z?(0,l.tZ)(Ie,{canNavigateToInputRelativeUrl:o,navigateToInputRelativeUrl:a,inputRelativeUrl:c,setInputRelativeUrl:u,openedPorts:h,setPort:p,selectedPort:m,url:v,onOpenPortSettings:g}):(0,l.tZ)(O.II,{css:Ee.urlPath,value:c,onKeyDown:function(e){"Enter"===e.key&&o&&a()},onChange:function(e){""!==e.currentTarget.value?u(e.target.value):u("/")}}),(0,l.tZ)(y.Tg,{elevated:!0,css:Ee.goButton,children:(0,l.tZ)(le.hU,{alt:"Go to URL",disabled:!o,onClick:a,size:18,tooltipContents:(0,l.tZ)(se.bM,{keyCombo:"Enter"}),children:(0,l.tZ)(ce.Z,{})})})]})]})}function Be(e){var t=e.backToLocal,n=(0,a.Z)(c.useState(!1),2),r=n[0],i=n[1];return(0,l.BX)(d.G,{css:Ee.navControls,children:[(0,l.tZ)(v.zx,{size:"small",variant:"outlined",onClick:function(){t(),i(!0)},loading:r,css:ke,text:"Back to my page",iconLeft:r?(0,l.tZ)($.Z,{}):(0,l.tZ)(ue.Z,{})}),(0,l.BX)(y.Tg,{elevated:!0,css:Ee.fakeUrl,children:[(0,l.tZ)(X.u,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,l.tZ)(he.Z,{})}),(0,l.tZ)(L.xv,{variant:"small",color:"dimmer",children:"External page"})]})]})}function Ge(){return(0,l.tZ)(d.G,{css:Ee.navControls,children:(0,l.BX)(y.Tg,{elevated:!0,css:Ee.fakeUrl,children:[(0,l.tZ)(X.u,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,l.tZ)($.Z,{})}),(0,l.tZ)(L.xv,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}},3911:function(e,t,n){function r(e){return 80===e||443===e}function i(e,t){if(!t||r(t)){var n=new URL(e);return n.port&&(n.port=""),n}var i=new URL(e);return i.port=t.toString(),i}n.d(t,{O:function(){return r},h:function(){return i}})},49233:function(e,t,n){n.d(t,{I5:function(){return p},sY:function(){return f}});var r=n(72006),i=n(43119),o=n(71440),a=n(24635);function l(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewDeployBanner on Repl {\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    config {\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    currentUserPermissions {\n      linkDomain\n    }\n    lang {\n      id\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n        ...ReplEnvironmentWebviewDeployBanner\n      }\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(l()),f=(0,o.Ps)(c()),h=(0,o.Ps)(s(),f,d);function p(e){var t=(0,r.Z)({},u,e);return a.a(h,t)}},61335:function(e,t,n){n.d(t,{Z:function(){return q}});var r=n(72006),i=n(4405),o=n(74985),a=n(50959),l=n(43182),c=n(49233),s=n(34547),u=n(48306),d=n.n(u),f=n(97846),h=n(5875),p=n(21423),m=n(9434);function v(){return a.useEffect((function(){(0,m.j)(m.U3.WS_REPLCO_UNREACHABLE)}),[]),(0,o.BX)("div",{className:"jsx-88c49dc4f1cb807b unreachable",children:[(0,o.BX)(p.gC,{align:"center",spacing:4,children:[(0,o.BX)(p.gC,{align:"center",children:[(0,o.tZ)(h.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(h.Z,{level:4,children:"This Repl link isn\u2019t broken!"}),(0,o.tZ)(h.Z,{level:4,foreground:2,children:"It\u2019s just blocked."})]}),(0,o.BX)(p.gC,{spacing:2,className:"why",children:[(0,o.tZ)(f.Z,{foreground:2,children:"Why this might be happening:"}),(0,o.tZ)(f.Z,{foreground:2,children:(0,o.BX)("ul",{className:"jsx-88c49dc4f1cb807b",children:[(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,o.BX)(f.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"our IT docs"})," ","or"," ",(0,o.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"contact support"}),"."]})]}),(0,o.tZ)(d(),{id:"88c49dc4f1cb807b",children:".unreachable.jsx-88c49dc4f1cb807b{padding:var(--space-32)}.unreachable.jsx-88c49dc4f1cb807b ul.jsx-88c49dc4f1cb807b{list-style-position:inside}.unreachable.jsx-88c49dc4f1cb807b li.jsx-88c49dc4f1cb807b{padding-bottom:var(--space-16)}"})]})}var g=a.createContext(!1),y=n(26473),Z=n(88965),b=n(84532),w=n(84638),x=n(63824),C=n(53312);function k(){return(0,o.BX)(y.G,{css:[Z.l0.align.center,Z.l0.p(64)],children:[(0,o.BX)(y.G,{css:[Z.l0.align.center],children:[(0,o.tZ)(h.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(C.xv,{css:[Z.l0.textAlign.center,Z.l0.pb(8)],variant:"headerDefault",children:"We've detected a crash loop"}),(0,o.tZ)(C.xv,{css:[Z.l0.textAlign.center],variant:"subheadDefault",color:"dimmer",children:"Preview is disabled until you click the run button again."})]}),(0,o.tZ)(y.G,{css:[Z.l0.p(16)],children:(0,o.tZ)(C.xv,{css:[Z.l0.color.foregroundDimmer,Z.l0.textAlign.center,Z.l0.pb(16)],children:"There may be errors in the code that are causing your application to repeatedly crash."})})]})}var S=n(2272),E=n(60168),T=n(79509),R=n(45317),D=n(95141),I=n(75277),_=n(78572);function B(e){var t=e.onCompleted,n=e.startTimeInSeconds,r=(0,S.Z)(a.useState(n),2),i=r[0],l=r[1];a.useEffect((function(){var e=setInterval((function(){return l((function(t){return 0===t?(clearInterval(e),0):t-1}))}),1e3);return function(){return clearInterval(e)}}),[]),a.useEffect((function(){i>0||t()}),[i]);var c=24*2.6;return(0,o.tZ)(y.G,{css:{width:24,height:24},children:(0,o.BX)(y.G,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.center,{width:"100%",height:"100%",strokeDasharray:c,strokeDashoffset:c,strokeLinecap:"butt",strokeWidth:2,stroke:R.TV.accentPrimaryDefault,fill:"none"}],children:[(0,o.tZ)("svg",{width:"100%",height:"100%",className:d().dynamic([["23bd846669111030",[c]]]),children:(0,o.tZ)("circle",{r:10,cx:12,cy:12,style:{animationName:"countdown-animation",animationDuration:"".concat(n,"s"),animationDelay:"0s",animationTimingFunction:"linear"},className:d().dynamic([["23bd846669111030",[c]]])})}),(0,o.tZ)(d(),{id:"23bd846669111030",dynamic:[c],children:"@-webkit-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:".concat(c,"px}}@-moz-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}@-o-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}@keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}")}),(0,o.tZ)(C.xv,{css:[Z.l0.position.absolute],variant:"small",multiline:!1,children:i})]})})}function G(e){var t=e.onCompleted,n=[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.p(6),Z.l0.pl(8),Z.l0.flex.growAndShrink(1),{borderWidth:1,borderStyle:"solid",background:R.TV.accentPrimaryDimmest,borderColor:R.TV.accentPrimaryDimmer,color:R.TV.accentPrimaryStrongest}];return(0,o.BX)(y.G,{css:n,children:[(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,o.tZ)(C.xv,{variant:"small",children:"When you're ready, you can deploy from the"}),(0,o.tZ)(D.zx,{iconLeft:(0,o.tZ)(I.Z,{}),text:"Release",disabled:!0,size:"small"}),(0,o.tZ)(C.xv,{variant:"small",children:"menu!"})]}),(0,o.tZ)(B,{startTimeInSeconds:3,onCompleted:t})]})}function P(e){var t,n=e.repl,r=e.onClick,i=(0,S.Z)(a.useState(!1),2),l=i[0],c=i[1],s=(0,_.gg)().isDeployableRepl,u=(0,E.Z)("workspace","workspace-deployments-webview-banner"),d=u.shouldDisplay,f=u.register,h=u.dismiss;a.useEffect((function(){f()}),[f]);var p=n.hostingDeploymentPermissions.canDeploy&&s,v="HostingDeployment"===(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)&&n.hostingDeployment.currentBuild;return p&&!v&&d?(0,o.tZ)(y.G,{children:l?(0,o.tZ)(G,{onCompleted:function(){h()}}):(0,o.tZ)(T.U,{onClick:function(){(0,m.j)(m.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner"}),h(),r()},onDismiss:function(){c(!0)},rounded:!1})}):null}var A=n(84833),N=n(43312),U={container:(0,N.iv)(Z.l0.p(16),Z.l0.height("100%"),Z.l0.align.center),imageContainer:(0,N.iv)(Z.l0.height("100%"),Z.l0.colWithGap(16),Z.l0.align.center,Z.l0.justify.center,Z.l0.width(300)),image:(0,N.iv)(Z.l0.width(200))};function L(){return(0,o.tZ)(y.G,{css:U.container,children:(0,o.BX)(y.G,{css:U.imageContainer,children:[(0,o.tZ)("div",{css:U.image,children:(0,o.tZ)(A.Z,{src:"/public/images/run_pointer.svg",alt:"A play button with a mouse pointer",height:250,width:400})}),(0,o.tZ)(C.h4,{level:3,variant:"subheadDefault",children:"Run this Repl to see the hosted output."})]})})}var O=n(28639),X=n(12901),M=n(28435);function F(){var e=(0,M.Z)().ports,t=(0,a.useState)(e.openedPorts.current),n=t[0],r=t[1];return(0,a.useEffect)((function(){return e.openedPorts.subscribe(r)}),[e]),n}var W=n(71053),H=n(3911),V=n(73175);function z(e){var t=new URL(e);return t.protocol="https:",t.toString()}function j(e){var t=(0,c.I5)({variables:{id:e}}).data,n=(0,X.Z)(),r=function(){var e,t=F();return t.length?t.some((function(e){return 80===e.externalPort}))?80:null!==(e=t[0].externalPort)&&void 0!==e?e:80:80}(),i=(0,V.Z)();if(!r&&"html"!==i)return null;var o="Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl:null;return o?{iframeSrc:n?z((0,H.h)(o.prodUrl,r).toString()):(0,H.h)(o.devUrl,r).toString(),presentationUrl:(0,H.h)(o.prodUrl,r).toString()}:null}function q(e){var t=e.runner,n=e.openPane,u=e.containerRef,d=e.openDotReplit,f=e.setRefreshCb,h=(0,s.Z)(),p=(0,c.I5)({variables:{id:h}}).data,C="Repl"===(null===p||void 0===p?void 0:p.repl.__typename)?p.repl:null,S=(0,a.useContext)(g),E=(0,w.S)().isCircuitBroken,T=(0,a.useRef)(null),R=(0,a.useState)(!1),D=R[0],I=R[1],_=(0,a.useState)(t.getRunState()),B=_[0],G=_[1],A=(0,a.useState)(0),N=A[0],U=A[1],M=j(h),V=F(),z="html"===(null===C||void 0===C?void 0:C.lang.id)||"html_beta"===(null===C||void 0===C?void 0:C.lang.id),q=(0,X.Z)(),$=!1,Y=null;M?S?Y=(0,o.tZ)(v,{}):E?Y=(0,o.tZ)(k,{}):!function(e,t){return e===O.Ah.OFFLINE||e===O.Ah.STOPPING||e===O.Ah.IDLE&&"html"!==t.mode}(B,t)?q?($=!0,Y=(0,o.tZ)("webview",(0,r.Z)({"data-cy":"ws-webview",ref:T,src:M.iframeSrc,onLoad:function(){return I(!0)},css:[Z.l0.flex.growAndShrink(1),{border:"none",backgroundColor:Z.TV.white}]},x.Z))):($=!0,Y=(0,o.tZ)("iframe",(0,r.Z)({title:"webview","data-cy":"ws-webview",ref:T,src:M.iframeSrc,onLoad:function(){return I(!0)},css:[Z.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:Z.TV.white}]},x.Z))):Y=(0,o.tZ)(L,{}):Y=null;var K,Q=function(e){var t=e.isWebviewVisible,n=e.iframeOrWebviewRef,r=e.iframeSrc,i=(0,a.useState)({state:"loading",relativeUrl:null}),o=i[0],l=i[1],c=(0,X.Z)();return(0,a.useEffect)((function(){var e=function(e){var t=new URL(e.url),n=t.pathname+t.search+t.hash;t.hostname===o.hostname?l((function(e){return"active"===e.state&&e.relativeUrl===n?e:{state:"active",relativeUrl:n}})):l((function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}}))};if(c&&t&&r){if(!n.current)throw new Error("Expected iframe to be defined when isWebviewRendered");var i=n.current,o=new URL(r);return i.addEventListener("did-navigate",e),i.addEventListener("did-navigate-in-page",e),function(){i.removeEventListener("did-navigate",e),i.removeEventListener("did-navigate-in-page",e)}}}),[t,c,r,n]),(0,a.useEffect)((function(){var e=function(e){var n,r=new URL(e.origin);if(e.origin&&r.hostname===t.hostname&&"object"===typeof e.data&&(null===(n=e.data)||void 0===n?void 0:n.type)){var i=e.data;if("page-navigation"===i.type)if(i.payload.isExternal)l((function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}}));else{var o=i.payload.path;l((function(e){return"active"===e.state&&e.relativeUrl===o?e:{state:"active",relativeUrl:o}}))}}};if(!c&&r){var t=new URL(r);return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}}),[c,r]),o}({isWebviewVisible:$,iframeOrWebviewRef:T,iframeSrc:null===M||void 0===M?void 0:M.iframeSrc});return(0,a.useEffect)((function(){var e=function(e){var t;if(e.origin&&new URL(e.origin).hostname===o&&"object"===typeof e.data&&(null===(t=e.data)||void 0===t?void 0:t.type))switch(e.data.type){case"event":var n=e.data,a=n.event,c=n.payload;return void("error"===a?l.Tb(c):(0,m.j)(a,(0,i.Z)((0,r.Z)({},c),{replId:h,isHTML:z})));case"show-badge":return void U(e.data.count);case"ready":var s,u;if(e.data.wasShown)null===(s=T.current)||void 0===s||null===(u=s.contentWindow)||void 0===u||u.postMessage({type:"toggleDevtools",source:"automatic"},"*");return}},n=t.onStateChanged(G);if(null===M||void 0===M?void 0:M.iframeSrc){var o=new URL(M.iframeSrc).hostname;return window.addEventListener("message",e),function(){window.removeEventListener("message",e),n()}}}),[h,z,t,null===M||void 0===M?void 0:M.iframeSrc]),C&&M?(K=$?(0,o.tZ)(b.ZP,{navigationState:Q,canEditDomain:C.currentUserPermissions.linkDomain,url:M.presentationUrl,openedPorts:V,replId:h,requestIframeNavigateTo:function(e,t){var n;if(U(0),T.current){if(q){var r=T.current,i=new URL(e,M.iframeSrc);return t&&(i=(0,H.h)(i.toString(),t)),void r.loadURL(i.toString())}if(null===(n=T.current)||void 0===n?void 0:n.contentWindow){var o=(0,H.h)(M.iframeSrc,t);o.searchParams.set("initialPath",e),T.current.src=o.href}}},onToggleDevtools:function(){if((0,W.t1)(),U(0),q){var e=T.current;e&&(e.isDevToolsOpened()?e.closeDevTools():e.openDevTools())}else{var t,n;null===(t=T.current)||void 0===t||null===(n=t.contentWindow)||void 0===n||n.postMessage({type:"toggleDevtools",source:"manual"},"*")}},onOpenPortSettings:d,devtoolsErrorCount:N,setRefreshCb:f}):null,(0,o.BX)(y.G,{css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.height("100%"),Z.l0.borderRadius(4),{overflow:"hidden"}],innerRef:u,children:[K,D?(0,o.tZ)(P,{repl:C,onClick:function(){return n({type:"deployments"})}}):null,Y]})):null}},71053:function(e,t,n){n.d(t,{Fq:function(){return u},Ji:function(){return f},Yl:function(){return c},rJ:function(){return l},t1:function(){return d},xn:function(){return s}});var r=n(72006),i=n(77637),o=n(9434);function a(e){var t=e.actionType,n=(0,i.Z)(e,["actionType"]);(0,o.j)(o.U3.WS_WEBVIEW_USED,(0,r.Z)({type:t},n))}function l(){a({actionType:"refresh"})}function c(){a({actionType:"history_forward"})}function s(){a({actionType:"history_back"})}function u(e){a({actionType:"navigated_to",path:e})}function d(){a({actionType:"devtools_opened"})}function f(){a({actionType:"open_new_window"})}},96834:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(50959);function i(e){var t=e.container,n=e.runner,i=e.refreshWebView;(0,r.useEffect)((function(){var e,r=[];return"shellrunner"===n.mode&&r.push(n.onOutput((function(t){t&&t.includes("exit status 1")&&(e=Date.now())}))),r.push(t.onPortOpened((function(t){var n=t.isVnc;if(t.isForwarded&&!n){var r=Date.now();void 0!==e&&r-e<1e3||i()}}))),function(){return r.forEach((function(e){return e()}))}}),[t,i,n])}},30311:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(50959),i=n(28639);function o(e){var t=e.runner,n=e.refreshWebView;(0,r.useEffect)((function(){if("html"===t.mode)return t.onStateChanged((function(e){e===i.Ah.RUNNING&&n()}))}),[t,n])}},84638:function(e,t,n){n.d(t,{S:function(){return f},e:function(){return d}});var r=n(2272),i=n(28639),o=n(28435),a=n(7131),l=n(50959),c=n(90234),s=n(71999),u=(0,c.cn)(!1),d=function(){return(0,s.KO)(u)};function f(){var e=(0,o.Z)().runner,t=(0,r.Z)(d(),2),n=t[0],c=t[1];return l.useEffect((function(){if("shellrunner"===e.mode){var t,n=[],r=Date.now(),o=Array(6),l=0;return n.push(e.onLocalRun((function(){r=Date.now(),c(!1)}))),n.push(e.onStateChanged((function(e){if(t===i.Ah.RUNNING&&e===i.Ah.IDLE){var n=l%6,s=n>0?n-1:5,u=Date.now();o[n]=u;var d=o[s];void 0!==d&&u-d<6e4&&null!=r&&r<d&&(c(!0),a.kg.info("webview circuit broken",{lastRunnerStops:JSON.stringify(o),runnerStopCount:l,lastLocalRunTimestamp:r})),l++,t=e}else t=e}))),function(){c(!1),n.forEach((function(e){return e()}))}}}),[e,c]),{isCircuitBroken:n}}},17284:function(e,t,n){n.d(t,{C:function(){return v},V:function(){return p}});var r=n(57135),i=n(9970),o=n(96583),a=n(74985),l=n(51087),c=n(84833),s=n(11866),u=n(91046),d=n(17403),f=n(52783),h=d.Type.Object({id:d.Type.Optional(d.Type.String()),icon:d.Type.Optional(d.Type.String()),type:d.Type.Union([d.Type.Literal("action"),d.Type.Literal("context")]),label:d.Type.String(),description:d.Type.String(),contributions:d.Type.Optional(d.Type.Array(d.Type.Enum(s.YC)))});function p(e,t){return m.apply(this,arguments)}function m(){return m=(0,r.Z)((function(e,t){var n,i,a;return(0,o.__generator)(this,(function(l){switch(l.label){case 0:return[4,e.data];case 1:if(n=l.sent(),!f.B4.Check(h,n))throw new Error("Invalid command");if(i=null,"string"===typeof n.icon){if(""===n.icon)throw new Error("Command icon cannot be empty. Omit it if you do not want an icon.");i=n.icon}return a={data:{label:n.label,description:n.description,type:n.type,iconPath:i,id:n.id?n.id:void 0},extension:t.extension},n.contributions&&(a.data.contributions=n.contributions,t.logger.warn("Command ".concat(n.label," uses deprecated contributions field"))),"context"===n.type?a.commands=function(){var n=(0,r.Z)((function(n){var r,i,a,l,c,s,u,d,f;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=n.active,i=n.search,a=n.path,l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.commands({active:r,search:i,path:a})];case 2:return l=o.sent(),[3,4];case 3:return c=o.sent(),t.logger.error(c.message,{commandError:c,api:"command"}),[2,[]];case 4:return[4,l.length];case 5:s=o.sent(),u=[],d=0,o.label=6;case 6:return d<s?(f=u.push,[4,p(l[d],t)]):[3,9];case 7:f.apply(u,[o.sent()]),o.label=8;case 8:return d++,[3,6];case 9:return[2,u]}}))}));return function(e){return n.apply(this,arguments)}}():a.run=(0,r.Z)((function(){var n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.run()];case 1:return r.sent(),[2,void 0];case 2:return n=r.sent(),t.logger.error(n.message,{runError:n,api:"command"}),[2,{type:"error",message:n.message}];case 3:return[2]}}))})),[2,a]}}))})),m.apply(this,arguments)}function v(e,t){if(!["context","action"].includes(e.data.type))throw new Error("Command type not supported: "+e.data.type);if("action"===e.data.type)return{match:l.pl,data:{label:e.data.label,description:e.data.description,icon:e.data.iconPath?(0,a.tZ)(c.Z,{src:(0,u.Vh)(e.extension.baseUrl,e.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{children:" "}),type:"action",run:(0,r.Z)((function(){var t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:if(!(t=e.run))throw new Error("Action command must have run");return[4,t()];case 1:return[2,n.sent()]}}))}))}};var n=e.commands;if(!n)throw new Error("Context command must have commands");return{match:l.pl,data:{label:e.data.label,description:e.data.description,icon:e.data.iconPath?(0,a.tZ)(c.Z,{src:(0,u.Vh)(e.extension.baseUrl,e.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{}),type:e.data.type},commands:function(){var a=(0,r.Z)((function(r){var a,l,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return a=r.active,l=r.search,c=(0,i.Z)(t.path).concat([{data:e.data}]),[4,n({active:a,search:l,path:c})];case 1:return[2,o.sent().map((function(e){return v(e,{path:c})}))]}}))}));return function(e){return a.apply(this,arguments)}}()}}},57326:function(e,t,n){n.d(t,{oo:function(){return E},cR:function(){return x},nP:function(){return C},gI:function(){return k},Sp:function(){return S}});var r=n(2272),i=n(50959),o=n(28435),a=n(34547),l=n(72006),c=n(43119),s=n(71440),u=n(24635),d=n(50216);function f(){var e=(0,c.Z)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,c.Z)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,c.Z)(["\n  query ReplExtensionHostedReplCoUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n        hostedUrl\n        user {\n          username\n          id\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}var m={},v=(0,s.Ps)(f());var g=(0,s.Ps)(h());var y=(0,s.Ps)(p());var Z=n(70189),b=n(11866),w=n(67043);function x(){var e,t=i.useContext(Z.Z),n=(0,r.Z)(i.useState(null!==(e=null===t||void 0===t?void 0:t.replConfigIsExtension)&&void 0!==e&&e),2),a=n[0],l=n[1],c=(0,o.Z)().dotReplit;return i.useEffect((function(){return c.watch((function(e){var t,n,r,i=null!==(r=null===(t=e.config)||void 0===t||null===(n=t.extension)||void 0===n?void 0:n.isExtension)&&void 0!==r&&r;l(i)}))}),[c]),a}function C(){var e=(0,r.Z)(i.useState(null),2),t=e[0],n=e[1],a=(0,o.Z)().dotReplit;return i.useEffect((function(){return a.watch((function(e){var t,r,i=null===(t=e.config)||void 0===t||null===(r=t.extension)||void 0===r?void 0:r.extensionID;n(i?(0,b.T8)(i):null)}))}),[a]),t}var k=function(){var e=(0,o.Z)().dotReplit,t=(0,r.Z)(i.useState(null),2),n=t[0],a=t[1];return i.useEffect((function(){return e.watch((function(e){var t,n,r=null===(t=e.config)||void 0===t||null===(n=t.extension)||void 0===n?void 0:n.staticDirectory;a(r?{path:r,relativePath:r.replace(/^\.\//,"")}:null)}))}),[e]),n};function S(){var e=(0,a.Z)(),t=function(e){var t=(0,l.Z)({},m,e);return u.a(v,t)}({variables:{replId:e}}),n=t.data,c=t.loading,s=t.error,f=(0,r.Z)(function(e){var t=(0,l.Z)({},m,e);return d.D(g,t)}(),1)[0],h=function(){var e,t;return!c&&!s&&(!(!(null===n||void 0===n?void 0:n.repl)||"Repl"!==n.repl.__typename)&&(null!==(t=null===(e=n.repl.config)||void 0===e?void 0:e.isExtension)&&void 0!==t&&t))}(),p=(0,r.Z)(i.useState(!1),2),y=p[0],Z=p[1],b=(0,o.Z)().dotReplit;i.useEffect((function(){return b.watch((function(e){var t,n,r;Z(null!==(r=null===(t=e.config)||void 0===t||null===(n=t.extension)||void 0===n?void 0:n.isExtension)&&void 0!==r&&r)}))}),[b]),i.useEffect((function(){c||s||y!==h&&f({variables:{replId:e,isExtension:y},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:e,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:y}}}}})}),[c,s,e,h,y,f])}var E=function(){var e,t,n,r=(0,w.Z)(),i=function(e){var t=(0,l.Z)({},m,e);return u.a(y,t)}({variables:{replId:(null===r||void 0===r?void 0:r.id)||""},skip:!(null===r||void 0===r?void 0:r.id)}),o=i.data;if(i.error||!o)throw new Error("Encountered an unknown error. Please contact support.");if("Repl"!==o.repl.__typename)throw new Error("Encountered an unknown error. Please contact support.");var a=null===o||void 0===o||null===(e=o.repl)||void 0===e?void 0:e.title,c=null===o||void 0===o||null===(t=o.repl)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.username;if(!a||!c)throw new Error("Encountered an unknown error. Please contact support.");return"https://".concat(a.replace(/[_\s]+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").toLowerCase(),".").concat(c,".repl.co")}},86370:function(e,t,n){n.d(t,{LM:function(){return r.LM},Mu:function(){return i.Mu},WF:function(){return r.WF},WG:function(){return i.WG},jx:function(){return i.jx},ot:function(){return r.ot},r9:function(){return i.r9}});var r=n(76261),i=n(8149)},76261:function(e,t,n){n.d(t,{EO:function(){return I},I1:function(){return G},Kf:function(){return B},LM:function(){return D},WF:function(){return R},bN:function(){return E},dI:function(){return _},ot:function(){return T},zm:function(){return P}});var r=n(57135),i=n(81962),o=n(72006),a=n(4405),l=n(2272),c=n(96583),s=n(34547),u=n(9434),d=n(36129),f=n(90234),h=n(19334),p=n.n(h),m=n(50959),v=n(91046),g=n(97836),y=n(85234),Z=n.n(y),b=n(1343),w=n(52659),x=n(8149),C=n(391),k=n(11866),S=n(94099);function E(){var e=(0,C.E4)(x.We);return m.useCallback(function(){var t=(0,r.Z)((function(t){return(0,c.__generator)(this,(function(n){return e({installationId:t}),[2]}))}));return function(e){return t.apply(this,arguments)}}(),[e])}function T(){var e=U(),t=e.throwSystemError,n=e.throwExtensionError,l=(0,C.E4)(x.nk),s=(0,C.ZC)(x.Ol),u=(0,C.Ld)();return m.useCallback(function(){var e=(0,r.Z)((function(e){var r,d,f,h,m,y,Z,b,C,E,T,R,D,I,_,B,G,P,A,N;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return r=e.installationId,d=e.forceRefetch,f=void 0===d||d,[4,(0,w.Al)()];case 1:return!(h=c.sent())||h.error?(t({friendlyMessage:"Failed to load user context",error:h.error}),[2]):(m=h.result.userHasInternalApiEnabled,(y=u.get(x.Lq).find((function(e){return e.installationId===r})))?[4,(0,w.V9)(y.baseUrl)]:[3,3]);case 2:return Z=c.sent(),b=s.createLogger({extensionId:y.extensionId,installationId:y.installationId,local:!0}),Z.error?(C=(0,a.Z)((0,o.Z)({},y),{manifest:(0,v.fF)(),enableExperimentalApi:!1,enableInternalApi:!1,logger:b.createLogger({extensionName:"Unnamed Extension"}),isLocal:!0}),s.info("Adding extension: ".concat(C.manifest.name),{extensionArgs:p()(C,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:C.isLocal,error:!0}),l(C),E="Failed to load extension manifest",(0,i.Z)(Z.error,S.Jg)&&(E=Z.error.message),n({extensionId:y.extensionId,installationId:y.installationId,extensionError:{error:Z.error,friendlyMessage:E}}),[2]):(T=(0,g.MU)(Z.result,"experimental-api"),R=(0,a.Z)((0,o.Z)({},y),{manifest:Z.result,enableExperimentalApi:T,enableInternalApi:m,logger:b.createLogger({extensionName:Z.result.name}),isLocal:!0}),s.info("Adding extension: ".concat(R.manifest.name),{extensionArgs:p()(R,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!0}),l(R),[3,5]);case 3:return[4,(0,w.mr)(r,f)];case 4:return(D=c.sent()).error?(t({friendlyMessage:"Something went wrong while downloading an extension",error:D.error}),[2]):(I=D.result)?(_=I.extension)?_.manifest?"ExtensionManifestError"===_.manifest.__typename?(n({extensionId:(0,k.T8)(_.id),installationId:(0,k.Ad)(I.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(_.manifest.message),error:new Error(_.manifest.message)}}),[2]):_.manifest&&"ExtensionManifest"===_.manifest.__typename?(B=(0,v.tr)(_.manifest),G=(0,g.MU)(B,"experimental-api"),P=(0,k.T8)(_.id),A=_.enableInternalApi,N={extensionId:P,installationId:r,manifest:B,baseUrl:(0,v.BY)(_.url),enableExperimentalApi:G,enableInternalApi:m||A,logger:s.createLogger({extensionId:P,installationId:r,extensionName:B.name,local:!1}),isLocal:!1},s.info("Adding extension: ".concat(N.manifest.name),{extensionArgs:p()(N,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!1}),l(N),[2,I]):(n({extensionId:(0,k.T8)(_.id),installationId:(0,k.Ad)(I.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:new Error("Expected extension manifest to be defined")}}),[2]):(n({extensionId:(0,k.T8)(_.id),installationId:(0,k.Ad)(I.id),extensionError:{friendlyMessage:"Extension failed to install",error:new Error("Expected extension manifest to be defined")}}),[2]):(t({friendlyMessage:"Extension failed to install",error:new Error("Expected extension to be defined")}),[2]):(t({friendlyMessage:"Extension failed to install",error:new Error("Expected installation to be defined")}),[2]);case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[l,n,t,u,s])}function R(){var e=T(),t=U().throwSystemError;return m.useCallback(function(){var n=(0,r.Z)((function(n){var r,i,o,a,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return r=n.extensionId,i=n.replId,[4,(0,w.Wc)({extensionId:r,replId:i})];case 1:return(l=c.sent()).error?(t({error:l.error,friendlyMessage:"Something went wrong while installing an extension"}),[2]):((0,u.j)(u.U3.EXTENSION_INSTALLED,{name:null===(o=l.result)||void 0===o||null===(a=o.extension)||void 0===a?void 0:a.name,extensionId:r}),[4,e({installationId:(0,k.Ad)(l.result.id)})]);case 2:return c.sent(),[2,l.result]}}))}));return function(e){return n.apply(this,arguments)}}(),[e,t])}function D(){var e=E(),t=(0,C.Ld)(),n=U().throwSystemError;return m.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return i=r.installationId,o=r.replId,a=t.get(x._t),(l=a.find((function(e){return e.installationId===i})))?l.installationId&&l.extensionId?((0,u.j)(u.U3.EXTENSION_UNINSTALLED,{name:l.manifest.name,extensionId:l.extensionId}),[4,(0,w.Y4)({installationId:l.installationId,replId:o})]):(n({friendlyMessage:"Failed to uninstall extension",error:new Error("Expected installationId to be defined")}),[2]):(n({friendlyMessage:"Extension appears to be already uninstalled",error:new Error("Expected extension to be defined")}),[2]);case 1:return c.sent(),[4,e(l.installationId)];case 2:return c.sent(),[2]}}))}));return function(e){return i.apply(this,arguments)}}(),[e,t,n])}function I(){var e=E(),t=T();return m.useCallback(function(){var n=(0,r.Z)((function(n){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,e(n)];case 1:return r.sent(),[4,t({installationId:n,forceRefetch:!0})];case 2:return r.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),[e,t])}function _(){var e=function(){var e=T(),t=(0,C.ZC)(x.Ol),n=U().throwSystemError;return m.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,l,s,u,d,f,h;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,(0,w.Zw)(r)];case 1:if((i=c.sent()).error)return n({friendlyMessage:"Failed to load installed extensions",error:i.error}),[2];o=!0,a=!1,l=void 0,c.label=2;case 2:c.trys.push([2,9,10,11]),s=i.result[Symbol.iterator](),c.label=3;case 3:if(o=(u=s.next()).done)return[3,8];d=u.value,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,e({installationId:(0,k.Ad)(d.id),forceRefetch:!0})];case 5:return c.sent(),[3,7];case 6:return f=c.sent(),t.error("Extension Loading error: ".concat(f.message),{extension:!0,errors:f.message}),[3,7];case 7:return o=!0,[3,3];case 8:return[3,11];case 9:return h=c.sent(),a=!0,l=h,[3,11];case 10:try{o||null==s.return||s.return()}finally{if(a)throw l}return[7];case 11:return[2]}}))}));return function(e){return i.apply(this,arguments)}}(),[e,n,t])}(),t=(0,C.E4)(x.Ol),n=(0,C.E4)(x.zk),i=(0,l.Z)(m.useState(!1),2),o=i[0],a=i[1],s=(0,l.Z)(m.useState(null),2),u=s[0],f=s[1],h=(0,l.Z)(m.useState(null),2),p=h[0],v=h[1];return m.useEffect((function(){if(u&&p&&!o){var t=u.replId;a(!0),e(t)}}),[u,p,e,o]),m.useCallback((function(e){var r=e.replId,i=e.userId;if(!o){f({replId:r,userId:i});var a=(0,d.Z)({extension:!0,isInitialized:!0,replId:r,userId:i},{onLog:function(e){n(e)}});v(a),t(a)}}),[t,o,n])}function B(){var e=T(),t=(0,x.qr)(),n=(0,x.Mu)(),i=(0,C.E4)(x.ot);return m.useCallback(function(){var o=(0,r.Z)((function(r){var o,a,l,s;return(0,c.__generator)(this,(function(c){return o=(0,v.BY)(r),(a=t.find((function(e){return e.baseUrl===o})))||(l=(0,k.T8)(Z()()),s=(0,k.Ad)(Z()()),i(a={extensionId:l,installationId:s,baseUrl:o})),n.find((function(e){return e.extensionId===(null===a||void 0===a?void 0:a.extensionId)}))||e({installationId:a.installationId}),[2]}))}));return function(e){return o.apply(this,arguments)}}(),[t,n,i,e])}function G(){var e=(0,s.Z)(),t=(0,b.q_)({variables:{replId:e}}).data,n=(0,C.E4)(x.M1),i=(0,C.Ld)(),o=T();return m.useCallback((0,r.Z)((function(){var e;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return"Repl"!==(null===t||void 0===t?void 0:t.repl.__typename)?[2]:(e=n(t.repl.hostedUrl),[4,o({installationId:e.installationId,forceRefetch:!0})]);case 1:return r.sent(),[2,i.get(x._t).find((function(t){return t.installationId===e.installationId}))]}}))})),[t,n,o,i])}function P(){var e=(0,s.Z)(),t=(0,b.q_)({variables:{replId:e}}).data,n=(0,C.E4)(x.M1),r=(0,x.Mu)();return m.useMemo((function(){if("Repl"===(null===t||void 0===t?void 0:t.repl.__typename)){var e=n(t.repl.hostedUrl);return r.find((function(t){return e.installationId===t.installationId}))}}),[t,r,n])}var A=(0,f.cn)(null,(function(e,t,n){var r=e(x.Ol);t(x.wQ,n),r.error("Extension System Error: ".concat(n.error.message),{extensionSystem:!0,originalError:n.error.message,friendlyMessage:n.friendlyMessage})})),N=(0,f.cn)(null,(function(e,t,n){var r=e(x._t),i=e(x.Ol),o=r.find((function(e){return e.extensionId===n.extensionId}));if(i.error("Extension Error: ".concat(n.extensionError.friendlyMessage),{extension:!0,extensionId:n.extensionId,originalError:n.extensionError.error.message,friendlyMessage:n.extensionError.friendlyMessage}),!o)return t(x.nk,{extensionId:n.extensionId,installationId:n.installationId,manifest:(0,v.fF)({name:n.extensionId}),baseUrl:"",enableExperimentalApi:!1,enableInternalApi:!1,logger:i.createLogger({extensionId:n.extensionId,extensionName:n.extensionId,installationId:n.installationId,local:void 0}),isLocal:null}),void t(x.f4,{extensionId:n.extensionId,extensionError:n.extensionError});t(x.f4,{extensionId:n.extensionId,extensionError:n.extensionError})}));function U(){return{throwSystemError:(0,C.E4)(A),throwExtensionError:(0,C.E4)(N)}}},52659:function(e,t,n){n.d(t,{Al:function(){return Z},V9:function(){return g},Wc:function(){return s},Y4:function(){return d},Zw:function(){return m},mr:function(){return h}});var r=n(57135),i=n(96583),o=n(68216),a=n(20854),l=n(91046),c=n(1343);function s(e){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)((function(e){var t,n,r,o,l,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.extensionId,n=e.replId,a.l?[4,a.l.mutate({mutation:c.aq,variables:{extensionId:t,replId:n}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(o=i.sent()).errors&&o.errors.length>0?(l=o.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when installing extension: "+l),result:null}]):(s=null===(r=o.data)||void 0===r?void 0:r.installExtension)?"UnauthorizedError"===(null===s||void 0===s?void 0:s.__typename)||"UserError"===(null===s||void 0===s?void 0:s.__typename)?[2,{error:new Error("Error when installing extension: "+s.message),result:null}]:s.extension?s.extension.url?[2,{result:s,error:null}]:[2,{error:new Error("Error when installing extension: Extension does not have a URL and cannot be installed"),result:null}]:[2,{error:new Error("Error when installing extension: expected extension to be set"),result:null}]:[2,{error:new Error("Error when installing extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var t,n,r,o,l,s;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.installationId,n=e.replId,a.l?[4,a.l.mutate({mutation:c.jF,variables:{installationId:t,replId:n}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(o=i.sent()).errors&&o.errors.length>0?(l=o.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when uninstalling extension: "+l),result:null}]):(s=null===(r=o.data)||void 0===r?void 0:r.uninstallExtension)?"NotFoundError"===(null===s||void 0===s?void 0:s.__typename)||"UserError"===(null===s||void 0===s?void 0:s.__typename)?[2,{error:new Error("Error when uninstalling extension: "+s.message),result:null}]:[2,{result:s,error:null}]:[2,{error:new Error("Error when uninstalling extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return p=(0,r.Z)((function(e){var t,n,r,o=arguments;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=o.length>1&&void 0!==o[1]&&o[1],a.l?[4,a.l.query({query:c.AR,variables:{installationId:e},fetchPolicy:t?"network-only":"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return n=i.sent(),"ExtensionInstallation"!==(r=n.data.extensionInstallationById).__typename?[2,{error:new Error("Expected to find extension installation"),result:null}]:r.extension?[2,{result:r,error:null}]:[2,{error:new Error("Expected installation.extension"),result:null}]}}))})),p.apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return a.l?[4,a.l.query({query:c.Ve,variables:{replId:e}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return t=r.sent(),"ExtensionInstallationList"!==(n=t.data.extensionInstallations).__typename?[2,{error:new Error("Expected to find ExtensionInstallationList"),result:null}]:[2,{result:n.installations,error:null}]}}))}))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var t,n,r,a,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:t=(0,l.BP)(e),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(t)];case 2:return[4,i.sent().text()];case 3:return n=i.sent(),r=o.ku(n),(a=(0,l.U4)(r)).error?[2,{error:a.error,result:null}]:[2,{result:a.manifest,error:null}];case 4:return"SyntaxError"===(c=i.sent()).name?[2,{error:new Error("Error when fetching manifest: invalid JSON"),result:null}]:[2,{error:new Error("Error when fetching manifest: "+c.message),result:null}];case 5:return[2]}}))}))).apply(this,arguments)}function Z(){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)((function(){var e,t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return a.l?[4,a.l.query({query:c.LF,fetchPolicy:"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return e=n.sent(),(t=e.data.currentUser)&&"CurrentUser"===t.__typename?[2,{result:{userHasInternalApiEnabled:t.isAdmin||t.isStaff},error:null}]:[2,{error:new Error("Expected to find CurrentUser"),result:null}]}}))}))).apply(this,arguments)}},8149:function(e,t,n){n.d(t,{Lq:function(){return b},M1:function(){return I},Mu:function(){return U},Ol:function(){return x},UB:function(){return S},UT:function(){return E},WG:function(){return M},We:function(){return _},_K:function(){return G},_t:function(){return Z},c_:function(){return X},ep:function(){return T},f4:function(){return B},jx:function(){return L},nk:function(){return R},ot:function(){return D},qr:function(){return W},r9:function(){return O},s6:function(){return F},wQ:function(){return w},zk:function(){return k}});var r=n(57135),i=n(72006),o=n(4405),a=n(2272),l=n(9970),c=n(96583),s=n(90234),u=n(11866),d=n(92153),f=n(391),h=n(85234),p=n.n(h),m=n(36129),v=n(35554),g=n.n(v),y=n(85919),Z=(0,s.cn)([]);var b=(0,s.cn)([]),w=(0,s.cn)(null),x=(0,s.cn)((0,m.Z)({extension:!0,isInitialized:!1},{onLog:function(){throw new Error("Logged before extension system was initialized.")}})),C=(0,s.cn)([]),k=(0,s.cn)(null,(function(e,t,n){var r=e(C),i=(0,d.ZP)(r,(function(e){e.push((0,d.ZP)(n,(function(t){t.index=e.length}))),e.length>1e3&&e.splice(0,e.length-1e3)}));t(C,i)})),S=(0,s.cn)(null,(function(e,t){t(C,[])})),E=(0,s.cn)("local:true"),T=(0,s.cn)((function(e){var t=e(C),n=e(E);if(!n)return t;var r=n.split(" ").map((function(e){var t=(0,a.Z)(e.split(":"),2),n=t[0],r=t[1];return n&&void 0===r?function(e){return e.message.toLowerCase().includes(n.toLowerCase())}:n&&""===r?function(e){return void 0!==g()(e,n)}:n&&r?function(e){try{return String(g()(e,n))===r}catch(t){return!1}}:null})).filter((function(e){return null!==e}));return t.filter((function(e){return r.every((function(t){return t(e)}))}))})),R=(0,s.cn)(null,function(){var e=(0,r.Z)((function(e,t,n){return(0,c.__generator)(this,(function(r){if(e(Z).find((function(e){return e.extensionId===n.extensionId})))throw new Error("Extension already loaded");return t(Z,(function(e){return(0,d.ZP)(e,(function(e){var t=function(e){var t,n=e.baseUrl,r=e.extensionId,i=e.installationId,o=e.manifest,a=e.enableExperimentalApi,l=e.enableInternalApi,c=e.logger;return{baseUrl:n,extensionId:r,installationId:i,manifest:o,isLocal:e.isLocal,stateAtom:(0,s.cn)({error:null,panes:[],scopes:new Set(null===(t=o.scopes)||void 0===t?void 0:t.map((function(e){return e.name}))),enableExperimentalApi:a,enableInternalApi:l,commands:new Map}),logger:c}}(n);e.push(t)}))})),[2]}))}));return function(t,n,r){return e.apply(this,arguments)}}()),D=(0,s.cn)(null,function(){var e=(0,r.Z)((function(e,t,n){return(0,c.__generator)(this,(function(r){if(e(b).find((function(e){return e.extensionId===n.extensionId||e.installationId===n.installationId||e.baseUrl===n.baseUrl})))throw new Error("Extension already loaded");return t(b,(function(e){return(0,d.ZP)(e,(function(e){e.push(n)}))})),[2]}))}));return function(t,n,r){return e.apply(this,arguments)}}()),I=(0,s.cn)(null,(function(e,t,n){var r=e(b).find((function(e){return e.baseUrl===n}));if(r)return r;var i={baseUrl:n,extensionId:(0,u.T8)(p()()),installationId:(0,u.Ad)(p()())};return t(b,(function(e){return(0,d.ZP)(e,(function(e){e.push(i)}))})),i})),_=(0,s.cn)(null,function(){var e=(0,r.Z)((function(e,t,n){return(0,c.__generator)(this,(function(e){return t(Z,(function(e){return(0,d.ZP)(e,(function(e){var t=e.findIndex((function(e){return"extensionId"in n?e.extensionId===n.extensionId:e.installationId===n.installationId}));-1!==t&&e.splice(t,1)}))})),[2]}))}));return function(t,n,r){return e.apply(this,arguments)}}()),B=(0,s.cn)(null,(function(e,t,n){var r=e(Z).find((function(e){return e.extensionId===n.extensionId}));if(!r)throw new Error("Extension not found");t(r.stateAtom,(function(e){return(0,d.ZP)(e,(function(e){e.error=n.extensionError}))}))})),G=(0,s.cn)(null,(function(e,t,n){var r=n.createCommand.id;t(n.extensionStateAtom,(function(e){return(0,d.ZP)(e,(function(e){e.commands.set(r,n.createCommand)}))}))})),P=(0,s.cn)((function(e){return e(Z).flatMap((function(t){return(0,l.Z)(e(t.stateAtom).commands.values())}))})),A=(0,s.cn)((function(e){return e(Z).map((function(e){var t;return null===(t=e.manifest.fileHandlers)||void 0===t?void 0:t.map((function(t){return(0,o.Z)((0,i.Z)({},t),{extension:e})}))})).flat().filter((function(e){return!!e}))})),N=(0,s.cn)((function(e){return e(Z).map((function(e){var t;return null===(t=e.manifest.tools)||void 0===t?void 0:t.map((function(t){return(0,o.Z)((0,i.Z)({},t),{extension:e})}))})).flat().filter((function(e){return!!e}))}));function U(){return(0,f.ZC)(Z)}function L(e){return U().find((function(t){return t.installationId===e}))}function O(e){var t=L(e);return t&&e?t.stateAtom:null}function X(){return(0,f.ZC)(A)}function M(){return(0,f.ZC)(N)}function F(e){var t=(0,f.ZC)(P);return(0,y.Z)((function(){return t.filter((function(t){return t.contributions.includes(e)}))}),[t,e])}function W(){return(0,f.ZC)(b)}},391:function(e,t,n){n.d(t,{E4:function(){return f},Ld:function(){return s},OA:function(){return u},Wv:function(){return h},ZC:function(){return d}});var r=n(2272),i=n(74985),o=n(90234),a=n(71999),l=n(50959),c=(0,l.createContext)(null);function s(){return function(){var e=(0,l.useContext)(c);if(!e)throw new Error("Expected extensions context");return e}().store}var u=function(e){var t=s();return(0,a.KO)(e,{store:t})};function d(e){var t=s();return(0,a.Dv)(e,{store:t})}var f=function(e){var t=s();return(0,a.b9)(e,{store:t})};function h(e){var t=e.children,n=(0,r.Z)(l.useState((function(){return(0,o.MT)()})),1)[0];return(0,i.tZ)(c.Provider,{value:{store:n},children:t})}},36129:function(e,t,n){n.d(t,{Z:function(){return d},i:function(){return r}});var r,i=n(57389),o=n(72006),a=n(4405),l=n(7131),c=n(59245),s=n.n(c),u=n(49500);function d(e,t){var n=function(n){var a,c,d,f,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{logLevel:r.debug},p=null!==(a=(c={},(0,i.Z)(c,r.debug,l.kg.debug),(0,i.Z)(c,r.warn,l.kg.warn),(0,i.Z)(c,r.info,l.kg.info),(0,i.Z)(c,r.error,l.kg.error),c)[h.logLevel])&&void 0!==a?a:l.kg.debug,m=null!==(d=(f={},(0,i.Z)(f,r.debug,u.debug),(0,i.Z)(f,r.warn,u.warn),(0,i.Z)(f,r.info,u.info),(0,i.Z)(f,r.error,u.error),f)[h.logLevel])&&void 0!==d?d:u.debug;m(n,h),p(n,s()((0,o.Z)({},h,e),["replId","logLevel"])),t.onLog((0,o.Z)({message:n},h,e))},c={context:e,info:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(e,(0,a.Z)((0,o.Z)({},t),{logLevel:r.info}))},warn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(e,(0,a.Z)((0,o.Z)({},t),{logLevel:r.warn}))},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(e,(0,a.Z)((0,o.Z)({},t),{logLevel:r.error}))},createLogger:function(n){return d((0,o.Z)({},e,n),t)}};return c}!function(e){e.debug="debug",e.info="info",e.warn="warn",e.error="error"}(r||(r={}))},94468:function(e,t,n){n.d(t,{Cl:function(){return a},VD:function(){return d},uN:function(){return u}});var r=n(90234),i=n(71999),o=n(50959),a=(0,o.createContext)(null),l=(0,r.cn)(null),c=(0,r.cn)(null,(function(e,t,n){t(l,n)}));function s(){var e=(0,o.useContext)(a);if(!e)throw new Error("Expected store in context");return e}function u(){return(0,i.Dv)(l,{store:s()})}function d(e){var t=(0,i.Dv)(l,{store:s()}),n=(0,i.b9)(c,{store:s()});(0,o.useEffect)((function(){t!==e&&n(e)}),[e,t,n])}},3717:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(28435),i=n(50959),o=n(87978);function a(e){var t=(0,r.Z)().fs,n=(0,i.useCallback)((function(n,r){var i=n.code,a=n.insertAt,l=n.newLine,c=void 0===l||l;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e))throw new Error("Invalid file, this should never happen");if(0!==i.length)var s=t.watchTextFile(e,{onReady:function(e){var n=e.initialContent,o=e.writeChange,l=n.toString(),u="end"===a?l.length:a,d=i;c&&(0!==u&&u!==l.length&&-1===(u=l.indexOf("\n",u))&&(u=l.length),0!==u&&"\n"!==l[u-1]&&(d="\n"+d),"\n"!==l[u]&&(d+="\n")),o({from:u,insert:d},r),t.flush().finally((function(){s()}))}})}),[e,t]);return!e||(0,o.T3)(e)||(0,o.sL)(e)?null:n}},23223:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(57135),i=n(9970),o=n(96583),a=n(50959),l=n(25202),c=n(9434),s=n(4561),u=n(86813),d=n(28435),f=n(9558),h=n(87978),p=n(55102),m=n(21164),v=n(94284);function g(e){var t=e.moveOrDeleteFile,n=(0,d.Z)().fs,g=(0,p.K)(),y=(0,a.useRef)(new Map),Z=(0,u.ex)(),b=(0,a.useState)(!1),w=b[0],x=b[1],C=(0,a.useState)(!1),k=C[0],S=C[1],E=(0,a.useState)([]),T=E[0],R=E[1],D=(0,m.k)(),I=(0,f.uV)(),_=T.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),B=(0,a.useState)(),G=B[0],P=B[1],A=(0,u.Gg)();(0,a.useEffect)((function(){if(Z&&!y.current.has(Z)&&Z!==v.w){var e=function(e){var n=e.node.path;A(e.eventType===s.kS.Move?{path:n,type:"move",to:e.to}:{path:n,type:"delete"}),t&&t(e),y.current.delete(Z),R((function(e){return e.filter((function(e){return e.path!==Z}))}))};(0,h.Mb)(Z)?n.watchTextFile(Z,{onMoveOrDelete:e,onError:function(e,t){e.code||(n.flush(),n.persist({skipDebounce:!0}),I({error:e,extras:t,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,t){R((function(n){return(0,i.Z)(n.filter((function(e){return e.path!==Z}))||[]).concat([{path:Z,prompt:t,cb:e}])})),g("user:ot:diverged",{path:Z,divergence:t}),x(!0),G||P(Z)}}):n.watchFile(Z,{onChange:function(){},onMoveOrDelete:e}),y.current.set(Z,!0)}}),[Z,n,I,t,G,g,A]);var N,U,L=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return(0,c.j)(c.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,c.j)(c.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),S(!0),[4,Promise.all(T.map((function(t){return R((function(e){var n=e.filter((function(e){return e.path!==t.path}));return 0===n.length?x(!1):P(n[0].path),n})),t.cb(e)})))];case 1:return t.sent(),S(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),O=G?T.find((function(e){return e.path===G})):null,X=null===O||void 0===O?void 0:O.prompt,M=G,F=(0,l.J)({left:{code:null!==(N=null===X||void 0===X?void 0:X.localContent)&&void 0!==N?N:"",filePath:M},right:{code:null!==(U=null===X||void 0===X?void 0:X.remoteContent)&&void 0!==U?U:"",filePath:M}}),W=F.left,H=F.right;return{isConverging:k,didContentsDiverge:w,showMoreDetail:D,failedFiles:T,failedFilesOptions:_,selectedFile:G,setSelectedFile:P,reviewingPrompt:X,onChoice:L,local:W,remote:H}}},60253:function(e,t,n){n.d(t,{F:function(){return ie}});var r,i,o,a=n(57135),l=n(72006),c=n(4405),s=n(2272),u=n(96583),d=n(92604),f=n(25404),h=n(34547),p=n(7131),m=n(57487),v=n(40193),g=n(28435);!function(e){e[e.NONE=0]="NONE",e[e.PUSH=1]="PUSH",e[e.CLONE=2]="CLONE",e[e.FETCH=3]="FETCH",e[e.GITHUB_CREATE=4]="GITHUB_CREATE",e[e.GITHUB_GET_INFO=5]="GITHUB_GET_INFO"}(r||(r={})),function(e){e.None="NONE",e.NoMergeBase="NO_MERGE_BASE",e.AuthFetchError="AUTH_FETCH_ERROR",e.IndexFilesCorrupted="INDEX_FILES_CORRUPTED"}(i||(i={})),function(e){e[e.UNTRACKED=0]="UNTRACKED",e[e.MODIFIED=1]="MODIFIED",e[e.MOVED=2]="MOVED",e[e.DELETED=3]="DELETED"}(o||(o={}));r.NONE,i.None;var y="git log -0 2>/dev/null && ".concat("git symbolic-ref HEAD --short"," || echo 'HEAD'");function Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}var b=function(e,t){return Z('[ ! -d ".git" ]',"git init","git checkout -b main",'git config user.name "'.concat(t.username||"Replit user",'"'),'git config user.email "<>"',"touch .git/branches/.keep","touch .git/info/.keep","touch .git/objects/.keep","touch .git/refs/.keep")},w=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null!==(t=e.remote)&&void 0!==t?t:"";return Z(n?"git fetch ".concat(r," --progress --deepen=10"):"git fetch ".concat(e.remote," +refs/heads/*:refs/remotes/origin/* --progress --depth=10"))},x=function(e){return["git","remote","get-url","origin"]},C=function(e,t){return t.includes("No such remote")||t.startsWith("fatal")?(0,c.Z)((0,l.Z)({},e),{remote:""}):(0,c.Z)((0,l.Z)({},e),{remote:t.trim()})},k=function(e,t){return e.remote?Z("git remote remove origin; git remote add origin ".concat(t)):Z("git remote add origin ".concat(t))},S=function(e){var t;return Z("git remote show ".concat(null!==(t=e.remote)&&void 0!==t?t:""," | grep 'HEAD branch'"))},E=function(e,t){var n=(0,s.Z)(t.split(":"),2),r=(n[0],n[1].trim());return(0,c.Z)((0,l.Z)({},e),{defaultBranch:r})},T=function(e){return Z("git checkout -f ".concat(e.defaultBranch))},R=function(e){return Z((t="git reset $(".concat(y,") --"),"if ! (( $(busybox ps -o comm | grep git) )) ; then rm -rf .git/index.lock; fi ; ".concat(t)));var t},D=n(10210),I=n(33859),_=n.n(I),B=n(50959),G=n(43119),P=n(71440),A=n(9125);function N(){var e=(0,G.Z)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return N=function(){return e},e}var U={},L=(0,P.Ps)(N());var O=function(e,t){return{op:"add",path:e,value:JSON.stringify(t)}},X=new Map([["hintsList","hints"]]);function M(e){return F.apply(this,arguments)}function F(){return F=(0,a.Z)((function(e){var t,n,r,i,o,c,d,f,h,p,m,v,g,y,Z;function b(){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((function(){var e,n,o;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return(e="object"===typeof r.env?r.env:null)&&0!==Object.keys(e).length?(n="object"===typeof i.env?i.env:null,o=n?(0,l.Z)({},e,n):e,[4,t.updateDotReplit([O("env",o)])]):[2];case 1:return a.sent(),[2]}}))}))).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)((function(){var e,o,a,l;return(0,u.__generator)(this,(function(c){switch(c.label){case 0:return(null===(e=i.nix)||void 0===e?void 0:e.channel)?[2]:(null===r||void 0===r||null===(o=r.nix)||void 0===o?void 0:o.channel)?[3,2]:[4,n.getLatestStableChannel()];case 1:return(l=c.sent()).channel?(a=l.channel,[3,3]):[2];case 2:a=r.nix.channel,c.label=3;case 3:return[4,t.updateDotReplit([O("nix/channel",a)])];case 4:return c.sent(),[2]}}))}))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return S=(0,a.Z)((function(e){var n,o,a,l,c;return(0,u.__generator)(this,(function(s){switch(s.label){case 0:return n=i[e],o=Boolean(n),Array.isArray(n)?o=n.length>0:n&&"object"===typeof n&&(o=Object.keys(n).length>0),l=null!==(a=X.get(e))&&void 0!==a?a:e,o||!r[l]?[2]:(c=O(l,r[l]),[4,t.updateDotReplit([c])]);case 1:return s.sent(),[2]}}))})),S.apply(this,arguments)}return(0,u.__generator)(this,(function(a){switch(a.label){case 0:t=e.dotReplit,n=e.nixService,r=e.templateConfig,i=e.config,o=[],c={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:x,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config"},d=[],f=!0,h=!1,p=void 0;try{for(m=Object.entries(c)[Symbol.iterator]();!(f=(v=m.next()).done);f=!0)g=(0,s.Z)(v.value,2),y=g[0],null!==(Z=g[1])&&("function"===typeof Z?d.push(Z()):d.push(k(y)))}catch(l){h=!0,p=l}finally{try{f||null==m.return||m.return()}finally{if(h)throw p}}return[4,Promise.all(d)];case 1:return a.sent(),[2,o]}}))})),F.apply(this,arguments)}function W(){var e=(0,g.Z)(),t=e.dotReplit,n=e.nixService,r=(0,h.Z)(),i=(0,s.Z)(function(e){var t=(0,l.Z)({},U,e);return A.t(L,t)}(),1)[0],o=(0,f.Z)(),c=o.showWarning,d=o.showError;return(0,B.useCallback)(function(){var e=(0,a.Z)((function(e){var o,a,l,s,f,h,m,v,g,y,Z;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,t.getConfig()];case 1:return(o=u.sent().config)?[4,i({variables:{replId:r}})]:[2];case 2:if(a=u.sent().data,!(null===(l="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null)||void 0===l?void 0:l.rootOriginReplUrl))return[2];try{s=_().parse(e.toString())}catch(b){return d("Failed to parse template .replit file"),p.kg.error("GitHub Import: Failed to parse template .replit file"),[2]}return s?[4,M({nixService:n,dotReplit:t,config:o,templateConfig:s})]:[2];case 3:f=u.sent(),h=!0,m=!1,v=void 0;try{for(g=f[Symbol.iterator]();!(h=(y=g.next()).done);h=!0)Z=y.value,c(Z,1e3)}catch(w){m=!0,v=w}finally{try{h||null==g.return||g.return()}finally{if(m)throw v}}return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[r,c,d,t,n,i])}var H=n(44094),V=n(26201),z=n(10702),j=n(75665),q=n(12583),$=n(4561),Y=n(50216);function K(){var e=(0,G.Z)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return K=function(){return e},e}function Q(){var e=(0,G.Z)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return Q=function(){return e},e}function J(){var e=(0,G.Z)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return J=function(){return e},e}var ee={},te=(0,P.Ps)(K());var ne=(0,P.Ps)(Q());J();var re=n(91620).lW;function ie(e){var t=e.insertConfigPlugin,n=e.setConfigScreenLockIsOpen,o=e.openFile,y=function(){return X.readFile(z.l)},Z=(0,h.Z)(),I=(0,s.Z)(function(e){var t=(0,l.Z)({},ee,e);return Y.D(ne,t)}(),2),_=I[0],G=I[1],P=(0,B.useState)(null),N=P[0],U=P[1],L=(0,g.Z)(),O=L.container,X=L.fs,M=L.runner,F=L.dotReplit,K=(0,v.Z)(O),Q=(0,f.Z)(),J=Q.showError,ie=Q.showConfirm,oe=W();(0,B.useEffect)((function(){G.error&&J("Failed to finish cloning Repl - "+G.error)}),[G.error,J]),(0,B.useEffect)((function(){N&&J("Failed to finish cloning Repl - "+N)}),[N,J]),(0,B.useEffect)((function(){G.data&&ie("Finished cloning Repl")}),[G.data,ie]),(0,B.useEffect)((function(){le()}),[]);var ae=(0,s.Z)(function(e){var t=(0,l.Z)({},ee,e);return A.t(te,t)}({variables:{replId:Z},fetchPolicy:"no-cache",onCompleted:function(){var e=(0,a.Z)((function(e){var t,r,i,o,a,l;return(0,u.__generator)(this,(function(c){switch(c.label){case 0:if(t=e.repl,r=e.currentUser,"Repl"!==t.__typename||!r||"CurrentUser"!==r.__typename)return[2];if(!t.config.gitRemoteUrl)return[2];if(!t.config.doClone)return[2];c.label=1;case 1:return c.trys.push([1,3,4,5]),n(!0),[4,xe({remote:null!==(o=t.config.gitRemoteUrl)&&void 0!==o?o:"",accessToken:null!==(a=null===(i=r.gitHubInfo)||void 0===i?void 0:i.accessToken)&&void 0!==a?a:null,username:r.username})];case 2:return c.sent(),[3,5];case 3:return l=c.sent(),p.kg.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(l)}),U(String(l)),[3,5];case 4:return n(!1),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()}),1),le=ae[0],ce={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:r.NONE,badState:i.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},se=function(){var e=(0,a.Z)((function(e){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return[4,K({args:b(ce,null!==e&&void 0!==e?e:"")})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=(0,a.Z)((function(e){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return[4,K({args:k(ce,e)})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=(0,a.Z)((function(){var e,t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,K({args:x(ce)})];case 1:return e=n.sent(),C?(t=C(ce,null===e.error?e.output:""),[2,t.remote]):[2]}}))}));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,a.Z)((function(e){var t,n,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return t=e.remote,n=e.remoteToken,[4,K({args:S((0,c.Z)((0,l.Z)({},ce),{remote:t,remoteToken:n}))})];case 1:return r=o.sent(),E?(i=E(ce,null===r.error?r.output:"HEAD branch: main"),[2,i.defaultBranch]):[2]}}))}));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=(0,a.Z)((function(e){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return[4,K({args:T((0,c.Z)((0,l.Z)({},ce),{defaultBranch:e}))})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=(0,a.Z)((function(e){var t,n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return t=e.remote,n=e.remoteToken,[4,me()];case 1:return r.sent(),[4,de()];case 2:return r.sent(),[4,ve({deepen:!0,remote:t,remoteToken:n})];case 3:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=(0,a.Z)((function(){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return[4,K({args:R(ce)})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,a.Z)((function(e){var t,n,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return t=e.deepen,n=void 0!==t&&t,r=e.remote,i=e.remoteToken,r.startsWith("https://api.glitch.com")?[4,K({args:["git","fetch",r,"+refs/heads/*:refs/remotes/origin/*"]})]:[3,2];case 1:case 3:return o.sent(),[2];case 2:return[4,K({args:w((0,c.Z)((0,l.Z)({},ce),{remote:r,remoteToken:i}),n)})]}}))}));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,a.Z)((function(){var e,t,n,r,i,o,a;return(0,u.__generator)(this,(function(l){switch(l.label){case 0:return[4,X.readDir(q.Ql)];case 1:return(r=l.sent()).error?[2]:[4,F.getConfig()];case 2:return i=l.sent(),(null===(e=i.config)||void 0===e||null===(t=e.gitHubImport)||void 0===t?void 0:t.requiredFiles)?(o=i.config.gitHubImport.requiredFiles,a=o.map((function(e){return new RegExp(e)})),[4,Promise.all(r.children.filter((function(e){return!a.some((function(t){return null!=e.filename.match(t)}))})).map((function(e){return e.type===$.Tv.Directory?X.deleteDir(e.filename):X.deleteFile(e.filename)})))]):[3,4];case 3:return l.sent(),[3,6];case 4:return(null===(n=i.config)||void 0===n?void 0:n.entrypoint)?[4,X.deleteFile(i.config.entrypoint)]:[3,6];case 5:l.sent(),l.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=(0,a.Z)((function(e,t,n){var r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,se(n)];case 1:return i.sent(),[4,ue(e)];case 2:return i.sent(),[4,de()];case 3:return i.sent(),[4,ve({deepen:!1,remote:e,remoteToken:t})];case 4:return i.sent(),[4,fe({remote:e,remoteToken:t})];case 5:return r=i.sent(),[4,he(null!==r&&void 0!==r?r:"")];case 6:return i.sent(),[4,pe({remote:e,remoteToken:t})];case 7:return i.sent(),"html"!==M.mode?[3,10]:[4,(0,H.r)(O,q.Ql)];case 8:return i.sent(),[4,M.run()];case 9:i.sent(),i.label=10;case 10:return[2]}}))}));return function(t,n,r){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,a.Z)((function(){var e,t,n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,X.readDir(q.Ql)];case 1:return(e=r.sent()).error||(t=e.children.map((function(e){return e.filename})),(n=(0,D.T)(t,"nix"))&&o({path:n})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,a.Z)((function(e,t){var n,r,i;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,V.J9)({repoNameWithOwner:e,accessToken:t})];case 1:return"error"in(n=o.sent())?[2,{hasDotReplit:!1,hasProcfile:!1}]:(r=n.some((function(e){return e.path===z.l})),i=n.some((function(e){return e.path===d.E})),[2,{hasDotReplit:r,hasProcfile:i}])}}))}));return function(t,n){return e.apply(this,arguments)}}(),we=function(){var e=(0,a.Z)((function(e,t){var n,r,i,o,a,l,c,s;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return[4,(0,V.LK)({repoNameWithOwner:e,filePath:d.E,accessToken:t})];case 1:return"error"in(n=u.sent())?[2,{showConfigPanel:!0}]:(r=re.from(n.content,"base64").toString(),(i=(0,d.c)(r))&&(a=null!==(o=i.web)&&void 0!==o?o:i.worker)?(l=a.command+" "+a.options.join(" "),[4,F.updateDotReplit([(0,j.KQ)(l),(0,j.xz)("interpreter")])]):[2,{showConfigPanel:!0}]);case 2:return c=u.sent(),s=i.web&&!i.worker||!i.web&&i.worker,c.error||!s?[2,{showConfigPanel:!0}]:[2,{showConfigPanel:!1}]}}))}));return function(t,n){return e.apply(this,arguments)}}(),xe=function(){var e=(0,a.Z)((function(e){var n,r,i,o,a,l,c,s,d,f,h,v;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return n=e.remote,r=e.accessToken,i=e.username,p.kg.info("GitHub Import: Starting client-side GitHub import flow"),[4,y()];case 1:return o=u.sent(),[4,ge()];case 2:return u.sent(),p.kg.info("GitHub Import: Removed template boilerplate"),[4,ye(n,r,i)];case 3:return u.sent(),p.kg.info("GitHub Import: Cloned repo into Repl"),"content"in o?[3,4]:(p.kg.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(o.error)}),[3,7]);case 4:return[4,y()];case 5:return"content"in(a=u.sent())&&a.content.toString()!==o.content.toString()&&p.kg.info("GitHub Import: Repo has .replit",{githubURL:n}),[4,oe(o.content)];case 6:u.sent(),u.label=7;case 7:return p.kg.info("GitHub Import: Patched dotreplit"),[4,_({variables:{input:{id:Z,doClone:!1}}})];case 8:return u.sent(),p.kg.info("GitHub Import: Disabled doClone on Repl. Done."),[4,Ze()];case 9:return u.sent(),l=(0,m.J)(n),c=!1,l?(s=l.username,d=l.repository,[4,be("".concat(s,"/").concat(d),r)]):[3,13];case 10:return f=u.sent(),h=f.hasDotReplit,!f.hasProcfile||h?[3,12]:[4,we("".concat(s,"/").concat(d),r)];case 11:return v=u.sent(),c=!v.showConfigPanel,[3,13];case 12:c=h,u.label=13;case 13:return"html"===M.mode||(c||t()),[2]}}))}));return function(t){return e.apply(this,arguments)}}()}},95038:function(e,t,n){n.d(t,{T:function(){return d}});var r=n(34547),i=n(72006),o=n(43119),a=n(71440),l=n(24635);function c(){var e=(0,o.Z)(["\n  query WorkspaceEduPaneEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isModelSolution\n        isProject\n        isProjectFork\n        owner {\n          __typename\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e,t=function(e){var t=(0,i.Z)({},s,e);return l.a(u,t)}({variables:{replId:(0,r.Z)()}}).data,n="Repl"===(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.__typename)?null===t||void 0===t?void 0:t.repl:null;if(!n)return!1;var o=n.owner;return!!o&&(n.isProjectFork&&!n.isModelSolution&&"Team"===o.__typename&&o.isAdmin)}},6558:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(50959),i=n(51971),o=n(28435),a=n(4561),l=n(44267);function c(){var e=(0,o.Z)().fs,t=(0,r.useState)(!1),n=t[0],c=t[1],s=(0,i.Z)(),u=(0,r.useState)(!1),d=u[0],f=u[1];return(0,r.useEffect)((function(){s===l.em.CONNECTED&&f(!0)}),[s]),(0,r.useEffect)((function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange((function(e,t){var n=t.hasUserChanged;c(e===a.kO.Syncing&&n)}))}),[e]),d?{isSaving:n,isOffline:s!==l.em.CONNECTED}:{isSaving:!1,isOffline:!1}}},12030:function(e,t,n){n.d(t,{O:function(){return c}});var r=n(57135),i=n(96583),o=n(63723),a=n(15935),l=n(28991);function c(){var e,t,n=(0,o.P5)({controlName:"flag-filetree-git-status",logFlagToAnalytics:!1}),c=(0,l.Z)(function(){var e=(0,r.Z)((function(e){var t,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n?[4,e.getRepositoryState()]:[2,{status:null,error:null}];case 1:return(t=i.sent()).error?[2,t]:t.type!==a.y5.NORMAL?[2,{status:null,error:null}]:[4,e.status()];case 2:return(r=i.sent()).error?[2,r]:[2,{status:r,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[n]);return c&&!c.error&&(null===(e=c.status)||void 0===e?void 0:e.changes)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}(null===(t=c.status)||void 0===t?void 0:t.changes):null}},13507:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(28435),i=n(44267),o=n(50959);function a(){var e=(0,r.Z)().container;(0,o.useEffect)((function(){var t=function(){e.getConnectionState()===i.em.CONNECTED&&e.focus()};return window.addEventListener("focus",t),function(){window.removeEventListener("focus",t)}}),[e])}},32519:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(74985),i=n(50959),o=n(28435),a=n(25404),l=n(79824),c=n(26473),s=n(53312),u=n(88965),d=(0,n(61025).X)({noticeContainer:[u.l0.rowWithGap(8),u.l0.align.center],noticeText:[u.l0.colWithGap(0)]}),f=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,8e3,8008,8080,8081,8888,9e3,1e4,25565,25577]);function h(){var e=(0,o.Z)().container,t=(0,a.Z)().showNotice;(0,i.useEffect)((function(){return e.onPortOpened((function(e){var n=e.port,i=e.address;if(!e.isForwarded&&f.has(n)){var o="Port ".concat(n," opened on host ").concat(i,".");t((0,r.BX)(c.G,{css:d.noticeContainer,children:[(0,r.tZ)(l.Z,{}),(0,r.BX)(c.G,{css:d.noticeText,children:[(0,r.tZ)(s.xv,{multiline:!1,children:o}),(0,r.tZ)(s.xv,{variant:"small",multiline:!1,children:"Use the host 0.0.0.0 to open the port to web traffic."})]})]}),1e4)}}))}),[t,e])}},42655:function(e,t,n){n.d(t,{V:function(){return l},Z:function(){return c}});var r=n(50959),i=n(28435),o=n(4561),a=n(12583),l=".tutorial";function c(){var e=(0,i.Z)().fs,t=(0,r.useState)({isLoading:!0,isTutorial:!1}),n=t[0],c=t[1];return(0,r.useEffect)((function(){e.watchDir(a.Ql,{onChange:function(e){c({isLoading:!1,isTutorial:e.some((function(e){return e.type===o.Tv.Directory&&e.filename===l}))})},onMoveOrDelete:function(){c({isLoading:!1,isTutorial:!1})},onError:function(){c({isLoading:!1,isTutorial:!1})}})}),[e]),n}},71279:function(e,t,n){n.d(t,{ZP:function(){return R},Ln:function(){return T}});var r=n(57135),i=n(96583),o=n(50959),a=n(90234),l=n(71999),c=n(28435),s=n(43182),u=n(34547),d=n(83111),f=n(44267),h=n(34860),p=n(18548),m=n(97746),v=n(72006),g=n(43119),y=n(71440),Z=n(23023),b=n(24635);function w(){var e=(0,g.Z)(["\n  query ReplEnvironmentDesktopLoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        language\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return w=function(){return e},e}var x={},C=(0,y.Ps)(w(),Z.D,Z.C);var k=n(54981),S=n(49500),E=(0,a.cn)(!1);function T(){return(0,l.Dv)(E)}function R(){var e,t,n=(0,u.Z)(),a=(0,c.Z)().fs,g=function(e){var t=(0,v.Z)({},x,e);return b.a(C,t)}({variables:{id:n}}).data,y=(0,l.b9)(E);o.useEffect((function(){return function(){y(!1)}}),[y]);var Z="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)?g.repl:null,w="CurrentUser"===(null===g||void 0===g||null===(e=g.currentUser)||void 0===e?void 0:e.__typename)?g.currentUser:null,T="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&g.repl.isModelSolutionFork,R=T?Z&&(null===(t=Z.origin)||void 0===t?void 0:t.origin):Z&&Z.origin||null,D=(0,h.b)("Repl"===(null===R||void 0===R?void 0:R.__typename)?{repl:R,currentUser:w||void 0}:null),I=(0,k.S)();o.useEffect((function(){Z&&w&&Z.isProject&&a.stat(".lesson").then((function(e){e.exists||a.createDir(".lesson")}))}),[a,w,Z]),o.useEffect((function(){if(Z&&(Z.isProjectFork||T)&&R&&D){var e=(0,f.ZP)({onUnrecoverableError:function(e){S.error(e),s.$e((function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",R.id),s.Tb(e)}))}}),t=(0,m.Z)({container:e});e.connect({context:D,getMinimumRetryDelayMs:I,fetchConnectionMetadata:function(){return(0,d.Z)({url:"/data/repls/".concat(Z.id,"/get_repl_origin_guest_connection_metadata")})}});var n=e.onConnectionStateChanged(function(){var o=(0,r.Z)((function(r){var o,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(r!==p.e.CONNECTED)return[3,8];n(),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,a.copyDirFromRemote(".lesson",".lesson",t)];case 2:return(o=i.sent()).error?(s.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",R.id),s.Tb(new Error("Error copying lesson: ".concat(o.error)))})),[3,5]):[3,3];case 3:return[4,a.stat(".lesson/instructions.md")];case 4:i.sent().exists&&y(!0),i.label=5;case 5:return[3,8];case 6:return l=i.sent(),s.$e((function(e){e.setTag("curriculum-authoring",!0),s.Tb(l)})),[3,8];case 7:return e.destroy(),[7];case 8:return[2]}}))}));return function(e){return o.apply(this,arguments)}}());return function(){return e.destroy()}}}),[a,D,Z,R,T,y])}},46589:function(e,t,n){n.d(t,{ZP:function(){return S}});var r=n(57135),i=n(2272),o=n(9970),a=n(96583),l=n(90234),c=n(71999),s=n(17403),u=n(7131),d=n(40193),f=n(28435),h=n(50959),p=n(51467),m=n(85919),v=n(52783),g=n(44167),y=20,Z=s.Type.Object({cpuUtilizationPercent:s.Type.Number(),memoryUsageRssBytes:s.Type.Number(),memoryUsageCacheBytes:s.Type.Number(),memorySoftLimitBytes:s.Type.Number(),memoryHardLimitBytes:s.Type.Number(),numVCpu:s.Type.Number(),user:s.Type.Object({cpuUtilizationPercent:s.Type.Number()}),system:s.Type.Object({cpuUtilizationPercent:s.Type.Number()})}),b="cat /repl/stats/resources.json",w="cat /repl/stats/subvolume_usage_bytes /repl/stats/subvolume_total_bytes /repl/stats/scratch_usage_bytes /repl/stats/scratch_total_bytes",x=1073741824;function C(e,t){var n=100*t;return e.filter((function(e){return e>=n})).length}function k(e){return C(e,g.nQ)>7?"danger":C(e,g.jP)>7?"warning":"ok"}function S(){var e=function(e,t){return[Math.min(t,100)].concat((0,o.Z)(e.slice(0,e.length-1)))},t=(0,m.Z)((function(){return(0,l.cn)({cpu:{numVCpu:0,utilPercent:0,recentUtilPercents:Array(y).fill(0),status:"ok",user:{utilPercent:0,recentUtilPercents:Array(y).fill(0)},system:{utilPercent:0,recentUtilPercents:Array(y).fill(0)}},memory:{softLimitBytes:0,hardLimitBytes:0,recentUtilPercents:Array(y).fill(0),status:"ok",rss:{usageBytes:0,recentUtilPercents:Array(y).fill(0)},cache:{usageBytes:0,recentUtilPercents:Array(y).fill(0)}},storage:{usedBytes:0,totalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0}})}),[]),n=(0,m.Z)((function(){return{cpu:{currentAtom:(0,l.cn)((function(e){return E(e(t).cpu.utilPercent)})),totalAtom:(0,l.cn)((function(){return 100})),cpuCountAtom:(0,l.cn)((function(e){return e(t).cpu.numVCpu})),recentUtilPercentsAtom:(0,l.cn)((function(e){return e(t).cpu.recentUtilPercents})),status:(0,l.cn)((function(e){return e(t).cpu.status})),user:{currentAtom:(0,l.cn)((function(e){return E(e(t).cpu.user.utilPercent)})),recentUtilPercentsAtom:(0,l.cn)((function(e){return e(t).cpu.user.recentUtilPercents}))},system:{currentAtom:(0,l.cn)((function(e){return E(e(t).cpu.system.utilPercent)})),recentUtilPercentsAtom:(0,l.cn)((function(e){return e(t).cpu.system.recentUtilPercents}))}},ram:{totalAtom:(0,l.cn)((function(e){return T(e(t).memory.softLimitBytes)})),recentUtilPercentsAtom:(0,l.cn)((function(e){return e(t).memory.recentUtilPercents})),status:(0,l.cn)((function(e){return e(t).memory.status})),rss:{currentAtom:(0,l.cn)((function(e){return E(T(e(t).memory.rss.usageBytes))})),recentUtilPercentsAtom:(0,l.cn)((function(e){return e(t).memory.rss.recentUtilPercents}))},cache:{currentAtom:(0,l.cn)((function(e){return E(T(e(t).memory.cache.usageBytes))})),recentUtilPercentsAtom:(0,l.cn)((function(e){return e(t).memory.cache.recentUtilPercents}))}},disk:{currentAtom:(0,l.cn)((function(e){return T(e(t).storage.usedBytes)})),totalAtom:(0,l.cn)((function(e){return T(e(t).storage.totalBytes)})),scratchCurrentAtom:(0,l.cn)((function(e){return T(e(t).storage.scratchUsedBytes)})),scratchTotalAtom:(0,l.cn)((function(e){return T(e(t).storage.scratchTotalBytes)}))}}}),[t]),s=(0,c.b9)(t),g=(0,i.Z)(h.useState(!0),2),C=g[0],S=g[1],R=(0,i.Z)(h.useState(!0),2),D=R[0],I=R[1];return function(e){var t=(0,f.Z)().container,n=(0,d.Z)(t),i=(0,p.Z)(e);h.useEffect((function(){var e=!1,t=null;function o(){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)((function(){var r,l,c,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return l=!1,[4,n({args:["bash","-c",b]})];case 1:return c=a.sent(),e?[2]:(null!==c.error&&(u.kg.error("Error running resource tracking command",{errorMessage:c.error}),l=!0),[4,n({args:["bash","-c",w]})]);case 2:return s=a.sent(),e||(null===s.error||(null===(r=s.output)||void 0===r?void 0:r.includes("No such file or directory"))||(u.kg.error("Error running storage command",{errorMessage:s.error}),l=!0),l||i.current({trackingResult:c,storageResult:s}),t=setTimeout(o,2e3)),[2]}}))}))).apply(this,arguments)}return o(),function(){e=!0,t&&clearTimeout(t)}}),[t,n,i])}((function(t){var n=t.trackingResult,r=t.storageResult;s((function(t){var i,o;try{var a=JSON.parse(n.output||"{}");if(!v.B4.Check(Z,a))throw new Error("Got wrong shape for resource response");var l=e(t.cpu.recentUtilPercents,a.cpuUtilizationPercent),c=(a.memoryUsageRssBytes+a.memoryUsageCacheBytes)/a.memorySoftLimitBytes*100,s=e(t.memory.recentUtilPercents,c),d=a.memoryUsageRssBytes/a.memorySoftLimitBytes*100,f=a.memoryUsageCacheBytes/a.memorySoftLimitBytes*100;i={cpu:{numVCpu:Math.min(a.numVCpu,100),utilPercent:a.cpuUtilizationPercent,recentUtilPercents:l,status:k(l),user:{utilPercent:a.user.cpuUtilizationPercent,recentUtilPercents:e(t.cpu.user.recentUtilPercents,a.user.cpuUtilizationPercent)},system:{utilPercent:a.system.cpuUtilizationPercent,recentUtilPercents:e(t.cpu.system.recentUtilPercents,a.system.cpuUtilizationPercent)}},memory:{softLimitBytes:a.memorySoftLimitBytes,hardLimitBytes:a.memoryHardLimitBytes,recentUtilPercents:s,status:k(s),rss:{usageBytes:a.memoryUsageRssBytes,recentUtilPercents:e(t.memory.rss.recentUtilPercents,d)},cache:{usageBytes:a.memoryUsageCacheBytes,recentUtilPercents:e(t.memory.cache.recentUtilPercents,f)}},storage:{usedBytes:0,totalBytes:x,scratchUsedBytes:0,scratchTotalBytes:x}}}catch(h){return u.kg.error("Could not calculate resources",{errorMessage:h.message}),t}if(!i)throw new Error("Expected resources");try{o=function(e){if(4!==e.length)throw new Error("Received unexpected output from storage command: ".concat(e));var t=parseInt(e[0],10),n=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10);if(isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))throw new Error("Could not parse values from storage output command: ".concat(e));return{storageUsedBytes:t,storageTotalBytes:n,scratchUsedBytes:r,scratchTotalBytes:i}}((r.output||"").trim().split("\n"))}catch(p){return u.kg.error("Could not calculate resources",{errorMessage:p.message}),t}return i.storage.usedBytes=o.storageUsedBytes,i.storage.totalBytes=o.storageTotalBytes,i.storage.scratchUsedBytes=o.scratchUsedBytes,i.storage.scratchTotalBytes=o.scratchTotalBytes,D||S(!1),I(!1),i}))})),{dataAtom:n,loading:C}}function E(e){return Math.round(100*(e+Number.EPSILON))/100}function T(e){return e/1024/1024}},81920:function(e,t,n){n.d(t,{T:function(){return Z}});var r=n(50959),i=n(66860),o=n(34547),a=n(72006),l=n(43119),c=n(71440),s=n(24635);function u(){var e=(0,l.Z)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function h(e){var t=(0,a.Z)({},d,e);return s.a(f,t)}var p=n(59253),m=n(73175),v=n(20575),g=n(28435),y=n(86813),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,o.Z)(),n=(0,m.Z)(),a=(0,g.Z)().dotReplit,l=h({variables:{replId:t}}),c=l.data,s=l.loading,u="Repl"===(null===c||void 0===c?void 0:c.repl.__typename)&&(c.repl.isProjectFork||c.repl.isModelSolution||c.repl.isModelSolutionFork),d=(0,i.P)(a),f=(0,y.t9)();return r.useCallback((function(t){return!!((u||s)&&(0,p.TI)(t)||(0,p.MF)(t))||!f&&(e&&(0,p.uC)(t)||(0,v.C)(t)||(0,p.yb)(t,n)||(0,p.lv)(t,d))}),[u,s,n,f,d,e])}},21164:function(e,t,n){n.d(t,{k:function(){return d}});var r=n(90171),i=n(72006),o=n(43119),a=n(71440),l=n(24635);function c(){var e=(0,o.Z)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e,t=function(e){var t=(0,i.Z)({},s,e);return l.a(u,t)}().data,n=(0,r.useRouter)();return(null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.isAdmin)||Boolean(n.query.debug)}},256:function(e,t,n){n.d(t,{B:function(){return B}});var r=n(2272),i=n(24531),o=n(42655),a=n(61439),l=n(35692),c=n(95038),s=n(85919),u=n(34547),d=n(72006),f=n(43119),h=n(71440),p=n(24635);function m(){var e=(0,f.Z)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    isProjectFork\n    isModelSolution\n    isProject\n    isProjectFork\n    workspaceCta\n    owner {\n      __typename\n      ... on Team {\n        id\n        isAdmin\n        isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n      }\n      ... on User {\n        id\n      }\n    }\n    currentUserPermissions {\n      containerWrite\n      editMultiplayers\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    lang {\n      id\n      key\n      engine\n      supportsGit\n      hasLibSearch\n      supportsPackager3\n      hasDAP\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return m=function(){return e},e}function v(){var e=(0,f.Z)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isPrivacyLimitedAccess: hasRole(role: PRIVACY_LIMITED_ACCESS)\n      userSubscriptionType\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var g={},y=(0,h.Ps)(m()),Z=(0,h.Ps)(v(),y);var b=n(90171),w=n(63723),x=n(71279),C=n(46130),k=n(70505),S=n(51631),E=n(86370),T=n(32248),R=n(57326);function D(){var e,t=function(e){var t=(0,d.Z)({},g,e);return p.a(Z,t)}({variables:{replId:(0,u.Z)()}}).data,n="Repl"===(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.__typename)?null===t||void 0===t?void 0:t.repl:null;return n?{repl:n,currentUser:(null===t||void 0===t?void 0:t.currentUser)||null}:{repl:null,currentUser:null}}var I=["shell","git","diff","packager","envEditor","deployments","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","adminPanel","sshConfigurator","webview","problems","systemDependencies"],_=["ghostwriterChat","deployments"];function B(){var e,t=D(),n=t.repl,u=t.currentUser,d=(0,b.useRouter)(),f=(0,C.T3)(),h=(0,C.rv)(),p=(0,w.P5)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),m=(0,w.P5)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),v=(0,w.P5)({controlName:"flag-deployments",logFlagToAnalytics:!1}),g=Boolean(v&&(null===n||void 0===n?void 0:n.hostingDeploymentPermissions.canDeploy)),y=(0,w.P5)({controlName:"flag-repl-auth-sidebar",logFlagToAnalytics:!1}),Z=(0,w.P5)({controlName:"flag-nix-modules-tool",logFlagToAnalytics:!1}),B=(0,w.P5)({controlName:"flag-problems-pane",logFlagToAnalytics:!1}),G=(0,w.P5)({controlName:"flag-mb-ai4all",logFlagToAnalytics:!1}),P=(0,R.cR)(),A=(0,l.Z)().language,N=(0,c.T)(),U=(0,x.Ln)(),L=(0,o.Z)().isTutorial,O=(0,a.I)().length>0,X=(0,k.T)(),M=(0,E.WG)(),F=(null===X||void 0===X?void 0:X.debuggers)&&(null===X||void 0===X?void 0:X.debuggers.length)>0||!1,W=(0,T.jX)(null===u||void 0===u?void 0:u.userSubscriptionType),H="Team"===(null===n||void 0===n||null===(e=n.owner)||void 0===e?void 0:e.__typename)&&(null===n||void 0===n?void 0:n.owner.isTeamsPro),V=(null===u||void 0===u?void 0:u.isAdmin)||Boolean(d.query.debug),z=(0,i.Se)();return(0,s.Z)((function(){var e,t=f&&(null===n||void 0===n?void 0:n.currentUserPermissions.editMultiplayers),i="UserPowerUpsTypes"===(null===u||void 0===u||null===(e=u.userPowerUpsByType)||void 0===e?void 0:e.__typename)&&(null===u||void 0===u?void 0:u.userPowerUpsByType.ghostwriter)&&(null===u||void 0===u?void 0:u.userPowerUpsByType.ghostwriter.active),o=!h||(i||G),a=t?[{type:"multiplayer"}]:[];if(!n||!u)return a;var l=Boolean(n.config.isServer),c=Boolean(n.config.isVnc),s=n.lang.supportsGit,d=n.lang.key.startsWith("html"),v="nix"===n.lang.key,b=!d,w=n.isProject||n.isProjectFork,x=!d,C=W||H,k=Boolean(y&&O),E=[[{type:"shell"},!0],[{type:"instructions"},U],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},l||d],[{type:"vnc"},c],[{type:"runnerOutput"},!d],[{type:"git"},s],[{type:"packager"},O],[{type:"systemDependencies"},!0],[{type:"envEditor"},b],[{type:"debugger"},F],[{type:"tutorial"},L],[{type:"database"},x],[{type:"neon"},m||v&&p],[{type:"replAuth"},k],[{type:"autograder"},w],[{type:"unitTests"},!w&&null!==A],[{type:"education"},Boolean(N)],[{type:"preferences"},!0],[{type:"adminPanel"},V],[{type:"deployments"},g],[{type:"sshConfigurator"},C],[{type:"ghostwriterChat"},o],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"modules"},Z],[{type:"extensionDevtools"},P],[{type:"problems"},B]];if(f){var T=n.workspaceCta===S.Sy.Submit||n.workspaceCta===S.Sy.Resubmit;E.push([{type:"submitEduRepl"},T])}var R=!0,D=!1,X=void 0;try{for(var j,q=M[Symbol.iterator]();!(R=(j=q.next()).done);R=!0){var $=j.value;E.push([{type:"extension",data:{extensionId:$.extension.extensionId,installationId:$.extension.installationId,name:$.name||$.extension.manifest.name,icon:$.icon||$.extension.manifest.icon,baseUrl:$.extension.baseUrl,path:$.handler}},!0])}}catch(re){D=!0,X=re}finally{try{R||null==q.return||q.return()}finally{if(D)throw X}}var Y=!0,K=!1,Q=void 0;try{for(var J,ee=E[Symbol.iterator]();!(Y=(J=ee.next()).done);Y=!0){var te=(0,r.Z)(J.value,2),ne=te[0];te[1]&&(f&&!I.includes(ne.type)||a.push(ne))}}catch(re){K=!0,Q=re}finally{try{Y||null==ee.return||ee.return()}finally{if(K)throw Q}}return a.map((function(e){return{title:z.getTitle(e),pane:e}})).sort((function(e,t){return _.includes(e.pane.type)?-1:_.includes(t.pane.type)?1:e.title.localeCompare(t.title)})).map((function(e){return e.pane}))}),[f,n,u,W,H,y,O,A,m,p,U,F,L,N,V,g,Z,P,B,M,z,G,h])}},19291:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(7131),i=n(50959);function o(){(0,i.useEffect)((function(){var e=null;return function t(){if(window.performance.memory){var n=window.performance.memory,i={jsHeapSizeLimit:n.jsHeapSizeLimit,totalJSHeapSize:n.totalJSHeapSize,usedJSHeapSize:n.usedJSHeapSize,timeElapsed:window.performance.now()};r.kg.info("perf:browser_memory",i);var o=5*-Math.log(Math.random())*60*1e3;e=setTimeout(t,o)}}(),function(){e&&clearTimeout(e)}}),[])}},76190:function(e,t,n){n.d(t,{L:function(){return c}});var r=n(72006),i=n(34547),o=n(50959),a=n(97069),l=n(76709);function c(){var e=(0,i.Z)(),t=(0,l.Z)("fileTree").trackTimeToLoadFileStart;return o.useCallback((function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(n);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,a.Z)((0,r.Z)({replId:e},o))}),[e,t])}},43932:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(50959),i=n(28435),o=n(9434),a=n(34547),l=n(39995),c=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function s(){var e=(0,i.Z)().container,t=(0,l.Z)().preferences.webviewAutoOpenOnPortOpened,n=(0,a.Z)();(0,r.useEffect)((function(){return e.onPortOpened((function(e){var r=e.port,i=e.address,a=e.isForwarded,l=e.isVnc,s=e.externalPort,u=l?"vnc":"webview";a?(0,o.j)(o.U3.WS_PORT_OPENED,{type:u,replId:n,port:r,externalPort:s,address:i,webviewAutoOpenOnPortOpened:t}):(0,o.j)(o.U3.WS_UNFORWARDED_PORT_OPENED,{port:r,isCommon:c.has(r),address:i,type:l?"vnc":"webview",replId:n,externalPort:s})}))}),[e,n,t])}},20608:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(7131),i=n(34547),o=n(50959),a=n(28435),l=n(47726),c=n(68241),s=n(88688),u=n(31146),d=n(63723);var f=new Set;function h(e){var t=e.workspaceType,n=(0,i.Z)(),h=(0,a.Z)(),p=h.dotReplit,m=h.container,v=(0,d.P5)({controlName:"flag-channel-request-priority",logFlagToAnalytics:!1});(0,o.useEffect)((function(){if(!f.has(n)){f.add(n);var e=p.watch((function(n){if(!n.error||n.error!==s.Yt.Disconnected){try{var i=m.getConnectionMetadata();if(!i||!i.token)throw new Error("Expected token in measure call.");!function(e){var t=e.workspaceType,n=e.parsedToken,i=e.flagChannelRequestPriority,o=Boolean(window.performance.getEntriesByName(c.Iy.pageNavStart,"mark").length),a={ssr:!o,workspaceType:t,tokenCluster:n.cluster,flagChannelRequestPriority:i},s="time to code";window.performance.measure(s,o?c.Iy.pageNavStart:void 0);var u=window.performance.getEntriesByName(s,"measure")[0];if(u){var d="page invisible fetch connection metadata",f=u.duration;Boolean(window.performance.getEntriesByName(c.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length)&&(window.performance.measure(d,c.Iy.fetchConnectionMetadataPageInvisibleStart,c.Iy.fetchConnectionMetadataPageInvisibleEnd),f-=window.performance.getEntriesByName(d,"measure")[0].duration,window.performance.clearMeasures(d),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleEnd)),r.kg.time("time to code minus page invisible",f,a),r.kg.time("time to code with page invisible",u.duration,a),window.performance.clearMeasures(s),l.v.addTiming("time_to_code_minus_page_invisible",f),l.v.addTiming("time_to_code_with_page_invisible",u.duration)}else r.kg.info("Could not obtain measure for time to code",a)}({workspaceType:t,parsedToken:(0,u.he)(i.token),flagChannelRequestPriority:v})}catch(o){r.kg.info("Could not measure time to code",{workspaceType:t,e:o,dotReplitResult:n.error?n.error:"success"})}e()}}));return e}}),[n,t,p,m,v])}},76709:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(87978),i=n(7131),o=n(12562),a=new Map,l=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,r=t.source,l=window.performance.now(),c=(0,o.V)(e);i.kg.time("time to load file",l-n,{from:r,fileViewerType:c}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(t){return function(e,t){if((0,r.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}}(t,e)},trackTimeToLoadFileEnd:l}}},61377:function(e,t,n){n.d(t,{Ih:function(){return v},bM:function(){return g}});var r=n(57389),i=n(72006),o=n(4405),a=n(74985),l=(n(50959),n(28863)),c=n(61025),s=n(88965),u=n(26473),d=n(68625),f=(0,n(86093).$)(["fontSize","gap"]),h=f.cssVars,p=f.styleTokens,m=(0,c.X)({chord:[s.l0.display.inlineFlex,s.l0.rowWithGap(12)],shortcut:[s.l0.justify.end,s.l0.display.inlineFlex,s.l0.flex.row,{fontSize:p.fontSize,"& > div":{minWidth:s.TV.space16,marginRight:p.gap},"& > div:last-child":{marginRight:0}}]});function v(e){return((0,l.bU)(e)?e:[e]).map((function(e){var t;return(0,l.QR)(e).map((function(e){return null!==(t=Z[e])&&void 0!==t?t:e.toUpperCase()})).join(" ")})).join(" ")}function g(e){if((0,l.bU)(e.keyCombo))return(0,a.tZ)(u.G,{"data-testid":"Keybinding:".concat(e.keyCombo.join(" ")),css:m.chord,children:e.keyCombo.map((function(t,n){return(0,a.tZ)(g,(0,o.Z)((0,i.Z)({},e),{keyCombo:t}),n)}))});var t,n=(0,l.QR)(e.keyCombo);return(0,a.tZ)(u.G,{"data-testid":"Keybinding:".concat(e.keyCombo),css:m.shortcut,style:(t={},(0,r.Z)(t,h.fontSize,e.small?s.TV.fontSizeSmall:s.TV.fontSizeDefault),(0,r.Z)(t,h.gap,e.hideBorder?"2px":"4px"),t),title:e.keyCombo,children:n.map((function(t){var n;return(0,a.tZ)(b,{text:t,hideBorder:e.hideBorder,small:e.small,isActive:null===e||void 0===e||null===(n=e.match)||void 0===n?void 0:n.includes(t.toLowerCase())},t)}))})}var y=(0,c.X)({root:[s.l0.color.foregroundDimmest,s.l0.position.relative,s.l0.px(4),s.l0.py(2),{fontSize:"inherit",width:"max-content",textAlign:"center",textTransform:"capitalize"}],border:[s.l0.coverContainer,s.l0.borderRadius(4),{opacity:.5,minWidth:s.TV.space16,border:"1px solid",borderColor:s.TV.outlineStrongest}]}),Z={Ctrl:d.V5?"\u2303":"Ctrl",Cmd:d.V5?"\u2318":"Cmd",Alt:d.V5?"\u2325":"Alt",Shift:d.V5?"\u21e7":"Shift",Enter:d.V5?"Return":"Enter",ArrowLeft:"\u2190",ArrowRight:"\u2192",ArrowUp:"\u2191",ArrowDown:"\u2193"," ":"Space"};function b(e){var t,n=e.text,r=e.isActive,i=void 0!==r&&r,o=e.hideBorder,l=void 0!==o&&o,c={fontWeight:s.TV.fontWeightMedium,color:s.TV.foregroundDefault},d={borderColor:s.TV.foregroundDefault,opacity:1};return(0,a.BX)(u.G,{css:y.root,style:i?c:void 0,children:[null!==(t=Z[n])&&void 0!==t?t:n,l?null:(0,a.tZ)(u.G,{css:y.border,style:i?d:void 0})]})}},58125:function(e,t,n){n.d(t,{GO:function(){return c},Ih:function(){return l.Ih},Il:function(){return o.Il},bM:function(){return l.bM},gf:function(){return o.gf}});var r=n(74985),i=n(50959),o=n(72123),a=n(28863),l=n(61377);function c(e){var t=(0,o.ns)(e);return(0,r.BX)(o.Ge.Provider,{value:t,children:[e.children,(0,r.tZ)(s,{})]})}function s(){var e=(0,o.Sy)(),t=(0,i.useRef)(null);return(0,i.useEffect)((function(){var n=function(n){var r=(0,a.IX)(n);if(r){var i=r;t.current&&(i=(0,a.cZ)(t.current,r));var l=e(i);switch(l.kind){case o.Xp.NoMatch:t.current=null;break;case o.Xp.WaitingForChord:t.current=l.key,n.preventDefault();break;case o.Xp.MatchFound:t.current=null;var c=!0,s=!1,u=void 0;try{for(var d,f=l.matches[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value,p=h.run,m=h.bubble;if(!1!==p()&&(n.preventDefault(),!m))break}}catch(v){s=!0,u=v}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[e]),null}},84343:function(e,t,n){n.d(t,{_:function(){return Z},O:function(){return g}});var r=n(57135),i=n(2272),o=n(96583),a=n(28863),l=n(72006),c=n(43119),s=n(71440),u=n(50216);function d(){var e=(0,c.Z)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return d=function(){return e},e}var f={},h=(0,s.Ps)(d());var p=n(85919),m=n(98896),v=n(6325);function g(){var e=(0,v.O)(),t=(0,i.Z)(function(e){var t=(0,l.Z)({},f,e);return u.D(h,t)}(),1)[0];return(0,p.Z)((function(){return function(){var n=(0,r.Z)((function(n){var r,a,l,c,s,u,d,f,h;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=[],a=!0,l=!1,c=void 0;try{for(s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)d=(0,i.Z)(u.value,2),f=d[0],h=d[1],r.push({commandId:f,keyCombo:h})}catch(p){l=!0,c=p}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return[4,t({variables:{input:{environment:e,platform:(0,m.X)(),keybindings:r}}})];case 1:return o.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}()}),[e,t])}function y(e){if(e&&"object"===typeof e&&"commandId"in e&&"string"===typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var t=(0,a.uv)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}if("string"===typeof e.keyCombo){var n=(0,a.gD)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}return{commandId:e.commandId,keyCombo:null}}}function Z(e){var t=new Map;if(!Array.isArray(e))return t;var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=y(o.value);l&&t.set(l.commandId,l.keyCombo)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}},98896:function(e,t,n){n.d(t,{X:function(){return o}});var r=n(68625),i=n(11086);function o(){return r.V5||r.gn?i.K5.Mac:r.ED?i.K5.Windows:i.K5.Linux}},97492:function(e,t,n){n.d(t,{R:function(){return u}});var r=n(57135),i=n(96583),o=n(20854),a=n(43119),l=n(71440);function c(){var e=(0,a.Z)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s=(0,l.Ps)(c());function u(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((function(e){var t,n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,null===o.l||void 0===o.l?void 0:o.l.query({query:s,variables:{replId:e}})];case 1:return n=i.sent(),r="Repl"===(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.repl.__typename)?n.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}}))}))).apply(this,arguments)}},52745:function(e,t,n){n.d(t,{mn:function(){return u}});var r=n(2272),i=n(9970),o=n(4561),a=n(87978),l=["json","md","draw","txt"],c=[".gitignore",".replit"];function s(e,t){var n=new Map,o=!0,l=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value,f=(0,a.r6)(d);if(f&&(!t||f.startsWith(t))){var h,p=null!==(h=n.get(f))&&void 0!==h?h:0;n.set(f,p+1)}}}catch(m){l=!0,c=m}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}return(0,i.Z)(n.entries()).sort((function(e,t){var n=(0,r.Z)(e,2)[1];return(0,r.Z)(t,2)[1]-n})).map((function(e){return(0,r.Z)(e,1)[0]}))}function u(e,t){if(e.fileType===o.Tv.Directory||!e.input)return[];if("."===e.input)return c.map((function(e){return{value:e,highlight:[{from:1,to:e.length}]}}));if(e.input.startsWith("."))return c.filter((function(t){return t.startsWith(e.input)})).map((function(t){return{value:t,highlight:[{from:t.length-e.input.length,to:t.length}]}}));var n,r=(0,a.r6)(e.input),u=s(e.siblings.map((function(e){return e.filename})),r);u.length<3&&(n=u).push.apply(n,(0,i.Z)(s(t(),r)));if(u.length<3){var d,f=r?l.filter((function(e){return e.startsWith(r)})):l;(d=u).push.apply(d,(0,i.Z)(f))}return(0,i.Z)(new Set(u)).slice(0,3).map((function(t){var n="."+t,i=e.input;i.endsWith(".")?i=i.slice(0,-1):r&&(i=i.slice(0,-(r.length+1)));var o=i+n;return{value:o,highlight:[{from:e.input.length,to:o.length}]}}))}},79124:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(4561),i=function(e){if(1===e.length)return e[0].type===r.Tv.File?"file":"folder";if(e.length>1){var t=e.filter((function(e){return e.type===r.Tv.File})).length,n=e.filter((function(e){return e.type===r.Tv.Directory})).length,i=t>1?"files":"file",o=n>1?"folders":"folder",a="file";return t>0&&n>0?a="".concat(i," and ").concat(o):t>0?a="".concat(i):n>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var t=i(e),n=1===e.length?t:"".concat(e.length," ").concat(t),r=e.slice(0,5).map((function(e){return e.path})).join(", ");return{name:n,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:n}}},10310:function(e,t,n){function r(e){return e.startsWith("/")?e:null}function i(e){var t=r(e);if(null===t)throw new Error("Expected an absolute path but got ".concat(e));return t}function o(e){return e.startsWith("/home/runner/")?e.split("/").slice(4).join("/"):null}n.d(t,{IT:function(){return r},ZF:function(){return i},om:function(){return o}})},44094:function(e,t,n){function r(e,t){return new Promise((function(n){var r=e.openChannel({service:"gcsfiles"},(function(e){return e.channel.request({persistMirror:{path:t}}).then((function(e){e.ok,r(),n()})),function(e){e.willReconnect&&r()}}))}))}n.d(t,{r:function(){return r}})},11457:function(e,t,n){n.d(t,{e:function(){return T},Z:function(){return E}});var r=n(72006),i=n(2272),o=n(85234),a=n.n(o),l=n(87720),c=n(12315),s=n(77637),u=n(43182),d="exit status 1";function f(e){var t=e.execer,n=e.onComplete,r=e.onError,i=e.onParse,o=(0,s.Z)(e,["execer","onComplete","onError","onParse"]);if(0!==o.query.length){var a=new TextEncoder,f=(0,c.Tq)(),h=0,p=0,m=function(){},v=function(e){r(e),n("error")},g=t.onOutput((function(e){var t=a.encode(e).length;p+=t;var n=f(e);if(n){var r=n.error,o=n.filesMap,l=n.filesMapChanges;r&&v(r),h=o.size,l.forEach((function(e){var t=o.get(e);t&&o.set(e,(0,c.Vd)(t))})),i(o,l)}})),y=t.onStderr((function(e){if(e.trim()===d)return v(l.f.EMPTY_RESULTS);v(l.f.INVALID_COMMAND)}));m=function(){g(),y()};var Z=(0,c.PR)(o);t.request({args:Z}).then((function(e){if(e.error)return e.error.trim()===d?v(l.f.EMPTY_RESULTS):v(l.f.INVALID_COMMAND);var t;t="finished",0!==h||"finished"!==t?("finished"===t?n(t,{bytes:p}):n(t),m()):v(l.f.EMPTY_RESULTS)})).catch((function(e){return u.Tb(new Error("Ripgrep search command failed with error: ".concat(e))),v(l.f.INVALID_COMMAND)}))}else n("abort")}var h=n(86763),p=n.n(h),m=n(57135),v=n(9970),g=n(96583),y=n(32524),Z="signal: broken pipe",b="Channel closed";function w(){return(w=(0,m.Z)((function(e){var t,n,r,i,o,a,f;return(0,g.__generator)(this,(function(h){switch(h.label){case 0:return n=e.container,0===(r=(0,s.Z)(e,["container"])).query.trim().length?[2,x(l.f.EMPTY_QUERY)]:n.getConnectionState()===y.em.DISCONNECTED?[2,x(l.f.CONTAINER_DISCONNECTED)]:n.getConnectionState()===y.em.CONNECTING?[2,x(l.f.CONTAINER_CONNECTING)]:[4,(t=n).exec.apply(t,(0,v.Z)((0,c.PR)(r)))];case 1:if(i=h.sent(),o=i.output,a=i.error)switch(a){case d:return[2,x(l.f.EMPTY_RESULTS)];case Z:return[2,x(l.f.PARTIAL_RESULTS)];case b:return[2,x(l.f.CHANNEL_CLOSED)];default:return u.Tb(new Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}return(null===o||void 0===o?void 0:o.trim())&&((f=(0,c.Tq)()(o))&&0!==f.filesMap.size)?[2,x(f.error,f.filesMap)]:[2,x(l.f.EMPTY_RESULTS)]}}))}))).apply(this,arguments)}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:t}}var C=n(46335),k=n(7131),S="File Search Used";function E(e){var t=e.container,n=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,s=e.isStreaming,u=e.trackLatency,d=void 0!==u&&u,h=(0,C.Z)({container:t}),m=[],v=a()(),g=Date.now(),y=function(e){i(m=e)};return p()((function(e){var t=a()();v=t,g=Date.now(),n(null),o(!0);var i=!0;if(""===e.query)return y([]),void o(!1);f((0,r.Z)({execer:h,onComplete:function(r,i){if(v===t){o(!1);var a,s,u,f,h="finished"===r&&i&&i.bytes===c.Ak;if(h&&n(l.f.PARTIAL_RESULTS),d)k.kg.time("".concat(S," - complete"),Date.now()-g,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(u=null===e||void 0===e||null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==u?u:0)>0,hasExcludes:(null!==(f=null===e||void 0===e||null===(s=e.excludeGlobs)||void 0===s?void 0:s.length)&&void 0!==f?f:0)>0,latency:Date.now()-g,isPartialResults:h})}},onError:function(e){v===t&&n(e)},onParse:function(n,r){if(v===t){if(i){var a,l,u,f;if(d)k.kg.time("".concat(S," - first_chunk"),Date.now()-g,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(u=null===e||void 0===e||null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==u?u:0)>0,hasExcludes:(null!==(f=null===e||void 0===e||null===(l=e.excludeGlobs)||void 0===l?void 0:l.length)&&void 0!==f?f:0)>0});y((0,c.Md)([],n,r)),i=!1}else y((0,c.Md)(m,n,r));s&&o(!1)}},mode:"json",context:0},e))}),200)}function T(e){var t=e.container,n=p()((function(e,n,o){(function(e){return w.apply(this,arguments)})((0,r.Z)({container:t,mode:"json",context:1,isCaseSensitive:!1},e)).then((function(e){var t=e.data?function(e){var t={},n=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i.Z)(a.value,2),s=c[0],u=c[1];t[s]=u.lines.map((function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map((function(e){return{column:e.start,length:e.length}}))}})).filter((function(e){return e.matches.length>0}))}}catch(d){r=!0,o=d}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e.data):{},r=e.error===l.f.PARTIAL_RESULTS;return r?n({error:null,results:t,isPartialResult:r}):e.error?n({error:e.error,results:null,isPartialResult:r}):n({error:null,results:t,isPartialResult:r})})).catch(o)}),200);return function(e){return new Promise((function(t,r){return n(e,t,r)}))}}},72901:function(e,t,n){n.d(t,{Eu:function(){return s},m6:function(){return i}});var r=n(9970);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(e){return e.forEach((function(e){return e&&n.push("-g",e)}))},i=[],c=[],s=!0,u=!1,d=void 0;try{for(var f,h=e[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,m=l(p);m.startsWith("**")?i.push(m):c.push(m)}}catch(v){u=!0,d=v}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return c.length>0&&(r(["!*"]),new Set(c).forEach((function(e){r(a(e).map(o))}))),r(i),r(t.map((function(e){return"!".concat(o(l(e)))}))),n}function o(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function a(e){var t=function(e){var t;Array.isArray(i[e])||(i[e]=[]);var o=n[e],a=o.startsWith("{")&&o.endsWith("}")?s(o.substring(1,o.length-1),","):[o];(t=i[e]).push.apply(t,(0,r.Z)(a.map((function(t){var n=i[e-1];return n&&n.length>0?n.map((function(e){return"".concat(e,"/").concat(t)})):t})).flat(2)))},n=s(e,"/").filter((function(e){return e.length>0}));"**"!==n[n.length-1]&&n.push("**");for(var i={},o=0;o<n.length;o++)t(o);return Object.values(i).flat(2)}function l(e){return e.replaceAll(/\*/g,(function(e,t,n){return t>0&&("*"===n[t-1]||"\\"===n[t-1])||t<n.length-1&&"*"===n[t+1]?e:"**"}))}var c=function(){var e={},t={},n=function(n,r){e[n]=r,t[r]=n};return n("{","}"),n("(",")"),n("[","]"),{hasKey:function(t){return t in e},getKey:function(t){return e[t]},hasValue:function(e){return e in t},getValue:function(e){return t[e]}}}();function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var n=[],r=[],i="",o=!0,a=!1,l=void 0;try{for(var s,u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value;if(d===t){if(0===r.length){n.push(i),i="";continue}}else if(c.hasKey(d))r.push(d);else if(c.hasValue(d)&&r.pop()!==c.getValue(d))return[e];i+=d}}catch(f){a=!0,l=f}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return 0!==r.length?[e]:(i.length>0&&n.push(i),n)}},12315:function(e,t,n){n.d(t,{Ak:function(){return d},Tq:function(){return f},PR:function(){return y},Vd:function(){return v},Md:function(){return g}});var r=n(72006),i=n(4405),o=n(9970);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")})).join(" ")}var l=n(72901),c=n(87720),s=n(7131),u=n(91620).lW,d=524288;function f(){var e="",t=new Map;return function(n){var r=new Set,i=!1;if(n.trim().startsWith("error"))return{error:c.f.INVALID_COMMAND,filesMap:t,filesMapChanges:r};var o=n.indexOf("\n"),a=0,l=e+n;if(o>=0){for(o+=e.length;o>=0;){var s=l.substring(a,o).trim();if(0!==s.length){var u=h(s);if(u)p(u,t,r)||(i=!0)}a=o+1,o=l.indexOf("\n",a)}return e=l.substring(a),{error:i?c.f.INVALID_LINE:null,filesMap:t,filesMapChanges:r}}e=l}}function h(e){try{return JSON.parse(e)}catch(t){return null}}function p(e,t,n){switch(e.type){case"begin":var o=m(e.data.path);if(!o)return!1;t.set(o,{path:o,lines:[],dedentBy:0}),n.add(o);break;case"end":return!0;case"match":case"context":var a=m(e.data.path);if(!a)return!1;n.add(a);var l=t.get(a);if(!l)return!1;var c=function(e,t){var n,o,a=m(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];""===(null===(n=l[0])||void 0===n?void 0:n.trim())&&l.shift();""===(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())&&l.pop();var s=0,u=0,d=e.data.submatches;return l.forEach((function(t,n){var r=e.data.line_number+n,i=u;u+=t.length+1;for(var o=[];s<d.length;){var a=d[s];if(a.start>=u)break;var l=a.start-i,f=void 0;if(f=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:t.length-l,l<t.length&&o.push({start:l,length:f}),a.end>u){a.start=u;break}s++}c.push({lineNumber:r,content:t,matches:o})})),(0,i.Z)((0,r.Z)({},t),{lines:t.lines.concat(c)})}(e,l);return c&&t.set(a,c),!0;case"error":return s.kg.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}function m(e){return e?"bytes"in e?u.from(e.bytes,"base64").toString():e.text:null}function v(e){var t,n=e.lines.length>0?(t=Math).min.apply(t,(0,o.Z)(e.lines.map((function(e){return e.content.match(/^[\t ]+/)})).flat().map((function(e){return(null===e||void 0===e?void 0:e.length)||0})))):0;return(0,i.Z)((0,r.Z)({},e),{dedentBy:n})}function g(e,t,n){for(var r=(0,o.Z)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=t.get(l);n.has(l)&&c&&(r[a]=c,i.add(l))}var s=!0,u=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,m=t.get(p);!i.has(p)&&m&&r.push(m)}}catch(v){u=!0,d=v}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return r}function y(e){var t,n=e.mode,r=e.query,i=e.context,c=e.isRegex,s=e.isCaseSensitive,u=e.isMatchingWholeWords,f=e.includeGlobs,h=e.excludeGlobs,p=["rg"];switch(n){case"json":p.push("--json");break;case"files":p.push("--files-with-matches")}return null!==i&&p.push("--context","".concat(i)),r.includes("\n")&&p.push("--multiline"),c||p.push("--fixed-strings"),p.push("--max-count","100"),p.push("--max-filesize","4M"),p.push("--max-depth","24"),p.push("--max-columns","512"),p.push("--max-columns-preview"),p.push(s?"--case-sensitive":"--ignore-case"),u&&p.push("--word-regexp"),(t=p).push.apply(t,(0,o.Z)((0,l.m6)(f,h))),p.push("--",r),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return["sh","-c","".concat(a.apply(void 0,(0,o.Z)(e))," | head -c ").concat(t)]}(p)}},87720:function(e,t,n){var r;n.d(t,{f:function(){return r}}),function(e){e.PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",e.EMPTY_RESULTS="Nothing came up searching your Repl's content.",e.EMPTY_QUERY="No search query was provided.",e.INVALID_LINE="We encountered an invalid line while parsing your search results.",e.INVALID_COMMAND="Ripgrep returned an invalid response.",e.CONTAINER_DISCONNECTED="Disconnected from the container.",e.CONTAINER_CONNECTING="Connecting to the container.",e.CHANNEL_CLOSED="Channel was closed."}(r||(r={}))},97069:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(9434);function i(e){(0,r.j)(r.U3.FILETREE_USED,e)}},67813:function(e,t,n){n.d(t,{YI:function(){return A},kW:function(){return P}});var r,i=n(72006),o=n(4405),a=n(74985),l=n(48306),c=n.n(l),s=(n(50959),n(97846));!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(r||(r={}));var u=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)(s.Z,{size:"small",onClick:n,children:t.content})},d=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)(s.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},h=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,children:t.content})},m=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,a.tZ)("code",{onClick:n,style:r,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("b",{onClick:n,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("i",{onClick:n,children:t.content})},y=function(e){var t=e.fragment,n=e.onClick;return(0,a.BX)("span",{onClick:n,className:"jsx-e2f6e2707e7599fa",children:[t.content,(0,a.tZ)(c(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},Z=function(e){var t=e.fragment,n=e.onClick;return(0,a.BX)("blockquote",{onClick:n,className:"jsx-8741a91fadaf26be",children:[t.content,(0,a.tZ)(c(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},b=/(@[0-9a-zA-Z_]+)/,w=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,x=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,C=/(`.+?`)/,k=/(\*\*.+?\*\*)/,S=/(_.+?_)/,E=/(\*.+?\*)/,T=/(~~.+?~~)/,R=/(^>.+?$\n?)/m,D=/\/@([0-9a-zA-Z_]+)\/(.+)/;function I(e){var t=e.url;return{type:r.LINK,url:t,content:t}}function _(e){var t=e.hash;return{type:r.DEEP_LINK,url:t,content:t}}function B(e,t){if(x.test(e)){var n={};try{n=new window.URL(e)}catch(o){return{content:e,type:r.TEXT}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?_({hash:n.hash}):D.test(n.pathname)?function(e){var t=e.url,n=D.exec(t.pathname);if(!n)throw new Error("Not a Repl URL");return{type:r.REPL_LINK,url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):I({url:e}):I({url:e})}if(w.test(e))return _({hash:e});if(R.test(e))return function(e){var t=e.text;return{type:r.QUOTE,content:t}}({text:e.slice(1).trim()});if(C.test(e))return function(e){var t=e.code;return{type:r.CODE,content:t}}({code:e.slice(1,-1)});if(k.test(e))return function(e){var t=e.text;return{type:r.BOLD,content:t}}({text:e.slice(2,-2)});if(S.test(e)||E.test(e))return function(e){var t=e.text;return{type:r.ITALICS,content:t}}({text:e.slice(1,-1)});if(T.test(e))return function(e){var t=e.text;return{type:r.STRIKETHROUGH,content:t}}({text:e.slice(2,-2)});if(b.test(e)){var i=e.slice(1);if(!t.users||t.users.includes(i))return function(e){var t=e.username;return{type:r.MENTION,username:t,content:"@".concat(t)}}({username:i})}return{content:e,type:r.TEXT}}var G=new RegExp([C.source,k.source,S.source,E.source,T.source,x.source,b.source,w.source,R.source].join("|"),"m");function P(e,t){var n=e.split(G),i=[],o=[],a=!0,l=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if(d){var f=B(d,t);if(f){if(f.type===r.MENTION){if(!f.username)continue;i.push(f.username)}o.push(f)}}}}catch(h){l=!0,c=h}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return{tokens:o,mentions:i}}function A(e){var t=e.message,n=e.onMentionClick,l=void 0===n?function(){}:n,c=e.codeStyles,s=void 0===c?{}:c;return(0,a.tZ)(a.HY,{children:t.tokens.map((function(e,t){var n={fragment:e,key:t};return e.type===r.MENTION?(0,a.tZ)(d,(0,o.Z)((0,i.Z)({},n),{onClick:function(){return l(e)}})):e.type===r.LINK?(0,a.tZ)(f,(0,i.Z)({},n)):e.type===r.REPL_LINK?(0,a.tZ)(h,(0,i.Z)({},n)):e.type===r.DEEP_LINK?(0,a.tZ)(p,(0,i.Z)({},n)):e.type===r.CODE?(0,a.tZ)(m,(0,o.Z)((0,i.Z)({},n),{style:s})):e.type===r.BOLD?(0,a.tZ)(v,(0,i.Z)({},n)):e.type===r.ITALICS?(0,a.tZ)(g,(0,i.Z)({},n)):e.type===r.STRIKETHROUGH?(0,a.tZ)(y,(0,i.Z)({},n)):e.type===r.QUOTE?(0,a.tZ)(Z,(0,i.Z)({},n)):(0,a.tZ)(u,(0,i.Z)({},n))}))})}},54209:function(e,t,n){n.d(t,{D:function(){return Nh}});var r=n(72006),i=n(4405),o=n(9970),a=n(74985),l=n(46130),c=n(22004),s=n(52557),u=n(95148),d=n(80191),f=n(87756),h=n(90171),p=n.n(h),m=function(){return Boolean(p().query.embed||p().query.lite)},v=n(90234),g=n(2272),y=n(48306),Z=n.n(y),b=n(50959),w=n(70399),x=n(26473),C=n(88965),k=n(7868),S=n(46988),E=n(45362),T=n(86763),R=n.n(T),D=n(68625),I=n(94468),_=n(8146),B=function(e){var t=e.buttons,n=e.onClick,r=e.onUndo,i=e.onRedo;return(0,a.BX)("nav",{className:"jsx-43582faf24448cbd",children:[t.map((function(e){return(0,a.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},className:"jsx-43582faf24448cbd",children:void 0!==e.label?e.label:e.value},e.value)})),(0,a.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},className:"jsx-43582faf24448cbd",children:(0,a.tZ)(k.Z,{})}),(0,a.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},className:"jsx-43582faf24448cbd",children:(0,a.tZ)(S.Z,{})}),(0,a.tZ)(Z(),{id:"43582faf24448cbd",children:'nav.jsx-43582faf24448cbd{font-family:Monaco,Menlo,"Ubuntu Mono",Consolas,source-code-pro,monospace;height:48px;background-color:var(--background-root);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}button.jsx-43582faf24448cbd{color:var(--foreground-default);padding:10px;font-family:inherit;font-size:16px;background-color:transparent;border:0 none;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}'})]})},G=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],P=function(e){var t=e.path,n=(0,o.Z)(G).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},A="visualViewport"in window;function N(e){var t=e.filePath,n=e.isLoading,r=(0,I.uN)(),i=(0,_.d)({tablet:!1}),o=(0,w.Z)();b.useEffect((function(){o&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var t=e.cursor,n=e.scroller;if(t){var i=(t.top+t.bottom)/2,o=(n.top+n.bottom)/2;Math.abs(i-o)>5&&(r.scrollDOM.scrollTop+=i-o+(D.gn?50:0))}}})}),[o,r]);var l=(0,g.Z)(b.useState(0),2),c=l[0],s=l[1];if(b.useEffect((function(){if(D.gn){var e=window.visualViewport;if(A&&e){var t=R()((function(){s(window.innerHeight-e.height-e.offsetTop)}),100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t)}}}}),[]),!o||n)return null;if(!i)return null;var u=(0,a.tZ)(B,{onUndo:function(){r&&((0,E.Yw)(r),r.focus())},onRedo:function(){r&&((0,E.KX)(r),r.focus())},onClick:function(e){if(r){var t,n=null!==(t=r.state.selection.ranges[0].from)&&void 0!==t?t:0;r.dispatch({changes:{from:n,insert:e.value},selection:{anchor:n+e.cursorOffset}}),r.focus()}},buttons:P({path:t})});return!D.gn||A?(0,a.tZ)(x.G,{css:[C.l0.position.fixed,C.l0.width("100%"),C.l0.zIndex(100),C.l0.bottom(c),C.l0.left(0)],children:u}):u}var U=n(51861),L=n(23271),O=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n\tpos: vec2(80, 80),\n\twidth: 120,\n\theight: 80,\n\tcolor: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n\tpos: vec2(100, 100),\n\tp1: vec2(0, -48),\n\tp2: vec2(-60, 48),\n\tp3: vec2(60, 48),\n\tcolor: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n\tpos: vec2(100, 100),\n\tradius: 48,\n\tcolor: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n\tpos: vec2(120, 100),\n\tradiusX: 64,\n\tradiusY: 40,\n\tcolor: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n\tpos: vec2(100, 100),\n\tpts: [\n\t\tvec2(0, -48),\n\t\tvec2(-64, 0),\n\t\tvec2(-32, 64),\n\t\tvec2(32, 64),\n\t\tvec2(64, 0),\n\t],\n\tcolor: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n\ttext: "hi",\n\tpos: vec2(60, 60),\n})\n    '.trim()}],X=function(e){var t=e.img,n=e.code,r=(0,g.Z)((0,L.c)({item:{type:U.z.Code,code:n},type:U.z.Code}),2)[1];return(0,a.tZ)("img",{alt:"kaboom shape",ref:r,src:t,css:[C.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},M=function(){return(0,a.tZ)(x.G,{css:[C.l0.flex.row,C.l0.justify.spaceEvenly,C.l0.backgroundColor.backgroundHigher,C.l0.borderRadius(8),C.l0.width("calc(100% - 32px)"),C.l0.height("64px"),C.l0.position.absolute,C.l0.overflowY("hidden"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:O.map((function(e){return(0,a.tZ)(X,(0,r.Z)({},e),e.img)}))})},F=n(80027),W=n(61600),H=n(66091),V=n(5683),z=n(45347),j=n(48587),q=n(87708),$=n(10310),Y=new(function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(){return(0,H.Z)(this,n),t.apply(this,arguments)}return n.prototype.toDOM=function(){return document.createTextNode("\u25cf")},n}(j.SJ)),K=q.Py.define({}),Q=q.Py.define({}),J=j.p.line({attributes:{class:"cm-debuggerLine"}}),ee=q.Py.define({}),te=q.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(ee))return l.value}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function ne(e){var t=new q.f_,n=e.state.field(te);if(null!==n&&n<=e.state.doc.lines){var r=e.state.doc.line(n);t.add(r.from,r.from,J)}return t.finish()}var re=j.lg.fromClass(function(){"use strict";function e(t){(0,H.Z)(this,e),this.decorations=ne(t)}return e.prototype.update=function(e){this.decorations=ne(e.view)},e}(),{decorations:function(e){return e.decorations}});function ie(e,t){e.dispatch({effects:Q.of({pos:t})})}var oe=q.QQ.define({create:function(){return q.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=function(){var n=o.value;if(n.is(Q)){var r=!1;e.between(n.value.pos,n.value.pos+1,(function(){r=!0})),e=r?e.update({filter:function(e){return e!==n.value.pos}}):e.update({add:[Y.range(n.value.pos)]})}n.is(K)&&(e=ce(n.value.lines,t.state))},l=t.effects[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)a()}catch(c){r=!0,i=c}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),ae=j.tk.baseTheme({".cm-breakpoint-gutter .cm-gutterElement":{color:C.TV.accentPrimaryDefault,paddingLeft:C.TV.space4,paddingRight:C.TV.space2,cursor:"default"},".cm-debuggerLine":{backgroundColor:C.TV.accentPrimaryDimmest,borderRadius:C.TV.borderRadius4,marginRight:C.TV.space4}});function le(e,t){var n;return e&&0!==e.length?null===t||(null===(n=e[0].source)||void 0===n?void 0:n.path)!==t?null:e[0].line:null}function ce(e,t){var n=(0,o.Z)(new Set(e.filter((function(e){return e<=t.doc.lines})))).map((function(e){return Y.range(t.doc.line(e).from)}));return q.Xs.of(n,!0)}var se=n(28435),ue=n(67043),de=n(50672);function fe(e){var t=e.view,n=e.debuggest,r=e.filePath,i=e.isLoading,o=(0,se.Z)().fs,a=(0,ue.Z)(),l=(0,W.Z)(n.mainClient),c=(0,de.Z)({view:t});b.useEffect((function(){if(!i&&a&&l&&t){var e=(0,$.ZF)("/home/runner/".concat(a.slug,"/").concat(r)),n=function(e,t,n,r){var i,o=[];o.push(t.breakpoints.subscribe((function(t){var r=t.get(n);e.dispatch({effects:K.of({lines:r?r.map((function(e){return e.line})):[]})})})));var a=j.tk.updateListener.of((function(i){i.transactions.forEach((function(i){i.effects.forEach((function(i){if(i.is(Q)){var o=(0,$.om)(n);if(!o)throw new Error("Expected relative path");t.toggleBreakpoint(n,{line:e.state.doc.lineAt(i.value.pos).number,otVersion:r.getOTVersion(o),otIndex:i.value.pos})}}))}))}));o.push(t.stackFrames.subscribe((function(t){var r=le(t,n);e.dispatch({effects:ee.of(r)})})));var l=(0,j.v5)({class:"cm-breakpoint-gutter",markers:function(e){return e.state.field(oe)},initialSpacer:function(){return Y},domEventHandlers:{mousedown:function(e,t){return ie(e,t.from),!0}}}),c=(null===(i=t.breakpoints.current.get(n))||void 0===i?void 0:i.map((function(e){return e.line})))||[],s=[q.Wl.highest(l),oe.init((function(e){return ce(c,e)})),a,te.init((function(){return le(t.stackFrames.current,n)})),re,ae];return{extensions:s,dispose:function(){return o.forEach((function(e){return e()}))}}}(t,l,e,o),s=n.extensions,u=n.dispose;return t.dispatch({effects:c.reconfigure(s)}),function(){t.dispatch({effects:c.reconfigure([])}),u()}}}),[l,t,a,r,i,o,c])}var he=n(5132);function pe(e){var t=e.view,n=e.line,r=e.col,i=t.state.doc,o=Math.max(1,Math.min(n,i.lines)),a=i.line(o),l=a.to,c=a.from,s=r||0,u=Math.min(c+s,l),d=q.jT.cursor(u);t.dispatch({selection:d,effects:[j.tk.scrollIntoView(u,{x:"center",y:"center"})]})}var me=n(23743);function ve(e){var t,n=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean(null===n||void 0===n?void 0:n.completionProvider),isCompletionItemResolveSupported:Boolean(null===n||void 0===n||null===(t=n.completionProvider)||void 0===t?void 0:t.resolveProvider),isDocumentSymbolSupported:Boolean(null===n||void 0===n?void 0:n.documentSymbolProvider),isFindReferencesSupported:Boolean(null===n||void 0===n?void 0:n.referencesProvider),isFindDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.definitionProvider),isFindTypeDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.typeDefinitionProvider),isFindImplementationSupported:Boolean(null===n||void 0===n?void 0:n.implementationProvider),isFormatSupported:Boolean(null===n||void 0===n?void 0:n.documentFormattingProvider),isTextDocumentSyncSupported:Boolean(null===n||void 0===n?void 0:n.textDocumentSync),isHoverSupported:Boolean(null===n||void 0===n?void 0:n.hoverProvider),isRenameSupported:Boolean(null===n||void 0===n?void 0:n.renameProvider),isCodeActionsSupported:Boolean(null===n||void 0===n?void 0:n.codeActionProvider),isSignatureHelpSupported:Boolean(null===n||void 0===n?void 0:n.signatureHelpProvider)}}function ge(e){var t=(0,g.Z)(b.useState(null),2),n=t[0],r=t[1];return b.useEffect((function(){if(e)return r(ve(e)),e.onServerCapabilitiesChange((function(){r(ve(e))}));r(null)}),[e]),n}var ye=n(39995),Ze=n(57135),be=n(96583),we=n(65753),xe=n(64116),Ce=n(25183),ke=n(32645),Se=n(53312),Ee=n(60966),Te=n(7225),Re=n(91639),De={p:{padding:"".concat(C.TV.space2," ").concat(C.TV.space8),lineHeight:1.4,marginBottom:"".concat(C.TV.space8," !important")},"p:first-of-type":{marginTop:"".concat(C.TV.space4," !important")},"p:last-of-type":{marginBottom:"".concat(C.TV.space4," !important")},pre:{margin:"".concat(C.TV.space2," ").concat(C.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(C.TV.outlineDimmest),paddingTop:C.TV.space4},"h1, h2, h3":{margin:"".concat(C.TV.space8," !important"),marginTop:"".concat(C.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(C.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(C.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(C.TV.space4," !important")},hr:{margin:"".concat(C.TV.space8," !important"),borderTop:"2px solid ".concat(C.TV.backgroundHighest," !important")},li:{margin:"".concat(C.TV.space2," ").concat(C.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(C.TV.backgroundHighest),marginBottom:C.TV.space4},".cm-line":{paddingLeft:C.TV.space4,paddingRight:C.TV.space4},".cm-content":{paddingLeft:C.TV.space4,paddingRight:C.TV.space4}},Ie=b.memo((function(e){var t=e.content,n=e.className;return(0,a.tZ)(x.G,{css:De,children:(0,a.tZ)(Ee.ZP,{className:n,components:{code:function(e){return(0,a.tZ)(Re.Z,(0,r.Z)({minimal:!0,disableCopy:!0},e))}},children:t})})}));function _e(e){var t=e.content,n=e.className;return"string"===typeof t?(0,a.tZ)(Ie,{css:[{p:{whiteSpace:"pre-wrap"}}],className:n,content:t}):t.kind===Te.MarkupKind.PlainText?(0,a.tZ)(x.G,{children:(0,a.tZ)(Se.xv,{className:n,children:t.value})}):(0,a.tZ)(Ie,{className:n,content:t.value})}var Be=n(98237),Ge=(0,Ce.B)(),Pe=q.Py.define(),Ae=q.QQ.define({create:function(){return null},update:function(e,t){if(t.isUserEvent("select")||t.isUserEvent("undo")||t.isUserEvent("redo"))return null;if(!t.isUserEvent("input.type"))return e;if(t.changes.empty)return e;var n="";return t.changes.iterChanges((function(e,t,r,i,o){n=o.sliceString(0,1)})),n||null}});var Ne=new Be.Jf((function(e){var t,n,r=e.help,i=e.index,o="1px solid ".concat(C.TV.outlineDimmer),l="min(425px, 80vw)",c=r.signatures[i],s=r.signatures.length>1;if(!c)return null;var u=c.documentation,d=null!=r.activeParameter&&(null===(t=c.parameters)||void 0===t||null===(n=t[r.activeParameter])||void 0===n?void 0:n.documentation);return(0,a.BX)(x.G,{css:[C.l0.flex.row,C.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[s?(0,a.tZ)(x.G,{css:[C.l0.flex.row,C.l0.pl(4),{borderRight:o,paddingBottom:5}],children:(0,a.BX)("span",{css:[{alignSelf:"flex-end"},C.l0.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,a.BX)(x.G,{children:[(0,a.tZ)(x.G,{css:[C.l0.py(4),C.l0.pl(s?4:8),C.l0.pr(8),C.l0.maxHeight(100),C.l0.overflowY("scroll"),C.l0.font.code,{lineHeight:C.TV.lineHeightSmall,maxWidth:l}],children:(0,a.tZ)(Ue,{signature:c,activeParameter:r.activeParameter})}),Boolean(u||d)&&(0,a.BX)(x.G,{css:[C.l0.px(s?4:8),C.l0.py(2),C.l0.maxHeight(200),C.l0.overflow("scroll"),{borderTop:o,maxWidth:l}],children:[d?(0,a.tZ)(_e,{content:d}):null,u?(0,a.tZ)(_e,{content:u}):null]})]})]})}));function Ue(e){var t,n=e.signature,r=n.label,i=n.parameters,o=e.activeParameter;if(null==o||!i)return(0,a.tZ)("span",{children:r});var l=null===(t=i[o])||void 0===t?void 0:t.label;if(!l)return(0,a.tZ)("span",{children:r});var c=(0,g.Z)("string"===typeof l?[r.indexOf(l),r.indexOf(l)+l.length]:l,2),s=c[0],u=c[1];return(0,a.BX)("div",{children:[(0,a.tZ)("span",{children:r.slice(0,s)}),(0,a.tZ)("strong",{children:l}),(0,a.tZ)("span",{children:r.slice(u)})]})}function Le(e,t,n,r,i){return Oe.apply(this,arguments)}function Oe(){return Oe=(0,Ze.Z)((function(e,t,n,r,i){var o,a;return(0,be.__generator)(this,(function(l){switch(l.label){case 0:return i.current&&n.notify.cancelRequest(i.current),o=n.generateId(),i.current=o,[4,n.request.signatureHelp(r,(0,xe.s)(e.doc,t),{id:o})];case 1:return a=l.sent(),i.current=null,"error"in a?[2,null]:[2,a.result]}}))})),Oe.apply(this,arguments)}var Xe=n(99127),Me=n(92674),Fe=n.n(Me),We=n(79836),He=new Map;function Ve(e){var t=e.lspClient,n=e.path,r=e.view,i=Fe().v4();return function(){var e,a=null!==(e=He.get(n))&&void 0!==e?e:[];He.set(n,(0,o.Z)(a).concat([i])),t.notify.didOpen(n,r.state.doc.toString())}(),{id:i,destroy:function(){var e,r=(null!==(e=He.get(n))&&void 0!==e?e:[]).filter((function(e){return e!==i}));t.getServerState()===We.a.INITIALIZED&&t.isOpen(n)&&t.notify.didClose(n),0===r.length?He.delete(n):He.set(n,r)},update:function(e){var r;if(function(){var e;return(null!==(e=He.get(n))&&void 0!==e?e:[])[0]===i}()&&e.docChanged){var o=null===(r=t.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(o!==Xe.TextDocumentSyncKind.None&&t.isOpen(n))if(o!==Xe.TextDocumentSyncKind.Full)t.notify.didChange(n,function(e,t){var n=[],r=t;return e.iterChanges((function(e,t,i,o,a){var l=a.sliceString(0),c=t-e,s=c+i;n.push({range:{start:(0,xe.s)(r,i),end:(0,xe.s)(r,s)},rangeLength:c,text:l}),r=r.replace(i,s,a)})),n}(e.changes,e.startState.doc));else{var a=e.view.state.doc.toString();t.notify.didChange(n,[{text:a}])}}}}}function ze(e){var t=e.lspClient,n=e.path;return j.lg.define((function(e){return Ve({lspClient:t,path:n,view:e})}))}var je,qe=n(57389),$e=n(81962),Ye=n(77637),Ke=n(43182),Qe=n(68935),Je=n(28814),et=n(53028),tt=n(7131),nt=n(92153),rt=n(31764),it=j.lg.define((function(e){var t=e.state.facet(ot),n=[];return{update:function(e){t=e.state.facet(ot);var n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){n=[]},logs:function(){return n},pushEvent:function(t){var n={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:t.type};(0,$e.Z)(t,KeyboardEvent)&&(n.key=t.key,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey),(0,$e.Z)(t,InputEvent)&&(n.data=t.data,n.inputType=t.inputType,n.isComposing=t.isComposing),(0,$e.Z)(t,CompositionEvent)&&(n.data=t.data),this.pushLog(n)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(q.YW.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){t&&(n.push(e),n=n.slice(Math.max(0,n.length-100)))}}}),{provide:function(e){var t=function(t,n){var r;return null===(r=n.plugin(e))||void 0===r?void 0:r.pushEvent(t)};return q.Wl.highest(j.tk.domEventHandlers({keypress:t,keydown:t,keyup:t,beforeinput:t,input:t,compositionstart:t,compositionupdate:t,compositionend:t}))}}),ot=q.r$.define({combine:function(e){return!!e.length&&e[0]}}),at=new rt.j((function(e){return ot.of(e)})),lt="cm-lintRange-deprecated",ct="cm-lintRange-unnecessary",st=j.tk.theme((je={},(0,qe.Z)(je,".cm-lintRange.".concat(lt),{"& > span":{textDecoration:"line-through"},backgroundImage:"none",textDecoration:"line-through"}),(0,qe.Z)(je,".cm-lintRange.".concat(ct),{opacity:.5}),je)),ut=q.Py.define(),dt=q.QQ.define({create:function(){return[]},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.is(ut)&&(e=l.value)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function ft(e){var t=e.lspClient,n=e.path,r=e.askGhostwriter;return[st,dt,j.lg.define((function(e){var t=function(e){var t=e.target;(0,$e.Z)(t,HTMLElement)&&t.classList.contains("cm-diagnosticAction")&&e.stopPropagation()};return e.dom.addEventListener("mousedown",t),{destroy:function(){e.dom.removeEventListener("mousedown",t)}}})),j.lg.define((function(e){var i=!1,o=t.onDiagnostics((function(t){if(!i&&t.path===n){var o=function(e,t,n){var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=function(){var e,i=l.value,o=(0,xe.R)(t.doc,i.range.start),a=(0,xe.R)(t.doc,i.range.end);if(o===a){var c=t.wordAt(a);if(c)o=c.from,a=c.to;else if(a<t.doc.length)a+=1;else{if(!(o>0))return"continue";o-=1}}if(o>=a)return tt.kg.error("Misbehaved LSP: diagnostic's range is invalid",{from:o,to:a,di:JSON.stringify(i),language:null===(e=t.facet(Qe.dK))||void 0===e?void 0:e.name}),"continue";var s="info";switch(i.severity){case Te.DiagnosticSeverity.Error:s="error";break;case Te.DiagnosticSeverity.Warning:s="warning";break;case Te.DiagnosticSeverity.Hint:case Te.DiagnosticSeverity.Information:s="info"}var u=[];n&&u.push({name:"\ud83d\udd2e Debug",apply:function(){return n({text:(0,et.Vh)(i.message,"lsp"),type:"debugger",errorType:"lsp"})}});var d=[];i.tags&&(i.tags.includes(Te.DiagnosticTag.Unnecessary)&&d.push(ct),i.tags.includes(Te.DiagnosticTag.Deprecated)&&d.push(lt)),r.push({from:o,to:a,severity:s,message:i.message,source:i.source,actions:u,markClass:d.length?d.join(" "):void 0})},s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)c()}catch(d){o=!0,a=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var u={error:1,warning:2,info:3,hint:4};return r.sort((function(e,t){return u[t.severity]-u[e.severity]}))}(t.diagnostics,e.state,r),a=e.state.field(dt,!1);try{e.dispatch(ht(ut.of(t.diagnostics),(0,Je.p0)(e.state,o)))}catch(l){Ke.$e((function(t){var n=e.plugin(it),r=null===n||void 0===n?void 0:n.logs();null===n||void 0===n||n.flush(),t.setExtra("keystrokes",JSON.stringify(r)),t.setExtra("doc",e.state.doc.toString()),t.setExtra("diagnostic",JSON.stringify(o)),t.setExtra("prev_diagnostics",JSON.stringify(a)),t.setExtra("state",JSON.stringify(e.state.toJSON())),t.setExtra("hasFocus",e.hasFocus),t.setExtra("docView",null===e||void 0===e?void 0:e.docView.toString()),t.setExtra("selection",JSON.stringify(e.state.selection.toJSON())),Ke.Tb(l)}))}}}));return{destroy:function(){i=!0,o()}}}))]}function ht(e,t){var n=t.effects,i=(0,Ye.Z)(t,["effects"]);return n=(0,nt.ZP)(n,(function(t){t||(t=[]),Array.isArray(t)||(t=[t]),t.push(e)})),(0,r.Z)({effects:n},i)}function pt(e){return(0,Je.p0)(e,[])}var mt,vt,gt=n(44478),yt=n(48960),Zt=n(57988),bt=n(98539),wt=n(7742);!function(e){e[e.Dollar=0]="Dollar",e[e.Colon=1]="Colon",e[e.Comma=2]="Comma",e[e.CurlyOpen=3]="CurlyOpen",e[e.CurlyClose=4]="CurlyClose",e[e.Backslash=5]="Backslash",e[e.Forwardslash=6]="Forwardslash",e[e.Pipe=7]="Pipe",e[e.Int=8]="Int",e[e.VariableName=9]="VariableName",e[e.Format=10]="Format",e[e.Plus=11]="Plus",e[e.Dash=12]="Dash",e[e.QuestionMark=13]="QuestionMark",e[e.EOF=14]="EOF"}(mt||(mt={})),function(e){e[e.DollarSign=36]="DollarSign",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.QuestionMark=63]="QuestionMark",e[e.A=65]="A",e[e.Z=90]="Z",e[e.Backslash=92]="Backslash",e[e.Underline=95]="Underline",e[e.a=97]="a",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace"}(vt||(vt={}));var xt,Ct=function(){"use strict";function e(){(0,H.Z)(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"===typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do{r+=1,i=this.value.charCodeAt(n+r)}while(e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do{i=this.value.charCodeAt(n+ ++r)}while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do{r+=1,i=this.value.charCodeAt(n+r)}while(!isNaN(i)&&"undefined"===typeof e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();Ct._table=(xt={},(0,qe.Z)(xt,36,0),(0,qe.Z)(xt,58,1),(0,qe.Z)(xt,44,2),(0,qe.Z)(xt,123,3),(0,qe.Z)(xt,125,4),(0,qe.Z)(xt,92,5),(0,qe.Z)(xt,47,6),(0,qe.Z)(xt,124,7),(0,qe.Z)(xt,43,11),(0,qe.Z)(xt,45,12),(0,qe.Z)(xt,63,13),xt);var kt=function(){"use strict";function e(){var t;(0,H.Z)(this,e),this._children=[],t=this,["parent"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,writable:!0})}))}var t=e.prototype;return t.appendChild=function(e){return(0,$e.Z)(e,St)&&(0,$e.Z)(this._children[this._children.length-1],St)?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n,r=e.parent,i=r.children.indexOf(e),a=r.children.slice(0);(n=a).splice.apply(n,[i,1].concat((0,o.Z)(t))),r._children=a,function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=n,e(c.children,c)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(t,r)},t.toString=function(){return this.children.reduce((function(e,t){return e+t.toString()}),"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.entries(At)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,g.Z)(i.value,2),l=a[0],c=a[1];if((0,$e.Z)(this,c)&&l in e)return e[l](this)}}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},(0,Zt.Z)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if((0,$e.Z)(e,Gt))return e;e=e.parent}}}]),e}(),St=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e){var r;return(0,H.Z)(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(kt),Et=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(){return(0,H.Z)(this,n),t.apply(this,arguments)}return n}(kt),Tt=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e){var r;return(0,H.Z)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},(0,Zt.Z)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&(0,$e.Z)(this._children[0],Rt)?this._children[0]:void 0}}]),n}(Et),Rt=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(){var e;return(0,H.Z)(this,n),(e=t.apply(this,arguments)).options=[],e}var r=n.prototype;return r.appendChild=function(e){return(0,$e.Z)(e,St)&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map((function(e){return e.value.replace(/\||,|\\/g,"\\$&")})).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(kt),Dt=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(){var e;return(0,H.Z)(this,n),(e=t.apply(this,arguments)).regexp=new RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))}));return!n&&this._children.some((function(e){return(0,$e.Z)(e,It)&&Boolean(e.elseValue)}))&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if((0,$e.Z)(l,It)){var c=e[l.index]||"";t+=c=l.resolve(c)}else t+=l.toString()}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map((function(e){return e.toTextmateString()})),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e},n}(kt),It=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e,r,i,o){var a;return(0,H.Z)(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=n.prototype;return r.resolve=function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:e||"string"!==typeof this.elseValue?e||"":this.elseValue},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(kt),_t=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e){var r;return(0,H.Z)(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new St(t)],!0)},r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0===this.children.length?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n}(Et);function Bt(e,t){for(var n=(0,o.Z)(e);n.length>0;){var r,i=n.shift();if(!t(i))break;(r=n).unshift.apply(r,(0,o.Z)(i.children))}}var Gt=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(){return(0,H.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return this.walk((function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)})),n?t:-1},r.fullLen=function(e){var t=0;return Bt([e],(function(e){return t+=e.len(),!0})),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)(0,$e.Z)(n,Tt)&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk((function(n){return(0,$e.Z)(n,_t)&&n.resolve(e)&&delete t._placeholders,!0})),this},r.appendChild=function(e){return delete this._placeholders,(0,bt.Z)((0,wt.Z)(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,(0,bt.Z)((0,wt.Z)(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce((function(e,t){return e+t.toTextmateString()}),"")},r.clone=function(){var e=new n;return this._children=this.children.map((function(e){return e.clone()})),e},r.walk=function(e){Bt(this.children,e)},(0,Zt.Z)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk((function(n){return(0,$e.Z)(n,Tt)&&(t.push(n),e=!e||e.index<n.index?n:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(kt),Pt=function(){"use strict";function e(){(0,H.Z)(this,e),this._scanner=new Ct,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){var r=new Gt;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!==n&&void 0!==n&&n,null!==t&&void 0!==t&&t),r},t.parseFragment=function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var r=new Map,i=[];t.walk((function(e){return(0,$e.Z)(e,Tt)&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0}));var o=function(e,n){var i=r.get(e.index);if(i){var a=new Tt(e.index);a.transform=e.transform;var l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value.clone();a.appendChild(f),(0,$e.Z)(f,Tt)&&r.has(f.index)&&!n.has(f.index)&&(n.add(f.index),o(f,n),n.delete(f.index))}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}t.replace(e,[a])}},a=new Set,l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;o(f,a)}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return t.children.slice(n)},t.ensureFinalTabstop=function(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find((function(e){return 0===e.index}))||e.appendChild(new Tt(0)))},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new St(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Tt(Number(t)):new _t(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new Tt(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new St("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else{if(!(r.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(var i=new Rt;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}}},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new St(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new _t(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new St("${"+t+":")),r.children.forEach(e.appendChild,e),!0}},t._parseTransform=function(e){for(var t=new Dt,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0))n+=i=this._accept(6,!0)||i;else{if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new St(o));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;r+=this._accept(void 0,!0)}try{t.regexp=new RegExp(n,r)}catch(a){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n)return e.appendChild(new It(Number(r))),!0;if(this._accept(4))return e.appendChild(new It(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new It(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new It(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new It(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new It(Number(r),void 0,l,c)),!0}}else{var s=this._until(4);if(s)return e.appendChild(new It(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new St(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(t){return(new e).parse(t).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),At={Text:St,Placeholder:Tt,Variable:_t,FormatString:It,Choice:Rt};function Nt(e,t){var n=t.mapPos(e.from,-1,q.gc.TrackDel),r=t.mapPos(e.to,1,q.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}var Ut=function(){"use strict";function e(t){(0,H.Z)(this,e),this.lines=t.split(/\r\n?|\n/).map((function(e){return(new Pt).parse(e).children}))}return e.prototype.apply=function(t){var n=t.view,r=t.from,i=t.to,o=e.instantiate(this.lines,t),a=o.text,l=o.ranges,c={from:r,to:i,insert:q.xv.of(a)},s={changes:c,scrollIntoView:!0,annotations:we.Jv.of(t.completion)};if(l.length&&(s.selection=Ht(l,0)),l.length>1){var u=new Xt(l,0),d=s.effects=[Mt.of(u)];void 0===n.state.field(Wt,!1)&&d.push(q.Py.appendConfig.of([Wt,zt,jt]))}if(r===i&&!l.length){var f=q.as.of(c,n.state.doc.length),h=n.state.selection.ranges.map((function(e){return e.map(f,0)}));s.selection=q.jT.create(h,n.state.selection.mainIndex)}return s},e.resolveVariable=function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,yt.basename)(i);case"TM_FILENAME_BASE":return(0,yt.basename)(i,(0,yt.extname)(i));case"TM_DIRECTORY":return(0,yt.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var a,l=n.view,c=n.from,s=l.state,u=[],d=[],f=s.doc.lineAt(c),h=/^\s*/.exec(f.text)[0],p=s.facet(Qe.c),m=!0,v=!1,g=void 0;try{for(var y,Z=function(){var t=y.value,r=0,i="",o=function(e){var t=0,n=r;if(0===r&&(t=/^\t*/.exec(e)[0].length)){var o=h+p.repeat(t);e=o+e.slice(t),n+=o.length}return i+=e,r+=e.length,{line:u.length,from:n,to:r}},a=function(t){var i=!0,l=!1,s=void 0;try{for(var f,h=t[Symbol.iterator]();!(i=(f=h.next()).done);i=!0){f.value.match({Text:function(e){o(e.value)},Variable:function(t){var r=t.name,i=t.transform,a=e.resolveVariable(r,n);i&&(a=a.replace(i.regexp,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map((function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})})).filter(Boolean).join("")}))),o(a)},Choice:function(e){o(e.options[0].value)},Placeholder:function(e){var t,n=u.length?c+u.map((function(e){return e.length})).reduce((function(e,t){return e+t})):c;if(null===(t=e.children)||void 0===t?void 0:t.length){var i={field:e.index,from:n+r,to:null};d.push(i),a(e.children),i.to=n+r}else{o("");var l=n+r;d.push({field:e.index,from:l,to:l})}}})}}catch(p){l=!0,s=p}finally{try{i||null==h.return||h.return()}finally{if(l)throw s}}};a(t),u.push(i)},b=t[Symbol.iterator]();!(m=(y=b.next()).done);m=!0)Z()}catch(x){v=!0,g=x}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}var w=(a=Math).max.apply(a,(0,o.Z)(d.map((function(e){return e.field}))));return{text:u,ranges:d.map((function(e){var t=e.field,n=(0,Ye.Z)(e,["field"]);return(0,i.Z)((0,r.Z)({},n),{field:0===t?w:t-1})}))}},e}(),Lt=j.p.widget({widget:new(function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(){return(0,H.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(j.l9))}),Ot=j.p.mark({class:"cm-snippetField"}),Xt=function(){"use strict";function e(t,n){(0,H.Z)(this,e),this.ranges=t,this.active=n,this.deco=j.p.set(t.map((function(e){return(e.from===e.to?Lt:Ot).range(e.from,e.to)})))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=Nt(a.value,t);if(!c)return null;n.push(c)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to}))}))},e}(),Mt=q.Py.define({map:function(e,t){return null===e||void 0===e?void 0:e.map(t)}}),Ft=q.Py.define(),Wt=q.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(Mt))return l.value;if(l.is(Ft)&&e)return new Xt(e.ranges,l.value)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return j.tk.decorations.from(e,(function(e){return e?e.deco:j.p.none}))}});function Ht(e,t){var n=e.filter((function(e){return e.field===t})).map((function(e){return q.jT.range(e.from,e.to)}));if(0!==n.length)return q.jT.create(n)}function Vt(e){return function(t){var n,r=t.state,i=t.dispatch,a=r.field(Wt,!1);if(!a||e<0&&0===a.active)return!1;var l=a.active+e,c=(n=Math).max.apply(n,(0,o.Z)(a.ranges.map((function(e){return e.field})))),s=e>0&&a.active>=c;return i(r.update({selection:Ht(a.ranges,l),effects:Mt.of(s?null:new Xt(a.ranges,l))})),!0}}var zt=q.Wl.highest(j.$f.of([{key:"Tab",run:Vt(1),shift:Vt(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(Wt,!1)&&(n(t.update({effects:Mt.of(null)})),!0)}}])),jt=j.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(Wt,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find((function(e){return e.from<=n&&e.to>=n}));return!(!i||i.field===r.active)&&(t.dispatch({selection:Ht(r.ranges,i.field),effects:Mt.of(r.ranges.some((function(e){return e.field>i.field}))?new Xt(r.ranges,i.field):null)}),!0)}}),qt=n(76594),$t=n(99463),Yt=n(9434);function Kt(e){var t=e.facet(Qe.dK);return null===t||void 0===t?void 0:t.name}var Qt=n(36231),Jt=n(96893),en=n(61025),tn="cm-ghostwriter-hint-tooltip",nn=j.tk.theme((0,qe.Z)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:C.TV.backgroundHigher,borderTop:"solid 1px ".concat(C.TV.outlineDefault)}},".cm-tooltip-autocomplete.".concat(tn," .cm-ghostwriter-hint"),{display:"block"})),rn=(0,en.X)({hint:[C.l0.p(4),C.l0.rowWithGap(8),C.l0.align.center,C.l0.font.default,{opacity:.6}],prompt:[C.l0.rowWithGap(4),C.l0.align.center]});function on(){return(0,a.BX)(x.G,{css:rn.hint,children:[(0,a.tZ)(Jt.Z,{width:8,height:8}),(0,a.BX)(x.G,{css:rn.prompt,children:[(0,a.tZ)(qt.ZP,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,a.tZ)(Se.xv,{variant:"small",multiline:!1,children:"to use Ghostwriter suggestion."})]})]})}var an=j.lg.define((function(e){var t=function(){return Array.from(e.dom.children).filter((function(e){return e.classList.contains("cm-tooltip-autocomplete")}))},n=function(e){return Array.from(e.children).filter((function(e){return e.classList.contains("cm-ghostwriter-hint")}))},r=!1;return{update:function(){null!==(0,we.LR)(e.state)&&Promise.resolve().then((function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var l,c=t()[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var s=l.value;if(0===n(s).length){var u=(0,Be.VV)((0,a.tZ)(on,{}));u.className="cm-ghostwriter-hint",s.appendChild(u)}}}catch(d){i=!0,o=d}finally{try{e||null==c.return||c.return()}finally{if(i)throw o}}}}))},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=!0,u=!1,d=void 0;try{for(var f,h=n(c)[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;c.removeChild(p)}}catch(m){u=!0,d=m}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}}}catch(m){i=!0,o=m}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}})),ln=q.Py.define(),cn=q.QQ.define({create:function(){return null},update:function(e,t){null!==(0,we.LR)(t.state)?e&&(e=(0,i.Z)((0,r.Z)({},e),{missed:e.missed.compose(t.changes)})):e=null;var n=!0,o=!1,a=void 0;try{for(var l,c=t.effects[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){l.value.is(ln)&&(e={original:t.state.doc,missed:q.as.empty(t.state.doc.length)})}}catch(s){o=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return e}});function sn(e,t){var n=e.field(cn,!1);if(n){var r=(0,xe.R)(n.original,t);return n.missed.mapPos(r)}return(0,xe.R)(e.doc,t)}var un=n(25849),dn=n(61811);function fn(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}function hn(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:Xe.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);if(null===t||void 0===t?void 0:t.includes(o)){var l=o;return{triggerKind:Xe.CompletionTriggerKind.TriggerCharacter,triggerCharacter:l}}return a.match(/\w$/)?{triggerKind:Xe.CompletionTriggerKind.Invoked}:null}var pn=Object.entries(Te.CompletionItemKind).reduce((function(e,t){var n=(0,g.Z)(t,2),i=n[0],o=n[1];return(0,r.Z)((0,qe.Z)({},o,i.toLowerCase()),e)}),{});function mn(e,t){return{from:sn(e,t.start),to:sn(e,t.end)}}function vn(e,t){var n=mn(e.state,t.range),r=n.from,i=n.to;if(null!==r&&null!==i)return{from:r,to:i,insert:t.newText}}function gn(e){for(var t,n,l,c,s=e.context,u=e.items,d=e.client,f=e.path,h=e.trackCompletion,p=0,m=null!==(l=Kt(s.state))&&void 0!==l?l:"unknown",v=function(e,t){var n=new Set;return e.filter((function(e){var r=t.map((function(t){return e[t]})).join("\u241e");return!n.has(r)&&(n.add(r),!0)}))}(u.filter((function(e){return Boolean(e.label)})),["label","kind"]).map((function(e){var t=e.additionalTextEdits,n={label:e.label,detail:e.detail,apply:function(n,a,l,c){if(e.insertTextFormat===Te.InsertTextFormat.Snippet){var s,u,d,p,v=[];t&&v.push({changes:t.map((function(e){return vn(n,e)}))});var y=null!==(p=null!==(d=null===(u=e.textEdit)||void 0===u?void 0:u.newText)&&void 0!==d?d:e.insertText)&&void 0!==p?p:e.label,Z=new Ut(y);if(e.textEdit&&"range"in e.textEdit){var b,w=c;l=(b=mn(n.state,e.textEdit.range)).from,c=b.to,c=Math.max(c,w)}var x=Z.apply({view:n,from:l,to:c,path:f,completion:a});return(s=n).dispatch.apply(s,(0,o.Z)(v).concat([x])),void h("completion-accepted",{language:m,completionKind:e.kind,insertTextFormat:e.insertTextFormat})}var C=function(e){var t,n=e.view,o=e.item,a=e.from,l=e.to,c=n.state,s=c.doc,u=c.selection,d=[];if(o.textEdit){if(!("range"in o.textEdit))return;var f=vn(n,o.textEdit);if(!f)return;f.to=Math.max(f.to,u.main.to),d.push(f)}else{var h=o.insertText||o.label,p=n.state.wordAt(l);p&&p.to>l&&h.includes(n.state.doc.sliceString(l,p.to))&&(l=p.to),d.push({from:a,to:l,insert:h})}var m=(0,g.Z)(d,1)[0],v="";null===(t=o.additionalTextEdits)||void 0===t||t.forEach((function(e){var t=vn(n,e);t&&("from"in m&&t.from===m.from&&(v=t.insert),d.push(t))}));var y=l-a;u.ranges.forEach((function(e){if(e!==u.main){if(!("insert"in m)||!m.insert)throw new Error("Expected insert in mainChange");var t=e.from-y,n=v+m.insert;d.push({from:t,to:e.to,insert:n})}}));var Z=d.map((function(e){return"from"in e&&"undefined"!==typeof e.to?(0,i.Z)((0,r.Z)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e})),b=q.as.of(Z,s.length),w=u.ranges.map((function(e){return e.map(b,0)}));return{changes:b,selection:q.jT.create(w,u.mainIndex)}}({view:n,item:(0,i.Z)((0,r.Z)({},e),{additionalTextEdits:t}),to:c,from:l});C&&(h("completion-accepted",{language:m,completionKind:e.kind,insertTextFormat:e.insertTextFormat}),n.dispatch({changes:C.changes,selection:C.selection,annotations:we.Jv.of(a)}))},type:e.kind&&pn[e.kind],filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()},l=ve(d).isCompletionItemResolveSupported;return d&&l?n.info=(0,Ze.Z)((function(){var n,r,i,o,l,c;return(0,be.__generator)(this,(function(s){switch(s.label){case 0:return[4,d.request.resolveCompletionItem(e)];case 1:return n=s.sent(),r="cancelled"in n&&n.cancelled,i="result"in n?n.result:null,r||!i?[2,null]:(i.additionalTextEdits&&(t=i.additionalTextEdits),p++,o=[],i.detail&&i.detail!==e.detail&&i.detail!==e.label&&(l=(0,yt.extname)(f).slice(1),c=["```"+l,i.detail,"```"].join("\n"),o.push((0,a.tZ)(_e,{className:"lsp-completion-detail",content:{value:c,kind:"markdown"}},"".concat(p,"-detail")))),i.documentation&&o.push((0,a.tZ)(_e,{content:i.documentation},"".concat(p,"-documentation"))),0===o.length?[2,null]:(h("resolution-presented",{language:m,resolutionSource:"request",completionKind:e.kind}),[2,(0,Be.VV)((0,a.tZ)("div",{children:o}))]))}}))})):e.documentation&&(n.info=function(){return e.documentation?(h("resolution-presented",{language:m,resolutionSource:"documentation",completionKind:e.kind}),(0,Be.VV)((0,a.tZ)("div",{children:(0,a.tZ)(_e,{content:e.documentation})}))):null}),n})),y=((v=v.sort((function(e,t){return e.sortText<t.sortText?-1:e.sortText>t.sortText?1:0}))).length%2?v.length-1:v.length)/2,Z=0;Z<=y;Z++)if(0===Z&&v[y])v[y].boost=0;else{var b=v[y-Z];if(b){var w=v[y-Z+1],x=w.sortText,C=w.boost,k=void 0===C?0:C;b.boost=b.sortText===x?k:k+1}var S=v[y+Z];if(S){var E=v[y+Z-1],T=E.sortText,R=E.boost,D=void 0===R?0:R;S.boost=S.sortText===T?D:D-1}}var I,_=null!==(c=null===(t=v[0])||void 0===t?void 0:t.boost)&&void 0!==c?c:0,B=null!==(I=null===(n=v[v.length-1])||void 0===n?void 0:n.boost)&&void 0!==I?I:0;if(_>99||B<-99)for(var G=99/Math.max(Math.abs(_),Math.abs(B)),P=0;P<v.length;P++){var A;v[P].boost=(null!==(A=v[P].boost)&&void 0!==A?A:0)*G}var N=(0,g.Z)(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;t[c[0]]=!0;for(var s=1;s<c.length;s++)n[c[s]]=!0}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=fn(t)+fn(n)+"*$";return[new RegExp("^"+u),new RegExp(u)]}(v),2),U=N[0],L=N[1],O=s.matchBefore(L),X=s.pos;return O&&(X=O.from),v.length&&h("completion-options-presented",{language:m}),{from:X,options:v,validFor:U}}function yn(e){return ve(e).isAutoCompleteSupported?new un.R((function(t){return function(e){var t=e.lspClient,n=e.view,i=n.state.facet(dn.Yp),o=Math.random()<.01,l=0,c=function(e,n){if(o&&i){var a=t.getLanguageId(i);return tt.kg.info("lsp:autocomplete:".concat(e),(0,r.Z)({languageId:a},n)),(0,Yt.j)(Yt.U3.LSP_COMPLETION_USED,(0,r.Z)({type:e,sampleRate:.01},n))}};function s(){return s=(0,Ze.Z)((function(e){var r,o,a,s,u,d,f;return(0,be.__generator)(this,(function(h){switch(h.label){case 0:if(!(o=t.getServerCapabilities()))return[2,null];if(a=(null===o||void 0===o||null===(r=o.completionProvider)||void 0===r?void 0:r.triggerCharacters)||[],!(s=hn(e,a)))return[2,null];if(l&&t.notify.cancelRequest(l),!i)throw new Error("path not found");return l=t.generateId(),n.dispatch({effects:[ln.of(null)]}),[4,t.request.completion(i,(0,xe.s)(e.state.doc,e.pos),s,{id:l})];case 1:return"error"in(u=h.sent())?[2,null]:(d=u.result,e.aborted?[2,null]:d?(f=Array.isArray(d)?d:d.items,[2,gn({context:e,items:f,client:t,path:i,trackCompletion:c})]):[2,null])}}))})),s.apply(this,arguments)}return[nn,an,cn,(0,we.ys)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,$t.Z)(e)?tn:""},addToOptions:[{render:function(e,t){if(!(0,$t.Z)(t))return null;var n=document.createElement("div");return n.className="lsp-completion-keyboard-shortcuts",(0,gt.createRoot)(n).render((0,a.tZ)(Qt.C,{children:(0,a.tZ)(qt.ZP,{size:"inherit",shortcut:{key:"\u23ce"}})})),n},position:200}],override:[(0,we.eC)(["LineComment","BlockComment"],(function(e){return s.apply(this,arguments)}))]}),Zn]}({lspClient:e,view:t})})):[]}var Zn=j.tk.baseTheme({".lsp-completion-keyboard-shortcuts":{display:"none"},'[aria-selected="true"] .lsp-completion-keyboard-shortcuts':{float:"right",display:"inline-block"}}),bn=n(24144),wn=n(63723);function xn(e){var t=e.content,n=e.className,i=e.showHoveredVariable,o=(0,ye.Z)().preferences;if("string"!==typeof t&&"kind"in t)return(0,a.tZ)(_e,{content:t});var l=(Array.isArray(t)?t:[t]).map((function(e){return"string"===typeof e?e:"```"+e.language+"\n"+e.value+"\n```"})).join("\n");return(0,a.tZ)(Ee.ZP,{css:[{p:{fontSize:o.fontSize}},i?[C.l0.maxHeight(kn),C.l0.overflowY("auto")]:void 0],className:n,components:{code:function(e){return(0,a.tZ)(Re.Z,(0,r.Z)({minimal:!0,disableCopy:!0},e))}},children:l})}var Cn,kn=100;function Sn(e){var t=e.className,n=e.content,i=e.textHovered,o=(0,wn.P5)({controlName:"flag-debugger-hover-variable",logFlagToAnalytics:!1}),l=(0,se.Z)().debuggest,c=(0,W.Z)(l.mainClient),s=c&&("running"===c.state.current||"paused"===c.state.current),u=(0,g.Z)(b.useState(!1),2),d=u[0],f=u[1],h=(0,g.Z)(b.useState(void 0),2),p=h[0],m=h[1],v=o&&s&&p;return b.useEffect((function(){function e(){return e=(0,Ze.Z)((function(){var e,t,n;return(0,be.__generator)(this,(function(a){switch(a.label){case 0:if(!o||!s)return[3,4];f(!0),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,c.evaluate({expression:i,context:"hover"})];case 2:return t=a.sent(),(null===(e=t.body)||void 0===e?void 0:e.result)&&(n=(0,r.Z)({name:i,value:t.body.result},t.body),m(n)),[3,4];case 3:return f(!1),[7];case 4:return[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,c,s,i]),(0,a.BX)(x.G,{css:[De,v?C.l0.maxHeight(kn+190):C.l0.maxHeight(190),C.l0.minHeight(30),C.l0.overflowY("auto"),C.l0.borderRadius(4),C.l0.backgroundColor.backgroundHigher],children:[d?void 0:(0,a.tZ)(xn,{content:n,className:t,showHoveredVariable:Boolean(v)}),v?(0,a.tZ)(x.G,{css:[C.l0.maxHeight(190),C.l0.overflowY("auto")],children:(0,a.tZ)(bn._,{depth:0,client:c,variable:p})}):void 0]})}var En=q.r$.define({combine:function(e){return null!==(Cn=e.filter(Boolean)[0])&&void 0!==Cn?Cn:null}}),Tn=En.reader,Rn=new rt.j((function(e){return En.of(e)}));function Dn(e){var t,n,r=e.hover,i=e.state,o=e.offset;if((Array.isArray(r.contents)||"string"===typeof r.contents)&&0===r.contents.length)return null;var l="",c=i.doc;if(r.range)t=(0,xe.R)(c,r.range.start),n=(0,xe.R)(c,r.range.end),l=c.sliceString(t,n);else if(n=void 0,(t=o)<=i.doc.length){var s=i.wordAt(t);s?(l=c.sliceString(s.from,s.to),t=Math.min(t,s.from),n=s.to):l=c.sliceString(t,t+1)}return{pos:t,end:n,create:function(){var e=(0,Be.VV)((0,a.tZ)(Sn,{content:r.contents,textHovered:l}));return e.classList.add("hover-tooltip"),e.style.padding="0",{dom:e,mount:function(e){var t;t=function(){(0,j.E2)(e)},[0,50,200,1e3].forEach((function(e){return setTimeout(t,e)}))}}},above:!0}}function In(e){var t=null,n=(0,j.bF)(function(){var n=(0,Ze.Z)((function(n,r){var i,o,a,l,c,s;return(0,be.__generator)(this,(function(u){switch(u.label){case 0:if(!function(e){var t,n;return null!==(n=null===(t=e.facet(Tn))||void 0===t?void 0:t.isHoverSupported)&&void 0!==n&&n}(n.state))return[2,null];if(!(i=n.state.facet(dn.Yp)))return[2,null];o=(0,xe.s)(n.state.doc,r);try{a=n.state.wordAt(r)}catch(d){return[2,null]}if(t){if(t.from===(null===a||void 0===a?void 0:a.from)&&t.to===(null===a||void 0===a?void 0:a.to))return[2,null];e.notify.cancelRequest(t.id)}return l=e.generateId(),t={id:l,from:null===a||void 0===a?void 0:a.from,to:null===a||void 0===a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:return c=u.sent(),t=null,"error"in c?[2,null]:null===(s=c.result)?[2,null]:[2,Dn({hover:s,offset:r,state:n.state})]}}))}));return function(e,t){return n.apply(this,arguments)}}(),{hideOn:function(e){return!e.annotation(q.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select"))},hoverTime:0});return[n,j.tk.domEventObservers({mousedown:function(e,t){(0,$e.Z)(e.target,HTMLElement)&&e.target.matches(".cm-tooltip *")||(0,j.Dm)(t.state)&&t.dispatch({effects:j.E8})},scroll:function(e,t){(0,j.Dm)(t.state)&&t.dispatch({effects:j.E8})}})]}var _n,Bn=n(14081),Gn=n(54457),Pn=n(46861),An=n(52544),Nn=n(68912),Un=n(27773);function Ln(e){var t=e.matchesMap,n=e.fileToContents,r=e.type,i=e.onClose,o=e.jumpToPosition,l=Object.keys(t);if(0===l.length){var c=r===_n.REFERENCES?"No references found":"No definitions found";return(0,a.tZ)(Se.xv,{color:"dimmer",css:[C.l0.pl(8),C.l0.py(8)],multiline:!1,children:c})}return(0,a.tZ)(x.G,{children:l.map((function(e){var r=t[e],c=n[e],s=(0,Bn.Z)(r,c);return(0,a.tZ)(x.G,{css:[C.l0.p(4)],children:(0,a.tZ)(Gn.V,{path:e,extensions:[s],doc:c,numMatches:r.length,initiallyExpanded:1===l.length,onNavigateToCode:function(t){if(null!==t)o({path:e,line:t.line+1,col:t.character});else{var n=(0,g.Z)(r,1)[0],a=c.lineAt(n.from),l=n.from-a.from;o({path:e,line:a.number,col:l})}i()}})},e)}))})}function On(e){var t=e.files,n=e.onClose,i=e.references,l=e.definitions,c=e.currentFile,s=e.currentFileContents,u=e.jumpToPosition,d=function(e,t){if(!h)throw new Error("Expected LSP Client");var n=h.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;n in t||(t[n]=[]);var a=v[n],l=a.line(i.line+1),c=a.line(o.line+1);t[n].push({from:l.from+i.character,to:c.from+o.character})},f=(0,se.Z)().fs,h=(0,me.Z)(c),p=(0,Pn.Z)(n,[]),m=(0,g.Z)(b.useState((0,qe.Z)({},c,q.xv.of(s.split("\n")))),2),v=m[0],y=m[1];b.useEffect((function(){if(t.length){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return n=(0,Ze.Z)((function(){var n;return(0,be.__generator)(this,(function(i){switch(i.label){case 0:return n={},[4,Promise.all(t.map(function(){var e=(0,Ze.Z)((function(e){var t;return(0,be.__generator)(this,(function(r){switch(r.label){case 0:return[4,f.readFile(e)];case 1:if((t=r.sent()).error)throw new Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(t.error));return n[e]=q.xv.of(t.content.toString().split("\n")),[2]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return i.sent(),e?[2]:(y((function(e){return(0,r.Z)({},e,n)})),[2])}}))})),n.apply(this,arguments)}}),[f,t]);var Z=(0,o.Z)(i).concat((0,o.Z)(l));if(!h||Z.some((function(e){return!(h.documentUriToPath(e.uri)in v)})))return(0,a.tZ)(x.G,{style:{width:C.TV.space128,height:C.TV.space128,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.tZ)(Un.Z,{size:32})});var w={},k={};return i.forEach((function(e){d(e,w)})),l.forEach((function(e){d(e,k)})),(0,a.BX)(x.G,{innerRef:p,css:[C.l0.minWidth("375px"),C.l0.maxWidth("500px"),C.l0.pt(4),C.l0.maxHeight("100%"),{overflowY:"scroll"}],children:[(0,a.tZ)(x.G,{css:{borderBottom:"1px solid var(--background-highest)"},children:(0,a.BX)(x.G,{css:[C.l0.p(4)],children:[(0,a.BX)(x.G,{css:[C.l0.flex.row,C.l0.justify.spaceBetween,C.l0.align.center,C.l0.pr(4)],children:[(0,a.tZ)(Se.h4,{level:2,variant:"subheadDefault",css:[C.l0.p(4),C.l0.pl(8)],children:"Definitions"}),(0,a.tZ)(An.Z,{filled:!1,border:!1,onClick:n,children:(0,a.tZ)(Nn.Z,{})})]}),(0,a.tZ)(Ln,{matchesMap:k,fileToContents:v,type:_n.DEFINITION,onClose:n,currentFile:c,jumpToPosition:u})]})}),(0,a.tZ)(x.G,{children:(0,a.BX)(x.G,{css:[C.l0.p(4)],children:[(0,a.tZ)(Se.h4,{level:2,variant:"subheadDefault",css:[C.l0.p(4),C.l0.pl(8)],children:"References"}),(0,a.tZ)(Ln,{matchesMap:w,fileToContents:v,type:_n.REFERENCES,onClose:n,currentFile:c,jumpToPosition:u})]})})]})}!function(e){e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES"}(_n||(_n={}));var Xn=n(98532),Mn=n(28984);function Fn(e){return null===e?null:Array.isArray(e)?e.map((function(e){return"targetSelectionRange"in e?(0,r.Z)({uri:e.targetUri,range:e.targetSelectionRange},e):e})):[e]}var Wn=q.Py.define();function Hn(e){var t=e.lspClient,n=e.path,l=e.openFile;if(!l)return[];var c=ve(t);if(!c.isFindDefinitionSupported&&!c.isFindReferencesSupported)return[];var s=q.Py.define(),u=q.Py.define(),d=j.tk.updateListener.of(function(){var e=(0,Ze.Z)((function(e){var r,i,a,l,d,f,h,p,m,v,y,Z,b,w,x,C,k,S,E,T,R,D,I,_,B,G,P,A,N,U,L;return(0,be.__generator)(this,(function(O){switch(O.label){case 0:r=null,i=!0,a=!1,l=void 0;try{for(d=e.transactions[Symbol.iterator]();!(i=(f=d.next()).done);i=!0){h=f.value,p=!0,m=!1,v=void 0;try{for(y=h.effects[Symbol.iterator]();!(p=(Z=y.next()).done);p=!0)(b=Z.value).is(Wn)&&(r=b.value)}catch(X){m=!0,v=X}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}}}catch(X){a=!0,l=X}finally{try{i||null==d.return||d.return()}finally{if(a)throw l}}return r?(c=ve(t),w=e.state.doc,x=(0,xe.s)(w,r),C=Promise.all([c.isFindReferencesSupported?t.request.findReferences(n,x,{includeDeclaration:!1}):{result:null},c.isFindDefinitionSupported?t.request.findDefinitions(n,x):{result:null}]),(0,Mn.SC)(e.view,C),[4,C]):[2];case 1:if(k=g.Z.apply(void 0,[O.sent(),2]),S=k[0],E=k[1],"error"in S)throw new Error("Something went wrong fetching references: ".concat(S.error.message));if("error"in E)throw new Error("Something went wrong fetching definition: ".concat(E.error.message));return T=S.result,R=E.result,D=Fn(R),I=T&&T.length>0,_=D&&D.length>0,I||_?(B=[],G=[],T&&T.length>0&&(P=B).push.apply(P,(0,o.Z)(T)),D&&D.length>0&&(A=G).push.apply(A,(0,o.Z)(D)),N=(0,o.Z)(B).concat((0,o.Z)(G)).map((function(e){return t.documentUriToPath(e.uri)})).filter((function(e){return e!==n})),U=(0,o.Z)(new Set(N)),L=w.toJSON().join("\n"),e.view.dispatch({effects:s.of({references:B,definitions:G,currentFile:n,currentFileContents:L,files:U})}),[2]):((0,Xn.J)(e.view,{message:"No references found",offset:r}),e.view.dispatch({effects:u.of(null)}),[2])}}))}));return function(t){return e.apply(this,arguments)}}()),f=q.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.is(s)&&(n=c.value),c.is(u)&&(n=null)}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n},provide:function(e){return j.hJ.compute([e],(function(t){var o=t.field(e);if(!o)return null;var c=t.selection.asSingle().main;return{pos:c.from,end:c.to,create:function(e){var t=(0,Be.VV)((0,a.tZ)("div",{children:(0,a.tZ)(On,(0,i.Z)((0,r.Z)({},o),{onClose:function(){e.dispatch({effects:u.of(null)})},jumpToPosition:function(t){if(l)if(t.path===n){var r=t.line,i=t.col;pe({view:e,line:r,col:i}),e.focus()}else l(t)}}))}));return t.classList.add("cm-lsp-tooltip"),t.classList.add("replit-tooltip"),t.style.padding="0",{dom:t}}}}))}});return[d,f]}var Vn=n(15436),zn=n(95141),jn=n(16296),qn=n(44385),$n=n(95161),Yn=n(60773),Kn=(0,en.X)({headerContainer:[C.l0.flex.row,C.l0.align.center,C.l0.pr(4)],bodyContainer:[C.l0.justify.center,C.l0.align.center,C.l0.p(8),C.l0.pt(4)],input:[C.l0.p(4),C.l0.borderRadius(4)],wrapper:[C.l0.flex.column,C.l0.justify.center,C.l0.borderRadius(4),C.l0.shadow(2),C.l0.width(200)]});function Qn(e){var t=(0,Pn.Z)(e.onClose,[e.onClose]),n=(0,b.useRef)(null),r=(0,Vn.Y)(e.currentValue,(function(t){return t?t===e.currentValue?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}}));return(0,a.tZ)(Yn.ZP,{children:(0,a.tZ)(x.G,{"data-testid":"RenameInput",innerRef:t,css:Kn.wrapper,onKeyDown:function(t){"Escape"===t.key&&e.onClose(),t.stopPropagation()},children:(0,a.BX)("form",{onSubmit:function(t){t.preventDefault(),r.error||e.onRename(r.value)},children:[(0,a.BX)(x.G,{css:Kn.headerContainer,children:[(0,a.tZ)(Se.h4,{level:2,variant:"subheadDefault",css:[C.l0.p(4),C.l0.pl(8)],children:"Rename"}),(0,a.tZ)(Se.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:[C.l0.maxWidth(100),C.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],children:e.currentValue}),(0,a.tZ)(jn.hU,{alt:"Close rename input",tooltipHidden:!0,onClick:e.onClose,css:[C.l0.position.absolute,C.l0.top(4),C.l0.right(4)],children:(0,a.tZ)(Nn.Z,{})})]}),(0,a.tZ)(x.G,{css:Kn.bodyContainer,children:(0,a.tZ)($n.ZP,{css:Kn.input,name:"rename",ref:n,onBlur:r.handleBlur,onChange:function(e){r.setValue(e.target.value)},value:r.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:r.error?[{message:r.error.message,state:"error"}]:void 0})}),(0,a.tZ)(x.G,{css:[C.l0.flex.rowReverse,C.l0.p(8),C.l0.pt(0)],children:(0,a.tZ)(zn.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,a.tZ)(qn.Z,{}),disabled:Boolean(r.error)||!r.value})})]})})})}var Jn=n(75356),er=q.Py.define(),tr=q.Py.define();function nr(e){var t,n;return null!==(n=null===(t=e.facet(Tn))||void 0===t?void 0:t.isRenameSupported)&&void 0!==n&&n}var rr=q.QQ.define({create:function(){return null},update:function(e,t){if(null!==e&&(e=t.changes.mapPos(e,-1,q.gc.TrackDel)),(0,ke.j)(t,er,(function(t){e=t.value})),e){if(e>t.state.doc.length)return null;if(!t.state.wordAt(e))return null;if(!nr(t.state))return null}return e},provide:function(e){var t=new Be.Jf(Qn),n=function(t){var n=t.field(e);if(null==n)throw Error("Expected non-null offset");var r=t.wordAt(n);if(!r)throw new Error("Expected non-null range");return t.sliceDoc(r.from,r.to)},o=function(o){var a=o.state.field(e);if(null==a)throw Error("Expected non-null offset");if(!o.state.wordAt(a))throw new Error("Expected non-null range");var l=t.create({currentValue:n(o.state),onClose:function(){o.dispatch({effects:er.of(null)}),o.focus()},onRename:function(e){o.dispatch({effects:tr.of(e)})}});l.classList.add("replit-tooltip"),l.style.padding="0";return{dom:l,update:function(e){t.update(l,(function(t){var o=n(e.state);return o!==t.currentValue?(0,i.Z)((0,r.Z)({},t),{currentValue:o}):t}))}}};return j.hJ.from(e,(function(e){return null===e?null:{pos:e,create:o}}))}});function ir(e,t){return j.lg.define((function(n){var r=null;return{onRename:function(i){return(0,Ze.Z)((function(){var o,a,l,c;return(0,be.__generator)(this,(function(s){switch(s.label){case 0:if(!nr(n.state))return[2,this.cancelInflightRequest()];if(this.cancelInflightRequest(),!(o=n.state.facet(dn.Yp)))throw new Error("Expected non-null file path");return(a=n.state.field(rr))?(r=t.generateId(),[4,t.request.rename(o,(0,xe.s)(n.state.doc,a),i,{id:r,tap:function(e){return(0,Mn.SC)(n,e)}})]):[2];case 1:if((l=s.sent()).cancelled)return[2];if("error"in l)throw new Error("Something went wrong renaming ".concat(l.error.message));return(c=l.result)?((0,Jn.w)({edit:c,fs:e,client:t}),n.dispatch({effects:er.of(null)}),[2]):[2]}}))})).apply(this)},cancelInflightRequest:function(){r&&(t.notify.cancelRequest(r),r=null)},update:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.effects[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;f.is(tr)&&this.onRename(f.value)}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(h){n=!0,r=h}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},destroy:function(){this.cancelInflightRequest()}}}))}var or=n(50048),ar=n(64127),lr=n(14951),cr=n(15621);function sr(e){var t=e.containerProps,n=e.codeActions,o=e.onExecuted,l=e.path,c=(0,se.Z)().fs,s=(0,me.Z)(l);return n.length&&s?(0,a.tZ)(ar.XZ,(0,i.Z)((0,r.Z)({},t),{children:n.map((function(e,t){return(0,a.tZ)(lr.Z,{onClick:function(t){t.stopPropagation(),(0,cr.S)(e,s,c),o()},children:(0,a.tZ)(ar.sN,{children:(0,a.tZ)(Se.xv,{multiline:!1,children:e.title})})},t)}))})):null}var ur=n(85919);var dr=new Map;var fr="undefined"===typeof WeakRef?function(e){return{deref:function(){return e}}}:WeakRef,hr=n(48818);function pr(e){var t=e.path,n=e.range,r=e.lspClient;n=function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify)(e),r=null===(t=dr.get(n))||void 0===t?void 0:t.deref();return null!=r?r:(dr.set(n,new fr(e)),e)}(n);var i=(0,hr.Z)(),a=b.useRef(null),l=(0,g.Z)(function(e,t){var n=b.useRef(),r=(0,ur.Z)((function(){return R()((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];e.apply(void 0,(0,o.Z)(r)).then((function(e){var t;null===(t=n.current)||void 0===t||t.call(n,e)}))}),t)}),[e,t]);return[r,b.useCallback((function(e){n.current=e}),[])]}(b.useCallback(function(){var e=(0,Ze.Z)((function(e,t){return(0,be.__generator)(this,(function(n){return r.isOpen(e)?(a.current={requestPath:e,requestRange:t},[2,r.request.codeActions(e,t)]):[2,{result:null}]}))}));return function(t,n){return e.apply(this,arguments)}}(),[r]),1e3),2),c=l[0],s=l[1],u=(0,g.Z)(b.useState([]),2),d=u[0],f=u[1],h=b.useCallback((0,Ze.Z)((function(){return(0,be.__generator)(this,(function(e){return r&&t?(s((function(e){i.current&&("error"in e||null===e.result||0===e.result.length?f([]):f(e.result))})),c(t,n),[2]):[2]}))})),[r,t,c,n,s,i]);return b.useEffect((function(){return h(),function(){c.cancel()}}),[h,c]),[d,h]}var mr=n(50968),vr=q.Py.define();function gr(e){var t=e.state,n=t.doc,r=t.selection.main,i=r.from,o=r.to;return{start:(0,xe.s)(n,i),end:(0,xe.s)(n,o)}}var yr=function(e){var t=e.view,n=e.path,r=e.lspClient,i=e.visible,o=e.coords,l=(0,g.Z)(b.useState({x:0,y:0}),2),c=l[0],s=l[1],u=(0,g.Z)(pr({path:n,lspClient:r,range:gr(t)}),2),d=u[0],f=u[1],h=(0,W.Z)(i),p=(0,W.Z)(o),m=b.useCallback((function(){i.current=!1,t.focus()}),[t,i]);if(b.useEffect((function(){p&&s({x:p.left,y:p.top})}),[p]),b.useEffect((function(){var e=function(e){"Escape"===e.key&&m()};if(h)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[m,h]),!d.length)return null;var v=d.some((function(e){return"kind"in e&&"quickfix"===e.kind}))?"#75bdff":"#ffcc00";return(0,a.BX)("div",{role:"presentation",onMouseDown:function(e){h||(e.stopPropagation(),e.preventDefault(),s({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY}),i.current=!h)},children:[(0,a.tZ)(or.Z,{css:{fill:v,color:v,cursor:"pointer"},className:"lightbulb"}),h?(0,a.tZ)(sr,{path:n,containerProps:{view:t,verticalOffset:ar.R$*d.length,closeMenu:m,width:"auto",coords:c},onExecuted:function(){m(),f()},codeActions:d}):null]})},Zr=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e,r){var i;return(0,H.Z)(this,n),(i=t.call(this)).lspClient=e,i.path=r,i.visible=(0,mr.u)(!1),i.coords=(0,mr.u)(null),i.container=b.createRef(),i}var r=n.prototype;return r.toDOM=function(e){this.visible.current=!1;var t=(0,Be.VV)((0,a.tZ)("div",{children:(0,a.tZ)("span",{ref:this.container,children:(0,a.tZ)(yr,{lspClient:this.lspClient,path:this.path,view:e,visible:this.visible,coords:this.coords})})}));return t.setAttribute("aria-hidden","true"),t.className="cm-code-action",t},r.contains=function(e){var t;return(null===(t=this.container.current)||void 0===t?void 0:t.contains(e))||!1},r.updateDOM=function(){return!0},n}(j.l9);var br=function(e,t){return j.lg.fromClass(function(){"use strict";function n(r){(0,H.Z)(this,n),this.widget=new Zr(e,t),this.decoration=j.p.widget({widget:this.widget,side:0}),this.updateDecorations(r)}var r=n.prototype;return r.update=function(e){var t=this;(e.docChanged||e.selectionSet)&&this.updateDecorations(e.view),(0,ke.j)(e,vr,(function(n){var r=n.value;t.widget.visible.current=!0,t.widget.coords.current=r,t.updateDecorations(e.view)}))},r.updateDecorations=function(e){var t,n=e.state,r=n.doc,i=n.selection,o=r.lineAt(i.main.from);this.widget.visible.current||0!==r.length?(t=function(e){return/^( {2}|\u3000|\t)/.test(e)}(o.text)||1===o.number&&1===r.lines?o.from:1===o.number?Math.min(r.length,o.to+1):r.lineAt(o.from-1).from,this.decorations=j.p.set([this.decoration.range(t)])):this.decorations=j.p.none},n}(),{decorations:function(e){return e.decorations}})},wr=j.tk.baseTheme({".cm-code-action":{position:"absolute",zIndex:101,top:"calc(50% - 8px)",left:"0",height:"16px",width:"16px",background:"transparent",fontFamily:C.TV.fontFamilyDefault,"& svg":{display:"block"}}});var xr,Cr=n(88149),kr=n(65812),Sr="cm-lsp-definition-target-word",Er=j.tk.theme((0,qe.Z)({},".".concat(Sr," span"),{backgroundColor:C.TV.backgroundHigher,color:C.TV.accentPrimaryStrongest,cursor:"pointer",textDecoration:"underline"})),Tr=j.p.mark({class:Sr}),Rr=function(){"use strict";function e(t,n){(0,H.Z)(this,e),this.range=t,this.id=n}var t=e.prototype;return t.update=function(e){this.range=this.range.map(e)},t.eq=function(e){var t=e.range;return this.range.from<=t.to&&t.from<=this.range.to},t.toResult=function(e,t){if(!t||Array.isArray(t)&&0===t.length)return{request:this,decs:j.p.none};var n=this.range.from,r=this.range.to;if(Array.isArray(t)&&t.length>0&&"originSelectionRange"in t[0]){var i=t[0].originSelectionRange;i&&(n=(0,xe.R)(e.state.doc,i.start),r=(0,xe.R)(e.state.doc,i.end))}return n===r?{request:this,decs:j.p.none}:{request:this,decs:j.p.set(Tr.range(n,r))}},e}(),Dr=q.Py.define(),Ir=q.QQ.define({create:function(){return null},update:function(e,t){t.docChanged&&(e=null);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.is(Dr)&&(e=l.value)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(e){return j.tk.decorations.from(e,(function(e){return null!==(xr=null===e||void 0===e?void 0:e.decs)&&void 0!==xr?xr:j.p.none}))}}),_r=function(){"use strict";function e(t,n){(0,H.Z)(this,e),this.view=t,this.client=n,this.destroyed=!1,this.path=t.state.facet(dn.Yp)}var t=e.prototype;return t.update=function(e){(0,kr.a)(e,dn.Yp)&&(this.path=e.state.facet(dn.Yp)),this.inflight&&this.inflight.update(e.changes)},t.destroy=function(){this.destroyed=!0,this.clear()},t.clear=function(){this.view.state.field(Ir,!1)&&this.view.dispatch({effects:Dr.of(null)}),this.inflight&&(this.client.notify.cancelRequest(this.inflight.id),this.inflight=void 0)},t.event=function(e){var t=this;return(0,Ze.Z)((function(){var n,r,i,o,a,l,c,s;return(0,be.__generator)(this,(function(u){switch(u.label){case 0:if(e.mouse&&(t.mouse=e.mouse),!(null===(n=t.view.state.facet(Tn))||void 0===n?void 0:n.isFindDefinitionSupported))return[2,t.clear()];if(!e.key||!t.mouse)return[2,t.clear()];if(null===(r=t.view.posAtCoords(t.mouse)))return[2,t.clear()];if(!(i=t.view.state.wordAt(r))||i.from===i.to)return[2,t.clear()];if(o=t.client.generateId(),a=new Rr(i,o),(l=t.view.state.field(Ir,!1))&&a.eq(l.request))return[2];if(t.inflight&&a.eq(t.inflight))return[2];if(void 0!==t.inflight&&t.client.notify.cancelRequest(t.inflight.id),!t.path)throw new Error("Expected path");return t.inflight=a,[4,t.client.request.findDefinitions(t.path,(0,xe.s)(t.view.state.doc,a.range.from),{id:a.id})];case 1:return c=u.sent(),t.destroyed?[2]:!1!==c.cancelled?[2]:t.inflight&&t.inflight.id===a.id?(s=a.toResult(t.view,c.result),t.inflight=void 0,t.view.dispatch({effects:Dr.of(s)}),[2]):[2]}}))}))()},e}();var Br={current:null};function Gr(e){return Pr.apply(this,arguments)}function Pr(){return Pr=(0,Ze.Z)((function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,y,Z;return(0,be.__generator)(this,(function(b){switch(b.label){case 0:return t=e.offset,n=e.lspClient,r=e.openFile,i=e.view,o=e.newPane,(a=i.state.facet(dn.Yp))?ve(n).isFindDefinitionSupported?(Br.current&&n.notify.cancelRequest(Br.current),Br.current=n.generateId(),l=(0,xe.s)(i.state.doc,t),c=setTimeout((function(){var e;Br.current&&n.notify.cancelRequest(Br.current);var r=null!==(e=Kt(i.state))&&void 0!==e?e:"unknown";tt.kg.warn("Timed out looking for definition",{filePath:a,offset:t,language:r}),(0,Xn.J)(i,{message:"Timed out looking for your definition. Try again",offset:t})}),12e3),[4,n.request.findDefinitions(a,l,{id:Br.current,tap:function(e){return(0,Mn.SC)(i,e)}})]):[2]:[2];case 1:if(s=b.sent(),clearTimeout(c),Br.current=null,"error"in s)throw new Error("Something went wrong fetching definition location: ".concat(s.error.message));return s.cancelled?[2]:(u=Fn(s.result))&&0!==u.length?(d=(0,g.Z)(u,1),f=d[0],h=f.uri,p=f.range,m=p.start,v=n.documentUriToPath(h),y=m.line+1,Z=m.character,v!==a||o?(r({path:v,line:y,col:Z,newPane:o,newPaneEdge:"right"}),[2]):(pe({view:i,line:y,col:Z}),i.focus(),[2])):((0,Xn.J)(i,{message:"No definition found",offset:t}),[2])}}))})),Pr.apply(this,arguments)}function Ar(e){var t=e.lspClient,n=e.openFile;return ve(t).isFindDefinitionSupported&&n?j.lg.define((function(){return{}}),{eventHandlers:{click:function(e,r){var i=r.state.selection.main;if(i.from!==i.to)return!1;if((0,Cr.j)(e)){var o=e.clientX,a=e.clientY,l=r.posAtCoords({x:o,y:a});if(null!==l){var c=e.altKey;return Gr({offset:l,lspClient:t,openFile:n,view:r,newPane:c}),!1}}}},provide:function(){return function(e){var t=e.client;return[Er,Ir,j.lg.define((function(e){return new _r(e,t)}),{eventHandlers:{click:function(){this.clear()},keyup:function(e){(0,Cr.j)(e)&&this.clear()},keydown:function(e){e.key===(D.V5?"Meta":"Control")?this.event({key:!0}):this.clear()},mousemove:function(e,t){if(0!==e.buttons&&!t.state.selection.main.empty)return this.clear();var n=(0,Cr.j)(e);this.event({mouse:{x:e.clientX,y:e.clientY},key:n})}}})]}({client:t})}}):[]}var Nr=n(22488);function Ur(e,t){return ve(t).isTextDocumentSyncSupported?j.lg.fromClass(function(){"use strict";function n(e){(0,H.Z)(this,n),this.dispose=this.listen(e.state.facet(dn.Yp))}var r=n.prototype;return r.update=function(e){(0,kr.a)(e,dn.Yp)&&(this.dispose=this.listen(e.state.facet(dn.Yp)))},r.destroy=function(){this.dispose&&this.dispose()},r.listen=function(n){if(this.dispose&&this.dispose(),n)return e.watchTextFile(n,{onFlush:function(){t.isOpen(n)&&t.notify.didSave(n)}})},n}()):[]}var Lr=n(81202),Or=n.n(Lr),Xr=n(12290);function Mr(e,t,n){var r=n.find((function(n){var r=n.range;return(0,xe.R)(e,r.end)>=t&&(0,xe.R)(e,r.start)<=t}));return null==r?[]:r.children?[r].concat(Mr(e,t,r.children)):[r]}var Fr=q.Py.define(),Wr=q.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,ke.j)(t,Fr,(function(e){n=e.value})),n}});function Hr(e,t,n){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,Ze.Z)((function(e,t,n){var r,i,o,a,l,c,s,u,d;return(0,be.__generator)(this,(function(f){switch(f.label){case 0:return[4,e.request.documentSymbol(t,{signal:n})];case 1:if(!(r=f.sent())||r.cancelled)return[2,null];if(!(i="result"in r&&!r.cancelled?r.result:null))return[2,null];o=[],a=!0,l=!1,c=void 0;try{for(s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)(d=u.value)&&"range"in d&&o.push(d)}catch(h){l=!0,c=h}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return[2,o.length?o:null]}}))}))).apply(this,arguments)}function zr(e){if("Debounced function cancelled"!==e.message)throw e}var jr=q.QQ.define({create:function(){return[]},update:function(e,t){if(!(0,kr.a)(t,Wr,"selection"))return e;var n=t.state.field(Wr);return n?Mr(t.state.doc,t.state.selection.main.head,n):[]},compare:Or()});function qr(e){if(!e)return null;if(!ve(e).isDocumentSymbolSupported)return null;var t=j.lg.fromClass(function(){"use strict";function t(n){(0,H.Z)(this,t),this.abortController=null;var r=this;this.getSymbolMap=(0,Xr.Z)((0,Ze.Z)((function(){var t,i;return(0,be.__generator)(this,(function(o){switch(o.label){case 0:return(t=n.state.facet(dn.Yp))?(r.abortController=new AbortController,[4,Hr(e,t,r.abortController.signal)]):[2];case 1:return i=o.sent(),n.dispatch({effects:Fr.of(i)}),[2]}}))})),{wait:200}),this.getSymbolMap().catch(zr)}var n=t.prototype;return n.update=function(e){var t;e.docChanged&&(null===(t=this.abortController)||void 0===t||t.abort(),this.getSymbolMap().catch(zr))},n.destroy=function(){var e;null===(e=this.abortController)||void 0===e||e.abort(),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()},t}());return[Wr,jr,t]}var $r=new rt.j((function(e,t,n,o,a,l){if(!t)return[];if(!o)return[];var c=[ze({lspClient:t,path:n}),ft({lspClient:t,path:n,askGhostwriter:l}),Ur(e,t)],s=qr(t);return s&&c.push(s),(0,Nr.isMobile)()||c.push(yn(t),function(e){var t=e.lspClient,n=e.path,o=function(e,t){var n=e.state.field(Ge.state,!1);return"active"!==(0,we.LR)(e.state)&&null!=n&&("navigate"!==t||n.signatures.length>1)};if(!ve(t).isSignatureHelpSupported)return[];var a={current:null};function l(e,t){return c.apply(this,arguments)}function c(){return c=(0,Ze.Z)((function(e,r){var i,o,l,c,u,d,f;return(0,be.__generator)(this,(function(h){switch(h.label){case 0:return(c=(null===(i=t.getServerCapabilities())||void 0===i||null===(o=i.signatureHelpProvider)||void 0===o?void 0:o.triggerCharacters)||[])?(u=e.field(s,!1),d=e.field(Ae,!1),u||null!=d&&c.includes(d)?[4,Le(e,r,t,n,a)]:[2,null]):[2,null];case 1:return(null===(f=h.sent())||void 0===f||null===(l=f.signatures)||void 0===l?void 0:l.length)?[2,f]:[2,null]}}))})),c.apply(this,arguments)}var s=q.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=(0,i.Z)((0,r.Z)({},e),{pos:t.newSelection.main.from})),(0,ke.j)(t,Ge.effect,(function(n){var r=n.value;e=r?{pos:t.newSelection.main.from,help:r,index:0}:null})),(0,ke.j)(t,Pe,(function(t){var n=t.value;if(e){var o=e.help.signatures.length,a=(o+e.index+n)%o;e=a>=e.help.signatures.length||a<0?null:(0,i.Z)((0,r.Z)({},e),{index:a})}})),e)},provide:function(e){var t=function(t){var n=t.state.field(e);if(!n)throw new Error("expected nonnull field");var r=Ne.create({help:n.help,index:n.index});return{dom:r,update:function(t){Ne.update(r,(function(r){var i=t.state.field(e);return i&&i!==n?{help:i.help,index:i.index}:r}))}}};return j.hJ.compute([e],(function(n){var r=n.field(e);return r?{pos:r.pos,create:t,above:!0}:null}))}}),u=j.lg.define((function(){var e=R()(function(){var e=(0,Ze.Z)((function(e){var t,n,r;return(0,be.__generator)(this,(function(i){switch(i.label){case 0:return(t=e.state.selection.main).empty?(n=e.state.field(Ge.state,!1),[4,l(e.state,t.from)]):[3,2];case 1:(r=i.sent())&&!n&&(0,we._B)(e),e.dispatch({effects:Ge.effect.of(r)}),i.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),0);return{update:function(t){t.transactions.some((function(e){return e.selection}))&&t.state.selection.main.empty&&e(t.view)}}})),d=function(e){return function(t){return!!o(t,"navigate")&&(t.dispatch({effects:Pe.of(e)}),!0)}},f=[{key:"ArrowDown",run:d(1)},{key:"ArrowUp",run:d(-1)},{key:"Escape",run:function(e){return!!o(e,"dismiss")&&(e.dispatch({effects:Ge.effect.of(null)}),!0)}}];return[s,Ge.state,Ae,u,q.Wl.high(j.$f.of(f))]}({lspClient:t,path:n}),In(t),function(e,t){return ve(e).isCodeActionsSupported?[wr,br(e,t)]:[]}(t,n),Ar({lspClient:t,openFile:a}),Hn({lspClient:t,path:n,openFile:a}),function(e,t){return[rr,ir(e,t)]}(e,t)),c})),Yr=n(24430),Kr=n(6837);var Qr=n(77870),Jr=n(85521),ei=new rt.j((function(e,t,n,r,i,o){if(!t)return[];if(!ve(t).isFormatSupported)return[];var a=Qr.Lf.of({format:function(){var i=(0,Ze.Z)((function(i){return(0,be.__generator)(this,(function(o){return[2,t.request.format(e,{insertSpaces:n,tabSize:r}).then((function(e){return"error"in e||e.cancelled||!e.result?{error:!0}:{result:(0,Jr.Z)(e.result,i.toString())}}))]}))}));return function(e){return i.apply(this,arguments)}}(),logName:"lsp_format",onError:function(){i("Sorry, formatting ".concat(e," failed"),1500)},onSuccess:function(){o("Formatted ".concat(e," successfully"),1500)}});return q.Wl.high(a)})),ti=n(25404);function ni(e){var t=e.view,n=e.filePath,r=e.isLoading,i=e.openFile,o=(0,ye.Z)().preferences,a=o.codeIntelligence,l=(0,se.Z)().fs,c=(0,me.Z)(n),s=ge(c),u=function(){var e=(0,Yr.ql)(),t=(0,Kr.OT)();return(0,ur.Z)((function(){return function(n){t(),e({chatMessage:n})}}),[t,e])}(),d=(0,ti.Z)(),f=d.showError,h=d.showConfirm,p=r||!a||!t||!c||!s||!c.isSupportedFile(n),m=(0,de.Z)({view:t}),v=Rn.use(s),g=ei.use(n,c,o.indentIsSpaces,o.indentSize,f,h),y=$r.use(l,c,n,s,i,u);b.useEffect((function(){if(!p)return t.dispatch({effects:m.reconfigure([v,y,g])}),function(){t.dispatch({effects:m.reconfigure([[j.tk.updateListener.of((function(e){e.docChanged&&(0,Je.KS)(e.state)>0&&e.view.dispatch(ht(ut.of([]),pt(e.startState)))}))]])})};t&&!a&&t.dispatch(pt(t.state))}),[v,y,g,a,m,p,t])}var ri=n(76709),ii=n(4561),oi=n(9558),ai=n(21130),li=q.q6.define();var ci,si=n(716),ui=n(12045),di="cm-multiplayer-selection-green",fi="cm-multiplayer-selection-red",hi="cm-multiplayer-selection-blue",pi="cm-multiplayer-selection-gold",mi="cm-multiplayer-selection-purple",vi="cm-multiplayer-selection-teal",gi="cm-multiplayer-selection-pink",yi=j.tk.theme((ci={},(0,qe.Z)(ci,".".concat(di),{background:"rgba(27, 196, 125, 0.2)"}),(0,qe.Z)(ci,".".concat(fi),{background:"rgba(239, 85, 51, 0.2)"}),(0,qe.Z)(ci,".".concat(hi),{background:"rgba(24, 160, 251, 0.2)"}),(0,qe.Z)(ci,".".concat(pi),{background:"rgba(255, 199, 0, 1)"}),(0,qe.Z)(ci,".".concat(mi),{background:"rgba(144, 124, 255, 0.2)"}),(0,qe.Z)(ci,".".concat(vi),{background:"rgba(0, 181, 206, 0.2)"}),(0,qe.Z)(ci,".".concat(gi),{background:"rgba(238, 70, 211, 0.2)"}),ci)),Zi={"#1BC47D":di,"#EF5533":fi,"#18A0FB":hi,"#FFC700":pi,"#907CFF":mi,"#00B5CE":vi,"#EE46D3":gi};var bi=q.Py.define(),wi=q.Py.define(),xi=q.Py.define(),Ci=q.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n=function(e){return t.changes.mapPos(Math.min(t.changes.length,e))},o={},a=!0,l=!1,c=void 0;try{for(var s,u=Object.values(e)[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;o[d.id]=(0,i.Z)((0,r.Z)({},d),{position:n(d.position),selectionStart:n(d.selectionStart),selectionEnd:n(d.selectionEnd)})}}catch(E){l=!0,c=E}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}e=o}var f=!0,h=!1,p=void 0;try{for(var m,v=t.effects[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var y=m.value;if(y.is(ui.R)&&(e=(0,r.Z)({},e)),y.is(bi)&&y.value.position<=t.newDoc.length&&((e=(0,r.Z)({},e))[y.value.id]=(0,r.Z)({},y.value)),y.is(wi)&&(e=(0,r.Z)({},e),y.is(wi)&&delete e[y.value]),y.is(xi)){e=(0,r.Z)({},e);var Z=!0,b=!1,w=void 0;try{for(var x,C=Object.entries(e)[Symbol.iterator]();!(Z=(x=C.next()).done);Z=!0){var k=(0,g.Z)(x.value,2),S=k[0];k[1].username===y.value&&delete e[S]}}catch(E){b=!0,w=E}finally{try{Z||null==C.return||C.return()}finally{if(b)throw w}}}}}catch(E){h=!0,p=E}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}return e},provide:function(e){return[yi,q.Wl.high((0,j.EY)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(t){return(0,kr.a)(t,e)},markers:function(t){var n=t.state.field(e,!1);if(!n)return[];var r=[],i=!0,a=!1,l=void 0;try{for(var c,s=Object.values(n)[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u,d=c.value,f=d.selectionStart,h=d.selectionEnd,p=d.color.selection;if(f!==h){var m=q.jT.range(f,h);(u=r).push.apply(u,(0,o.Z)(j.dc.forRange(t,p,m)))}}}catch(v){a=!0,l=v}finally{try{i||null==s.return||s.return()}finally{if(a)throw l}}return r}}))]}});function ki(e){return j.tk.updateListener.of((function(t){var n=t.state.selection;n!==t.startState.selection&&(t.transactions.every((function(e){return e.annotation(q.YW.remote)}))||e(n.ranges.map((function(e){var n=t.state.doc.lineAt(e.head);return{position:e.head,line:n.number,column:e.head-n.from+1,selectionStart:e.from,selectionEnd:e.to}})),n.mainIndex))}))}function Si(e){var t=e.view,n=e.presence,o=e.fs,a=e.filePath,l=(0,b.useState)(null),c=l[0],s=l[1],u=(0,si.Z)({presence:n}),d=(0,b.useRef)({}),f=(0,hr.Z)();(0,b.useEffect)((function(){var e=u.reduce((function(e,t){return t.username&&t.color?(0,i.Z)((0,r.Z)({},e),(0,qe.Z)({},t.username,t.color)):e}),{});d.current=e}),[u]);var h=(0,de.Z)({view:t});return(0,b.useEffect)((function(){if(t){var e=n.onUserLeave((function(e){t.dispatch({effects:xi.of(e.username)})})),r=o.watchTextFile(a,{onReady:function(e){var n=e.updateSelections;t.dispatch({effects:h.reconfigure([Ci,ki((function(e){n(e)}))])}),s(a)},onCursor:function(e){var n=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o,a=n.id,l=n.position,c=n.selectionStart,s=n.selectionEnd,u=r[i];if(u&&a&&"number"===typeof l&&"number"===typeof c&&"number"===typeof s)return bi.of({id:a,username:i,position:l,color:{cursor:u,selection:(o=u,Zi[o]||"")},selectionStart:c,selectionEnd:s})}}({cursor:e,usernameColorsMap:d.current});n&&t.dispatch({effects:n})},onRemoveCursor:function(e){t.dispatch({effects:wi.of(e)})},onError:function(){t.dispatch({effects:h.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:h.reconfigure([])})}});return function(){e(),r(),t.dispatch({effects:h.reconfigure([])}),f.current&&s(null)}}}),[t,a,o,n,h]),{loadedFile:c}}var Ei=n(77463);var Ti=j.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:C.TV.shadow1,borderRadius:C.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function Ri(e){e.style.transform="translate(-10000px, -10000px)"}function Di(e){var t=document.createElement("div");t.textContent=e.username,t.style.backgroundColor=e.color.cursor,t.classList.add("multiplayer-label");var n=document.createElement("div");return n.classList.add("multiplayer-cursor"),n.style.backgroundColor=e.color.cursor,n.style.position=D.gn?"absolute":"fixed",n.appendChild(t),{dom:n,label:t}}var Ii=new Map;var _i=j.lg.define((function(e){var t=function(){s&&(s.disconnect(),a.forEach((function(e){s.observe(e.view.dom)})))},n=function(){if(!Boolean(!i||0===Object.values(i).length)&&(e.inView&&e.requestMeasure(d),l!==e.inView)){if(l=e.inView)return;a.forEach((function(e){Ri(e.view.dom)}))}},r=function(){null===u&&(u=setTimeout((function(){u=null,n()}),50))},i=e.state.field(Ci,!1),a=new Map((i?Object.values(i):[]).map((function(e){return[e.id,{view:Di(e),cursor:e}]}))),l=!0,c=0,s="function"===typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>c-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&r()}),{threshold:[1]}):null;t();var u=null;window.addEventListener("resize",r);var d={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((i?Object.values(i):[]).map((function(t){var n=a.get(t.id),r=n?function(e,t){var n=Ii.get(e);if(n)return n;var r=t.getBoundingClientRect().width;return Ii.set(e,r),r}(t.username,n.view.label):null;return[t.id,{position:e.coordsAtPos(t.position),labelWidth:r}]})))}},write:function(e){a.forEach((function(t,n){var r=e.dimensions.get(n);!function(e){var t=e.cursorView,n=e.position,r=e.labelWidth,i=e.editorRect,o=t.dom,a=t.label;if(n&&r){var l=n.bottom-n.top;if(n.bottom<=i.top+l||n.top+l>=i.bottom||n.right<i.left-.1||n.left>i.right+.1)Ri(o);else{var c=n.left+r-i.right,s="0px";c>0?(s="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(s,", -100%)");var u=D.gn?{x:n.left-i.left+"px",y:n.top-i.top+"px"}:{x:"calc(".concat(n.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(n.top,"px + var(--fixed-position-offset-y))")},d=u.x,f=u.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}}else Ri(o)}({cursorView:t.view,position:(null===r||void 0===r?void 0:r.position)||null,labelWidth:(null===r||void 0===r?void 0:r.labelWidth)||null,editorRect:e.editorRect})}))},key:Math.random().toString()};return{update:function(r){r.transactions.length&&(c=Date.now());var l=r.state.field(Ci,!1);if(l!==r.startState.field(Ci,!1)){var s=new Map,u=new Set;if(l){var d=new Map((0,o.Z)(a.values()).map((function(e){return[e.cursor.id,e.view]})));Object.values(l).forEach((function(t){var n=d.get(t.id);if(n)u.add(n),s.set(t.id,{view:n,cursor:t});else{var r=Di(t);s.set(t.id,{view:r,cursor:t}),e.dom.appendChild(r.dom)}}))}a.forEach((function(e){u.has(e.view)||e.view.dom.remove()})),a=s,i=l,t(),n()}else r.geometryChanged&&n()},destroy:function(){window.removeEventListener("resize",r),a.forEach((function(e){e.view.dom.remove()})),i=void 0,a=new Map,null===s||void 0===s||s.disconnect(),u&&clearTimeout(u)},maybeMeasure:n}}),{eventHandlers:{scroll:function(){this.maybeMeasure()}}}),Bi=[Ti,_i];function Gi(e){var t=e.view,n=e.presence,r=e.fs,i=e.filePath,o=function(e){var t=e.view,n=e.fs,r=e.filePath,i=(0,b.useState)(null),o=i[0],a=i[1],l=(0,hr.Z)(),c=(0,de.Z)({view:t}),s=(0,ri.Z)().trackTimeToLoadFileEnd,u=(0,oi.uV)(),d=(0,oi.Id)(),f=(0,oi.I7)();return(0,b.useEffect)((function(){if(t){var e=0,i=0,o=0,h=null,p=n.watchTextFile(r,{onReady:function(l){var f=l.initialContent,p=l.writeChange,m=l.version;e=m,i=m,d({filePath:r,version:m}),s(r),t.dispatch({changes:{from:0,to:t.state.doc.length,insert:f},annotations:[q.YW.addToHistory.of(!1),q.YW.remote.of(!0),li.of(!0)]}),t.dispatch({effects:c.reconfigure(j.tk.updateListener.of((function(t){if(t.docChanged){var a=!0,l=!1,c=void 0;try{for(var s,d=function(){var a=s.value;if(a.annotation(q.YW.remote)||a.annotation(li))return"continue";o++;var l=a.annotation(ai.Z)?{author:"ghostwriter"}:{};try{p(a.changes,l),h=a.changes}catch(c){return n.readFile(r,{fromDisk:!1}).then((function(n){var o="replitReadError: "+n.error;n.error||(o=n.content.toString());var l=t.view.contentDOM.innerText,s=t.view.plugin(it),d=null===s||void 0===s?void 0:s.logs();null===s||void 0===s||s.flush(),u({origin:"Codemirror: ot/writeChange",error:c,tags:{ot:!0},extras:{filePath:r,previousChanges:JSON.stringify(h),transactionChanges:JSON.stringify(a.changes),otherTransactionChanges:JSON.stringify(t.transactions.filter((function(e){return e!==a})).map((function(e){return e.changes}))),transactionDoc:a.newDoc.sliceString(0),updateDoc:t.state.doc.sliceString(0),otClientDoc:o,domText:l,openVersion:i,latestReceivedVersion:e,keystrokes:JSON.stringify(d)}})})),(0,j.OO)(t.state,c),"break"}},f=t.transactions[Symbol.iterator]();!(a=(s=f.next()).done)&&"break"!==d();a=!0);}catch(m){l=!0,c=m}finally{try{a||null==f.return||f.return()}finally{if(l)throw c}}}})))}),a(r)},onChange:function(a){var l=a.changes,c=a.changeSource,s=a.version;e=s,d({filePath:r,version:s});try{t.dispatch({changes:l,annotations:[q.YW.remote.of(c===ii.Fl.Container),q.YW.addToHistory.of(c===ii.Fl.Local),li.of(!0)]})}catch(f){throw n.readFile(r,{fromDisk:!1}).then((function(e){var n="replitReadError: "+e.error;e.error||(n=e.content.toString());var a=t.contentDOM.innerText;u({origin:"Codemirror: ot/syncRemoteOp",error:f,tags:{ot:!0},extras:{filePath:r,previousChanges:JSON.stringify(h),changes:JSON.stringify(l),changeSource:c,otClientDoc:n,domText:a,cmDoc:t.state.doc.sliceString(0),openVersion:i,version:s,initiatedChanges:o}})})),f}},onError:function(){t.dispatch({effects:c.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:c.reconfigure([])})}});return function(){f({filePath:r}),p(),e=0,i=0,o=0,t.dispatch({effects:[c.reconfigure([])]}),l.current&&a(null)}}}),[t,r,n,l,c,s,u,d,f]),{loadedFile:o}}({view:t,fs:r,filePath:i}),a=o.loadedFile,l=Si({view:t,fs:r,filePath:i,presence:n}).loadedFile;!function(e){var t=e.view,n=(0,se.Z)().presence,r=(0,Ei.Z)(),i=(0,de.Z)({view:t});b.useEffect((function(){if(r&&t){var e=function(){n.getFollowedUser()&&n.unfollowUser()};return t.dispatch({effects:i.reconfigure(j.tk.domEventHandlers({wheel:e,keydown:function(t){"Control"!==t.key&&"Meta"!==t.key&&e()},click:e}))}),function(){t.dispatch({effects:i.reconfigure([])})}}}),[r,t,n,i]);var o=(0,de.Z)({view:t});b.useEffect((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t){var n=q.jT.cursor(e);t.dispatch({effects:[j.tk.scrollIntoView(n,{x:"center",y:"center"})]})}};if(t&&r){var n=t.state.field(Ci,!1);if(n){var i=Object.values(n).find((function(e){return e.username===r.username}));i&&e(i.position)}return t.dispatch({effects:o.reconfigure(j.tk.updateListener.of((function(t){var n,i=!0,o=!1,a=void 0;try{for(var l,c=t.transactions[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=!0,d=!1,f=void 0;try{for(var h,p=s.effects[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;m.is(bi)&&m.value.username===r.username&&(n=m.value)}}catch(v){d=!0,f=v}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}}}catch(v){o=!0,a=v}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}n&&e(n.position)})))}),function(){t.dispatch({effects:o.reconfigure([])})}}}),[t,r,o])}({view:t});var c=i!==a||i!==l,s=(0,de.Z)({view:t});return(0,de.Z)({view:t,initialExtension:Bi}),(0,b.useEffect)((function(){t&&t.dispatch({effects:s.reconfigure([j.tk.editable.of(!c),q.yy.readOnly.of(c)])})}),[t,c,s]),{isLoading:c}}var Pi=n(10207),Ai=n(74906),Ni=n(34547);function Ui(e){var t=e.view,n=e.filePath,a=e.isLoading,l=(0,Ni.Z)(),c=function(){var e=(0,b.useContext)(Pi.ZP);if(!e)throw new Error("Expected codemirror state to be in codemirror state context");return e}(),s=(0,de.Z)({view:t});(0,b.useEffect)((function(){if(t&&!a){var e,u="".concat(l,":").concat(n),d=c.current.fileMap.get(u);if(d&&t.state.doc.eq(d.editorState.doc)){if(t.state.field(E.cE,!1))throw new Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view");var f=[];(0,Qe.q2)(d.editorState).between(0,t.state.doc.length,(function(e,t){f.push(Qe.SW.of({from:e,to:t}))})),t.dispatch({effects:(0,o.Z)(f).concat([j.tk.scrollIntoView(d.scrollPos,{y:"start"})]),selection:d.editorState.selection}),e=[E.cE.init((function(){return d.editorState.field(E.cE)})),(0,E.m8)()]}else e=(0,E.m8)();var h=!1,p=R()((function(){var e;(null!==(e=globalThis.requestIdleCallback)&&void 0!==e?e:globalThis.requestAnimationFrame)((function(){Ai.Z.set("stateCache",(0,Pi.oZ)(c.current))}))}),500),m={read:function(e){if(!h){var t=c.current.fileMap.get(u);if(t){var n=function(e){var t=e.scrollDOM.getBoundingClientRect();if(0===t.top&&0===t.bottom)return null;var n=t.top+e.defaultLineHeight;return e.posAtCoords({x:0,y:n},!1)}(e);null===n||n>t.editorState.doc.length||(c.current.fileMap.set(u,(0,i.Z)((0,r.Z)({},t),{scrollPos:n})),p())}}}},v=!1;return t.dispatch({effects:s.reconfigure([e,j.tk.updateListener.of((function(e){h||(!function(e){var t,n=c.current.fileMap.get(u),r=null!==(t=null===n||void 0===n?void 0:n.scrollPos)&&void 0!==t?t:0;c.current.fileMap.set(u,{scrollPos:r,editorState:e}),p()}(e.state),v||(v=!0,e.view.requestMeasure(m),setTimeout((function(){return v=!1}),500)))}))])}),function(){h=!0,t.dispatch({effects:s.reconfigure([])})}}}),[t,n,c,a,s])}var Li=n(56671),Oi=n(24065);function Xi(e,t,n,o){var a=(0,ti.Z)().showError,l=(0,Ni.Z)(),c=(0,Oi.eR)({variables:{replId:l,path:e},onError:function(e){a(e.message)},skip:!o||t}),s=b.useMemo((function(){var o;return t||c.loading||c.error||!c.data||"ThreadsByFileResult"!==(null===(o=c.data.threadsByFile)||void 0===o?void 0:o.__typename)?{}:c.data.threadsByFile.threads.filter((function(t){return t.path===e&&(!n||!t.isResolved)})).reduce((function(e,t){return(0,i.Z)((0,r.Z)({},e),(0,qe.Z)({},t.id,t))}),{})}),[c.loading,c.data,c.error,e,t,n]);return s}var Mi=n(85027),Fi=n(71887);function Wi(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var Hi=n(45317),Vi=n(59672),zi=n(87693),ji=n(30278),qi=n(4014),$i=function(e){var t=e.isOpen,n=e.threadId,r=(0,b.useState)(!1),i=r[0],o=r[1],l=(0,qi.GD)({variables:{id:n},skip:"initial-spacer"===n});(0,b.useEffect)((function(){var e;if(l&&!l.error){var t=null===(e=l.data)||void 0===e?void 0:e.thread;t&&o("AnnotationAnchor"===(null===t||void 0===t?void 0:t.__typename)&&(null===t||void 0===t?void 0:t.messages.some((function(e){return!e.seen}))))}}),[l]);var c={alt:{default:"View threads",close:"Dismiss thread"}};return(0,a.tZ)(jn.hU,{alt:t?c.alt.close:c.alt.default,size:24,className:"thread-indicator",css:[C.l0.width(20),C.l0.height(20),C.l0.transition.snappy,C.l0.cursor.pointer,C.l0.display.flex,C.l0.borderRadius(8),C.l0.position.relative,C.l0.overflow("visible"),t?C.l0.color.accentPrimaryStrongest:C.l0.color.foregroundDimmest,{borderWidth:C.TV.borderWidthDefault,borderStyle:"solid",borderColor:t?C.TV.accentPrimaryDefault:"transparent",backgroundColor:t?C.TV.accentPrimaryDimmer:C.TV.backgroundHigher,outline:0},{":hover":{borderColor:t?C.TV.accentPrimaryStronger:C.TV.outlineDimmer,color:t?C.TV.accentPrimaryStrongest:C.TV.foregroundDimmer,background:t?C.TV.accentPrimaryDefault+" !important":C.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,a.BX)(a.HY,{children:[i?(0,a.tZ)("div",{css:[C.l0.width(8),C.l0.height(8),C.l0.backgroundColor.redStronger,C.l0.position.absolute,C.l0.top(-1),C.l0.left(-1),C.l0.borderRadius("full")]}):null,(0,a.tZ)(ji.Z,{})]})})},Yi=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(){return(0,H.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},r.eq=function(e){return!1},r.destroy=function(e){},n}(q.uU);Yi.prototype.elementClass="",Yi.prototype.toDOM=void 0,Yi.prototype.mapMode=q.gc.TrackBefore,Yi.prototype.startSide=Yi.prototype.endSide=-1,Yi.prototype.point=!0;var Ki=q.r$.define(),Qi={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return q.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ji=q.r$.define();var eo=q.r$.define({combine:function(e){return e.some((function(e){return e}))}});function to(e){var t=[no];return e&&!1===e.fixed&&t.push(eo.of(!0)),t}var no=j.lg.fromClass(function(){"use strict";function e(t){(0,H.Z)(this,e),this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Ji).map((function(e){return new ao(t,e)}));var n=!0,r=!1,i=void 0;try{for(var o,a=this.gutters[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.dom.appendChild(l.dom)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this.fixed=!t.state.facet(eo),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling)}var t=e.prototype;return t.update=function(e){if(e.viewportChanged){var t=this.view.contentDOM.nextElementSibling;t&&t!==this.dom&&t.classList.contains("cm-minimap-gutter")&&e.view.scrollDOM.insertBefore(this.dom,e.view.contentDOM.nextSibling)}if(this.updateGutters(e)){var n=this.prevViewport,r=e.view.viewport,i=Math.min(n.to,r.to)-Math.max(n.from,r.from);this.syncGutters(i<.8*(r.to-r.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(eo)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},t.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();var r=q.Xs.iter(this.view.state.facet(Ki),this.view.viewport.from),i=[],o=this.gutters.map((function(e){return new oo(e,t.view.viewport,-t.view.documentPadding.top)})),a=!0,l=!1,c=void 0;try{for(var s,u=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=void 0;if(Array.isArray(d.type)){var h=!0,p=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.type==j.kH.Text){f=y;break}}}catch(D){p=!0,m=D}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}else f=d.type==j.kH.Text?d:void 0;if(f){i.length&&(i=[]),io(r,i,d.from);var Z=!0,b=!1,w=void 0;try{for(var x,C=o[Symbol.iterator]();!(Z=(x=C.next()).done);Z=!0){x.value.line(this.view,f,i)}}catch(D){b=!0,w=D}finally{try{Z||null==C.return||C.return()}finally{if(b)throw w}}}}}catch(D){l=!0,c=D}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}var k=!0,S=!1,E=void 0;try{for(var T,R=o[Symbol.iterator]();!(k=(T=R.next()).done);k=!0){T.value.finish()}}catch(D){S=!0,E=D}finally{try{k||null==R.return||R.return()}finally{if(S)throw E}}e&&this.view.scrollDOM.insertBefore(this.dom,n)},t.updateGutters=function(e){var t=e.startState.facet(Ji),n=e.state.facet(Ji),r=e.docChanged||e.heightChanged||e.viewportChanged||!q.Xs.eq(e.startState.facet(Ki),e.state.facet(Ki),e.view.viewport.from,e.view.viewport.to);if(t==n){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.update(e)&&(r=!0)}}catch(D){o=!0,a=D}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var s=[],u=!0,d=!1,f=void 0;try{for(var h,p=n[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value,v=t.indexOf(m);v<0?s.push(new ao(this.view,m)):(this.gutters[v].update(e),s.push(this.gutters[v]))}}catch(D){d=!0,f=D}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}var g=!0,y=!1,Z=void 0;try{for(var b,w=this.gutters[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;x.dom.remove(),s.indexOf(x)<0&&x.destroy()}}catch(D){y=!0,Z=D}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}var C=!0,k=!1,S=void 0;try{for(var E,T=s[Symbol.iterator]();!(C=(E=T.next()).done);C=!0){var R=E.value;this.dom.appendChild(R.dom)}}catch(D){k=!0,S=D}finally{try{C||null==T.return||T.return()}finally{if(k)throw S}}this.gutters=s}return r},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.dom.remove()},e}(),{provide:function(e){return j.tk.scrollMargins.of((function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==j.Nm.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))}});function ro(e){return Array.isArray(e)?e:[e]}function io(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var oo=function(){"use strict";function e(t,n,r){(0,H.Z)(this,e),this.gutter=t,this.height=r,this.localMarkers=[],this.i=0,this.cursor=q.Xs.iter(t.markers,n.from)}var t=e.prototype;return t.line=function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),io(this.cursor,this.localMarkers,t.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=t.top-this.height;if(this.i==o.elements.length){var l=new lo(e,t.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,r);this.height=t.bottom,this.i++}},t.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),ao=function(){"use strict";function e(t,n){var r=this,i=function(e){r.dom.addEventListener(e,(function(r){var i=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[e](t,i,r)&&r.preventDefault()}))};for(var o in(0,H.Z)(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)i(o);this.markers=ro(n.markers(t)),n.initialSpacer&&(this.spacer=new lo(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var t=e.prototype;return t.update=function(e){var t=this.markers;if(this.markers=ro(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var r=e.view.viewport;return!q.Xs.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},e}(),lo=function(){"use strict";function e(t,n,r,i){(0,H.Z)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,r,i)}var t=e.prototype;return t.update=function(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)},t.setMarkers=function(e,t){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<t.length?t[i++]:null,c=!1;if(l){var s=l.elementClass;s&&(n+=" "+s);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=n,this.markers=t},t.destroy=function(){this.setMarkers(null,[])},e}();var co=q.r$.define(),so=q.r$.define({combine:function(e){return(0,q.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=function(e){var n=r[e],i=t[e];r[e]=n?function(e,t,r){return n(e,t,r)||i(e,t,r)}:i},r=Object.assign({},e);for(var i in t)n(i);return r}})}}),uo=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e){var r;return(0,H.Z)(this,n),(r=t.call(this)).number=e,r}var r=n.prototype;return r.eq=function(e){return this.number==e.number},r.toDOM=function(){return document.createTextNode(this.number)},n}(Yi);function fo(e,t){return e.state.facet(so).formatNumber(t,e.state)}Ji.compute([so],(function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(co)},lineMarker:function(e,t,n){return n.some((function(e){return e.toDOM}))?null:new uo(fo(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(so)!=e.state.facet(so)},initialSpacer:function(e){return new uo(fo(e,ho(e.state.doc.lines)))},updateSpacer:function(e,t){var n=fo(t.view,ho(t.view.state.doc.lines));return n==e.number?e:new uo(n)},domEventHandlers:e.facet(so).domEventHandlers}}));function ho(e){for(var t=9;t<e;)t=10*t+9;return t}var po=new(function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(){var e;return(0,H.Z)(this,n),(e=t.apply(this,arguments)).elementClass="cm-activeLineGutter",e}return n}(Yi));Ki.compute(["selection"],(function(e){var t=[],n=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var s=e.doc.lineAt(c.head).from;s>n&&(n=s,t.push(po.range(s)))}}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return q.Xs.of(t)}));var mo=n(20685),vo=n(95134),go=n(37268),yo=n(76898),Zo=n(32383),bo=n(43995),wo=n(94681),xo=function(e){var t=e.caretSize,n=void 0===t?[8,12]:t,o=(0,Ye.Z)(e,["caretSize"]);return(0,a.BX)("svg",(0,i.Z)((0,r.Z)({width:n[0],height:n[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,a.tZ)("mask",{id:"outline",fill:"white",children:(0,a.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,a.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,a.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,a.tZ)("defs",{children:(0,a.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,a.tZ)("stop",{stopColor:"#57ABFF"}),(0,a.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},Co=n(56469),ko=n(12235),So=n(68989),Eo=n(8576),To=n(76177),Ro=n(9353),Do=n(94784),Io=n(19701),_o=n(21371),Bo=n(48034),Go=n(21423),Po=n(92361),Ao=n(63743),No=n(72010),Uo=n(90437),Lo=function(e){var t=e.isCreating,n=e.threadId,r=e.filePath,i=e.isResolved,o=e.isLoading,l=e.isPlaceholder,c=e.caretPosition,s=e.onRequestClose,u=void 0===s?function(){}:s,d=e.onResolveThread,f=void 0===d?function(){}:d,h=e.openThreadsInbox,p="Inbox",m="Next thread",v="Previous thread",g="Collapse",y=Xi(null===r?"":r,o,!0,!0),Z=[12,8];switch((0,ye.Z)().preferences.fontSize){case 10:Z=[8,6];break;case 14:Z=[10,6];break;case 18:Z=[12,8];break;case 24:Z=[14,10]}var w=b.useMemo((function(){return Object.values(y).sort((function(e,t){return e.indexStart-t.indexStart}))}),[y]),k=b.useMemo((function(){return w.findIndex((function(e){return e.id===n}))}),[w,n]),S=(0,Fi.a9)(),E=function(){var e=(0,Ze.Z)((function(){var e;return(0,be.__generator)(this,(function(t){return e=k===w.length-1?w[0].id:w[k+1].id,S(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,Ze.Z)((function(){var e;return(0,be.__generator)(this,(function(t){return e=0===k?w[w.length-1].id:w[k-1].id,S(e),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,a.BX)(go.Tg,{background:"root",css:[C.l0.flex.row,C.l0.align.center,C.l0.justify.spaceBetween,C.l0.position.relative,C.l0.px(12),C.l0.py(8),{borderBottomWidth:C.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:C.TV.outlineDimmest}],children:[null!==c&&(0,a.tZ)("span",{css:[C.l0.position.absolute,C.l0.top(-Z[1]),C.l0.left(c),C.l0.height("fit-content"),C.l0.display.flex,C.l0.flex.row,C.l0.align.center],children:(0,a.tZ)(xo,{caretSize:Z})}),(0,a.tZ)(zn.zx,{iconLeft:(0,a.tZ)(To.Z,{}),onClick:function(){h()},text:p,size:"small"}),w.length>1?(0,a.BX)(x.G,{css:[C.l0.flex.row,C.l0.align.center,C.l0.rowWithGap(4)],children:[(0,a.tZ)(jn.hU,{alt:v,onClick:T,children:(0,a.tZ)(Zo.Z,{})}),(0,a.BX)(Se.xv,{color:"dimmest",variant:"small",multiline:!1,children:[k+1,"/",w.length]}),(0,a.tZ)(jn.hU,{alt:m,onClick:E,children:(0,a.tZ)(yo.Z,{})})]}):null,(0,a.BX)(x.G,{css:[C.l0.flex.row,C.l0.align.center,C.l0.rowWithGap(4)],children:[t||i||l?null:(0,a.tZ)(zn.zx,{onClick:f,text:"Resolve",size:"small",iconLeft:(0,a.tZ)(qn.Z,{})}),!t&&i?(0,a.tZ)(vo.D,{text:"Resolved",colorway:"positive"}):null,(0,a.tZ)(zn.zx,{onClick:u,text:g,size:"small",iconLeft:(0,a.tZ)(So.Z,{})})]})]})},Oo=function(e){var t,n=e.threadId,o=e.isResolved,l=e.onMessageChange,c=e.onMessageSubmit,s=e.isPlaceholder,u=e.onRequestClose,d=void 0===u?function(){}:u,f=(0,g.Z)(b.useState(""),2),h=f[0],p=f[1],m=(0,g.Z)(b.useState(Fe().v4()),2),v=m[0],y=m[1],w=(0,Eo.Z)(),k=w.ref,S=w.update,E=b.useRef(null),T={placeholder:function(){return s?"Start a new thread\u2026 (Markdown is supported)":o?"Reply to re-open thread\u2026":"Reply\u2026 (Markdown is supported)"}},R="Post reply",D="Cancel",I=function(){var e=h.trim();0!==e.length&&(c({message:e,messageId:v}),p(""),y(Fe().v4()))},_=(0,Uo.d)(),B=(0,Bo.Z)(),G=(0,g.Z)((0,Io.Z)({"@":function(){var e=(0,Ze.Z)((function(e){var t,n;return(0,be.__generator)(this,(function(r){return t=B.filter((function(e){return e.id!==_})),e&&(n=e.toLowerCase(),t=t.filter((function(e){return e.username.toLowerCase().startsWith(n)}))),[2,t.slice(0,5).map((function(e){return{icon:(0,a.tZ)(Do.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}}))]}))}));return function(t){return e.apply(this,arguments)}}()}),2),P=G[0].suggestions,A=G[1],N=(0,_o.Kb)({items:(null===P||void 0===P?void 0:P.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(t=null===P||void 0===P?void 0:P.results.length)&&void 0!==t?t:0)>0,onSelectedItemChange:function(e){var t=e.selectedItem;if(P&&t){var n=P.applySuggestion({targetValue:h,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;p(r),setTimeout((function(){E.current&&(E.current.setSelectionRange(i,i),E.current.focus(),S())}))}}}),U=N.isOpen,L=N.getInputProps,O=N.getMenuProps,X=N.getItemProps,M=N.highlightedIndex,F=N.getComboboxProps;return b.useEffect((function(){var e="threads/drafts/".concat(n),t=Ai.Z.get(e,"string");t&&p(t);var r=E.current;return function(){if(r){var t=r.value;0!==t.length?Ai.Z.set(e,t):Ai.Z.remove(e)}}}),[n]),(0,a.BX)(go.Tg,{background:"root",css:[C.l0.px(12),C.l0.pb(8),C.l0.pt(8),{borderTop:"1px solid ".concat(C.TV.outlineDimmest)}],className:"inline-thread-input",children:[(0,a.BX)("div",(0,i.Z)((0,r.Z)({css:[C.l0.flex.row,C.l0.align.start,C.l0.rowWithGap(8),C.l0.width("full")]},F()),{className:"jsx-45ff32690e481e34",children:[s?(0,a.tZ)(zn.zx,{text:D,onClick:d}):null,(0,a.BX)("div",{css:[{width:"100%"}],className:"jsx-45ff32690e481e34",children:[(0,a.tZ)(mo.B,(0,r.Z)({},L({ref:function(e){E.current=e,k(e),A(e)},value:h,onChange:function(e){var t=e.target.value;p(t),l({message:t,messageId:v})},onKeyDown:function(e){U||(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),I(),requestAnimationFrame((function(){S()}))))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),d())},placeholder:T.placeholder(),css:[C.l0.height(32),C.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],autoFocus:!0}))),(0,a.tZ)("div",{css:{position:"relative"},className:"jsx-45ff32690e481e34",children:(0,a.tZ)("div",(0,i.Z)((0,r.Z)({},O({css:[{position:"absolute",top:C.TV.space2,overflow:"hidden"},C.l0.borderRadius(16),C.l0.shadow(1),C.l0.backgroundColor.backgroundDefault]})),{className:"jsx-45ff32690e481e34",children:null===P||void 0===P?void 0:P.results.map((function(e,t){return(0,b.createElement)("div",(0,i.Z)((0,r.Z)({},X({item:e,index:t})),{key:e.value,className:"jsx-45ff32690e481e34"}),(0,a.BX)(Go.Ug,{spacing:2,css:[M===t?C.l0.backgroundColor.backgroundHighest:null,C.l0.p(8)],children:[e.icon,(0,a.tZ)("div",{className:"jsx-45ff32690e481e34",children:e.value})]}))}))}))})]}),(0,a.tZ)(x.G,{css:[C.l0.pt(4)],children:(0,a.tZ)(jn.hU,{alt:R,tooltipDelay:"long",onClick:I,children:(0,a.tZ)(bo.Z,{})})})]})),(0,a.tZ)(Z(),{id:"45ff32690e481e34",children:".inline-thread-input .popover-control-container{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]})};var Xo,Mo=function(e){var t,n=e.threadId,r=e.isCreating,i=e.isResolved,l=void 0!==i&&i,c=e.view,s=e.filePath,u=e.openThreadsInbox,d=(0,Co.Z)(n,c,s),f=d.thread,h=d.loading,p=d.isPlaceholder,m=d.getLatestAnchor,v=d.updateThread,g=d.changeThreadMessage,y=d.finalizeThreadMessage,Z=function(){null===c||void 0===c||c.dispatch({effects:[Mi.YM.of(null)]})},w=(0,ye.Z)().preferences.fontSize,k=(0,b.useRef)(null);(0,No.Z)(f);var S=m(),E=c&&!h&&"number"===typeof(null===S||void 0===S?void 0:S.indexEnd)&&S.indexEnd<=c.state.doc.length?null===(t=c.coordsAtPos(S.indexEnd))||void 0===t?void 0:t.left:null,T=(null===c||void 0===c?void 0:c.dom.getBoundingClientRect().left)||null,R=E&&T?E-T-6:null,D=w;switch(w){case 10:D=13;break;case 14:D=19;break;case 18:D=25;break;case 24:D=34}var I=(0,ti.Z)().showConfirm,_=(0,Ni.Z)(),B=(0,b.useRef)(null);b.useEffect((function(){setTimeout((function(){B.current&&(B.current.scrollTop=B.current.scrollHeight)}),0)}),[null===f||void 0===f?void 0:f.messages]);var G=b.useMemo((function(){return(null===f||void 0===f?void 0:f.messages)?(0,o.Z)(f.messages).sort((function(e,t){return Date.parse(e.timeCreated)-Date.parse(t.timeCreated)})):[]}),[null===f||void 0===f?void 0:f.messages]),P=function(e){var t=(0,b.useRef)(0);return(0,Po.Z)((function(n){var r=n.height;r!==t.current&&(null===e||void 0===e||e.requestMeasure()),t.current=r}))}(c);return(0,a.tZ)("div",{css:[C.l0.width("100%"),C.l0.backgroundColor.backgroundRoot],children:(0,a.BX)(x.G,{innerRef:(0,Ao.l)(k,P),css:[C.l0.font.default,{borderTopWidth:C.TV.borderWidthDefault,borderBottomWidth:C.TV.borderWidthDefault,borderStyle:"solid",borderColor:C.TV.accentPrimaryDefault}],children:[p||h?null:(0,a.tZ)(Lo,{isCreating:r,isResolved:l,isLoading:h,threadId:n,filePath:s,caretPosition:R,isPlaceholder:p,onRequestClose:Z,onResolveThread:function(){v({changes:{isResolved:!0}}),I("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:u}),!h||p?(0,a.BX)(a.HY,{children:[!r&&G.length>0?(0,a.tZ)("div",{css:[C.l0.px(12),C.l0.py(12),C.l0.maxHeight(300),C.l0.overflowY("auto"),C.l0.colWithGap(16),C.l0.fontSize(w)],ref:B,children:G.map((function(e){return(0,a.tZ)(wo.Z,{thread:f,message:e},e.id)}))}):null,(0,a.tZ)(Oo,{threadId:n,isPlaceholder:p,isResolved:l,onRequestClose:Z,onMessageChange:g,onMessageSubmit:function(e){y(e),(0,Yt.j)(Ro.U3.MESSAGE_SENT,{replId:_,source:"threads",newThread:p})}})]}):(0,a.tZ)(x.G,{css:[C.l0.height(D)],children:(0,a.tZ)(ko.Z,{viewBox:"0 0 400 21",backgroundColor:C.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:C.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,a.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})})]})})},Fo=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e,r,i){var o;return(0,H.Z)(this,n),(o=t.call(this)).id=e,o.filePath=r,o.openThreadsInbox=i,o}var r=n.prototype;return r.eq=function(e){return e.id===this.id},r.toDOM=function(e){var t=(0,Be.VV)((0,a.tZ)(Mo,{threadId:this.id,view:e,filePath:this.filePath,openThreadsInbox:this.openThreadsInbox}));t.className="cm-thread-portal-widget";var n=e.dom.querySelector(".cm-scroller"),r=e.dom.querySelector(".cm-gutters");return n&&r&&Wi(t,n,r),t},r.ignoreEvent=function(){return!0},n}(j.l9),Wo=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e,r){var i;return(0,H.Z)(this,n),(i=t.call(this)).id=e,i.active=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,Be.VV)((0,a.tZ)($i,{isOpen:this.active,threadId:this.id}));return n.className="cm-thread-indicator",n.style.display="inline",n.style.cursor="pointer",n.setAttribute("aria-hidden","true"),n.onclick=function(n){n.stopPropagation(),n.preventDefault(),e.dispatch({effects:[Mi.YM.of(e.state.field(Mi.PQ)===t.id?null:t.id)]})},n},r.eq=function(e){return e.id===this.id&&e.active===this.active},n}(Yi),Ho=(Xo={class:"cm-thread-indicator-gutter",markers:function(e){var t=e.state.field(Mi.OQ),n=e.state.field(Mi.PQ);return q.Xs.of(Object.values(t).filter((function(e){return e.indexEnd!==e.indexStart})).map((function(t){var r=e.state.doc.lineAt(Math.min(t.indexStart,t.indexEnd)).from;return new Wo(t.id,t.id===n).range(r)})),!0)},initialSpacer:function(){return new Wo("initial-spacer",!1)}},[to(),Ji.of((0,r.Z)({},Qi,Xo))]);var Vo=new rt.j((function(e,t,n){return e&&n?[q.Wl.highest(Ho),Mi.cR,Mi.OQ,Mi.ZS,Mi.PQ,j.tk.decorations.compute([Mi.OQ,Mi.ZS,Mi.PQ],(function(e){var n=e.field(Mi.OQ),r=e.field(Mi.ZS),i=e.field(Mi.PQ),a=r||Object.values(n).find((function(e){return e.id===i}));return j.p.set((0,o.Z)(Object.values(n)).map((function(e){var n=a&&e.id===a.id;return function(e,t,n,r,i){if(t===n)return null;var o=(0,g.Z)(r,2),a=o[0],l=o[1];return j.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(t,n)}(e.id,e.indexStart,e.indexEnd,t,n)})).filter((function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length})),!0)})),j.tk.decorations.compute([Mi.OQ,Mi.ZS,Mi.PQ,dn.Yp],(function(e){var t=e.field(Mi.OQ),r=e.field(Mi.ZS),i=e.field(Mi.PQ),a=e.facet(dn.Yp);if(void 0===a)return j.p.none;var l=(0,o.Z)(Object.values(t)).concat((0,o.Z)(r?[r]:[])).filter(Boolean).find((function(e){return e.id===i}));return l?j.p.set([j.p.widget({widget:new Fo(l.id,a,n),block:!0,side:1}).range(l.indexEnd)],!0):j.p.none})),j.tk.updateListener.of((function(e){(0,ke.j)(e,ui.R,(function(){var t=(0,o.Z)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){Wi(c.value,n,r)}}catch(u){a=!0,l=u}finally{try{i||null==s.return||s.return()}finally{if(a)throw l}}}}))})),j.tk.updateListener.of((function(e){(0,ke.j)(e,Mi.eR,(function(t){var n=t.value,r=e.state.field(Mi.OQ)[n];r&&e.view.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[j.tk.scrollIntoView(r.indexStart,{x:"center",y:"center"})]})}))}))]:null}));function zo(e){var t=e.view,n=e.filePath,i=e.isLoading,o=e.enable,a=e.openThreadsInbox,l=(0,Fi.kM)();b.useEffect((function(){t&&l&&t.dispatch({effects:[Mi.YM.of(l),Mi.eR.of(l)]})}),[t,l]);var c=(0,zi.F)().theme,s=(0,g.Z)(b.useState([Hi.TV.accentPrimaryDimmest,Hi.TV.accentPrimaryDimmer]),2),u=s[0],d=s[1];b.useEffect((function(){var e=c.values.global.accentPrimaryDimmest,t=(0,Vi.w)(e),n="rgba(".concat(t.join(","),", 0.5)");d([n,Hi.TV.accentPrimaryDimmer])}),[c]);return function(e,t,n,i){var o=(0,se.Z)().fs,a=(0,Li.kL)(n),l=a.contentRef,c=a.loadedFile,s=a.transformSelectionRef;b.useEffect((function(){var a=!1,u=s.current,d=l.current;if(c&&u&&d&&!i&&t){var f=Object.values(e);0!==f.length?Promise.all(f.map((function(e){return(0,Li.Ft)({anchor:e,version:o.getOTVersion(n),transformSelection:u,content:d})}))).then((function(e){if(!a){var n=e.filter((function(e){return Boolean(e)})).map((function(e){if(!e)throw new Error("expected resolved anchor");return(0,r.Z)({},e.anchor,null===e||void 0===e?void 0:e.newSelection)}));return t.dispatch({effects:Mi.qi.of(n.reduce((function(e,t){return e[t.id]=t,e}),{}))}),function(){a=!0,t&&t.dispatch({effects:Mi.qi.of({})})}}})):t.dispatch({effects:Mi.qi.of({})})}}),[e,t,c,o,s,l,n,i])}(Xi(n,i,!0,o),t,n,i),Vo.use(o,u,a)}var jo=n(99261),qo=n(73126);var $o=n(75205),Yo=n(6191),Ko=n(74685),Qo=n(87978),Jo=n(12583),ea=RegExp("_(?<num>\\d+)$");function ta(e,t){return na.apply(this,arguments)}function na(){return na=(0,Ze.Z)((function(e,t){var n,r,i,o;return(0,be.__generator)(this,(function(a){switch(a.label){case 0:return n=(0,Qo.Il)(t),[4,e.readDir(n||Jo.Ql)];case 1:return(r=a.sent()).error?[2,t]:(i=function(e){if(r.children.find((function(t){return"FILE"===t.type&&t.filename===e}))){var t,n=(0,Qo.eb)(e),o=(0,Qo.r6)(e),a=n.match(ea);if(null===a||void 0===a||null===(t=a.groups)||void 0===t?void 0:t.num){var l=Number(a.groups.num);return i("".concat(n.replace(ea,""),"_").concat(l+1,".").concat(o))}return i("".concat(n,"_2.").concat(o))}return e},o=i((0,Qo.UO)(t)),[2,n?n+"/"+o:o])}}))})),na.apply(this,arguments)}var ra=n(22011),ia=function(){var e=(0,Ze.Z)((function(e,t,n){var r,i,o,a,l,c;return(0,be.__generator)(this,(function(s){switch(s.label){case 0:return r=encodeURI(e.name),i=(0,Qo.Il)(n),[4,ta(t,i?i+"/"+r:r)];case 1:return o=s.sent(),[4,(0,Ko.pV)(e)];case 2:return a=s.sent(),[4,t.writeFile(o,ra.Z.from(a))];case 3:return s.sent(),l=(0,Qo.eb)(e.name),c=(0,Qo.UO)(o),[2,"![".concat(l,"](").concat(c,")")]}}))}));return function(t,n,r){return e.apply(this,arguments)}}();function oa(e){var t=e.cta,n=e.version;(0,Yt.j)(Yt.U3.EDITOR_EMPTY_STATE_CLICKED,{cta:t,version:n})}var aa=n(85234),la=n.n(aa),ca=n(49684),sa=n(18125),ua=n(55047),da=n(92650),fa=n(32508),ha=n.n(fa);function pa(e){var t=e.view,n=e.event,r=e.clipboardText,i=e.filePath,o=t.state.selection,a=function(){if(!n){var e=r||"";if(o.main.empty){var i=o.main.from+e.length;t.dispatch({changes:[{from:o.main.from,insert:e}],selection:q.jT.range(i,i)})}else t.dispatch(t.state.replaceSelection(e))}};if(i&&(0,Qo.gK)(i))if(o.ranges.length>1)a();else if(o.main.from!==o.main.to)if(r&&ha()(r)){n&&n.preventDefault();var l=t.state.sliceDoc(o.main.from,o.main.to),c="[".concat(l,"](").concat(r,")"),s=o.main.from+c.length;t.dispatch({changes:{from:o.main.from,to:o.main.to,insert:c},selection:q.jT.range(s,s)})}else a();else a();else a()}var ma=j.tk.domEventHandlers({paste:function(e,t){var n;pa({filePath:t.state.facet(dn.Yp),view:t,event:e,clipboardText:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text")})}}),va=new rt.j((function(e,t){return j.tk.domEventHandlers({paste:function(n,r){var i,o=r.state.facet(dn.Yp),a=null===n||void 0===n||null===(i=n.clipboardData)||void 0===i?void 0:i.files,l=function(e){var t=r.state.selection.main.head;r.dispatch({changes:{from:t,insert:e},selection:{anchor:t,head:t+e.length}})};if(a){var c=!0,s=!1,u=void 0;try{for(var d,f=a[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;e?(0,Ko.L0)(h).then((function(e){return l('"'+e+'"')})):o&&(0,Qo.gK)(o)&&ia(h,t,o).then(l)}}catch(p){s=!0,u=p}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}})}));function ga(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function ya(e,t){return null==t?ga(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map((function(e){var t=e.from;return{location:t,length:e.to-t}})),hasFocus:t.hasFocus};var n}function Za(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:la()(),i=ya(e,t),o={messageType:ca.cF.TEXT_EDITOR_STATE,filePath:e,text:i.text,selections:i.selections,hasFocus:i.hasFocus,hasGhostwriterSuggestion:n.hasGhostwriterSuggestion,revisionId:n.revisionId};(0,ua.bG)(o,r)}function ba(e,t,n,r,i){return r===e&&r===n.textEditorState.filePath&&(t===n.textEditorState.filePath&&i===n.revisionId)}function wa(e){var t=e.map((function(e){return q.jT.range(e.location,e.location+e.length)}));return q.jT.create(t)}function xa(e,t,n,r,i,o){var a=i.payload;if((0,ca.Se)(a))return function(e,t,n,r,i){if(!ba(e,t,r,i.filePath,i.revisionId))return!1;var o=wa(i.selections);return n.dispatch({selection:o,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,ca.m7)(a))return function(e,t,n,r,i){if(!ba(e,t,r,i.filePath,i.revisionId))return!1;var o=ya(e,n),a=wa(i.selections);return n.dispatch({changes:{from:0,to:o.text.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,ca.ac)(a))return function(e,t,n,r,i){if(!ba(e,t,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=wa(i.selections);return n.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,ca.fz)(a))return function(e,t,n,r,i){return!!ba(e,t,r,i.filePath,i.revisionId)&&(n.dispatch(n.state.replaceSelection(i.text)),!0)}(e,t,n,r,a);if((0,ca.T$)(a))!function(e,t,n,r,i){!!ba(e,t,r,i.filePath,i.revisionId)&&pa({filePath:e,view:n,clipboardText:i.text})}(e,t,n,r,a);else{if(!(0,ca.aB)(a))throw new Error("Invalid payload.");switch(a.action){case ca.b9.REQUEST_BLUR:return function(e,t,n,r,i,o){if(!ba(e,t,r,i,o))return!1;n.contentDOM.blur()}(e,t,n,r,a.filePath,a.revisionId);case ca.b9.REQUEST_UNDO:return function(e,t,n,r,i,o){if(!ba(e,t,r,i,o))return!1;return(0,E.Yw)(n),!0}(e,t,n,r,a.filePath,a.revisionId);case ca.b9.REQUEST_REDO:return function(e,t,n,r,i,o){if(!ba(e,t,r,i,o))return!1;return(0,E.KX)(n),!0}(e,t,n,r,a.filePath,a.revisionId);case ca.b9.REQUEST_INDENT_SELECTION:return function(e,t,n,r,i){return!!ba(e,t,r,i.filePath,i.revisionId)&&(E.at(n),!0)}(e,t,n,r,a);case ca.b9.REQUEST_DEDENT_SELECTION:return function(e,t,n,r,i){return!!ba(e,t,r,i.filePath,i.revisionId)&&(E.xi(n),!0)}(e,t,n,r,a);case ca.b9.REQUEST_TOGGLE_COMMENT:return function(e,t,n,r,i){return!!ba(e,t,r,i.filePath,i.revisionId)&&(E.O8(n),!0)}(e,t,n,r,a);case ca.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return function(e,t,n,r,i,o){return!!ba(e,t,r,i.filePath,i.revisionId)&&!!(0,sa.$o)(n)&&((0,Yt.j)(Yt.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",language:(0,da.S)(e),engine:o}),Ke.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),(0,we._B)(n),!0)}(e,t,n,r,a,o);case ca.b9.REQUEST_FOCUS:return function(e){return e.focus(),!0}(n);default:throw new Error("Unknown BridgeTextEditorAction.")}}}var Ca=n(66656),ka=n(70232);function Sa(e){var t=e.view,n=e.filePath,r=(0,h.useRouter)(),i=(0,l.Vg)(r),o=(0,b.useRef)({revisionId:la()(),textEditorState:ga(n),hasGhostwriterSuggestion:!1}),a=(0,b.useRef)(n),c=(0,Ca.Z)().engine,s=(0,de.Z)({view:t});(0,b.useEffect)((function(){if(t&&i){var e=ya(n,t);o.current={revisionId:la()(),textEditorState:e,hasGhostwriterSuggestion:o.current.hasGhostwriterSuggestion},Za(n,t,o.current);return t.dispatch({effects:s.reconfigure(j.tk.updateListener.of((function(r){!function(r){var i,a=(0,$t.Z)(t.state),l=(null===(i=o.current)||void 0===i?void 0:i.hasGhostwriterSuggestion)!==a;r.docChanged?(o.current={revisionId:la()(),textEditorState:e,hasGhostwriterSuggestion:a},Za(n,t,o.current)):(r.selectionSet||r.focusChanged||l)&&(o.current={revisionId:o.current.revisionId,textEditorState:e,hasGhostwriterSuggestion:a},Za(n,t,o.current))}(r)})))}),function(){t.dispatch({effects:s.reconfigure([])})}}}),[t,n,s,i]),(0,b.useEffect)((function(){if(t&&i){var e=function(e){Za(n,t,o.current,e.messageId)},r=function(r){xa(n,a.current,t,o.current,r,c)?e(r):(0,ua.pl)(r.messageId)},l=function(i){try{var l=i.data;if(!(0,ca.CF)(l))return;if(l.protocolVersion!==ca.Wj)return;var s=l.payload;l.messageDirection===ca.s1.TO_NATIVE&&(0,ca.H7)(s)&&(a.current=s.activePaneFilePath),(0,ua.fp)(i,(function(i){var s=i.type;switch(s){case ca.cF.TEXT_EDITOR_STATE_REQUEST:e(l);break;case ca.cF.REQUEST_SET_SELECTION:case ca.cF.REQUEST_REPLACE_SELECTION:case ca.cF.REQUEST_SET_TEXT:case ca.cF.REQUEST_INSERT_TEXT:case ca.cF.REQUEST_PASTE_TEXT:r(l);break;case ca.cF.TEXT_EDITOR_REQUEST_ACTION:!function(r){xa(n,a.current,t,o.current,r,c)?e(r):(0,ua.pl)(r.messageId)}(l);break;default:(0,ka.Z)(s)}}))}catch(u){throw new Error("Invalid message: ".concat(u))}};return window.addEventListener("message",l),Za(n,t,o.current),function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:la()(),n={messageType:ca.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,ua.bG)(n,t)}(n),window.removeEventListener("message",l)}}}),[t,n,i,c])}var Ea=n(55102),Ta=new rt.j((function(e){var t=j.tk.domEventHandlers({scroll:R()((function(t,n){var r=0,i=0,o=!0,a=!1,l=void 0;try{for(var c,s=n.visibleRanges[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;r=Math.min(r,u.from),i=Math.max(r,u.to)}}catch(d){a=!0,l=d}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}e("user:scroll",{visibleLines:{from:n.state.doc.lineAt(r).number,to:n.state.doc.lineAt(i).number}})}),250)}),n=R()((function(t,n,r){e("user:selection",{inputMethod:r,from:t,to:n})}),250);return[t,j.tk.updateListener.of((function(t){var r=t.transactions,i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.isUserEvent("input.paste")&&e("user:paste",{}),s.isUserEvent("input.drop")&&e("user:new-drop",{}),s.isUserEvent("move.drop")&&e("user:move-drop",{}),s.isUserEvent("delete.cut")&&e("user:cut",{}),s.isUserEvent("input.complete")&&e("user:complete",{}),s.isUserEvent("select")&&n(s.newSelection.main.from,s.newSelection.main.to,s.isUserEvent("select.pointer")?"pointer":"keyboard"),s.isUserEvent("undo")&&e("user:undo",{}),s.isUserEvent("redo")&&e("user:redo",{})}}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}))]}));var Ra=n(41143),Da=n(63119),Ia=n(51467);function _a(e){var t=e.selection.main.head,n=e.doc.lineAt(t);return{offset:t,line:n.number,column:t-n.from+1}}var Ba,Ga,Pa=n(45246);function Aa(e){var t=e.view,n=e.path,r=e.isHidden,i=(0,Pa.NH)();!function(e,t){var n=(0,Ia.Z)(t);(0,Da.M)((function(){return j.tk.focusChangeEffect.of((function(t){return(null===e||void 0===e?void 0:e.hasFocus)?n.current({type:"focus",position:_a(t)}):n.current({type:"blur"}),null}))}),[e,n],e,"useCursorChange"),(0,Da.M)((function(){return j.tk.updateListener.of((function(e){e.selectionSet&&n.current({type:"update",hasFocus:e.view.hasFocus,position:_a(e.state)})}))}),[n],e,"useCursorChange"),(0,b.useEffect)((function(){return function(){n.current({type:"unmount"})}}),[])}(t,(function(e){i(n,e)})),(0,b.useEffect)((function(){i(n,r?{type:"hidden"}:{type:"unhidden"})}),[r])}var Na=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e){var r;return(0,H.Z)(this,n),(r=t.call(this)).type=e,r}return n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,t,n){return this.from(e).range(t,n)},n}(q.uU);function Ua(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}function La(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<t)return null;var n=e.text[0],r=Ua(n);if(!r)return null;var i=n.repeat(t),o=e.text.slice(0,t);return o!==i||e.text.length>t&&" "!==e.text[t]?null:r}function Oa(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=n;o<=r;){var a=e.lineAt(o),l=La(a,t);l&&i.push(Na.range(l,a.from,a.to)),o=a.to+1}return i}Na.yours=new Na("yours"),Na.base=new Na("base"),Na.middle=new Na("middle"),Na.theirs=new Na("theirs");var Xa=["yours","base","middle","theirs"];function Ma(e){Array.isArray(e)&&(e=q.Xs.of(e));var t=[],n=[];if(0===e.size)return{hunks:t,hanging:n};for(var r=e.iter();null!==r.value;){var i={},a={},l=[],c=!0,s=!1,u=void 0;try{for(var d,f=Xa[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value,p=r.value,m=r.from,v=r.to;if("base"!==h||p.type===h){if(p.type===h)i[h]={from:m,to:v},l.push({from:m,to:v,type:p.type});else{if("yours"===p.type)break;l.push({from:m,to:v,type:p.type})}if(r.next(),null===r.value)break}}}catch(D){s=!0,u=D}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}if(i.yours&&i.middle&&i.theirs){var g,y,Z;null!==(g=(Ba=i).base)&&void 0!==g||(Ba.base=null),null!==(y=(Ga=a).base)&&void 0!==y||(Ga.base=null);var b=null!==(Z=i.base)&&void 0!==Z?Z:i.middle,w=i.yours.to+1,x=b.from-1;if(a.yours=w<x?{from:w,to:x}:null,i.base){var C=i.base.to+1,k=i.middle.from-1;a.base=C<k?{from:C,to:k}:null}var S=i.middle.to+1,E=i.theirs.from-1;a.theirs=S<E?{from:S,to:E}:null;var T={from:i.yours.from,to:i.theirs.to,markers:i,content:a};t.push(T)}else{var R;(R=n).push.apply(R,(0,o.Z)(l))}}return{hunks:t,hanging:n}}var Fa,Wa=q.r$.define({combine:function(e){return e.length?e[0]:7}}),Ha=q.QQ.define({create:function(e){var t=e.doc,n=e.facet(Wa),r=q.Xs.of(Oa(t,n)),i=Ma(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,t){var n=t.newDoc,r=t.startState.facet(Wa),i=t.state.facet(Wa);if(r!==i){var o=q.Xs.of(Oa(n,i)),a=Ma(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!t.docChanged)return e;var l=null,c=null,s=null,u=null;t.changes.iterChangedRanges((function(e,t,n,r){l=null===l?e:Math.min(l,e),c=null===c?t:Math.max(c,t),s=null===s?n:Math.min(s,n),u=null===u?r:Math.max(u,r)}));var d=e.markers;if(null!==l&&null!==c){var f=t.startState.doc.lineAt(l).from,h=t.startState.doc.lineAt(c).to;d=d.update({filter:function(){return!1},filterFrom:f,filterTo:h})}d=d.map(t.changes),null!==s&&null!==u&&(d=d.update({add:Oa(n,i,s,u)}));var p=Ma(d);return{markers:d,hunks:p.hunks,hanging:p.hanging}}}),Va=j.tk.atomicRanges.from(Ha,(function(e){return function(){return e.markers}})),za=q.yy.changeFilter.of((function(e){var t=e.startState.field(Ha);if(!e.docChanged||0===t.markers.size)return!0;var n=e.startState.doc,r=[];return e.changes.iterChanges((function(e,i,o,a,l){var c=l.length,s=Math.max(n.lineAt(e).from-1,0),u=Math.min(n.lineAt(i).to+1,n.length);t.markers.between(s,u,(function(t,s){if(!(e<=t&&i>=s)&&(0===c||!(e===s&&"\n"===l.sliceString(0,1)||i===t&&"\n"===l.sliceString(c-1,c)))){if(o===a){if(i===s+1&&0===n.lineAt(i).length)return;if(e===t-1&&0===n.lineAt(e).length)return}r.push(t-1,s+1)}}))})),!(r.length>0)||r})),ja=q.yy.transactionFilter.of((function(e){var t=e.docChanged?e.state.field(Ha):e.startState.field(Ha);if(0===t.markers.size)return e;var n=e.newSelection,r=!1,i=!1;do{var o=function(e){var o=n.ranges[e],a=o.from,l=o.to,c=a,s=l;if(t.markers.between(a,l,(function(e,t){var n=(e+t)/2;a>e&&a<t&&(c=a<n?e:t),l>e&&l<t&&(s=l<n?e:t)})),c!==a||s!==l){var u,d=o.anchor<o.head?c:s,f=o.anchor<o.head?s:c,h=o.goalColumn,p=null!==(u=o.bidiLevel)&&void 0!==u?u:void 0,m=q.jT.range(d,f,h,p);return n=n.replaceRange(m,e),i=!0,r=!0,"break"}};i=!1;for(var a=0;a<n.ranges.length;a++){if("break"===o(a))break}}while(i);return r?[e,{selection:n,sequential:!0}]:e})),qa=[Va,za,ja],$a="cm-git-conflict-marker-yours",Ya="cm-git-conflict-marker-base",Ka="cm-git-conflict-marker-middle",Qa="cm-git-conflict-marker-theirs",Ja="cm-git-conflict-marker-hanging",el="cm-git-conflict-content-yours",tl="cm-git-conflict-content-base",nl="cm-git-conflict-content-theirs";function rl(e){var t=e.background,n=e.color,r=e.noBorder,i=void 0!==r&&r,o={color:n,backgroundColor:t,backgroundClip:"padding-box",paddingTop:C.TV.space4,paddingBottom:C.TV.space4,fontWeight:C.TV.fontWeightBold};return i||(o.borderLeft="4px solid rgba(0, 150, 255, 0.1)",o.paddingLeft="2px"),o}function il(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var ol=j.tk.theme((Fa={},(0,qe.Z)(Fa,".".concat($a),rl({background:"rgba(0, 150, 255, 0.1)",color:C.TV.blueStrongest,noBorder:!0})),(0,qe.Z)(Fa,".".concat(Ka),rl({background:"rgba(255, 0, 0, 0.1)",color:C.TV.redStrongest})),(0,qe.Z)(Fa,".".concat(Ya),rl({background:"rgba(255, 165, 0, 0.1)",color:C.TV.orangeStrongest})),(0,qe.Z)(Fa,".".concat(Qa),rl({background:"rgba(0, 150, 255, 0.1)",color:C.TV.blueStrongest,noBorder:!0})),(0,qe.Z)(Fa,".".concat(Ja),rl({background:"rgba(100, 150, 255, 0.1)",color:C.TV.blueStrongest,noBorder:!0})),(0,qe.Z)(Fa,".".concat(el),il({background:"rgba(0, 255, 0, 0.1)"})),(0,qe.Z)(Fa,".".concat(nl),il({background:"rgba(255, 0, 0, 0.1)"})),(0,qe.Z)(Fa,".".concat(tl),il({background:"rgba(255, 165, 0, 0.1)"})),Fa)),al={yours:{marker:j.p.line({class:$a}),content:j.p.line({class:el})},base:{marker:j.p.line({class:Ya}),content:j.p.line({class:tl})},middle:{marker:j.p.line({class:Ka})},theirs:{marker:j.p.line({class:Qa}),content:j.p.line({class:nl})},hanging:{marker:j.p.line({class:Ja})}},ll=function(){"use strict";function e(t){(0,H.Z)(this,e),this.builder=new q.f_,this.doc=t}var t=e.prototype;return t.add=function(e,t){var n=this.doc.lineAt(e.from);if(n.to>=e.to)this.builder.add(n.from,n.from,t);else for(var r=n.from;r<=e.to;)this.builder.add(r,r,t),r=this.doc.lineAt(r).to+1},t.finish=function(){return this.builder.finish()},e}(),cl=j.tk.decorations.from(Ha,(function(e){return function(t){var n=t.state.doc,r=new ll(n),i=!0,o=!1,a=void 0;try{for(var l,c=e.hunks[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;t.viewport.from>s.to||t.viewport.to<s.from||(r.add(s.markers.yours,al.yours.marker),s.content.yours&&r.add(s.content.yours,al.yours.content),s.markers.base&&r.add(s.markers.base,al.base.marker),s.content.base&&r.add(s.content.base,al.base.content),r.add(s.markers.middle,al.middle.marker),s.content.theirs&&r.add(s.content.theirs,al.theirs.content),r.add(s.markers.theirs,al.theirs.marker))}}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.finish()}})),sl=j.tk.decorations.from(Ha,(function(e){return function(){var t=new q.f_,n=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.add(l.from,l.from,al.hanging.marker)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.finish()}})),ul=[q.Wl.lowest(ol),cl,sl],dl=[Ha,qa,ul],fl=n(67112),hl=new rt.j((function(e,t,n,r){var i=[];return n||i.push((0,fl.W2)(e,t)),r||i.push(dl),0===i.length?null:i}));var pl,ml=n(5105),vl=n(86813),gl=n(20476),yl=n(7986),Zl=n(52145),bl="cm-transform-diff-line-deletion-base",wl="cm-transform-diff-line-deletion",xl="cm-transform-diff-text-deletion",Cl="cm-transform-diff-line-insertion-base",kl="cm-transform-diff-line-insertion",Sl="cm-transform-diff-text-insertion",El="cm-transform-diff-number-marker",Tl="rgba(180, 0, 0, 0.1)",Rl="rgba(180, 0, 0, 0.125)",Dl="rgba(0, 180, 0, 0.1)",Il="rgba(0, 180, 0, 0.125)";function _l(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var Bl,Gl,Pl=j.tk.theme((pl={},(0,qe.Z)(pl,".".concat(Cl,", .").concat(kl),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(C.TV.accentPrimaryDimmest," !important")}}),(0,qe.Z)(pl,".".concat(bl),{background:_l(Tl),backgroundClip:"content-box"}),(0,qe.Z)(pl,".".concat(wl),{background:_l(Tl,Rl),backgroundClip:"content-box"}),(0,qe.Z)(pl,".".concat(Cl),{background:_l(Dl),backgroundClip:"content-box"}),(0,qe.Z)(pl,".".concat(kl),{background:_l(Dl,Il),backgroundClip:"content-box"}),(0,qe.Z)(pl,".".concat(Sl),{display:"inline-block",background:Il}),(0,qe.Z)(pl,".".concat(xl),{display:"inline-block",background:Rl}),(0,qe.Z)(pl,".".concat(El),{opacity:.5}),pl)),Al=n(57600),Nl=n(43758),Ul=n(37105),Ll=q.r$.define({combine:function(e){return null!==(Bl=e.filter(Boolean)[0])&&void 0!==Bl?Bl:null}}),Ol=q.QQ.define({create:function(){return{diff:null,tree:Al.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(Ll),o=null===(n=t.state.facet(Qe.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===Al.mp.empty?e:{diff:null,tree:Al.mp.empty};var a=e.diff,l=e.tree;return a&&a.b.eq(i)?t.docChanged&&(a=a.updateA(t.newDoc,t.changes)):(a=Nl.z.create(t.newDoc,i),l=Al.mp.empty),(null===(r=t.startState.facet(Qe.dK))||void 0===r?void 0:r.parser)!==o&&(l=Al.mp.empty),o&&l.length!==a.b.length?{diff:a,tree:l=(0,Ul.p)({parser:o,text:a.b,maxTime:16,base:l})}:e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),Xl=n(77824),Ml=n(57385),Fl=n(3341),Wl=n.n(Fl),Hl=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e,r,i){var o;return(0,H.Z)(this,n),(o=t.call(this)).line=e,o.index=r,o.changed=i,o}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(Cl):"cm-line ".concat(kl),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!==s&&void 0!==s?s:"",t.appendChild(u)}}catch(k){r=!0,i=k}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,h=null,p=null,m=function(t,n){if(!h)throw new Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-h.from,n-h.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!==o&&void 0!==o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!h){var v=this.line[f].text;h={from:d,to:d+v.length}}if(!p){var g=!0,y=!1,Z=void 0;try{for(var b,w=this.changed[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;if(!(x.from>=h.to||x.to<=d)){var C=document.createElement("span");C.className=Sl,p={from:x.from,to:x.to,dom:C},d<p.from&&m(t,p.from),t.appendChild(C);break}}}catch(k){y=!0,Z=k}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}}p?(d<p.to&&m(p.dom,p.to),d>=p.to&&(p=null)):m(t,h.to),d>=h.to&&(h=null,f++)}return t},r.eq=function(e){var t,r;return(0,$e.Z)(e,n)&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&Wl()(this.line,e.line)&&Wl()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,Zt.Z)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(j.l9),Vl=j.p.line({class:bl}),zl=j.p.line({class:wl}),jl=j.p.mark({class:xl}),ql=j.tk.decorations.compute([Ol],(function(e){var t=function(e,t){if(r.getLineChangeType(e.number,Xl.MF.A)===Xl.dQ.COVERED)o.push(zl.range(e.from));else{o.push(Vl.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,Xl.Po)(e,t,Xl.MF.A,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(jl.range(s.from,s.to))}}catch(u){i=!0,a=u}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(Ol,!1);if(!n||!n.diff)return j.p.none;var r=n.diff,i=n.tree,o=[],a=!0,l=!1,c=void 0;try{for(var s,u=r.chunks[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if(d.fromA!==d.endA)for(var f=r.a.lineAt(d.fromA),h=r.a.lineAt(d.endA),p=f.number;p<=h.number;p++)t(r.a.line(p),d);else d.fromB===d.endB&&t(r.a.lineAt(d.fromA),d);if(d.fromB!==d.toB)for(var m=r.b.lineAt(d.fromB),v=(0,Ml.CT)(i,r.b,e,d.fromB,d.endB),g=0;g<v.length;g++){var y=v[g],Z=r.b.line(m.number+g),b=r.getLineChangeType(Z.number,Xl.MF.B)===Xl.dQ.COVERED?null:(0,Xl.Po)(Z,d,Xl.MF.B,!0),w=j.p.widget({widget:new Hl(y,Z.number,b),block:!0,side:g+1}),x=Math.min(d.endA,r.a.length);o.push(w.range(x))}}}catch(C){l=!0,c=C}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return j.p.set(o,!0)})),$l=n(12606),Yl=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e){var r;return(0,H.Z)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className=El,e.textContent=String(this.index),e},r.eq=function(e){return this.index===e.index},n}(j.SJ),Kl=$l.X4.of((function(e,t){if((0,$e.Z)(t,Hl))return new Yl(t.index)})),Ql=q.r$.define({enables:function(e){return[Ll.computeN([e],(function(t){return t.facet(e)})),Ol,Pl,ql,Kl]}}),Jl=n(96037);!function(e){e[e.Compare=0]="Compare",e[e.Original=1]="Original",e[e.Suggestion=2]="Suggestion"}(Gl||(Gl={}));var ec=n(18967),tc=q.Py.define(),nc=q.QQ.define({create:function(){return Gl.Suggestion},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(tc))e=l.value;else if(l.is(ec.Q))e=null;else if(l.is(ec.h)){var c=t.state.field(Jl.$);if("transformCode"===(null===c||void 0===c?void 0:c.type)&&l.value){var s=t.startState.field(Jl.u),u=l.value;!s&&u&&(e=Gl.Suggestion)}}}}catch(d){r=!0,i=d}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}}),rc=q.QQ.define({create:function(){return null},update:function(e,t){if(!(0,kr.a)(t,"doc",Jl.$,dn.Yp,nc,Jl.u))return e;var n=t.state.field(Jl.$),r=t.state.facet(dn.Yp),i=t.state.field(nc);if(!n||!r||n.codeReference.filePath!==r||i!==Gl.Suggestion)return null;var o,a=n.codeReference.range.indexFrom,l=n.codeReference.range.indexTo,c=t.state.doc.slice(a,l),s=null!==(o=t.state.field(Jl.u))&&void 0!==o?o:"",u=c.lines,d=a,f=s.split(t.state.lineBreak).length-u;return e&&e.after===d&&e.offset===f?e:{after:d,offset:f}}}),ic=$l.gy.of((function(e,t){var n=e.state.doc.lineAt(t.from),r=e.state.field(rc);if(r&&!(n.from<=r.after))return new $l.un(n.number+r.offset)})),oc=$l.X4.of((function(e,t){if((0,$e.Z)(t,ac))return new $l.un(t.index)})),ac=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e,r,i){var o;return(0,H.Z)(this,n),(o=t.call(this)).line=e,o.block=r,o.index=i,o}var r=n.prototype;return r.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var t=!0,n=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=a.text,c=a.tags,s=document.createElement("span");s.textContent=l||"\xa0",c&&(s.className=c),e.appendChild(s)}}catch(u){n=!0,r=u}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},r.eq=function(e){return this.index===e.index&&(0,Ml.gj)(this.line,e.line)},r.ignoreEvent=function(){return!1},(0,Zt.Z)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(j.l9),lc=j.tk.decorations.compute([Qe.dK,Jl.$,Jl.u,nc,Ol,dn.Yp,q.yy.lineSeparator],(function(e){var t,n=e.field(Jl.$),r=e.facet(dn.Yp),i=e.field(nc);if(!n||"transformCode"!==n.type||!r||n.codeReference.filePath!==r||i!==Gl.Suggestion)return j.p.none;var o,a,l=n.codeReference.range.indexFrom,c=n.codeReference.range.indexTo,s=e.doc.lineAt(l),u=e.doc.lineAt(c),d=e.toText(null!==(o=e.field(Jl.u))&&void 0!==o?o:""),f=e.changes({from:l,to:c,insert:d}),h=f.apply(e.doc),p=l+d.length,m=null===(t=e.facet(Qe.dK))||void 0===t?void 0:t.parser,v=null;if(m)v=(0,Ul.p)({parser:m,text:h,changes:f,base:e,upTo:p}),a=(0,Ml.CT)(v,h,e,l,p);else{a=[];var g=!0,y=!1,Z=void 0;try{for(var b,w=d.iterLines()[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;a.push([{text:x}])}}catch(R){y=!0,Z=R}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}}var C=[];a.length>1&&l!==c&&0!==u.length&&c===u.to&&c<e.doc.length?C.push(j.p.replace({inclusive:!1,block:!0}).range(l,c)):C.push(j.p.replace({inclusiveStart:!1,block:!0}).range(l,c));for(var k=0;k<a.length;k++){var S=a[k],E=s.number+k,T=j.p.widget({widget:new ac(S,k>0,E),inlineOrder:!0,side:k+1,block:k>0});C.push(T.range(l))}return j.p.set(C,!0)})),cc=[rc,ic,oc,lc],sc=n(58542),uc=RegExp(".*?```(\\w+)\\n(.*?)(?:$|\\n$|\\n`$|\\n``$|\\n```)","gs");function dc(e){return(0,b.useMemo)((function(){if(!(null===e||void 0===e?void 0:e.text))return null;var t=function(e,t){for(var n,r=[];null!==(n=uc.exec(e));){var i=n[1],o=n[2];if(!1===t){var a=o.substring(0,o.lastIndexOf("\n"));r.push({language:i,code:a})}else r.push({language:i,code:o})}return r}((null===e||void 0===e?void 0:e.text)||"");return t.length>0?t[0].code:null}),[null===e||void 0===e?void 0:e.text])}var fc=n(2580),hc=n(29161),pc=n(25367),mc=n(34204),vc=n(6108),gc=(0,en.X)({inlinePocketContainer:[C.l0.width("100%"),C.l0.backgroundColor.backgroundRoot,C.l0.position.relative],caretWrapper:[C.l0.position.absolute,C.l0.height("fit-content"),C.l0.display.flex,C.l0.flex.row,C.l0.align.center,{rotate:"180deg"}],inlinePocketWrapper:[C.l0.font.default,C.l0.p(4),{borderTopWidth:C.TV.borderWidthDefault,borderBottomWidth:C.TV.borderWidthDefault,borderStyle:"solid",borderColor:C.TV.accentPrimaryDefault}],headerContainer:[C.l0.rowWithGap(4),C.l0.py(4),C.l0.align.center],authorContainer:[C.l0.rowWithGap(4),C.l0.flex.growAndShrink(1),C.l0.px(4),C.l0.pt(4),C.l0.align.center],inputContainer:[C.l0.px(4),C.l0.py(8),C.l0.rowWithGap(8),C.l0.align.center],sendOrGenerateButton:[C.l0.height(32),C.l0.width(32),vc.gU.filled],input:[{height:28,width:"100%",resize:"vertical"}],messageActionWrapper:[C.l0.rowWithGap(4),C.l0.justify.spaceBetween,C.l0.p(4)],messageActionContainer:[C.l0.rowReverseWithGap(4)],messageContainer:[C.l0.rowWithGap(8),C.l0.align.center],messageMarkdown:[C.l0.colWithGap(8),C.l0.p(4),C.l0.flex.growAndShrink(1),{whiteSpace:"normal"}],messageError:[C.l0.p(4)],messageText:[C.l0.color.accentNegativeStronger]}),yc=n(95862),Zc=n(33145),bc=function(e){var t=e.isLoading,n=e.autoFocus,r=e.onSend,i=e.onStop,o=e.onRegenerate,l=e.canAbort,c=function(){requestAnimationFrame((function(){v()})),r(d,d===y.current),y.current=d},s=(0,b.useId)(),u=(0,b.useState)(""),d=u[0],f=u[1],h=(0,b.useRef)(null),p=(0,Eo.Z)(),m=p.ref,v=p.update,g=(0,b.useCallback)((function(){var e;null===(e=h.current)||void 0===e||e.focus()}),[]),y=(0,b.useRef)(null),Z=(0,b.useCallback)((function(){l&&((0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_RESPONSE_STOPPED),i())}),[l,i]),w=!l&&!t&&d===y.current;(0,b.useLayoutEffect)((function(){n&&g()}));var C=l&&!t,k=!l&&!t,S="Loading...";return k?S="Send message":C&&(S="Message generating... Click to stop"),(0,a.BX)(x.G,{css:gc.inputContainer,children:[(0,a.tZ)(mo.B,{dataCy:"ghostwriter-inline-input",id:s,ref:(0,mc.lq)(m,h),css:gc.input,autoSize:!0,placeholder:"Write your prompt",value:d,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey?(f((function(e){var t,n;return e.slice(0,null===h||void 0===h||null===(t=h.current)||void 0===t?void 0:t.selectionStart)+"\n"+e.slice(null===h||void 0===h||null===(n=h.current)||void 0===n?void 0:n.selectionEnd,e.length)})),requestAnimationFrame((function(){v()}))):c())},onChange:function(e){return f(e.currentTarget.value)}}),w?(0,a.tZ)(jn.hU,{alt:"Regenerate",onClick:function(){o(),c()},css:gc.sendOrGenerateButton,children:(0,a.tZ)(yc.Z,{size:16})}):(0,a.tZ)(jn.hU,{dataCy:"ghostwriter-inline-submit",alt:S,size:28,type:"submit",onClick:function(){C&&Z(),k&&c()},disabled:t,css:gc.sendOrGenerateButton,children:C?(0,a.tZ)(Zc.Z,{size:16}):(0,a.tZ)(bo.Z,{size:16})})]})},wc=n(85465),xc=n(15064);function Cc(e){var t=e.message,n=(0,Yr.gp)(),r=!dc(t)&&!n,i="Assistant"===(null===t||void 0===t?void 0:t.attribution)&&"string"===typeof(null===t||void 0===t?void 0:t.error),o=!i&&!r,l=(0,ur.Z)((function(){return(0,xc.BW)(null===t||void 0===t?void 0:t.id)}),[null===t||void 0===t?void 0:t.id]);return t?(null===t||void 0===t?void 0:t.aborted)||o?null:(0,a.tZ)(x.G,{css:gc.messageContainer,children:(0,a.BX)(x.G,{css:gc.messageMarkdown,children:[r?(0,a.tZ)(wc.J,{text:t.text,textColor:Hi.TV.foregroundDefault,codeComponent:l}):null,i?(0,a.tZ)(x.G,{css:gc.messageError,children:(0,a.tZ)(Se.xv,{css:gc.messageText,children:t.error})}):null]})}):null}var kc=n(1645),Sc=n(75509),Ec=n(71549),Tc=n(53128);function Rc(e){var t=e.message,n=e.onSend,r=e.onStop,i=e.onAccept,o=e.onDiscard,l=e.onRegenerate,c=e.onClose,s=e.onLoadingChanged,u=e.updateCodeBlock,d=e.diffSelectionState,f=e.updateDiffSelectionState,h=e.autoFocus,p=e.intent,m=(0,pc.T9)().useAdvancedModel,v=Boolean(null===t||void 0===t?void 0:t.loading),g=Boolean((null===t||void 0===t?void 0:t.stopReason)||(null===t||void 0===t?void 0:t.aborted)),y=(0,b.useRef)(null),Z=dc(t),w=(0,Tc.WS)(t);(0,b.useEffect)((function(){s(v)}),[v,s]),(0,b.useEffect)((function(){return u(Z)}),[Z,u]);var C=!Z,k=!("Assistant"===(null===t||void 0===t?void 0:t.attribution)&&"string"===typeof(null===t||void 0===t?void 0:t.error))&&!C;return(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:gc.headerContainer,children:[(0,a.BX)(x.G,{css:gc.authorContainer,children:[(0,a.tZ)(hc.z,{author:{username:"AI",image:"/public/images/ghostwriter/blurple-circle.svg"},advancedGwAvatar:m,intent:p,smallAvatar:!0}),v?(0,a.tZ)(Un.Z,{size:16}):null]}),(0,a.tZ)(jn.hU,{alt:"Close",onClick:c,type:"button",children:(0,a.tZ)(Nn.Z,{})})]}),(0,a.tZ)(bc,{isLoading:v,autoFocus:h,onSend:n,onStop:r,onRegenerate:l,canAbort:w}),(0,a.tZ)(Cc,{message:t}),(0,a.tZ)(x.G,{css:gc.messageActionWrapper,children:t?(0,a.BX)(a.HY,{children:[(0,a.tZ)(x.G,{children:null!==d&&void 0!==f?(0,a.BX)(kc.hE,{name:"Diff Style",value:d,onChange:f,row:!0,children:[(0,a.tZ)(kc.rK,{dataCy:"ghostwriter-inline-diff-suggestion",value:Gl.Suggestion,icon:(0,a.tZ)(Jt.Z,{}),id:"Suggestion",text:"Suggestion"}),(0,a.tZ)(kc.rK,{dataCy:"ghostwriter-inline-diff-compare",value:Gl.Compare,icon:(0,a.tZ)(Ec.Z,{}),id:"Compare",text:"Compare"}),(0,a.tZ)(kc.rK,{value:Gl.Original,icon:(0,a.tZ)(Sc.Z,{}),id:"Original",text:"Original"})]}):null}),(0,a.BX)(x.G,{css:gc.messageActionContainer,children:[k?(0,a.tZ)(zn.zx,{dataCy:"ghostwriter-inline-accept-suggestion",ref:y,colorway:"primary",text:"Accept Suggestion",iconLeft:(0,a.tZ)(qn.Z,{}),onClick:i,disabled:!g}):null,(0,a.tZ)(zn.zx,{text:"Discard",iconLeft:(0,a.tZ)(fc.Z,{}),onClick:o,disabled:!g})]})]}):null})]})}var Dc=function(){(0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_REGENERATED,{action:"GENERATE"})},Ic=function(e){var t=e.codeReference,n=e.onClose,r=e.updateCodeBlock,i=e.insertCode,o=e.autoFocus,l=e.onLoadingChanged,c=(0,Yr.ql)(),s=(0,sc.oQ)(t.filePath),u=Boolean(null===s||void 0===s?void 0:s.loading),d=dc(s),f=(0,Tc.tz)(),h=(0,Tc.WS)(s),p=(0,Kr.$0)(),m=(0,Kr.PM)();(0,b.useEffect)((function(){l(u)}),[u,l]),(0,b.useEffect)((function(){return r(d)}),[d,r]);var v=(0,b.useCallback)((function(){h&&s&&f({messageId:s.id})}),[f,s,h]),g=(0,b.useCallback)((function(){v(),n()}),[v,n]);return(0,a.tZ)(Rc,{message:s,intent:"GENERATE",onSend:function(){var e=(0,Ze.Z)((function(e){return(0,be.__generator)(this,(function(n){switch(n.label){case 0:return[4,c({chatMessage:{type:"generateCode",text:e,codeReference:t}})];case 1:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),onAccept:function(){d?(i(d),(null===s||void 0===s?void 0:s.id)&&(p(s.id),m(t.filePath)),(0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_ACCEPTED,{action:"GENERATE"})):g()},onDiscard:function(){(0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_DISCARDED,{action:"GENERATE"}),g()},onRegenerate:Dc,onClose:g,onStop:v,onLoadingChanged:l,updateCodeBlock:r,autoFocus:o})},_c=n(98510),Bc=function(){(0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_REGENERATED,{action:"TRANSFORM"})},Gc=function(e){var t=e.codeReference,n=e.replaceHighlightedAreaWithCode,r=e.updateCodeBlock,i=e.diffSelectionState,o=e.updateDiffSelectionState,l=e.onClose,c=e.autoFocus,s=e.onLoadingChanged,u=(0,Yr.ql)(),d=(0,_c.iH)(t.filePath),f=Boolean(null===d||void 0===d?void 0:d.loading),h=dc(d),p=(0,Tc.tz)(),m=(0,Tc.WS)(d);(0,b.useEffect)((function(){s(f)}),[f,s]),(0,b.useEffect)((function(){return r(h)}),[h,r]);var v=(0,b.useCallback)((function(){m&&d&&p({messageId:d.id})}),[p,d,m]),g=(0,b.useCallback)((function(){v(),l()}),[v,l]);return(0,a.tZ)(Rc,{message:d,intent:"TRANSFORM",onSend:function(){var e=(0,Ze.Z)((function(e){return(0,be.__generator)(this,(function(n){switch(n.label){case 0:return[4,u({chatMessage:{type:"transformCode",text:e,codeReference:t}})];case 1:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),onAccept:function(){h?(n(h),(0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_ACCEPTED,{action:"TRANSFORM"})):g()},onDiscard:function(){(0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_DISCARDED,{action:"TRANSFORM"}),g()},onRegenerate:Bc,onClose:g,onStop:v,onLoadingChanged:s,updateCodeBlock:r,diffSelectionState:i,updateDiffSelectionState:o,autoFocus:c})},Pc=n(18395),Ac=function(e){var t=e.codeReference,n=e.onClose,r=e.onLoadingChanged,i=(0,Yr.Gd)(),o=(0,pc.T9)().useAdvancedModel,l=(0,Kr.OT)(),c=(0,Pc.j)(t.filePath),s=(0,Tc.tz)(),u=(0,Tc.WS)(c),d=Boolean(null===c||void 0===c?void 0:c.loading);(0,b.useEffect)((function(){r(d)}),[d,r]);var f=(0,b.useCallback)((function(){u&&c&&s({messageId:c.id})}),[s,c,u]),h=(0,b.useCallback)((function(){f(),n()}),[f,n]),p=null,m=(0,ur.Z)((function(){return(0,xc.BW)(null===c||void 0===c?void 0:c.id)}),[null===c||void 0===c?void 0:c.id]);if(c){var v=c.attribution,g=c.loading,y=c.error,Z="Assistant"===v;p=(0,a.BX)(x.G,{css:[gc.messageContainer,g&&C.l0.px(16)],children:[g?(0,a.tZ)(Un.Z,{}):null,(0,a.BX)(x.G,{css:gc.messageMarkdown,dataCy:"ghostwriter-inline-explain-content",children:[(0,a.tZ)(wc.J,{text:c.text,textColor:Hi.TV.foregroundDefault,codeComponent:m}),Z&&"string"===typeof y?(0,a.tZ)(x.G,{css:gc.messageError,children:(0,a.tZ)(Se.xv,{css:gc.messageText,children:y})}):null]})]})}return(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:gc.headerContainer,children:[(0,a.tZ)(x.G,{css:gc.authorContainer,children:(0,a.tZ)(hc.z,{author:{username:"AI",image:"/public/images/ghostwriter/blurple-circle.svg"},advancedGwAvatar:o,intent:"EXPLAIN",smallAvatar:!0})}),(0,a.tZ)(jn.hU,{dataCy:"ghostwriter-inline-close",alt:"Close",onClick:h,type:"button",children:(0,a.tZ)(Nn.Z,{})})]}),p,p?(0,a.BX)(x.G,{css:gc.messageActionContainer,children:[(0,a.tZ)(zn.zx,{dataCy:"ghostwriter-inline-reply-in-chat",colorway:"primary",text:"Reply in Chat",iconLeft:(0,a.tZ)(ji.Z,{}),onClick:function(){(0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_REPLY_IN_CHAT),l()}}),(0,a.tZ)(zn.zx,{text:"Retry",iconLeft:(0,a.tZ)(yc.Z,{}),onClick:function(){c&&((0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_REGENERATED,{action:"EXPLAIN"}),i({responseId:c.id,action:"EXPLAIN"}))}})]}):null]})},Nc=n(65611),Uc=function(e){var t=e.children,n=e.onEscapeKey,r=e.caretPosition,i=[12,8];switch((0,ye.Z)().preferences.fontSize){case 10:i=[8,6];break;case 14:i=[10,6];break;case 18:i=[12,8];break;case 24:i=[14,10]}return(0,a.BX)(x.G,{css:gc.inlinePocketContainer,onKeyDown:function(e){"Escape"===e.key&&n()},children:[(0,a.tZ)(x.G,{css:gc.inlinePocketWrapper,children:t}),null!==r&&(0,a.tZ)("span",{css:[gc.caretWrapper,C.l0.bottom(-i[1]),C.l0.left(r)],children:(0,a.tZ)(xo,{caretSize:i})})]})},Lc=n(75165),Oc=function(e){var t=e.onClose,n=(0,pc.T9)().useAdvancedModel;return(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:gc.headerContainer,children:[(0,a.tZ)(x.G,{css:gc.authorContainer,children:(0,a.tZ)(hc.z,{author:{username:"AI",image:"/public/images/ghostwriter/blurple-circle.svg"},advancedGwAvatar:n,intent:"NONE",smallAvatar:!0})}),(0,a.tZ)(jn.hU,{alt:"Close",onClick:t,type:"button",children:(0,a.tZ)(Nn.Z,{})})]}),(0,a.tZ)(x.G,{css:gc.messageContainer,children:(0,a.tZ)(Lc.Z,{textVariant:"text",showImage:!1})})]})},Xc=q.Py.define(),Mc=q.Py.define(),Fc=function(e){var t=e.view,n=e.insert,r=e.scrollIntoView;if(e.overwrite)t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:Xc.of(null),scrollIntoView:r,annotations:ai.Z.of(!0)});else{var i=t.state.selection.main.head;t.dispatch({changes:{from:t.state.selection.main.from,insert:n},selection:{anchor:i+n.length},effects:Xc.of(null),scrollIntoView:r,annotations:ai.Z.of(!0)})}},Wc=q.QQ.define({create:function(){return null},update:function(e,t){e&&(e=e.map(t.changes));var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.is(Xc)&&(e=t.changes.invert(t.startState.doc)),l.is(Mc)&&(e=null)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function Hc(e,t,n){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,Qo.r6)(t);return{code:i,filePath:t,fileVersion:n,range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o}}var Vc=new Be.Jf((function(e){var t=e.codeReference,n=e.type,r=e.autoFocus,i=e.insertCode,o=e.replaceHighlightedAreaWithCode,l=e.updateCodeBlock,c=e.diffSelectionState,s=e.updateDiffSelectionState,u=e.onClose,d=e.getCaretPosition,f=e.onLoadingChanged,h=null,p=d(t),m=(0,b.useCallback)((function(){var e=new Map([["explainCode","EXPLAIN"],["generateCode","GENERATE"],["transformCode","TRANSFORM"]]);e.has(n)&&(0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_CLOSED,{action:e.get(n)}),u()}),[u,n]);return"explainCode"===n?h=(0,a.tZ)(Uc,{caretPosition:p,onEscapeKey:m,children:(0,a.tZ)(Ac,{codeReference:t,onClose:m,onLoadingChanged:f})}):"generateCode"===n?h=(0,a.tZ)(Uc,{caretPosition:p,onEscapeKey:m,children:(0,a.tZ)(Ic,{codeReference:t,onClose:m,insertCode:i,autoFocus:r,updateCodeBlock:l,onLoadingChanged:f})}):"transformCode"===n?h=(0,a.tZ)(Uc,{caretPosition:p,onEscapeKey:m,children:(0,a.tZ)(Gc,{codeReference:t,onClose:m,autoFocus:r,replaceHighlightedAreaWithCode:o,updateCodeBlock:l,diffSelectionState:c,updateDiffSelectionState:s,onLoadingChanged:f})}):"ghostwriterKillswitch"===n&&(h=(0,a.tZ)(Uc,{caretPosition:p,onEscapeKey:u,children:(0,a.tZ)(Oc,{onClose:u})})),(0,a.tZ)(Nc.Z,{bsod:!0,tags:{ai:!0},extras:{type:n},origin:"ErrorBoundary: InlineAiWidget",children:h})})),zc=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e){var r,i=e.codeReference,o=e.type,a=e.diffSelectionState;return(0,H.Z)(this,n),(r=t.call(this)).codeReference=i,r.type=o,r.diffSelectionState=a,r}var o=n.prototype;return o.toDOM=function(e){var t=this,n=t.codeReference,o=t.type,a=t.diffSelectionState,l=Vc.create({codeReference:n,type:o,diffSelectionState:a,onClose:function(){e.dispatch({effects:ec.Q.of(null)}),e.dispatch({selection:{anchor:n.range.indexTo,head:n.range.indexTo}}),e.hasFocus||e.focus()},insertCode:function(t){Fc({view:e,insert:t,scrollIntoView:!0}),e.dispatch({effects:ec.Q.of(null)}),e.hasFocus||e.focus()},replaceHighlightedAreaWithCode:function(t){e.dispatch({changes:{from:n.range.indexFrom,to:n.range.indexTo,insert:t},scrollIntoView:!0,effects:ec.Q.of(null),annotations:ai.Z.of(!0)}),e.hasFocus||e.focus()},updateCodeBlock:function(t){e.dispatch({effects:ec.h.of(t)})},updateDiffSelectionState:function(t){e.dispatch({effects:tc.of(t)})},autoFocus:!0,getCaretPosition:function(t){var n,r=t.range.indexFrom<=e.state.doc.length?null===(n=e.coordsAtPos(t.range.indexFrom))||void 0===n?void 0:n.right:null,i=e.dom.getBoundingClientRect().left;return r&&i?r-i-6:null},onLoadingChanged:function(t){var n=e.state.field(Jl.$);n&&n.loading!==t&&e.dispatch({effects:ec.Q.of((0,i.Z)((0,r.Z)({},n),{loading:t}))})}});l.className="cm-pocket-widget";var c=e.dom.querySelector(".cm-scroller"),s=e.dom.querySelector(".cm-gutters");return c&&s&&jc(l,c,s),l},o.updateDOM=function(e){var t=this;return Vc.update(e,(function(e){return(0,r.Z)({},e,{codeReference:t.codeReference,type:t.type,diffSelectionState:t.diffSelectionState,autoFocus:!1})})),!0},o.eq=function(e){return this.codeReference.range.indexFrom===e.codeReference.range.indexFrom&&this.codeReference.range.indexTo===e.codeReference.range.indexTo&&this.codeReference.filePath===e.codeReference.filePath&&this.codeReference.fileVersion===e.codeReference.fileVersion&&this.type===e.type&&this.diffSelectionState===e.diffSelectionState},n}(j.l9);function jc(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r+1,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px"),e.style.padding="4px 0 10px 0"}var qc=j.tk.updateListener.of((function(e){(0,ke.j)(e,ui.R,(function(){var t=(0,o.Z)(e.view.dom.querySelectorAll(".cm-pocket-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){jc(c.value,n,r)}}catch(u){a=!0,l=u}finally{try{i||null==s.return||s.return()}finally{if(a)throw l}}}}))})),$c=n(81382),Yc=n(61377),Kc=n(58125),Qc=n(44916),Jc=(0,en.X)({container:[C.l0.rowWithGap(2),C.l0.flex.row,C.l0.align.center,C.l0.textAlign.center,C.l0.cursor.pointer,C.l0.pr(4),{opacity:.6},C.l0.height("100%")],text:[C.l0.rowWithGap(4),C.l0.color.foregroundDimmest,{textTransform:"capitalize"}],shortcut:[C.l0.ml(4),{"& > div > div":{fontSize:"0.8em",paddingLeft:(0,$c.fP)(4),paddingRight:(0,$c.fP)(4),paddingTop:(0,$c.fP)(2),paddingBottom:(0,$c.fP)(2)}}]}),es=new Be.Jf((function(e){var t=e.onGenerateCode,n=e.onEditCode,r=e.hasSelection,i=e.flagEditorSelectionControls,o=(0,l.T3)(),c=r,s=c?"edit":"generate",u=(0,Kc.gf)(Qc.x.id),d=c?"Alt-t":"Alt-g";i&&(d=u);return(0,a.BX)(x.G,{css:Jc.container,onClick:function(){(0,Yt.j)(Ro.U3.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:s}),c?n():t()},children:[(0,a.tZ)("div",{css:Jc.text,children:(0,a.tZ)(Se.xv,{variant:"small",children:s})}),(0,a.tZ)("div",{css:Jc.shortcut,children:!o&&d?(0,a.tZ)(Yc.bM,{keyCombo:d,small:!0}):null})]})})),ts=j.tk.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),ns=function(e){var t=e.selection.main.head;return e.doc.lineAt(t)},rs=new rt.j((function(e,t,n){return q.QQ.define({create:function(e){return ns(e)},compare:Or(),update:function(e,t){return ns(t.state)},provide:function(r){return[ts,q.Wl.high((0,j.EY)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,kr.a)(e,r,Jl.$,sa.yn)},markers:function(i){var o,a,l=i.state.field(r,!1);if(!l)return[];var c=i.state.field(Jl.$,!1),s=i.state.field(sa.yn,!1),u=!i.state.selection.main.empty,d=!!c,f=0===i.state.doc.length,h=!!s;if(!u&&l.length>0||d||h||f)return[];var p=i.dom.querySelector(".cm-minimap-gutter"),m=(null===p||void 0===p?void 0:p.clientWidth)||0,v=l.to,g=(null===(o=i.dom.querySelector(".cm-ghostwriter-hint-marker"))||void 0===o?void 0:o.clientWidth)||0,y=i.lineBlockAt(v),Z=y.top,b=y.height,w=null===(a=i.coordsAtPos(v))||void 0===a?void 0:a.right,x=!1;if(u){if(n)return[];var C=i.dom.getBoundingClientRect().right-g-m;x=void 0!==w&&C<=w}return[new is({top:Z+i.documentPadding.top,height:b,right:m,pocketOpen:null!==c,hasSelection:u,hidden:x,activeEditor:i.hasFocus,onGenerateCode:e,onEditCode:t,flagEditorSelectionControls:n})]}}))]}})})),is=function(){"use strict";function e(t){(0,H.Z)(this,e),this.options=t}var t=e.prototype;return t.position=function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px"},t.draw=function(){var e=es.create({onEditCode:this.options.onEditCode,onGenerateCode:this.options.onGenerateCode,hasSelection:this.options.hasSelection,flagEditorSelectionControls:this.options.flagEditorSelectionControls});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor&&!this.options.hidden||(e.style.visibility="hidden"),this.position(e),e},t.eq=function(e){return this.options.top===e.options.top&&this.options.hasSelection===e.options.hasSelection&&this.options.pocketOpen===e.options.pocketOpen&&this.options.hidden===e.options.hidden},e}(),os=Hi.TV.blurpleDimmest,as=Hi.TV.accentPrimaryDimmest,ls=j.tk.theme({".cm-pocket-highlight":{backgroundColor:"rgba(120, 95, 255, 0.2)"},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(Hi.TV.blurpleDimmest,", ").concat(as,", ").concat(os,", ").concat(as,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),cs=j.tk.decorations.compute([Jl.$,nc,dn.Yp],(function(e){var t=e.field(Jl.$),n=e.facet(dn.Yp),r=e.field(nc);if(!t||!n||t.codeReference.filePath!==n)return j.p.none;var i=e.doc.lineAt(t.codeReference.range.indexFrom).from,o=j.p.widget({widget:new zc({codeReference:t.codeReference,type:t.type,diffSelectionState:r}),block:!0,side:0}).range(i);return j.p.set(o)})),ss=(0,j.EY)({above:!1,update:function(e){return(0,kr.a)(e,Jl.$)},markers:function(e){var t=e.state.field(Jl.$),n=e.state.facet(dn.Yp);if(!t||!n||t.codeReference.filePath!==n)return[];var r=t.codeReference.range.indexFrom,i=t.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var a=q.jT.range(r,i),l=t.loading&&t.codeReference.range.indexFrom<t.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return j.dc.forRange(e,l,a)}}),us=Ql.compute([Jl.$,Jl.u,dn.Yp,nc],(function(e){var t=e.field(Jl.$),n=e.field(Jl.u),r=e.facet(dn.Yp),i=e.field(nc);return t&&n&&r&&t.codeReference.filePath===r&&"transformCode"===t.type&&i===Gl.Compare?q.as.of({from:t.codeReference.range.indexFrom,to:t.codeReference.range.indexTo,insert:n},e.doc.length).apply(e.doc):null})),ds=Zl.V.compute([Jl.$,Jl.u,dn.Yp],(function(e){var t=e.field(Jl.$),n=e.field(Jl.u),r=e.facet(dn.Yp);return t&&n&&r&&t.codeReference.filePath===r&&"generateCode"===t.type?q.as.of({from:t.codeReference.range.indexTo,to:t.codeReference.range.indexTo,insert:n},e.doc.length):null}));var fs=n(35812),hs=n(97424),ps=[hs.Gj,hs._j,hs.yK,hs.gm,hs.ZF],ms=[hs.ZF],vs=new rt.j((function(e,t){return t?null:(0,fs.ZP)({key:"mod",rules:e?ps:ms})})),gs=n(43529);function ys(e,t){var n=performance.now();tt.kg.time(e,n-t)}var Zs=new rt.j((function(e){var t=e?.01:.001;return q.Wl.highest(j.tk.domEventHandlers({keydown:function(e){if(Math.random()<t){var n=e.timeStamp;requestAnimationFrame((function(){ys("editor input latency",n),"undefined"!==typeof requestIdleCallback?requestIdleCallback((function(){ys("editor input latency after layout",n)})):setTimeout((function(){ys("editor input latency after layout",n)}))}))}}}))})),bs=n(14113),ws=n(19692),xs=n(772),Cs=n(68975),ks=n(18988),Ss=n(21651),Es=n(14053),Ts=(0,en.X)({buttons:[C.l0.display.flex,C.l0.rowWithGap(4),C.l0.justify.end],input:[C.l0.colWithGap(4),C.l0.flex.grow(1)],gap:[C.l0.colWithGap(16)],label:[C.l0.color.foregroundDimmer,C.l0.fontSize(12),C.l0.height(24),C.l0.justify.center],flexRow:[C.l0.display.flex,C.l0.rowWithGap(8),C.l0.align.center]}),Rs={fontFamily:"text-security-disc"},Ds=x.K.label;function Is(e){var t=(0,se.Z)().secrets,n=(0,b.useId)(),r=(0,b.useId)(),i=(0,b.useState)(""),o=i[0],l=i[1],c=(0,b.useState)(e.initialValue),s=c[0],d=c[1],f=(0,b.useState)(!1),h=f[0],p=f[1],m=(0,b.useRef)(null);return(0,b.useEffect)((function(){var t;e.isOpen&&(null===(t=m.current)||void 0===t||t.focus(),(0,Yt.j)(Yt.U3.PASTE_SCANNER_USED,{action:"modal_opened",provider:null===e||void 0===e?void 0:e.provider}))}),[e.isOpen,null===e||void 0===e?void 0:e.provider]),(0,a.tZ)(ks.MT,{contain:!0,children:(0,a.tZ)(Ss.u,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,a.BX)(x.G,{css:Ts.gap,children:[(0,a.tZ)(Se.xv,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,a.BX)(x.G,{css:Ts.flexRow,children:[(0,a.BX)(x.G,{css:Ts.input,children:[(0,a.tZ)(Ds,{css:Ts.label,htmlFor:n,children:"Key"}),(0,a.tZ)(mo.II,{id:n,ref:m,value:o,onChange:function(e){return l(e.target.value)}})]}),(0,a.BX)(x.G,{css:Ts.input,children:[(0,a.BX)(x.G,{css:Ts.flexRow,children:[(0,a.tZ)(Ds,{css:Ts.label,htmlFor:r,children:"Value"}),(0,a.tZ)(jn.hU,{alt:"Toggle Secret",onClick:function(){return p((function(e){return!e}))},tooltipPlacement:"top",children:h?(0,a.tZ)(u.Z,{}):(0,a.tZ)(Es.Z,{})})]}),(0,a.tZ)(mo.II,{id:r,value:s,onChange:function(e){return d(e.target.value)},style:h?void 0:Rs})]})]}),(0,a.BX)(x.G,{css:Ts.buttons,children:[(0,a.tZ)(zn.zx,{text:"Cancel",onClick:e.onCancel}),(0,a.tZ)(zn.zx,{colorway:"primary",text:"Save Secret",disabled:0===o.length||0===s.length,onClick:(0,Ze.Z)((function(){return(0,be.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.writeSecret({key:o,value:s})];case 1:return n.sent(),e.onSaveSecret(o,s),(0,Yt.j)(Yt.U3.PASTE_SCANNER_USED,{action:"secret_created",provider:null===e||void 0===e?void 0:e.provider}),[2]}}))}))})]})]})})})}var _s=n(76092),Bs=n(79824),Gs=(0,en.X)({hint:[C.l0.align.center,C.l0.border({color:C.TV.outlineDimmer,direction:"top"}),C.l0.color.foregroundDimmest,C.l0.display.flex,C.l0.flex.row,C.l0.px(8),C.l0.py(4),C.l0.rowWithGap(8)],info:[C.l0.p(8)],key:[C.l0.px(4)],wrapper:[C.l0.backgroundColor.backgroundHigher,C.l0.borderRadius(4),C.l0.cursor.default,C.l0.font.default],mobileButtons:[C.l0.flex.grow(1)],mobileHint:[C.l0.justify.center]}),Ps={borderTop:"1px solid ".concat(C.TV.outlineDimmer),borderBottom:"1px solid ".concat(C.TV.outlineDimmer),borderRadius:0};function As(e){return(0,a.BX)(x.G,{css:Gs.wrapper,style:e.onMobile?Ps:void 0,children:[(0,a.BX)(x.G,{css:Gs.info,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,a.tZ)(x.G,{children:"The value you pasted looks like a secret."}),(0,a.tZ)(x.G,{children:e.supportsSecrets?"Store it securely using our Secrets feature.":"Anyone will be able to see this."})]}),e.onMobile?(0,a.tZ)(Us,(0,r.Z)({},e)):(0,a.tZ)(Ns,(0,r.Z)({},e))]})}function Ns(e){return(0,a.BX)(a.HY,{children:[e.supportsSecrets?(0,a.BX)(x.G,{css:Gs.hint,onClick:e.onClickUseSecrets,children:[(0,a.tZ)(_s.Z,{}),"Press",(0,a.tZ)(x.G,{css:Gs.key,children:(0,a.tZ)(Kc.bM,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}):null,(0,a.BX)(x.G,{css:Gs.hint,onClick:e.onClickPasteAnyway,children:[(0,a.tZ)(Bs.Z,{}),"Press",(0,a.tZ)(x.G,{css:Gs.key,children:(0,a.tZ)(Kc.bM,{keyCombo:"Enter",small:!0})}),"to paste anyway"]}),e.supportsSecrets?null:(0,a.BX)(x.G,{css:Gs.hint,onClick:e.onClickUndo,children:[(0,a.tZ)(Bs.Z,{}),"Press",(0,a.tZ)(x.G,{css:Gs.key,children:(0,a.tZ)(Kc.bM,{keyCombo:"Escape",small:!0})}),"to undo"]})]})}function Us(e){return(0,a.BX)(x.G,{css:[Gs.hint,Gs.mobileHint],children:[e.supportsSecrets?(0,a.tZ)(zn.zx,{css:Gs.mobileButtons,iconLeft:(0,a.tZ)(_s.Z,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}):null,(0,a.tZ)(zn.zx,{css:Gs.mobileButtons,iconLeft:(0,a.tZ)(Bs.Z,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway}),e.supportsSecrets?null:(0,a.tZ)(zn.zx,{css:Gs.mobileButtons,iconLeft:(0,a.tZ)(_s.Z,{}),text:"Undo",onClick:e.onClickUndo})]})}var Ls=n(4682),Os=(0,en.X)({border:[C.l0.border({color:Hi.TV.accentPrimaryDefault,direction:"y",width:1})],title:[C.l0.display.flex,C.l0.rowWithGap(8),C.l0.align.center,C.l0.justify.spaceBetween,C.l0.px(8),C.l0.pt(4),C.l0.font.default],wrapper:[C.l0.backgroundColor.backgroundRoot,C.l0.py(0),C.l0.position.relative,C.l0.zIndex(200)]});function Xs(e){var t;return t=e.onClose,(0,b.useEffect)((function(){var e=function(e){"Escape"===e.key&&t(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]),(0,a.tZ)(ks.MT,{autoFocus:!0,contain:!0,children:(0,a.tZ)(x.G,{css:Os.wrapper,children:(0,a.BX)(x.G,{css:Os.border,children:[(0,a.BX)(x.G,{css:Os.title,children:[(0,a.BX)(Se.xv,{multiline:!1,children:["Access the secret ",(0,a.tZ)("strong",{children:e.keyName}),":"]}),(0,a.tZ)(jn.hU,{alt:"Close",onClick:e.onClose,children:(0,a.tZ)(Nn.Z,{})})]}),(0,a.tZ)(go.Tg,{background:"root",children:(0,a.tZ)(Ls.Z,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var Ms=Zl.V.compute([bs.xg],(function(e){var t=e.field(bs.xg).iter();if(null===t.value)return null;for(var n=[];null!==t.value;){var r=t.from,i=t.to,o=t.value;n.push({from:r,to:i,insert:o.result.secret}),t.next()}return n}));var Fs=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e,r){var i;return(0,H.Z)(this,n),(i=t.call(this)).secret=e,i.as=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,Be.VV)((0,a.tZ)(As,{supportsSecrets:e.state.facet(bs.$X),onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:bs.Lo.of(t.secret)})},onClickPasteAnyway:function(){(0,bs.Pz)(e),e.focus()},onClickUndo:function(){e.dispatch({effects:bs.uh.of(t.secret.id)}),e.focus()}}));return"pocket"===this.as&&(n.style.zIndex="200",n.style.position="relative",this.adjustForGutter(n,e)),n},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(j.l9),Ws=Cs.t.compute([bs.xv],(function(e){var t=e.facet(dn.Yp),n=e.field(bs.xv);return n&&t?{key:"pasteScannerModal",node:function(e){return(0,a.tZ)(Is,{isOpen:!0,initialValue:n.result.secret,provider:n.result.provider,onSaveSecret:function(){var t=(0,Ze.Z)((function(t){var r,i;return(0,be.__generator)(this,(function(a){for(r=e.state.field(bs.xg).iter(),i=[];r.value;){var l=r.from,c=r.to,s=r.value;s.id===n.id&&(i.push(bs.uh.of(s.id)),i.push(bs.Yt.of({secret:t,from:l,to:c}))),r.next()}return e.dispatch({effects:(0,o.Z)(i).concat([bs.ZB.of(null)])}),[2]}))}));return function(e){return t.apply(this,arguments)}}(),onCancel:function(){return e.dispatch({effects:bs.ZB.of(null)})}})}}:null})),Hs=j.tk.decorations.compute([bs.Do],(function(e){var t=e.field(bs.Do).iter(),n=t.from,r=t.to,i=t.value,o=e.facet(dn.Yp);return i&&o?j.p.set(j.p.widget({widget:new Vs(i.key,o),side:1,block:!0}).range(n,r)):j.p.none})),Vs=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e,r){var i;return(0,H.Z)(this,n),(i=t.call(this)).key=e,i.filePath=r,i}var r=n.prototype;return r.toDOM=function(e){var t=(0,Be.VV)((0,a.tZ)(Xs,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:bs.qs.of(null)})},onInsert:function(t){e.dispatch(e.state.changeByRange((function(e){return{range:q.jT.cursor(e.from+t.length),changes:{from:e.from,to:e.to,insert:t}}}))),e.focus(),(0,Yt.j)(Yt.U3.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(t,e),t},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(j.l9),zs=[Ms,function(){var e=[bs.xv,bs.xg],t=function(e){if(null!=e.field(bs.xv,!1))return null;var t=e.field(bs.xg,!1);return t||null};return[j.hJ.compute(e,(function(e){var n=function(){var e=i.value,t=new Fs(e,"tooltip");return{v:{arrow:!0,pos:i.to,create:function(e){return{dom:t.toDOM(e)}}}}},r=t(e);if(!r)return null;if(e.facet(xs.h))return null;for(var i=r.iter();i.value;){var o=n();if("object"===(0,ws.Z)(o))return o.v}return null})),j.tk.decorations.compute(e,(function(e){var n=t(e);if(!n)return j.p.none;if(!e.facet(xs.h))return j.p.none;for(var r=n.iter();r.value;){var i=r.value,o=new Fs(i,"pocket");return j.p.set(j.p.widget({widget:o,side:1,block:!0}).range(r.to,r.to))}return j.p.none}))]}(),Ws,Hs],js=n(73175);var qs=new rt.j((function(e){return[bs.$X.of(!e),bs.Do,bs.xg,bs.xv,zs,bs.Gv]})),$s=j.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),Ys=j.tk.theme({".cm-ruler-element":{backgroundColor:C.TV.backgroundHigher}}),Ks=q.QQ.define({create:function(e){return 0===e.doc.length},update:function(e,t){return t.docChanged?0===t.state.doc.length:e}}),Qs=(0,j.EY)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,kr.a)(e,Js,Ks,ui.R)},markers:function(e){if(e.state.field(Ks,!1))return[];var t=e.state.facet(Js);if(0===t.length)return[];var n=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=i+e.defaultCharacterWidth*f;h<o&&n.push(new j.dc("cm-ruler-element",h,0,2,a))}}catch(p){c=!0,s=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return n}}),Js=q.r$.define({enables:[Ks,Qs,Ys]}),eu=new rt.j((function(e){return e.map((function(e){return Js.of(e)}))})),tu=n(1235),nu=n(91066),ru=n(19825),iu=j.tk.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:Hi.TV.backgroundDefault,borderLeft:"1px solid ".concat(Hi.TV.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),ou=q.QQ.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,t){return t.docChanged?0===t.state.doc.length||t.state.doc.lines>1e3:e}}),au=new rt.j((function(e,t,n){var r=function(){return{dom:document.createElement("div")}};return e?null:[iu,ou,nu.a.compute([ru.m,ou],(function(e){if(e.field(ou,!1))return null;if("blocks"!==t&&"characters"!==t)return null;var i=e.field(ru.m,!1),o={};if(i)for(var a=1;a<=e.doc.lines;a++)switch(i.getLineChangeType(a)){case Xl.dQ.COVERED:o[a]=n.values.global.greenDefault;break;case Xl.dQ.MODIFIED:o[a]=n.values.global.blueDefault}return{create:r,displayText:t,gutters:[o]}}))]})),lu=n(16783),cu=n.n(lu),su="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),uu="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),du=j.tk.theme({".cm-vws-space":{backgroundColor:C.TV.foregroundDimmest,maskImage:su,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":su,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:C.TV.foregroundDimmest,maskImage:uu,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":uu,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),fu=cu()((function(e,t,n){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(t).concat(n?" cm-vws-selected":"");return j.p.mark({class:r})}),(function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)}));function hu(e,t,n){var r=function(r){var a=function(r){var a=l.text[r],c=l.from+r;if(c<t||c>=n||" "!==a&&"\t"!==a)return"continue";var s=void 0;s=r>=h+p?"trailing":r>h?"enclosed":"leading";var d=u&&e.selection.ranges.some((function(e){return e.from<=c&&e.to>c}));(i[s]||d)&&o.push(fu(a,s,d).range(c,c+1))},l=e.doc.line(r),c=l.text.length;if(0===c)return"continue";var s=0===l.text.trim().length,u=Boolean(i.selected)&&e.selection.ranges.some((function(e){return!e.empty&&(e.from<l.to&&e.to>=l.from)}));if(!i.leading&&!i.enclosed&&!i.trailing&&!u)return"continue";if(s){if(i.leading||i.trailing||u)for(var d=function(r){var a=l.text[r],c=l.from+r;if(c<t||c>=n||" "!==a&&"\t"!==a)return"continue";var s=u&&e.selection.ranges.some((function(e){return e.from<=c&&e.to>c}));(i.leading||i.trailing||s)&&o.push(fu(a,"trailing",s).range(c,c+1))},f=0;f<c;f++)d(f);return"continue"}for(var h=c-l.text.trimStart().length,p=l.text.trim().length,m=0;m<c;m++)a(m)},i=e.facet(gu);if(!i.leading&&!i.enclosed&&!i.trailing&&!i.selected)return[];for(var o=[],a=e.doc.lineAt(t),l=e.doc.lineAt(n),c=a.number;c<=l.number;c++)r(c);return o}var pu,mu=function(){"use strict";function e(t){(0,H.Z)(this,e),this.decorations=j.p.set(hu(t.state,0,t.state.doc.length))}return e.prototype.update=function(e){if((0,kr.a)(e,gu))this.decorations=j.p.set(hu(e.state,0,e.state.doc.length));else{var t=e.state.facet(gu);if(e.docChanged||e.selectionSet&&t.selected){var n=this.decorations,r=null,i=null;if(e.selectionSet&&t.selected){var a=e.startState.selection.ranges.filter((function(e){return!e.empty})),l=(0,o.Z)(e.state.selection.ranges).concat((0,o.Z)(e.startState.selection.map(e.changes).ranges)).filter((function(e){return!e.empty}));a.length&&(r=q.jT.create(a)),l.length&&(i=q.jT.create(l))}if(e.docChanged&&e.changes.iterChangedRanges((function(t,n,o,a){var l=q.jT.range(e.startState.doc.lineAt(t).from,e.startState.doc.lineAt(n).to);r=r?r.addRange(l):q.jT.create([l]);var c=q.jT.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(c):q.jT.create([c])})),r){var c=r.ranges;n=n.update({filter:function(e,t){return!c.some((function(n){return n.from<=e&&n.to>=t}))},filterFrom:c[0].from,filterTo:c[c.length-1].to})}e.docChanged&&(n=n.map(e.changes)),i&&(n=n.update({add:i.ranges.map((function(t){return hu(e.state,t.from,t.to)})).flat()})),this.decorations=n}}},e}(),vu=j.lg.fromClass(mu,{decorations:function(e){return e.decorations}}),gu=q.r$.define({combine:function(e){return null!==(pu=e[0])&&void 0!==pu?pu:{}},enables:[du,q.Wl.highest(vu)]}),yu=new rt.j((function(e,t,n,r){return e||t||n||r?gu.of({leading:e,enclosed:t,trailing:n,selected:r}):null})),Zu=n(12785),bu=n(68408),wu=n(91926);var xu=new rt.j((function(e,t,n,r,i){return t&&n?Qr.Lf.of({format:function(){var n=(0,Ze.Z)((function(n){var r;return(0,be.__generator)(this,(function(i){return 0===n.length?[2,{result:n.toString()}]:(r=ra.Z.from(n.toString()).toBuffer(),[2,t.request({file:{path:e,content:r}}).then((function(e){return e.error||!e.file?{error:!0}:{result:ra.Z.from(e.file.content).toString()}}))])}))}));return function(e){return n.apply(this,arguments)}}(),logName:"formatter_service",onError:function(){r("Sorry, formatting ".concat(e," failed"),1500)},onSuccess:function(){i("Formatted ".concat(e," successfully"),1500)}}):[]})),Cu=n(30296),ku=n(3282),Su=n(28863),Eu=n(88794),Tu=n(51087);function Ru(e){var t=[],n=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e.selection.ranges[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.empty||(t.push(e.sliceDoc(s.from,s.to)),n.push(s))}}catch(y){o=!0,a=y}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!t.length){var u=-1,d=!0,f=!1,h=void 0;try{for(var p,m=e.selection.ranges[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value.from,g=e.doc.lineAt(v);g.number>u&&(t.push(g.text),n.push({from:g.from,to:Math.min(e.doc.length,g.to+1)})),u=g.number}}catch(y){f=!0,h=y}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}var Du=n(35650),Iu=n(91606),_u=n(58292),Bu=n(36732),Gu=n(62385),Pu=n(91333),Au=n(73823),Nu=n(96073),Uu=n(47381),Lu=n(5687),Ou=n(42629),Xu=n(8286),Mu=n(21698),Fu=n(93687),Wu=n(89673),Hu=n(26169),Vu=n(55535),zu=n(11866),ju=n(8149),qu=n(17284),$u=(0,en.X)({ghostwriterIcon:[C.l0.color.blurpleStronger]});function Yu(e){var t=e.label,n=e.icon,r=e.run,i=e.keyboardShortcut,o=e.dataCy;return{match:Tu.pl,data:{type:"action",label:t,icon:n,run:r,keyboardShortcut:i,dataCy:o}}}function Ku(e){var t=e.view,n=e.mainSelection,r=e.codeReference;t.dispatch({selection:{anchor:n.to},effects:[ec.Q.of({codeReference:r,type:"ghostwriterKillswitch"}),j.tk.scrollIntoView(n.to,{y:"center"})]})}function Qu(e){var t=e.path,n=(0,se.Z)().fs,r=(0,sc.eD)(),i=(0,wn.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,b.useCallback)((function(e){r(t);var o=n.getOTVersion(t),a=Hc(e.state,t,o);if((0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"GENERATE"}),i)Ku({view:e,mainSelection:e.state.selection.main,codeReference:a});else{var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[ec.Q.of({codeReference:a,type:"generateCode"}),j.tk.scrollIntoView(l,{y:"center"})]})}}),[t,n,r,i])}function Ju(e){var t=e.path,n=(0,se.Z)().fs,r=(0,_c.Ef)(),i=(0,wn.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,b.useCallback)((function(e){r(t);var o=n.getOTVersion(t),a=Hc(e.state,t,o);if(i)Ku({view:e,mainSelection:e.state.selection.main,codeReference:a});else{(0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"TRANSFORM"});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[ec.Q.of({type:"transformCode",codeReference:a}),j.tk.scrollIntoView(l,{y:"center"})]})}}),[t,n,r,i])}function ed(e){var t=e.fs,n=e.path,r=(0,Yr.ql)(),i=(0,wn.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,b.useCallback)((function(e){var o=t.getOTVersion(n),a=Hc(e.state,n,o);if((0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_INLINE_OPENED,{action:"EXPLAIN"}),i)Ku({view:e,mainSelection:e.state.selection.main,codeReference:a});else{r({chatMessage:{type:"explainCode",codeReference:a}});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[ec.Q.of({codeReference:a,type:"explainCode"}),j.tk.scrollIntoView(l,{y:"center"})]})}}),[t,n,i,r])}var td="Rename all occurrences";function nd(e){var t=e.path,n=e.openFile,r=(0,me.Z)(t),i=ge(r),o=(0,b.useRef)(null),l=(0,se.Z)().fs,c=(0,wn.P5)({controlName:"flag-clui-ctx-menu-rename-all",logFlagToAnalytics:!1});return(0,b.useCallback)((function(e){var s=[];if(!i||!r)return s;function u(e,t,n){return d.apply(this,arguments)}function d(){return d=(0,Ze.Z)((function(n,i,a){var l,c,s,u,d,f,h,p,m,v,y;return(0,be.__generator)(this,(function(Z){switch(Z.label){case 0:if(!r||!e)throw new Error("Expected client");return o.current&&r.notify.cancelRequest(o.current),o.current=r.generateId(),l=e.state,c=l.selection.main.head,s=(0,xe.s)(l.doc,c),[4,n(t,s,{id:o.current,tap:function(t){return(0,Mn.SC)(e,t)}})];case 1:if(u=Z.sent(),o.current=null,"error"in u)throw new Error("Something went wrong fetching location: ".concat(u.error.message));return u.cancelled?[2]:(d=Fn(u.result))&&0!==d.length?(f=(0,g.Z)(d,1),h=f[0],p=h.uri,m=h.range,v=m.start,y=r.documentUriToPath(p),t!==y?a({path:y,line:v.line+1,col:v.character}):pe({view:e,line:v.line+1,col:v.character}),[2]):((0,Xn.J)(e,{message:i,offset:c}),[2])}}))})),d.apply(this,arguments)}return i.isFindDefinitionSupported&&n&&s.push(Yu({label:"Jump to definition",icon:(0,a.tZ)(_u.Z,{}),dataCy:"context-menu-JumpToDefinition",run:function(t){return(0,Ze.Z)((function(){return(0,be.__generator)(this,(function(i){switch(i.label){case 0:return[4,Gr({offset:e.state.selection.main.head,lspClient:r,openFile:n,view:e,newPane:null!==t&&(0,Cr.j)(t)})];case 1:return i.sent(),[2]}}))}))()},keyboardShortcut:(0,Su.l2)({cmdOrCtrl:!0,key:"F12"})})),i.isFindTypeDefinitionSupported&&n&&s.push(Yu({label:"Jump to type definition",icon:(0,a.tZ)(Sc.Z,{}),run:function(){return(0,Ze.Z)((function(){return(0,be.__generator)(this,(function(e){switch(e.label){case 0:return[4,u(r.request.findTypeDefinitions,"No type definition found",n)];case 1:return e.sent(),[2]}}))}))()}})),i.isFindImplementationSupported&&n&&s.push(Yu({label:"Jump to implementation",icon:(0,a.tZ)(Bu.Z,{}),run:function(){return(0,Ze.Z)((function(){return(0,be.__generator)(this,(function(e){switch(e.label){case 0:return[4,u(r.request.findImplementations,"No implementation found",n)];case 1:return e.sent(),[2]}}))}))()}})),(i.isFindDefinitionSupported||i.isFindReferencesSupported)&&s.push(Yu({label:"Find references",icon:(0,a.tZ)(ku.Z,{}),keyboardShortcut:"Shift-F12",run:function(){e.dispatch({effects:[Wn.of(e.state.selection.main.head)]})}})),i.isRenameSupported&&(c?s.push(Yu({label:td,icon:(0,a.tZ)(Gu.Z,{}),keyboardShortcut:"F2",run:function(){!function(e){if(!nr(e.state))return!1;var t=e.state.selection.main.head;e.state.wordAt(t)?e.dispatch({effects:er.of(t)}):(0,Xn.J)(e,{message:"You cannot rename this element",offset:t})}(e)}})):s.push({match:Tu.pl,data:{type:"context",label:td,icon:(0,a.tZ)(Gu.Z,{}),keyboardShortcut:"F2"},commands:function(n){var i=n.active,c=n.search;return i&&c?[{match:function(){return{score:1}},data:{type:"action",label:"Rename",icon:(0,a.tZ)(qn.Z,{}),keyboardShortcut:"Enter",run:function(){return(0,Ze.Z)((function(){var n,i,a;return(0,be.__generator)(this,(function(s){switch(s.label){case 0:return n=e.state.selection.main.head,e.state.wordAt(n)?(o.current&&r.notify.cancelRequest(o.current),o.current=r.generateId(),[4,r.request.rename(t,(0,xe.s)(e.state.doc,n),c,{id:o.current,tap:function(t){return(0,Mn.SC)(e,t)}})]):[2,{type:"error",message:"You cannot rename this element"}];case 1:return(i=s.sent()).cancelled?[2]:"error"in i?[2,{type:"error",message:"Something went wrong renaming ".concat(i.error.message)}]:(a=i.result)?((0,Jn.w)({edit:a,fs:l,client:r}),[2]):[2]}}))}))()}}}]:[]}})),s.push(Yu({label:"Select all occurrences",icon:(0,a.tZ)(Ou.Z,{}),keyboardShortcut:(0,Su.l2)({key:"F2",cmdOrCtrl:!0}),run:function(){if(e.state.selection.main.empty){var t=e.state.wordAt(e.state.selection.main.head);if(!t)return;e.dispatch({selection:t})}(0,Xu.tm)(e)}})),void 0!==e.state.field(oe,!1)&&s.push(Yu({label:"Toggle breakpoint",icon:(0,a.tZ)(Uu.Z,{}),run:function(){var t=e.state.doc.lineAt(e.state.selection.main.head);ie(e,t.from)}})),i.isCodeActionsSupported&&s.push({match:Tu.pl,data:{type:"context",label:"More actions",icon:(0,a.tZ)(or.Z,{}),keyboardShortcut:(0,Su.l2)({key:".",cmdOrCtrl:!0})},commands:function(n){var i=n.active;return(0,Ze.Z)((function(){var n,o,c;return(0,be.__generator)(this,(function(s){switch(s.label){case 0:return i?r.getServerState()!==We.a.INITIALIZED?[2,[]]:(n=e.state,o=n.selection.main,[4,r.request.codeActions(t,{start:(0,xe.s)(n.doc,o.from),end:(0,xe.s)(n.doc,o.to)})]):[2,[]];case 1:return c=s.sent(),(0,Yt.j)(Yt.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in c),numActions:"result"in c&&c.result?c.result.length:null}),"error"in c?(Ke.Tb(new Error(c.error.message)),[2,[]]):null===c.result||0===c.result.length?[2,[]]:[2,c.result.map((function(e){return Yu({icon:(0,a.tZ)(Mu.Z,{}),label:e.title,run:function(){(0,cr.S)(e,r,l)}})}))]}}))}))()}}),s}),[i,r,n,t,l,c])}function rd(e){var t=e.path,n=e.openFile,r=e.view,i=e.onCommand,l=function(e){var t=e.path,n=(0,se.Z)().fs,r=Qu({path:t}),i=Ju({path:t}),o=ed({fs:n,path:t}),l=(0,Kc.gf)(Qc.x.id),c=(0,wn.P5)({controlName:"flag-editor-selection-controls"});return(0,b.useCallback)((function(e){var t=[],n=!e.state.selection.main.empty;return r&&!n&&t.push(Yu({label:"Generate",icon:(0,a.tZ)(Fu.Z,{css:$u.ghostwriterIcon}),keyboardShortcut:c?l:"Alt-g",run:function(){r(e)},dataCy:"context-menu-GenerateCode"})),n&&(t.push(Yu({label:"Explain",icon:(0,a.tZ)(Wu.Z,{css:$u.ghostwriterIcon}),dataCy:"context-menu-ExplainCode",run:function(){o(e)}})),t.push(Yu({label:"Modify",icon:(0,a.tZ)(Hu.Z,{css:$u.ghostwriterIcon}),keyboardShortcut:c?l:"Alt-t",dataCy:"context-menu-TransformCode",run:function(){i(e)}}))),t}),[r,i,o,l,c])}({path:t}),c=(0,b.useCallback)((function(e){var t=[];return t.push(Yu({label:"Start thread",icon:(0,a.tZ)(Lu.Z,{}),keyboardShortcut:"Alt-/",run:function(){e.dispatch({effects:[Mi.UQ.of(la()())]})}})),t}),[]),s=function(e){var t=e.path;return(0,b.useCallback)((function(e){var n=[Yu({label:"Copy",icon:(0,a.tZ)(Du.Z,{}),keyboardShortcut:(0,Su.l2)({cmdOrCtrl:!0,key:"c"}),run:function(){var t=Ru(e.state).text;(0,Eu.Z)(t)}}),Yu({label:"Cut",icon:(0,a.tZ)(Iu.Z,{}),keyboardShortcut:(0,Su.l2)({cmdOrCtrl:!0,key:"x"}),run:function(){var t=Ru(e.state),n=t.text,r=t.ranges;(0,Eu.Z)(n),e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&n.push(Yu({label:"Paste",icon:(0,a.tZ)(Pu.Z,{}),keyboardShortcut:(0,Su.l2)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,Ze.Z)((function(){var n,r;return(0,be.__generator)(this,(function(i){switch(i.label){case 0:n="",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return n=i.sent(),[3,4];case 3:return r=i.sent(),tt.kg.error("CodeMirror context menu paste failed",{message:r.message}),[2];case 4:return pa({filePath:t,view:e,clipboardText:n}),[2]}}))}))()}})),Yu({label:"Copy link to position",icon:(0,a.tZ)(Au.Z,{}),run:function(){var n=(0,xe.s)(e.state.doc,e.state.selection.main.head),r=n.line,i=n.character,o=(0,Nu.dr)({path:t,line:r+1,col:i});(0,Eu.Z)(o)}}),n}),[t])}({path:t}),u=nd({path:t,openFile:n}),d=function(){var e=(0,ju.s6)(zu.YC.EditorContextMenu);return(0,b.useCallback)((function(t){var n=[];return n.push({data:{type:"group",key:"extensions"},commands:(0,Ze.Z)((function(){var n;return(0,be.__generator)(this,(function(r){switch(r.label){case 0:return n=[{data:{filePath:t.filePath,selection:t.view.state.selection.toJSON()}}],[4,Promise.all(e.map(function(){var e=(0,Ze.Z)((function(e){var t;return(0,be.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.create({path:n})];case 1:return(t=r.sent())?[2,(0,qu.C)(t,{path:n})]:[2,null]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return[2,r.sent().filter(Boolean)]}}))}))}),n}),[e])}(),f=(0,wn.P5)({controlName:"flag-editor-selection-controls"}),h=(0,b.useMemo)((function(){if(!r)return[];var e,t=(0,o.Z)(u(r)).concat((0,o.Z)(c(r)));f||(e=t).push.apply(e,(0,o.Z)(l(r)));return t}),[r,u,l,c,f]);return function(e){var t=e.view,n=e.commands,r=e.onCommand,i=(0,Ia.Z)(r),o=(0,de.Z)({view:t});(0,b.useEffect)((function(){if(t){var e=[],r=!0,a=!1,l=void 0;try{for(var c,s=function(){var n=c.value,r=n.data;if("context"!==r.type&&"action"!==r.type)return"continue";if(!r.keyboardShortcut)return"continue";var o=Array.isArray(r.keyboardShortcut)?r.keyboardShortcut.join(" "):r.keyboardShortcut;e.push({run:function(){if("action"===r.type)return r.run(null),!0;var e=t.state.selection.main.head;return"context"!==r.type||r.label!==td||t.state.wordAt(e)?(i.current(n),!0):((0,Xn.J)(t,{message:"You cannot rename this element",offset:e}),!0)},key:o,preventDefault:!0})},u=n[Symbol.iterator]();!(r=(c=u.next()).done);r=!0)s()}catch(d){a=!0,l=d}finally{try{r||null==u.return||u.return()}finally{if(a)throw l}}try{t.dispatch({effects:o.reconfigure(j.$f.of(e))})}catch(f){(0,j.OO)(t.state,f,"contextMenu")}return function(){try{t.dispatch({effects:o.reconfigure([])})}catch(f){(0,j.OO)(t.state,f,"contextMenu")}}}}),[t,n,o,i])}({view:r,commands:h,onCommand:i}),(0,b.useCallback)((function(){var e=r?[{data:{type:"context",label:"AI",icon:(0,a.tZ)(Jt.Z,{})},commands:function(){return l(r)}},{data:{type:"context",label:"Code actions",icon:(0,a.tZ)(or.Z,{})},commands:function(){return u(r)}},{data:{type:"context",label:"Social",icon:(0,a.tZ)(Lu.Z,{})},commands:function(){return c(r)}},{data:{type:"context",label:"Clipboard",icon:(0,a.tZ)(Pu.Z,{})},commands:function(){return s(r)}},{data:{type:"context",label:"Extensions",icon:(0,a.tZ)(Vu.Z,{})},commands:function(){return d({view:r,filePath:t})}}]:[];return{data:{type:"context",label:"Search actions",icon:(0,a.tZ)(ku.Z,{})},commands:function(){return e}}}),[r,l,u,c,s,t,d])}var id=new rt.j((function(e,t){return e?null:j.tk.domEventHandlers({contextmenu:function(e,n){var r=e.clientX,i=e.clientY,o=n.state.selection.main,a=n.posAtCoords({x:r,y:i}),l=n.state.doc.length,c=null===a?l:a;if(c<o.from||c>o.to){var s=q.jT.cursor(c);n.dispatch({selection:s})}return t(e),!0}})})),od=n(19499),ad=n(96864),ld=n(70505),cd=n(83387),sd=n(51446);var ud=new rt.j((function(e,t,n,o,a,l){if(!e||!t)return null;var c=t.formatters.map((function(e){return(0,cd.F)(o,e)?ad.L.of({format:function(){var t=(0,Ze.Z)((function(t){var a,l,c,s;return(0,be.__generator)(this,(function(u){switch(u.label){case 0:if(!e.startCommand)throw new Error("Expected formatter command");return a=(0,i.Z)((0,r.Z)({},e.startCommand),{args:e.startCommand.args.map((function(e){return"$file"===e?o:e}))}),[4,(0,sd.Y)({container:n,service:"exec"})];case 1:return l=g.Z.apply(void 0,[u.sent(),2]),c=l[0],s=l[1],dd(c,{exec:a})?[4,new Promise((function(e){var n=c.onCommand((function(r){var i=function(t){n(),e(t),"closed"!==c.status&&s()};if(r.state===od.api.State.Running){if(!dd(c,{input:t.toString()}))return i({error:!0});if(!dd(c,{inputClose:{}}))return i({error:!0})}return r.stderr?i({error:!0}):r.output?i({result:r.output}):void 0}))}))]:[2,{error:!0}];case 2:return[2,u.sent()]}}))}));return function(e){return t.apply(this,arguments)}}(),logName:e.name,onSuccess:a,onError:l}):null}));return c.filter(Boolean)}));function dd(e,t){return"open"===e.status&&(e.send(t),!0)}var fd=n(77205);function hd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),o=i.next();!o.done&&r.length<n;)r.push(o.value),o=i.next();return r}var pd=n(6686),md=n(41168),vd=n(30022),gd=n(67741);function yd(e){return e>420?"large":"small"}var Zd=x.K.div,bd=(0,en.X)({root:[C.l0.rowWithGap(8),C.l0.px(4),C.l0.py(8),{borderBottom:"1px solid",borderColor:C.TV.outlineDimmest}],panelButtonWrapper:[C.l0.center,C.l0.height(32)],content:[C.l0.display.grid,C.l0.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:C.TV.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[C.l0.position.absolute,C.l0.top(0),C.l0.right(0),C.l0.height("100%"),C.l0.center,C.l0.pr(4)],inputControlsSmall:[C.l0.colWithGap(8),C.l0.flex.growAndShrink(1)],searchInputWrapper:[C.l0.position.relative,{gridArea:"search"}],searchControls:[C.l0.display.flex,C.l0.align.center,C.l0.rowWithGap(8),C.l0.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[C.l0.display.flex,C.l0.align.center,C.l0.rowWithGap(8),C.l0.flex.wrap,{gridArea:"replace-controls"}]});function wd(e,t){var n=e.view,r=e.query,i=e.updateQuery,o=function(){(0,Xu.g)(n);var e=n.state.selection.main;n.dispatch({effects:j.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),Z<=1||y((function(t){if(null===t){var n=h.findIndex((function(t){return t.from===e.from&&t.to===e.to}));return-1===n?1:n+1}return t>=Z?1:t+1}))},l=function(){(0,Xu.a7)(n);var e=n.state.selection.main;n.dispatch({effects:j.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),Z<=1||y((function(t){if(null===t){var n=h.findIndex((function(t){return t.from===e.from&&t.to===e.to}));return-1===n?1:n+1}return t<=1?Z||1:t-1}))},c=function(e){var t=e;return(0,j.$1)(n,t,"search-panel")},s=(0,g.Z)(b.useState(!1),2),u=s[0],d=s[1],f=(0,g.Z)(b.useState([]),2),h=f[0],p=f[1],m=(0,g.Z)(b.useState(null),2),v=m[0],y=m[1],Z=h.length,w=(0,Ia.Z)(r),C=(0,Ia.Z)(h);b.useImperativeHandle(t,(function(){return{onSelectionSet:function(){var e=n.state.selection.main,t=C.current.findIndex((function(t){return t.from<=e.anchor&&t.to>=e.anchor}));y(-1!==t?t+1:null)},onDocChanged:function(){p(hd(w.current,n.state.doc)),y(null)},onExpandRequested:function(){d(!0)}}}),[n,w,C]),b.useEffect((function(){var e=hd(r,n.state.doc);p(e);var t=n.state.selection.main,i=e.findIndex((function(e){return e.from<=t.anchor&&e.to>=t.anchor}));y(-1!==i?i+1:null)}),[n,r]);var k=(0,g.Z)(b.useState(yd(0)),2),S=k[0],E=k[1],T=(0,Po.Z)((function(e){e.width&&E(yd(e.width))})),R=Z>0,D=r.search.length>0?"0 / 0":null,I=R?"".concat(v||1," / ").concat(Z):D,_=I?8*I.length:null,B=(0,a.BX)(a.HY,{children:[(0,a.tZ)(pd.Z,{alt:"case sensitive",icon:(0,a.tZ)(gd.Z,{}),checked:r.caseSensitive,onClick:function(){i({caseSensitive:!r.caseSensitive})}}),(0,a.tZ)(pd.Z,{alt:"regular expressions",icon:(0,a.tZ)(vd.Z,{}),checked:r.regexp,onClick:function(){i({regexp:!r.regexp})}})]}),G=[bd.content];return"small"!==S&&u?G.push(bd.contentExpanded):"small"===S&&u?G.push(bd.contentExpandedSmall):"small"!==S||u||G.push(bd.contentSmall),(0,a.tZ)(Zd,{ref:T,onKeyDown:function(e){c(e)&&e.preventDefault()},children:(0,a.BX)(go.Tg,{elevated:!0,css:bd.root,children:[(0,a.tZ)(x.G,{css:bd.panelButtonWrapper,children:(0,a.tZ)(jn.hU,{alt:u?"Close replace panel":"Show replace panel",onClick:function(){d((function(e){return!e}))},children:(0,a.tZ)(fd.Z,{rotate:u?90:0,style:{transition:"200ms ease"}})})}),(0,a.BX)(x.G,{css:G,children:[(0,a.BX)(x.G,{css:bd.searchInputWrapper,children:[(0,a.tZ)(md.h,{style:{padding:4,paddingRight:null!==_&&void 0!==_?_:void 0},placeholder:"Search",value:r.search,name:"search","main-field":"true",onKeyDown:function(e){(0,Cr.j)(e)&&"f"===e.key?e.currentTarget.select():"enter"===e.key.toLowerCase()&&(c(e)||(e.preventDefault(),e.shiftKey?l():o()))},onChange:function(e){i({search:e})}}),I?(0,a.tZ)(x.G,{css:bd.matchLabel,children:(0,a.tZ)(Se.xv,{variant:"small",color:"dimmest",multiline:!1,children:I})}):null]}),(0,a.BX)(x.G,{css:bd.searchControls,children:[(0,a.tZ)(jn.hU,{alt:"Previous",onClick:function(){l()},children:(0,a.tZ)(fd.Z,{rotate:-90})}),(0,a.tZ)(jn.hU,{alt:"Next",onClick:function(){o()},children:(0,a.tZ)(fd.Z,{rotate:90})}),(0,a.tZ)(zn.zx,{text:"Select All",onClick:function(){(0,Xu.i3)(n),n.focus()}}),B]}),u?(0,a.BX)(a.HY,{children:[(0,a.tZ)(x.G,{css:bd.replaceInputWrapper,children:(0,a.tZ)(mo.II,{style:{padding:4},placeholder:"Replacement",name:"replace",value:r.replace,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(c(e)||(e.preventDefault(),(0,Xu.K9)(n)))},onChange:function(e){i({replace:e.target.value})}})}),(0,a.BX)(x.G,{css:bd.replaceControls,children:[(0,a.tZ)(zn.zx,{text:"Replace",onClick:function(){(0,Xu.K9)(n)}}),(0,a.tZ)(zn.zx,{text:"Replace All",onClick:function(){(0,Xu.ko)(n)}})]})]}):null]}),(0,a.tZ)(x.G,{css:bd.panelButtonWrapper,children:(0,a.tZ)(jn.hU,{alt:"Close Search Panel",tooltipHidden:!0,onClick:function(){(0,Xu.N$)(n)},children:(0,a.tZ)(Nn.Z,{})})})]})})}var xd=new Be.Jf(b.forwardRef(wd)),Cd=q.Py.define(),kd=[(0,Xu.yC)({createPanel:function(e){var t=!1,n=!1,r=!1,i=!1,o=!1,a=function(t){var n,r,i,o,a,l,c=(0,Xu.uP)(e.state),s=new Xu.Jb({search:null!==(n=t.search)&&void 0!==n?n:c.search,caseSensitive:null!==(r=t.caseSensitive)&&void 0!==r?r:c.caseSensitive,literal:null!==(i=t.literal)&&void 0!==i?i:c.literal,regexp:null!==(o=t.regexp)&&void 0!==o?o:c.regexp,replace:null!==(a=t.replace)&&void 0!==a?a:c.replace,wholeWord:null!==(l=t.wholeWord)&&void 0!==l?l:c.wholeWord});s.eq(c)||e.dispatch({effects:Xu.ql.of(s)})},l=xd.create({view:e,query:(0,Xu.uP)(e.state),updateQuery:a});return{dom:l,top:!0,update:function(t){(0,kr.a)(t,Xu.ql)&&xd.set(l,{view:e,query:(0,Xu.uP)(t.state),updateQuery:a}),t.selectionSet&&!i&&(i=!0,requestAnimationFrame((function(){var e;n||(i=!1,null===(e=xd.ref(l))||void 0===e||e.onSelectionSet())}))),t.docChanged&&!r&&(r=!0,requestAnimationFrame((function(){var e;n||(r=!1,null===(e=xd.ref(l))||void 0===e||e.onDocChanged())}))),(0,kr.a)(t,Cd)&&!o&&(o=!0,requestAnimationFrame((function(){var e;n||(o=!1,null===(e=xd.ref(l))||void 0===e||e.onExpandRequested())})))},mount:function(){t||(t=!0,requestAnimationFrame((function(){if(!n){t=!1;var e=l.querySelector("[main-field]");e&&(e.focus(),e.select())}})))},destroy:function(){return n=!0}}}}),j.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return((0,Xu.Ep)(e.state)||!!(0,Xu.nx)(e))&&(e.dispatch({effects:Cd.of(null)}),!0)}}])],Sd=n(30826),Ed=n.n(Sd),Td=new Set,Rd=Ed()((function(){var e=!0,t=!1,n=void 0;try{for(var r,i=Td[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,Yt.j)(Yt.U3.WS_TYPED,{fileExt:o})}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}Td.clear()}),18e4);var Dd,Id=j.tk.updateListener.of((function(e){if(e.docChanged){var t=e.state.facet(dn.Yp);if(t){var n=(0,Qo.r6)(t)||(0,Qo.UO)(t);e.transactions.some((function(e){return e.annotation(q.YW.remote)}))||function(e){Td.has(e)||(Td.add(e),Rd())}(n)}}})),_d=n(29110),Bd=(0,en.X)({root:[C.l0.p(16),C.l0.align.center,C.l0.colWithGap(8),{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[C.l0.reset.button,C.l0.rowWithGap(4),C.l0.align.center,C.l0.color.foregroundDimmest,C.l0.cursor.pointer,{fontFamily:C.TV.fontFamilyDefault,"*":{borderColor:C.TV.foregroundDimmest,color:C.TV.foregroundDimmest},":hover *":{borderColor:C.TV.foregroundDefault,color:C.TV.foregroundDefault}}]}),Gd="cm-empty-state-layer",Pd="cm-empty-state-dom",Ad=j.tk.theme((Dd={},(0,qe.Z)(Dd,".".concat(Gd),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,qe.Z)(Dd,".".concat(Pd),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),Dd)),Nd=function(){"use strict";function e(t){(0,H.Z)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.ctas,n=e.view,r=e.width,i=(0,Be.VV)((0,a.tZ)(x.G,{css:Bd.root,children:t.map((function(e){return(0,a.BX)(x.G,{css:Bd.button,onClick:function(){return e.onClick(n)},children:[e.icon,(0,a.tZ)(Se.xv,{variant:"small",children:e.text}),e.shortcut?(0,a.tZ)(Kc.bM,{keyCombo:e.shortcut,small:!0}):null]},e.text)}))}));return i.className=Pd,i.style.width=r+"px",i.style.visibility=r>240?"visibile":"hidden",i.style.left="0px",i},t.eq=function(e){return Or()(e.options,this.options)},e}(),Ud=new rt.j((function(e){var t=function(e){var t;return!(e.doc.length>0)&&(!e.field(Jl.$)&&!(null===(t=e.field(bs.xg,!1))||void 0===t?void 0:t.size))},n=q.QQ.define({create:t,update:function(e,n){return t(n.state)}}),r=(0,j.EY)({above:!0,class:Gd,update:function(e){return(0,kr.a)(e,n)},markers:function(t){if(!t.state.field(n,!1))return[];var r=t.dom.getBoundingClientRect(),i=t.contentDOM.getBoundingClientRect(),o=Math.round(i.right-r.left);return[new Nd({ctas:e,width:o,view:t})]}});return[Ad,n,r]})),Ld=n(45942),Od=n(51631),Xd=n(43119),Md=n(71440),Fd=n(24635);function Wd(){var e=(0,Xd.Z)(["\n  query EditorEmptyStateCurrentUser {\n    currentUser {\n      id\n      userSubscriptionType\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            CTA\n          }\n        }\n      }\n    }\n  }\n"]);return Wd=function(){return e},e}var Hd={},Vd=(0,Md.Ps)(Wd());var zd=n(3717),jd=n(30504),qd={python:'from replit.ai.modelfarm import ChatExample, ChatMessage, ChatModel, ChatSession\n\nmodel = ChatModel("chat-bison")\nresponse = model.chat([\n  ChatSession(\n    context="You are philosophy bot.",\n    examples=[\n      ChatExample(\n        input=ChatMessage(content="1 + 1"),\n        output=ChatMessage(content="2")\n      )\n    ],\n    messages=[\n      ChatMessage(author="USER", content="How much wood can a woodchuck chuck?"),\n    ],\n  )\n], temperature=0.2)\n\nprint(response.responses[0].candidates[0].message.content)',typescript:"import * as replitai from '@replit/ai-modelfarm';\n\nconst result = await replitai.chat({\n  model: 'chat-bison',\n  temperature: 0.5,\n  messages: [{ author: 'user', content: 'how are you?' }],\n});\n\nconsole.log(result);"};function $d(){var e=(0,Xd.Z)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return $d=function(){return e},e}var Yd={},Kd=(0,Md.Ps)($d());function Qd(e){var t=(0,r.Z)({},Yd,e);return Fd.a(Kd,t)}var Jd=n(91148),ef=n(43312),tf=n(18950),nf=x.K.button;function rf(e){var t=e.name,n=e.children,r=e.onClick;return(0,a.BX)(nf,{onClick:function(){return r()},css:[vc.gU.nofill,C.l0.p(8),C.l0.focusRing,C.l0.textAlign.left],children:[(0,a.tZ)(Se.xv,{variant:"subheadDefault",css:C.l0.pb(16),multiline:!1,children:t}),(0,a.tZ)(x.G,{css:[C.l0.backgroundColor.backgroundDefault,C.l0.p(8),C.l0.borderRadius(8)],children:n})]})}var of="@media (min-width: ".concat(Jd.j.tabletMax,"px)"),af=(0,ef.iv)([C.l0.colWithGap(16),(0,qe.Z)({},of,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function lf(e){var t=e.children;return(0,a.tZ)(x.G,{css:[(0,qe.Z)({},of,[C.l0.rowWithGap(16)])],children:t})}function cf(e){var t=e.mainFile,n=e.examples,r=e.onSelect;return(0,a.BX)(x.G,{css:[C.l0.colWithGap(24)],children:[(0,a.tZ)(Se.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,a.tZ)(Se.xv,{children:"Get started with some program examples."}),(0,a.BX)(lf,{css:[C.l0.colWithGap(16)],children:[(0,a.tZ)(x.G,{css:af,children:n.slice(0,(n.length+1)/2).map((function(e){return(0,a.tZ)(rf,{name:e.name,onClick:function(){return r(e)},children:(0,a.tZ)(tf.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)}))}),(0,a.tZ)(x.G,{css:af,children:n.slice((n.length+1)/2).map((function(e){return(0,a.tZ)(rf,{name:e.name,onClick:function(){return r(e)},children:(0,a.tZ)(tf.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)}))})]})]})}function sf(e){var t=e.filePath,n=e.language,r=e.onSelect,i=Qd({variables:{language:n}}),o=i.data,l=i.loading,c=i.error;if(l)return(0,a.tZ)(x.G,{css:[C.l0.colWithGap(0),C.l0.justify.center,C.l0.align.center,C.l0.pt(32),C.l0.pb(32)],children:(0,a.tZ)(Un.Z,{})});if(c)return(0,a.tZ)(x.G,{css:[C.l0.colWithGap(0),C.l0.justify.center,C.l0.align.center,C.l0.pt(32),C.l0.pb(32)],children:c.message});var s="LanguageExamples"===(null===o||void 0===o?void 0:o.languageExamples.__typename)?o.languageExamples.examples:null;return(null===s||void 0===s?void 0:s.length)?(null===s||void 0===s?void 0:s.length)?(0,a.tZ)(cf,{mainFile:t,examples:s,onSelect:r}):(0,a.tZ)(x.G,{css:[C.l0.colWithGap(0),C.l0.justify.center,C.l0.align.center,C.l0.pt(32),C.l0.pb(32)],children:(0,a.BX)(Se.xv,{children:["Sorry, this language doesn\u2019t have any examples. Want to add some? Contact us at ",(0,a.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var uf=n(53691),df=n(48858),ff=q.Py.define(),hf=q.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,ke.j)(t,ff,(function(e){n=e.value})),n}}),pf=[hf,Cs.t.from(hf,(function(e){if(!e)return null;var t=e.language,n=e.filePath;return{key:"examplesModal",node:function(e){var r=function(){e.dispatch({effects:ff.of(null)})};return(0,a.tZ)(Ss.u,{maxWidth:872,isOpen:!0,onRequestClose:r,children:(0,a.tZ)(vf,{onRequestClose:r,language:t,filePath:n})})}}}))];function mf(e){var t,n,i=e.filePath,o=e.language,a=e.openPane,c=(0,l.T3)(),s=function(e){var t=(0,r.Z)({},Hd,e);return Fd.a(Vd,t)}().data,u=((null===s||void 0===s||null===(t=s.currentUser)||void 0===t?void 0:t.userSubscriptionType)===Od.HP.Hacker||(null===s||void 0===s||null===(n=s.currentUser)||void 0===n?void 0:n.userSubscriptionType)===Od.HP.HackerPro)&&o&&function(e){return["python","javascript","typescript","javascriptreact","typescriptreact"].includes(e)}(o),d=(0,zd.Z)(i),f=(0,b.useCallback)((function(){if(o){var e="python"===o?"python":"typescript";(0,Yt.j)(Yt.U3.GHOSTWRITER_CHAT_MODELFARM_PLACEHOLDER_CLICKED,{language:e}),a({type:"docs",data:{url:jd.TT.MODEL_FARM+"/".concat(e,"#installation")}}),d&&d({code:qd[e],insertAt:0})}}),[d,o,a]);return c?null:u?f:null}function vf(e){var t=e.onRequestClose,n=e.language,r=e.filePath,i=(0,df.e)(uf.y.Examples),o=(0,df.e)(uf.y.Editor),l=(0,b.useState)(!1),c=l[0],s=l[1],u=(0,zd.Z)(r),d=(0,b.useRef)(null===i||void 0===i?void 0:i.isActive),f=(0,b.useRef)();f.current=null===i||void 0===i?void 0:i.isActive;var h=(0,b.useRef)(null===i||void 0===i?void 0:i.goto);return h.current=null===i||void 0===i?void 0:i.goto,(0,b.useEffect)((function(){return function(){var e;f.current&&(null===(e=h.current)||void 0===e||e.call(h,uf.y.Editor))}}),[]),(0,b.useEffect)((function(){(null===o||void 0===o?void 0:o.isActive)&&!d.current&&(c?o.goto(uf.y.Examples):s(!0))}),[o,t,c]),(0,b.useEffect)((function(){(null===i||void 0===i?void 0:i.isActive)?d.current=!0:d.current&&t(null)}),[t,null===i||void 0===i?void 0:i.isActive]),u?(0,a.tZ)("div",{ref:null===i||void 0===i?void 0:i.delegateTooltip,children:(0,a.tZ)(sf,{filePath:r,language:n,onSelect:function(e){u({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,a.tZ)("div",{children:"Please make sure you have a file open"})}var gf=function(e){"use strict";(0,V.Z)(n,e);var t=(0,z.Z)(n);function n(e,r){var i;return(0,H.Z)(this,n),(i=t.call(this)).src=e,i.pos=r,i}var r=n.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},n}(j.l9),yf=/"data:image\/\w+;base64,[^"\s]+"/g,Zf=Number.MAX_VALUE,bf=new rt.j((function(e){return e?j.lg.define((function(e){var t=new j.Y1({regexp:yf,decoration:function(e,t,n){if(void 0===e[0])throw new Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return j.p.replace({widget:new gf(r,n)})},maxLength:Zf});return{matcher:t,deco:t.createDeco(e),update:function(e){e.docChanged&&(this.deco=t.updateDeco(e,this.deco))}}}),{decorations:function(e){return e.deco},provide:function(e){return j.tk.atomicRanges.of((function(t){var n=t.plugin(e);return n?n.deco:j.p.none}))}}):null}));function wf(e){var t=e.filePath,n=e.autoFocus,r=e.isHidden,i=e.deeplink,o=e.onDeeplinkUpdated,c=e.openFile,s=e.openThreadsInbox,u=e.openPane,d=(0,se.Z)(),f=d.fs,h=d.debuggest,m=d.presence,v=(0,ye.Z)().preferences,y=(0,yl.Z)(),Z=y.ref,w=y.view;(0,I.VD)(w),(0,Zu.g)(w);var x=(0,oi.uV)(),C=(0,gs.FS)(),k=at.use(Boolean(null===C||void 0===C?void 0:C.match(/Chrome/i))&&Boolean(null===C||void 0===C?void 0:C.match(/Android/i))),S=(0,wn.P5)({controlName:"flag-ultra-hardcore",logFlagToAnalytics:!1}),E=(0,wn.P5)({controlName:"flag-editor-rulers",logFlagToAnalytics:!1}),T="/replEnvironmentDesktop"===p().pathname,R=(0,b.useContext)(ml.B3),D=(0,oi.jT)();Aa({view:w,path:t,isHidden:r});var _=Gi({view:w,presence:m,fs:f,filePath:t}).isLoading;!function(e){var t=e.view,n=e.isLoading,r=e.autoFocus;b.useEffect((function(){r&&t&&(n||t.focus())}),[t,n,r])}({view:w,autoFocus:n,isLoading:_}),Ui({view:w,filePath:t,isLoading:_}),(0,qo.Y)({view:w}),ni({view:w,filePath:t,isLoading:_,openFile:c}),fe({view:w,debuggest:h,filePath:t,isLoading:_}),function(e){var t=e.filePath,n=e.view,r=e.isLoading,i=e.deeplink,o=e.onDeeplinkUpdated,a=(0,se.Z)().session;b.useEffect((function(){if(n&&!r&&i){var e=i.line,t=i.col;void 0!==e&&(pe({view:n,line:e,col:t}),o&&o())}}),[n,r,i,o]),b.useEffect((function(){if(n&&!r)return a.onDeeplinkUpdated((function(e){var r=e.path,i=e.line,o=e.col;r===t&&i&&pe({view:n,line:i,col:o})}))}),[a,n,t,r])}({filePath:t,view:w,isLoading:_,deeplink:i,onDeeplinkUpdated:o});var B=bf.use((0,F.f6)()),G=function(e){var t,n=e.view,r=e.filePath,i=(0,se.Z)().fs,o=(0,F.xZ)(null!==(t=null===n||void 0===n?void 0:n.state.facet(dn.Yp))&&void 0!==t?t:null);return(0,g.Z)((0,$o.L)({accept:[U.z.Code,Yo.FILE],drop:function(e,t){if(n){var a=t.getClientOffset(),l=a?n.posAtCoords(a):null;if(null!==l){var c=function(e){n.focus(),n.dispatch({changes:{from:l,insert:e},selection:{anchor:l,head:l+e.length}})};if(e.type===U.z.Code)c(e.code);else{var s=!0,u=!1,d=void 0;try{for(var f,h=e.files[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;o?(0,Ko.L0)(p).then((function(e){return c('"'+e+'"')})):r&&(0,Qo.gK)(r)&&ia(p,i,r).then(c)}}catch(m){u=!0,d=m}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}}}}}}),2)[1]}({view:w,filePath:t});(0,he.Z)({view:w,filePath:t});var P=zo({view:w,filePath:t,isLoading:_,enable:T,openThreadsInbox:s});Sa({view:w,filePath:t});var A,N=function(e){var t=e.filePath,n=(0,Ea.K)((0,ur.Z)((function(){return{path:t}}),[t]));return Ta.use(n)}({filePath:t}),L=function(e){var t=e.filePath,n=void 0===t?null:t,r=e.disableDiff,i=void 0!==r&&r,o=e.disableConflicts,a=void 0!==o&&o,l=(0,wn.P5)({controlName:"flag-git-gud",logFlagToAnalytics:!1}),c=(0,wn.P5)({controlName:"flag-git-gud-gutter",logFlagToAnalytics:!1}),s=(0,wn.P5)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),u=(0,se.Z)().git;return i=!l||!c||i,a=!l||!s||a,hl.use(u,n,i,a)}({filePath:t}),O=(0,l.T3)(),X=(0,F.xZ)(null!==(A=null===w||void 0===w?void 0:w.state.facet(dn.Yp))&&void 0!==A?A:null),M=vs.use(X,O),W=va.use(X,f),H=Zs.use(O),V=eu.use(E?v.rulers:[]),z=tu.U.use(O),j=(0,zi.F)(),q=au.use(O,v.minimapDisplay,j),$=Qr.NS.use(),Y=function(e){var t=(0,se.Z)().container,n=(0,ti.Z)(),r=n.showError,i=n.showConfirm,o=(0,ld.T)(),a=(0,wn.P5)({controlName:"flag-toolchain-formatters",logFlagToAnalytics:!1});return ud.use(a,o,t,e.filePath,(function(){return i("Formatted ".concat(e.filePath," successfully"),1500)}),(function(){return r("Sorry, formatting ".concat(e.filePath," failed"),1500)}))}({filePath:t}),K=function(e){var t=(0,js.Z)(),n=(0,se.Z)().container,r=(0,ti.Z)(),i=r.showError,o=r.showConfirm,a=wu.ZP.supportsFormatting(t),l=(0,bu.Z)({container:n,service:"format",skip:!a}).channel,c=xu.use(e.filePath,l,a,i,o);return(0,b.useMemo)((function(){return c}),[c])}({filePath:t}),Q=(0,wn.P5)({controlName:"flag-editor-visible-whitespace",logFlagToAnalytics:!1}),J=yu.use(!!Q&&v.showLeadingWhitespace,!!Q&&v.showEnclosedWhitespace,!!Q&&v.showTrailingWhitespace,!!Q&&v.showSelectedWhitespace),ee=Qu({path:t}),te=ed({path:t,fs:f}),ne=Ju({path:t}),re=(0,b.useCallback)((function(){w&&ee(w)}),[w,ee]),ie=(0,b.useCallback)((function(){w&&ne(w)}),[w,ne]),oe=function(e){var t,n,r,i,o,l=e.isMobile,c=e.filePath,s=e.generateCode,u=e.openPane,d=(0,wn.P5)({controlName:"flag-editor-selection-controls"}),f=(0,Kc.gf)(Qc.x.id),h=d?f:"Alt-g",p=null!==(i=null===(t=Ld.$R.from(c))||void 0===t?void 0:t.id)&&void 0!==i?i:null,m=Qd({variables:{language:p},skip:!p}).data,v=mf({openPane:u,filePath:c,language:p}),g=(null!==(o=null===m||void 0===m||null===(n=m.languageExamples)||void 0===n||null===(r=n.examples)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>=1,y=(0,b.useMemo)((function(){var e=[];return e.push({icon:(0,a.tZ)(Fu.Z,{}),text:"Generate Code with AI",shortcut:l?void 0:h,onClick:function(e){oa({cta:"generate",version:"new"}),s(e)}}),v&&e.push({icon:(0,a.tZ)(_d.Z,{}),text:"Build an AI app for free with ModelFarm",onClick:function(){oa({cta:"modelFarm",version:"new"}),v()}}),p&&g&&e.push({icon:(0,a.tZ)(Bu.Z,{}),text:"Start with a code example",onClick:function(e){oa({cta:"examples",version:"new"}),e.dispatch({effects:ff.of({language:p,filePath:c})})}}),e}),[l,h,v,p,g,s,c]);return[Ud.use(y),pf]}({isMobile:O,generateCode:ee,filePath:t,openPane:u}),ae=function(e){var t=e.onGenerateCode,n=e.onEditCode,r=(0,wn.P5)({controlName:"flag-editor-selection-controls"}),i=rs.use(t,n,r);return(0,b.useMemo)((function(){return[ls,Jl.$,Jl.u,cs,ss,nc,us,cc,ds,qc,i]}),[i])}({onEditCode:ie,onGenerateCode:re}),le=(0,Cu.av)(),ce=le.onContextMenu,ue=le.openContextMenu,de=rd({openFile:c,path:t,view:w,onCommand:function(e){if(w){var t=w.state.selection.main.head;if(t){var n=w.coordsAtPos(t);n&&ue({target:{x:n.left,y:n.top},command:[de(),e],width:275})}}}}),me=(0,b.useCallback)((function(e){ce(e,{command:de(),width:275})}),[de,ce]),ve=id.use(O,me),ge=(0,b.useCallback)((function(e){ue({target:{x:e.right-275,y:e.top},width:275,command:de()})}),[de,ue]),Ze=(0,wn.P5)({controlName:"flag-editor-selection-controls"}),be=(0,Qc.W)({editCode:ne,explainCode:te,generateCode:ee,onMoreClick:ge}),we=function(){var e=(0,js.T)();return qs.use(e)}();return(0,a.tZ)("div",{css:Ra.ac,"data-cy":_?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(t),children:(0,a.tZ)(gl.ZP,{ref:Z,elementRef:G,css:Ra.Mp,initializing:_,filePath:t,hideTooltips:r,extensions:[ve,oe,z,M,k,H,L,q,ma,W,it,ae,we,$s,V,J,$,Y,K,Wc,N,P,kd,Id,B,!O&&Ze?be:[]],onException:function(e){var n,r={filePath:t,cursorPosition:JSON.stringify(null===(n=null===R||void 0===R?void 0:R.get(vl._s))||void 0===n?void 0:n.position),fileVersion:D({filePath:t})};if(w){var i=w.plugin(it),o=null===i||void 0===i?void 0:i.logs();null===i||void 0===i||i.flush(),r.domText=w.contentDOM.innerText,r.keystrokes=JSON.stringify(o),r.selection=JSON.stringify(w.state.selection.main.toJSON()),r.updateDoc=w.state.doc.sliceString(0)}S?x({error:e,tags:{codemirror:!0},extras:r,origin:"CodemirrorEditor: useEditor/onException"}):(0,jo.O)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:r})},noHistory:!0})})}var xf=n(15906),Cf=n(86885),kf=n(5681),Sf=n(29353),Ef=n(20087),Tf=n(13974),Rf=n(27500),Df=n(20457),If=n(84296),_f=n(2918),Bf=(0,en.X)({root:[C.l0.position.relative,C.l0.rowWithGap(16),C.l0.align.center,C.l0.justify.spaceBetween,C.l0.backgroundColor.backgroundDefault,{borderTop:"1px solid ".concat(C.TV.backgroundHigher)},{height:"29px",contain:"strict"}],group:[C.l0.flex.row,C.l0.flex.shrink(1),C.l0.align.center]});function Gf(e){var t=e.filePath,n=e.performPaneOperation,r=(0,wn.P5)({controlName:"flag-lsp-status-in-ws",logFlagToAnalytics:!1}),i=(0,wn.P5)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),o=(0,_.d)(),c=(0,_f.ZP)(),s=!o&&r,u=!o&&i,d=(0,wn.P5)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1}),f=(0,wn.P5)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),h=(0,wn.P5)({controlName:"flag-editor-indentation-quick-settings",logFlagToAnalytics:!1}),p=(0,wn.P5)({controlName:"flag-global-status-bar",default:!1}),m=(0,l.T3)()?void 0:{borderBottomLeftRadius:7,borderBottomRightRadius:7},v=(0,ur.Z)((function(){return function(){n({operation:"replace",pane:{type:"history",data:{path:t}}})}}),[t,n]),g=(0,ur.Z)((function(){return function(){n({operation:"open",pane:{type:"preferences"}})}}),[n]);return!o&&p?null:(0,a.BX)(go.Tg,{css:Bf.root,style:m,children:[(0,a.BX)(x.G,{css:Bf.group,children:[(0,_f.G_)(c)&&!o?(0,a.tZ)(If.Z,{}):null,s?(0,a.tZ)(kf.Z,{}):null,u?(0,a.tZ)(Tf.Z,{}):null,d?(0,a.tZ)(xf.Z,{performPaneOperation:n}):null,f?(0,a.tZ)(Rf.Z,{}):null,(0,a.tZ)(Ef.Z,{})]}),(0,a.BX)(x.G,{css:Bf.group,children:[(0,a.tZ)(Sf.Z,{}),h?(0,a.tZ)(Df.Z,{path:t,openSettings:g}):null,(0,a.tZ)(Cf.Z,{onOpen:v})]})]})}var Pf=n(97866),Af=n(25422),Nf=n(50480),Uf=n(98143),Lf=n(51875),Of=n(54008),Xf=n(54301),Mf=n(53674),Ff=(0,ef.iv)([vc.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),Wf={button:(0,ef.iv)([C.l0.reset.button,C.l0.p(2),C.l0.rowWithGap(4),C.l0.align.center,Ff]),text:(0,ef.iv)({fontSize:C.TV.fontSizeSmall})},Hf={opacity:1};function Vf(e){var t=e.icon,n=e.text,o=e.innerRef,l=e.ariaProps,c=e.active,s=(0,Xf.U)(l,o).buttonProps,u=(0,Mf.XI)({}),d=u.hoverProps,f=u.isHovered;return(0,a.BX)(x.G,(0,i.Z)((0,r.Z)({tag:"button",css:Wf.button,style:f||c?Hf:void 0,innerRef:o},(0,mc.dG)(s,d)),{children:[t?(0,b.cloneElement)(t,{size:16}):null,(0,a.tZ)(x.G,{css:Wf.text,children:n})]}))}var zf=n(73457),jf=n(74651),qf={underlay:(0,ef.iv)([C.l0.coverContainer,C.l0.position.fixed]),surface:(0,ef.iv)([C.l0.borderRadius(8),{boxShadow:C.TV.shadow2,border:"1px solid",borderColor:C.TV.backgroundHighest}])};function $f(e){var t=e.state,n=e.triggerRef,o=e.placement,l=e.children,c=(0,g.Z)((0,jf.Z)(),2),s=c[0],u=c[1],d=(0,zf.Sv)({placement:o,triggerRef:n,popoverRef:s,offset:8},t),f=d.popoverProps,h=d.underlayProps;return(0,a.BX)(zf.aV,{children:[(0,a.tZ)(x.G,(0,i.Z)((0,r.Z)({},h),{css:qf.underlay})),(0,a.BX)(go.Tg,(0,i.Z)((0,r.Z)({elevated:!0,css:qf.surface,innerRef:u},f),{children:[(0,a.tZ)(zf.U4,{onDismiss:t.close}),l,(0,a.tZ)(zf.U4,{onDismiss:t.close})]}))]})}var Yf=n(51936),Kf=(0,ef.iv)([C.l0.p(4)]);function Qf(e){var t=e.items,n=e.children,l=e.menuProps,c=e.selectedKeys,s=e.onAction,u=(0,Yf.D)({items:t,children:n,selectedKeys:c,selectionMode:"single"}),d=(0,b.useRef)(null),f=(0,Lf.H9)((0,r.Z)({items:t,onAction:s},l),u,d);return(0,a.tZ)(x.G,(0,i.Z)((0,r.Z)({},f.menuProps),{innerRef:d,css:Kf,children:(0,o.Z)(u.collection).map((function(e){return(0,a.tZ)(th,{item:e,state:u},e.key)}))}))}var Jf={root:(0,ef.iv)([C.l0.flex.row,C.l0.align.center,C.l0.position.relative,Ff]),selected:(0,ef.iv)([{opacity:1,backgroundColor:vc.vb.interactiveBackground}])},eh={opacity:1};function th(e){var t=e.item,n=e.state,o=(0,b.useRef)(null),l=(0,Lf.iX)({key:t.key},n,o),c=l.menuItemProps,s=l.isSelected,u=(0,Mf.XI)({}),d=u.hoverProps,f=u.isHovered;return(0,a.tZ)(x.G,(0,i.Z)((0,r.Z)({innerRef:o,css:[Jf.root,s&&Jf.selected],style:f||s?eh:void 0},(0,mc.dG)(c,d)),{children:t.rendered}))}var nh={root:(0,ef.iv)([C.l0.p(4),C.l0.rowWithGap(4),C.l0.align.center]),text:(0,ef.iv)([C.l0.truncate,C.l0.flex.growAndShrink(1),{fontSize:C.TV.fontSizeDefault}])};function rh(e){return(0,a.BX)(x.G,{css:[nh.root],children:[e.icon?(0,b.cloneElement)(e.icon,{size:16}):null,(0,a.tZ)(x.G,{css:nh.text,children:e.text})]})}var ih=n(41829),oh=n(158),ah=n(24109),lh=n(73798),ch=n(3746),sh=n(43242),uh=n(91888),dh=n(95183),fh=n(7188),hh=n(49275),ph=n(39151),mh=function(e){var t=new Set(ph.Z),n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,g.Z)(a.value,3),s=c[0],u=c[1],d=c[2];if(!t.has(s))throw new Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");if("string"===typeof u){var f=hh.s.get(u);if(!f)throw new Error("Couldn't find matching icon for ".concat(u));u=f}n.set(s,[u,null!==d&&void 0!==d?d:C.TV.foregroundDefault])}}catch(h){i=!0,o=h}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}([[Te.SymbolKind.Array,uh.Z],[Te.SymbolKind.Boolean,f.Z],[Te.SymbolKind.Class,"class",C.TV.yellowDefault],[Te.SymbolKind.Constant,"constant",C.TV.blueStronger],[Te.SymbolKind.Constructor,"method",C.TV.blurpleDefault],[Te.SymbolKind.Enum,ah.Z,C.TV.orangeDefault],[Te.SymbolKind.EnumMember,fh.Z,C.TV.blueStronger],[Te.SymbolKind.Event,ih.Z],[Te.SymbolKind.Field,dh.Z],[Te.SymbolKind.File,lh.Z],[Te.SymbolKind.Function,"function",C.TV.blurpleStronger],[Te.SymbolKind.Interface,ch.Z,C.TV.blueStronger],[Te.SymbolKind.Key,sh.Z],[Te.SymbolKind.Method,"method",C.TV.blurpleDefault],[Te.SymbolKind.Module,_d.Z,C.TV.purpleDefault],[Te.SymbolKind.Namespace,oh.Z],[Te.SymbolKind.Object,f.Z,C.TV.blueDimmer],[Te.SymbolKind.Operator,f.Z],[Te.SymbolKind.Package,_d.Z,C.TV.purpleDefault],[Te.SymbolKind.Property,dh.Z],[Te.SymbolKind.String,d.Z],[Te.SymbolKind.Struct,oh.Z],[Te.SymbolKind.TypeParameter,fh.Z],[Te.SymbolKind.Variable,fh.Z,C.TV.blueStronger]]);function vh(e){var t,n=e.kind,r=(0,g.Z)(null!==(t=mh.get(n))&&void 0!==t?t:[f.Z,C.TV.foregroundDefault],2),i=r[0],o=r[1];return(0,a.tZ)(i,{color:o,size:16})}function gh(e){return CSS.escape(e.name)}function yh(e){var t=e.selectedSymbol,n=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,l=(0,Uf.W)({onOpenChange:function(e){e&&(0,Yt.j)(Yt.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),c=b.useRef(null),s=(0,Lf.u4)({},l,c),u=s.menuTriggerProps,d=s.menuProps,f=t?new Set([t.name]):void 0;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(Vf,{text:o,icon:i,innerRef:c,ariaProps:u,active:l.isOpen}),l.isOpen?(0,a.tZ)($f,{triggerRef:c,state:l,placement:"bottom left",children:(0,a.tZ)(Qf,{menuProps:d,items:n,selectedKeys:f,onAction:function(e){var t=n.find((function(t){return gh(t)===e}));t&&(r(t.selectionRange.start),(0,Yt.j)(Yt.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,a.tZ)(Of.ck,{children:(0,a.tZ)(rh,{icon:(0,a.tZ)(vh,{kind:e.kind}),text:e.name})},gh(e))}})}):null]})}var Zh=b.memo((function(e){var t=e.symbols,n=e.symbolsPath,r=e.moveCursor,i=n.length?n[n.length-1]:null,o=i?i.children:t;return(0,a.BX)(a.HY,{children:[n.map((function(e,i){var o=0===i?t:n[i-1].children;return o?(0,a.BX)(b.Fragment,{children:[(0,a.tZ)(fd.Z,{size:12}),(0,a.tZ)(yh,{symbols:o,icon:(0,a.tZ)(vh,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},gh(e)):null})),(null===o||void 0===o?void 0:o.length)?(0,a.BX)(a.HY,{children:[(0,a.tZ)(fd.Z,{size:12}),(0,a.tZ)(yh,{symbols:o,text:"...",moveCursor:r})]}):null]})})),bh=(0,b.memo)((function(e){var t,n=e.view,r=(0,b.useCallback)((function(e){null===n||void 0===n||n.dispatch({scrollIntoView:!0,selection:q.jT.cursor((0,xe.R)(n.state.doc,e))}),null===n||void 0===n||n.focus()}),[n]),i=(0,b.useDeferredValue)({symbols:(0,Nf.IK)(n,Wr),symbolsPath:(0,Nf.IK)(n,jr)});return(null===(t=i.symbols)||void 0===t?void 0:t.length)?(0,a.tZ)(Zh,{symbols:i.symbols,symbolsPath:i.symbolsPath||[],moveCursor:r}):null})),wh=n(35429),xh=n(45969);function Ch(e){var t=e.path,n=e.performPaneOperation,r=(0,I.uN)(),i=(0,b.useCallback)((function(e){n({operation:"open",pane:(0,wh.$E)(e)})}),[n]);return(0,a.tZ)(wh.h4,{children:(0,a.tZ)(wh.Qc,{children:(0,a.tZ)(xh.tr,{path:t,onFileClick:i,children:(0,a.tZ)(bh,{view:r})})})})}function kh(e){var t=(0,Af.Z)(),n=(0,F.xZ)(e.filePath),r=(0,Pf.Z)(uf.y.Editor),i=(0,w.Z)(),o=e.performPaneOperation,l=(0,b.useCallback)((function(e){return o({operation:"open",pane:e,secondary:!0})}),[o]),c=(0,wn.P5)({controlName:"flag-global-status-bar",default:!1});return(0,a.BX)("div",{ref:r,css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%",boxShadow:"".concat(t?"0 3px 0 3px ".concat(t):"0"),borderBottomLeftRadius:c?"4px":"0px",borderBottomRightRadius:c?"4px":"0px"},children:[e.performPaneOperation?(0,a.tZ)(Ch,{performPaneOperation:e.performPaneOperation,path:e.filePath}):null,(0,a.BX)("div",{css:Ra.ev,children:[(0,a.tZ)(wf,{openPane:l,openFile:e.openFile,openThreadsInbox:e.openThreadsInbox,filePath:e.filePath,autoFocus:e.autoFocus,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated}),n?(0,a.tZ)(M,{}):null]}),(0,a.tZ)("div",{css:{display:i?"none":"block"},children:(0,a.tZ)(Gf,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,a.tZ)(N,{filePath:e.filePath,isLoading:!1})]})}var Sh=n(80680),Eh=n(10267),Th=n(11353),Rh=n(55418);var Dh=(0,en.X)({root:[C.l0.coverContainer,C.l0.center,C.l0.p(16)]});function Ih(e){var t=e.message;return(0,a.tZ)(x.G,{css:Dh.root,children:(0,a.tZ)(x.G,{children:(0,a.tZ)(Rh.E,{icon:(0,a.tZ)(Bs.Z,{}),colorway:"orange",text:t})})})}var _h=n(42362),Bh=n(17403),Gh=n(52783),Ph=n(46037),Ah=Bh.Type.Object({type:Bh.Type.Literal("codeEditor"),data:Bh.Type.Object({path:Bh.Type.Union([Bh.Type.String({minLength:1}),Bh.Type.Null()]),line:Bh.Type.Optional(Bh.Type.Number()),col:Bh.Type.Optional(Bh.Type.Number())})}),Nh={Content:function(e){var t=e.pane,n=e.options;return(0,a.tZ)(Lh,(0,i.Z)((0,r.Z)({},t.data),{isActive:n.isActive,isHidden:n.isHidden,performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.pane,n=e.size;return(0,a.tZ)(c.Z,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path?(0,Qo.UO)(e.data.path):"No file open"},decode:function(e){return Gh.B4.Decode(Ah,e)}};function Uh(e){var t=e.path,n=e.performPaneOperation,r=(0,I.uN)(),i=function(e){return(0,ur.Z)((function(){return e?{match:Tu.pl,data:{type:"action",label:"Toggle all folds",icon:(0,a.tZ)(fd.Z,{}),run:function(){0===(0,Qe.q2)(e.state).size?(0,Qe.g_)(e):(0,Qe.jZ)(e)}}}:null}),[e])}(r),c=(0,Nf.IK)(r,Ph.W),h=(0,Nf.IK)(r,Qr.Gz),p=(0,Nf.IK)(r,Qr.SD);(0,b.useEffect)((function(){c&&n({operation:"commit"})}),[c,n]);var m=(0,ur.Z)((function(){return r&&p?h?{type:"action",icon:(0,a.tZ)(Un.Z,{}),label:"Formatting...",run:function(){}}:{dataCy:"ws-format-btn",type:"action",icon:(0,a.tZ)(Th.Z,{}),label:"Format "+(0,Qo.UO)(t),run:function(){(0,Qr.z1)(r)}}:null}),[r,p,h,t]),v=(0,wh.Mp)({path:t,performPaneOperation:n}),g=function(){var e=(0,l.T3)(),t=(0,ye.Z)(),n=t.preferences.minimapDisplay,r=t.update;return(0,ur.Z)((function(){return e?null:{match:Tu.pl,data:{label:"Minimap",icon:(0,a.tZ)(s.Z,{}),type:"context"},commands:function(e){var t=e.active,i=e.search;return t||i?[{value:"none",label:"Hide",icon:(0,a.tZ)(u.Z,{})},{value:"characters",label:"Characters",icon:(0,a.tZ)(d.Z,{})},{value:"blocks",label:"Blocks",icon:(0,a.tZ)(f.Z,{})}].filter((function(e){return e.value!==n})).map((function(e){return{match:Tu.pl,data:{type:"action",label:e.label,icon:e.icon,run:function(){r({minimapDisplay:e.value})}}}})):[]}}}),[r,n,e])}(),y=function(e){var t=e.openHistory;return(0,ur.Z)((function(){return{match:Tu.pl,data:{label:"History",icon:(0,a.tZ)(_h.Z,{}),type:"action",run:function(){t()}}}}),[t])}({openHistory:function(){return n({operation:"replace",pane:{type:"history",data:{path:t}}})}});return(0,Eh.L5)((function(){var e=function(e){return{label:"Preview",icon:(0,a.tZ)(Es.Z,{}),type:"action",run:function(){n({operation:"replace",pane:{type:e,data:{path:t}}})}}};if(r){var l,c,s=[];if(s.push(y),g&&s.push(g),i&&s.push(i),v)(l=s).push.apply(l,(0,o.Z)(v));return m&&(c=[m]),(0,Qo.B4)(t)&&(c=c&&c.length?[c[0],e("media")]:[e("media")]),(0,Qo.gK)(t)&&(c=c&&c.length?[c[0],e("markdown")]:[e("markdown")]),{type:"codeEditor",actions:c,commands:s,getEditorView:function(){return r},getCurrentSelectionText:function(){if(!r.state.selection.main.empty)return r.state.sliceDoc(r.state.selection.main.from,r.state.selection.main.to)},insertGhostwriterChatCode:function(e,t){Fc({view:r,insert:e,overwrite:t})},revertGhostwriterChatCode:function(){!function(e){var t=e.state.field(Wc,!1);t?e.dispatch({changes:t,effects:Mc.of(null)}):Ke.Tb(new Error("RevetGhostwriterCodeInsertState not found when trying to revert"))}(r)},fetchProblems:function(){var e;return(0,Je.j)(r),null!==(e=r.state.field(dt,!1))&&void 0!==e?e:[]}}}}),[r,m,i,v,g,y,n,t]),(0,Eh.Wk)((function(){return r}),[r]),null}function Lh(e){var t=e.path,n=e.line,r=e.col,i=e.isActive,o=e.isHidden,c=e.performPaneOperation,s=(0,b.useState)((function(){return(0,v.MT)()}))[0],u=(0,b.useState)((function(){return(0,v.MT)()}))[0],d=(0,h.useRouter)(),f=!m()&&!(0,l.Vg)(d)&&i,p=function(e){var t=(0,se.Z)().fs,n=(0,b.useState)(null),r=n[0],i=n[1];return(0,b.useEffect)((function(){if(e){var n=t.watchPathStat(e,{onNewStat:function(t){t.exists?t.type!==ii.Tv.Directory?i(null):i('"'.concat(e,'" is a directory')):i('No file found at "'.concat(e,'", it may have been deleted'))},onError:function(){i('Unknown error occured while read "'.concat(e,'", try re-opening the editor'))}});return function(){n(),i(null)}}}),[t,e]),r}(t),g=(0,ur.Z)((function(){return{line:n,col:r}}),[n,r]),y=(0,ur.Z)((function(){return function(){c({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}}),[c,t]),Z=(0,ur.Z)((function(){return function(e){c({operation:"commit"}),c({operation:"open",pane:{type:"codeEditor",data:e}})}}),[c]),w=(0,b.useCallback)((function(){c({operation:"open",secondary:!0,pane:{type:"threadInbox"}})}),[c]);return t?p?(0,a.tZ)(Ih,{message:p}):(0,a.tZ)(I.Cl.Provider,{value:s,children:(0,a.BX)(Sh.ox.Provider,{value:u,children:[(0,a.tZ)(kh,{filePath:t,autoFocus:f,isHidden:null!==o&&void 0!==o&&o,deeplink:g,onDeeplinkUpdated:y,hideMobileKeyboardToolbar:!0,performPaneOperation:c,openFile:Z,openThreadsInbox:w},t),(0,a.tZ)(Uh,{path:t,isActive:i,performPaneOperation:c})]})}):null}},15249:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(17403),i=n(52783),o=r.Type.Object({type:r.Type.Literal("commands"),data:r.Type.Object({autoFocus:r.Type.Boolean()})}),a=function(e){return i.B4.Decode(o,e)}},33978:function(e,t,n){n.d(t,{R:function(){return sa}});var r,i=n(74985),o=n(24531),a=n(2272),l=n(50959),c=n(26473),s=n(88965),u=n(57135),d=n(96583),f=n(78572),h=n(34547),p=n(55418),m=n(61025),v=n(34052),g=n(75277),y=n(91888),Z=n(85247),b=n(79824),w=n(51631),x=n(95141),C=n(6108),k=n(37268),S=n(13090),E=n(20538),T=(0,m.X)({root:[{borderBottom:"1px solid ".concat(s.TV.outlineDimmest)}],inner:[s.l0.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(s.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(s.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[s.l0.flex.row,s.l0.align.center,s.l0.overflowX("auto"),s.l0.pl(8)],tab:[C.gU.nofill,s.l0.borderRadius(0),s.l0.px(12),s.l0.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:s.TV.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[s.l0.position.absolute,s.l0.borderRadius(16),s.l0.width(8),s.l0.height(8),s.l0.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),R=function(e){var t=e.tabs,n=e.activeView,r=e.onClick,o=(0,E.o)("deployment-analytics-dot"),a=o.isLoading,l=o.isDone;return(0,i.tZ)(k.Tg,{css:T.root,children:(0,i.tZ)(c.G,{css:T.inner,children:(0,i.tZ)(c.G,{css:T.tabs,children:t.map((function(e){return(0,i.BX)(c.G,{css:s.l0.position.relative,children:[(0,i.tZ)(x.zx,{style:{borderBottom:"1px solid "+(n===e.view?s.TV.foregroundDefault:"transparent")},css:T.tab,text:e.label,iconLeft:e.icon,onClick:function(){return r(e)}}),e.view!==S.k.Analytics||a||l?null:(0,i.tZ)(c.G,{css:T.dot})]},e.view)}))})})})},D=n(72006),I=n(4405),_=n(77637),B=n(31445),G=[s.l0.px(8),s.l0.pt(16)],P=(0,m.X)({root:[G],rootMaxWidth:[G,B.Qw.maxWidth]}),A=function(e){var t=e.children,n=e.maxWidth,r=(0,_.Z)(e,["children","maxWidth"]);return(0,i.tZ)(c.G,(0,I.Z)((0,D.Z)({},r),{css:n?P.rootMaxWidth:P.root,children:t}))},N=n(57389),U=n(53312),L=n(6543),O=n(34017),X=n(52481),M=n(52163),F=n(35927),W=n(55021),H=n(84059),V=n(87693),z=n(54008),j=n(91625),q=n(9434),$=function(e){var t=e.context;(0,q.j)(q.U3.DEPLOYMENT_SECTION_VIEWED,{context:t})},Y=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],K={label:"one week",key:168},Q=s.nC.min(600),J=(0,m.X)({fullWidth:(0,N.Z)({},Q,{gridColumn:"span 2"})}),ee=(0,m.X)({container:(0,N.Z)({display:"grid",gap:32},Q,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:J.fullWidth,map:[J.fullWidth],pies:[J.fullWidth,s.l0.flex.column,(0,N.Z)({gap:32},s.nC.min(480),[s.l0.flex.row,{" > *":{flex:1}}])]}),te=function(e){var t=e.replId,n=(0,l.useState)(K),r=n[0],o=r.key,a=r.label,u=n[1],d=(0,l.useState)((0,L.Z)((0,O.Z)(new Date),o-1)),f=d[0],h=d[1],p=(0,E.o)("deployment-analytics-dot"),m=p.isDone,v=p.setAsDone,g=(0,L.Z)((0,O.Z)(new Date),23),y=(0,V.F)().values,Z=[y.global.redDefault,y.global.redDimmer,y.global.redStronger,y.global.redDimmest],b=[y.global.orangeDefault,y.global.orangeDimmer,y.global.orangeStronger,y.global.orangeDimmest],w=[y.global.blueDefault,y.global.blueDimmer,y.global.blueStronger,y.global.blueDimmest],x=[y.global.greenDefault,y.global.greenDimmer,y.global.greenStronger,y.global.greenDimmest];return l.useEffect((function(){$({context:S.k.Analytics})}),[]),l.useEffect((function(){m||v()}),[m,v]),(0,i.tZ)(A,{children:(0,i.BX)(c.G,{css:ee.container,children:[(0,i.tZ)(c.G,{css:ee.fullWidth,children:(0,i.tZ)(z.ZE,{items:Y,label:"Past ".concat(a),icon:(0,i.tZ)(j.Z,{}),onAction:function(e){var t,n="string"===typeof e?parseInt(e,10):e;u(null!==(t=Y.find((function(e){return e.key===n})))&&void 0!==t?t:K),h((0,L.Z)((0,O.Z)(new Date),n-1))},cssProps:[s.l0.width("fit-content")],children:Y.map((function(e){return(0,i.tZ)(z.ck,{children:(0,i.tZ)(c.G,{css:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.color.foregroundDefault],children:(0,i.tZ)(U.xv,{multiline:!1,children:e.label})})},e.key)}))})}),(0,i.tZ)(c.G,{css:ee.fullWidth,children:(0,i.tZ)(X.Z,{replId:t,start:f,hours:o,deployment:!0})}),(0,i.tZ)(M.Z,{replId:t,metric:W.Pc.Url,start:f,hours:o,deployment:!0,count:4,expandable:!0}),(0,i.tZ)(M.Z,{replId:t,metric:W.Pc.Referrer,start:f,hours:o,deployment:!0,count:4,expandable:!0}),(0,i.tZ)(F.Z,{replId:t,title:"HTTP Statuses (24h)",metric:W.RH.Statuses,start:g,hours:24,deployment:!0,colorFn:function(e,t){var n=Number(e);return n<300?x[t%x.length]:n<400?w[t%w.length]:n<500?b[t%b.length]:Z[t%Z.length]}}),(0,i.tZ)(H.Z,{replId:t,start:f,hours:o,deployment:!0}),(0,i.BX)(c.G,{css:ee.pies,children:[(0,i.tZ)(M.Z,{replId:t,metric:W.Pc.Browser,start:f,hours:o,count:100,variant:"pie",deployment:!0}),(0,i.tZ)(M.Z,{replId:t,metric:W.Pc.Browser,start:f,hours:o,count:100,variant:"device-pie",deployment:!0})]}),(0,i.tZ)(c.G,{css:ee.map,children:(0,i.tZ)(M.Z,{replId:t,metric:W.Pc.Country,start:f,hours:o,count:100,variant:"map",deployment:!0})})]})})},ne=n(43312),re=n(10321),ie=n(69600),oe=(r={},(0,N.Z)(r,w.r4.Gce,"Reserved VM"),(0,N.Z)(r,w.r4.CloudRun,"Autoscale"),(0,N.Z)(r,w.r4.Static,"Static"),r),ae=n(82893),le=n.n(ae),ce=n(89855),se=n(58292),ue=n(76092),de=function(e){var t=e.currentBuild,n=(0,a.Z)(l.useState([]),2),r=n[0],o=n[1];return l.useEffect((function(){var e,n="HostingDeployment"===(null===(e=t.repl.hostingDeployment)||void 0===e?void 0:e.__typename)&&t.repl.hostingDeployment.id,r=[];switch(t.provider){case w.r4.Goval:r.push({href:"https://".concat(n,".id.repl.co"),private:!0});break;case w.r4.Gce:case w.r4.CloudRun:case w.r4.Static:var i,a,l,c,s="HostingDeployment"===(null===(i=t.repl.hostingDeployment)||void 0===i?void 0:i.__typename)?null===(a=t.repl.hostingDeployment)||void 0===a?void 0:a.replitAppSubdomain:void 0;if(!s&&(null===(l=t.repl.owner)||void 0===l?void 0:l.username)&&(s="".concat(t.repl.slug,"-").concat(t.repl.owner.username)),s)r.push({href:"https://".concat(s).concat("replit.com"!==(null===window||void 0===window||null===(c=window.location)||void 0===c?void 0:c.hostname)?".staging":"",".replit.app"),private:!1})}if(t.repl.domains){var u=t.repl.domains.filter((function(e){return(null===e||void 0===e?void 0:e.hosting_deployment_id)===n})),d=!0,f=!1,h=void 0;try{for(var p,m=u[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;v&&r.push({href:"https://".concat(v.domain),private:!1,state:"verified"!==v.state?v.state:void 0})}}catch(g){f=!0,h=g}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}}o(r)}),[t]),(0,i.tZ)(c.G,{css:[s.l0.colWithGap(2),s.l0.flex.growAndShrink(1)],children:r.map((function(e,t){return(0,i.BX)(c.G,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,i.tZ)(U.xv,{css:[s.l0.flex.shrink(1)],multiline:!1,children:(0,i.tZ)("a",{href:e.href,target:"_blank",css:[s.l0.color.foregroundDefault],children:e.href})}),e.private?(0,i.tZ)(ue.Z,{color:s.TV.foregroundDefault}):null,(0,i.tZ)("a",{href:e.href,target:"_blank",css:[s.l0.display.flex,s.l0.align.center],children:(0,i.tZ)(se.Z,{color:s.TV.foregroundDefault})}),e.state?(0,i.BX)(U.xv,{multiline:!1,children:["(",e.state,")"]}):null]},"domains-".concat(t))}))})},fe=(0,ne.F4)("\n    50% {\n      background-color: ".concat(s.TV.accentPositiveDimmest,";\n      outline: 1px solid ").concat(s.TV.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),he=(0,m.X)({deploymentInfo:[s.l0.colWithGap(8),s.l0.p(16),s.l0.borderRadius(8),{outline:"1px solid transparent"}]}),pe=(0,m.X)({textButton:[s.l0.cursor.pointer,s.l0.reset.button,s.l0.color.accentPrimaryStronger,s.l0.focusRing,s.l0.hover(s.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],textLink:s.l0.hover(s.l0.color.accentPrimaryStrongest),labeledSection:[s.l0.flex.growAndShrink(1),(0,N.Z)({},s.nC.min(400),[s.l0.flex.row,s.l0.align.baseline])],labeledSectionFullWidth:[s.l0.flex.growAndShrink(1),(0,N.Z)({},s.nC.min(400),[s.l0.flex.row,s.l0.align.baseline,s.l0.flex.grow(1),s.l0.justify.spaceBetween])],buildStatus:[s.l0.rowWithGap(4),s.l0.align.center],deploymentInfo:he.deploymentInfo,deploymentInfoAnimate:[he.deploymentInfo,{animation:"".concat(fe," 700ms ease-out")}],deploymentInfoContent:[s.l0.colWithGap(8),(0,N.Z)({},s.nC.min(400),s.l0.colWithGap(4))]}),me=function(e){var t=e.text,n=e.onClick;return(0,i.tZ)("button",{css:pe.textButton,onClick:n,children:t})},ve=function(e){var t=e.name,n=e.sku,r=e.canManage,o=e.usageLink,a=e.onManageClick;return(0,i.BX)(c.G,{css:[s.l0.rowWithGap(6),s.l0.flex.wrap],children:[(0,i.tZ)(U.xv,{multiline:!1,children:t}),n?(0,i.BX)(U.xv,{color:"dimmest",multiline:!1,children:["(",n,")"]}):null,r?(0,i.tZ)(me,{text:"Manage",onClick:a}):null,o?(0,i.tZ)(le(),{legacyBehavior:!0,href:"/account#resource-usage",passHref:!0,children:(0,i.tZ)("a",{css:pe.textLink,children:(0,i.tZ)(U.xv,{children:"See all usage"})})}):null]})},ge=function(e){var t=e.label,n=e.children,r=e.fullWidth;return(0,i.BX)(c.G,{css:r?pe.labeledSectionFullWidth:pe.labeledSection,children:[(0,i.tZ)(c.G,{css:s.l0.minWidth(100),children:(0,i.tZ)(U.xv,{css:s.l0.color.foregroundDimmer,multiline:!1,children:t})}),n]})},ye=function(e){var t=e.provider,n=e.machine,r=e.onViewBuildLogs,o=e.onManageClick,a=(0,f.kW)(),s=(0,f.Sl)((0,h.Z)()).hostingTier,u=(0,f.$y)(),d=void 0!==u,m=t===w.r4.Gce&&d&&!s,v=t!==w.r4.Static&&d&&null===u.hasImageTag,g=Boolean((a===ie.z.Ready||a===ie.z.Suspended)&&!v),y=null,Z=null,C=null,S=null,E=(0,f.pn)(),T=l.useRef(void 0);l.useEffect((function(){E&&(T.current=null===E||void 0===E?void 0:E.id)}),[E,null===E||void 0===E?void 0:E.id]);var R=(null===u||void 0===u?void 0:u.status)===w.Fe.Success,D=(null===u||void 0===u?void 0:u.id)===T.current,I=R&&D;switch(u&&(y=(0,i.BX)(i.HY,{children:[(0,i.tZ)(ge,{label:"Status",children:(0,i.tZ)(c.G,{css:pe.buildStatus,children:(0,i.tZ)(ce.hD,{onClick:function(){r(u)}})})}),(0,i.tZ)(ge,{label:"Domains",children:(0,i.tZ)(de,{currentBuild:u})})]})),t){case w.r4.Gce:if(!s)break;Z=(0,i.tZ)(ge,{label:"Type",fullWidth:!d,children:(0,i.tZ)(ve,{name:oe[t],sku:(null===n||void 0===n?void 0:n.configurationLabel)||(0,re.$)(s.sku),canManage:g,onManageClick:o})});break;case w.r4.CloudRun:Z=(0,i.tZ)(ge,{label:"Type",fullWidth:!d,children:(0,i.tZ)(ve,{name:oe[t],sku:n?"".concat(n.configurationLabel," / ").concat(n.maxInstances," Max"):"Beta",canManage:g,usageLink:!0,onManageClick:o})});break;case w.r4.Static:Z=(0,i.tZ)(ge,{label:"Type",fullWidth:!d,children:(0,i.tZ)(ve,{name:oe[t],sku:void 0,canManage:g&&d,onManageClick:o})});case w.r4.Goval:}return v&&(C=(0,i.tZ)(c.G,{children:(0,i.tZ)(p.E,{icon:(0,i.tZ)(b.Z,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),m&&(S=(0,i.tZ)(x.zx,{onClick:function(){o()},text:"Select hosting tier"})),y||Z||C||S?(0,i.BX)(k.Tg,{elevated:!0,css:I?pe.deploymentInfoAnimate:pe.deploymentInfo,style:{paddingTop:u?12:16},children:[u?(0,i.tZ)(U.xv,{variant:"subheadDefault",multiline:!1,children:"Production"}):null,(0,i.BX)(c.G,{css:pe.deploymentInfoContent,children:[y,Z,C,S]})]}):null},Ze=n(3689),be=n(76449),we=n(27773),xe=n(16296),Ce=n(89138),ke=function(e){return e.loading?(0,i.tZ)(c.G,{css:[s.l0.p(8),s.l0.center],children:(0,i.tZ)(we.Z,{})}):null},Se=(0,m.X)({error:[s.l0.flex.grow(0),s.l0.mt(0)]}),Ee=function(e){var t=e.text;return(0,i.tZ)(A,{css:Se.error,children:(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(b.Z,{}),text:t})})},Te=(0,m.X)({back:[s.l0.flex.row,s.l0.align.center]}),Re=function(e){var t=e.onBack;return(0,i.tZ)(c.G,{css:Te.back,children:(0,i.tZ)(xe.hU,{alt:"Back",tooltipHidden:!0,onClick:t,children:(0,i.tZ)(Ce.Z,{})})})},De=n(43119),Ie=n(71440),_e=n(24635);function Be(){var e=(0,De.Z)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n    }\n  }\n"]);return Be=function(){return e},e}function Ge(){var e=(0,De.Z)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n  ","\n"]);return Ge=function(){return e},e}function Pe(){var e=(0,De.Z)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Pe=function(){return e},e}function Ae(){var e=(0,De.Z)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return Ae=function(){return e},e}var Ne={},Ue=(0,Ie.Ps)(Be()),Le=(0,Ie.Ps)(Ge(),Ue),Oe=(0,Ie.Ps)(Pe(),Le);var Xe=(0,Ie.Ps)(Ae());function Me(){var e=(0,De.Z)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n    currentBuild {\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n    }\n  }\n"]);return Me=function(){return e},e}function Fe(){var e=(0,De.Z)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return Fe=function(){return e},e}var We={},He=(0,Ie.Ps)(Me()),Ve=(0,Ie.Ps)(Fe(),He);function ze(){var e=(0,De.Z)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n        }\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n  ","\n"]);return ze=function(){return e},e}var je={},qe=(0,Ie.Ps)(ze(),Le,He);var $e=n(62385),Ye=n(9970),Ke=n(18837);function Qe(){var e=(0,De.Z)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Qe=function(){return e},e}var Je={},et=(0,Ie.Ps)(Qe());var tt=n(49313),nt=n(45317),rt=n(95134),it=n(35742),ot=n(44385),at=n(94979),lt=n(8146),ct=function(e){var t=e.stage,n=e.activeStage;return t===e.erroredStage?(0,i.tZ)(b.Z,{alt:"error"}):t<n?(0,i.tZ)(ot.Z,{alt:"success"}):t===n?(0,i.tZ)(we.Z,{alt:"current"}):(0,i.tZ)(it.Z,{alt:"waiting"})},st=function(e){var t=e.stage,n=e.activeStage,r=e.erroredStage;return n?t===r?"negative":t<n?"positive":t===n?"primary":null:null},ut=function(e){var t,n=e.stage,r=e.totalStagesWithTitle,o=e.activeStage,a=e.text,l=e.erroredStage,c=(0,lt.d)({tablet:!0});return(0,i.tZ)(rt.D,{text:o?a:"",colorway:null!==(t=st({stage:n,activeStage:o,erroredStage:l}))&&void 0!==t?t:void 0,variant:"filled",css:[s.l0.border({color:nt.TV.backgroundDefault}),s.l0.overflow("hidden"),o||c?{}:at.p.foregroundPulse(),(0,N.Z)({flex:1,height:26,zIndex:r-n,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":s.l0.display.none},s.nC.min(400),{" span":s.l0.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:o?(0,i.tZ)(ct,{stage:n,activeStage:o,erroredStage:l}):void 0})},dt=n(90602),ft=n(16572),ht=n(25593),pt=n(59589),mt=[{id:0,title:"Provision",statusType:w.Fe.Pending},{id:1,title:"Build",statusType:w.Fe.Building},{id:2,title:"Bundle",statusType:w.Fe.Running},{id:3,title:"Promote",statusType:w.Fe.Promoting},{id:4,statusType:w.Fe.Success}],vt=mt.filter((function(e){return"title"in e})),gt=function(e){return mt.find((function(t){return t.statusType===e}))},yt=(0,m.X)({base:{borderRadius:6,paddingLeft:6,paddingRight:6,height:24},disabled:{pointerEvents:"none",color:s.TV.greyDefault}}),Zt=[s.l0.borderRadius(8),{border:"1px solid var(--outline-dimmest)"}],bt=(0,m.X)({container:Zt,top:[s.l0.colWithGap(12),s.l0.p(16),s.l0.pt(12)],header:[s.l0.rowWithGap(40)],started:[s.l0.rowWithGap(6),s.l0.flex.growAndShrink(1),s.l0.justify.end],cancel:yt.base,canceling:[yt.base,yt.disabled],stages:[s.l0.flex.row,s.l0.flex.grow(1),{zIndex:0}],bottom:[s.l0.borderRadius(0,0,8,8),s.l0.overflow("hidden")],logsOpen:[s.l0.overflow("hidden"),s.l0.height("auto")],logsClosed:[s.l0.overflow("hidden"),s.l0.height(0)],xterm:[s.l0.width("100%"),s.l0.maxWidth("100%"),s.l0.height(340)]}),wt=function(e){return(0,i.BX)(c.G,{css:bt.top,children:[(0,i.BX)(c.G,{css:bt.header,children:[(0,i.BX)(c.G,{css:s.l0.rowWithGap(8),children:[(0,i.tZ)(U.xv,{variant:"subheadDefault",multiline:!1,children:"Deploying"}),(0,i.tZ)(x.zx,{style:{opacity:e.onCancel?1:0},size:"small",text:"Cancel",css:e.isCanceling?bt.canceling:bt.cancel,onClick:e.onCancel,iconRight:e.isCanceling?(0,i.tZ)(we.Z,{}):void 0})]}),(0,i.BX)(c.G,{css:bt.started,children:[e.timeStarted&&e.userDisplayName?(0,i.BX)(U.xv,{css:s.l0.color.greyStronger,multiline:!1,children:["Started ".concat((0,ft.Z)(new Date(e.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,i.tZ)("span",{css:s.l0.color.foregroundDefault,children:e.userDisplayName})]}):null,e.onViewBuildLogs?(0,i.tZ)(xe.hU,{onClick:e.onViewBuildLogs,alt:"View deploy logs",children:e.viewBuildLogs?(0,i.tZ)(ht.Z,{}):(0,i.tZ)(j.Z,{})}):null]})]}),(0,i.tZ)(c.G,{css:bt.stages,children:vt.map((function(t){var n=t.id,r=t.title;return(0,i.tZ)(ut,{stage:n,totalStagesWithTitle:vt.length,text:r,activeStage:e.activeStage,erroredStage:e.erroredStage},n)}))})]})},xt=function(e){return(0,f.kW)()===ie.z.Preparing?(0,i.tZ)(c.G,{css:bt.container,children:(0,i.tZ)(wt,{})}):(0,i.tZ)(Ct,(0,D.Z)({},e))},Ct=function(e){var t,n,r,o,h,p,m,v,g,y,Z=e.initialBuild,b=e.viewBuildLogsOnLoad,x=e.onViewLogs,C=e.onCanceled,k=e.onError,S=e.openFile,E=(0,f.rm)(),T=(0,f.pn)(),R=T?{id:T.id,status:T.status,provider:T.provider,timeStarted:T.timeCreated,userDisplayName:T.user.displayName}:void 0,I=l.useRef(Z||R),_=function(e){var t=(0,D.Z)({},Je,e);return _e.a(et,t)}({skip:!(null===(t=I.current)||void 0===t?void 0:t.id),variables:{input:{buildId:null!==(y=null===(n=I.current)||void 0===n?void 0:n.id)&&void 0!==y?y:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null===e||void 0===e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":k(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var t=e.hostingBuildDeployActionHistory.results;if(t&&t.length>0){var n=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;switch(s.__typename){case"HostingBuildDeployLogAction":n.push(s.log);break;case"HostingBuildDeployStatusAction":r.push(s)}}}catch(v){o=!0,a=v}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}K({type:"history",payload:n});var u=!0,d=!1,f=void 0;try{for(var h,p=r[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;Q(m.status)}}catch(v){d=!0,f=v}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}}break;default:k("Unexpected typename.")}},onError:function(e){k(e.message)}}),B=_.loading,G=_.refetch;(0,f.U)((function(e){switch(e.__typename){case"HostingBuildDeployLogAction":var t=e.log;K({type:"update",payload:t});break;case"HostingBuildDeployStatusAction":var n=e.status;Q(n)}}));var P=(0,a.Z)(l.useState(I.current?null===(r=gt(I.current.status))||void 0===r?void 0:r.id:void 0),2),A=P[0],N=P[1],U=(0,a.Z)(l.useState("failed"===(null===(o=I.current)||void 0===o?void 0:o.status)?null===(p=gt(null===(h=I.current)||void 0===h?void 0:h.status))||void 0===p?void 0:p.id:void 0),2),L=U[0],O=U[1],X=(0,a.Z)(l.useState(!1),2),M=X[0],F=X[1],W=(0,f.XZ)(),H=(0,a.Z)((0,Ke.Z)({openFile:S,listFiles:W.listFiles}),2),V=H[0],z=H[1],j=(0,tt.f)(),q=(0,a.Z)(l.useReducer((function(e,t){switch(t.type){case"history":return V&&V.clear(),(0,Ye.Z)(t.payload).concat((0,Ye.Z)(e));case"update":return[t.payload];case"refetch":return V&&V.clear(),B||G(),[]}}),[]),2),Y=q[0],K=q[1],Q=function(e){if(e===w.Fe.Failed)O(A);else{var t=gt(e);if(!t)return;N(t.id)}},J=function(){var e=(0,u.Z)((function(){return(0,d.__generator)(this,(function(e){switch(e.label){case 0:return F(!0),[4,E()];case 1:return e.sent(),C(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ee=(0,a.Z)(l.useState(b||!1),2),te=ee[0],ne=ee[1],re=function(){ne(!te),te||$({context:"deploy_progress_logs"})};l.useEffect((function(){$({context:"deploy_progress"})}),[]),l.useEffect((function(){var e;(null===(e=I.current)||void 0===e?void 0:e.id)&&T&&T.id!==I.current.id&&(I.current={id:T.id,status:T.status,provider:T.provider,timeStarted:T.timeCreated,userDisplayName:T.user.displayName},N(void 0),O(void 0),K({type:"refetch"}))}),[T,null===(m=I.current)||void 0===m?void 0:m.id,G]),l.useEffect((function(){var e;void 0!==A&&"failed"===(null===(e=I.current)||void 0===e?void 0:e.status)&&O(A)}),[A,null===(v=I.current)||void 0===v?void 0:v.status]),l.useEffect((function(){V&&Y.forEach((function(e){return V.write(e)}))}),[Y,V]);var ie,oe=null===(ie=A,g=mt.find((function(e){return e.id===ie})))||void 0===g?void 0:g.statusType,ae=oe!==w.Fe.Success&&!L;return I.current?(0,i.BX)(c.G,{css:bt.container,children:[(0,i.tZ)(wt,{onCancel:ae?J:void 0,isCanceling:M,onViewBuildLogs:re,viewBuildLogs:te,timeStarted:I.current.timeStarted,userDisplayName:I.current.userDisplayName,activeStage:A,erroredStage:L}),(0,i.BX)(c.G,{css:bt.bottom,children:[(0,i.BX)(c.G,{css:te?bt.logsOpen:bt.logsClosed,children:[(0,i.tZ)(dt.R,{}),(0,i.tZ)(c.G,{css:[s.l0.display.flex,s.l0.pt(12),s.l0.pl(16),s.l0.overflow("hidden"),{backgroundColor:null===j||void 0===j?void 0:j.background}],children:(0,i.tZ)(c.K.div,{css:bt.xterm,ref:z})})]}),L&&oe?(0,i.BX)(i.HY,{children:[(0,i.tZ)(dt.R,{}),oe===w.Fe.Building?(0,i.tZ)(Tt,{provider:I.current.provider,logs:Y.slice(-3),openFile:S,viewBuildLogs:te,onViewBuildLogs:re}):null,oe===w.Fe.Promoting?(0,i.tZ)(Et,{provider:I.current.provider,logs:Y.slice(-3),openFile:S,viewBuildLogs:te,onViewBuildLogs:re,onViewApplicationLogs:x}):null]}):null]})]}):null},kt=(0,m.X)({errorContainer:[s.l0.p(12),s.l0.colWithGap(12)],warning:[s.l0.colWithGap(8)],warningTitle:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.fontWeight.medium],link:{color:s.TV.foregroundDefault,textDecoration:"underline",":hover":{color:s.TV.accentPrimaryStronger}},xtermContainer:[s.l0.display.flex,s.l0.pt(12),s.l0.pl(16),s.l0.overflow("hidden"),s.l0.borderRadius(8,8,0,0)],xterm:[s.l0.width("100%"),s.l0.maxWidth("100%"),s.l0.height(120)],xtermButton:s.l0.borderRadius(0,0,8,8),list:[{listStyle:"inside"}],listCta:s.l0.display.inlineFlex}),St=function(e){var t=e.title,n=e.description,r=e.logs,o=e.viewBuildLogs,u=e.onViewBuildLogs,d=e.openFile,h=(0,tt.f)(),p=(0,f.XZ)(),m=(0,a.Z)((0,Ke.Z)({openFile:d,listFiles:p.listFiles}),2),v=m[0],g=m[1],y=l.useRef(r?r.slice(-3):[]);return l.useEffect((function(){y.current.length&&y.current.forEach((function(e){null===v||void 0===v||v.write(e)}))}),[v]),(0,i.BX)(k.Tg,{elevated:!0,css:kt.errorContainer,children:[(0,i.BX)(c.G,{css:kt.warning,children:[(0,i.BX)(c.G,{css:kt.warningTitle,children:[(0,i.tZ)(b.Z,{color:s.TV.accentNegativeStronger}),(0,i.tZ)(U.xv,{multiline:!1,children:t})]}),(0,i.tZ)(U.xv,{children:n})]}),void 0===o||o?null:(0,i.BX)(c.G,{children:[(0,i.tZ)(c.G,{css:kt.xtermContainer,style:{backgroundColor:null===h||void 0===h?void 0:h.background},children:(0,i.tZ)(c.K.div,{css:kt.xterm,ref:g})}),(0,i.tZ)(x.zx,{text:"View all",iconLeft:(0,i.tZ)(pt.Z,{}),onClick:u,css:kt.xtermButton})]})]})};function Et(e){return(0,i.tZ)(St,(0,D.Z)({title:"Your app failed to promote",description:(0,i.BX)(i.HY,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,i.tZ)("br",{}),(0,i.tZ)("br",{}),"Ways to debug:",(0,i.BX)("ul",{css:kt.list,children:[(0,i.tZ)("li",{children:"make sure your repl runs in the Workspace"}),(0,i.BX)("li",{children:["view our"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:kt.link,onClick:function(){return $({context:"troubleshooting_doc"})},children:"troubleshooting tips"})]}),e.provider!==w.r4.Static&&e.onViewApplicationLogs?(0,i.BX)("li",{children:["look for errors in your application's server logs"," ",(0,i.tZ)(x.zx,{text:"Logs",size:"small",iconLeft:(0,i.tZ)(y.Z,{}),onClick:e.onViewApplicationLogs,css:s.l0.display.inlineFlex})," "]}):null,(0,i.tZ)("li",{children:"look for errors in your promote stage logs"})]})]})},e))}function Tt(e){return(0,i.tZ)(St,(0,D.Z)({title:"Your app failed to build",description:(0,i.BX)(i.HY,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,i.tZ)("br",{}),(0,i.tZ)("br",{}),"Ways to debug:",(0,i.BX)("ul",{css:kt.list,children:[(0,i.tZ)("li",{children:"make sure your repl runs in the Workspace"}),(0,i.BX)("li",{children:["view our"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:kt.link,onClick:function(){return $({context:"troubleshooting_doc"})},children:"troubleshooting tips"})]}),(0,i.tZ)("li",{children:"look for errors in your build stage logs"})]})]})},e))}var Rt=n(81962),Dt=n(89720),It=n(51467),_t=n(3861),Bt=n(50769),Gt=n(72015);function Pt(e){var t=e.secrets,n=e.otherSecrets,r=new Map,i=!0,o=!1,l=void 0;try{for(var c,s=n[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=(0,a.Z)(c.value,2),d=u[0],f=u[1];t.has(d)||r.set(d,f)}}catch(h){o=!0,l=h}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}return{missing:r}}var At=(0,m.X)({root:[s.l0.borderRadius(8),{border:"1px solid "+s.TV.outlineDimmer}],button:[s.l0.reset.button,C.gU.nofill,s.l0.rowWithGap(8),s.l0.align.center,s.l0.height(32),s.l0.px(8),{border:"0 none",borderBottomLeftRadius:0,borderBottomRightRadius:0}],buttonText:[s.l0.flex.growAndShrink(1),s.l0.rowWithGap(8),s.l0.align.center],expanded:[s.l0.px(8),s.l0.pb(8)],missingItems:[s.l0.colWithGap(8)],missingItem:[s.l0.rowWithGap(8)],missingSecret:[s.l0.rowWithGap(8),s.l0.flex.growAndShrink(1)],subtitle:[{borderTop:"1px solid "+s.TV.outlineDimmest,top:-1},s.l0.py(8),s.l0.position.relative]});function Nt(e){var t=e.secrets,n=e.otherSecrets,r=e.otherEnvName,o=e.onAddSecret,u=e.initialExpanded,d=Pt({secrets:t,otherSecrets:n}).missing,f=(0,l.useState)(u),h=f[0],p=f[1],m=0===d.size;if((0,l.useEffect)((function(){m&&p(!1)}),[m]),m)return null;var v="".concat(d.size," ").concat((0,Bt.Z)("secret",d.size)," out of sync"),g=1===d.size?"A ".concat(r," secret is missing from this environment"):"".concat(d.size," ").concat(r," secrets are missing from this environment");return(0,i.BX)(c.G,{css:At.root,children:[(0,i.BX)(c.G,{css:At.button,tag:"button",onClick:function(){return p((function(e){return!e}))},children:[(0,i.BX)(c.G,{css:At.buttonText,children:[(0,i.tZ)(b.Z,{color:s.TV.orangeDefault}),(0,i.tZ)(U.xv,{multiline:!1,children:v})]}),h?(0,i.tZ)(ht.Z,{}):(0,i.tZ)(j.Z,{})]}),h?(0,i.BX)(c.G,{css:At.expanded,children:[(0,i.tZ)(U.xv,{css:At.subtitle,color:"dimmer",children:g}),(0,i.tZ)(c.G,{css:At.missingItems,children:(0,Ye.Z)(d.entries()).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return(0,i.BX)(c.G,{css:At.missingItem,children:[(0,i.BX)(c.G,{css:At.missingSecret,children:[(0,i.tZ)(Gt.u_,{value:n}),(0,i.tZ)(Gt.BH,{value:r})]}),r?(0,i.tZ)(x.zx,{iconLeft:(0,i.tZ)(_t.Z,{}),variant:"outlined",text:"Add secret",onClick:function(){return o({key:n,value:r})}}):null]},n)}))})]}):null]})}var Ut=n(34489);function Lt(e){var t=e.fs,n=(0,l.useState)(null),r=n[0],i=n[1],o=(0,l.useState)(null),c=o[0],s=o[1];return(0,l.useEffect)((function(){return t.watchFile(".env",{onChange:function(e){var t=Ut.Z.parse(e.toString());i(new Map(Object.entries(t).map((function(e){var t=(0,a.Z)(e,2);return[t[0],t[1]]}))))},onMoveOrDelete:function(){return i(null)},onError:s})}),[t]),{devSecrets:r,error:c}}var Ot=n(92153),Xt=n(96742),Mt=n(4561),Ft=n(38029),Wt=n(20685);function Ht(){var e=(0,De.Z)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return Ht=function(){return e},e}var Vt={},zt=(0,Ie.Ps)(Ht());var jt=n(1645),qt=n(61623),$t=n(68912),Yt=n(46861),Kt=function(e){var t=e.id,n=e.value,r=e.loading,o=e.disabled,a=e.onChange,u=e.error,d=(0,Xt.Ar)(n),f=(0,l.useId)();return(0,i.BX)(c.G,{css:[s.l0.colWithGap(4)],children:[(0,i.tZ)(Wt.II,{id:t,value:d?n:"",onChange:function(e){return a(e.target.value)},css:[s.l0.color.greyStrongest],disabled:r||o,"aria-describedby":f}),u?(0,i.tZ)(c.G,{css:[s.l0.color.accentNegativeStronger],"aria-live":"polite","aria-atomic":"true",id:f,children:(0,i.tZ)("span",{children:u})}):null]})},Qt=(0,m.X)({root:[s.l0.rowWithGap(8),s.l0.align.center],iconButton:[s.l0.height("100%"),s.l0.borderRadius(8),{"& button":s.l0.height(32)}],keyInput:[s.l0.width("40%")],valueInput:[s.l0.flex.growAndShrink(1)]}),Jt=function(e){var t=e.index,n=e.name,r=e.value,o=e.disabled,a=e.updateEnvVarName,u=e.updateEnvVarValue,d=e.removeEnvVar,f=e.otherKeys,h=(0,Ft.U)(),p=(0,l.useState)(""===n||""===r),m=p[0],v=p[1],g=Boolean(n&&r),y=(0,It.Z)(g),Z=(0,Yt.Z)((function(){Z.current&&y.current&&v(!1)}),[y]);return m?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.G,{css:Qt.root,innerRef:Z,children:[(0,i.tZ)(c.G,{css:Qt.keyInput,children:(0,i.tZ)(Wt.II,{placeholder:"Name",id:"".concat(h,"-name-").concat(t),value:n,onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&g&&v(!1)},disabled:o})}),(0,i.tZ)(c.G,{css:Qt.valueInput,children:(0,i.tZ)(Wt.II,{placeholder:"Value",name:"".concat(h,"-value-").concat(t),value:r,onChange:function(e){return u(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&g&&v(!1)},disabled:o})}),o?null:(0,i.tZ)(k.Tg,{elevated:!0,css:Qt.iconButton,children:(0,i.tZ)(xe.hU,{alt:"Add",tooltipHidden:!0,onClick:function(){g?v(!1):d()},children:g?(0,i.tZ)(ot.Z,{}):(0,i.tZ)($t.Z,{})})})]}),f.includes(n)?(0,i.BX)(U.xv,{variant:"small",css:{color:s.TV.accentNegativeDefault},children:['Secret "',n,'" already exists']}):null]}):(0,i.BX)(c.G,{css:Qt.root,children:[(0,i.tZ)(Gt.u_,{value:n}),(0,i.tZ)(Gt.BH,{value:r}),(0,i.tZ)(Gt.$M,{onEdit:function(){return v(!0)},onDelete:function(){return d()}})]})},en=function(e){var t,n,r=e.id,o=e.subdomain,a=e.deploymentId,u=e.onChange,d=e.updateValidity,f=function(e){var t=(0,D.Z)({},Vt,e);return _e.a(zt,t)}({variables:{subdomain:o,deploymentId:a},skip:0===o.length}),h=f.data,m=f.loading,v=f.error,g="ReplitAppSubdomainAvailabilityResult"===(null===h||void 0===h?void 0:h.replitAppSubdomainAvailability.__typename)&&h.replitAppSubdomainAvailability.available,y="ReplitAppSubdomainAvailabilityResult"===(null===h||void 0===h?void 0:h.replitAppSubdomainAvailability.__typename)?h.replitAppSubdomainAvailability.message:null===h||void 0===h||null===(t=h.replitAppSubdomainAvailability)||void 0===t?void 0:t.errorMessage;return(0,l.useEffect)((function(){d(g)}),[g]),v?(0,i.tZ)(p.E,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:[s.l0.rowWithGap(4),s.l0.align.center],children:[(0,i.tZ)(Wt.II,{id:r,placeholder:"subdomain",value:o,onChange:function(e){return u(e.target.value)}}),(0,i.BX)(U.xv,{multiline:!1,children:["replit.com"!==(null===window||void 0===window||null===(n=window.location)||void 0===n?void 0:n.hostname)?".staging":"",".replit.app"]})]}),(0,i.BX)(c.G,{css:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.pt(4)],children:[m?(0,i.BX)(i.HY,{children:[(0,i.tZ)(we.Z,{}),(0,i.tZ)(U.xv,{multiline:!1,children:"Checking availability"})]}):null,g?(0,i.BX)(i.HY,{children:[(0,i.tZ)(ot.Z,{color:"green"}),(0,i.tZ)(U.xv,{css:[s.l0.color.greenDefault],multiline:!1,children:"Available"})]}):null,g||m?null:(0,i.BX)(i.HY,{children:[(0,i.tZ)(b.Z,{color:"red"}),(0,i.tZ)(U.xv,{css:[s.l0.color.redDefault],multiline:!1,children:y})]})]})]})},tn=function(e){var t=e.appType,n=e.onChange,r=(0,Ft.U)();return(0,i.tZ)(jt.hE,{name:"deploymentTargetSelector",value:t,onChange:n,row:!0,css:[s.l0.width("100%"),s.l0.flex.row],children:[{value:w.Vp.Server,name:"Web Server",description:"ex. an API or website"},{value:w.Vp.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map((function(e,t){return(0,i.tZ)(c.G,{css:[s.l0.flex.grow(1)],children:(0,i.tZ)(qt.u,{tooltip:e.description,children:(0,i.tZ)(jt.rK,{id:r(e.value),value:e.value,text:e.name})})},t)}))})},nn=(0,m.X)({label:[s.l0.rowWithGap(8),s.l0.align.center],labelText:{}}),rn=function(e){var t=e.id,n=e.title,r=e.information,o=e.optional,a=void 0!==o&&o,l=e.children;return(0,i.BX)(c.G,{css:s.l0.colWithGap(8),children:[(0,i.BX)(c.G,{tag:"label",htmlFor:t,css:nn.label,children:[(0,i.tZ)(U.xv,{color:"dimmer",multiline:!1,children:n}),(0,i.tZ)(qt.u,{tooltip:r,children:(0,i.tZ)(Ze.Z,{color:s.TV.foregroundDimmest})}),a?(0,i.tZ)(U.xv,{variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null]}),l]})};function on(e){return an.apply(this,arguments)}function an(){return(an=(0,u.Z)((function(e){var t,n,r,i,o,a,l,c,s,u,f,h,p,m,v,g,y;return(0,d.__generator)(this,(function(d){switch(d.label){case 0:t=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],n=!0,r=!1,i=void 0,d.label=1;case 1:d.trys.push([1,6,7,8]),o=t[Symbol.iterator](),d.label=2;case 2:return(n=(a=o.next()).done)?[3,5]:(l=a.value,[4,e.stat(l)]);case 3:return c=d.sent(),c.exists&&c.type===Mt.Tv.File?[2,"dist"]:[3,4];case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return y=d.sent(),r=!0,i=y,[3,8];case 7:try{n||null==o.return||o.return()}finally{if(r)throw i}return[7];case 8:s=["dist","build","public"],u=!0,f=!1,h=void 0,d.label=9;case 9:d.trys.push([9,14,15,16]),p=s[Symbol.iterator](),d.label=10;case 10:return(u=(m=p.next()).done)?[3,13]:(v=m.value,[4,e.stat(v)]);case 11:return g=d.sent(),g.exists&&g.type===Mt.Tv.Directory?[2,v]:[3,12];case 12:return u=!0,[3,10];case 13:return[3,16];case 14:return y=d.sent(),f=!0,h=y,[3,16];case 15:try{u||null==p.return||p.return()}finally{if(f)throw h}return[7];case 16:return[2]}}))}))).apply(this,arguments)}var ln=function(e){var t,n,r=e.deploymentId,o=e.initialSubdomain,h=e.provider,p=e.machine,m=e.fs,v=e.dotReplit,y=e.onDeploy,Z=e.onCancel,b=e.onError,C=e.initialSecretsSyncExpanded,k=(0,f.kW)(),S=(0,f.XA)(),E=function(e){var t=(0,D.Z)({},We,e);return _e.a(Ve,t)}({skip:!r,variables:{id:null!==r&&void 0!==r?r:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var t,n="HostingDeployment"===(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)?e.hostingDeployment:null;n&&(n.replitAppSubdomain&&(O(n.replitAppSubdomain),F(!0)),te(n.currentBuild.envVars.map((function(e){return{name:e.name,value:e.value}}))))}}),T=E.data,R=E.loading,I=function(e){var t=e.isNewDeployment,n=e.provider,r=e.fs,i=e.onOptions,o=e.onError,c=e.dotReplit,s=(0,a.Z)(l.useState(!0),2),f=s[0],h=s[1],p=(0,It.Z)(o),m=(0,It.Z)(i);return l.useEffect((function(){var e=!1;function i(){return i=(0,u.Z)((function(){var i,o,l,s,u,f,p,v,g;return(0,d.__generator)(this,(function(d){switch(d.label){case 0:return i=w.Vp.Server,o=null,l=null,s=null,u=null,[4,Promise.all([t?(0,be.xk)(r):Promise.resolve(null),(0,be.$f)(c)])];case 1:if(f=a.Z.apply(void 0,[d.sent(),2]),p=f[0],v=f[1],e)return[2];if(t)switch(n){case w.r4.Gce:i=v.ignorePorts?w.Vp.Worker:w.Vp.Server;break;case w.r4.CloudRun:i=w.Vp.CloudRun;break;case w.r4.Static:i=w.Vp.Static}else v.appType&&(i=v.appType);return l=v.buildCommand,i===w.Vp.Static?[3,2]:(o=v.runCommand,[3,5]);case 2:return v.publicDir?(s=v.publicDir,[3,5]):[3,3];case 3:return[4,on(r)];case 4:(g=d.sent())&&(s=g),d.label=5;case 5:return n===w.r4.Gce&&(u=v.ignorePorts),m.current({appType:i,envVars:p,buildCommand:l,runCommand:o,publicDir:s,ignorePorts:u}),h(!1),[2]}}))})),i.apply(this,arguments)}try{!function(){i.apply(this,arguments)}()}catch(o){p.current(o.message),h(!1)}return function(){e=!0}}),[n,r,c,p,m,t]),{loading:f}}({provider:h,fs:m,dotReplit:v,isNewDeployment:!r,onError:b,onOptions:function(e){e.appType&&N(e.appType),e.envVars&&te(e.envVars),e.ignorePorts&&oe(e.ignorePorts),e.buildCommand&&V(e.buildCommand),e.runCommand&&q(e.runCommand),e.publicDir&&ce(e.publicDir)}}),_=I.loading,B="HostingDeployment"===(null===T||void 0===T||null===(t=T.hostingDeployment)||void 0===t?void 0:t.__typename)?T.hostingDeployment:null,G=null===B||void 0===B?void 0:B.currentBuild,P=(0,a.Z)(l.useState(w.Vp.Server),2),A=P[0],N=P[1],U=(0,a.Z)(l.useState(o),2),L=U[0],O=U[1],X=(0,a.Z)(l.useState(!1),2),M=X[0],F=X[1],W=(0,a.Z)(l.useState(null),2),H=W[0],V=W[1],z=(0,a.Z)(l.useState(null),2),j=z[0],q=z[1],Y=(0,a.Z)(l.useState(void 0),2),K=Y[0],Q=Y[1],J=(0,a.Z)(l.useState(null!==(n=null===G||void 0===G?void 0:G.envVars.map((function(e){return{name:e.name,value:e.value}})))&&void 0!==n?n:[]),2),ee=J[0],te=J[1],ne=(0,a.Z)(l.useState(!1),2),re=ne[0],oe=ne[1],ae=(0,a.Z)(l.useState(null),2),le=ae[0],ce=ae[1],se=(0,a.Z)(l.useState(void 0),2),ue=se[0],de=se[1],fe=Lt({fs:m}).devSecrets;l.useEffect((function(){$({context:"deploy_options"})}),[]);var he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;te((function(e){return(0,Ot.ZP)(e,(function(e){e.push({name:null!==t&&void 0!==t?t:"",value:null!==n&&void 0!==n?n:""})}))}))},pe=function(){var e=(0,u.Z)((function(){var e,t;return(0,d.__generator)(this,(function(n){switch(n.label){case 0:if(!(e=M&&L.length?L:void 0))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,S({envVars:ee.filter((function(e){return(0,Xt.GV)(e)})),subdomain:e,machineConfigurationId:(null===p||void 0===p?void 0:p.configurationId)||void 0,maxMachineInstances:(null===p||void 0===p?void 0:p.maxInstances)||void 0,config:{buildCommand:H,runCommand:j,appType:A,ignorePorts:re,publicDir:le}})];case 2:return n.sent(),y(),[3,4];case 3:return t=n.sent(),(0,Rt.Z)(t,Dt.ZG)?(Q("Run command cannot be empty."),[2]):(0,Rt.Z)(t,Dt.SF)?(de("Public directory cannot be empty."),[2]):(b(t.message),[3,4]);case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),me=R||_||k===ie.z.Preparing,ve=me||!M,ge=ee.map((function(e){return e.name})),ye=A!==w.Vp.Static,Ze=h===w.r4.Gce,xe=A===w.Vp.Static;return(0,i.BX)(c.G,{css:[s.l0.colWithGap(16)],children:[(null===B||void 0===B?void 0:B.replitAppSubdomain)?null:(0,i.tZ)(rn,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,i.tZ)(en,{id:"primaryDomain",subdomain:L,deploymentId:r||void 0,onChange:O,updateValidity:F})}),xe?(0,i.tZ)(rn,{id:"publicDir",title:"Public directory",information:"The public directory is the folder where the browser should start when serving your static site",children:(0,i.tZ)(Kt,{id:"publicDir",value:le,onChange:ce,loading:_,disabled:me,error:ue})}):null,(0,i.tZ)(rn,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,i.tZ)(Kt,{id:"buildCommand",value:H,onChange:V,loading:_,disabled:me})}),ye?(0,i.tZ)(rn,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,i.tZ)(Kt,{id:"runCommand",value:j,onChange:q,loading:_,disabled:me,error:K})}):null,(0,i.tZ)(rn,{id:"envVars",title:"Deployment secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",children:(0,i.BX)(c.G,{css:[s.l0.colWithGap(12)],children:[ee.length>0?ee.map((function(e,t){var n=e.name,r=e.value;return(0,i.tZ)(Jt,{index:t,name:n,value:r,updateEnvVarName:function(e){return function(e,t){te((function(n){return(0,Ot.ZP)(n,(function(n){n[e].name=t}))}))}(t,e)},updateEnvVarValue:function(e){return function(e,t){te((function(n){return(0,Ot.ZP)(n,(function(n){n[e].value=t}))}))}(t,e)},removeEnvVar:function(){return function(e){te((function(t){return(0,Ot.ZP)(t,(function(t){t.splice(e,1)}))}))}(t)},disabled:me,otherKeys:ge.filter((function(e,n){return n!==t}))},t)})):null,fe?(0,i.tZ)(Nt,{secrets:new Map(ee.map((function(e){return[e.name,e.value]}))),otherSecrets:fe,otherEnvName:"workspace",onAddSecret:function(e){return he({name:e.key,value:e.value})},initialExpanded:C}):null,(0,i.tZ)(x.zx,{onClick:function(){return he()},text:"Add deployment secret",iconLeft:(0,i.tZ)(_t.Z,{}),disabled:R})]})}),Ze?(0,i.tZ)(rn,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,i.tZ)(tn,{appType:A,onChange:function(e){N(e),oe((e===w.Vp.Server||e===w.Vp.Worker)&&e===w.Vp.Worker)}})}):null,(0,i.BX)(c.G,{css:[s.l0.rowWithGap(8),s.l0.pt(12)],children:[G?(0,i.tZ)(x.zx,{text:"Cancel",onClick:Z}):null,(0,i.tZ)(c.G,{css:s.l0.flex.grow(1),children:(0,i.tZ)(x.zx,{colorway:"primary",onClick:pe,text:(k===ie.z.Preparing?"Preparing":_&&"Fetching options")||"Deploy",iconLeft:_?(0,i.tZ)(we.Z,{}):(0,i.tZ)(g.Z,{}),disabled:ve})})]})]})};function cn(e){var t,n,r=e.deploymentId,i=function(e){var t=(0,a.Z)(l.useState(null),2),n=t[0],r=t[1];return l.useEffect((function(){var t=!1;function n(){return(n=(0,u.Z)((function(){var n;return(0,d.__generator)(this,(function(i){switch(i.label){case 0:return[4,(0,be.$f)(e)];case 1:return n=i.sent(),t||r(n),[2]}}))}))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){t=!0}}),[e]),n}(e.dotReplit),o=function(e){var t=(0,D.Z)({},je,e);return _e.a(qe,t)}({variables:{id:r},ssr:!1,fetchPolicy:"cache-and-network"}),c=o.data,s=o.loading,f=o.error,h="HostingDeployment"===(null===c||void 0===c||null===(t=c.hostingDeployment)||void 0===t?void 0:t.__typename)?c.hostingDeployment:null;return"NotFoundError"===(null===c||void 0===c||null===(n=c.hostingDeployment)||void 0===n?void 0:n.__typename)?{deployment:null,config:null,error:"Deployment not found",loading:!1}:null===i||!h&&s?{data:null,erorr:null,loading:!0}:f||!h?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:h,config:i,error:null,loading:!1}}var sn,un=(0,m.X)({root:{flexDirection:"row",gap:8,flexWrap:"wrap"},loading:Zt,deployOptions:[s.l0.p(16),s.l0.pt(12),s.l0.borderRadius(8),s.l0.border({color:s.TV.outlineDimmest})]}),dn=function(e){var t,n=e.deploymentId,r=e.dotReplit,o=e.fs,a=e.onError,s=e.expanded,h=e.setExpanded,m=(0,f.XA)(),v=cn({deploymentId:n,dotReplit:r}),y=Lt({fs:o}).devSecrets,Z=null===(t=v.deployment)||void 0===t?void 0:t.currentBuild.envVars,w=(0,l.useMemo)((function(){if(!y)return 0;var e=Pt({secrets:new Map(null===Z||void 0===Z?void 0:Z.map((function(e){return[e.name,e.value]}))),otherSecrets:y}).missing;return e.size}),[y,Z]),C=(0,f.kW)();if(C===ie.z.Preparing||C===ie.z.Deploying)return(0,i.tZ)(c.G,{css:un.loading,children:(0,i.tZ)(wt,{})});if(v.error)return(0,i.tZ)(Ee,{text:v.error});if(s){var k,S=null===(k=v.deployment)||void 0===k?void 0:k.currentBuild;return S?(0,i.tZ)(c.G,{css:un.deployOptions,children:(0,i.tZ)(ln,{initialSubdomain:"",provider:S.provider,deploymentId:n,fs:o,dotReplit:r,onCancel:function(){return h(!1)},onDeploy:function(){return h(!1)},onError:a,initialSecretsSyncExpanded:w>0})}):(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(b.Z,{}),text:"Provider not found"})}var E=v.loading||!(C===ie.z.Ready||C===ie.z.Suspended);return(0,i.BX)(c.G,{css:un.root,children:[(0,i.tZ)(x.zx,{disabled:E,onClick:(0,u.Z)((function(){var e;return(0,d.__generator)(this,(function(t){switch(t.label){case 0:return v.loading?[2]:[4,m({subdomain:null!==(e=v.deployment.replitAppSubdomain)&&void 0!==e?e:void 0})];case 1:return t.sent(),[2]}}))})),text:C===ie.z.Suspended?"Resume":"Redeploy",iconLeft:(0,i.tZ)(g.Z,{})}),(0,i.tZ)(x.zx,{disabled:E,text:w>0?"".concat(w," ").concat((0,Bt.Z)("secrets",w)," out of sync"):"Edit env",iconLeft:w>0?(0,i.tZ)(b.Z,{}):(0,i.tZ)($e.Z,{}),onClick:function(){return h(!0)}})]})},fn=n(60538),hn=n(39059),pn=n(60717),mn=function(e){var t=e.color;return(0,i.tZ)(c.G,{css:[s.l0.align.center,s.l0.rowWithGap(8),{textTransform:"capitalize"}],children:(0,i.tZ)(c.G,{tag:"span",css:[s.l0.width("8px"),s.l0.height("8px"),s.l0.borderRadius("full"),{backgroundColor:t,boxShadow:"0 0 12px ".concat(t)}]})})};!function(e){e.Current="current"}(sn||(sn={}));var vn,gn=(0,N.Z)({},sn.Current,{icon:(0,i.tZ)(mn,{color:s.TV.blueStronger}),text:"Current deployment"}),yn=c.K.div,Zn=function(e){var t=e.activityLogItem.type,n=(0,a.Z)(l.useState(!1),2),r=n[0],o=n[1],u=(0,a.Z)(l.useState(!1),2),d=u[0],f=u[1],h=l.useRef(!1);l.useEffect((function(){h.current=!0;var e=setTimeout((function(){f(r)}),200);return function(){clearTimeout(e)}}),[r]);var p=t in gn&&gn[t];if(!p)return null;var m=p.icon,v=p.text;return(0,i.tZ)(c.G,{css:[s.l0.p(8)],onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(0,i.BX)(pn.Z,{isOpen:d,onClickOutside:function(){return f(!1)},padding:8,children:[(0,i.tZ)(yn,{css:s.l0.cursor.pointer,children:m}),(0,i.tZ)(c.G,{css:[s.l0.maxWidth(240)],children:(0,i.tZ)(U.xv,{children:v})})]})})},bn=n(11086),wn=function(e){var t=e.build,n=t.id.slice(0,8),r=(0,a.Z)(l.useState(!1),2),o=r[0],u=r[1],d=(0,a.Z)(l.useState(!1),2),f=d[0],h=d[1],p=l.useRef(!1);return l.useEffect((function(){p.current=!0;var e=setTimeout((function(){h(o)}),200);return function(){clearTimeout(e)}}),[o]),(0,i.tZ)("span",{onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},children:(0,i.BX)(pn.Z,{isOpen:f,onClickOutside:function(){return h(!1)},padding:8,children:[(0,i.tZ)("span",{css:[C.gU.listItem,s.l0.display.inlineBlock,s.l0.px(2),s.l0.py(0),s.l0.borderRadius(4)],children:n}),(0,i.tZ)(c.G,{css:[s.l0.maxWidth(260)],children:(0,i.tZ)(U.xv,{variant:"small",children:t.id})})]})})},xn=(vn={},(0,N.Z)(vn,bn.dD.Deploy,(function(e){return(0,i.BX)(i.HY,{children:["deployed ",(0,i.tZ)(wn,{build:e})]})})),(0,N.Z)(vn,bn.dD.Rollback,(function(e){return(0,i.BX)(i.HY,{children:["rolled back ",(0,i.tZ)(wn,{build:e})]})})),(0,N.Z)(vn,bn.dD.Fail,(function(e){return(0,i.BX)(i.HY,{children:["failed to deploy ",(0,i.tZ)(wn,{build:e})]})})),vn),Cn=function(e){var t=e.activityLogItem,n=t.type,r=t.build,o=t.user.displayName,a=n in xn&&xn[n](r);return a?(0,i.BX)(U.xv,{multiline:!1,children:[(0,i.tZ)("span",{css:s.l0.fontWeight.medium,children:o+" "}),a]}):null},kn=(0,m.X)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),Sn=(0,m.X)({container:{width:7,position:"relative"},linePast:[kn.line,{backgroundColor:s.TV.outlineDimmest,top:15,bottom:-10}],linePresent:[kn.line,{backgroundImage:"linear-gradient(to top, ".concat(s.TV.outlineDimmest,", ").concat(s.TV.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[kn.line,{borderRight:"1px dashed "+s.TV.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[kn.line,{backgroundColor:s.TV.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[kn.line,{borderRight:"1px dashed "+s.TV.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[kn.circlePast,s.l0.backgroundColor.accentPositiveDefault],circlePastRed:[kn.circlePast,s.l0.backgroundColor.accentNegativeDefault],circlePastGray:[kn.circlePast,s.l0.backgroundColor.outlineDimmer],circlePresent:[s.l0.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[s.l0.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function En(e){var t,n;switch(e.type){case"pastSuccess":t=Sn.linePast,n=(0,i.tZ)(c.G,{css:Sn.circlePastGreen});break;case"pastFail":t=Sn.linePast,n=(0,i.tZ)(c.G,{css:Sn.circlePastRed});break;case"pastNeutral":t=Sn.linePast,n=(0,i.tZ)(c.G,{css:Sn.circlePastGray});break;case"present":t=Sn.linePresent,n=(0,i.tZ)(c.G,{css:Sn.circlePresent});break;case"future":t=Sn.lineFuture,n=(0,i.tZ)("svg",{viewBox:"0 0 9 9",css:Sn.circleFuture,children:(0,i.tZ)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:s.TV.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":t=Sn.lineFutureFailClosed,n=(0,i.tZ)(c.G,{css:Sn.circleFutureFailClosed});break;case"futureFailOpen":t=Sn.lineFutureFailOpen,n=null}return(0,i.BX)(c.G,{css:Sn.container,children:[(0,i.tZ)(c.G,{css:t,"data-timeline-line":!0}),n]})}function Tn(e){var t=e.onViewBuildLogs,n=e.type,r=void 0===n?"default":n,o=(0,h.Z)();return(0,i.tZ)(Ln,{replId:o,onSelect:t,type:r})}var Rn=mt.filter((function(e){return"title"in e})),Dn=(0,m.X)({root:[s.l0.flex.row,s.l0.px(8),s.l0.pb(8),{zIndex:0}]});function In(e){var t=e.activeStage,n=e.erroredStage;return(0,i.tZ)(c.G,{css:Dn.root,children:Rn.map((function(e){return(0,i.tZ)(ut,{stage:e.id,text:e.title,totalStagesWithTitle:Rn.length,activeStage:t,erroredStage:n},e.id)}))})}var _n=(0,m.X)({root:[s.l0.colWithGap(8),s.l0.height("100%")],header:[s.l0.pt(8),s.l0.px(8),s.l0.rowWithGap(8),s.l0.align.center],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+s.TV.outlineDimmest}],name:[s.l0.color.foregroundDefault,s.l0.fontWeight.medium],content:[s.l0.p(8),s.l0.flex.growAndShrink(1),s.l0.position.relative],loading:[s.l0.coverContainer,s.l0.center],error:[s.l0.m(8),s.l0.borderRadius(8),s.l0.overflow("hidden")],xterm:[s.l0.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[s.l0.coverContainer,s.l0.p(8)]}]});function Bn(e){var t=e.build,n=e.onBack,r=e.fs,o=e.openFile,u=e.onViewAppLogs,d=(0,a.Z)((0,Ke.Z)({openFile:o,listFiles:r.listFiles}),2),f=d[0],h=d[1],p=function(e){var t=(0,D.Z)({},Ne,e);return _e.a(Xe,t)}({variables:{input:{buildId:t.id}},ssr:!1,fetchPolicy:"cache-and-network"}),m=p.data,v=p.loading,g=(0,l.useMemo)((function(){var e;if(!m)return null;var t=[],n="HostingBuildDeployActionHistoryResults"===m.hostingBuildDeployActionHistory.__typename?m.hostingBuildDeployActionHistory.results:null;if(n){var r=void 0,i=void 0,o=void 0,a=!0,l=!1,c=void 0;try{for(var s,u=function(){var e=s.value;if("HostingBuildDeployLogAction"===e.__typename)return t.push(e.log),"continue";mt.some((function(t){return t.statusType===e.status}))&&(r=e.status),e.status===w.Fe.Failed&&(i=r)},d=n[Symbol.iterator]();!(a=(s=d.next()).done);a=!0)u()}catch(h){l=!0,c=h}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}var f=r?null===(e=gt(r))||void 0===e?void 0:e.id:void 0;return i&&(o=f),{logs:t,activeStage:f,erroredStage:o,erroredStatus:i}}}),[m]);return(0,l.useEffect)((function(){if(f&&g){var e=!0,t=!1,n=void 0;try{for(var r,i=g.logs[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;f.write(o)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}),[f,g]),(0,i.BX)(c.G,{css:_n.root,children:[(0,i.BX)(c.G,{css:_n.header,children:[(0,i.tZ)(xe.hU,{alt:"Back to timeline",onClick:function(){return n()},children:(0,i.tZ)(Ce.Z,{})}),(0,i.tZ)(c.G,{children:(0,i.BX)(U.xv,{color:"dimmer",multiline:!1,children:[(0,i.tZ)("span",{css:_n.name,children:t.user.displayName+" "}),(0,ce.BX)(t.status)]})}),(0,i.tZ)(wn,{build:t})]}),(null===g||void 0===g?void 0:g.erroredStatus)?(0,i.BX)(c.G,{css:_n.error,children:[(null===g||void 0===g?void 0:g.erroredStatus)===w.Fe.Building?(0,i.tZ)(Tt,{provider:t.provider,openFile:o}):null,(null===g||void 0===g?void 0:g.erroredStatus)===w.Fe.Promoting?(0,i.tZ)(Et,{provider:t.provider,openFile:o,onViewApplicationLogs:u}):null]}):null,(0,i.tZ)(In,{activeStage:null===g||void 0===g?void 0:g.activeStage,erroredStage:null===g||void 0===g?void 0:g.erroredStage}),(0,i.tZ)(c.G,{css:_n.divider}),(0,i.BX)(k.Tg,{css:_n.content,children:[(0,i.tZ)(c.G,{css:_n.xterm,innerRef:h}),v||!f?(0,i.tZ)(c.G,{css:_n.loading,children:(0,i.tZ)(we.Z,{color:s.TV.white,size:24})}):null]})]})}var Gn=(0,m.X)({item:s.l0.rowWithGap(12),past:{":last-of-type":{"[data-timeline-line]":{display:"none"}}},future:{":last-of-type":{"[data-timeline-line]":{bottom:-19}}},animate:{animation:(0,B.Gs)(36.4)+" 300ms ease-out forwards"}}),Pn=(0,m.X)({root:[s.l0.colWithGap(8)],empty:[s.l0.pb(8),s.l0.center,s.l0.align.stretch],items:[],loadMore:[s.l0.center],item:[s.l0.rowWithGap(8),s.l0.pl(8),s.l0.pr(4),s.l0.pb(12),s.l0.align.center,s.l0.flex.growAndShrink(1),s.l0.color.foregroundDimmest,s.l0.hover(s.l0.color.foregroundDefault)],itemMainText:[s.l0.flex.growAndShrink(1),(0,N.Z)({},s.nC.min(640),s.l0.flex.growAndShrink(0))],itemLine:[s.l0.display.none,(0,N.Z)({},s.nC.min(640),[s.l0.display.flex,s.l0.flex.growAndShrink(1),s.l0.border({color:s.TV.outlineDimmest,direction:"top"})])],itemRight:[s.l0.rowWithGap(6),s.l0.justify.end,s.l0.textAlign.right],itemContent:[s.l0.rowWithGap(8),s.l0.flex.growAndShrink(1),s.l0.align.center],itemPast:[Gn.item,Gn.past],itemPastAnimate:[Gn.item,Gn.past,Gn.animate],itemFuture:[Gn.item,Gn.future],itemFutureAnimate:[Gn.item,Gn.future,Gn.animate]}),An=(0,m.X)({button:[s.l0.reset.button,s.l0.cursor.pointer,s.l0.borderRadius(8),s.l0.display.flex,s.l0.rowWithGap(6),s.l0.align.center,s.l0.px(8),s.l0.color.foregroundDimmer,s.l0.height(32),s.l0.hover(s.l0.color.foregroundDefault)]}),Nn=(0,m.X)({button:An.button,buttonHighlight:[An.button,s.l0.color.accentNegativeStrongest,s.l0.backgroundColor.accentNegativeDimmest,s.l0.border({color:s.TV.accentNegativeDimmer})],buttonOpen:s.l0.flex.growAndShrink(1),buttonClosed:[s.l0.flex.growAndShrink(1),s.l0.pb(12)],buttonContent:[s.l0.flex.growAndShrink(1),s.l0.rowWithGap(8),s.l0.align.center]});function Un(e){var t=e.items,n=e.onClick,r=(0,l.useState)(!1),o=r[0],a=r[1],u=(0,f.pn)(),d=l.useRef(void 0);l.useEffect((function(){void 0!==(null===u||void 0===u?void 0:u.status)&&(d.current=null===u||void 0===u?void 0:u.status)}),[u,null===u||void 0===u?void 0:u.status]);var h=!u&&d.current!==w.Fe.Building&&d.current!==w.Fe.Success,p=h?s.TV.accentNegativeStronger:s.TV.foregroundDimmer;return 0===t.length?null:(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:s.l0.rowWithGap(12),children:[(0,i.tZ)(En,{type:o?"futureFailOpen":"futureFailClosed"}),(0,i.tZ)(c.G,{css:o?Nn.buttonOpen:Nn.buttonClosed,children:(0,i.BX)("button",{onClick:function(){return a(!o)},css:h?Nn.buttonHighlight:Nn.button,children:[(0,i.BX)(c.G,{css:Nn.buttonContent,children:[h?(0,i.tZ)(b.Z,{color:s.TV.accentNegativeStronger}):null,(0,i.BX)(U.xv,{children:[t.length," ",(0,Bt.Z)("build",t.length)," failed"]}),o?null:(0,i.BX)(U.xv,{children:[t.length>1?"Most recent: ":null,(0,ft.Z)(new Date(t[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),o?(0,i.tZ)(ht.Z,{color:p}):(0,i.tZ)(j.Z,{color:p})]})})]}),o?(0,i.tZ)(c.G,{css:s.l0.pt(8),children:t.map((function(e){return(0,i.tZ)(On,{item:e,onClick:function(){return n(e.build)},type:"future"},e.id)}))}):null]})}function Ln(e){var t,n=e.replId,r=e.onSelect,o=e.type,a=void 0===o?"default":o,s=function(e){var t=(0,D.Z)({},Ne,e);return _e.a(Oe,t)}({variables:{replId:n,count:20},fetchPolicy:"cache-and-network",ssr:!1}),h=s.data,m=s.previousData,v=s.loading,g=s.error,y=s.fetchMore,Z=null!==h&&void 0!==h?h:m,x="Repl"===(null===Z||void 0===Z?void 0:Z.repl.__typename)?Z.repl:null,C="HostingDeployment"===(null===x||void 0===x||null===(t=x.hostingDeployment)||void 0===t?void 0:t.__typename)?x.hostingDeployment:null,k=function(){var e=(0,u.Z)((function(){var e;return(0,d.__generator)(this,(function(t){switch(t.label){case 0:return(e=null===C||void 0===C?void 0:C.activityLogs.pageInfo.nextCursor)?[4,y({variables:{after:e,count:20}})]:[2];case 1:return t.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),S=(0,fn.Z)({onLoadMore:k,rootMargin:"0px 0px 300px 0px"}).targetRef,E=l.useRef(""),T=(0,f.$y)(),R=(0,f.pn)(),I=l.useRef(void 0);if(l.useEffect((function(){void 0!==(null===R||void 0===R?void 0:R.id)&&(I.current=null===R||void 0===R?void 0:R.id)}),[null===R||void 0===R?void 0:R.id]),v&&!C)return"failureQueue"===a?null:(0,i.tZ)(Mn,{});if(!(null===C||void 0===C?void 0:C.activityLogs))return null;var _=C.activityLogs,G=_.items,P=_.pageInfo;if(0===G.length)return null;if(g)return(0,i.tZ)(c.G,{css:Pn.empty,children:(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(b.Z,{}),text:"Something went wrong"})});G.length&&(G[0].build.id===(null===T||void 0===T?void 0:T.id)&&G[1]?E.current=G[1].build.id:E.current=G[0].build.id);var A=function(e,t){var n=[],r=(null===t||void 0===t?void 0:t.timeCreated)?new Date(t.timeCreated):null,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(s.type!==w.dD.Fail)break;if(r&&r.getTime()>new Date(s.build.timeCreated).getTime()||(null===t||void 0===t?void 0:t.id)===s.build.id)break;n.push(s)}}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n}(G,T);return"failureQueue"===a?(0,i.tZ)(B.un,{render:A.length>0,initialHeight:44,children:(0,i.tZ)(Un,{items:A,onClick:r})}):(0,i.BX)(c.G,{css:Pn.root,"data-history-timeline-items":G.length-A.length,children:[(0,i.tZ)(c.G,{css:Pn.items,children:G.map((function(e,t){return e.build.id===(null===T||void 0===T?void 0:T.id)||t<A.length?null:(0,i.tZ)(On,{item:e,onClick:function(){return r(e.build)}},e.id)}))}),P.nextCursor?(0,i.tZ)(c.G,{css:Pn.loadMore,children:(0,i.tZ)(xe.hU,{disabled:v,tooltipHidden:!0,alt:"Show more",onClick:k,ref:S,children:v?(0,i.tZ)(we.Z,{}):(0,i.tZ)(hn.Z,{})})}):null]})}function On(e){var t=e.item,n=e.onClick,r=e.timeline,o=void 0===r||r,a=e.type,l=void 0===a?"past":a,s=(0,i.BX)(c.G,{css:Pn.item,children:[(0,i.tZ)(c.G,{css:Pn.itemMainText,children:(0,i.tZ)(Cn,{activityLogItem:t})}),(0,i.tZ)(c.G,{css:Pn.itemLine}),(0,i.BX)(c.G,{css:Pn.itemRight,children:[(0,i.tZ)(Zn,{activityLogItem:t}),(0,i.tZ)(U.xv,{multiline:!1,children:(0,ft.Z)(new Date(t.timeCreated),Date.now(),{addSuffix:!0})}),(0,i.tZ)(xe.hU,{alt:"View deploy logs",onClick:n,children:(0,i.tZ)(y.Z,{})})]})]});return o?(0,i.BX)(c.G,{css:"past"===l?Pn.itemPast:Pn.itemFuture,children:[(0,i.tZ)(En,{type:t.type===w.dD.Fail?"pastFail":"pastSuccess"}),s]}):s}var Xn=(0,m.X)({loading:[s.l0.rowWithGap(12),{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[at.p.backgroundPulse(),s.l0.height(20.4),s.l0.mt(2),s.l0.ml(4),s.l0.flex.growAndShrink(1),s.l0.borderRadius(6),{opacity:.5,marginBottom:14}]});function Mn(){return(0,i.tZ)(c.G,{children:Array(3).fill(0).map((function(e,t){return(0,i.BX)(c.G,{css:Xn.loading,children:[(0,i.tZ)(En,{type:"pastNeutral"}),(0,i.tZ)(k.Tg,{elevated:!0,css:Xn.loadingItem})]},t)}))})}var Fn,Wn=n(47542),Hn=n(13244),Vn=n(46266),zn=n(90234),jn=[1,2,3,4,5,6,7,8,9,10],qn=jn.length-1,$n=1/(2*qn),Yn=(0,zn.cn)(2),Kn=(0,zn.cn)((function(e){return jn[e(Yn)]})),Qn=(0,zn.cn)((function(e){return(e(Hn.Qc)*e(Kn)).toFixed(6)})),Jn=(0,zn.cn)((function(e){return e(Hn.Ig)*e(Kn)})),er=(0,zn.cn)(0),tr=(0,zn.cn)((function(e){var t=0/qn,n=jn.length-1/qn,r=0,i=0;return e(er)<t&&(r=(t-e(er))/$n,i=t-$n),e(er)>n&&(r=(e(er)-n)/$n,i=n+$n),{overage:r,point:i}}));!function(e){e.None="0ms",e.Normal="120ms"}(Fn||(Fn={}));var nr=["ArrowLeft","ArrowRight","Home","End"],rr=(0,ne.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),ir=(0,ne.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:s.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(s.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),or=n(71999),ar="min(var(--point), var(--position))",lr="max(var(--point), var(--position))";function cr(e,t){var n=(0,or.Dv)(tr),r=n.overage,o=n.point,a=(0,or.Dv)(er),c=(0,l.useRef)(null);return(0,l.useEffect)((function(){(0,Vn.A)(c,"--opacity",String(r))}),[r]),(0,l.useEffect)((function(){(0,Vn.A)(c,"--point",String(100*o)+"%")}),[o]),(0,l.useEffect)((function(){(0,Vn.A)(c,"--position",String(100*a)+"%")}),[a]),(0,l.useMemo)((function(){return(0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,i.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:C.vb.interactiveBorder,borderRadius:"2px"},children:(0,i.tZ)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(ar,", \n                  ").concat(C.vb.interactiveBorderHover," ").concat(ar,", \n                  ").concat(C.vb.interactiveBorderHover," ").concat(lr,", \n                  transparent ").concat(lr," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})}),[t])}var sr=(0,l.forwardRef)(cr);function ur(e,t){var n=(0,a.Z)((0,or.KO)(Kn),1)[0],r=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,(function(){return r.current})),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(jn[0])),r.current.setAttribute("aria-valuemax",String(jn[jn.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,l.useMemo)((function(){return(0,i.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:[ir,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})}),[])}var dr=(0,l.forwardRef)(ur),fr=n(14650),hr=qn;function pr(e){var t=e.setAttrs,n=(0,a.Z)((0,or.KO)(Yn),2),r=n[0],o=n[1],u=(0,l.useState)(!1),d=u[0],f=u[1],h=(0,l.useRef)(null),p=(0,l.useRef)(null),m=(0,l.useRef)(null),v=(0,l.useCallback)((function(e){t.setTransitionTime(e)}),[t]),g=(0,l.useCallback)((function(e){t.setProgress(e)}),[t]);void 0===r||d||(g(r/hr),v(Fn.Normal));return(0,l.useEffect)((function(){if(void 0!==r&&p.current&&m.current&&!d){var e=p.current,t=m.current,n=function(n){if(0===n.button){f(!0),t.focus();var r=e.getBoundingClientRect(),i=t.getBoundingClientRect(),a=r.width,l=i.width,c=n.target===e?l/2:n.clientX-i.left,s=null,u=function(e){var t=e-r.left-c,n=Math.max(0,Math.min(1,t/(a-l)));n!==s&&(s=n,g(n),o(Math.round(n*hr)))};u(n.clientX);var d=function(e){v(Fn.None),u(e.clientX),e.preventDefault(),e.stopPropagation()},h=function(){window.removeEventListener("pointermove",d),window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h),v(Fn.Normal),f(!1)};window.addEventListener("pointermove",d),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}}),[r,d,o,g,v]),(0,l.useEffect)((function(){if(void 0!==r&&m.current&&!d){var e=m.current,t=function(e){if(void 0!==r&&nr.includes(e.key)){var t=r,n=hr,i=Math.max(0,t-1),a=Math.min(n,t+1),l=null;switch(e.key){case"ArrowLeft":l=i;break;case"ArrowRight":l=a;break;case"Home":l=0;break;case"End":l=n}null!==l&&(o(l),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}}),[d,r,o]),(0,l.useMemo)((function(){return(0,i.tZ)(c.G,{css:s.l0.colWithGap(8),children:(0,i.BX)(c.G,{innerRef:h,css:rr,children:[(0,i.tZ)(sr,{ref:p}),(0,i.tZ)(dr,{ref:m})]})})}),[])}var mr=(0,m.X)({costInfo:[s.l0.rowWithGap(4),s.l0.flex.shrink(1),s.l0.align.center]});function vr(e){var t=e.setAttrs,n=(0,a.Z)((0,or.KO)(Kn),1)[0],r=(0,a.Z)((0,or.KO)(Qn),1)[0],o=(0,a.Z)((0,or.KO)(Jn),1)[0];return(0,i.BX)(c.G,{css:fr.B.container,children:[(0,i.BX)(c.G,{css:fr.B.label,children:[(0,i.BX)(U.xv,{css:fr.B.resource,multiline:!1,children:[n," ",(0,Bt.Z)("machine",n)]}),(0,i.BX)(c.G,{css:mr.costInfo,children:[(0,i.BX)(c.G,{css:fr.B.cost,children:[(0,i.BX)(U.xv,{multiline:!1,children:[o," compute units"]}),(0,i.tZ)(U.xv,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,i.tZ)(qt.u,{tooltip:(0,i.BX)(c.G,{css:fr.B.cost,children:[(0,i.BX)(U.xv,{multiline:!1,children:["$",r]}),(0,i.tZ)(U.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,i.tZ)(Ze.Z,{color:s.TV.foregroundDimmest})})]})]}),(0,i.tZ)(pr,{setAttrs:t})]})}var gr=n(97356),yr=[s.l0.colWithGap(12),s.l0.borderRadius(12),s.l0.p(16)],Zr=(0,m.X)({container:[yr],disabled:[yr,{opacity:.5,pointerEvents:"none"}],text:[s.l0.colWithGap(4)],title:[s.l0.rowWithGap(4),s.l0.align.center],cost:[s.l0.flex.row,s.l0.align.baseline,s.l0.fontWeight.medium,{gap:3}],builder:[s.l0.colWithGap(8),s.l0.position.relative,{"--max-instances-transition-time":Fn.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function br(e){var t=e.maxMachineInstances,n=e.disabled,r=e.onError,o=(0,l.useRef)(null),a=(0,or.b9)(er),s=(0,or.b9)(Yn);l.useEffect((function(){if(t){var e=jn.indexOf(t);if(-1===e)return void r("An error occurred while setting selected max machine instances.");s(e)}}),[t,s,r]);var u={setTransitionTime:function(e){(0,Vn.A)(o,"--max-instances-transition-time",e)},setProgress:function(e){(0,Vn.A)(o,"--max-instances-progress",e.toString()),a(e)}};return(0,i.BX)(k.Tg,{elevated:!0,css:n?Zr.disabled:Zr.container,children:[(0,i.BX)(c.G,{css:Zr.text,children:[(0,i.BX)(c.G,{css:Zr.title,children:[(0,i.tZ)(gr.Z,{}),(0,i.tZ)(U.xv,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,i.tZ)(U.xv,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,i.tZ)(c.G,{css:Zr.builder,innerRef:o,children:(0,i.tZ)(vr,{setAttrs:u})})]})}var wr=n(22295);function xr(){var e=(0,De.Z)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return xr=function(){return e},e}var Cr={},kr=(0,Ie.Ps)(xr(),wr.bN);var Sr=n(18314),Er=n(30504),Tr=function(e){var t=(0,f.kW)(),n=(0,f.hn)(),r=(0,f.$y)(),o=void 0!==(0,f.pn)(),a=!o&&!("string"===typeof n),h=(0,or.Dv)(Hn.aH),p=(0,or.Dv)(Hn.sA),m=(0,or.Dv)(Kn),v=function(e){var t=(0,D.Z)({},Cr,e);return _e.a(kr,t)}({onCompleted:function(t){"HostingMachineConfigurationsResults"!==t.hostingMachineConfigurations.__typename&&e.onError("Something went wrong")},onError:function(t){return e.onError(t.message)}}),g=v.data,y=v.loading,Z="HostingMachineConfigurationsResults"===(null===g||void 0===g?void 0:g.hostingMachineConfigurations.__typename)?g.hostingMachineConfigurations.results:null;l.useEffect((function(){$({context:S.k.AutoscaleMachineConfiguration})}),[]);var b=function(){var t=(0,u.Z)((function(){var t,n,r;return(0,d.__generator)(this,(function(i){return(t=null===Z||void 0===Z?void 0:Z.find((function(e){var t=e.vcpu,n=e.memory;return h.toString()===t&&p.toString()===n})))?(n=t.id,r=t.label,e.onConfirm({configurationId:n,configurationLabel:r,maxInstances:m}),[2]):(e.onError("An error occurred trying to validate selected machine configuration"),[2])}))}));return function(){return t.apply(this,arguments)}}(),w=y||e.fetching||o||t!==ie.z.Ready;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(Re,{onBack:e.onBack})}),(0,i.tZ)(A,{maxWidth:!0,children:(0,i.BX)(c.G,{css:s.l0.colWithGap(16),children:[(0,i.BX)(c.G,{css:s.l0.colWithGap(4),children:[(0,i.tZ)(U.xv,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,i.tZ)(U.xv,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,i.BX)(c.G,{css:s.l0.colWithGap(16),children:[(0,i.tZ)(Wn.Z,{machineConfiguration:null===r||void 0===r?void 0:r.machineConfiguration,disabled:w}),(0,i.tZ)(br,{maxMachineInstances:null===r||void 0===r?void 0:r.maxMachineInstances,disabled:w,onError:e.onError})]}),(0,i.BX)(c.G,{css:[s.l0.colWithGap(8),s.l0.pt(8)],children:[(0,i.tZ)(x.zx,{colorway:"primary",text:a?"Approve and configure build settings":"Approve and update",iconRight:(0,i.tZ)(Sr.Z,{}),onClick:b,loading:y}),(0,i.BX)(U.xv,{color:"dimmest",children:["Your deployed app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,i.tZ)("a",{href:Er.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})},Rr=n(51801),Dr=n(15597),Ir=n(2373),_r=n(21651),Br=n(74970),Gr=n(78945),Pr=n(39199),Ar=n(2580),Nr=(0,m.X)({container:s.l0.colWithGap(24),pauseAndResumeButtons:s.l0.colWithGap(8),shutDownContainer:s.l0.colWithGap(8),shutDownButton:[s.l0.color.accentNegativeStrongest,s.l0.transition.snappy,(0,N.Z)({backgroundColor:C.vb.interactiveBackground,borderColor:"transparent"},s.wl.hover,{borderColor:"transparent"})]}),Ur=function(e){var t=e.hideResume,n=void 0!==t&&t,r=e.hideSuspend,o=void 0!==r&&r,s=e.onLifecycleCommand,u=(0,f.kW)(),d=(0,f.$y)(),p=(0,a.Z)(l.useState(!1),2),m=p[0],v=p[1],g=(0,a.Z)(l.useState(!1),2),y=g[0],Z=g[1],b=(0,a.Z)(l.useState(!1),2),C=b[0],k=b[1],S=(0,h.Z)(),E=(0,f.FN)(S),T=(null===d||void 0===d?void 0:d.status)===w.Fe.Resuming,R=(null===d||void 0===d?void 0:d.status)===w.Fe.Suspending,D=(null===d||void 0===d?void 0:d.status)===w.Fe.Suspended,I=T||R||u===ie.z.ProcessingLifecycleCommand||u===ie.z.Deploying,_=!n&&E&&(D||T)&&(null===d||void 0===d?void 0:d.hasImageTag),B=!o&&!D&&!T&&(R||u===ie.z.Deploying||u===ie.z.Ready)&&(null===d||void 0===d?void 0:d.hasImageTag);return(0,i.BX)(i.HY,{children:[(0,i.BX)(c.G,{css:Nr.container,children:[_||B?(0,i.BX)(c.G,{css:Nr.pauseAndResumeButtons,children:[_?(0,i.BX)(i.HY,{children:[(0,i.tZ)(x.zx,{text:T?"Resuming":"Resume",onClick:function(){return s({command:w.Qc.Resume})},loading:T,disabled:I,iconLeft:T?(0,i.tZ)(we.Z,{}):(0,i.tZ)(Gr.Z,{})}),(0,i.tZ)(U.xv,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,B?(0,i.BX)(i.HY,{children:[(0,i.tZ)(x.zx,{text:"Pause",onClick:function(){return s({command:w.Qc.Suspend})},loading:R,disabled:I,iconLeft:R?(0,i.tZ)(we.Z,{}):(0,i.tZ)(Br.Z,{})}),(0,i.tZ)(U.xv,{color:"dimmer",children:"Your deployment billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,i.BX)(c.G,{css:Nr.shutDownContainer,children:[(0,i.tZ)(x.zx,{text:"Change deployment type",onClick:function(){return k(!0)},iconLeft:(0,i.tZ)(Pr.Z,{})}),(0,i.tZ)(U.xv,{color:"dimmer",children:"To change your deployment type, you will need to shut down and create a new deployment."})]}),(0,i.tZ)(_r.u,{isOpen:C,onRequestClose:function(){return k(!1)},children:(0,i.tZ)(Ir.Z,{confirmLabel:"Yes, delete my deployment",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){Z(!0),k(!1),s({command:w.Qc.Destroy})},onCancel:function(){return k(!1)},children:"To change your deployment type, you will need to shut down and create a new deployment. This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})}),(0,i.BX)(c.G,{css:Nr.shutDownContainer,children:[(0,i.tZ)(x.zx,{text:"Shut down",colorway:"negative",variant:"outlined",css:Nr.shutDownButton,onClick:function(){return v(!0)},disabled:y,iconLeft:(0,i.tZ)(Ar.Z,{})}),(0,i.tZ)(U.xv,{color:"dimmer",children:"Your deployment billing will be canceled, and your deployed app will cease to exist"})]})]}),(0,i.tZ)(_r.u,{isOpen:m,onRequestClose:function(){return v(!1)},children:(0,i.tZ)(Ir.Z,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){Z(!0),v(!1),s({command:w.Qc.Destroy})},onCancel:function(){return v(!1)},children:"This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})},Lr=function(e){var t=e.onBack,n=e.onCheckout,r=e.onLifecycleCommand,o=(0,f.hn)(),u=!(void 0!==(0,f.pn)())&&!("string"===typeof o),d=(0,h.Z)(),m=(0,f.FN)(d),v=(0,a.Z)(l.useState(!1),2),g=v[0],y=v[1],Z=(0,Dr.P)({step:"not_shown"});l.useEffect((function(){$({context:"tier_selection"})}),[]),l.useEffect((function(){"checkout_success"!==Z.currentStep.step?"not_shown"===Z.currentStep.step&&Z.goTo({step:"power_up_details",powerUpCategory:"hosting_tier"}):y(!0)}),[Z]);var w=!m||!u,C=m&&u;return"not_shown"===Z.currentStep.step?(0,i.tZ)(i.HY,{}):(0,i.tZ)(A,{children:(0,i.BX)(c.G,{css:[s.l0.colWithGap(16),B.Qw.maxWidth],children:[w?(0,i.tZ)(Rr.s,(0,I.Z)((0,D.Z)({},Z),{analyticsContext:"workspace_hosting_pane",goBack:function(){"checkout_success"!==Z.currentStep.step?"power_up_details"===Z.currentStep.step?t():Z.goBack():n()}})):null,g?(0,i.tZ)(x.zx,{colorway:u?"primary":void 0,onClick:n,text:u?"Deploy your project":"Back to deployment"}):null,C?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.G,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,i.tZ)(xe.hU,{alt:"Back",onClick:t,children:(0,i.tZ)(Ce.Z,{})}),(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(b.Z,{}),text:"To upgrade hosting tier, please deploy your repl first."})]}),(0,i.tZ)(Ur,{hideResume:!0,hideSuspend:!0,onLifecycleCommand:r})]}):null]})})},Or=(0,m.X)({deployOptionsWithCurrentBuild:[s.l0.p(16),s.l0.pt(12),s.l0.borderRadius(8),s.l0.border({color:s.TV.outlineDimmest})],back:[s.l0.pb(8),s.l0.flex.growAndShrink(1)],subViewOuter:[s.l0.rowWithGap(12)],subView:[s.l0.pb(12),s.l0.flex.growAndShrink(1),s.l0.colWithGap(12)],deploymentInfoWrapper:[s.l0.rowWithGap(12),{':has( + [data-history-timeline-items="1"])':{"[data-timeline-line]":{display:"none"}}}],deploymentInfo:[s.l0.pb(16),s.l0.flex.growAndShrink(1),s.l0.colWithGap(12)]}),Xr=function(e){var t=e.view,n=e.onViewAction,r=e.onError,o=e.openFile,a=e.onLifecycleCommand,s=e.refetch,u=(0,f.kW)(),d=(0,f.hn)(),m=(0,f.$y)(),v=(0,f.pn)(),g=(0,f.XZ)(),y=void 0!==m,Z=(0,h.Z)(),b=(0,f.FN)(Z),x=null===m||void 0===m?void 0:m.provider,C=y&&m.machineConfiguration?{configurationId:m.machineConfiguration.id,configurationLabel:m.machineConfiguration.label,maxInstances:null===m||void 0===m?void 0:m.maxMachineInstances}:void 0,k=(0,l.useState)(!1),E=k[0],T=k[1],R=x===w.r4.Gce&&y&&!b,D=u===ie.z.Ready||u===ie.z.Suspended,I=(0,l.useState)(null),_=I[0],B=I[1],G=(0,l.useState)(null),P=G[0],N=G[1];l.useEffect((function(){$({context:S.k.Deployment})}),[]),l.useEffect((function(){u===ie.z.Preparing&&(t===S.k.DeploymentInProgress||_||n({type:S.a.ChangeView,payload:{view:S.k.DeploymentInProgress}}))}),[u,t,n,_]);var U=l.useRef(void 0);l.useEffect((function(){U.current=null===v||void 0===v?void 0:v.id}),[null===v||void 0===v?void 0:v.id]);var L=(null===m||void 0===m?void 0:m.status)===w.Fe.Success,O=(null===m||void 0===m?void 0:m.id)===U.current;l.useEffect((function(){L&&O&&n({type:S.a.ChangeView,payload:{view:S.k.Deployment}})}),[L,O,n]);var X=null===v||void 0===v?void 0:v.status,M=(0,l.useRef)(X);(0,l.useEffect)((function(){X&&(M.current=X)}),[X]);var F=(0,f.v5)();if(_)return(0,i.tZ)(Bn,{build:_,fs:g,openFile:o,onBack:function(){B(null)},onViewAppLogs:function(){n({type:S.a.ChangeView,payload:{view:S.k.Logs}})}});if(P===w.r4.CloudRun)return(0,i.tZ)(Tr,{onError:r,onConfirm:function(e){n({type:S.a.SendDeploymentLifecycleCommand,payload:{command:w.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return N(null)}});if(P===w.r4.Gce)return(0,i.tZ)(Lr,{onLifecycleCommand:a,onCheckout:function(){s(),N(null)},onBack:function(){N(null)}});var W=R||!y||!d;return(0,i.tZ)(A,{children:(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:Or.subViewOuter,children:[y?(0,i.tZ)(En,{type:"future"}):null,(0,i.BX)(c.G,{css:Or.subView,children:[!W&&D?(0,i.tZ)(dn,{dotReplit:F,fs:g,deploymentId:d,onError:r,expanded:E,setExpanded:T}):null,t===S.k.DeploymentInProgress?(0,i.tZ)(xt,{openFile:o,viewBuildLogsOnLoad:!y,onViewLogs:function(){n({type:S.a.ChangeView,payload:{view:S.k.Logs}})},onCanceled:function(){n({type:S.a.ChangeView,payload:{view:S.k.Deployment}}),r("Build cancelled")},onError:r}):null]})]}),y?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Tn,{type:"failureQueue",onViewBuildLogs:B}),(0,i.BX)(c.G,{css:Or.deploymentInfoWrapper,children:[(0,i.tZ)(En,{type:"present"}),(0,i.BX)(c.G,{css:Or.deploymentInfo,children:[(0,i.tZ)(ye,{provider:x,machine:C,onViewBuildLogs:B,onManageClick:function(){x!==w.r4.CloudRun&&x!==w.r4.Gce?x===w.r4.Static&&n({type:S.a.ChangeView,payload:{view:S.k.Settings}}):N(x)}}),R?(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(Ze.Z,{}),text:"Your deployment requires a tier in order to re-deploy"}):null]})]}),(0,i.tZ)(Tn,{onViewBuildLogs:B})]}):null]})})},Mr=n(8942),Fr=n(86173),Wr=n(43841),Hr=n(35291),Vr=n(52994),zr=n(84165),jr=n(17436),qr=n(46130),$r=n(28882),Yr=n(25149),Kr=n(65790),Qr=n(93132),Jr=n(58446),ei=n(40770),ti=n(47805),ni=n(70232),ri=n(38463),ii=n(78810),oi=n(22124),ai=function(){var e=(0,f.gg)(),t=e.isDeployableRepl,n=e.reason;return t?null:(0,i.tZ)(p.E,{colorway:"warning",text:n})};function li(){var e=(0,De.Z)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    powerUps {\n      ... on ReplPowerUpTypes {\n        hostingTier {\n          sku\n        }\n      }\n    }\n  }\n"]);return li=function(){return e},e}function ci(){var e=(0,De.Z)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return ci=function(){return e},e}var si={},ui=(0,Ie.Ps)(li()),di=(0,Ie.Ps)(ci(),ui);var fi=n(39071);function hi(){var e=(0,De.Z)(["\n  query DeploymentsPaneIntro($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        hostingDeploymentPermissions {\n          canDeployReservedVm {\n            isDeployable\n            explanation\n          }\n          canDeployAutoscale {\n            isDeployable\n            explanation\n          }\n          canDeployStatic {\n            isDeployable\n            deploymentCount\n            limit\n            explanation\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n    }\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n  ","\n"]);return hi=function(){return e},e}var pi={},mi=(0,Ie.Ps)(hi(),ui,fi.eD);var vi=n(48250),gi=(0,m.X)({type:[s.l0.borderRadius(8),s.l0.p(8)],hostingTierFlow:s.l0.colWithGap(8),manageReserved:s.l0.colWithGap(16),manageReservedHeader:[s.l0.rowWithGap(8),s.l0.align.center]});function yi(e){var t,n=e.replId,r=e.initialState,o=e.fs,a=e.dotReplit,s=e.onBack,u=e.onDeploy,d=e.onError,f=e.onLifecycleCommand,h=(0,l.useState)(r),m=h[0],v=h[1],g=function(e){var t=(0,D.Z)({},si,e);return _e.a(di,t)}({variables:{replId:n},onError:function(e){return d(e.message)}}),y=g.data,Z=g.loading,x=g.refetch,C="Repl"===(null===y||void 0===y?void 0:y.repl.__typename)?y.repl:null,S=C?(0,Xt.Jw)({replSlug:C.slug,username:null===(t=C.owner)||void 0===t?void 0:t.username}):"",E="ReplPowerUpTypes"===(null===C||void 0===C?void 0:C.powerUps.__typename)?C.powerUps.hostingTier:null;return Z?(0,i.tZ)(ke,{loading:!0}):C?m.type===w.r4.Static?(0,i.BX)(i.HY,{children:[(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(xe.hU,{alt:"Back",tooltipHidden:!0,onClick:function(){return s()},children:(0,i.tZ)(Ce.Z,{})})}),(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(k.Tg,{css:gi.type,elevated:!0,children:(0,i.tZ)(ge,{label:"Type",fullWidth:!0,children:(0,i.tZ)(ve,{name:oe[m.type]})})})}),(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(ln,{initialSubdomain:S,deploymentId:null,provider:m.type,onError:d,onCancel:function(){return s()},onDeploy:u,fs:o,dotReplit:a})})]}):m.type===w.r4.Gce?E&&m.didCheckout?m.manage?(0,i.tZ)(A,{maxWidth:!0,children:(0,i.BX)(c.G,{css:gi.manageReserved,children:[(0,i.BX)(c.G,{css:gi.manageReservedHeader,children:[(0,i.tZ)(xe.hU,{alt:"Back",onClick:function(){return v({type:m.type,didCheckout:m.didCheckout,manage:!1})},children:(0,i.tZ)(vi.ArrowLeft,{})}),(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(b.Z,{}),text:"To upgrade hosting tier, please deploy your repl first."})]}),(0,i.tZ)(Ur,{hideResume:!0,hideSuspend:!0,onLifecycleCommand:f})]})}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(k.Tg,{css:gi.type,elevated:!0,children:(0,i.tZ)(ge,{label:"Type",fullWidth:!0,children:(0,i.tZ)(ve,{name:oe[m.type],sku:(0,re.$)(E.sku),canManage:!0,onManageClick:function(){v({type:m.type,didCheckout:m.didCheckout,manage:!0})}})})})}),(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(ln,{initialSubdomain:S,deploymentId:null,provider:m.type,onError:d,onCancel:function(){return s()},onDeploy:u,fs:o,dotReplit:a})})]}):(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(wi,{onBack:s,onCheckout:function(){v({type:m.type,didCheckout:!0,manage:!1}),x()}})}):m.machine?(0,i.BX)(i.HY,{children:[(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(xe.hU,{alt:"Back",tooltipHidden:!0,onClick:function(){return v({type:w.r4.CloudRun,machine:null})},children:(0,i.tZ)(Ce.Z,{})})}),(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(k.Tg,{css:gi.type,elevated:!0,children:(0,i.tZ)(ge,{label:"Type",fullWidth:!0,children:(0,i.tZ)(ve,{name:oe[m.type],sku:"".concat(m.machine.configurationLabel," / ").concat(m.machine.maxInstances," Max"),canManage:!0,onManageClick:function(){v({type:w.r4.CloudRun,machine:null})},usageLink:!0})})})}),(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(ln,{initialSubdomain:S,deploymentId:null,provider:m.type,machine:m.machine,onError:d,onCancel:function(){return v({type:w.r4.CloudRun})},onDeploy:u,fs:o,dotReplit:a})})]}):(0,i.tZ)(A,{maxWidth:!0,children:(0,i.tZ)(Tr,{onBack:s,onError:d,onConfirm:function(e){v({type:w.r4.CloudRun,machine:e})}})}):null}var Zi,bi,wi=function(e){var t=e.onBack,n=e.onCheckout,r=(0,h.Z)(),o=(0,f.Sl)(r),a=o.hostingTier,s=o.refetch,u=(0,Dr.P)({step:"power_up_details",powerUpCategory:"hosting_tier"}),d=u.currentStep.step;return(0,l.useEffect)((function(){"checkout_success"===d&&s()}),[d,s]),(0,i.BX)(c.G,{css:gi.hostingTierFlow,children:[(0,i.tZ)(Rr.s,{currentStep:u.currentStep,canGoBack:u.canGoBack||"power_up_details"===d,goTo:u.goTo,analyticsContext:"workspace_hosting_pane",goBack:function(){"checkout_success"!==u.currentStep.step?"power_up_details"===u.currentStep.step?t():u.goBack():n()}}),a?(0,i.tZ)(x.zx,{colorway:"primary",onClick:n,text:"Deploy your project"}):null]})},xi=s.nC.min(440),Ci="--provider-order",ki={order:"var(".concat(Ci,")")},Si=(0,ne.iv)([s.l0.reset.button,s.l0.overflow("hidden"),s.l0.position.relative,s.l0.focusRing,s.l0.borderRadius(8),s.l0.flex.growAndShrink(1)]),Ei=(0,m.X)({loading:[Si,at.p.foregroundPulse(),s.l0.border({color:s.TV.backgroundHighest})],self:[Si,C.gU.filledAndOutlined,s.l0.border({color:s.TV.outlineDimmer}),(Zi={},(0,N.Z)(Zi,xi,{order:ki.order}),(0,N.Z)(Zi,"&::after",{content:"none"}),Zi)],selfActive:[Si,s.l0.cursor.pointer,s.l0.backgroundColor.accentPrimaryDimmest,s.l0.border({color:s.TV.accentPrimaryStronger}),(bi={},(0,N.Z)(bi,xi,{order:ki.order}),(0,N.Z)(bi,"&::after",{content:"none"}),bi)],content:[s.l0.p(8),s.l0.colWithGap(4),(0,N.Z)({},xi,s.l0.py(12))],contentRecommended:[s.l0.p(8),s.l0.colWithGap(4),(0,N.Z)({},xi,{paddingTop:12,paddingBottom:20})],recommended:[s.l0.py(4),s.l0.backgroundColor.backgroundHighest],recommendedActive:[s.l0.py(4),s.l0.backgroundColor.accentPrimaryDimmer],icon:[s.l0.display.none,s.l0.color.foregroundDimmer,s.l0.center,(0,N.Z)({},xi,s.l0.display.flex)],iconActive:[s.l0.display.none,s.l0.color.accentPrimaryStrongest,s.l0.center,(0,N.Z)({},xi,s.l0.display.flex)],tiersTitle:[s.l0.rowWithGap(8),s.l0.align.center]});function Ti(e){var t=e.loading,n=e.active;return t?Ei.loading:n?Ei.selfActive:Ei.self}function Ri(e){var t,n=e.loading,r=e.active,o=e.provider,a=e.onClick,l=e.title,u=e.description,d=e.recommended,f=e.index,h=(t={},(0,N.Z)(t,w.r4.CloudRun,(0,i.tZ)(Qr.Z,{size:32})),(0,N.Z)(t,w.r4.Gce,(0,i.tZ)(gr.Z,{size:32})),(0,N.Z)(t,w.r4.Static,(0,i.tZ)(ei.Z,{size:32})),t)[o];return(0,i.BX)("button",{css:Ti({loading:n,active:r}),onClick:function(){return a(o)},disabled:n,style:(0,N.Z)({},Ci,f),children:[d?(0,i.tZ)(c.G,{css:r?Ei.recommendedActive:Ei.recommended,children:(0,i.tZ)(U.xv,{variant:"small",children:"Recommended"})}):null,(0,i.BX)(c.G,{css:d?Ei.contentRecommended:Ei.content,children:[(0,i.tZ)(c.G,{css:r?Ei.iconActive:Ei.icon,children:h}),(0,i.BX)(c.G,{children:[(0,i.tZ)(c.G,{css:[s.l0.rowWithGap(4),s.l0.center],children:(0,i.tZ)(U.xv,{variant:"subheadDefault",multiline:!1,children:l})}),(0,i.tZ)(U.xv,{multiline:!1,variant:"small",children:u})]})]})]})}var Di=(0,m.X)({container:[s.l0.colWithGap(12),s.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}],item:{display:"grid",gridTemplateColumns:"56px auto",gap:20},text:[s.l0.flex.growAndShrink(1),s.l0.textAlign.left],autoscaleHours:{}});function Ii(e){var t=e.header,n=e.info;return(0,i.BX)(c.G,{css:Di.container,children:[(0,i.tZ)(U.xv,{variant:"subheadDefault",children:t}),n.map((function(e,t){return(0,i.BX)(c.G,{css:Di.item,children:[e.icon,(0,i.tZ)(U.xv,{css:Di.text,children:e.text})]},t)}))]})}var _i=[w.r4.Gce,w.r4.CloudRun,w.r4.Static],Bi=(0,m.X)({container:[s.l0.colWithGap(32),s.l0.py(32),s.l0.textAlign.center,B.Qw.maxWidth],title:[s.l0.colWithGap(4),s.l0.width("100%"),s.l0.maxWidth(288),{marginLeft:"auto",marginRight:"auto"}],providers:[s.l0.flex.column,s.l0.align.stretch,(0,N.Z)({gap:8},xi,[s.l0.flex.row,s.l0.align.center,{gap:12}])],cta:[s.l0.width("100%"),s.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],secondaryCta:[s.l0.width("100%"),s.l0.maxWidth(320)],ctaContainer:[s.l0.colWithGap(8),s.l0.align.center],ctaStatusBanner:[s.l0.textAlign.left],oldCta:[s.l0.px(8),s.l0.colWithGap(16)],payment:[s.l0.p(16),s.l0.borderRadius(12),s.l0.textAlign.left,s.l0.shadow(2)],budgetContainer:[s.l0.colWithGap(8),s.l0.border(),s.l0.borderRadius(8),s.l0.p(8)],disabledBanner:[s.l0.py(6),{alignSelf:"center"}]}),Gi=function(e){var t,n,r,o,h,p=e.replId,m=e.onError,v=e.onDeploy,g=e.onLifecycleCommand,y=e.initialSelectedProvider,Z=(0,f.FN)(p),b=(0,f.gg)().isDeployableRepl,x=(0,f.XZ)(),C=(0,f.v5)(),S=(0,a.Z)(l.useState(void 0),2),E=S[0],T=S[1],R=(0,a.Z)(l.useState(void 0),2),I=R[0],_=R[1],B=(0,a.Z)(l.useState(!1),2),G=B[0],P=B[1],L=(0,a.Z)(l.useState(!1),2),O=L[0],X=L[1],M=(0,a.Z)(l.useState(null!==y&&void 0!==y?y:null),2),F=M[0],W=M[1];l.useEffect((function(){$({context:"intro"})}),[]);var H=function(e){var t=(0,D.Z)({},pi,e);return _e.a(mi,t)}({variables:{id:p},onError:function(e){return m(e.message)}}),V=H.loading,z=H.data,j=H.refetch,q=(0,a.Z)(l.useState(!1),2),Y=q[0],K=q[1],Q="Repl"===(null===z||void 0===z?void 0:z.repl.__typename)&&"Team"===(null===(t=z.repl.owner)||void 0===t?void 0:t.__typename),J="Repl"===(null===z||void 0===z?void 0:z.repl.__typename)&&(null===(n=null===z||void 0===z?void 0:z.repl.owner)||void 0===n?void 0:n.id)&&(0,ri.xm)(null===(r=null===z||void 0===z?void 0:z.repl.owner)||void 0===r?void 0:r.id);l.useEffect((function(){(0,u.Z)((function(){var e,t;return(0,d.__generator)(this,(function(n){switch(n.label){case 0:if(V)return[2];if(Q&&!J)return T(w.r4.Gce),_(w.r4.Gce),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,be.$f)(C)];case 2:return null===(e=n.sent()).appType?(T(w.r4.CloudRun),_(w.r4.CloudRun),[2]):(t=(0,Vr.oU)(e.appType))===w.r4.Goval?(m("Did not recognize template deployment provider"),[2]):(T(t),_(t),[3,4]);case 3:return n.sent(),m("Something went wrong"),[3,4];case 4:return[2]}}))}))()}),[m,C,V,Q,J]);var ee=l.useMemo((function(){return function(e){var t=e.data,n=null===t||void 0===t?void 0:t.usageBasedBilling;if(!n||"UserUsageBasedBillingSummary"!==n.__typename)return;var r=n.currentBillingPeriod;if(!r)return;var i=r.totals.find((function(e){return e.billableMetric===w.oD.AutoscaleComputeSeconds}));if(null==i)return;var o=Math.max(0,i.freeUnits-i.usage);return(0,Hr.fZ)(o,{resourceUsageType:"ComputeUnits"})}({data:null===z||void 0===z?void 0:z.currentUser})}),[z]),te=l.useCallback((0,u.Z)((function(){return(0,d.__generator)(this,(function(e){switch(e.label){case 0:return K(!0),[4,j()];case 1:return e.sent(),K(!1),[2]}}))})),[j,K]),ne=(0,jr.Q)();if(F||Z)return(0,i.tZ)(yi,{replId:p,initialState:Z||!F?{type:w.r4.Gce,didCheckout:!0}:{type:F},fs:x,dotReplit:C,onDeploy:v,onBack:function(){return W(null)},onError:m,onLifecycleCommand:g});var re,ie=function(){if(!z||"Repl"!==(null===z||void 0===z?void 0:z.repl.__typename)||!E)return{isDeployable:!1,explanation:"Loading"};if(E===w.r4.Static){var e=z.repl.hostingDeploymentPermissions.canDeployStatic;return{isDeployable:e.isDeployable,explanation:e.explanation}}if(E===w.r4.CloudRun){var t=z.repl.hostingDeploymentPermissions.canDeployAutoscale;return{isDeployable:t.isDeployable,explanation:t.explanation}}if(E===w.r4.Gce){var n=z.repl.hostingDeploymentPermissions.canDeployReservedVm;return{isDeployable:n.isDeployable,explanation:n.explanation}}(0,ni.Z)(E)}(),oe=ie.isDeployable,ae=ie.explanation,le=V||Y||void 0===E,ce=null===z||void 0===z||null===(o=z.currentUser)||void 0===o?void 0:o.userSubscriptionType,se=ce===w.HP.Hacker,ue=ce===w.HP.HackerPro,de=se||ue,fe="UserUsageBasedBillingSummary"===(null===z||void 0===z||null===(h=z.currentUser)||void 0===h?void 0:h.usageBasedBilling.__typename)?z.currentUser.usageBasedBilling.capabilities:null,he=function(){return se?(0,i.tZ)(zr.GN,{}):ue?(0,i.tZ)(zr.T3,{}):(0,i.tZ)(zr.fG,{})},pe=(re={title:"Deploy to production",subtitle:"Deploy a stable, public version of your project, unaffected by the changes you make in the workspace."},(0,N.Z)(re,w.r4.Gce,{display:!0,title:"Reserved VM",subtitle:"Servers that stay on",header:"Reserved VM is for apps that don't tolerate restarts",info:[{text:"Reserved VM apps have 99.9% uptime, preventing restarts that interrupt apps that rely on information between client sessions",icon:(0,i.tZ)(zr.lV,{})},{text:"Flat monthly price based on your custom power level, starting at $7/month",icon:(0,i.tZ)(zr.G8,{})}]}),(0,N.Z)(re,w.r4.CloudRun,{display:!0,title:"Autoscale",subtitle:"Meet demand exactly",header:"Autoscale is the best choice for most projects",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless for when you go viral",icon:(0,i.tZ)(zr.Qm,{})},{text:de?"".concat(ue?"6 million":"3 million"," compute units per month are included in your ").concat(ue?ne:ii.ZK," plan. Additional usage is billed at $").concat(oi.m0," per compute unit"):"Compute units are included in Replit plans, then billed at $".concat(oi.m0," per compute unit"),icon:(0,i.tZ)(he,{})}]}),(0,N.Z)(re,w.r4.Static,{display:!0,title:"Static",subtitle:"Easy client-side apps",header:"Static lets you share client-side apps fast, for free",info:[{text:"No server compute means free usage \u2014 you are only responsible for outbound data transfer (included in Replit plans)",icon:(0,i.tZ)(zr.Lv,{})},{text:"Extremely fast deploy times allow you to move quickly on your production sites",icon:(0,i.tZ)(zr.lt,{})}]}),re);return(0,i.BX)(A,{children:[(0,i.tZ)(_r.u,{isOpen:O,onRequestClose:function(){return X(!1)},children:(0,i.tZ)(Fr.Z,{onRequestClose:function(){return X(!1)},items:Wr.lF})}),(0,i.BX)(c.G,{css:Bi.container,children:[(0,i.BX)(c.G,{css:Bi.title,children:[(0,i.tZ)(U.xv,{variant:"subheadBig",children:pe.title}),(0,i.tZ)(U.xv,{color:"dimmer",children:pe.subtitle}),(0,i.tZ)(U.xv,{css:s.l0.textAlign.center,children:(0,i.tZ)("a",{href:"https://docs.replit.com/category/deployments",target:"_blank",rel:"noopener",children:"Learn more"})})]}),(0,i.BX)(c.G,{css:s.l0.colWithGap(16),children:[(0,i.tZ)(c.G,{css:Bi.providers,children:_i.map((function(e,t){if(!pe[e].display)return null;var n=pe[e],r=n.title,o=n.subtitle;return(0,i.tZ)(Ri,{provider:e,loading:le,active:E===e,onClick:T,title:r,description:o,recommended:I===e,index:e===I&&0===t?1.5:e===I&&2===t?.5:t},e)}))}),(0,i.BX)(c.G,{css:s.l0.colWithGap(8),children:[(0,i.tZ)(Pi,{activeProvider:E,isDeployable:oe,isDeployableExplanation:ae,loading:le,ubbExplanation:null===fe||void 0===fe?void 0:fe.explanation,hasPaymentMethod:null===fe||void 0===fe?void 0:fe.hasPaymentMethod,isDeployableRepl:b,handleOnProviderContinue:function(){E&&W(E)},refetchUbbCapabilitiesQueryData:te,setShowPaymentMethodForm:function(){return P(!0)},showPaymentMethodForm:G,setShowSupportForm:function(){return X(!0)}}),E===w.r4.CloudRun&&null!=ee?(0,i.BX)(U.xv,{color:"dimmer",children:["You have ",ee," left this month"]}):null,G?(0,i.tZ)(k.Tg,{elevated:!0,css:Bi.payment,children:(0,i.tZ)(Yr.q,{onSuccess:(0,u.Z)((function(){return(0,d.__generator)(this,(function(e){switch(e.label){case 0:return P(!1),[4,te()];case 1:return e.sent(),[2]}}))})),context:"workspace_hosting_pane"})}):null]}),(0,i.tZ)(ai,{})]}),(0,i.tZ)(c.G,{css:s.l0.colWithGap(16),children:E?(0,i.tZ)(Ii,{header:pe[E].header,info:pe[E].info}):null})]})]})};function Pi(e){var t=e.activeProvider,n=e.isDeployable,r=e.isDeployableExplanation,o=e.loading,a=e.ubbExplanation,l=e.hasPaymentMethod,s=e.isDeployableRepl,u=e.handleOnProviderContinue,d=e.refetchUbbCapabilitiesQueryData,f=e.setShowPaymentMethodForm,h=e.showPaymentMethodForm,m=e.setShowSupportForm,v=(0,qr.rv)();return n?t===w.r4.Gce?(0,i.tZ)(x.zx,{colorway:"primary",onClick:u,text:"Set up your deployment",disabled:!s,loading:o,css:Bi.cta}):a===w.Fp.NeedsSubscription||a===w.Fp.NeedsSubscriptionOrPaymentMethod?v?(0,i.tZ)(p.E,{text:"You need a subscription to deploy. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,i.tZ)(b.Z,{}),css:Bi.ctaStatusBanner}):(0,i.BX)(c.G,{css:Bi.ctaContainer,children:[(0,i.tZ)(ti.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:Bi.cta,colorway:"primary",disabled:h,onPlanCheckoutComplete:d}),(0,i.tZ)(x.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:Bi.cta,disabled:h,loading:o,iconLeft:(0,i.tZ)(Jr.Z,{}),onClick:function(){return f()}})]}):a===w.Fp.NeedsSmsVerification?(0,i.tZ)(Mr.Z,{context:w.jv.Deployments,onSuccess:d}):a===w.Fp.NeedsPaymentMethod?v?(0,i.tZ)(p.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,i.tZ)(b.Z,{}),css:Bi.ctaStatusBanner}):(0,i.tZ)(x.zx,{colorway:"primary",text:"Add a payment method",css:Bi.cta,disabled:h,loading:o,iconLeft:(0,i.tZ)(Jr.Z,{}),onClick:function(){return f()}}):a===w.Fp.NeedsUnbanning?(0,i.tZ)(Kr.u,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",icon:(0,i.tZ)(b.Z,{}),css:Bi.ctaStatusBanner,onClick:function(){return m()}}):a===w.Fp.InsufficientBudget?(0,i.BX)(i.HY,{children:[(0,i.tZ)(p.E,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,i.tZ)(b.Z,{}),css:Bi.ctaStatusBanner}),(0,i.tZ)(c.G,{css:Bi.budgetContainer,children:(0,i.tZ)($r.L,{onUpdateSuccess:d})})]}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(x.zx,{colorway:"primary",onClick:u,text:"Set up your deployment",disabled:!s,loading:o,css:Bi.cta}),!1===l?(0,i.tZ)(Kr.u,{text:"Add a payment method to avoid downtime",colorway:"warning",icon:(0,i.tZ)(b.Z,{}),css:Bi.ctaStatusBanner,onClick:function(){return v?null:f()}}):null]}):(0,i.tZ)(i.HY,{children:(0,i.tZ)(p.E,{text:r,colorway:"grey",css:Bi.disabledBanner})})}function Ai(){var e=(0,De.Z)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n  }\n"]);return Ai=function(){return e},e}function Ni(){var e=(0,De.Z)(["\n  query HostingDeploymentLogs2($replId: String!, $deploymentId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(deploymentId: $deploymentId) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Ni=function(){return e},e}function Ui(){var e=(0,De.Z)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ... on ReplLog {\n        line\n        timestamp\n      }\n    }\n  }\n"]);return Ui=function(){return e},e}var Li={},Oi=(0,Ie.Ps)(Ai()),Xi=(0,Ie.Ps)(Ni(),Oi);var Mi=(0,Ie.Ps)(Ui());var Fi=n(86033),Wi=(0,m.X)({root:[{overflow:"auto"},s.l0.coverContainer],rows:{width:"100%",position:"relative","& > div:nth-child(even)":[s.l0.backgroundColor.backgroundHigher]},timestamp:[s.l0.p(6),{color:s.TV.foregroundDimmer,cursor:"pointer"}],logContainer:[s.l0.pl(6),s.l0.py(6),s.l0.pr(4),s.l0.flex.growAndShrink(1),s.l0.position.relative,s.l0.minHeight(26),{cursor:"pointer"}],logTruncated:[s.l0.flex.growAndShrink(1),s.l0.truncate],row:[s.l0.flex.row,s.l0.align.start,s.l0.font.code,s.l0.fontSize(12),{position:"absolute",top:0,left:0,width:"100%"}],noLogsContainer:[s.l0.colWithGap(8),s.l0.pt(4)],noLogsText:[s.l0.textAlign.center]}),Hi=function(e){var t=e.deploymentId,n=e.replId;return t?(0,i.tZ)(zi,{replId:n,deploymentId:t}):(0,i.tZ)(A,{children:(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(b.Z,{}),text:"Deployment not found"})})};function Vi(e){var t=e.log,n=e.y,r=e.height,o=e.resizeRef,a=e.index,s=function(e){var t=p.current;e.clientY===t.y&&e.clientX===t.x&&h((function(e){return!e}))},u=function(e){p.current={x:e.clientX,y:e.clientY}},d=(0,l.useState)(!1),f=d[0],h=d[1],p=(0,l.useRef)({x:0,y:0});return(0,i.BX)(c.G,{title:t.line,css:Wi.row,style:{height:r,transform:"translateY(".concat(n,"px)")},children:[(0,i.BX)(c.G,{css:Wi.timestamp,onClick:s,onMouseDown:u,children:[new Date(t.timestamp).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"})," ",new Date(t.timestamp).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),(0,i.tZ)(c.G,{css:Wi.logContainer,onClick:s,onMouseDown:u,innerRef:o,"data-index":a,children:(0,i.tZ)(c.G,{css:!f&&Wi.logTruncated,children:t.line})}),f?(0,i.tZ)(Gt.qi,{value:t.line}):null]})}function zi(e){var t=e.deploymentId,n=function(e){var t=(0,D.Z)({},Li,e);return _e.a(Xi,t)}({variables:{replId:e.replId,deploymentId:t}}),r=n.data,o=n.loading,a=n.error,s=n.subscribeToMore;(0,l.useEffect)((function(){return s({document:Mi,variables:{input:{deploymentId:t}},updateQuery:function(e,t){var n=t.subscriptionData;return(0,Ot.ZP)(e,(function(e){var t="Repl"===(null===e||void 0===e?void 0:e.repl.__typename)?e.repl.hostingDeploymentLogs.result:null;t&&t.unshift(n.data.hostingDeploymentLogUpdates)}))}})}),[s,t]);var u,d=(0,l.useRef)(null),f="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.hostingDeploymentLogs.result:null,h=(0,Fi.MG)({count:f?f.length:0,getScrollElement:function(){return d.current},estimateSize:function(){return 28},overscan:10});return l.useEffect((function(){$({context:S.k.Logs})}),[]),o?(0,i.tZ)(ke,{loading:!0}):a?(0,i.tZ)(A,{children:(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(b.Z,{}),text:null!==(u=a.message)&&void 0!==u?u:"Something went wrong"})}):f&&0!==(null===f||void 0===f?void 0:f.length)?(0,i.tZ)(c.G,{innerRef:d,css:Wi.root,children:(0,i.tZ)(c.G,{style:{height:h.getTotalSize()},css:Wi.rows,children:h.getVirtualItems().map((function(e){var t=f[e.index];return t?(0,i.tZ)(Vi,{log:t,height:e.size,y:e.start,resizeRef:h.measureElement,index:e.index},e.key):null}))})}):(0,i.tZ)(A,{children:(0,i.tZ)(ji,{message:0===(null===f||void 0===f?void 0:f.length)?"No logs yet\u2026":"No logs are available because the most recent build failed before it was promoted."})})}var ji=function(e){var t=e.message;return(0,i.BX)(c.G,{css:Wi.noLogsContainer,children:[(0,i.tZ)(U.xv,{css:Wi.noLogsText,children:t}),(0,i.BX)(U.xv,{color:"dimmer",css:Wi.noLogsText,children:["Having trouble?"," ",(0,i.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",onClick:function(){return $({context:"troubleshooting_doc"})},children:"Troubleshooting tips"})]})]})},qi=n(9125),$i=n(50216);function Yi(){var e=(0,De.Z)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    state\n    domain\n  }\n"]);return Yi=function(){return e},e}function Ki(){var e=(0,De.Z)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n    legacyReplDomains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return Ki=function(){return e},e}function Qi(){var e=(0,De.Z)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return Qi=function(){return e},e}function Ji(){var e=(0,De.Z)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return Ji=function(){return e},e}var eo={},to=(0,Ie.Ps)(Yi()),no=(0,Ie.Ps)(Ki(),to),ro=(0,Ie.Ps)(Qi(),no);var io=(0,Ie.Ps)(Ji(),to);function oo(){var e=(0,De.Z)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          provider\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return oo=function(){return e},e}var ao={},lo=(0,Ie.Ps)(oo(),no,wr.bN);var co,so=n(32508),uo=n.n(so),fo=n(86093),ho=n(35650),po=n(88794),mo=(0,fo.$)(["paddingRight"]),vo=mo.cssVars,go=mo.styleTokens,yo=(0,m.X)({inputWrapper:[s.l0.position.relative,s.l0.flex.growAndShrink(1),{input:[{paddingRight:go.paddingRight}]}],copyButton:[s.l0.position.absolute,s.l0.top("50%"),s.l0.right(4),{transform:"translateY(-50%)"}]});function Zo(e){return(0,i.BX)(c.G,{css:yo.inputWrapper,style:(0,N.Z)({},vo.paddingRight,e.value?"36px":"8px"),children:[(0,i.tZ)(Wt.II,(0,I.Z)((0,D.Z)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,i.tZ)(xe.hU,{css:yo.copyButton,alt:"Copy",tooltipHidden:!0,onClick:function(){return e.value&&(0,po.Z)(e.value)},children:(0,i.tZ)(ho.Z,{})}):null]})}var bo=(0,m.X)({root:[s.l0.flex.column,(co={gap:8},(0,N.Z)(co,s.nC.min("mobileMax"),[s.l0.flex.row,{"& > div:nth-of-type(1)":{width:"30%"},"& > div:nth-of-type(2)":{maxWidth:50}}]),(0,N.Z)(co,"label",[s.l0.color.foregroundDimmer,{fontSize:s.TV.fontSizeSmall}]),co)],col:[s.l0.colWithGap(4),s.l0.flex.growAndShrink(1)],records:[s.l0.px(12),s.l0.pt(8),s.l0.pb(16),s.l0.colWithGap(16),s.l0.borderRadius(12),(0,N.Z)({},s.nC.min("mobileMax"),s.l0.colWithGap(12))],divider:(0,N.Z)({display:"flex",height:1,backgroundColor:s.TV.outlineDimmest},s.nC.min("mobileMax"),s.l0.display.none)});function wo(e){return(0,i.BX)(c.G,{css:bo.root,children:[(0,i.BX)(c.G,{css:bo.col,children:[(0,i.tZ)(c.G,{tag:"label",children:"Hostname"}),(0,i.tZ)(Wt.II,{value:e.hostname,readOnly:!0})]}),(0,i.BX)(c.G,{css:bo.col,children:[(0,i.tZ)(c.G,{tag:"label",children:"Type"}),(0,i.tZ)(Wt.II,{value:e.type,readOnly:!0})]}),(0,i.BX)(c.G,{css:bo.col,children:[(0,i.tZ)(c.G,{tag:"label",children:"Record"}),(0,i.tZ)(Zo,{value:e.record,readOnly:!0})]})]})}function xo(e){var t="replit-verify=".concat(e.deploymentId);return(0,i.BX)(k.Tg,{background:"default",css:bo.records,children:[(0,i.tZ)(wo,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,i.tZ)(c.G,{css:bo.divider}),(0,i.tZ)(wo,{hostname:e.hostname,type:"TXT",record:t})]})}var Co="https://docs.replit.com/hosting/deployments/custom-domains",ko=n(73823),So=n(30452),Eo=(0,m.X)({root:[s.l0.colWithGap(16),s.l0.p(8),s.l0.borderRadius(8),s.l0.border({color:s.TV.outlineDimmer})],labelRow:[s.l0.rowWithGap(8),s.l0.align.center],labelText:[s.l0.flex.growAndShrink(1)],controls:[s.l0.rowWithGap(8),s.l0.justify.spaceBetween,{"& > button":[s.l0.flex.growAndShrink(1)]}],domainSection:[s.l0.colWithGap(8)],error:[s.l0.rowWithGap(4),s.l0.align.center],recordsSection:[s.l0.colWithGap(8)],valueRow:[s.l0.borderRadius(8),s.l0.pl(8),s.l0.pr(4),s.l0.height(32),s.l0.rowWithGap(8),s.l0.align.center,s.l0.justify.spaceBetween,{a:s.l0.hover(s.l0.color.accentPrimaryStrongest)}]});function To(e){var t=(0,l.useState)(!0),n=t[0],r=t[1],o=(0,l.useState)(""),u=o[0],d=o[1],f=(0,l.useState)(!1),h=f[0],p=f[1],m=(0,a.Z)(function(e){var t=(0,D.Z)({},eo,e);return $i.D(io,t)}({onCompleted:function(){e.onAdd()}}),2),v=m[0],g=m[1].loading,y=(0,l.useRef)(null),Z=(0,l.useId)(),w=uo()(u,{require_valid_protocol:!1})&&u.split(".").length>=2,C=!w||g,S=w?null:"Enter a valid domain",E=g?(0,i.tZ)(we.Z,{}):(0,i.tZ)(Sr.Z,{});return n||g||(E=(0,i.tZ)(ko.Z,{})),(0,i.BX)(c.G,{tag:"form",css:Eo.root,onSubmit:function(t){var i;if(t.preventDefault(),n)return r(!1),void(null===(i=y.current)||void 0===i||i.focus());var o={hostingDeploymentId:e.deploymentId,domain:u};v({variables:{input:o}})},children:[(0,i.BX)(c.G,{css:Eo.domainSection,children:[(0,i.BX)(c.G,{tag:"label",htmlFor:Z,css:Eo.labelRow,children:[w&&!n?(0,i.tZ)(ot.Z,{color:s.TV.accentPositiveDefault}):null,(0,i.tZ)(U.xv,{color:"dimmer",children:"First, enter your domain"})]}),n?(0,i.tZ)(Wt.II,{id:Z,autoFocus:!0,placeholder:"example.com",value:u,disabled:g,onChange:function(e){return d(e.currentTarget.value)},onBlur:function(e){return p(Boolean(e.currentTarget.value))}}):(0,i.BX)(k.Tg,{elevated:!0,css:Eo.valueRow,children:[(0,i.tZ)(c.G,{href:"https://"+u,tag:"a",target:"_blank",children:u}),(0,i.tZ)(xe.hU,{alt:"Edit",onClick:function(){return r(!0)},children:(0,i.tZ)($e.Z,{color:s.TV.foregroundDimmer})})]}),S&&h?(0,i.BX)(c.G,{css:Eo.error,children:[(0,i.tZ)(b.Z,{size:12,color:s.TV.orangeDefault}),(0,i.tZ)(U.xv,{variant:"small",children:S})]}):null]}),!n&&w?(0,i.tZ)(Ro,{apexProxy:e.apexProxy,domain:u,deploymentId:e.deploymentId}):null,(0,i.BX)(c.G,{css:Eo.controls,children:[(0,i.tZ)(x.zx,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,i.tZ)(x.zx,{ref:y,iconRight:E,colorway:"primary",type:"submit",disabled:C,text:n?"Next":"Link domain"})]})]})}function Ro(e){return(0,i.BX)(c.G,{css:Eo.recordsSection,children:[(0,i.BX)(c.G,{css:Eo.labelRow,children:[(0,i.tZ)(So.Z,{color:s.TV.foregroundDimmest}),(0,i.BX)(U.xv,{multiline:!0,css:Eo.labelText,children:["Next, add the following records your domain's DNS settings."," ",(0,i.tZ)("a",{target:"_blank",href:Co,children:"Learn more"})]})]}),(0,i.tZ)(xo,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}function Do(){var e=(0,De.Z)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return Do=function(){return e},e}function Io(){var e=(0,De.Z)(["\n  mutation HostingDeploymentsVerifyDomain(\n    $input: VerifyHostingDeploymentDomainInput!\n  ) {\n    verifyHostingDeploymentDomain(input: $input) {\n      ... on HostingDeploymentDomain {\n        id\n        state\n      }\n    }\n  }\n"]);return Io=function(){return e},e}var _o={},Bo=(0,Ie.Ps)(Do());var Go=(0,Ie.Ps)(Io());var Po,Ao=n(95862),No=(0,m.X)({root:[s.l0.colWithGap(8),s.l0.borderRadius(8),s.l0.pl(8),s.l0.pr(4),s.l0.height(32),s.l0.justify.center]}),Uo=(0,m.X)({root:No.root,rootExpanded:[No.root,s.l0.height("auto"),s.l0.pt(4),s.l0.pb(12),s.l0.justify.start],domainRow:[s.l0.reset.button,s.l0.rowWithGap(8),s.l0.align.center,s.l0.justify.spaceBetween],iconButtons:[s.l0.flex.row],expanded:[s.l0.colWithGap(12),s.l0.pl(4),s.l0.pr(8)],domainWrapper:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.flex.shrink(1),s.l0.color.accentPrimaryStronger,{a:s.l0.hover(s.l0.color.accentPrimaryStrongest)}],statusDot:[s.l0.borderRadius("full"),s.l0.width(6),s.l0.height(6)],status:[s.l0.rowWithGap(4),s.l0.align.center],dnsRecords:[s.l0.colWithGap(6)],buttons:[s.l0.flex.column,s.l0.justify.spaceBetween,(Po={gap:8},(0,N.Z)(Po,s.nC.min("mobileMax"),s.l0.flex.row),(0,N.Z)(Po,"button",[s.l0.flex.growAndShrink(1)]),Po)],warning:[s.l0.rowWithGap(6),s.l0.align.center]}),Lo={verified:{color:s.TV.accentPositiveDefault,text:"Verified"},verifying:{color:s.TV.orangeDefault,text:"Verifying"},failed:{color:s.TV.accentNegativeDefault,text:"Failed"}};function Oo(e){var t=e.domain,n=e.deploymentId,r=e.apexProxy,o=(0,l.useState)(!1),u=o[0],d=o[1],f=(0,l.useState)(!1),h=f[0],p=f[1],m=(0,a.Z)(function(e){var t=(0,D.Z)({},eo,e);return qi.t(ro,t)}({variables:{id:n},fetchPolicy:"network-only",ssr:!1}),2),v=m[0],g=m[1].loading,y=(0,a.Z)(function(e){var t=(0,D.Z)({},_o,e);return $i.D(Bo,t)}(),2),Z=y[0],C=y[1].loading,S=(0,a.Z)(function(e){var t=(0,D.Z)({},_o,e);return $i.D(Go,t)}(),2),E=S[0],T=S[1].loading,R=t.state===w.zt.Failed,I=(0,l.useState)(!1),_=I[0],B=I[1];return(0,i.BX)(k.Tg,{elevated:!0,css:u?Uo.rootExpanded:Uo.root,children:[(0,i.BX)(c.G,{css:Uo.domainRow,style:{borderBottomLeftRadius:u?0:void 0,borderBottomRightRadius:u?0:void 0},children:[(0,i.BX)(c.G,{css:Uo.domainWrapper,children:[(0,i.tZ)(U.xv,{multiline:!1,children:(0,i.tZ)("a",{target:"_blank",href:"https://"+t.domain,children:t.domain})}),(0,i.BX)(c.G,{css:Uo.status,children:[(0,i.tZ)(c.G,{css:Uo.statusDot,style:{backgroundColor:Lo[t.state].color}}),(0,i.tZ)(U.xv,{color:"dimmer",variant:"small",children:Lo[t.state].text})]})]}),(0,i.BX)(c.G,{css:Uo.iconButtons,children:[(0,i.tZ)(xe.hU,{alt:_?"Copied":"Copy link",onClick:function(){(0,po.Z)(t.domain),B(!0),setTimeout((function(){return B(!1)}),1e3)},children:_?(0,i.tZ)(ot.Z,{color:s.TV.accentPositiveStronger}):(0,i.tZ)(ho.Z,{color:s.TV.foregroundDimmer})}),(0,i.tZ)(xe.hU,{alt:"Edit",tooltipHidden:!0,onClick:function(){p(!1),d((function(e){return!e}))},css:s.l0.color.foregroundDimmer,children:u?(0,i.tZ)(ht.Z,{}):(0,i.tZ)($e.Z,{})})]})]}),u?(0,i.tZ)(c.G,{css:Uo.expanded,children:h?(0,i.BX)(i.HY,{children:[(0,i.tZ)(U.xv,{children:"Are you sure you want to unlink this domain?"}),(0,i.BX)(c.G,{css:Uo.buttons,children:[(0,i.tZ)(x.zx,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){p(!1)}}),(0,i.tZ)(x.zx,{size:"small",disabled:C,text:"Yes, unlink "+t.domain,colorway:"negative",onClick:function(){Z({variables:{input:{hostingDeploymentDomainId:t.id}}})}})]})]}):(0,i.BX)(i.HY,{children:[(0,i.BX)(c.G,{css:Uo.dnsRecords,children:[R?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.G,{css:Uo.warning,children:[(0,i.tZ)(b.Z,{}),(0,i.tZ)(U.xv,{children:"DNS Error"})]}),(0,i.BX)(U.xv,{children:["Failed to link domain. Make sure your domain's DNS settings have these records."," ",(0,i.tZ)("a",{target:"_blank",href:Co,children:"Learn more"})]})]}):(0,i.BX)(U.xv,{color:"dimmer",children:["Add these records to your domain's"," ",(0,i.tZ)("strong",{css:s.l0.color.foregroundDefault,children:"DNS settings"}),". This take up to 48 hours to fully apply."," ",(0,i.tZ)("a",{target:"_blank",href:Co,children:"Learn more"})]}),(0,i.tZ)(xo,{hostname:t.domain,apexProxy:r,deploymentId:n})]}),(0,i.BX)(c.G,{css:Uo.buttons,children:[(0,i.tZ)(x.zx,{iconLeft:g||T?(0,i.tZ)(we.Z,{}):(0,i.tZ)(Ao.Z,{}),size:"small",text:R?"Retry linking":"Check status",onClick:function(){R?E({variables:{input:{hostingDeploymentDomainId:t.id}}}):v()}}),(0,i.tZ)(x.zx,{iconLeft:(0,i.tZ)(Ar.Z,{}),size:"small",disabled:C,text:R?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){p(!0)}})]})]})}):null]})}function Xo(){var e=(0,De.Z)(["\n  mutation HostingDeploymentsUnlinkLegacyReplDomain(\n    $input: UnlinkLegacyReplDomainInput!\n  ) {\n    unlinkLegacyReplDomain(input: $input) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            legacyReplDomains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n            domains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Xo=function(){return e},e}var Mo={},Fo=(0,Ie.Ps)(Xo(),to);var Wo=(0,m.X)({root:[s.l0.py(12),s.l0.flex.column,(0,N.Z)({gap:6},s.nC.min("mobileMax"),[s.l0.py(4),s.l0.flex.row,s.l0.align.center,{gap:2,button:{border:"none"}}])],domainLink:[s.l0.flex.growAndShrink(1),s.l0.flex.row,s.l0.fontWeight.medium,{a:[s.l0.truncate,s.l0.flex.shrink(1)]}],confirm:[s.l0.p(8),s.l0.borderRadius(8),s.l0.colWithGap(8),s.l0.justify.spaceBetween],confirmButtons:[s.l0.rowWithGap(8),{button:[s.l0.flex.growAndShrink(1)]}],unlinkButton:[s.l0.color.foregroundDimmer,s.l0.hover(s.l0.backgroundColor.backgroundHighest)]}),Ho=function(e){var t=e.domain;return(0,i.tZ)("a",{target:"_bank",href:"https://"+t,children:t})};function Vo(e){var t=e.deploymentId,n=e.domain,r=e.apexProxy,o=(0,a.Z)(function(e){var t=(0,D.Z)({},Mo,e);return $i.D(Fo,t)}(),2),s=o[0],u=o[1].loading,d=(0,l.useState)(!1),f=d[0],h=d[1],p=(0,l.useState)(!1),m=p[0],v=p[1];return f?(0,i.BX)(k.Tg,{elevated:!0,css:Wo.confirm,children:[(0,i.BX)(U.xv,{children:["Are you sure you want to remove ",(0,i.tZ)(Ho,{domain:n.domain}),"?"]}),(0,i.BX)(c.G,{css:Wo.confirmButtons,children:[(0,i.tZ)(x.zx,{text:"Cancel",onClick:function(){return h(!1)},size:"small"}),(0,i.tZ)(x.zx,{size:"small",disabled:u,colorway:"negative",iconLeft:u?(0,i.tZ)(we.Z,{}):(0,i.tZ)(Ar.Z,{}),text:"Unlink domain",onClick:function(){return s({variables:{input:{replDomainId:n.id}}})}})]})]}):m?(0,i.BX)(k.Tg,{elevated:!0,css:Wo.confirm,children:[(0,i.BX)(c.G,{children:[(0,i.tZ)(U.xv,{variant:"small",color:"dimmer",children:"Transfering"}),(0,i.tZ)(c.G,{css:Wo.domainLink,children:(0,i.tZ)(Ho,{domain:n.domain})})]}),(0,i.tZ)(Ro,{deploymentId:t,domain:n.domain,apexProxy:r}),(0,i.BX)(c.G,{css:Wo.confirmButtons,children:[(0,i.tZ)(x.zx,{text:"Cancel",onClick:function(){return v(!1)},size:"small"}),(0,i.tZ)(x.zx,{size:"small",disabled:u,colorway:"primary",iconLeft:u?(0,i.tZ)(we.Z,{}):(0,i.tZ)(ko.Z,{}),text:"Complete transfer",onClick:function(){return s({variables:{input:{replDomainId:n.id,transferToHostingDeploymentId:t}}})}})]})]}):(0,i.BX)(c.G,{css:Wo.root,children:[(0,i.tZ)(c.G,{css:Wo.domainLink,children:(0,i.tZ)(Ho,{domain:n.domain})}),(0,i.tZ)(x.zx,{size:"small",variant:"outlined",text:"Unlink",onClick:function(){return h(!0)},iconLeft:(0,i.tZ)(Ar.Z,{}),css:Wo.unlinkButton}),(0,i.tZ)(x.zx,{size:"small",variant:"outlined",disabled:u,iconRight:(0,i.tZ)(Sr.Z,{}),colorway:"primary",text:"Transfer to deployment",onClick:function(){return v(!0)}})]})}var zo=(0,m.X)({root:[s.l0.colWithGap(4),s.l0.p(12),s.l0.pb(6),s.l0.borderRadius(12),s.l0.backgroundColor.backgroundHigher,s.l0.border({color:s.TV.outlineDimmer})],header:[s.l0.align.center,s.l0.rowWithGap(8)],list:[{"& > div:not(:first-of-type)":s.l0.border({color:s.TV.outlineDimmer,direction:"top"})}]});function jo(e){var t=e.domains,n=e.deploymentId,r=e.apexProxy,o=1===t.length?"domain":"domains";return(0,i.BX)(k.Tg,{css:zo.root,children:[(0,i.BX)(c.G,{css:s.l0.colWithGap(4),children:[(0,i.BX)(c.G,{css:zo.header,children:[(0,i.tZ)(b.Z,{color:s.TV.yellowStronger}),(0,i.BX)(U.xv,{variant:"subheadDefault",children:["Transfer ",o]})]}),(0,i.BX)(U.xv,{color:"dimmer",children:["You have attached ",t.length," custom ",o," to your development Repl. Please transfer ","domain"===o?"it":"them"," to your deployment for the best user experience."]})]}),(0,i.tZ)(c.G,{css:zo.list,children:t.map((function(e){return(0,i.tZ)(Vo,{domain:e,deploymentId:n,apexProxy:r},e.id)}))})]})}var qo=(0,m.X)({root:[s.l0.colWithGap(8)],error:[s.l0.center,s.l0.rowWithGap(8)],loading:[s.l0.center],empty:[s.l0.px(16),s.l0.py(32),s.l0.borderRadius(8),s.l0.center,s.l0.colWithGap(8),{border:"1px dashed",borderColor:s.TV.outlineDimmer}],primaryDomain:[s.l0.rowWithGap(4),s.l0.height(32),s.l0.justify.spaceBetween,s.l0.align.center,s.l0.pl(8),s.l0.pr(4),s.l0.borderRadius(8)],primaryDomainLink:[s.l0.flex.shrink(1),s.l0.color.accentPrimaryStronger,{a:s.l0.hover(s.l0.color.accentPrimaryStrongest)}],icons:[s.l0.flex.row,s.l0.align.center],footer:[s.l0.flex.row]});function $o(e){var t,n,r=e.deployment,o=(0,l.useState)(!1),a=o[0],u=o[1],d=(0,l.useState)(void 0),h=d[0],m=d[1];!function(e){var t=(0,D.Z)({},eo,e);_e.a(ro,t)}({variables:{id:r.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:h,onCompleted:function(e){var t,n;m("HostingDeployment"===(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)&&(null===(n=e.hostingDeployment.domains)||void 0===n?void 0:n.some((function(e){return e.state===bn.zt.Verifying})))?3e4:void 0)}});var v=(null===r||void 0===r||null===(t=r.domains)||void 0===t?void 0:t.length)?r.domains:null,g=(null===r||void 0===r?void 0:r.currentBuild.status)===w.Fe.Success,y=null===r||void 0===r?void 0:r.repl.apexProxy,Z=(0,f.$y)(),C=function(){var e,t,n,r,i="HostingDeployment"===(null===(e=null===Z||void 0===Z?void 0:Z.repl.hostingDeployment)||void 0===e?void 0:e.__typename)?null===(t=Z.repl.hostingDeployment)||void 0===t?void 0:t.replitAppSubdomain:void 0;if(!i&&(null===(n=null===Z||void 0===Z?void 0:Z.repl.owner)||void 0===n?void 0:n.username)&&(i="".concat(Z.repl.slug,"-").concat(Z.repl.owner.username)),i)return"https://".concat(i).concat("replit.com"!==(null===window||void 0===window||null===(r=window.location)||void 0===r?void 0:r.hostname)?".staging":"",".replit.app")}(),S=(0,l.useState)(!1),E=S[0],T=S[1];return(0,i.BX)(c.G,{css:qo.root,children:[!a&&(null===r||void 0===r||null===(n=r.legacyReplDomains)||void 0===n?void 0:n.length)&&y?(0,i.tZ)(jo,{domains:r.legacyReplDomains,deploymentId:r.id,apexProxy:y}):null,(0,i.BX)(k.Tg,{elevated:!0,css:qo.primaryDomain,children:[(0,i.tZ)(U.xv,{multiline:!1,css:qo.primaryDomainLink,children:(0,i.tZ)("a",{href:C,target:"_blank",rel:"noreferrer noopener",children:C})}),(0,i.BX)(c.G,{css:qo.icons,children:[(0,i.tZ)(xe.hU,{alt:E?"Copied":"Copy link",onClick:function(){C&&((0,po.Z)(C),T(!0),setTimeout((function(){return T(!1)}),1e3))},children:E?(0,i.tZ)(ot.Z,{color:s.TV.accentPositiveStronger}):(0,i.tZ)(ho.Z,{color:s.TV.foregroundDimmer})}),(0,i.tZ)(qt.u,{tooltip:Yo,children:(0,i.tZ)(ue.Z,{"aria-label":Yo,color:s.TV.foregroundDimmer,css:s.l0.m(4)})})]})]}),v&&r?(0,i.tZ)(c.G,{css:s.l0.colWithGap(8),children:v.map((function(e){return(0,i.tZ)(c.G,{children:(0,i.tZ)(Oo,{apexProxy:r.repl.apexProxy,deploymentId:r.id,domain:e})},e.domain)}))}):null,a&&y?(0,i.tZ)(To,{apexProxy:y,deploymentId:r.id,onAdd:function(){return u(!1)},onCancel:function(){return u(!1)}}):null,g?null:(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(b.Z,{}),text:"You must successfully deploy your project before linking a domain"}),!1===a?(0,i.tZ)(c.G,{css:qo.footer,children:(0,i.tZ)(x.zx,{disabled:!g,iconLeft:(0,i.tZ)(_t.Z,{}),text:"Link a domain",onClick:function(){return u(!0)},variant:"outlined",size:"small"})}):null]})}var Yo="Your primary domain cannot be changed",Ko=(0,m.X)({root:[s.l0.colWithGap(4),s.l0.p(8),s.l0.pt(12),s.l0.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[s.l0.rowWithGap(12),s.l0.align.center],typeCol:[s.l0.colWithGap(4),s.l0.flex.growAndShrink(1)],configAndUsageRow:[s.l0.rowWithGap(12),s.l0.align.center,s.l0.flex.growAndShrink(1)],usageRow:[s.l0.rowWithGap(8)]}),Qo=function(e){var t=e.machineConfiguration,n=(0,fi.Ql)({fetchPolicy:"cache-and-network",ssr:!1}).data,r=l.useMemo((function(){return function(e){var t,n,r,i=e.data;if("CurrentUser"!==(null===i||void 0===i||null===(t=i.currentUser)||void 0===t?void 0:t.__typename))return;var o=null===i||void 0===i||null===(n=i.currentUser)||void 0===n?void 0:n.usageBasedBilling;if(!o||"UserUsageBasedBillingSummary"!==o.__typename)return;var a,l=o.currentBillingPeriod;if(!l)return;var c=null!==(a=null===(r=l.totals.find((function(e){return e.billableMetric===w.oD.AutoscaleComputeSeconds})))||void 0===r?void 0:r.usage)&&void 0!==a?a:0,s=(0,Hr.fZ)(c,{resourceUsageType:"ComputeUnits"}),u=new Date(l.billingPeriodEnd).toLocaleString("default",{month:"short",day:"numeric"}),d="".concat(s," used this billing period"),f="Renews ".concat(u," ");return{description:d,renewalInfo:f}}({data:n})}),[n]),o=l.useMemo((function(){if(null!=t)return"Autoscale (".concat(t.label,")")}),[t]);return o&&r?(0,i.BX)(k.Tg,{elevated:!0,css:Ko.root,children:[(0,i.BX)(c.G,{css:Ko.outerRow,children:[(0,i.tZ)(c.G,{css:Ko.typeCol,children:o?(0,i.tZ)(U.xv,{multiline:!1,children:o}):null}),(0,i.tZ)(xe.hU,{alt:"Edit",onClick:e.onEditAutoscaleMachineConfiguration,children:(0,i.tZ)($e.Z,{})})]}),r?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.G,{css:Ko.outerRow,children:[(0,i.tZ)(U.xv,{multiline:!1,children:r.description}),(0,i.tZ)(U.xv,{color:"dimmer",multiline:!1,children:r.renewalInfo})]}),(0,i.tZ)(c.G,{css:Ko.outerRow,children:(0,i.tZ)(le(),{legacyBehavior:!0,passHref:!0,href:"/account#resource-usage",prefetch:!1,children:(0,i.tZ)("a",{role:"button",children:"View account resource limits"})})})]}):null]}):(0,i.tZ)(c.G,{css:[s.l0.justify.center,s.l0.flex.row],children:(0,i.tZ)(we.Z,{})})};function Jo(e){var t,n,r=function(e){var t=(0,D.Z)({},ao,e);return _e.a(lo,t)}({variables:{id:e.deploymentId},ssr:!1,fetchPolicy:"cache-and-network"}),i=r.data,o=r.loading,a=r.error,l="HostingDeployment"===(null===i||void 0===i||null===(t=i.hostingDeployment)||void 0===t?void 0:t.__typename)?i.hostingDeployment:null;return"NotFoundError"===(null===i||void 0===i||null===(n=i.hostingDeployment)||void 0===n?void 0:n.__typename)?{data:null,error:"Deployment not found",loading:!1}:!l&&o?{deployment:null,erorr:null,loading:!0}:a||!l?{deployment:null,error:"Something went wrong",loading:!1}:{deployment:l,error:null,loading:!1}}var ea=function(e){var t=e.deploymentId,n=e.onLifecycleCommand,r=e.onError;return t?(0,i.tZ)(ta,{deploymentId:t,onLifecycleCommand:n,onError:r}):(0,i.tZ)(A,{children:(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(b.Z,{}),text:"Deployment not found"})})};function ta(e){var t=(0,l.useState)(!1),n=t[0],r=t[1];l.useEffect((function(){$({context:S.k.Settings})}),[]);var o=Jo({deploymentId:e.deploymentId});if(n)return(0,i.tZ)(Tr,{onError:e.onError,onConfirm:function(t){e.onLifecycleCommand({command:w.Qc.UpdateMachineConfiguration,machineConfigurationId:t.configurationId,maxMachineInstances:t.maxInstances})},onBack:function(){return r(!1)}});if(o.loading)return(0,i.tZ)(A,{children:(0,i.tZ)(ke,{loading:!0})});if(o.error)return(0,i.tZ)(Ee,{text:o.error});var a,u=o.deployment,d=u.currentBuild,f=null!==(a=null===d||void 0===d?void 0:d.machineConfiguration)&&void 0!==a?a:void 0;return(0,i.tZ)(A,{children:(0,i.BX)(c.G,{css:[s.l0.colWithGap(32),B.Qw.maxWidth],children:[d.provider===w.r4.CloudRun?(0,i.BX)(c.G,{children:[(0,i.tZ)(U.xv,{variant:"subheadDefault",css:[s.l0.pb(8)],children:"Resource usage"}),(0,i.tZ)(c.G,{css:[s.l0.colWithGap(16)],children:(0,i.tZ)(Qo,{machineConfiguration:f,onEditAutoscaleMachineConfiguration:function(){return r(!0)}})})]}):null,(0,i.BX)(c.G,{children:[(0,i.tZ)(U.xv,{variant:"subheadDefault",css:[s.l0.pb(8)],children:"Domains"}),(0,i.tZ)($o,{deployment:u})]}),(0,i.BX)(c.G,{children:[(0,i.tZ)(U.xv,{variant:"subheadDefault",css:[s.l0.pb(12)],children:"Manage deployment"}),(0,i.tZ)(Ur,{onLifecycleCommand:e.onLifecycleCommand})]})]})})}var na=(0,m.X)({root:[{height:"100%"},s.l0.overflow("hidden"),s.l0.position.relative],content:[s.l0.overflow("auto"),s.l0.flex.growAndShrink(1),s.l0.position.relative,s.l0.pb(16)]}),ra=function(e){var t=e.onViewUpdate,n=e.onError,r=e.refetch,o=e.openFile,s=e.initialView,m=e.error,x=function(e){P({type:S.a.SendDeploymentLifecycleCommand,payload:e})},C=(0,h.Z)(),k=(0,f.hn)(),E=(0,f.pn)(),T=(0,f.$y)(),D=!(void 0!==E)&&!("string"===typeof k),I=(0,a.Z)(l.useState((function(){return E?S.k.DeploymentInProgress:D?S.k.Intro:S.k.Deployment})),2),_=I[0],B=I[1],G=(0,f.mF)(),P=function(){var e=(0,u.Z)((function(e){return(0,d.__generator)(this,(function(n){switch(n.label){case 0:switch(t(),e.type){case S.a.SendDeploymentLifecycleCommand:return[3,1];case S.a.ChangeView:return[3,3]}return[3,4];case 1:return[4,G(e.payload)];case 2:return n.sent(),e.payload.command===w.Qc.Destroy?(B(S.k.Intro),r(),[2]):(e.payload.command===w.Qc.UpdateMachineConfiguration&&r(),B(S.k.Deployment),[3,5]);case 3:return B(e.payload.view),[3,5];case 4:return[3,5];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();if(_===S.k.Intro)return(0,i.tZ)(Gi,{initialSelectedProvider:s===S.k.ReservedVMTierSelection?w.r4.Gce:void 0,onLifecycleCommand:x,onError:n,onDeploy:function(){P({type:S.a.ChangeView,payload:{view:S.k.DeploymentInProgress}})},replId:C});var N=T?function(e){var t=[{view:S.k.Deployment,label:"Overview",icon:(0,i.tZ)(g.Z,{})},{view:S.k.Analytics,label:"Analytics",icon:(0,i.tZ)(v.Z,{})},{view:S.k.Settings,label:"Settings",icon:(0,i.tZ)(Z.Z,{})}];return e!==w.r4.Static&&t.splice(1,0,{view:S.k.Logs,label:"Logs",icon:(0,i.tZ)(y.Z,{})}),t}(T.provider):null;return(0,i.BX)(c.G,{css:na.root,children:[N?(0,i.tZ)(R,{onClick:function(e){P({type:S.a.ChangeView,payload:{view:e.view}})},tabs:N,activeView:_===S.k.DeploymentInProgress?S.k.Deployment:_}):null,(0,i.BX)(c.G,{css:na.content,children:[m?(0,i.tZ)(A,{children:(0,i.tZ)(p.E,{colorway:"warning",icon:(0,i.tZ)(b.Z,{}),text:m})}):null,_===S.k.Analytics?(0,i.tZ)(te,{replId:C}):null,_===S.k.Logs?(0,i.tZ)(Hi,{replId:C,deploymentId:k}):null,_===S.k.Settings?(0,i.tZ)(ea,{onError:n,deploymentId:k,onLifecycleCommand:x}):null,_===S.k.Deployment||_===S.k.DeploymentInProgress?(0,i.tZ)(Xr,{view:_,refetch:r,onViewAction:P,onError:n,openFile:o,onLifecycleCommand:x}):null]})]})};function ia(e){var t=e.initialView,n=e.onViewUpdate,r=e.openFile,o=e.tabsNavRef,u=(0,f.m8)(),d=(0,f.kW)(),h=(0,f.ev)(),p=(0,a.Z)(l.useState(null),2),m=p[0],v=p[1];if(d===ie.z.Loading)return(0,i.tZ)(c.G,{css:[s.l0.center,s.l0.my(32)],children:(0,i.tZ)(we.Z,{size:16})});var g=m||h;return(0,i.tZ)(ra,{tabsNavRef:o,initialView:t,onViewUpdate:function(){m&&v(null),n()},onError:v,refetch:u,openFile:r,error:g})}var oa=n(10267),aa=n(17403),la=n(52783);var ca=aa.Type.Object({type:aa.Type.Literal("deployments"),data:aa.Type.Optional(aa.Type.Object({view:aa.Type.Enum(S.k)}))}),sa={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,r=(0,l.useRef)(function(e){if(e&&"object"===typeof e&&"view"in e&&e.view===S.k.ReservedVMTierSelection)return S.k.ReservedVMTierSelection}(t)),a=(0,l.useCallback)((function(e){return n({operation:"open",secondary:!0,pane:{type:(0,o.Dp)(e),data:e}})}),[n]),c=(0,l.useState)(null),s=c[0],u=c[1];return(0,oa.L5)((function(){if(s)return{type:"deployments",getTabs:s.getTabs,setTab:s.setTab}}),[s]),(0,i.tZ)(ia,{tabsNavRef:u,initialView:r.current,onViewUpdate:function(){r.current&&(r.current=void 0,n({operation:"replace",pane:{type:"deployments"}}))},openFile:a})},Icon:function(e){var t=e.size;return(0,i.tZ)(g.Z,{size:t})},getTitle:function(){return"Deployments"},decode:function(e){return la.B4.Decode(ca,e)}}},44742:function(e,t,n){n.d(t,{J:function(){return c}});var r=n(17403),i=n(52783),o=n(30504),a=r.Type.Union(Object.values(o.TT).map((function(e){return r.Type.Literal(e)}))),l=r.Type.Object({type:r.Type.Literal("docs"),data:r.Type.Optional(r.Type.Object({url:r.Type.Optional(r.Type.Union([a,r.Type.Null()]))}))}),c=function(e){return i.B4.Decode(l,e)}},3973:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(17403),i=n(52783),o=r.Type.Object({type:r.Type.Literal("preferences")}),a=function(e){return i.B4.Decode(o,e)}},38060:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(74985),i=(n(50959),n(26473)),o=n(79824),a=n(97846),l={Content:function(){return(0,r.tZ)(i.G,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"},decode:function(){return{type:"commands",data:{autoFocus:!1}}}}},5478:function(e,t,n){n.d(t,{J:function(){return v},R:function(){return g}});var r=n(57135),i=n(96583),o=n(74985),a=n(28435),l=n(40770),c=n(61335),s=n(96834),u=n(30311),d=n(25404),f=n(17403),h=n(52783),p=n(50959),m=f.Type.Object({type:f.Type.Literal("webview"),data:f.Type.Optional(f.Type.Object({port:f.Type.Optional(f.Type.Number())}))}),v=function(e){return h.B4.Decode(m,e)},g={Content:function(e){var t=e.options.performPaneOperation,n=(0,d.Z)().showError,l=(0,a.Z)(),f=l.container,h=l.runner,m=l.fs,v=(0,p.useState)((function(){return function(){}})),g=v[0],y=v[1];return(0,s.Z)({container:f,runner:h,refreshWebView:g}),(0,u.Z)({runner:h,refreshWebView:g}),(0,o.tZ)(c.Z,{runner:h,openPane:function(e){t({operation:"open",pane:e})},openDotReplit:(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,m.stat(".replit")];case 1:return e.sent().exists?(t({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]):(n("Could not find .replit configuration file."),[2])}}))})),setRefreshCb:y})},Icon:function(e){var t=e.size;return(0,o.tZ)(l.Z,{size:t})},getTitle:function(){return"Webview"},decode:v}},83777:function(e,t,n){n.d(t,{U:function(){return tZ}});var r=n(74985),i=n(57389),o=n(2272),a=n(50959),l=n(34495),c=n(91148),s=n(14053),u=n(25457),d=n(28435),f=n(92361),h=n(30826),p=n.n(h),m=n(69118),v=n(88965),g=n(26473),y=n(53312),Z=n(61025),b=n(90843),w=n(45246),x=n(10267),C=n(84761),k=n(4561),S=(0,a.memo)(m.Z);var E=(0,Z.X)({root:[v.l0.colWithGap(8),v.l0.height("100%"),v.l0.width("100%"),v.l0.overflow("auto"),v.l0.zIndex(2),v.l0.align.center,v.l0.py(16),v.l0.px(16),v.l0.borderRadius(8),(0,i.Z)({margin:"0 auto"},"@media only screen and (min-width: ".concat(c.j.tabletMin,"px)"),v.l0.px(32))],header:[v.l0.rowWithGap(4),v.l0.height(30),v.l0.width("100%"),v.l0.align.center],markdownContainer:[v.l0.width("100%"),{"& .rendered-markdown":[v.l0.flex.column,v.l0.center],"& .rendered-markdown > *":[v.l0.maxWidth(840),v.l0.width("100%")],"& .rendered-markdown > table":v.l0.maxWidth("100%")}]});function T(e){var t=(0,d.Z)().fs,n=(0,o.Z)(function(){var e=(0,a.useRef)(!1),t=(0,a.useRef)(null);return[(0,f.Z)((function(){e.current=!0,t.current&&clearTimeout(t.current),t.current=setTimeout((function(){e.current=!1}),150)}),{type:"throttle",wait:37.5}),e]}(),2),i=n[0],c=n[1],h=(0,a.useRef)(null),m=(0,b.T)(),v=e.path,Z=e.performPaneOperation;(0,x.L5)((function(){return{actions:[{label:"Open in Editor",icon:(0,r.tZ)(C.Z,{}),type:"action",run:function(){Z({operation:"replace",pane:{type:"codeEditor",data:{path:v}}})}}]}}),[Z,v]);var T=e.isHidden,R=(0,w.p5)();(0,a.useEffect)((function(){if(!T){var e=p()((function(e){(0,l.Z)(e,{behavior:m?"auto":"smooth",scrollMode:"if-needed"})}),100),t=p()((function(t){if(t&&!c.current){var n=h.current?function(e,t){var n=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null===n||void 0===n?void 0:n.length))return null;var r=Array.from(n).reverse(),i=t.line,a=t.column,l=!0,c=!1,s=void 0;try{for(var u,d=r[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=f.dataset.sourcepos;if(!h)throw new Error("Expected data source pos on selected element");var p=(0,o.Z)(h.split("-"),2),m=p[0],v=p[1],g=(0,o.Z)(m.split(":").map(Number),2),y=g[0],Z=g[1],b=(0,o.Z)(v.split(":").map(Number),2),w=b[0],x=b[1];if(i>=y&&a>=Z&&(i<w||i===w&&a<=x))return f}}catch(C){c=!0,s=C}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}(h.current,t.position):null;n&&e(n)}}),200),n=R.subscribe(t);return function(){t.cancel(),e.cancel(),n()}}}),[R,T,m]);var D=(0,a.useState)(null),I=D[0],_=D[1];return(0,a.useEffect)((function(){return _(null),t.watchTextFile(v,{onReady:function(e){var t=e.initialContent;_(t.toString())},onChange:function(e){var t=e.latestContent;_(t)},onMoveOrDelete:function(e){e.eventType===k.kS.Delete&&Z({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})}),[v,t,Z]),null===I?(0,r.tZ)(u.Z,{preventHighlightBorder:!0}):(0,r.BX)(g.G,{css:E.root,innerRef:i,children:[(0,r.BX)(g.G,{css:E.header,children:[(0,r.tZ)(s.Z,{}),(0,r.BX)(y.xv,{color:"dimmer",multiline:!1,children:["Preview of ",(0,r.tZ)("a",{href:"#".concat(v),children:v})]})]}),(0,r.tZ)(g.G,{innerRef:h,css:E.markdownContainer,children:(0,r.tZ)(S,{path:v,source:I,fs:t,sourcePos:!0})})]})}var R=n(61535),D=n(87978),I=n(17403),_=n(52783),B=I.Type.Object({type:I.Type.Literal("markdown"),data:I.Type.Object({path:I.Type.String({minLength:1})})}),G={Content:function(e){var t=e.pane,n=e.options;return(0,r.tZ)(T,{path:t.data.path,isHidden:Boolean(n.isHidden),performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.size;return(0,r.tZ)(R.Z,{fill:"currentColor",size:t})},getTitle:function(e){return e.data.path?(0,D.UO)(e.data.path):"Markdown"},decode:function(e){return _.B4.Decode(B,e)}},P=n(54209),A=n(24531),N=n(73437),U=n(11447),L=n(61600),O=n(55102),X=n(46130),M=n(34485),F=I.Type.Object({type:I.Type.Literal("runnerOutput")}),W={Content:function(e){var t=e.options;return"outputs"===(0,d.Z)().runner.mode?(0,r.tZ)(M.y,{isActive:t.isActive,performPaneOperation:t.performPaneOperation}):(0,r.tZ)(H,{isActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var t=e.size;return(0,r.tZ)(U.Z,{size:t})},getTitle:function(){return"Console"},decode:function(e){return _.B4.Decode(F,e)}};function H(e){var t=e.isActive,n=e.performPaneOperation,i=(0,d.Z)(),o=i.runner,l=i.packager,c=i.container,s=i.debuggest,u=i.fs,f=a.useRef(null),h=(0,L.Z)(s.mainClient),p=(0,O.K)();a.useEffect((function(){if(h)return h.onOutput((function(e){f.current&&f.current.write(e)}))}),[h]);var m=(0,X.T3)();a.useEffect((function(){if(!m)return o.onLocalRun((function(){var e,n;(null===(e=f.current)||void 0===e||e.clear(),t)&&(null===(n=f.current)||void 0===n||n.focus())}))}),[m,t,o]);var v=(0,x.Wk)();(0,x.L5)((function(){return{type:"runnerOutput",clear:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.clear()},write:function(e){var t;return null===(t=f.current)||void 0===t?void 0:t.write(e)}}}),[f]);var g=a.useCallback((function(e){n({operation:"open",secondary:!0,pane:{type:(0,A.Dp)(e),data:e}})}),[n]);return"html"===o.mode?null:(0,r.tZ)(N.Z,{tracker:p,runner:o,debugClient:h,packager:l,ref:f,onBootStatus:c.client().onBootStatus,openPane:function(e){n({operation:"open",pane:e})},focusOnLoad:t&&!m,focusRef:v,openFile:g,listFiles:u.listFiles})}var V=n(72015),z=n(76092),j=I.Type.Object({type:I.Type.Literal("envEditor")}),q={Content:function(){return(0,r.tZ)($,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(z.Z,{size:t})},getTitle:function(){return"Secrets"},decode:function(e){return _.B4.Decode(j,e)}};function $(){var e=(0,d.Z)().fs,t=(0,d.Z)().runner;return(0,r.tZ)(V.ZP,{readRawEnv:function(){return e.readFile(".env")},writeRawEnv:function(t){return e.writeFile(".env",t)},getRunState:t.getRunState})}var Y,K,Q=n(29110),J=n(54314),ee=n(9970),te=n(50769),ne=n(16296),re=n(77205),ie=n(73798),oe=n(27773),ae=n(61623),le=n(19833),ce=n(90234),se=n(71999),ue=n(28999);(0,ce.cn)({replId:"",packageManagers:{}});function de(){return(0,a.useState)((function(){return(0,ce.MT)()}))[0]}!function(e){e.Initializing="Initializing",e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle"}(Y||(Y={})),function(e){e.Install="Install",e.Uninstall="Uninstall"}(K||(K={}));var fe=(0,a.createContext)(null);function he(){var e=(0,a.useContext)(fe);if(!e)throw new Error("Expected store in context");return e}var pe=function(e){return(0,se.b9)(e,{store:he()})};function me(e){return(0,se.Dv)(e,{store:he()})}var ve=(0,ce.cn)(null);function ge(){return me(ve)}function ye(){return e=ve,(0,ue.lV)((0,a.useCallback)((function(t){return t(e)}),[e]),{store:he()});var e}(0,ce.cn)(null);var Ze=n(72006),be=n(4405),we=n(57135),xe=n(96583),Ce=n(59347);function ke(e){var t=ge(),n=(0,d.Z)(),r=(0,o.Z)(a.useState(null),2),i=r[0],l=r[1];return a.useEffect((function(){if((null===t||void 0===t?void 0:t.id)&&e.name){var r=(0,Ce.C)(t.id),i=!1,o=function(){var o=(0,we.Z)((function(){var o;return(0,xe.__generator)(this,(function(a){switch(a.label){case 0:return[4,r.getPackageInfo({id:t.id,name:e.name,services:n})];case 1:return o=a.sent(),i?[2]:(l(null!==o&&void 0!==o?o:null),[2])}}))}));return function(){return o.apply(this,arguments)}}();return o(),function(){i=!0}}}),[null===t||void 0===t?void 0:t.id,e.name]),i}var Se=n(95141),Ee=n(79824),Te=n(94979),Re=n(55418),De=n(37268),Ie=n(41331),_e=n.n(Ie),Be=/(.+)(?:\S+)?<([^>,]+)[>,]/,Ge=g.K.span;function Pe(e){var t=e.author,n=Be.exec(t);if(n){var i=n[1],o=n[2];return(0,r.BX)(r.HY,{children:["By ",i,(0,r.BX)("a",{href:"mailto:".concat(o),children:["<",o,">"]})]})}return(0,r.BX)(Ge,{children:["By ",t]})}var Ae=n(35742),Ne=n(9694),Ue=n(2580);function Le(e){var t=e.isInstalled,n=e.isInQueue;return e.isCurrentAction?(0,r.tZ)(oe.Z,{}):n?(0,r.tZ)(Ae.Z,{}):t?(0,r.tZ)(Ue.Z,{}):(0,r.tZ)(Ne.Z,{})}var Oe=g.K.span,Xe=(0,Z.X)({metadata:[v.l0.colWithGap(2)],metadataSkeleton:[v.l0.colWithGap(8),v.l0.pt(4)],metadataSkeletonVersion:[Te.p.foregroundPulse(),v.l0.height(16),v.l0.maxWidth(64),v.l0.borderRadius(4)],metadataSkeletonDescription:[Te.p.foregroundPulse(),v.l0.height(16),v.l0.borderRadius(4),v.l0.maxWidth(425)],root:[v.l0.borderRadius(8),v.l0.p(8)],header:[v.l0.flex.row,v.l0.justify.spaceBetween],headerTitle:[v.l0.display.flex,v.l0.rowWithGap(8),v.l0.flex.growAndShrink(1)],headerTitleText:[v.l0.display.inline,v.l0.flex.growAndShrink(1),v.l0.overflow("hidden"),v.l0.truncate],headerTitlePills:[v.l0.display.inlineFlex,v.l0.rowWithGap(4),v.l0.flex.shrink(0)],headerButton:[],content:[v.l0.colWithGap(4)],error:[v.l0.mt(4)],actions:[v.l0.rowWithGap(8),v.l0.mt(8)],consoleButton:[v.l0.width("calc(50% - ".concat(v.TV.space8,")"))],cancelButton:[v.l0.width("calc(50% - ".concat(v.TV.space8,")"))],actionButton:[v.l0.flex.grow(1),v.l0.flex.shrink(0)]});function Me(e){var t=e.title,n=e.content,i=e.isExpanded;return(0,r.BX)(g.G,{css:Xe.metadata,children:[t?(0,r.tZ)(y.xv,{color:"dimmer",children:t}):null,n?(0,r.tZ)(y.xv,{maxLines:i?void 0:1,children:n}):null]})}function Fe(e){var t=e.title,n=void 0===t||t,i=e.content,o=void 0===i||i;return(0,r.BX)(g.G,{css:Xe.metadataSkeleton,children:[n?(0,r.tZ)(g.G,{css:Xe.metadataSkeletonVersion}):null,o?(0,r.tZ)(g.G,{css:Xe.metadataSkeletonDescription}):null]})}function We(e){var t,n=e.name,i=e.pkg,o=e.isMetadataLoading,l=void 0!==o&&o,c=e.openConsole,s=e.pills,u=ge(),d=(0,le.te)(null===u||void 0===u?void 0:u.id),f=(0,le.pN)(null===u||void 0===u?void 0:u.id),h=(0,le.B2)(),p=(0,le.cW)(),m=(0,le.wY)(),v=(0,a.useMemo)((function(){if(!i.license)return"Unknown License";var e=_e()(i.license,{upgrade:!1});return e||(i.license.length<40?i.license:"Unknown License")}),[i.license]),Z=(0,a.useMemo)((function(){return Boolean(null!==h&&h.pkgs.find((function(e){return e.name===i.name})))}),[h]),b=(0,a.useMemo)((function(){return p.find((function(e){return e.pkgs.find((function(e){return e.name===i.name}))}))}),[p]),w=Boolean(b),x=(0,a.useMemo)((function(){return Boolean(d.find((function(e){return e.name===i.name})))}),[d]),C=Boolean(i.homepageURL||i.license||i.author),k=(0,a.useMemo)((function(){return Boolean(f.find((function(e){return e.name===i.name})))}),[f]),S=(0,a.useState)(!1),E=S[0],T=S[1],R=(0,le.jh)(),D=(0,le.Wx)(),I=(0,le.zi)();return(0,r.BX)(De.Tg,{css:Xe.root,elevated:!0,children:[(0,r.BX)(g.G,{css:Xe.header,children:[(0,r.BX)(y.h4,{css:Xe.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,r.BX)(Oe,{css:Xe.headerTitleText,children:[null!==n&&void 0!==n?n:i.name,i.version?(0,r.BX)(y.xv,{color:"dimmer",children:["@",i.version]}):null]}),s?(0,r.tZ)(g.G,{css:Xe.headerTitlePills,children:s}):null]}),C?(0,r.tZ)(ne.hU,{css:Xe.headerButton,alt:"Show more info",tooltipHidden:!0,onClick:function(){return T((function(e){return!e}))},children:(0,r.tZ)(re.Z,{rotate:E?90:0})}):null]}),(0,r.tZ)(g.G,{css:Xe.content,children:l?(0,r.tZ)(Fe,{title:!1}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Me,{content:null!==(t=i.description)&&void 0!==t?t:"This package has no description.",isExpanded:E}),i.homepageURL&&E?(0,r.tZ)(Me,{content:(0,r.tZ)("a",{href:i.homepageURL,rel:"noreferrer noopener",target:"_blank",children:i.homepageURL}),isExpanded:E}):null,v&&E?(0,r.tZ)(Me,{content:v,isExpanded:E}):null,i.author&&E?(0,r.tZ)(Me,{content:(0,r.tZ)(Pe,{author:i.author}),isExpanded:E}):null]})}),k?(0,r.tZ)(Re.E,{css:Xe.error,colorway:"negative",icon:(0,r.tZ)(Ee.Z,{}),text:"Couldn't ".concat(x?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,r.tZ)(g.G,{css:Xe.actions,children:k?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Se.zx,{css:Xe.consoleButton,text:"Console",onClick:function(){c()},disabled:Z||w,colorway:"primary",iconLeft:(0,r.tZ)(U.Z,{})}),(0,r.tZ)(Se.zx,{css:Xe.actionButton,text:"Try Again",onClick:function(){(null===u||void 0===u?void 0:u.id)&&(m(u.id,[i]),x?D({id:u.id,pkg:i}):R({id:u.id,pkg:i}))},loading:Z||w,colorway:x?"red":void 0,variant:x?"outlined":void 0,iconLeft:(0,r.tZ)(Le,{isInstalled:x,isInQueue:w,isCurrentAction:Z})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Se.zx,{css:Xe.actionButton,text:Z?(null===h||void 0===h?void 0:h.kind)===le.TH.Install?"Installing":"Removing":w?(null===b||void 0===b?void 0:b.kind)===le.TH.Install?"Waiting to install":"Waiting to remove":x?"Remove":"Install",onClick:function(){(null===u||void 0===u?void 0:u.id)&&(x?D({id:u.id,pkg:i}):R({id:u.id,pkg:i}))},loading:Z||w,colorway:x?"red":void 0,variant:x?"outlined":void 0,iconLeft:(0,r.tZ)(Le,{isInstalled:x,isInQueue:w,isCurrentAction:Z})}),w?(0,r.tZ)(Se.zx,{css:Xe.cancelButton,text:"Cancel",onClick:function(){i.name&&I(i.name)},disabled:Z,loading:Z}):null]})})]})}function He(e){var t,n,i=e.pkg,o=e.openConsole,a=ke(i),l=a?(0,be.Z)((0,Ze.Z)({},a),{version:null!==(t=i.spec)&&void 0!==t?t:a.version}):i;return(0,r.tZ)(We,{name:null!==(n=null===a||void 0===a?void 0:a.prettyName)&&void 0!==n?n:void 0,pkg:l,isMetadataLoading:null===a,openConsole:o})}var Ve=(0,Z.X)({root:[v.l0.colWithGap(8),{"@container (min-width: 600px)":[v.l0.colWithGap(0),v.l0.align.start,{display:"grid",gridTemplate:"auto / 1fr 1fr",gap:v.TV.space8}],"@container (min-width: 1200px)":[{display:"grid",gridTemplate:"auto / 1fr 1fr 1fr",gap:v.TV.space8}]}]});function ze(e){return(0,r.tZ)(g.G,(0,be.Z)((0,Ze.Z)({},e),{css:Ve.root}))}var je=n(95134);function qe(e){var t=e.name,n=e.openConsole,i=ke({name:t});return(0,r.tZ)(We,{pkg:null!==i&&void 0!==i?i:{name:t},isMetadataLoading:null===i,openConsole:n,pills:[(0,r.tZ)(je.D,{text:"Suggested",colorway:"primary"},"suggested")]})}var $e=(0,Z.X)({packages:[v.l0.pt(8)],separator:[v.l0.backgroundColor.backgroundHigher,v.l0.height(1),v.l0.borderRadius(1),v.l0.mt(6),{border:"none",marginLeft:"auto",marginRight:"auto",width:"95%"}]});function Ye(e){var t=e.openConsole,n=ge(),i=(0,le.te)(null===n||void 0===n?void 0:n.id),o=(0,le.B2)(),a=(0,le.cW)(),l=[];switch(null===n||void 0===n?void 0:n.language){default:return null;case"nodejs":l=["express","discord.js","axios","moment","node-fetch","chalk"];break;case"python3":l=["replit","requests","pandas","discord","matplotlib","flask"]}var c=l.filter((function(e){return!function(e){if(i.find((function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e})))return!0;if(o&&o.kind===le.TH.Install&&o.pkgs.find((function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e})))return!0;var t=!0,n=!1,r=void 0;try{for(var l,c=a[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var s=l.value;if(s.kind===le.TH.Install&&s.pkgs.find((function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e})))return!0}}catch(u){n=!0,r=u}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}return!1}(e)})).map((function(e){return(0,r.tZ)(qe,{name:e,openConsole:t},e)}));return c.length>0?(0,r.BX)(r.HY,{children:[(0,r.tZ)("hr",{css:$e.separator}),(0,r.tZ)(ze,{css:$e.packages,children:c})]}):null}var Ke=(0,Z.X)({root:[v.l0.maxWidth(800),v.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[v.l0.maxWidth(1400)]}],header:[v.l0.flex.row,v.l0.justify.spaceBetween,v.l0.py(4)],headerLeft:[v.l0.rowWithGap(4),v.l0.align.center],headerLoadingIcon:[v.l0.px(4)],headerRight:[v.l0.rowWithGap(4)],headerTitle:[{textTransform:"capitalize"}],packages:[v.l0.pt(8)],empty:[v.l0.pt(8),v.l0.colWithGap(8),v.l0.width("100%")],packagesWrapper:[v.l0.colWithGap(8),v.l0.width("100%")]});function Qe(e){var t=e.openFile,n=e.openConsole,i=ge(),o=(0,le.te)(null===i||void 0===i?void 0:i.id),l=(0,le.$z)(null===i||void 0===i?void 0:i.id),c=(0,le.cW)(),s=(0,le.B2)(),u=(0,a.useState)(!0),d=u[0],f=u[1];if(null===i)return null;if(!l||l===le.C0.Uninitialized||l===le.C0.Initializing)return(0,r.tZ)(g.G,{css:Ke.root,children:(0,r.BX)(g.G,{css:Ke.header,children:[(0,r.BX)(g.G,{css:Ke.headerLeft,children:[(0,r.tZ)(ae.u,{tooltip:"Loading",children:(0,r.tZ)(g.G,{css:Ke.headerLoadingIcon,children:(0,r.tZ)(oe.Z,{})})}),(0,r.BX)(y.h4,{css:Ke.headerTitle,variant:"subheadDefault",level:2,children:[i.language," Packages"]})]}),(0,r.tZ)(g.G,{css:Ke.headerRight,children:i.packagerFiles.length>0?(0,r.tZ)(ne.hU,{alt:"Open ".concat(i.packagerFiles[0]),onClick:function(){i&&t(i.packagerFiles[0])},children:(0,r.tZ)(ie.Z,{})}):null})]})});var h=s&&s.id===i.id&&s.kind===le.TH.Install?s.pkgs:[],p=c.flatMap((function(e){return e.id===i.id&&e.kind===le.TH.Install?e.pkgs:[]})),m=(0,ee.Z)(h).concat((0,ee.Z)(p),(0,ee.Z)(o));return(0,r.BX)(g.G,{css:Ke.root,children:[(0,r.BX)(g.G,{css:Ke.header,children:[(0,r.BX)(g.G,{css:Ke.headerLeft,children:[m.length>0?(0,r.tZ)(ne.hU,{alt:"Show packages",tooltipHidden:!0,onClick:function(){return f((function(e){return!e}))},children:(0,r.tZ)(re.Z,{rotate:d?90:0})}):null,(0,r.BX)(y.h4,{css:Ke.headerTitle,variant:"subheadDefault",level:2,children:[i.language," Packages"]})]}),(0,r.tZ)(g.G,{css:Ke.headerRight,children:0===m.length?(0,r.tZ)(y.h4,{level:3,children:"No Packages Installed."}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.h4,{level:3,children:["Installed ",m.length," ",(0,te.Z)("package",m.length)]}),i.packagerFiles.length>0?(0,r.tZ)(ne.hU,{alt:"Open ".concat(i.packagerFiles[0]),onClick:function(){i&&t(i.packagerFiles[0])},children:(0,r.tZ)(ie.Z,{})}):null]})})]}),d?(0,r.BX)(g.G,{css:0===m.length?Ke.empty:Ke.packagesWrapper,children:[0===m.length?(0,r.BX)(y.xv,{children:["You don't have any packages installed. Try searching for a package to install, or"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"learn more about packages here"}),"."]}):null,m.length>0?(0,r.tZ)(r.HY,{children:(0,r.tZ)(ze,{css:Ke.packages,children:m.sort((function(e,t){return(null===e||void 0===e?void 0:e.name)?(null===t||void 0===t?void 0:t.name)?e.name.localeCompare(t.name):-1:1})).map((function(e){return(0,r.tZ)(He,{pkg:e,openConsole:n},e.name)}))})}):null,(0,r.tZ)(Ye,{openConsole:n})]}):null]})}var Je=n(6210),et=n(90393);function tt(e){var t=e.onResults,n=e.onLoading,i=e.className,o=ge(),l=(0,a.useState)(""),c=l[0],s=l[1],u=(0,a.useRef)(0),f=function(){u.current++,null===t||void 0===t||t(null),null===n||void 0===n||n(!1)},h=function(){var e=(0,d.Z)(),t=ye(),n=(0,a.useCallback)((function(n){var r=t();return(null===r||void 0===r?void 0:r.id)?(0,Ce.C)(r.id).search({id:r.id,query:n,services:e}):[]}),[]);return n}();return(0,Je.Z)((function(){if(""!==c.trim()){var e=++u.current,r=function(){var r=(0,we.Z)((function(){var r;return(0,xe.__generator)(this,(function(i){switch(i.label){case 0:return null===n||void 0===n||n(!0),[4,h(c)];case 1:return r=i.sent(),e!==u.current?[2]:(null===t||void 0===t||t(null!==r&&void 0!==r?r:[]),null===n||void 0===n||n(!1),[2])}}))}));return function(){return r.apply(this,arguments)}}();r()}}),[c],500),(0,r.tZ)(g.G,{className:i,children:(0,r.tZ)(et.E,{value:c,onChange:function(e){""===e.target.value.trim()&&f(),s(e.target.value)},onClear:function(){s(""),f()},placeholder:o?"Search ".concat(o.language," packages"):void 0})})}var nt=(0,Z.X)({root:[v.l0.maxWidth(800),v.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[v.l0.maxWidth(1400)]}],skeleton:[v.l0.borderRadius(8),v.l0.p(8),Te.p.backgroundPulse(),v.l0.height(128)]});function rt(){return(0,r.tZ)(g.G,{css:nt.root,children:(0,r.tZ)(ze,{children:Array.from({length:3},(function(e,t){return(0,r.tZ)(De.Tg,{css:nt.skeleton,elevated:!0},"SearchLoading-".concat(t))}))})})}function it(e){var t,n=e.pkg,i=e.openConsole,o=ge(),a=ke(n),l=a?(0,be.Z)((0,Ze.Z)({},a),{version:null!==(t=n.spec)&&void 0!==t?t:a.version}):n,c="nix"===(null===o||void 0===o?void 0:o.id)?null===a||void 0===a?void 0:a.prettyName:void 0;return(0,r.tZ)(We,{name:c,pkg:l,isMetadataLoading:null===a,openConsole:i})}function ot(e){var t=e.pkg,n=e.openConsole;return(0,r.tZ)(We,{pkg:t,openConsole:n})}var at=(0,Z.X)({root:[v.l0.colWithGap(8),v.l0.maxWidth(800),v.l0.width("100%"),{marginLeft:"auto",marginRight:"auto","@container (min-width: 1200px)":[v.l0.maxWidth(1400)]}],results:[v.l0.colWithGap(8)],empty:[v.l0.flex.row,v.l0.justify.center]});function lt(e){var t=e.results,n=e.openConsole,i=ge(),o="nix"===(null===i||void 0===i?void 0:i.id)?it:ot;return(0,r.tZ)(g.G,{css:at.root,children:(0,r.tZ)(g.G,{css:at.results,children:0===t.length?(0,r.tZ)(y.xv,{color:"dimmer",css:at.empty,children:"No Packages Found"}):(0,r.tZ)(ze,{children:t.map((function(e){return(0,r.tZ)(o,{pkg:e,openConsole:n},e.name)}))})})})}var ct=n(60168),st=n(68912),ut=(0,Z.X)({root:[v.l0.p(8),v.l0.borderRadius(8),v.l0.colWithGap(16)],header:[v.l0.flex.row,v.l0.align.center,v.l0.justify.spaceBetween],headerLeft:[v.l0.rowWithGap(4),v.l0.align.center],headerRight:[],content:[]});function dt(e){var t=e.title,n=e.onClose,i=e.children,o=(0,a.useState)(!0),l=o[0],c=o[1];return(0,r.BX)(De.Tg,{elevated:!0,css:ut.root,children:[(0,r.BX)(g.G,{css:ut.header,children:[(0,r.BX)(g.G,{css:ut.headerLeft,children:[(0,r.tZ)(y.h4,{level:2,variant:"subheadDefault",children:t}),(0,r.tZ)(ne.hU,{alt:l?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return c((function(e){return!e}))},children:(0,r.tZ)(re.Z,{rotate:l?90:0})})]}),(0,r.tZ)(g.G,{css:ut.headerRight,children:(0,r.tZ)(ne.hU,{alt:"Dismiss tip",tooltipHidden:!0,onClick:n,children:(0,r.tZ)(st.Z,{})})})]}),l?(0,r.tZ)(g.G,{css:ut.content,children:i}):null]})}var ft=(0,Z.X)({root:[v.l0.colWithGap(8),v.l0.pb(24)]});function ht(){var e=(0,ct.Z)("packager","show_packager_about_tooltip"),t=(0,ct.Z)("packager","show_packager_import_tooltip");return(0,a.useEffect)((function(){e.register()}),[e]),(0,a.useEffect)((function(){t.register()}),[t]),e.shouldDisplay||t.shouldDisplay?(0,r.BX)(g.G,{css:ft.root,children:[e.shouldDisplay?(0,r.BX)(dt,{title:"What are packages?",onClose:e.dismiss,children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"Learn more about packages"})]}):null,t.shouldDisplay?(0,r.tZ)(dt,{title:"Tip\u2014Auto Import",onClose:t.dismiss,children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null]}):null}var pt=n(61439),mt=n(85919);function vt(e){var t=e.children,n=e.config,i=pe(ve);return(0,a.useEffect)((function(){(null===n||void 0===n?void 0:n.id)&&i(n)}),[n]),(0,r.tZ)(r.HY,{children:t})}function gt(e){var t=e.children,n=e.config,i=de();return(0,r.tZ)(fe.Provider,{value:i,children:n?(0,r.tZ)(vt,{config:n,children:t}):t})}var yt=(0,Z.X)({root:[v.l0.pt(16),v.l0.p(8),{containerType:"inline-size"}],center:[v.l0.width("100%"),v.l0.maxWidth(600),v.l0.colWithGap(4),{marginLeft:"auto",marginRight:"auto","@container (min-width: 400px)":[v.l0.maxWidth(800)],"@container (min-width: 1200px)":[v.l0.maxWidth(1400)]}],title:[],content:[v.l0.pt(8),v.l0.colWithGap(16)],search:[v.l0.rowWithGap(8),v.l0.width("100%")],searchInput:[v.l0.flex.grow(1)],configSelect:[],packages:[v.l0.colWithGap(16)]});function Zt(e){var t=e.openFile,n=e.openConsole,i=(0,pt.I)(),l=(0,mt.Z)((function(){return i.filter((function(e){return"nix"!==e.id}))}),[i]),c=(0,o.Z)(function(){var e=(0,pt.I)(),t=(0,mt.Z)((function(){return e.filter((function(e){return"nix"!==e.id}))}),[e]),n=(0,a.useState)(null),r=n[0],i=n[1];return(0,a.useEffect)((function(){t.length>0&&(null==r||!t.find((function(e){return e&&e.id===r.id})))&&i(t[0])}),[r,t]),[r,i]}(),2),s=c[0],u=c[1],d=(0,a.useState)(null),f=d[0],h=d[1],p=(0,a.useState)(!1),m=p[0],v=p[1],Z=null;return Z=null!==f?(0,r.tZ)(lt,{results:f,openConsole:n}):m?(0,r.tZ)(rt,{}):(0,r.tZ)(r.HY,{children:l.map((function(e){return e.id===(null===s||void 0===s?void 0:s.id)?(0,r.tZ)(Qe,{openFile:t,openConsole:n},e.id):(0,r.tZ)(gt,{config:e,children:(0,r.tZ)(Qe,{openFile:t,openConsole:n})},e.id)}))}),(0,r.tZ)(g.G,{css:yt.root,children:(0,r.BX)(g.G,{css:yt.center,children:[(0,r.tZ)(ht,{}),(0,r.tZ)(y.h4,{css:yt.title,level:2,variant:"subheadBig",children:"Packages"}),(0,r.tZ)(g.G,{css:yt.content,children:(0,r.BX)(gt,{config:s,children:[(0,r.BX)(g.G,{css:yt.search,children:[null===s||s.packageSearch?(0,r.tZ)(tt,{css:yt.searchInput,onResults:h,onLoading:v}):(0,r.tZ)(g.G,{css:yt.searchInput}),l.length>1&&(0,r.tZ)(J.P,{css:yt.configSelect,items:l,selectedItem:s,onChange:function(e){return u(e)},"aria-label":"Select packager configuration"})]}),(0,r.tZ)(g.G,{css:yt.packages,children:Z})]})})]})})}var bt=n(35429),wt=I.Type.Object({type:I.Type.Literal("packager")}),xt={Content:function(e){var t=e.options;return(0,r.tZ)(Zt,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,bt.$E)(e),secondary:!0})},openConsole:function(){t.performPaneOperation({operation:"open",pane:{type:"runnerOutput"},secondary:!0})}})},Icon:function(e){var t=e.size;return(0,r.tZ)(Q.Z,{size:t})},getTitle:function(){return"Packages"},decode:function(e){return _.B4.Decode(wt,e)}},Ct=n(98348),kt=(0,Z.X)({root:[v.l0.pt(16),v.l0.p(8)],center:[v.l0.width("100%"),v.l0.maxWidth(600),v.l0.colWithGap(4),{marginLeft:"auto",marginRight:"auto","@container (min-width: 400px)":[v.l0.maxWidth(800)],"@container (min-width: 1200px)":[v.l0.maxWidth(1400)]}],title:[],content:[v.l0.pt(8),v.l0.colWithGap(16)],search:[v.l0.rowWithGap(8),v.l0.width("100%")],searchInput:[v.l0.flex.grow(1)],packages:[v.l0.colWithGap(16)]}),St=function(){};function Et(e){var t=e.openConsole,n=(0,pt.I)(),i=(0,mt.Z)((function(){return n.find((function(e){return"nix"===e.id}))}),[n]),o=(0,a.useState)(null),l=o[0],c=o[1],s=(0,a.useState)(!1),u=s[0],d=s[1],f=null;return f=null!==l?(0,r.tZ)(lt,{results:l,openConsole:t}):u?(0,r.tZ)(rt,{}):(null===i||void 0===i?void 0:i.id)?(0,r.tZ)(Qe,{openFile:St,openConsole:t},i.id):null,(0,r.tZ)(gt,{config:i,children:(0,r.tZ)(g.G,{css:kt.root,children:(0,r.BX)(g.G,{css:kt.center,children:[(0,r.tZ)(y.h4,{css:kt.title,level:2,variant:"subheadBig",children:"System Dependencies"}),(0,r.BX)(g.G,{css:kt.content,children:[(null===i||void 0===i?void 0:i.packageSearch)?(0,r.tZ)(g.G,{css:kt.search,children:(0,r.tZ)(tt,{css:kt.searchInput,onResults:c,onLoading:d})}):null,(0,r.tZ)(g.G,{css:kt.packages,children:f})]})]})})})}var Tt=I.Type.Object({type:I.Type.Literal("systemDependencies")}),Rt={Content:function(e){var t=e.options;return(0,r.tZ)(Et,{openConsole:function(){t.performPaneOperation({operation:"open",pane:{type:"runnerOutput"},secondary:!0})}})},Icon:function(e){var t=e.size;return(0,r.tZ)(Ct.Z,{size:t})},getTitle:function(){return"System Dependencies"},decode:function(e){return _.B4.Decode(Tt,e)}},Dt=n(97356),It=n(55749),_t=n(20685),Bt=n(3717),Gt=n(18314),Pt=n(35650),At=n(88794),Nt=(0,Z.X)({button:{width:"fit-content"}});function Ut(e){var t=e.code,n=e.activeFile,i=(0,Bt.Z)(n),o=i?{text:"Insert",iconRight:(0,r.tZ)(Gt.Z,{}),onClick:function(){return i({code:t,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,r.tZ)(Pt.Z,{}),onClick:function(){return(0,At.Z)(t)}};return(0,r.tZ)(De.Tg,{background:"default",children:(0,r.tZ)(Se.zx,(0,Ze.Z)({size:"small",variant:"outlined",css:Nt.button},o))})}var Lt=(0,Z.X)({self:v.l0.colWithGap(4),content:[v.l0.rowWithGap(4),v.l0.backgroundColor.backgroundRoot,v.l0.borderRadius(4),v.l0.p(4),v.l0.align.center,{width:"fit-content"}]});function Ot(e){var t=e.method,n=e.content,i=e.activeFile,o=(0,a.useState)(n),l=o[0],c=o[1];return(0,r.BX)(g.G,{css:Lt.self,children:[(0,r.tZ)(zt,{title:t}),(0,r.tZ)(g.G,{css:Lt.content,children:l.map((function(e,n){var i="".concat(t,"-").concat(n);return"input"===e.type?(0,r.tZ)(Mt,{i:n,value:e.value,placeholder:e.placeholder,setContent:c},i):(0,r.tZ)(Wt,{value:e.value},i)}))}),(0,r.tZ)(Ut,{code:jt(l),activeFile:i})]})}var Xt=(0,Z.X)({self:[v.l0.width(64),v.l0.height(24),v.l0.zIndex(1)]});function Mt(e){var t=e.i,n=e.value,i=e.placeholder,o=e.setContent;return(0,r.tZ)(_t.II,{onChange:function(e){o((function(n){return n.map((function(n,r){return t===r?(0,be.Z)((0,Ze.Z)({},n),{value:e.target.value}):n}))}))},placeholder:i,value:n||"",css:Xt.self})}var Ft=(0,Z.X)({self:[v.l0.borderRadius(0),v.l0.backgroundColor.backgroundRoot],code:[v.l0.font.code,v.l0.color.greyStronger,v.l0.p(4)]});function Wt(e){var t=e.value;return(0,r.tZ)(g.G,{css:Ft.self,children:(0,r.tZ)(y.xv,{css:Ft.code,multiline:!1,children:t})})}var Ht,Vt=(0,Z.X)({self:v.l0.rowWithGap(4),bold:{fontWeight:v.TV.fontWeightMedium}});function zt(e){var t=e.title,n=(0,o.Z)((0,mt.Z)((function(){var e=(0,It.Z)(t.split(" "));return[e[0],e.slice(1).join(" ")]}),[t]),2),i=n[0],a=n[1];return(0,r.BX)(g.G,{css:Vt.self,children:[(0,r.tZ)(y.xv,{css:Vt.bold,multiline:!1,children:i}),(0,r.tZ)(y.xv,{color:"dimmer",multiline:!1,children:a})]})}function jt(e){return e.reduce((function(e,t){return e+(t.value||("input"===t.type?t.placeholder:""))}),"")}!function(e){e.IMPORT="Import the database",e.CREATE="Create a new database",e.SET="Set a key to a value",e.GET="Get a key's value",e.DELETE="Delete a key",e.LIST="List all keys",e.LIST_PREFIX="List keys with a prefix"}(Ht||(Ht={}));var qt={language:"Bash",methods:[Qt(Ht.SET,"curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),Qt(Ht.GET,"curl $REPLIT_DB_URL/{{key}}"),Qt(Ht.DELETE,"curl -XDELETE $REPLIT_DB_URL/{{key}}"),Qt(Ht.LIST,'curl "$REPLIT_DB_URL?prefix={{key}}"')]},$t={language:"Node",methods:[Qt(Ht.IMPORT,'const Database = require("@replit/database")'),Qt(Ht.CREATE,"const db = new Database()"),Qt(Ht.SET,'db.set("{{key}}", "{{value}}").then(() => {})'),Qt(Ht.GET,'db.get("{{key}}").then(value => {})'),Qt(Ht.DELETE,'db.delete("{{key}}").then(() => {})'),Qt(Ht.LIST,"db.list().then(keys => {})"),Qt(Ht.LIST_PREFIX,'db.list("{{prefix}}").then(matches => {})')]},Yt={language:"Go",methods:[Qt(Ht.IMPORT,'import "github.com/replit/database-go"'),Qt(Ht.SET,'db.Set("{{key}}", "{{value}}")'),Qt(Ht.GET,'value, _ := database.Get("{{key}}")'),Qt(Ht.DELETE,'database.Delete("{{key}}")'),Qt(Ht.LIST,'keys, _ := database.ListKeys("")'),Qt(Ht.LIST_PREFIX,'matches, _ := database.ListKeys("{{prefix}}")')]},Kt={language:"Python",methods:[Qt(Ht.IMPORT,"from replit import db"),Qt(Ht.SET,'db["{{key}}"] = "{{value}}"'),Qt(Ht.GET,'db["{{key}}"]'),Qt(Ht.DELETE,'del db["{{key}}"]'),Qt(Ht.LIST,"keys = db.keys()"),Qt(Ht.LIST_PREFIX,'matches = db.prefix("{{prefix}}")')]};function Qt(e,t){return{method:e,content:Jt(t)}}function Jt(e){for(var t=[],n=0;n<e.length;){var r=e.indexOf("{{",n),i=e.indexOf("}}",n);if(-1===r||-1===i){t.push({type:"code",value:e.substring(n)});break}t.push({type:"code",value:e.substring(n,r)}),t.push({type:"input",placeholder:e.substring(r+"{{".length,i)}),n=i+"}}".length}return t}var en=(0,Z.X)({self:v.l0.colWithGap(24),code:[v.l0.font.code,v.l0.color.greyStronger,v.l0.backgroundColor.backgroundRoot,v.l0.p(4),v.l0.borderRadius(4)]});function tn(e){var t=e.activeFile,n=(0,mt.Z)((function(){return function(e){switch(e?(0,D.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return $t;case"go":return Yt;case"py":return Kt;default:return qt}}(t)}),[t]);return(0,r.BX)(g.G,{css:en.self,children:[(0,r.BX)(y.xv,{color:"dimmer",children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. We\u2019ve set an environment variable called ",(0,r.tZ)("code",{css:en.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),n.methods.map((function(e){return(0,r.tZ)(Ot,{method:e.method,content:e.content,activeFile:t},"".concat(n.language).concat(e.method))}))]})}var nn=n(28317),rn=(0,Z.X)({children:[v.l0.p(12),v.l0.colWithGap(8)]});function on(e){var t=e.title,n=e.defaultExpanded,i=e.children;return(0,r.tZ)(nn.Q,{defaultExpanded:n,headerContent:(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t}),children:(0,r.tZ)(g.G,{css:rn.children,children:i})})}var an=n(43312),ln=n(23007),cn=(0,an.F4)("from{opacity:0}to{opacity:1}"),sn=(0,Z.X)({self:[v.l0.colWithGap(8),{animation:"".concat(cn," 100ms forwards ease-in-out alternate")}],selfLoadingText:[v.l0.height(16),v.l0.width(48),v.l0.borderRadius(4),Te.p.backgroundPulse()],selfLoading:[v.l0.height(12),v.l0.borderRadius(16),Te.p.backgroundPulse()],text:[v.l0.rowWithGap(4)],textSpan:[v.l0.width("fit-content"),v.l0.display.inlineFlex]});function un(e){var t=e.database,n=e.loading,i=(null===t||void 0===t?void 0:t.sizeMB)||0,o=function(e){return"".concat((e=1e6*e/1048576).toFixed(),"/50 MiB")}(i),a=n||!t;return(0,r.tZ)(g.G,{css:sn.self,children:a?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.G,{css:sn.selfLoadingText}),(0,r.tZ)(g.G,{css:sn.selfLoading})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.xv,{color:"dimmer",css:sn.text,multiline:!1,children:[(0,r.tZ)(g.K.span,{css:sn.textSpan,children:o}),(0,r.tZ)(g.K.span,{css:sn.textSpan,children:"|"}),(0,r.tZ)(g.K.span,{css:sn.textSpan,children:dn(null===t||void 0===t?void 0:t.keysCount)})]}),(0,r.tZ)(ln.J,{current:i,total:50,tooltip:o})]})},a?"databaseLoadingStats":"databaseLoadedStats")}function dn(e){return"".concat(e=e||0," ").concat((0,te.Z)("key",e))}var fn=n(34547),hn=n(43119),pn=n(71440),mn=n(24635);function vn(){var e=(0,hn.Z)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return vn=function(){return e},e}function gn(){var e=(0,hn.Z)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return gn=function(){return e},e}var yn={},Zn=(0,pn.Ps)(vn()),bn=(0,pn.Ps)(gn(),Zn);function wn(){var e,t,n,r=function(e){var t=(0,Ze.Z)({},yn,e);return mn.a(bn,t)}({variables:{replID:(0,fn.Z)()},pollInterval:1e4}),i=r.data,o=r.error,a=r.loading;i&&("Repl"===i.repl.__typename?t=null===i||void 0===i||null===(n=i.repl)||void 0===n?void 0:n.database:e="Could not fetch Database info");return o&&("GraphQL error: You don't have access to this database"===o.message?t=null:e=o.message),{db:t,loading:a,error:e}}var xn=n(30504),Cn=n(86813),kn=(0,Z.X)({self:[v.l0.colWithGap(16),v.l0.p(8),v.l0.backgroundColor.backgroundDefault,A.F3],link:[v.l0.color.accentPrimaryStronger,v.l0.pr(4)],sectionWrapper:[v.l0.colWithGap(16),v.l0.overflowY("auto"),v.l0.width("100%"),{flex:"1"}]});function Sn(e){var t=e.performPaneOperation,n=wn(),i=n.db,o=n.error,a=n.loading,l=(0,Cn.R3)();return(0,r.BX)(g.G,{css:kn.self,children:[(0,r.tZ)(y.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,r.BX)(g.G,{css:kn.sectionWrapper,children:[(0,r.BX)(g.G,{children:[(0,r.BX)(y.xv,{children:[(0,r.tZ)("a",{href:xn.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),t({operation:"open",pane:{type:"docs",data:{url:xn.TT.REPL_DATABASE}}})},children:"Replit Database"})," ","is a free, easy to use key-value store. No configuration is necessary, so you can start using it right away."]}),o?(0,r.tZ)(y.xv,{css:[v.l0.color.accentNegativeStronger],children:o}):null]}),(0,r.tZ)(on,{title:"Database Info",defaultExpanded:!0,children:(0,r.tZ)(un,{database:i,loading:a})}),(0,r.tZ)(on,{title:"Using the database",defaultExpanded:!0,children:(0,r.tZ)(tn,{activeFile:l})})]})]})}var En=I.Type.Object({type:I.Type.Literal("database")}),Tn={Content:function(e){var t=e.options.performPaneOperation;return(0,r.tZ)(Sn,{performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,r.tZ)(Dt.Z,{size:t})},getTitle:function(){return"Database"},decode:function(e){return _.B4.Decode(En,e)}},Rn=n(50216);function Dn(){var e=(0,hn.Z)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n        isBackedByCycles\n      }\n    }\n  }\n"]);return Dn=function(){return e},e}function In(){var e=(0,hn.Z)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return In=function(){return e},e}function _n(){var e=(0,hn.Z)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n          isBackedByCycles\n        }\n      }\n    }\n  }\n"]);return _n=function(){return e},e}function Bn(){var e=(0,hn.Z)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return Bn=function(){return e},e}var Gn={},Pn=(0,pn.Ps)(Dn());function An(e){var t=(0,Ze.Z)({},Gn,e);return Rn.D(Pn,t)}var Nn=(0,pn.Ps)(In());function Un(e){var t=(0,Ze.Z)({},Gn,e);return Rn.D(Nn,t)}var Ln=(0,pn.Ps)(_n());var On=(0,pn.Ps)(Bn());function Xn(e){var t=(0,Ze.Z)({},Gn,e);return Rn.D(On,t)}var Mn=n(25404),Fn=n(44385),Wn=n(48587),Hn=n(35318),Vn=n(87708),zn=n(44322),jn=n(18988),qn=n(34204),$n=n(52132),Yn={"td,th":{border:"1px solid "+v.TV.outlineDefault}},Kn={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},Qn={outline:"2px solid ".concat(v.TV.accentPrimaryDefault),outlineOffset:"-2px"},Jn=(0,an.iv)({":focus:focus-visible":Qn}),er=(0,an.iv)(Qn),tr=(0,an.iv)([Kn,Yn,Jn]),nr=(0,an.iv)([v.l0.fontWeight.medium,Kn,Yn,Jn]),rr=(0,an.iv)({"tbody > tr:hover":{backgroundColor:v.TV.backgroundHigher,cursor:"pointer"}});function ir(e){var t=e.type,n=e.style,i=e.children,o=(0,zn.LA)().rowGroupProps;return(0,r.tZ)(t,(0,be.Z)((0,Ze.Z)({},o),{style:n,children:i}))}function or(e){var t=e.item,n=e.state,i=e.children,o=(0,a.useRef)(null),l=(0,zn.Qm)({node:t},n,o).rowProps;return(0,r.tZ)("tr",(0,be.Z)((0,Ze.Z)({css:nr},l),{ref:o,children:i}))}function ar(e){var t,n=e.column,i=e.state,o=(0,a.useRef)(null),l=(0,zn.WY)({node:n},i,o).columnHeaderProps,c=(0,jn.Fx)(),s=c.isFocusVisible,u=c.focusProps;return(0,r.tZ)("th",(0,be.Z)((0,Ze.Z)({},(0,qn.dG)(l,u)),{css:[s&&er,Jn],colSpan:n.colspan,style:{textAlign:(null!==(t=n.colspan)&&void 0!==t?t:1)>1?"center":"left"},ref:o,children:n.rendered}))}function lr(e){var t=e.item,n=e.children,i=e.state,o=(0,a.useRef)(null),l=(0,zn.U)({node:t},i,o).rowProps,c=(0,jn.Fx)(),s=c.isFocusVisible,u=c.focusProps;return(0,r.tZ)("tr",(0,be.Z)((0,Ze.Z)({css:[s&&er,tr]},(0,qn.dG)(l,u)),{ref:o,children:n}))}function cr(e){var t=e.cell,n=e.state,i=(0,a.useRef)(null),o=(0,zn.fs)({node:t},n,i).gridCellProps,l=(0,jn.Fx)(),c=l.isFocusVisible,s=l.focusProps;return(0,r.tZ)("td",(0,be.Z)((0,Ze.Z)({},(0,qn.dG)(o,s)),{css:[c&&er,Jn],ref:i,children:t.rendered}))}function sr(e){var t=e.selectionMode,n=e.selectionBehavior,i=(0,$n.oy)((0,be.Z)((0,Ze.Z)({},e),{showSelectionCheckboxes:"multiple"===t&&"replace"!==n})),o=(0,a.useRef)(null),l=i.collection,c=(0,zn.x6)(e,i,o).gridProps;return(0,r.BX)("table",(0,be.Z)((0,Ze.Z)({},c),{ref:o,css:[(null===e||void 0===e?void 0:e.onRowAction)&&rr],style:{borderCollapse:"collapse"},children:[(0,r.tZ)(ir,{type:"thead",children:l.headerRows.map((function(e){return(0,r.tZ)(or,{item:e,state:i,children:(0,ee.Z)(e.childNodes).map((function(e){return(0,r.tZ)(ar,{column:e,state:i},e.key)}))},e.key)}))}),(0,r.tZ)(ir,{type:"tbody",children:(0,ee.Z)(l.body.childNodes).map((function(e){return(0,r.tZ)(lr,{item:e,state:i,children:(0,ee.Z)(e.childNodes).map((function(e){return(0,r.tZ)(cr,{cell:e,state:i},e.key)}))},e.key)}))})]}))}var ur=function(e){var t=e.ariaTableProps,n=e.rows,i=e.columns;return(0,r.BX)(sr,(0,be.Z)((0,Ze.Z)({},t),{children:[(0,r.tZ)($n.xD,{columns:i,children:function(e){return(0,r.tZ)($n.sg,{children:e.value})}}),(0,r.tZ)($n.RM,{items:n,children:function(e){return(0,r.tZ)($n.X2,{children:function(t){return(0,r.tZ)($n.bL,{children:e[t]})}})}})]}))};function dr(e){var t=e.headerColumns,n=e.bodyData,i=e.ariaLabel,o=void 0===i?"Database Table":i,a=e.scrollRef,l=e.onRowAction,c=t.map((function(e,t){return{key:"string"===typeof e?e:"".concat(t),value:e}})),s=n.map((function(e,n){for(var r={id:n},i=0;i<e.length;i++){var o=t[i];r["string"===typeof o?o:"".concat(i)]=e[i]}return r}));return(0,r.tZ)(ur,{ariaTableProps:{selectionMode:"none","aria-label":o,onRowAction:l,scrollRef:a},columns:c,rows:s})}var fr=function(e,t){var n=(0,d.Z)().psql,r=(0,o.Z)(a.useState(),2),i=r[0],l=r[1],c=(0,o.Z)(a.useState(!1),2),s=c[0],u=c[1],f=a.useCallback(function(){var r=(0,we.Z)((function(){var r;return(0,xe.__generator)(this,(function(i){switch(i.label){case 0:if(!e)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),u(!0),[4,n.run({query:e,connectionString:t})];case 2:return r=i.sent(),l(r),[3,4];case 3:return u(!1),[7];case 4:return[2]}}))}));return function(){return r.apply(this,arguments)}}(),[t,n,e]);return a.useEffect((function(){f()}),[t,n,e,f]),{data:i,loading:s,refetch:f}},hr=function(e){var t=e.rows,n=e.columns;return!Array.isArray(t)||t.length<1?null:{headerColumns:null!==n&&void 0!==n?n:[],bodyData:t.map((function(e){return Object.values(e)}))}},pr=function(e){var t=e.connectionString;return fr("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",t)},mr=(0,ce.cn)(void 0),vr=(0,ce.cn)((function(e){var t=e(mr);return null===t||void 0===t?void 0:t.rows.reduce((function(e,t){var n=t.table_name,r=t.column_name;return e[n]||(e[n]=[]),e[n].push(r),e}),{})})),gr=n(42362),yr=n(89138),Zr=function(e){var t=e.headerTitle,n=e.onGoBack,i=e.children;return(0,r.BX)(g.G,{css:[v.l0.flex.column,v.l0.height("100%")],children:[(0,r.BX)(g.G,{css:[v.l0.flex.row,v.l0.py(16),v.l0.px(8),v.l0.align.center],children:[(0,r.tZ)(ne.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,r.tZ)(yr.Z,{})}),(0,r.tZ)(y.xv,{css:[v.l0.fontSize(16),v.l0.ml(8)],multiline:!1,children:t})]}),(0,r.tZ)(g.G,{css:[v.l0.overflow("auto"),v.l0.height("calc(100% - 60px)")],children:i})]})},br=n(9434),wr=function(e){(0,br.j)(br.U3.DATABASE_USED,(0,Ze.Z)({type:"PostgreSQL",provider:"neon"},e))},xr=(0,ce.cn)(["databaseManager"]),Cr=(0,ce.cn)(null,(function(e,t,n){var r=e(xr);t(xr,(0,ee.Z)(r).concat([n])),wr({action:"pageNav",databasePage:n})})),kr=(0,ce.cn)(null,(function(e,t){var n=e(xr);t(xr,n.slice(0,n.length-1))})),Sr=(0,ce.cn)((function(e){var t=e(xr);return t[t.length-1]})),Er=function(){return(0,se.Dv)(Sr)},Tr=function(){return(0,se.b9)(Cr)},Rr=function(){return(0,se.b9)(kr)},Dr=n(93398),Ir=n(67956),_r=(0,ce.cn)(""),Br=(0,ce.cn)(null),Gr=(0,ce.cn)(null,(function(e,t,n){var r=n.query;r&&t(_r,r);var i=e(Br);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})})),Pr=n(85234),Ar=n.n(Pr),Nr=n(92153),Ur=n(15859),Lr=(0,Ur.O4)("replDatabasesQueryHistory",[]),Or=function(e,t){return!e.isPinned&&t.isPinned?1:e.isPinned&&!t.isPinned?-1:"number"===typeof e.pinnedTimestamp&&"number"===typeof t.pinnedTimestamp?e.pinnedTimestamp-t.pinnedTimestamp:t.timestamp-e.timestamp},Xr=function(){return(0,ue.lV)(a.useCallback((function(e,t,n){if(n){var r={id:Ar()(),data:n,timestamp:Date.now()},i=e(Lr),o=(0,Nr.ZP)(i,(function(e){!function(e,t){var n=e.findIndex((function(e){return!e.isPinned&&e.data===t.data}));-1!==n?e.splice(n,1,t):e.push(t),e.sort(Or);var r=e.filter((function(e){return!e.isPinned})).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}}(e,r)}));t(Lr,o)}}),[]))},Mr=n(5132),Fr=n(93516),Wr=n(20476),Hr=n(7986),Vr=n(98237),zr=n(31764),jr=n(25849),qr=function(e){var t=e.id,n=e.data,i=e.isPinned,o=function(e){return(0,ue.lV)(a.useCallback((function(t,n){var r=t(Lr).find((function(t){return t.id===e})),i=(null===r||void 0===r?void 0:r.data)||"";i&&(n(Gr,{query:i}),wr({action:"queryHistoryItemSelected"}))}),[e]))}(t),l=function(e){return(0,ue.lV)(a.useCallback((function(t,n){var r=t(Lr),i=(0,Nr.ZP)(r,(function(t){var n=t.find((function(t){return t.id===e}));n&&(n.isPinned=!n.isPinned,n.isPinned?n.pinnedTimestamp=Date.now():n.pinnedTimestamp=void 0),t.sort(Or)}));n(Lr,i),wr({action:"queryHistoryItemPinned"})}),[e]))}(t);return(0,r.BX)(g.G,{css:[{borderTop:"1px solid ".concat(v.TV.outlineDefault),":hover":{background:v.TV.backgroundHigher}},v.l0.flex.row,v.l0.p(8),v.l0.color.foregroundDimmer,v.l0.align.center,v.l0.cursor.pointer],onClick:o,children:[(0,r.tZ)(y.xv,{css:[v.l0.flex.growAndShrink(1)],multiline:!1,children:n}),(0,r.tZ)(ne.hU,{alt:"Pin query",onClick:l,children:i?(0,r.tZ)(Fr.Z,{fill:v.TV.accentPrimaryDefault}):(0,r.tZ)(Ir.Z,{})})]})},$r=function(e){var t=e.onExpand,n=(0,se.Dv)(Lr);return(0,r.tZ)(nn.Q,{onClick:t,headerContent:(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.p(2)],children:[(0,r.tZ)(gr.Z,{}),(0,r.tZ)(y.xv,{css:[v.l0.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,r.tZ)(g.G,{css:[v.l0.colWithGap(8),v.l0.height("100%")],children:0===n.length?(0,r.tZ)(g.G,{css:[v.l0.p(8)],children:(0,r.tZ)(y.xv,{css:[v.l0.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,r.tZ)(g.G,{children:n.map((function(e){return(0,r.tZ)(qr,(0,Ze.Z)({},e),e.id)}))})})})},Yr=new jr.R((function(){return(0,Wn.W$)((0,Vr.VV)((0,r.tZ)("div",{css:[{fontFamily:v.TV.fontFamilyCode},v.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))})),Kr=new zr.j((function(e){return Vn.Wl.high((0,Hn.sql)((0,Ze.Z)({dialect:Hn.PostgreSQL},e)))})),Qr=function(e){var t=e.queryResult,n=e.scrollRef;if(null===t||void 0===t?void 0:t.error)return(0,r.tZ)(g.G,{css:v.l0.px(8),children:(0,r.tZ)(y.xv,{css:[v.l0.color.accentNegativeDefault],children:null===t||void 0===t?void 0:t.error})});if(!(null===t||void 0===t?void 0:t.rows))return null;var i=hr(t);if(!i)return(0,r.tZ)(g.G,{css:v.l0.px(8),children:(0,r.tZ)(y.xv,{css:[v.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var o=i.headerColumns,a=i.bodyData;return(0,r.tZ)(g.G,{css:v.l0.px(8),children:(0,r.tZ)(dr,{headerColumns:o,bodyData:a,scrollRef:n})})},Jr=(0,an.iv)([v.l0.height("100%"),v.l0.position.relative,v.l0.overflow("auto")]),ei=(0,an.iv)([v.l0.position.sticky,v.l0.top(0),v.l0.left(0),v.l0.zIndex(1),v.l0.backgroundColor.backgroundDefault]),ti=function(e){var t=e.connectionString,n=(0,o.Z)((0,se.KO)(_r),2),i=n[0],l=n[1],c=(0,Hr.Z)(),s=c.ref,u=c.view,f=(0,o.Z)(a.useState(!1),2),h=f[0],p=f[1];a.useEffect((function(){return function(){var e;l(null!==(e=null===u||void 0===u?void 0:u.state.doc.toString())&&void 0!==e?e:"")}}),[l,null===u||void 0===u?void 0:u.state.doc]);var m=(0,se.b9)(Br);a.useEffect((function(){m(u)}),[m,u]),function(e){var t=e.connectionString,n=fr("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",t).data,r=(0,se.b9)(mr);a.useEffect((function(){r(n)}),[n,r])}({connectionString:t});var y=(0,se.Dv)(vr);(0,Mr.Z)({view:u,filePath:"mark.sql"});var Z=(0,d.Z)().psql,b=(0,o.Z)(a.useState(),2),w=b[0],x=b[1],C=(0,o.Z)(a.useState(!1),2),k=C[0],S=C[1],E=Xr(),T=a.useCallback((function(){function e(){return(e=(0,we.Z)((function(){var e,n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:if(!u)return[2];r.label=1;case 1:return r.trys.push([1,,3,4]),S(!0),e=null===u||void 0===u?void 0:u.state.doc.toString(),E(e),[4,Z.run({query:e,connectionString:t})];case 2:return n=r.sent(),x(n),wr({action:"queryRan"}),[3,4];case 3:return S(!1),[7];case 4:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,Z,E,u]),R=Tr(),D=a.useCallback((function(){R("databaseManager")}),[R]),I=a.useCallback((function(){R("tableSchemas")}),[R]),_=a.useRef(null),B=Kr.use({schema:y});return(0,r.tZ)(Zr,{headerTitle:"Database Contents",onGoBack:D,children:(0,r.BX)(g.G,{css:[v.l0.colWithGap(8),Jr],innerRef:_,children:[(0,r.BX)(g.G,{css:[v.l0.colWithGap(8),v.l0.px(8),v.l0.pb(8),h?null:ei],children:[(0,r.BX)(g.G,{css:[{border:"1px solid ".concat(v.TV.outlineDefault)},v.l0.borderRadius(2)],children:[(0,r.tZ)(Wr.ZP,{ref:s,css:[v.l0.viewStyle,v.l0.backgroundColor.backgroundDefault,v.l0.borderRadius(8),v.l0.overflow("auto"),v.l0.maxHeight(300),{".cm-panel":{zIndex:1}}],initialDoc:i,extensions:[Yr,B]}),(0,r.tZ)($r,{expanded:h,onExpand:function(){p((function(e){return!e}))}})]}),(0,r.tZ)(Se.zx,{text:"Run Query",iconLeft:k?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Fn.Z,{}),onClick:T,disabled:k})]}),(0,r.tZ)(Qr,{queryResult:w,scrollRef:_}),(0,r.tZ)(g.G,{css:[v.l0.colWithGap(8),v.l0.px(8),v.l0.py(8)],children:(0,r.tZ)(Se.zx,{css:v.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,r.tZ)(Dr.Z,{}),onClick:I})})]})})},ni=n(91333),ri=n(34489),ii=n(22011),oi=n(38029),ai="DATABASE_URL",li="PGDATABASE",ci="PGHOST",si="PGPORT",ui="5432",di="PGUSER",fi="PGPASSWORD",hi=function(e){var t=e.envVarKey,n=e.envVarValue,i=e.isSecret,l=(0,oi.U)()("db-env-var-".concat(t)),c=(0,o.Z)(a.useState(!1),2),u=c[0],d=c[1],f=!i||u?"text":"password";return(0,r.BX)(g.G,{css:[v.l0.flex.row,v.l0.flex.wrap,v.l0.align.end,v.l0.pb(8),{gap:v.TV.space8}],children:[(0,r.BX)(g.G,{css:[v.l0.colWithGap(8),{flexBasis:250},v.l0.flex.grow(0),v.l0.flex.shrink(1)],children:[(0,r.tZ)("label",{css:v.l0.color.foregroundDimmer,htmlFor:l,children:t}),(0,r.tZ)(_t.II,{id:l,type:f,readOnly:!0,value:n})]}),(0,r.tZ)(Se.zx,{text:"Copy",iconLeft:(0,r.tZ)(ni.Z,{}),onClick:function(){(0,At.Z)(n),wr({action:"envVarCopied",envVarKey:t,envVarType:"value"})}}),i?(0,r.tZ)(Se.zx,{text:"View",iconLeft:(0,r.tZ)(s.Z,{}),onClick:function(){return d((function(e){return!e}))}}):null]})},pi=function(e){var t,n=e.connectionString,r=e.databaseName,o=new URL(n.replace("postgres://","https://")),a=o.host,l=o.username,c=o.password;return t={},(0,i.Z)(t,ai,n),(0,i.Z)(t,li,r),(0,i.Z)(t,ci,a),(0,i.Z)(t,si,ui),(0,i.Z)(t,di,l),(0,i.Z)(t,fi,c),t},mi=function(){var e=(0,d.Z)().fs;return a.useCallback((function(t){var n=t.connectionString,r=t.databaseName,i=pi({connectionString:n,databaseName:r});function a(){return a=(0,we.Z)((function(){var t,n,r,a,l,c,s,u,d,f,h,p,m,v;return(0,xe.__generator)(this,(function(g){switch(g.label){case 0:return[4,e.readFile(".env")];case 1:if(t=g.sent(),n="",t.error){if(t.error!==k.Df.NotFound)throw new Error("Error getting .env");n=""}else n=t.content;r=ri.Z.parse(n.toString()),a=!1,l=(0,Ze.Z)({},r),c=!0,s=!1,u=void 0;try{for(d=Object.entries(i)[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)h=(0,o.Z)(f.value,2),p=h[0],m=h[1],l[p]!==m&&(a=!0,l[p]=m)}catch(y){s=!0,u=y}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}return a?(v=ri.Z.serialize(l),[4,e.writeFile(".env",ii.Z.from(v))]):[2];case 2:return g.sent(),[2]}}))})),a.apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e])},vi=function(e){var t=e.connectionString,n=e.databaseName,i=(0,mt.Z)((function(){return pi({connectionString:t,databaseName:n})}),[t,n]),o=i.PGHOST,l=i.PGUSER,c=i.PGPASSWORD,s=mi();return a.useEffect((function(){s({connectionString:t,databaseName:n})}),[t,n,s]),(0,r.BX)(g.G,{css:[v.l0.colWithGap(8)],children:[(0,r.tZ)(hi,{envVarKey:ai,envVarValue:t,isSecret:!0}),(0,r.tZ)(hi,{envVarKey:li,envVarValue:n}),(0,r.tZ)(hi,{envVarKey:ci,envVarValue:o}),(0,r.tZ)(hi,{envVarKey:si,envVarValue:ui}),(0,r.tZ)(hi,{envVarKey:di,envVarValue:l}),(0,r.tZ)(hi,{envVarKey:fi,envVarValue:c,isSecret:!0})]})},gi=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],yi=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function Zi(e,t){var n,r=t||{},i=r.signed,o=void 0!==i&&i,a=r.digitsNumber,l=void 0===a?2:a,c=r.isKib,s=void 0===c||c,u=r.isKibNotation,d=void 0!==u&&u;if(n=o?e<0?"-":"+":"",0===e)return"".concat(n,"0B");var f=s?1024:1e3,h=d?gi:yi,p=Math.floor(Math.log(Math.abs(e))/Math.log(f));return"".concat(n).concat(parseFloat(Math.abs(e/Math.pow(f,p)).toFixed(l))).concat(h[p])}var bi=n(3689);function wi(e){var t=e.title,n=e.doWarnAtom,i=e.inactive,o=void 0!==i&&i,a=(0,se.Dv)(n);return(0,r.BX)(g.G,{css:[v.l0.rowWithGap(4),v.l0.align.center],children:[(0,r.tZ)(y.xv,{variant:"small",css:v.l0.color.foregroundDimmer,multiline:!1,children:o?t+" last run":t}),a?(0,r.tZ)(Ee.Z,{color:v.TV.orangeStronger}):null]})}function xi(e){var t=e.title,n=e.totalAtom,i=e.currentAtom,o=e.countAtom,a=e.measure,l=e.limitText,c=e.inactive,s=void 0!==c&&c,u=(0,mt.Z)((function(){return(0,ce.cn)((function(e){return ki(e(i),e(n))}))}),[i,n]),d=(0,mt.Z)((function(){return(0,ce.cn)((function(e){return l||Ei(e(u),e(i),e(n),o&&e(o),a)}))}),[l,u,i,n,o,a]),f=(0,mt.Z)((function(){return(0,ce.cn)((function(e){var t=e(u);return"At limit"===t||"Close to limit"===t}))}),[u]);return(0,r.BX)(g.G,{css:[v.l0.colWithGap(4),v.l0.flex.growAndShrink(2),{flexBasis:32}],children:[t?(0,r.tZ)(wi,{title:t,doWarnAtom:f,inactive:s}):null,(0,r.tZ)(Ci,{currentAtom:i,totalAtom:n,inactive:s,limitTextAtom:d,mini:!0})]})}function Ci(e){var t=e.currentAtom,n=e.totalAtom,i=e.limitTextAtom,o=e.inactive,a=e.mini,l=(0,se.Dv)(n),c=(0,se.Dv)(t),s=(0,se.Dv)(i),u=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return v.TV.accentNegativeDefault;case"Close to limit":return v.TV.orangeDefault}}(ki(c,l));return(0,r.tZ)(ln.J,{css:a&&v.l0.height(8),total:l,current:c,color:u,disabled:o,tooltip:s})}function ki(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}function Si(e){return Math.round(100*(e+Number.EPSILON))/100}function Ei(e,t,n,r,i){if("empty"!==e&&void 0!==t)return"vCPU"===i?Si(100*Math.min(1,t/n))+"% of "+r+" vCPUs":Si(t).toLocaleString()+"/"+Si(n).toLocaleString()+" "+i}var Ti=n(95862),Ri=function(e){var t=e.tableData,n=e.scrollRef,i=t.headerColumns,o=t.bodyData,l=Tr(),c=a.useCallback((function(e){var t=parseInt(String(e),10);if(!isNaN(t)){var n=o[t][i.indexOf("Name")];l("table/".concat(n))}}),[l,i,o]);return(0,r.tZ)(dr,{headerColumns:i,bodyData:o,onRowAction:c,scrollRef:n})},Di=function(e){var t=e.psqlQueryResult,n=e.scrollRef,i=t.data;if(t.loading)return(0,r.tZ)(g.G,{css:[v.l0.flex.row,v.l0.justify.center,v.l0.p(32)],children:(0,r.tZ)(oe.Z,{})});if(null===i||void 0===i?void 0:i.error)return(0,r.tZ)(g.G,{css:[v.l0.flex.row,v.l0.justify.center,v.l0.p(32)],children:(0,r.tZ)(y.xv,{css:[v.l0.color.accentNegativeDefault,v.l0.maxWidth("100%")],children:null===i||void 0===i?void 0:i.error})});var o=i?hr(i):null;return o?(0,r.tZ)(Ri,{tableData:o,scrollRef:n}):(0,r.tZ)(g.G,{css:[v.l0.flex.row,v.l0.justify.center,v.l0.p(32)],children:(0,r.tZ)(y.xv,{css:[v.l0.color.accentPositiveDefault,v.l0.maxWidth("100%")],children:"No tables found"})})},Ii=function(e){var t=e.connectionString,n=Rr(),i=a.useRef(null),o=pr({connectionString:t}),l=o.refetch;return(0,r.BX)(g.G,{css:[v.l0.flex.column,v.l0.height("100%")],children:[(0,r.BX)(g.G,{css:[v.l0.flex.row,v.l0.py(16),v.l0.px(8),v.l0.align.center],children:[(0,r.tZ)(ne.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,r.tZ)(yr.Z,{})}),(0,r.tZ)(g.G,{css:[v.l0.flex.growAndShrink(1)],children:(0,r.tZ)(y.xv,{css:[v.l0.fontSize(16),v.l0.ml(8)],multiline:!1,children:"All tables"})}),(0,r.tZ)(ne.hU,{alt:"Refresh",size:24,type:"button",onClick:l,children:(0,r.tZ)(Ti.Z,{})})]}),(0,r.tZ)(g.G,{css:[v.l0.flex.growAndShrink(1),v.l0.overflow("auto"),v.l0.px(8)],innerRef:i,children:(0,r.tZ)(Di,{psqlQueryResult:o,scrollRef:i})})]})},_i="1px solid "+v.TV.outlineDefault,Bi=(0,an.iv)([v.l0.p(8),v.l0.backgroundColor.backgroundDefault,v.l0.align.center,v.l0.borderRadius(0),{borderLeft:_i,borderRight:_i,borderBottom:_i},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(v.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:v.TV.backgroundHigher}}}]),Gi=function(e){var t=e.connectionString,n=pr({connectionString:t}),i=n.data,l=n.loading,c=(0,o.Z)(a.useState(!1),2),s=c[0],u=c[1],d=a.useCallback((function(){u(!0)}),[]),f=i?hr(i):null,h=a.useRef(null);if(!f||l)return null;var p=f.bodyData.length,m=f.headerColumns,y=f.bodyData,Z=p-5>0&&!s;return(0,r.tZ)(r.HY,{children:(0,r.BX)(g.G,{css:[v.l0.overflow("auto"),v.l0.display.grid],innerRef:h,children:[(0,r.tZ)(Ri,{tableData:{headerColumns:m,bodyData:s?y:y.slice(0,5)},scrollRef:h}),Z?(0,r.tZ)(Se.zx,{text:"".concat(p-5," more"),css:Bi,onClick:d}):null]})})},Pi=n(14351),Ai=10*Math.pow(1024,3),Ni=Pi.z4["neon-database-preview"],Ui=(0,Pi.qJ)(Ni),Li="".concat(Ni.toLocaleString()," Cycles (").concat(Ui,") / day"),Oi="https://docs.replit.com/hosting/databases/postgresql-on-replit",Xi=n(82893),Mi=n.n(Xi),Fi=function(e){var t=e.dbSize,n=e.totalSize,i=t,o=n,a=Zi(t),l=Zi(n),c=(0,mt.Z)((function(){return(0,ce.cn)(i)}),[i]),s=(0,mt.Z)((function(){return(0,ce.cn)(o)}),[o]);return(0,r.BX)(r.HY,{children:[(0,r.BX)(y.xv,{css:v.l0.color.foregroundDimmer,multiline:!1,children:[a,"/",l]}),(0,r.tZ)(xi,{totalAtom:s,currentAtom:c,limitText:"".concat(a," / ").concat(l),inactive:!1,measure:"MB"})]})},Wi=function(e){var t,n,i=e.connectionString,o=fr("SELECT sum(pg_database_size(datname)) FROM pg_database;",i),a=o.data,l=o.loading,c=fr("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",i),s=c.data,u=c.loading,d=parseInt(null!==(n=null===(t=null===a||void 0===a?void 0:a.rows[0])||void 0===t?void 0:t.sum)&&void 0!==n?n:"0",10),f=null===s||void 0===s?void 0:s.rows.length;return(0,r.BX)(g.G,{css:v.l0.rowWithGap(8),children:[u?null:(0,r.BX)(y.xv,{multiline:!1,children:[f," ",1===f?"table":"tables"]}),l?null:(0,r.tZ)(Fi,{dbSize:d,totalSize:Ai})]})},Hi=function(e){var t=e.connectionString,n=e.onOpenDatabaseViewerClick,i=e.showUsageLink;return(0,r.BX)(g.G,{css:[v.l0.colWithGap(8)],children:[(0,r.BX)(g.G,{children:[(0,r.tZ)(Wi,{connectionString:t}),i?(0,r.tZ)(Mi(),{legacyBehavior:!0,href:"/account#resource-usage",passHref:!0,children:(0,r.tZ)("a",{css:v.l0.hover(v.l0.color.accentPrimaryStrongest),children:(0,r.tZ)(y.xv,{children:"See all usage"})})}):null]}),(0,r.tZ)(Gi,{connectionString:t}),(0,r.tZ)(Se.zx,{text:"See Database Contents",iconLeft:(0,r.tZ)(Dr.Z,{}),onClick:n})]})},Vi=(n(13606),function(e){var t=e.size,n=void 0===t?16:t;return(0,r.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,r.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,r.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,r.BX)("defs",{children:[(0,r.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#B9FFB3"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,r.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})}),zi=(0,an.iv)([v.l0.color.foregroundDimmest,{textDecoration:"underline"}]),ji=function(){return(0,r.tZ)(g.G,{css:[v.l0.colWithGap(8),v.l0.py(8),v.l0.width("100%")],children:(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.justify.spaceBetween],children:[(0,r.tZ)("a",{target:"_blank",href:Oi,css:zi,children:"Docs"}),(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:[(0,r.tZ)(y.xv,{css:[v.l0.fontSize(14)],multiline:!1,children:"Powered by"}),(0,r.tZ)(Vi,{})]})]})})},qi=function(e){var t=e.psqlQueryResult,n=e.tableName,i=e.connectionString,o=e.scrollRef,a=t.data,l=t.loading,c=function(e){var t=e.tableName,n=e.connectionString,r=fr(function(e){return"SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(e.replace(/"/g,'""'),"';")}(t),n).data;return r}({tableName:n,connectionString:i});if(l)return(0,r.tZ)(g.G,{css:[v.l0.flex.row,v.l0.justify.center,v.l0.p(32)],children:(0,r.tZ)(oe.Z,{})});if(null===a||void 0===a?void 0:a.error)return(0,r.tZ)(g.G,{css:[v.l0.flex.row,v.l0.justify.center,v.l0.p(32)],children:(0,r.tZ)(y.xv,{css:[v.l0.color.accentNegativeDefault,v.l0.maxWidth("100%")],children:null===a||void 0===a?void 0:a.error})});var s=a?hr(a):null;if(!s)return(0,r.tZ)(g.G,{css:[v.l0.flex.row,v.l0.justify.center,v.l0.p(32)],children:(0,r.tZ)(y.xv,{css:[v.l0.color.accentPositiveDefault,v.l0.maxWidth("100%")],children:"No rows"})});var u=s.headerColumns,d=s.bodyData;return(0,r.tZ)(dr,{headerColumns:u.map((function(e,t){var n,i=null===c||void 0===c||null===(n=c.rows)||void 0===n?void 0:n.find((function(t){return t.column_name===e})),o=null===i||void 0===i?void 0:i.data_type,a=o?(0,r.tZ)(je.D,{text:o}):null;return(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:[(0,r.tZ)(y.xv,{multiline:!1,children:e}),a]},t)})),bodyData:d,scrollRef:o})},$i=function(e){var t=e.tableName,n=e.connectionString,i=Rr(),o=a.useRef(null),l=fr('SELECT * FROM "'.concat(t.replace(/"/g,'""'),'" LIMIT ').concat(500),n),c=l.refetch;return(0,r.BX)(g.G,{css:[v.l0.flex.column,v.l0.height("100%")],children:[(0,r.BX)(g.G,{css:[v.l0.flex.row,v.l0.py(16),v.l0.px(8),v.l0.align.center],children:[(0,r.tZ)(ne.hU,{alt:"Go back",size:28,type:"button",onClick:i,children:(0,r.tZ)(yr.Z,{})}),(0,r.tZ)(g.G,{css:[v.l0.flex.growAndShrink(1)],children:(0,r.tZ)(y.xv,{css:[v.l0.fontSize(16),v.l0.ml(8)],multiline:!1,children:t})}),(0,r.tZ)(ne.hU,{alt:"Refresh",size:24,type:"button",onClick:c,children:(0,r.tZ)(Ti.Z,{})})]}),(0,r.tZ)(g.G,{css:[v.l0.flex.growAndShrink(1),v.l0.overflow("auto"),v.l0.px(8)],innerRef:o,children:(0,r.tZ)(qi,{psqlQueryResult:l,tableName:t,connectionString:n,scrollRef:o})})]})},Yi=n(37779),Ki=n(60966),Qi="\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n",Ji=(0,ce.cn)(null),eo=(0,ce.cn)(null),to=function(){return(0,se.Dv)(eo)},no=function(e){var t=e.title,n=e.children,i=e.isAccordion,o=e.sectionStyles;return(0,r.tZ)(g.G,{css:[v.l0.colWithGap(8),v.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:v.TV.outlineDefault},o],children:i?(0,r.tZ)(nn.Q,{headerContent:(0,r.tZ)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,r.tZ)(g.G,{css:[v.l0.p(12),v.l0.colWithGap(8),v.l0.height("100%")],children:n})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.xv,{multiline:!1,css:[v.l0.fontSize(v.TV.fontSizeSubheadDefault),v.l0.fontWeight.medium],children:t}),n]})})},ro=n(63723),io=n(39071);function oo(){var e=(0,hn.Z)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return oo=function(){return e},e}var ao={},lo=(0,pn.Ps)(oo(),io.eD);var co=n(45317),so=n(8942),uo=n(28882),fo=n(65790),ho=n(48250),po=n(47805),mo=n(51631),vo=n(86173),go=n(43841),yo=n(21651),Zo=(0,Z.X)({self:[],title:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.color.foregroundDimmest],status:[v.l0.width(8),v.l0.height(8),v.l0.backgroundColor.foregroundDimmer,v.l0.borderRadius("full")],main:[v.l0.colWithGap(8),v.l0.align.center],icon:v.l0.mt(32),subTitle:v.l0.my(16),cta:[v.l0.width("100%"),v.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[v.l0.colWithGap(8),v.l0.align.center],ctaStatusBanner:[v.l0.textAlign.left],budgetContainer:[v.l0.colWithGap(8),v.l0.border(),v.l0.borderRadius(8),v.l0.p(8)]});function bo(e){var t=e.loading,n=e.ubbExplanation,i=e.hasPaymentMethod,o=e.handleOnUnpause,a=e.refetchUbbCapabilitiesQueryData,l=e.setShowPaymentMethodForm,c=e.showPaymentMethodForm,s=e.setShowSupportForm,u=(0,X.rv)();return n===mo.Fp.NeedsSubscription||n===mo.Fp.NeedsSubscriptionOrPaymentMethod?u?(0,r.tZ)(Re.E,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,r.tZ)(ho.Warning,{}),css:Zo.ctaStatusBanner}):(0,r.BX)(g.G,{css:Zo.ctaContainer,children:[(0,r.tZ)(po.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to unpause database",css:Zo.cta,colorway:"primary",variant:"outlined",disabled:c,onPlanCheckoutComplete:a}),(0,r.tZ)(Se.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:Zo.cta,disabled:c,loading:t,iconLeft:(0,r.tZ)(ho.CreditCard,{}),onClick:function(){return l()}})]}):n===mo.Fp.NeedsSmsVerification?(0,r.tZ)(so.Z,{context:mo.jv.Neon,onSuccess:a}):n===mo.Fp.NeedsPaymentMethod?u?(0,r.tZ)(Re.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,r.tZ)(ho.Warning,{}),css:Zo.ctaStatusBanner}):(0,r.tZ)(Se.zx,{colorway:"primary",text:"Add a payment method",css:Zo.cta,disabled:c,loading:t,iconLeft:(0,r.tZ)(ho.CreditCard,{}),onClick:function(){return l()}}):n===mo.Fp.NeedsUnbanning?(0,r.tZ)(fo.u,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",icon:(0,r.tZ)(ho.Warning,{}),css:Zo.ctaStatusBanner,onClick:function(){return s()}}):n===mo.Fp.InsufficientBudget?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Re.E,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,r.tZ)(ho.Warning,{}),css:Zo.ctaStatusBanner}),(0,r.tZ)(g.G,{css:Zo.budgetContainer,children:(0,r.tZ)(uo.L,{onUpdateSuccess:a})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Se.zx,{colorway:"primary",onClick:o,text:"Unpause database",loading:t,css:Zo.cta}),!1===i?(0,r.tZ)(fo.u,{text:"Add a payment method to avoid downtime",colorway:"warning",icon:(0,r.tZ)(ho.Warning,{}),css:Zo.ctaStatusBanner,onClick:function(){return u?null:l()}}):null]})}function wo(e){var t,n=e.replId,i=e.neonProjectId,l=e.onDatabaseUnfreezed,c=(0,o.Z)(a.useState(!1),2),s=c[0],u=c[1],d=(0,o.Z)(a.useState(!1),2),f=d[0],h=d[1],p=(0,Mn.Z)().showError,m=function(e){var t=(0,Ze.Z)({},ao,e);return mn.a(lo,t)}({notifyOnNetworkStatusChange:!0,onError:function(e){p(e.message)}}),Z=m.loading,b=m.data,w=m.refetch,x=(0,o.Z)(Xn({onError:function(e){p("Error when unfreezing Neon database: ".concat(e.message)),wr({action:"unfreeze",success:!1})},onCompleted:function(e){if("UnfreezeNeonDatabaseResult"!==(null===e||void 0===e?void 0:e.unfreezeNeonDatabase.__typename))return p("Error: Unfreezes Neon Database failed."),void wr({action:"unfreeze",success:!1});(null===e||void 0===e?void 0:e.unfreezeNeonDatabase.success)?(l(),wr({action:"unfreeze",success:!0})):(p("Error: Unfreezes Neon Database failed."),wr({action:"unfreeze",success:!1}))}}),2),C=x[0],k=x[1].loading,S=Z||k,E="UserUsageBasedBillingSummary"===(null===b||void 0===b||null===(t=b.currentUser)||void 0===t?void 0:t.usageBasedBilling.__typename)?b.currentUser.usageBasedBilling.capabilities:null;return(0,r.BX)(g.G,{css:Zo.self,children:[(0,r.tZ)(yo.u,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,r.tZ)(vo.Z,{onRequestClose:function(){return h(!1)},items:go.lF})}),(0,r.BX)(g.G,{css:Zo.title,children:[(0,r.tZ)(g.G,{css:Zo.status}),(0,r.tZ)(y.xv,{css:[v.l0.color.foregroundDimmest],multiline:!1,children:"Database paused"})]}),(0,r.BX)(g.G,{css:Zo.main,children:[(0,r.tZ)(z.Z,{size:32,fill:co.TV.foregroundDimmest,css:Zo.icon}),(0,r.tZ)(y.xv,{variant:"subheadDefault",css:Zo.subTitle,multiline:!1,children:"Your Database is paused."}),(0,r.tZ)(bo,{loading:S,ubbExplanation:null===E||void 0===E?void 0:E.explanation,hasPaymentMethod:null===E||void 0===E?void 0:E.hasPaymentMethod,handleOnUnpause:function(){C({variables:{input:{replId:n,neonProjectId:i}}})},refetchUbbCapabilitiesQueryData:w,setShowPaymentMethodForm:function(){return u(!0)},showPaymentMethodForm:s,setShowSupportForm:function(){return h(!0)}})]})]})}var xo=function(e){var t=e.cyclesLow;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.xv,{css:[v.l0.fontSize(12),v.l0.color.foregroundDimmest],children:"You\u2019re paying ".concat(Li)}),t?(0,r.tZ)(g.G,{children:(0,r.tZ)(Re.E,{icon:(0,r.tZ)(Ee.Z,{}),colorway:"warning",text:"If your database use continues, you will be out of\n Cycles in [X] days and access to your database will be paused. \n Buy more Cycles or add a recurring Cycles subscription to prevent that from happening."})}):null]})},Co=n(3861),ko=n(54713),So=n(97307),Eo=n(96969),To=n(33672),Ro=n(70189);var Do=function(e){var t,n=e.neonDatabases,i=e.onDatabaseDeleted,l=e.onDatabaseUnfreezed,c=n[0],s=(0,Mn.Z)().showError,u=(0,fn.Z)(),d=function(){var e=a.useContext(Ro.Z);if(!e)throw new Error("Expected Repl info to be in context");return e.slug}(),f=Er(),h=Tr(),p=a.useCallback((function(){h("queryEditor")}),[h]),m=(0,o.Z)(Un(),2),Z=m[0],b=m[1].loading,w=a.useCallback((function(){D(!0)}),[]),x=(0,Eo.Z)({forceFetch:!1}),C=x.cycles,k=x.formattedBalanceValue,S="number"===typeof C&&C>Ni,E=a.useCallback((0,we.Z)((function(){var e,t,n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return[4,Z({variables:{input:{replId:u,databaseId:c.databaseId}}})];case 1:return e=r.sent(),t=e.data,n=e.errors,D(!1),n&&n.length>0?(s("Error when deleting Neon database: ".concat(null===n||void 0===n?void 0:n.join())),wr({action:"removed",success:!1}),[2]):"DeleteNeonDatabaseResult"!==(null===t||void 0===t?void 0:t.deleteNeonDatabase.__typename)?(s("Error: ".concat(null===t||void 0===t?void 0:t.deleteNeonDatabase.message)),wr({action:"removed",success:!1}),[2]):((null===t||void 0===t?void 0:t.deleteNeonDatabase.success)?(i(),wr({action:"removed",success:!0})):(s("Error: Delete Neon Database failed."),wr({action:"removed",success:!1})),[2])}}))})),[Z,c.databaseId,i,u,s]),T=(0,o.Z)(a.useState(!1),2),R=T[0],D=T[1],I=a.useCallback((function(){D(!1)}),[]),_=(0,o.Z)(a.useState(!1),2),B=_[0],G=_[1],P=a.useCallback((function(){G(!0)}),[]),A=(0,o.Z)(Xn(),2),N=A[0],U=A[1].loading,L=a.useCallback((0,we.Z)((function(){var e,t,n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return[4,N({variables:{input:{neonProjectId:c.projectId,replId:u}}})];case 1:return e=r.sent(),t=e.data,(n=e.errors)&&n.length>0?(s("Error when unfreezing Neon database: ".concat(null===n||void 0===n?void 0:n.join())),wr({action:"unfreeze",success:!1}),[2]):"UnfreezeNeonDatabaseResult"!==(null===t||void 0===t?void 0:t.unfreezeNeonDatabase.__typename)?(s("Error: Unfreezes Neon Database failed."),wr({action:"unfreeze",success:!1}),[2]):((null===t||void 0===t?void 0:t.unfreezeNeonDatabase.success)?(l(),wr({action:"unfreeze",success:!0})):(s("Error: Unfreezes Neon Database failed."),wr({action:"unfreeze",success:!1})),[2])}}))})),[c.projectId,l,u,s,N]),O=to(),X=pi({connectionString:c.connectionString,databaseName:c.databaseName}).PGHOST.split(".")[0],M=O||"".concat(c.connectionString,"/").concat(c.databaseName,"?sslmode=require&options=project%3D").concat(X);if("queryEditor"===f)return(0,r.tZ)(ti,{connectionString:M});if("tableSchemas"===f)return(0,r.tZ)(Ii,{connectionString:M});if(f.startsWith("table/")){var F=f.slice(f.indexOf("/")+1);return(0,r.tZ)($i,{tableName:F,connectionString:M})}return t=c.isFrozen?(0,r.BX)(r.HY,{children:[(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:[(0,r.tZ)(g.G,{css:[v.l0.width(8),v.l0.height(8),v.l0.backgroundColor.foregroundDimmer,v.l0.borderRadius("full")]}),(0,r.tZ)(y.xv,{css:[v.l0.color.foregroundDimmest],multiline:!1,children:"Database paused"})]}),(0,r.BX)(y.xv,{css:[v.l0.fontSize(12),v.l0.color.foregroundDimmest],children:["Databases cost ",Li]}),(0,r.BX)(g.G,{css:[v.l0.colWithGap(8),v.l0.align.center],children:[(0,r.tZ)(z.Z,{size:32,fill:v.TV.foregroundDimmest,css:v.l0.mt(32)}),(0,r.BX)(y.xv,{variant:"subheadDefault",css:[v.l0.my(16)],multiline:!1,children:["Your Database is paused. You have ",k," cycles."]}),(0,r.BX)(y.xv,{children:["Access to your databases will be paused until you"," ",S?"use cycles to resume database":"refill your Cycles balance","."]}),S?(0,r.tZ)(Se.zx,{css:v.l0.pt(8),iconLeft:(0,r.tZ)(To.Z,{}),onClick:L,disabled:U,text:"Unpause Database",colorway:"primary"}):null,(0,r.tZ)(Se.zx,{css:v.l0.pt(8),iconLeft:(0,r.tZ)(Co.Z,{}),onClick:P,text:S?"Buy more cycles":"Buy Cycles"})]}),(0,r.tZ)(So.Z,{noPadding:!0,isOpen:B,maxWidth:ko.W,onRequestClose:function(){return G(!1)},fitContent:!0,replTitle:d,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",initialTab:"cycles",allowCyclesPage:!0})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:[(0,r.tZ)(g.G,{css:[v.l0.width(8),v.l0.height(8),v.l0.backgroundColor.accentPositiveStronger,v.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(v.TV.accentPositiveStronger,")")}]}),(0,r.tZ)(y.xv,{css:[v.l0.color.accentPositiveStronger],multiline:!1,children:"Database connected"})]}),(0,r.tZ)(xo,{}),(0,r.tZ)(no,{title:"Database Info",children:(0,r.tZ)(Hi,{connectionString:M,onOpenDatabaseViewerClick:p})}),(0,r.tZ)(no,{title:"Using the database",isAccordion:!0,children:(0,r.tZ)(Ki.ZP,{css:[Yi.Z,v.l0.maxWidth("100%")],children:Qi})}),(0,r.tZ)(no,{title:"Environment variables",isAccordion:!0,children:(0,r.tZ)(vi,{connectionString:M,databaseName:c.databaseName})})]}),(0,r.BX)(g.G,{css:[v.l0.colWithGap(0),v.l0.height("100%"),v.l0.p(8)],children:[(0,r.tZ)(g.G,{css:[v.l0.colWithGap(16),v.l0.flex.grow(1),v.l0.flex.shrink(0)],children:t}),(0,r.tZ)(g.G,{css:[v.l0.pt(16)],children:R||b?(0,r.BX)(De.Tg,{css:[v.l0.p(8),v.l0.colWithGap(8)],elevated:!0,children:[(0,r.tZ)(y.xv,{children:"Removing this database will remove access to the data for this Repl, and remove the daily Cycles subscription of ".concat(Li,".")}),(0,r.tZ)(Re.E,{icon:(0,r.tZ)(Ee.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,r.tZ)(Se.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:b,iconLeft:(0,r.tZ)(Ue.Z,{}),onClick:E}),(0,r.tZ)(Se.zx,{text:"Cancel",disabled:b,onClick:I})]}):(0,r.tZ)(Se.zx,{css:[v.l0.py(8)],text:"Remove Database",disabled:b,iconLeft:(0,r.tZ)(Ue.Z,{}),onClick:w})}),(0,r.tZ)(ji,{})]})},Io=n(19344),_o=(0,Z.X)({self:[v.l0.colWithGap(0),v.l0.height("100%"),v.l0.p(8)],main:[v.l0.colWithGap(16),v.l0.flex.grow(1),v.l0.flex.shrink(0)],header:[v.l0.rowWithGap(8),v.l0.align.center],status:[v.l0.width(8),v.l0.height(8),v.l0.backgroundColor.accentPositiveStronger,v.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(v.TV.accentPositiveStronger,")")}],title:[v.l0.color.accentPositiveStronger],docs:[Yi.Z,v.l0.maxWidth("100%")],footer:[v.l0.pt(16)],remove:[v.l0.py(8)],removeConfirm:[v.l0.p(8),v.l0.colWithGap(8)]}),Bo=function(e){var t=e.neonDatabases,n=e.onDatabaseDeleted,i=e.onDatabaseUnfreezed,l=t[0],c=(0,Mn.Z)().showError,s=(0,fn.Z)(),u=Er(),d=Tr(),f=a.useCallback((function(){d("queryEditor")}),[d]),h=(0,o.Z)(Un(),2),p=h[0],m=h[1].loading,v=a.useCallback((function(){x(!0)}),[]),Z=a.useCallback((0,we.Z)((function(){var e,t,r;return(0,xe.__generator)(this,(function(i){switch(i.label){case 0:return[4,p({variables:{input:{replId:s,databaseId:l.databaseId}}})];case 1:return e=i.sent(),t=e.data,r=e.errors,x(!1),r&&r.length>0?(c("Error when deleting Neon database: ".concat(null===r||void 0===r?void 0:r.join())),wr({action:"removed",success:!1}),[2]):"DeleteNeonDatabaseResult"!==(null===t||void 0===t?void 0:t.deleteNeonDatabase.__typename)?(c("Error: ".concat(null===t||void 0===t?void 0:t.deleteNeonDatabase.message)),wr({action:"removed",success:!1}),[2]):((null===t||void 0===t?void 0:t.deleteNeonDatabase.success)?(n(),wr({action:"removed",success:!0})):(c("Error: Delete Neon Database failed."),wr({action:"removed",success:!1})),[2])}}))})),[p,l.databaseId,n,s,c]),b=(0,o.Z)(a.useState(!1),2),w=b[0],x=b[1],C=a.useCallback((function(){x(!1)}),[]),k=to(),S=pi({connectionString:l.connectionString,databaseName:l.databaseName}).PGHOST.split(".")[0],E=k||"".concat(l.connectionString,"/").concat(l.databaseName,"?sslmode=require&options=project%3D").concat(S);if("queryEditor"===u)return(0,r.tZ)(ti,{connectionString:E});if("tableSchemas"===u)return(0,r.tZ)(Ii,{connectionString:E});if(u.startsWith("table/")){var T=u.slice(u.indexOf("/")+1);return(0,r.tZ)($i,{tableName:T,connectionString:E})}return(0,r.BX)(g.G,{css:_o.self,children:[(0,r.tZ)(g.G,{css:_o.main,children:l.isFrozen?(0,r.tZ)(wo,{replId:s,neonProjectId:l.projectId,onDatabaseUnfreezed:i}):(0,r.BX)(r.HY,{children:[(0,r.BX)(g.G,{css:_o.header,children:[(0,r.tZ)(g.G,{css:_o.status}),(0,r.tZ)(y.xv,{css:_o.title,multiline:!1,children:"Database connected"})]}),(0,r.tZ)(no,{title:"Database Info",children:(0,r.tZ)(Hi,{connectionString:E,onOpenDatabaseViewerClick:f,showUsageLink:!0})}),(0,r.tZ)(no,{title:"Using the database",isAccordion:!0,children:(0,r.tZ)(Ki.ZP,{css:_o.docs,children:Qi})}),(0,r.tZ)(no,{title:"Environment variables",isAccordion:!0,children:(0,r.tZ)(vi,{connectionString:E,databaseName:l.databaseName})})]})}),(0,r.tZ)(g.G,{css:_o.footer,children:w||m?(0,r.BX)(De.Tg,{css:_o.removeConfirm,elevated:!0,children:[(0,r.tZ)(y.xv,{children:"Removing this database will remove access to the data for this Repl."}),(0,r.tZ)(Re.E,{icon:(0,r.tZ)(Ee.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,r.tZ)(Se.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:m,iconLeft:(0,r.tZ)(Ue.Z,{}),onClick:Z}),(0,r.tZ)(Se.zx,{text:"Cancel",disabled:m,onClick:C})]}):(0,r.tZ)(Se.zx,{css:_o.remove,text:"Remove Database",disabled:m,iconLeft:(0,r.tZ)(Ue.Z,{}),onClick:v})}),(0,r.tZ)(ji,{})]})},Go=function(e){var t=e.neonDatabases,n=e.onDatabaseDeleted,i=e.onDatabaseUnfreezed,o=t[0].isBackedByCycles;return(0,ro.P5)({controlName:Io.uZ,logFlagToAnalytics:!0})&&!o?(0,r.tZ)(Bo,{neonDatabases:t,onDatabaseDeleted:n,onDatabaseUnfreezed:i}):(0,r.tZ)(Do,{neonDatabases:t,onDatabaseDeleted:n,onDatabaseUnfreezed:i})},Po=n(84833),Ao=n(84165),No=n(31445),Uo=n(25149);function Lo(){var e=(0,hn.Z)(["\n  query NeonStartPage {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return Lo=function(){return e},e}var Oo={},Xo=(0,pn.Ps)(Lo(),io.eD);var Mo=n(92369),Fo=n(70135),Wo=n(58292),Ho="Buy Cycles & Create a DB",Vo="Use Cycles to create a DB",zo='Press "'.concat(Ho,'" to initiate a daily Cycles subscription and activate a Neon Database. You will be redirected to our payment processor.\n'),jo='Press "'.concat(Vo,'" to initiate a daily Cycles subscription and activate a Neon Database.'),qo=function(e){var t=e.onDatabaseCreated,n=(0,fn.Z)(),i=(0,Mn.Z)().showError,l=(0,o.Z)(An(),2),c=l[0],s=l[1].loading,u=(0,Eo.Z)({forceFetch:!0}),d=u.cycles,f=u.loading,h=null!=d&&d>=Ni,p=f?"Loading Cycles Balance":h?Vo:Ho,m=h?jo:zo,Z=a.useCallback((0,we.Z)((function(){var e,r,o,a,l,s,u,d,f,h;return(0,xe.__generator)(this,(function(p){switch(p.label){case 0:return[4,c({variables:{input:{replId:n}}})];case 1:return e=p.sent(),r=e.data,(o=e.errors)&&o.length>0?(i("Error when creating Neon database: ".concat(null===o||void 0===o?void 0:o.join())),wr({action:"created",success:!1}),[2]):"CreateNeonDatabaseResult"!==(null===r||void 0===r?void 0:r.createNeonDatabase.__typename)?(i("Error: ".concat(null===r||void 0===r?void 0:r.createNeonDatabase.message)),wr({action:"created",success:!1}),[2]):(a=r.createNeonDatabase,l=a.databaseId,s=a.databaseName,u=a.connectionString,d=a.projectId,f=a.isFrozen,h=a.isBackedByCycles,t({__typename:"NeonDatabase",databaseId:l,databaseName:s,connectionString:u,projectId:d,isFrozen:f,isBackedByCycles:h}),wr({action:"created",success:!0}),[2])}}))})),[c,n,i,t]),b=(0,o.Z)(a.useState(!1),2),w=b[0],x=b[1],C=a.useCallback((0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){return x(!0),[2]}))})),[]),k=a.useCallback((0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){return x(!1),[2]}))})),[]),S=a.useCallback((0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){switch(e.label){case 0:return[4,Z()];case 1:return e.sent(),x(!1),[2]}}))})),[Z]);return(0,r.BX)(g.G,{css:[v.l0.colWithGap(0),v.l0.height("100%"),v.l0.align.center,v.l0.p(8)],children:[(0,r.BX)(g.G,{css:[v.l0.colWithGap(16),v.l0.flex.grow(1),v.l0.flex.shrink(0),v.l0.maxWidth(600)],children:[(0,r.BX)(g.G,{css:[v.l0.colWithGap(8),v.l0.align.center],children:[(0,r.tZ)(g.G,{css:[v.l0.p(16)],children:(0,r.tZ)(Po.Z,{src:"/public/images/db_illustration.png",width:144,height:144,alt:"FPO visual"})}),(0,r.tZ)(y.xv,{css:[v.l0.fontSize(16),v.l0.fontWeight.bold],multiline:!1,children:"Fully-managed PostgreSQL database"}),(0,r.tZ)(y.xv,{css:[v.l0.fontSize(14)],multiline:!1,children:"10GB of fast read/write storage"}),(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:[(0,r.tZ)(y.xv,{css:[v.l0.fontSize(14)],multiline:!1,children:Li}),(0,r.tZ)(ne.hU,{alt:m,size:24,children:(0,r.tZ)(bi.Z,{})})]})]}),(0,r.BX)(De.Tg,{css:[v.l0.colWithGap(8),v.l0.mb(8)],background:"default",children:[(0,r.tZ)(Se.zx,{text:p,colorway:"primary",iconLeft:(0,r.tZ)(Dt.Z,{}),disabled:f||s,onClick:C}),(0,r.tZ)(Mo.Z,{href:Oi,target:"_blank",text:"Learn More",iconRight:(0,r.tZ)(Wo.Z,{}),variant:"outlined"})]}),(0,r.tZ)("hr",{css:[v.l0.my(16),{borderColor:v.TV.outlineDefault}]}),(0,r.tZ)(y.xv,{css:[v.l0.fontSize(12),v.l0.color.foregroundDimmest],children:m}),(0,r.tZ)(Fo.Z,{isOpen:w,onRequestClose:k,onRequestPowerUp:S,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",powerUp:"neon-database-preview"})]}),(0,r.tZ)(ji,{})]})},$o=(0,Z.X)({self:[v.l0.px(8),v.l0.pt(16)],container:[v.l0.colWithGap(32),v.l0.py(32),v.l0.textAlign.center,No.Qw.maxWidth],title:[v.l0.colWithGap(4),v.l0.width("100%"),v.l0.maxWidth(288),{marginLeft:"auto",marginRight:"auto"}],cta:[v.l0.width("100%"),v.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[v.l0.colWithGap(8),v.l0.align.center],ctaStatusBanner:[v.l0.textAlign.left],payment:[v.l0.p(16),v.l0.borderRadius(12),v.l0.textAlign.left,v.l0.shadow(2)],budgetContainer:[v.l0.colWithGap(8),v.l0.border(),v.l0.borderRadius(8),v.l0.p(8)],disabledBanner:[v.l0.py(6),{alignSelf:"center"}],details:[v.l0.colWithGap(12),v.l0.maxWidth(400),{marginLeft:"auto",marginRight:"auto"}],detailsItem:{display:"grid",gridTemplateColumns:"56px auto",gap:20},detailsText:[v.l0.flex.growAndShrink(1),v.l0.textAlign.left]});function Yo(e){var t=e.loading,n=e.ubbExplanation,i=e.hasPaymentMethod,o=e.handleOnCreate,a=e.refetchUbbCapabilitiesQueryData,l=e.setShowPaymentMethodForm,c=e.showPaymentMethodForm,s=e.setShowSupportForm,u=(0,X.rv)();return n===mo.Fp.NeedsSubscription||n===mo.Fp.NeedsSubscriptionOrPaymentMethod?u?(0,r.tZ)(Re.E,{text:"You need a subscription to create a database. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,r.tZ)(ho.Warning,{}),css:$o.ctaStatusBanner}):(0,r.BX)(g.G,{css:$o.ctaContainer,children:[(0,r.tZ)(po.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to create a database",css:$o.cta,colorway:"primary",variant:"outlined",disabled:c,onPlanCheckoutComplete:a}),(0,r.tZ)(Se.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:$o.cta,disabled:c,loading:t,iconLeft:(0,r.tZ)(ho.CreditCard,{}),onClick:function(){return l()}})]}):n===mo.Fp.NeedsSmsVerification?(0,r.tZ)(so.Z,{context:mo.jv.Neon,onSuccess:a}):n===mo.Fp.NeedsPaymentMethod?u?(0,r.tZ)(Re.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,r.tZ)(ho.Warning,{}),css:$o.ctaStatusBanner}):(0,r.tZ)(Se.zx,{colorway:"primary",text:"Add a payment method",css:$o.cta,disabled:c,loading:t,iconLeft:(0,r.tZ)(ho.CreditCard,{}),onClick:function(){return l()}}):n===mo.Fp.NeedsUnbanning?(0,r.tZ)(fo.u,{text:"Your account currently has restrictions on creating a database. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",icon:(0,r.tZ)(ho.Warning,{}),css:$o.ctaStatusBanner,onClick:function(){return s()}}):n===mo.Fp.InsufficientBudget?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Re.E,{text:"You've reached your monthly usage budget. Increase your budget to create a database.",colorway:"warning",icon:(0,r.tZ)(ho.Warning,{}),css:$o.ctaStatusBanner}),(0,r.tZ)(g.G,{css:$o.budgetContainer,children:(0,r.tZ)(uo.L,{onUpdateSuccess:a})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Se.zx,{colorway:"primary",onClick:o,text:"Create a database",loading:t,css:$o.cta}),!1===i?(0,r.tZ)(fo.u,{text:"Add a payment method to avoid downtime",colorway:"warning",icon:(0,r.tZ)(ho.Warning,{}),css:$o.ctaStatusBanner,onClick:function(){return u?null:l()}}):null]})}var Ko=function(e){var t,n=e.onDatabaseCreated,i=(0,o.Z)(a.useState(!1),2),l=i[0],c=i[1],s=(0,o.Z)(a.useState(!1),2),u=s[0],d=s[1],f=(0,fn.Z)(),h=(0,Mn.Z)().showError,p=function(e){var t=(0,Ze.Z)({},Oo,e);return mn.a(Xo,t)}({notifyOnNetworkStatusChange:!0,onError:function(e){h(e.message)}}),m=p.loading,Z=p.data,b=p.refetch,w=(0,o.Z)(An({onError:function(e){h("Error when creating Neon database: ".concat(e.message)),wr({action:"created",success:!1})},onCompleted:function(e){if("CreateNeonDatabaseResult"!==(null===e||void 0===e?void 0:e.createNeonDatabase.__typename))return h("Error: ".concat(null===e||void 0===e?void 0:e.createNeonDatabase.message)),void wr({action:"created",success:!1});var t=e.createNeonDatabase,r=t.databaseId,i=t.databaseName,o=t.connectionString,a=t.projectId,l=t.isFrozen,c=t.isBackedByCycles;n({__typename:"NeonDatabase",databaseId:r,databaseName:i,connectionString:o,projectId:a,isFrozen:l,isBackedByCycles:c}),wr({action:"created",success:!0})}}),2),x=w[0],C=w[1].loading,k=m||C,S="UserUsageBasedBillingSummary"===(null===Z||void 0===Z||null===(t=Z.currentUser)||void 0===t?void 0:t.usageBasedBilling.__typename)?Z.currentUser.usageBasedBilling.capabilities:null;return(0,r.BX)(g.G,{css:$o.self,children:[(0,r.tZ)(yo.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,r.tZ)(vo.Z,{onRequestClose:function(){return d(!1)},items:go.lF})}),(0,r.BX)(g.G,{css:$o.container,children:[(0,r.BX)(g.G,{css:$o.title,children:[(0,r.tZ)(y.xv,{variant:"subheadBig",children:"PostgreSQL Database"}),(0,r.tZ)(y.xv,{color:"dimmer",children:"Fully-managed, usage based PostgreSQL database with 10GB of fast read/write storage."}),(0,r.tZ)(y.xv,{css:v.l0.textAlign.center,children:(0,r.tZ)("a",{href:Oi,target:"_blank",rel:"noopener",children:"Learn more"})})]}),(0,r.BX)(g.G,{css:v.l0.colWithGap(16),children:[(0,r.tZ)(g.G,{css:[v.l0.rowWithGap(0),v.l0.justify.center],children:(0,r.tZ)(Po.Z,{src:"/public/images/db_illustration.png",width:120,height:120,alt:"FPO visual"})}),(0,r.BX)(g.G,{css:v.l0.colWithGap(8),children:[(0,r.tZ)(Yo,{loading:k,ubbExplanation:null===S||void 0===S?void 0:S.explanation,hasPaymentMethod:null===S||void 0===S?void 0:S.hasPaymentMethod,handleOnCreate:function(){x({variables:{input:{replId:f}}})},refetchUbbCapabilitiesQueryData:b,setShowPaymentMethodForm:function(){return c(!0)},showPaymentMethodForm:l,setShowSupportForm:function(){return d(!0)}}),l?(0,r.tZ)(De.Tg,{elevated:!0,css:$o.payment,children:(0,r.tZ)(Uo.q,{onSuccess:(0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){switch(e.label){case 0:return c(!1),[4,b()];case 1:return e.sent(),[2]}}))})),context:"workspace_hosting_pane"})}):null]})]}),(0,r.BX)(g.G,{css:$o.details,children:[(0,r.BX)(g.G,{css:$o.detailsItem,children:[(0,r.tZ)(Ao.lt,{}),(0,r.tZ)(y.xv,{css:$o.detailsText,children:"Get charged for what you use across compute time, storage, written data and data transfer"})]}),(0,r.BX)(g.G,{css:$o.detailsItem,children:[(0,r.tZ)(Ao.fG,{}),(0,r.tZ)(y.xv,{css:$o.detailsText,children:"Free usage allocations are included in Replit plans, and are then billed at a per unit price"})]})]})]})]})},Qo=function(e){var t=e.onDatabaseCreated;return(0,ro.P5)({controlName:Io.uZ,logFlagToAnalytics:!0})?(0,r.tZ)(Ko,{onDatabaseCreated:t}):(0,r.tZ)(qo,{onDatabaseCreated:t})},Jo=function(){var e=(0,fn.Z)(),t=(0,Mn.Z)().showError,n=(0,d.Z)().psql,i=(0,o.Z)(a.useState([]),2),l=i[0],c=i[1],s=function(e){var t=(0,Ze.Z)({},Gn,e);return mn.a(Ln,t)}({variables:{input:{replId:e}},fetchPolicy:"no-cache",onCompleted:function(e){"GetNeonDatabasesResult"!==e.getNeonDatabases.__typename?t("Error: ".concat(e.getNeonDatabases.message)):c(e.getNeonDatabases.databases)}}),u=s.loading,f=s.refetch,h=mi(),p=a.useCallback(function(){var e=(0,we.Z)((function(e){var r,i,o;return(0,xe.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),c([e]),[4,n.ensureNixPsqlPackageInstalled(!0)];case 1:return a.sent(),r=e.connectionString,i=e.databaseName,h({connectionString:r,databaseName:i}),[3,3];case 2:return o=a.sent(),t("Error: ".concat(o.message)),[3,3];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[n,h,t]),m=(0,se.Dv)(Ji);return m?(0,r.tZ)(Go,{neonDatabases:[m],onDatabaseDeleted:f,onDatabaseUnfreezed:f}):u?(0,r.tZ)(g.G,{css:[v.l0.flex.row,v.l0.justify.center,v.l0.p(32)],children:(0,r.tZ)(oe.Z,{})}):l.length?(0,r.tZ)(Go,{neonDatabases:l,onDatabaseDeleted:f,onDatabaseUnfreezed:f}):(0,r.tZ)(Qo,{onDatabaseCreated:p})},ea=n(35054),ta=I.Type.Object({type:I.Type.Literal("neon")}),na={Content:function(){return(0,r.tZ)(Jo,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(ea.Z,{size:t})},getTitle:function(){return"PostgreSQL"},decode:function(e){return _.B4.Decode(ta,e)}},ra=n(5478),ia=n(40770),oa=n(13218),aa=I.Type.Object({type:I.Type.Literal("vnc")}),la={Content:function(){return(0,r.tZ)(ca,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(ia.Z,{size:t})},getTitle:function(){return"Output"},decode:function(e){return _.B4.Decode(aa,e)}};function ca(){var e=(0,d.Z)(),t=e.fs,n=e.container;return(0,r.tZ)(g.G,{css:[v.l0.flex.growAndShrink(1)],children:(0,r.tZ)(oa.Z,{fs:t,container:n})})}var sa=n(22271),ua=n(40380),da=I.Type.Object({type:I.Type.Literal("shell"),data:I.Type.Optional(I.Type.Object({initialPwd:I.Type.Optional(I.Type.String())}))}),fa={Content:function(e){var t,n=e.pane;return(0,r.tZ)(ha,{initialPwd:null===(t=n.data)||void 0===t?void 0:t.initialPwd})},Icon:function(e){var t=e.size;return(0,r.tZ)(ua.Z,{size:t})},getTitle:function(){return"Shell"},decode:function(e){return _.B4.Decode(da,e)}};function ha(e){var t=e.initialPwd,n=(0,d.Z)().container,i=(0,o.Z)(a.useState(!1),2),l=i[0],c=i[1],s=(0,o.Z)((0,sa.St)({container:n,initialPwd:t,onOutput:(0,a.useCallback)((function(){c(!0)}),[c])}),3),u=s[0],f=s[1],h=s[2];return(0,x.Wk)((function(){return u}),[u]),(0,x.L5)((function(){if(u&&l)return{type:"shell",exec:function(e){h(e+"\n")}}}),[u,h,l]),(0,r.tZ)(sa.N2,{shell:u,shellRef:f})}var pa=n(86763),ma=n.n(pa),va=n(87693);function ga(){var e=(0,hn.Z)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return ga=function(){return e},e}function ya(){var e=(0,hn.Z)(["\n  mutation sawDrawCtaToursSeen($name: String!) {\n    toursSeen(name: $name) {\n      name\n      success\n    }\n  }\n"]);return ya=function(){return e},e}var Za={},ba=(0,pn.Ps)(ga());ya();var wa=n(716),xa=n(77463),Ca=function(e,t,n){var r;if(!e)return[];var i=t(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=n.reduce((function(e,t){var n,r,a;return t.id===(null===(n=o.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[t.id]&&i[t.id].version>t.version?(e.push(i[t.id]),delete i[t.id]):i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce?(i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]):(e.push(t),delete i[t.id])),e}),[])).concat.apply(r,(0,ee.Z)(Object.values(i)))},ka=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n},Sa=function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})},Ea=n(92674),Ta=n.n(Ea),Ra=n(12901),Da=n(5295),Ia=(0,an.iv)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",Da.Mz-1,"px;}");function _a(e){var t,i=e.fs,l=e.presence,c=e.broadcast,s=e.filePath,u=(0,a.useState)(void 0),d=u[0],f=u[1],h=(0,Ra.Z)(),p=(0,a.useRef)((function(e){return(0,ee.Z)(e)})),m=(0,a.useRef)((function(e){return-1})),y=(0,a.useRef)({readyPromise:ka()}),Z=(0,a.useRef)({promise:null});(0,a.useEffect)((function(){Promise.all([n.e(6655),n.e(3668)]).then(n.t.bind(n,63668,23)).then((function(e){p.current=function(t){return t.filter((function(t){return t.isDeleted||!e.isInvisiblySmallElement(t)}))},m.current=e.getSceneVersion,f(e.Excalidraw)}))}),[]);var b=function(){return y.current},w=function(e){var t=(0,Ze.Z)({},Za,e);return mn.a(ba,t)}({ssr:!1}),x=w.data,C=w.loading,k=(null===x||void 0===x||null===(t=x.currentUser)||void 0===t?void 0:t.username)||"",S=(0,va.F)().isDarkColorScheme,E=(0,wa.Z)({presence:l}),T=(0,xa.Z)(),R=null===T||void 0===T?void 0:T.color,D=(0,a.useState)(new Map),I=D[0],_=D[1],B=(0,a.useState)(-1),G=B[0],P=B[1],A=(0,a.useRef)(Ta()()).current;(0,a.useEffect)((function(){function e(){return e=(0,we.Z)((function(){var e,t;return(0,xe.__generator)(this,(function(n){switch(n.label){case 0:return x&&x.currentUser?[4,y.current.readyPromise]:[2];case 1:return n.sent(),e=b().getAppState().collaborators,t=new Map,E.forEach((function(n){var r;if(n.username!==(null===x||void 0===x||null===(r=x.currentUser)||void 0===r?void 0:r.username)){var i=e.get(n.username)||{};t.set(n.username,(0,be.Z)((0,Ze.Z)({},i),{username:n.username,color:{background:n.color,foreground:n.color}}))}})),b().updateScene({collaborators:t}),[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x,E]);var N=function(){var e=(0,we.Z)((function(e,t){var n,r,i,o,a,l;return(0,xe.__generator)(this,(function(u){t||(e=e.filter((function(e){return!I.has(e.id)||e.version>I.get(e.id)}))),n=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)l=a.value,I.set(l.id,l.version),_(new Map(I))}catch(d){r=!0,i=d}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return c.broadcastMessage(A,{text:JSON.stringify({elements:e,path:s})}),[2]}))}));return function(t,n){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){if(c)return c.onBroadcastReceived(A,(function(e){var t=e.username,n=e.text,r=JSON.parse(n);if(r.path===s)if(r.collaborator&&y.current){var i=b().getAppState().collaborators;i.set(t,(0,be.Z)((0,Ze.Z)({},i.get(t),r.collaborator),{username:t})),b().updateScene({collaborators:i})}else if(r.elements){var o=Ca(b(),Sa,r.elements);P(m.current(o)),b().updateScene({elements:o})}else if(r.removePresence){var a=b().getAppState().collaborators;a.delete(r.removePresence),b().updateScene({collaborators:a})}}))}),[c,s,A]),(0,a.useEffect)((function(){function e(){return e=(0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){return s&&i?(Z.current.promise=new Promise(function(){var e=(0,we.Z)((function(e){var t,n,r,a,l;return(0,xe.__generator)(this,(function(c){switch(c.label){case 0:return[4,Promise.all([i.readFile(s),y.current.readyPromise])];case 1:return t=o.Z.apply(void 0,[c.sent(),1]),"content"in(n=t[0])&&(r=n.content.toString(),a=JSON.parse(r||"{}"),l=b().getAppState(),a.appState=(0,Ze.Z)({},l),a.scrollToContent=!0,e(a)),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),[2]):[2]}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[s,i]);var U=(0,a.useCallback)(ma()(function(){var e=(0,we.Z)((function(e,t){var n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return n=e.filter((function(e){return!e.isDeleted})),s?[4,i.writeFile(s,ii.Z.from(JSON.stringify({elements:n,files:t})))]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),350),[s]);return(0,r.BX)(g.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:R?"0 3px 0 3px ".concat(R):"none",backgroundColor:v.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){c.broadcastMessage(A,{text:JSON.stringify({removePresence:k,path:s})})},children:[d&&!C?(0,r.tZ)(d,{ref:y,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:S?"dark":"light",initialData:Z.current.promise,onPointerUpdate:function(e){var t=e.pointer,n=b().getAppState().selectedElementIds||{};c.broadcastMessage(A,{text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:s})})},onChange:function(e,t,n){!function(e){m.current(e)>G&&(G>-1&&N(p.current(e),!1),P(m.current(e)))}(e),P(m.current(e)),m.current(e)>G&&U(e,n)},user:{name:k}}):null,h?(0,r.tZ)(an.xB,{styles:[Ia]}):null]})}function Ba(e){var t=e.fs,n=e.presence,i=e.broadcast,o=e.filePath;return(0,r.tZ)(_a,{fs:t,presence:n,broadcast:i,filePath:o},o)}var Ga=n(72598),Pa=I.Type.Object({type:I.Type.Literal("draw"),data:I.Type.Object({path:I.Type.String()})}),Aa={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,r.tZ)(Na,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,r.tZ)(Ga.Z,{size:t})},getTitle:function(e){return(0,D.UO)(e.data.path)},decode:function(e){return _.B4.Decode(Pa,e)}};function Na(e){var t=e.path,n=e.performPaneOperation,i=(0,d.Z)(),o=i.fs,a=i.broadcast,l=i.presence,c=(0,bt.Mp)({path:t,performPaneOperation:n});return(0,x.L5)((function(){if(c)return{commands:c}}),[c]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(bt.HK,{path:t,performPaneOperation:n}),(0,r.tZ)(bt.VY,{children:(0,r.tZ)(Ba,{fs:o,broadcast:a,presence:l,filePath:t})})]})}var Ua=n(94749),La=n(22004),Oa=n(51087),Xa=I.Type.Object({type:I.Type.Literal("media"),data:I.Type.Object({path:I.Type.String()})}),Ma={Content:function(e){var t=e.pane,n=e.options;return(0,r.tZ)(Fa,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,r.tZ)(La.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,D.UO)(e.data.path)},decode:function(e){return _.B4.Decode(Xa,e)}};function Fa(e){var t=e.path,n=e.performPaneOperation,i=(0,d.Z)().fs,o=(0,bt.Mp)({path:t,performPaneOperation:n}),a=o?(0,ee.Z)(o):[],l={match:Oa.pl,data:{label:"Open in Editor",icon:(0,r.tZ)(C.Z,{}),type:"action",run:function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}}};return(0,D.B4)(t)&&a.push(l),(0,x.L5)((function(){if(o)return{commands:a}}),[o]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(bt.HK,{path:t,performPaneOperation:n}),(0,r.tZ)(bt.VY,{centered:!0,children:(0,r.tZ)(Ua.Z,{filePath:t,fs:i})})]})}var Wa=n(91402),Ha=n(91625),Va=n(25593),za=n(87803),ja=(0,Z.X)({container:[v.l0.width(60),v.l0.height(24),v.l0.display.flex,v.l0.center,v.l0.borderRadius(4),v.l0.fontSize(v.TV.fontSizeSmall)]});function qa(e){var t,n,i;switch(e.type){case za.h.ADDED:case za.h.UNTRACKED:t="Added",n=v.TV.greenDimmest,i=v.TV.greenStrongest;break;case za.h.MODIFIED:t="Modified",n=v.TV.yellowDimmest,i=v.TV.yellowStrongest;break;case za.h.DELETED:t="Deleted",n=v.TV.redDimmest,i=v.TV.redStrongest;break;case za.h.RENAMED:t="Renamed",n=v.TV.tealDimmest,i=v.TV.tealStrongest;break;case za.h.COPIED:t="Copy",n=v.TV.limeDimmest,i=v.TV.limeStrongest;break;default:return null}return(0,r.tZ)(g.G,{style:{backgroundColor:n,color:i},css:ja.container,children:(0,r.tZ)("span",{children:t})})}function $a(e){var t,n,i;switch(e.type){case"ADDED":t="Added",n=v.TV.greenDimmest,i=v.TV.greenStrongest;break;case"MODIFIED":t="Modified",n=v.TV.yellowDimmest,i=v.TV.yellowStrongest;break;case"DELETED":t="Deleted",n=v.TV.redDimmest,i=v.TV.redStrongest;break;case"RENAMED":t="Renamed",n=v.TV.tealDimmest,i=v.TV.tealStrongest;break;case"COPIED":t="Copy",n=v.TV.limeDimmest,i=v.TV.limeStrongest;break;default:return null}return(0,r.tZ)(g.G,{style:{backgroundColor:n,color:i},css:ja.container,children:(0,r.tZ)("span",{children:t})})}var Ya=n(45636),Ka=n(58444),Qa=n(77637),Ja=n(81362),el="rgba(180, 0, 0, 0.125)",tl="rgba(0, 180, 0, 0.125)",nl=tl,rl=el,il=Wn.tk.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:"rgba(0, 180, 0, 0.125)"},"&.cm-merge-a .cm-changedLineGutter":{background:"rgba(180, 0, 0, 0.125)"},"&.cm-merge-b .cm-changedText":{background:nl,outline:"solid 1px ".concat(nl),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:rl,outline:"solid 1px ".concat(rl),borderRadius:"2px"},".cm-collapsedLines":{color:co.TV.accentPrimaryStrongest,background:co.TV.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:co.TV.accentPrimaryDimmer}}}),ol=[Wn.tk.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),Wn.tk.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],al=[Vn.Wl.highest(ol),il],ll=n(95667),cl=n(12045),sl=n(67932);var ul=n(51467);function dl(e){var t,n,i=e.a,o=e.b,l=e.style,c=e.className,s=(0,Qa.Z)(e,["a","b","style","className"]),u=(0,a.useState)(null),d=u[0],f=u[1],h=(0,a.useState)(null),p=h[0],m=h[1],v=(0,a.useRef)(!1),g=(0,ul.Z)(s),y=(0,ul.Z)(i.doc),Z=(0,ul.Z)(o.doc),b=(0,Wr.Xl)((0,be.Z)((0,Ze.Z)({},i),{readOnly:!0})),w=(0,Wr.Xl)((0,be.Z)((0,Ze.Z)({},o),{readOnly:!0})),x=function(){var e=(0,a.useState)()[1];return(0,a.useCallback)((function(t){e((function(){throw t}))}),[])}(),C=s.orientation,k=s.revertControls,S=s.renderRevertControl,E=s.collapseUnchanged,T=s.gutter,R=s.highlightChanges,D=void 0!==E,I=null===E||void 0===E?void 0:E.margin,_=null===E||void 0===E?void 0:E.minSize,B=null!==(t=null===p||void 0===p?void 0:p.a)&&void 0!==t?t:null,G=null!==(n=null===p||void 0===p?void 0:p.b)&&void 0!==n?n:null;return(0,Wr.uF)(),(0,a.useEffect)((function(){var e=function(e){x(e)};if(d){var t=null;try{t=new Ja.QK((0,be.Z)((0,Ze.Z)({},g.current),{parent:d,a:{doc:y.current,extensions:[Wn.tk.exceptionSink.of(e),al].concat((0,ee.Z)(b))},b:{doc:Z.current,extensions:[Wn.tk.exceptionSink.of(e),al].concat((0,ee.Z)(w))}}))}catch(n){e(n)}return t&&(m(t),v.current=!0),function(){if(t){m(null);try{t.destroy()}catch(n){e(n)}}}}}),[d]),(0,a.useEffect)((function(){B&&!v.current&&B.dispatch({changes:{from:0,to:B.state.doc.length,insert:i.doc}})}),[B,i.doc]),(0,a.useEffect)((function(){G&&!v.current&&G.dispatch({changes:{from:0,to:G.state.doc.length,insert:o.doc}})}),[G,o.doc]),(0,a.useEffect)((function(){p&&!v.current&&fl(p,g.current.collapseUnchanged)}),[p,g,i.doc,o.doc]),(0,a.useEffect)((function(){if(p&&!v.current){var e=D?{margin:I,minSize:_}:void 0;p.reconfigure({orientation:C,revertControls:k,renderRevertControl:S,collapseUnchanged:e,gutter:T,highlightChanges:R}),e&&fl(p,e)}}),[p,C,k,S,D,I,_,T,R]),(0,cl.H)(B),(0,cl.H)(G),(0,ll.Z)(B),(0,ll.Z)(G),(0,a.useEffect)((function(){v.current=!1})),(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{ref:f,className:c,style:l}),(0,r.tZ)(sl.N1,{view:B}),(0,r.tZ)(sl.N1,{view:G})]})}function fl(e,t){e&&t&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,Ze.Z)({},t)}))}var hl=n(1645),pl=[{"& > span:first-child-of-type":[v.l0.flex.grow(1),v.l0.textAlign.left]},{"& > span":[v.l0.flex.shrink(1)]},v.l0.height("auto"),v.l0.p(8),v.l0.fontWeight.medium,v.l0.backgroundColor.backgroundHigher,v.l0.flex.row,v.l0.align.center,v.l0.justify.spaceBetween,v.l0.overflow("hidden"),v.l0.cursor.pointer],ml=(0,Z.X)({buttonFolded:[pl,v.l0.borderRadius(8)],buttonUnfolded:[pl,v.l0.borderRadius(8,8,0,0)],rowContainer:[v.l0.align.center,v.l0.rowWithGap(8),v.l0.position.relative,v.l0.zIndex(1),v.l0.overflow("hidden")],diffContainer:[v.l0.flex.grow(1),v.l0.borderRadius(8)],bodyContainer:[v.l0.borderRadius(0,0,8,8),v.l0.p(8),v.l0.display.flex,v.l0.flex.row,v.l0.flex.wrap,v.l0.align.center,v.l0.justify.center,v.l0.backgroundColor.backgroundDefault,v.l0.border({color:v.TV.outlineDimmer,direction:"bottom"}),v.l0.border({color:v.TV.outlineDimmer,direction:"left"}),v.l0.border({color:v.TV.outlineDimmer,direction:"right"})],noChangesContainer:[v.l0.py(8),v.l0.px(8),v.l0.center],buttonGroupItem:[v.l0.width(64),v.l0.height(32)]}),vl=function(e){var t=e.value,n=e.onChange;return(0,r.BX)(hl.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,r.tZ)(g.G,{css:ml.buttonGroupItem,children:(0,r.tZ)(hl.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,r.tZ)(g.G,{css:ml.buttonGroupItem,children:(0,r.tZ)(hl.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},gl=function(e){var t=e.folded,n=void 0!==t&&t,i=e.setFolded,o=e.diff,a="".concat(o.initial.path,"/").concat(o.initial.filename),l="".concat(o.final.path,"/").concat(o.final.filename);return(0,r.BX)(g.G,{css:n?ml.buttonFolded:ml.buttonUnfolded,onClick:function(){return i(!n)},children:[(0,r.BX)(g.G,{css:[ml.rowContainer,v.l0.flex.shrink(1)],children:["RENAMED"===o.status||"COPIED"===o.status?(0,r.BX)(r.HY,{children:[(0,r.tZ)(La.Z,{path:a}),(0,r.tZ)(y.xv,{multiline:!1,children:o.initial.filename}),""===o.initial.path?null:(0,r.tZ)(y.xv,{multiline:!1,color:"dimmest",css:[v.l0.fontWeight.normal],maxLines:1,children:o.initial.path}),(0,r.tZ)(Gt.Z,{}),(0,r.tZ)(La.Z,{path:l}),(0,r.tZ)(y.xv,{multiline:!1,children:o.final.filename}),""===o.final.path?null:(0,r.tZ)(y.xv,{multiline:!1,color:"dimmest",css:[v.l0.fontWeight.normal],children:o.final.path})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(La.Z,{path:l}),(0,r.tZ)(y.xv,{multiline:!1,children:o.final.filename}),""===o.final.path?null:(0,r.tZ)(y.xv,{multiline:!1,color:"dimmest",css:[v.l0.fontWeight.normal],children:o.final.path})]}),(0,r.tZ)(Ya.j,{textToCopy:l,alt:"Copy Full Path",tooltip:"Copied!",tooltipPlacement:"bottom-end",timeout:2e3,children:(0,r.tZ)(Pt.Z,{})})]}),(0,r.BX)(g.G,{css:ml.rowContainer,children:[(0,r.tZ)($a,{type:o.status}),(0,r.tZ)(ne.hU,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return i(!n)},children:n?(0,r.tZ)(Ha.Z,{}):(0,r.tZ)(Va.Z,{})})]})]})},yl=function(e){var t=e.diff;return"Split"===e.splitOrUnified?(0,r.tZ)(dl,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content},collapseUnchanged:{},style:{width:"100%"}}):(0,r.tZ)(Wr.ZP,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[Ka.p.of(Vn.xv.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},Zl=function(e){var t=e.diff,n=e.splitOrUnified;return t.loading?(0,r.tZ)(g.G,{css:ml.noChangesContainer,children:(0,r.tZ)(oe.Z,{size:20})}):t.initial.content===t.final.content?(0,r.tZ)(g.G,{css:ml.noChangesContainer,children:(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:"There are no changes to show."})}):(0,r.tZ)(yl,{diff:t,splitOrUnified:n})},bl=function(e){var t=e.diff,n=e.folded,i=e.setFolded,o=e.splitOrUnified;return(0,r.BX)(g.G,{css:ml.diffContainer,children:[(0,r.tZ)(gl,{folded:n,setFolded:i,diff:t}),n?null:(0,r.tZ)(De.Tg,{css:ml.bodyContainer,elevated:!0,children:(0,r.tZ)(Zl,{diff:t,splitOrUnified:o})})]},t.id)},wl=n(28991),xl=n(43182),Cl=function(e){var t=e.context,n=e.gitService,r=e.result;xl.$e((function(e){e.setTag("service","git"),e.setTag("context",t),e.setExtra("env",n.getEnv()),xl.Tb(r.error)}))},kl=function(){var e=(0,we.Z)((function(e,t,n){var r;return(0,xe.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getFileContents({path:t,revision:n})];case 1:if((r=i.sent()).error)throw Cl({context:"use-file-at-revision-fetch-content",gitService:e,result:r}),r.error;return[2,r.content||""]}}))}));return function(t,n,r){return e.apply(this,arguments)}}(),Sl=function(e,t){var n=(0,a.useState)(null),r=n[0],i=n[1],o=(0,a.useState)(!0),l=o[0],c=o[1],s=(0,wl.Z)(function(){var n=(0,we.Z)((function(n){var r,i;return(0,xe.__generator)(this,(function(o){switch(o.label){case 0:c(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,kl(n,e,t)];case 2:return r=o.sent(),c(!1),[2,{content:r,error:null}];case 3:return i=o.sent(),c(!1),[2,{content:null,error:i}];case 4:return[2]}}))}));return function(e){return n.apply(this,arguments)}}(),[e,t]);return(0,a.useEffect)((function(){s&&(s.error?i(null):i(s.content))}),[s]),{fileContent:r,loading:l}},El=I.Type.Object({type:I.Type.Literal("diff"),data:I.Type.Object({left:I.Type.Object({path:I.Type.String(),revision:I.Type.String()}),right:I.Type.Object({path:I.Type.String(),revision:I.Type.String()})})}),Tl=(0,Z.X)({container:[v.l0.colWithGap(16),v.l0.p(8)],header:[v.l0.mt(0),v.l0.mb(8)],emphasizedText:[v.l0.fontWeight.bold],bodyContainer:[v.l0.borderRadius(8),v.l0.p(8),v.l0.display.flex,v.l0.flex.row,v.l0.flex.wrap,v.l0.align.center,v.l0.justify.center,v.l0.backgroundColor.backgroundDefault,v.l0.border({color:v.TV.outlineDimmest,direction:"full"})],tooltipContainer:[v.l0.display.inlineBlock]}),Rl=function(e){var t=e.filename,n=e.onFileClick;return(0,r.tZ)("span",{css:Tl.tooltipContainer,children:(0,r.tZ)(ae.u,{tooltip:"View file",children:(0,r.tZ)("button",{css:[v.l0.reset.button,v.l0.linkStyle,v.l0.fontWeight.medium],onClick:n,children:t})})})},Dl=function(e){return""===e?"working directory":"".concat(e)},Il=function(e){var t=e.left,n=e.right,i=e.onFileClick,o=t.path===n.path,a=t.revision===n.revision;return o?a?(0,r.BX)(y.h4,{level:1,variant:"text",css:Tl.header,children:["Comparing"," ",(0,r.BX)("span",{css:Tl.emphasizedText,children:[(0,r.tZ)(Rl,{filename:t.path,onFileClick:i})," ",Dl(t.revision)]})," ","to itself"]}):(0,r.BX)(y.h4,{level:1,variant:"text",css:Tl.header,children:["Comparing"," ",(0,r.BX)("span",{css:Tl.emphasizedText,children:[(0,r.tZ)(Rl,{filename:t.path,onFileClick:i})," ",Dl(t.revision)]})," ","to"," ",(0,r.tZ)("span",{css:Tl.emphasizedText,children:Dl(n.revision)})]}):a?(0,r.BX)(y.h4,{level:1,variant:"text",css:Tl.header,children:["Comparing ",(0,r.tZ)("span",{css:Tl.emphasizedText,children:t.path})," to"," ",(0,r.BX)("span",{css:Tl.emphasizedText,children:[(0,r.tZ)(Rl,{filename:n.path,onFileClick:i})," ",Dl(t.revision)]})]}):(0,r.BX)(y.h4,{level:1,variant:"text",css:Tl.header,children:["Comparing"," ",(0,r.BX)("span",{css:Tl.emphasizedText,children:[t.path," ",Dl(t.revision)]})," ","to"," ",(0,r.BX)("span",{css:Tl.emphasizedText,children:[(0,r.tZ)(Rl,{filename:n.path,onFileClick:i})," ",Dl(n.revision)]})]})},_l={Content:function(e){var t=e.pane.data,n=t.left,i=t.right,o=e.options.performPaneOperation,l=(0,a.useState)("Split"),c=l[0],s=l[1],u=Sl(n.path,n.revision),d=u.fileContent,f=u.loading,h=Sl(i.path,i.revision),p=h.fileContent,m=h.loading;return(0,r.BX)(g.G,{css:Tl.container,children:[(0,r.tZ)(Il,{left:n,right:i,onFileClick:function(){var e=(0,A.Dp)({path:i.path});o({operation:"open",pane:{type:e,data:{path:i.path}}})}}),(0,r.tZ)(vl,{value:c,onChange:s}),(0,r.tZ)(De.Tg,{css:Tl.bodyContainer,children:(0,r.tZ)(Zl,{diff:{loading:f||m,initial:{filename:(0,D.UO)(n.path),path:(0,D.Il)(n.path),content:null!==d&&void 0!==d?d:""},final:{filename:(0,D.UO)(i.path),path:(0,D.Il)(i.path),content:null!==p&&void 0!==p?p:""}},splitOrUnified:c})})]})},Icon:function(){return(0,r.tZ)(Wa.Z,{})},getTitle:function(){return"Diff"},decode:function(e){return _.B4.Decode(El,e)}},Bl=n(38256),Gl=n(15935),Pl=n(79697),Al=n(70232),Nl=n(89898),Ul=n(81962),Ll=n(82417),Ol=n(63181);function Xl(e){return!!e&&("string"===typeof e?e.includes(Ol.Kd):e.fetch.includes(Ol.Kd))}function Ml(e){return e.endsWith(".git")?e.slice(0,-4):e}function Fl(e){if(!e)return null;var t="string"===typeof e?e:e.fetch;return Xl(t)?Ml(t):null}function Wl(){var e=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){return(0,xe.__generator)(this,(function(t){return[2,{connectedToGithub:Hl(e),error:null}]}))}));return function(t){return e.apply(this,arguments)}}());return null==e||e.error?null:e.connectedToGithub}function Hl(e){return e.hasProfile(Nl.rG.GITHUB)}var Vl=n(68908),zl=n(66985),jl=n(9353);function ql(e,t){(0,br.j)(jl.U3.GIT_FEATURE_USED,(0,Ze.Z)({action:e,source:"git-pane"},t))}var $l=n(59213);function Yl(e){var t=e.label,n=void 0===t?"Connect to GitHub":t,i=e.allowReconnect,o=void 0!==i&&i,l=e.callback,c=(0,a.useState)(!1),s=c[0],u=c[1],f=(0,d.Z)().git,h=Wl(),p=(0,Ra.Z)(),m=(0,Vl.v)({onAuth:function(){ql("github-user-connected"),u(!1),f.refreshProfiles({preferredProvider:Nl.rG.GITHUB}),null===l||void 0===l||l()},onClose:function(){return u(!1)}});if(h&&!o)return(0,r.tZ)(Se.zx,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,r.tZ)(Fn.Z,{}),disabled:!0});var v=p?"Visit account page to connect to GitHub":n;return(0,r.tZ)(Se.zx,{text:s||null===h?"Connecting...":v,colorway:"primary",iconLeft:s?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(zl.Z,{}),loading:s,onClick:function(){p?$l.X.openExternalUrl("/account#connected-services"):(u(!0),m())}})}var Kl=(0,Z.X)({body:[v.l0.p(4),v.l0.colWithGap(8),v.l0.borderRadius(0,0,8,8)],remedies:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.justify.end]});function Ql(e){var t=e.description,n=e.remedies,i=e.error;return(0,r.BX)(De.Tg,{css:Kl.body,elevated:!0,children:[(0,r.tZ)(y.xv,{children:t}),(0,r.BX)(g.G,{css:Kl.remedies,children:[n,(0,r.tZ)(Se.zx,{text:"Dismiss",iconLeft:(0,r.tZ)(st.Z,{}),onClick:i.dismiss})]})]})}function Jl(e){switch(e.type){case Nl.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case Nl.aq.UNKNOWN:return"Unknown Git Error";case Nl.aq.NOT_INITIALIZED:case Nl.aq.UNAUTHENTICATED:case Nl.aq.INDEX_FILE_CORRUPT:case Nl.aq.UNKNOWN_REMOTE:case Nl.aq.INDEX_LOCKED:case Nl.aq.NO_COMMITS:case Nl.aq.PATH_MATCHED_NO_FILES:case Nl.aq.USER_NOT_CONFIGURED:case Nl.aq.INVALID_REFERENCE:case Nl.aq.BRANCH_ALREADY_EXISTS:case Nl.aq.MERGE_CONFLICT:case Nl.aq.HEAD_DETACHED:case Nl.aq.DIRTY_WORKTREE:case Nl.aq.PUSH_REJECTED:case Nl.aq.PROTECTED_BRANCH:case Nl.aq.REMOTE_ALREADY_EXISTS:case Nl.aq.ALREADY_INITIALIZED:case Nl.aq.TIMEOUT:return"Git Error";default:return"Unknown Error"}}function ec(e){var t=e.error,n=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var n,i,o,a,l,c,s,u,d;return(0,xe.__generator)(this,(function(f){switch(f.label){case 0:switch(t.type){case Nl.aq.UNKNOWN_NOT_GIT:return[3,1];case Nl.aq.UNKNOWN:return[3,2];case Nl.aq.CHANNEL_CLOSED:return[3,3];case Nl.aq.NOT_INITIALIZED:return[3,4];case Nl.aq.UNAUTHENTICATED:return[3,5];case Nl.aq.INDEX_FILE_CORRUPT:return[3,7];case Nl.aq.UNKNOWN_REMOTE:return[3,8];case Nl.aq.INDEX_LOCKED:return[3,9];case Nl.aq.NO_COMMITS:return[3,10];case Nl.aq.PATH_MATCHED_NO_FILES:return[3,11];case Nl.aq.USER_NOT_CONFIGURED:return[3,12];case Nl.aq.INVALID_REFERENCE:return[3,13];case Nl.aq.BRANCH_ALREADY_EXISTS:return[3,14];case Nl.aq.MERGE_CONFLICT:return[3,15];case Nl.aq.UPSTREAM_NOT_SET:return[3,16];case Nl.aq.HEAD_DETACHED:return[3,17];case Nl.aq.DIRTY_WORKTREE:return[3,18];case Nl.aq.PROTECTED_BRANCH:return[3,19];case Nl.aq.PUSH_REJECTED:return[3,20];case Nl.aq.REMOTE_ALREADY_EXISTS:return[3,21];case Nl.aq.TIMEOUT:return[3,22];case Nl.aq.ALREADY_INITIALIZED:return[3,23]}return[3,24];case 1:return n="Unknown error from the Git service. This is probably a bug in the app.",i=null,[3,25];case 2:return n="There was an unrecognized fatal error with Git. This is probably a bug in the app.",i=null,[3,25];case 3:return n="The command was interrupted. Please try again.",i=null,[3,25];case 4:return n="There isn't a Git repository in the Repl's root directory.",i=null,[3,25];case 5:return[4,e.getRemotes()];case 6:if((o=f.sent()).error)return[2,o];if(0!==o.remotes.size){a=!1,l=!0,c=!1,s=void 0;try{for(u=o.remotes.values()[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)if(Xl(d.value)){a=!0;break}}catch(h){c=!0,s=h}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}if(a)return Hl(e)?(n="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",i=(0,r.tZ)(Yl,{label:"Update GitHub Repository Access",callback:t.dismiss,allowReconnect:!0}),[3,25]):(n="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",i=(0,r.tZ)(Yl,{label:"Connect to GitHub",callback:t.dismiss,allowReconnect:!0}),[3,25])}return n="Failed to authenticate with the remote.",i=null,[3,25];case 7:return n="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",i=null,[3,25];case 8:return n="The remote specified isn't configured.",i=null,[3,25];case 9:return n="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",i=null,[3,25];case 10:return n="There are no commits in the repository.",i=null,[3,25];case 11:return n="The path specified didn't match any files.",i=null,[3,25];case 12:return n="There isn't any user information configured for Git.",i=null,[3,25];case 13:return n="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",i=null,[3,25];case 14:return n="The branch specified already exists.",i=null,[3,25];case 15:return n="There was an unexpected merge conflict.",i=null,[3,25];case 16:return n="The upstream branch isn't set.",i=null,[3,25];case 17:return n="The HEAD is detached. You have a commit checked out, not a branch.",i=null,[3,25];case 18:return n="There are uncommitted changes.",i=null,[3,25];case 19:return n="This operation cannot be performed on a protected branch.",i=null,[3,25];case 20:return n="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",i=null,[3,25];case 21:return n="The remote specified already exists.",i=null,[3,25];case 22:return n="The remote operation timed out.",i=null,[3,25];case 23:return n="There is already a Git repository in the Repl's root directory.",i=null,[3,25];case 24:return n="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",i=null,[3,25];case 25:return[2,{description:n,remedies:i,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[t],{refresh:!1});if(!n)return(0,r.tZ)(Ql,{description:null,remedies:null,error:t});if(n.error){return(0,r.tZ)(Ql,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:t})}var i=n.description,o=n.remedies;return(0,r.tZ)(Ql,{description:i,remedies:o,error:t})}var tc=(0,Z.X)({errorNotification:[{pointerEvents:"all"},v.l0.p(1),v.l0.backgroundColor.accentNegativeDimmer,v.l0.borderRadius(8),v.l0.shadow(3)],header:[v.l0.py(4),v.l0.px(8),v.l0.display.flex,v.l0.flex.row,v.l0.align.center,v.l0.justify.spaceBetween,v.l0.color.accentNegativeStrongest],headerText:[v.l0.rowWithGap(4),v.l0.align.center],errorType:[v.l0.font.code,{opacity:.75}],body:[v.l0.pt(4),v.l0.pb(8),v.l0.px(8),v.l0.colWithGap(8),v.l0.backgroundColor.backgroundHigher,v.l0.borderRadius(0,0,8,8)]});function nc(e){var t=e.error;return(0,r.BX)(g.G,{css:tc.errorNotification,children:[(0,r.BX)(g.G,{css:tc.header,children:[(0,r.BX)(g.G,{css:tc.headerText,children:[(0,r.tZ)(Ee.Z,{}),(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:Jl(t)})]}),(0,r.tZ)(y.xv,{css:tc.errorType,multiline:!1,children:t.type})]}),(0,r.tZ)(g.G,{css:tc.body,children:(0,r.tZ)(ec,{error:t})})]})}var rc=(0,a.createContext)(null);function ic(){var e=(0,a.useContext)(rc);if(!e)throw new Error("Expected store in context");return e}var oc=(0,ce.cn)([]),ac=(0,ce.cn)((function(e){return e(oc)}),(function(e,t,n){var r=e(oc),i=Math.random().toString(36).substring(7),o={id:i,type:n,dismiss:function(){var n=e(oc).filter((function(e){return e.id!==i}));t(oc,n)}};t(oc,[o].concat((0,ee.Z)(r)))}));function lc(){return(0,se.b9)(ac,{store:ic()})}var cc=(0,Z.X)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},v.l0.position.absolute,v.l0.top(0),v.l0.bottom(0),v.l0.left(0),v.l0.right(0),v.l0.p(8),v.l0.colWithGap(16),v.l0.zIndex(10)]});function sc(){var e=(0,se.Dv)(ac,{store:ic()});return(0,r.tZ)(g.G,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:cc.errorList,children:e.map((function(e){return(0,r.tZ)(nc,{error:e},e.id)}))})}var uc=n(98823),dc=n(43594),fc=n(85247);function hc(){var e=(0,a.useState)(!1),t=e[0],n=e[1],i=(0,d.Z)().git,o=function(){var e=(0,a.useState)(!1),t=e[0],n=e[1],r=(0,d.Z)().git;return(0,a.useEffect)((function(){return r.onBusyChange(n)}),[r]),t}(),l=lc(),c=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var t,n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:return(t=r.sent()).error?(l(t.error),[2,t]):t.initialized?[4,e.getRemotes()]:[2,{hasRemotes:!1,error:null}];case 2:return(n=r.sent()).error?(l(n.error),[2,n]):[2,{hasRemotes:n.remotes.size>0,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[l]);if(null===c||void 0===c?void 0:c.error)return null;var s=!!c&&c.hasRemotes,u=o||t||null===c;function f(){return(f=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return i.isBusy()||u?[2]:(n(!0),s?[4,i.fetch()]:[3,2]);case 1:(e=t.sent()).error?l(e.error):ql("remote-fetched"),t.label=2;case 2:return[4,i.refreshProfiles()];case 3:return t.sent(),i.forceRefresh(),setTimeout((function(){return n(!1)}),500),[2]}}))}))).apply(this,arguments)}var h=s?"Refresh and Fetch":"Refresh";return(0,r.tZ)(ne.hU,{alt:h,size:24,onClick:function(){return f.apply(this,arguments)},disabled:u,children:u?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Ti.Z,{})})}var pc,mc=n(13081);!function(e){e.SUCCESS="SUCCESS",e.WARNING="WARNING",e.FAILED="FAILED",e.OFF="OFF"}(pc||(pc={}));var vc=(0,Z.X)({root:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.py(4)],circle:[v.l0.width(8),v.l0.height(8),v.l0.borderRadius("full")]});var gc,yc=function(e){var t,n,i,o=e.display,a=void 0===o?"inline":o,l=(0,Qa.Z)(e,["display"]);switch(l.status){case pc.SUCCESS:t=v.TV.accentPositiveStronger,n=v.TV.accentPositiveStronger;break;case pc.WARNING:t=v.TV.yellowStronger,n=v.TV.yellowStronger;break;case pc.FAILED:t=v.TV.accentNegativeStronger,n=v.TV.accentNegativeStronger;break;case pc.OFF:t=v.TV.greyStronger,n=v.TV.greyStronger}var c=(0,r.BX)(g.G,{onClick:null!==(i=l.onClick)&&void 0!==i?i:function(){},css:[vc.root,l.onClick?{cursor:"pointer"}:{}],children:[(0,r.tZ)("div",{css:vc.circle,style:{backgroundColor:t,boxShadow:"0px 0px 6px ".concat(n)}}),"inline"===a?(0,r.tZ)(y.xv,{color:"dimmer",multiline:!1,children:l.content}):null]});return"tooltip"===a&&(c=(0,r.tZ)(ae.u,{tooltip:l.content,children:c})),c},Zc=(0,Z.X)({revertText:[v.l0.color.orangeStronger,v.l0.fontWeight.medium],mergeText:[v.l0.color.purpleStronger,v.l0.fontWeight.medium],pullRequestId:[v.l0.fontWeight.medium],hash:[v.l0.fontWeight.medium],filePathPrefix:[v.l0.color.foregroundDimmest],commitBody:[v.l0.font.code,{whiteSpace:"pre-wrap"},{fontSize:v.TV.fontSizeSmall}],clickableName:[v.l0.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[v.l0.display.inlineFlex,v.l0.rowWithGap(4),v.l0.align.center],path:[{fontSize:v.TV.fontSizeSmall},v.l0.font.code],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[v.l0.display.inlineFlex,v.l0.rowWithGap(4),v.l0.align.center,v.l0.flex.shrink(1),v.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},v.l0.mr(4),v.l0.color.foregroundDimmest],headingCurrent:[v.l0.px(4)],text:[v.l0.fontWeight.medium],remote:[{verticalAlign:"center"},{fontSize:v.TV.fontSizeSmall},v.l0.mr(4),v.l0.color.foregroundDimmest],current:[v.l0.position.relative,v.l0.top("-1px"),v.l0.display.inlineFlex,v.l0.pl(2),v.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},v.l0.mr(4)]});function bc(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:Zc.revertText,children:t})}function wc(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:Zc.mergeText,children:t})}function xc(e){var t,n=e.id,i=e.hash,o=void 0===i||i,a=e.className;return t=o?"string"===typeof n&&n.startsWith("#")?n:"#".concat(n):"string"===typeof n&&n.startsWith("#")?n.slice(1):"".concat(n),(0,r.tZ)("span",{className:a,css:Zc.pullRequestId,children:t})}function Cc(e){var t=e.hash,n=e.length,i=void 0===n?8:n,o=e.className;return(0,r.tZ)("span",{className:o,css:Zc.hash,children:t.slice(0,i+1)})}function kc(e){var t=e.subject,n=e.quoted,i=void 0!==n&&n,o=e.className;return(0,r.tZ)("span",{className:o,children:i?'"'.concat(t,'"'):t})}function Sc(e){var t=e.body,n=e.className;return(0,r.tZ)("pre",{className:n,css:Zc.commitBody,children:t})}function Ec(e){var t=e.name,n=e.remote,i=e.current,o=void 0!==i&&i,a=e.heading,l=void 0!==a&&a,c=e.icon,s=void 0!==c&&c,u=e.onClick,d=e.className,f=null;return!0===s||!s&&o?f=o?(0,r.tZ)("span",{css:l?Zc.headingCurrent:Zc.current,children:(0,r.tZ)(yc,{display:"tooltip",content:"This is your current branch.",status:pc.SUCCESS})}):l?(0,r.tZ)(mc.Z,{size:16}):(0,r.tZ)(mc.Z,{css:Zc.icon,size:12}):s&&(f=s),l?(0,r.BX)("div",{css:Zc.headingWrapper,children:[f,(0,r.BX)(y.xv,{variant:"subheadDefault",multiline:!1,children:[n?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:Zc.headingRemote,children:n}),(0,r.tZ)("span",{css:Zc.headingRemote,children:"/"})]}):null,u?(0,r.tZ)(Dc,{label:"View branch",onClick:u,children:t}):(0,r.tZ)("span",{children:t})]})]}):(0,r.BX)("span",{className:d,css:Zc.text,children:[f,n?(0,r.tZ)("span",{css:Zc.remote,children:n}):null,u?(0,r.tZ)(Dc,{label:"View branch",onClick:u,children:t}):(0,r.tZ)("span",{children:t})]})}function Tc(e){var t=e.path,n=e.prefix,i=e.onClick,o=e.className,a=(0,D.UO)(t),l=!i&&(a===t||null!==n&&n+a===t);return(0,r.tZ)("span",{css:Zc.fixTooltipDisplay,children:(0,r.tZ)(ae.u,{maxWidth:"auto",tooltip:(0,r.tZ)(Rc,{path:t,openable:Boolean(i)}),isDisabled:l,children:i?(0,r.BX)(Dc,{label:"Open ".concat(a),onClick:i,className:o,children:[n?(0,r.tZ)("span",{css:Zc.filePathPrefix,children:n}):null,(0,r.tZ)("span",{children:a})]}):(0,r.BX)("span",{className:o,children:[n?(0,r.tZ)("span",{css:Zc.filePathPrefix,children:n}):null,(0,r.tZ)("span",{children:a})]})})})}function Rc(e){var t=e.path,n=e.openable,i=void 0===n||n;return(0,r.BX)("span",{css:Zc.tooltip,children:[i?(0,r.tZ)("span",{children:"Open"}):null,(0,r.tZ)("span",{css:Zc.path,children:t})]})}function Dc(e){var t=e.label,n=e.onClick,i=e.className,o=e.children;return(0,r.tZ)("span",{className:i,css:Zc.clickableName,role:"button",tabIndex:-1,"aria-label":t,onClick:n,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===n||void 0===n||n()},children:o})}!function(e){e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH",e.CURRENT_BRANCH="CURRENT_BRANCH",e.SETTINGS="SETTINGS",e.COMMIT="COMMIT"}(gc||(gc={}));var Ic=n(90602),_c=n(1169),Bc=n(6108),Gc=n(81897),Pc=n(55340),Ac=n(67217),Nc=n(79032),Uc=n(90879),Lc=n(5860),Oc=n(9125);function Xc(){var e=(0,hn.Z)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return Xc=function(){return e},e}var Mc={},Fc=(0,pn.Ps)(Xc());var Wc=n(28494),Hc=(0,Z.X)({gitUserContainer:[v.l0.flex.row],gitUserText:[v.l0.fontWeight.medium],gitUserInnerContainer:[v.l0.align.center,v.l0.flex.row,{"& > :not(:first-child)":{marginLeft:v.TV.space4}}],gitUserInnerContainerFlipped:[v.l0.align.center,v.l0.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:v.TV.space4}}],alignCenter:[v.l0.align.center]});function Vc(e){var t=e.name,n=e.email,i=e.allowPlaceholderAvatar,o=void 0!==i&&i,a=e.color,l=void 0===a?"default":a,c=e.small,s=void 0!==c&&c,u=e.flip,d=void 0!==u&&u;return(0,r.tZ)(g.G,{css:Hc.gitUserContainer,children:(0,r.tZ)(ae.u,{tooltip:(0,r.tZ)(y.xv,{children:n}),children:(0,r.BX)(g.G,{css:d?Hc.gitUserInnerContainerFlipped:Hc.gitUserInnerContainer,children:[(0,r.tZ)(zc,{email:n,name:t,enablePlaceholder:o,small:s}),(0,r.tZ)(y.xv,{multiline:!1,css:Hc.gitUserText,color:l,variant:s?"small":"text",children:t})]})})})}function zc(e){var t=e.name,n=e.email,i=e.enablePlaceholder,l=void 0!==i&&i,c=e.small,s=void 0!==c&&c,u=(0,o.Z)(function(e){var t=(0,Ze.Z)({},Mc,e);return Oc.t(Fc,t)}({initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),1)[0],d=(0,a.useState)(null),f=d[0],h=d[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,we.Z)((function(){var e,t,r,i,a,l,c,s,d,f,p,m,v;return(0,xe.__generator)(this,(function(g){switch(g.label){case 0:return n.endsWith("@".concat(Uc.O))?(e=n.split("@")[0],t=(0,o.Z)(e.split("+"),2),t[0],r=t[1],i=(0,Wc.vt)("https://github.com/".concat(r,".png")),h(i),[3,4]):[3,1];case 1:return n.endsWith("@".concat(Uc.J))?(c=n.split("@")[0],s=(0,o.Z)(c.split("-"),2),s[0],d=s[1],[4,u({variables:{username:d}})]):[3,3];case 2:return f=g.sent(),(p=null===(a=f.data)||void 0===a||null===(l=a.userByUsername)||void 0===l?void 0:l.image)&&h(p),[3,4];case 3:m=(0,Nc.FB)(n),(v=new URL("https://gravatar.com/avatar/".concat(m))).searchParams.append("d","404"),h(v.toString()),g.label=4;case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[n,u]),(0,a.useMemo)((function(){var e=s?12:16;return null===f?l?(0,r.tZ)(Lc.Z,{css:Hc.alignCenter,size:e}):null:(0,r.tZ)(Ac.q,{css:Hc.alignCenter,username:t,src:f,onError:function(){return h(null)},size:e})}),[f,l,s,t])}var jc=n(94875),qc=g.K.button,$c=(0,Z.X)({container:[v.l0.display.flex,v.l0.flex.growAndShrink(1),v.l0.overflow("hidden")],cursorOverlay:{cursor:"pointer"},fullWidth:[v.l0.width("100%")],searchContainer:[v.l0.p(8)],paddedX:[v.l0.px(8)],loadingContainer:[v.l0.display.flex,v.l0.align.center,v.l0.justify.center,v.l0.py(48)],menu:[v.l0.maxWidth(390),v.l0.width(280),v.l0.display.flex,v.l0.maxHeight(300),v.l0.borderRadius(8),v.l0.overflow("hidden")],body:[v.l0.py(8),v.l0.colWithGap(8),v.l0.overflowX("hidden"),v.l0.overflowY("scroll"),v.l0.flex.growAndShrink(1)],branchMetadata:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.flex.shrink(1)],section:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.justify.spaceBetween],selector:[v.l0.display.flex,v.l0.align.center],header:[v.l0.colWithGap(2),v.l0.width("100%")],menuItem:[{backgroundColor:"inherit"},Bc.gU.listItem,v.l0.px(8),v.l0.py(6),v.l0.borderRadius(0),v.l0.rowWithGap(8),v.l0.align.center],inputDisabled:[{opacity:.75}],padded:[v.l0.p(8)]}),Yc=function(e){var t=e.value,n=e.disabled,i=e.onChange,o=e.onSubmit,a=e.onCancel,l=function(e){(0,Pc.dC)(e)&&(null===i||void 0===i||i(e))};return(0,r.tZ)(_t.II,{value:t,css:n?$c.inputDisabled:void 0,disabled:n,placeholder:"Branch Name",onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){return function(e,n){switch(e){case"Enter":null===o||void 0===o||o(),n();break;case"Escape":null===a||void 0===a||a(),n();break;case" ":if(""===t){n();break}l(t+"-"),n()}}(e.key,(function(){return e.preventDefault()}))},onBlur:function(){""===t&&(null===a||void 0===a||a())}})},Kc=function(e){var t=e.branch,n=function(e,t){var n=lc(),r=(0,d.Z)().git,i=(0,a.useState)(null),o=i[0],l=i[1],c=(0,a.useState)(!1),s=c[0],u=c[1],f=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var t,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,Z,b,w,x;return(0,xe.__generator)(this,(function(C){switch(C.label){case 0:return[4,e.isInitialized()];case 1:return(t=C.sent()).error?(n(t.error),[2,t]):t.initialized?[4,e.listBranches()]:[2,{active:[],stale:[],important:[],error:null}];case 2:return(r=C.sent()).error?(n(r.error),[2,r]):[4,e.findDefaultBranches()];case 3:if((i=C.sent()).error)return n(i.error),[2,i];o=r.branches,a=new Set,l=!0,c=!1,s=void 0;try{for(u=function(){var e=f.value,t=o.find((function(t){return(0,Pc.Pi)(t,e)}));t&&a.add(t)},d=i.refs[Symbol.iterator]();!(l=(f=d.next()).done);l=!0)u()}catch(k){c=!0,s=k}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}h=Date.now()-72e6,p=[],m=[],v=!0,g=!1,y=void 0;try{for(Z=o[Symbol.iterator]();!(v=(b=Z.next()).done);v=!0)w=b.value,a.has(w)||(w.commit.author.date>h?p.push(w):m.push(w))}catch(k){g=!0,y=k}finally{try{v||null==Z.return||Z.return()}finally{if(g)throw y}}return x=Array.from(a),[2,{active:p,stale:m,important:x,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[n]),h=function(){var t=(0,we.Z)((function(t){var i;return(0,xe.__generator)(this,(function(a){switch(a.label){case 0:return null!==o||(0,Pc.Pi)(e,t)?[2]:(l(t),[4,r.switchBranch(t)]);case 1:return(i=a.sent()).error?(n(i.error),l(null)):(r.forceRefresh(),ql("branch-switched")),[2]}}))}));return function(e){return t.apply(this,arguments)}}(),p=function(){var e=(0,we.Z)((function(e){var t;return(0,xe.__generator)(this,(function(i){switch(i.label){case 0:return s||""===e?[2]:(u(!0),[4,r.createBranch({name:e,checkout:!0})]);case 1:return(t=i.sent()).error?(n(t.error),u(!1)):(r.forceRefresh(),u(!1),ql("branch-created")),[2]}}))}));return function(t){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){null!==o&&(0,Pc.Pi)(e,o)&&(l(null),t({mode:gc.CURRENT_BRANCH}))}),[e,o,t]);var m=(0,a.useMemo)((function(){return null!==o}),[o]);if(null===f||m)return{loading:m,active:[],stale:[],important:[],handleSwitchBranch:h,handleCreateBranch:p,error:null};if(f.error)return{loading:m,active:[],stale:[],important:[],handleSwitchBranch:h,handleCreateBranch:p,error:f.error};var v=f.active,g=f.stale,y=f.important;return{loading:m,active:null!==v&&void 0!==v?v:[],stale:null!==g&&void 0!==g?g:[],important:null!==y&&void 0!==y?y:[],handleSwitchBranch:h,handleCreateBranch:p,error:null}}(t,e.switchMode),i=n.loading,o=n.active,l=n.important,c=n.stale,s=n.handleSwitchBranch,u=n.handleCreateBranch,f=(0,a.useState)(!1),h=f[0],p=f[1],m=(0,a.useState)(""),v=m[0],g=m[1],y=(0,a.useState)(!0),Z=y[0],b=y[1],w=(0,a.useState)(""),x=w[0],C=w[1],k=(0,a.useState)(!1),S=k[0],E=k[1];return(0,r.tZ)(as,{isOpen:h,setIsOpen:p,important:l,active:o,stale:c,current:t,query:v,setQuery:g,onSwitchBranch:s,createBranchFolded:Z,setCreateBranchFolded:b,branchName:x,setBranchName:C,createBranchLoading:S,createBranch:(0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){switch(e.label){case 0:return x?(E(!0),[4,u(x)]):[2];case 1:return e.sent(),C(""),E(!1),[2]}}))})),switchingBranch:i})},Qc=function(e){var t=e.onClick,n=e.children,i=(0,a.useRef)(null),l=(0,o.Z)((0,_c.XZ)(i,!1),4),c=l[0],s=l[1],u=l[2],d=l[3];return(0,_c.Ym)(s,i),(0,r.tZ)(qc,{ref:i,role:"menuitem",css:$c.menuItem,onClick:function(e){d(),t(e)},onKeyDown:u,tabIndex:c,children:n})},Jc=function(e){var t=e.children;return(0,r.tZ)(qc,{role:"menuitem",css:$c.menuItem,disabled:!0,children:t})},es=function(e){var t=e.branch;return(0,r.BX)(g.G,{css:$c.branchMetadata,children:[(0,r.tZ)(Vc,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,r.tZ)(jc.EK,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})},ts=function(e){var t=e.branch,n=e.current,i=e.onSwitchBranch,o=(0,a.useMemo)((function(){return(0,Pl.p3)(t,n)}),[t,n]);return(0,r.tZ)(ae.u,{tooltip:o?(0,r.tZ)(y.xv,{multiline:!1,children:"This is your current branch."}):(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)(Ec,{name:t.name,remote:t.type===Pl.HO.REMOTE?t.remote:null,current:o,icon:!0})}),(0,r.tZ)(es,{branch:t})]}),children:o?(0,r.tZ)(Jc,{children:(0,r.tZ)(y.xv,{multiline:!1,variant:"small",children:(0,r.tZ)(Ec,{name:t.name,remote:t.type===Pl.HO.REMOTE?t.remote:null,current:o,icon:!0})})}):(0,r.tZ)(Qc,{onClick:function(){return i(t)},children:(0,r.tZ)(y.xv,{multiline:!1,variant:"small",children:(0,r.tZ)(Ec,{name:t.name,remote:t.type===Pl.HO.REMOTE?t.remote:null,current:o,icon:!0})})})})},ns=function(e,t){return t.filter((function(t){return(0,Pc.Qj)(t).toLowerCase().includes(e.toLowerCase())}))},rs=function(e){var t=e.title,n=e.items,i=e.current,o=e.onSwitchBranch;return(0,r.tZ)(g.G,{css:$c.section,children:(0,r.BX)(g.G,{css:$c.header,children:[(0,r.BX)(g.G,{css:$c.paddedX,children:[(0,r.tZ)(y.xv,{multiline:!1,children:t}),0===n.length?(0,r.BX)(y.xv,{variant:"small",color:"dimmer",children:["No ",t.toLowerCase()," branches to show"]}):null]}),(0,r.tZ)(g.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",children:n.map((function(e){return(0,r.tZ)(ts,{branch:e,current:i,onSwitchBranch:o},(0,Pc.Qj)(e))}))})]})})},is=function(e){var t=e.folded,n=e.setFolded,i=e.loading,o=void 0!==i&&i,a=e.branchName,l=e.setBranchName,c=e.createBranch;if(t)return(0,r.tZ)(g.G,{css:$c.padded,children:(0,r.tZ)(Se.zx,{text:"Create Branch",onClick:function(){return n(!1)},size:"small",iconLeft:(0,r.tZ)(Co.Z,{}),stretch:!0,css:[v.l0.height(32)]})});var s=!a||!(0,Pc.Dc)(a),u=function(){n(!0),l("")};return(0,r.BX)(g.G,{css:[v.l0.p(8),v.l0.rowWithGap(4),v.l0.align.center],children:[(0,r.tZ)(Yc,{value:a,onChange:l,onSubmit:c,onCancel:u,disabled:o}),(0,r.tZ)(ne.hU,{onClick:u,disabled:o,alt:"Cancel",children:(0,r.tZ)(st.Z,{})}),(0,r.tZ)(ne.hU,{onClick:c,disabled:s||o,alt:"Create Branch",children:o?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Fn.Z,{})})]})},os=function(e){var t=e.query,n=e.setQuery,i=e.filteredImportant,o=e.filteredActive,a=e.filteredStale,l=e.current,c=e.onSwitchBranch,s=e.createBranchFolded,u=e.setCreateBranchFolded,d=e.branchName,f=e.setBranchName,h=e.createBranchLoading,p=e.createBranch,m=e.switchingBranch;return(0,r.tZ)(g.G,{css:$c.menu,children:m?(0,r.tZ)(g.G,{css:$c.loadingContainer,children:(0,r.tZ)(oe.Z,{})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.G,{css:$c.searchContainer,children:(0,r.tZ)(et.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Search branches"})}),(0,r.tZ)(g.G,{css:$c.paddedX,children:(0,r.tZ)(Ic.R,{})}),(0,r.tZ)(_c.uP,{options:{direction:"vertical"},children:(0,r.BX)(g.G,{css:$c.body,children:[(0,r.tZ)(rs,{title:"Important",items:i,current:l,onSwitchBranch:c}),(0,r.tZ)(g.G,{css:$c.paddedX,children:(0,r.tZ)(Ic.R,{})}),(0,r.tZ)(rs,{title:"Active",items:o,current:l,onSwitchBranch:c}),(0,r.tZ)(g.G,{css:$c.paddedX,children:(0,r.tZ)(Ic.R,{})}),(0,r.tZ)(rs,{title:"Stale",items:a,current:l,onSwitchBranch:c})]})}),(0,r.BX)(g.G,{children:[(0,r.tZ)(g.G,{css:$c.paddedX,children:(0,r.tZ)(Ic.R,{})}),(0,r.tZ)(is,{folded:s,setFolded:u,branchName:d,setBranchName:f,loading:h,createBranch:p})]})]})})},as=function(e){var t=e.isOpen,n=e.setIsOpen,i=e.important,o=e.active,l=e.stale,c=e.current,s=e.query,u=e.setQuery,d=e.onSwitchBranch,f=e.createBranchFolded,h=e.setCreateBranchFolded,p=e.branchName,m=e.setBranchName,v=e.createBranchLoading,g=e.createBranch,Z=e.switchingBranch,b=(0,a.useMemo)((function(){return ns(s,i)}),[s,i]),w=(0,a.useMemo)((function(){return ns(s,o)}),[s,o]),x=(0,a.useMemo)((function(){return ns(s,l)}),[s,l]);return(0,r.BX)(Gc.x,{label:"View Branches",placement:"top",isOpen:t,onOpenChange:function(e){n(e)},allowPageClicks:!0,children:[function(e){return(0,r.tZ)("div",{css:$c.fullWidth,children:(0,r.tZ)(Se.zx,(0,be.Z)((0,Ze.Z)({},e),{variant:"nofill",text:(0,r.tZ)(y.xv,{multiline:!1,variant:"small",css:$c.selector,children:(0,r.tZ)(Ec,{name:c.name,remote:c.type===Pl.HO.REMOTE?c.remote:null,current:!0,icon:!0})}),size:"small",iconRight:t?(0,r.tZ)(Va.Z,{}):(0,r.tZ)(Ha.Z,{}),stretch:!0,alignment:"start",css:{width:"100%"}}))})},(0,r.tZ)(os,{query:s,setQuery:u,filteredImportant:b,filteredActive:w,filteredStale:x,current:c,onSwitchBranch:d,createBranchFolded:f,setCreateBranchFolded:h,branchName:p,setBranchName:m,createBranchLoading:v,createBranch:g,switchingBranch:Z})]})},ls=(0,Z.X)({container:[v.l0.height(36),v.l0.px(8),v.l0.py(4),v.l0.rowWithGap(8),v.l0.backgroundColor.backgroundDefault,v.l0.align.center,v.l0.justify.spaceBetween,v.l0.zIndex(1),{borderBottom:"1px solid ".concat(v.TV.outlineDimmer)}],left:[v.l0.rowWithGap(4),v.l0.align.center,v.l0.flex.growAndShrink(1)],right:[v.l0.rowWithGap(8),v.l0.align.center],back:{marginLeft:-4}}),cs=function(e){var t=e.openSettings;return(0,r.BX)(g.G,{css:ls.container,children:[(0,r.BX)(g.G,{css:ls.left,children:[(0,r.tZ)(dc.Z,{size:16}),(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,r.BX)(g.G,{css:ls.right,children:[(0,r.tZ)(vs,{openSettings:t}),(0,r.tZ)(hc,{})]})]})},ss=function(e){var t=e.branch,n=e.switchMode,i=e.mode,o=e.openSettings,a=(0,ro.P5)({controlName:"flag-git-pane-branch-selector",logFlagToAnalytics:!1});return(0,r.BX)(g.G,{css:ls.container,children:[(0,r.tZ)(g.G,{css:ls.left,children:a?(0,r.tZ)(Kc,{branch:t,switchMode:n}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(ps,{switchMode:n}),(0,r.tZ)(Ec,{name:t.name,remote:t.type===Pl.HO.REMOTE?t.remote:null,current:i===gc.CURRENT_BRANCH,heading:!0})]})}),(0,r.BX)(g.G,{css:ls.right,children:[(0,r.tZ)(vs,{openSettings:o}),(0,r.tZ)(hc,{})]})]})},us=function(e){var t=e.onBack;return(0,r.BX)(g.G,{css:ls.container,children:[(0,r.BX)(g.G,{css:ls.left,children:[(0,r.tZ)(hs,{onBack:t,alt:"Back"}),(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,r.tZ)(g.G,{css:ls.right})]})},ds=function(e){var t=e.switchMode,n=e.openSettings,i=(0,ro.P5)({controlName:"flag-git-pane-branch-selector",logFlagToAnalytics:!1});return(0,r.BX)(g.G,{css:ls.container,children:[(0,r.BX)(g.G,{css:ls.left,children:[i?(0,r.tZ)(ms,{switchMode:t}):(0,r.tZ)(ps,{switchMode:t}),(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,r.BX)(g.G,{css:ls.right,children:[(0,r.tZ)(vs,{openSettings:n}),(0,r.tZ)(hc,{})]})]})};function fs(e){var t=e.mode,n=e.branch,i=e.switchMode,o=e.onBack,a=function(){return i({mode:gc.SETTINGS})};switch(t){case gc.DASHBOARD:return(0,r.tZ)(cs,{openSettings:a});case gc.BRANCH:case gc.CURRENT_BRANCH:if(null===n)throw new Error("Tried to show branch in header, but branch is null");return(0,r.tZ)(ss,{branch:n,switchMode:i,mode:t,openSettings:a});case gc.SETTINGS:return(0,r.tZ)(us,{onBack:o});case gc.COMMIT:return(0,r.tZ)(ds,{switchMode:i,openSettings:a});default:return(0,r.BX)(g.G,{css:ls.container,children:[(0,r.tZ)(g.G,{css:ls.left}),(0,r.tZ)(g.G,{css:ls.right})]})}}function hs(e){var t=e.onBack,n=e.alt;return(0,r.tZ)(ne.hU,{css:ls.back,alt:n,size:28,onClick:t,children:(0,r.tZ)(uc.Z,{})})}function ps(e){var t=e.switchMode;return(0,r.tZ)(hs,{css:ls.back,onBack:function(){return t({mode:gc.DASHBOARD})},alt:"Back to dashboard"})}function ms(e){var t=e.switchMode;return(0,r.tZ)(hs,{css:ls.back,onBack:function(){return t({mode:gc.CURRENT_BRANCH})},alt:"Back to current branch"})}function vs(e){var t=e.openSettings;return(0,r.tZ)(ne.hU,{alt:"Settings",size:24,onClick:t,children:(0,r.tZ)(fc.Z,{})})}function gs(){return(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,r.tZ)(y.xv,{multiline:!1,children:"Please finish the patch manually."})]})}function ys(){return(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,r.tZ)(y.xv,{multiline:!1,children:"Please finish the bisect manually."})]})}var Zs=/\s\(#(\d+)\)$/,bs=/^Revert "(.+)"/,ws=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function xs(e){var t=bs.exec(e.subject),n=ws.exec(e.body);if(t&&n){var r,i=n[1],o=t[1],a=Zs.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var Cs=/\B#\d+\b/g,ks=/^Merged? pull request (#\d+\b)/,Ss=/^Merge branch '(.+)'/,Es=/into (.+)$/;function Ts(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var t=e.subject.match(Cs);if(t){var n,r=parseInt(t[t.length-1].slice(1),10);if(r)return Zs.test(e.subject)&&(n=e.subject.replace(Zs,"").trim()),!n&&ks.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(n=e.body),{type:"pull-request",id:r,subject:n,reverts:xs(e)}}}if(ks.test(e.subject)){var i,o=ks.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:xs(e)}}if(Ss.test(e.subject)){var a=Ss.exec(e.subject);if(a){var l=Es.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}var Rs=n(76898),Ds=n(95480),Is=20,_s={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(v.TV.purpleStrongest),borderRadius:"50%"},Bs=(0,Z.X)({markerContainer:[v.l0.display.flex,v.l0.align.center,v.l0.justify.center,v.l0.minHeight(Is),v.l0.minWidth(Is)],commitMarker:[v.l0.height(4),v.l0.width(4),v.l0.backgroundColor.foregroundDefault,v.l0.borderRadius("full")],collapsedMarkerIconDot:[v.l0.height(3),v.l0.width(3),v.l0.backgroundColor.foregroundDimmer,v.l0.borderRadius("full")],collapsedMarkerIconContainer:[v.l0.display.flex,v.l0.align.center,v.l0.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[v.l0.display.flex,v.l0.align.center,v.l0.justify.center,v.l0.height(Is),v.l0.width(Is),v.l0.backgroundColor.backgroundHighest,v.l0.borderRadius("full")],revertMarker:[v.l0.display.flex,v.l0.height(Is),v.l0.width(Is),v.l0.backgroundColor.orangeDimmest,v.l0.borderRadius("full"),v.l0.align.center,v.l0.justify.center],mergeMarker:[v.l0.display.flex,v.l0.height(Is),v.l0.width(Is),v.l0.backgroundColor.purpleDimmest,v.l0.borderRadius("full"),v.l0.align.center,v.l0.justify.center],mergeMarkerIconContainer:[v.l0.position.relative,v.l0.height(9),v.l0.width(13)],mergeMarkerIconLeft:[(0,Ze.Z)({},_s),v.l0.left(0)],mergeMarkerIconRight:[(0,Ze.Z)({},_s),v.l0.right(0)],boundaryMarker:[v.l0.height(6),v.l0.width(6),v.l0.backgroundColor.backgroundDefault,v.l0.borderRadius("full"),{border:"1px solid ".concat(v.TV.backgroundHighest)}]});function Gs(e){var t=function(e){switch(e){case"none":default:return null;case"commit":return(0,r.tZ)(Ps,{});case"revert":return(0,r.tZ)(As,{});case"merge":return(0,r.tZ)(Ns,{});case"boundary":return(0,r.tZ)(Us,{});case"collapsed":return(0,r.tZ)(Ls,{})}}(e.type);return t?(0,r.tZ)("div",{css:Bs.markerContainer,children:t}):null}function Ps(){return(0,r.tZ)("div",{css:Bs.commitMarker})}function As(){return(0,r.tZ)("div",{css:Bs.revertMarker,children:(0,r.tZ)(Ds.Z,{size:12,color:v.TV.orangeStrongest})})}function Ns(){return(0,r.tZ)("div",{css:Bs.mergeMarker,children:(0,r.BX)("div",{css:Bs.mergeMarkerIconContainer,children:[(0,r.tZ)("div",{css:Bs.mergeMarkerIconLeft}),(0,r.tZ)("div",{css:Bs.mergeMarkerIconRight})]})})}function Us(){return(0,r.tZ)("div",{css:Bs.boundaryMarker})}function Ls(){return(0,r.tZ)("div",{css:Bs.collapsedMarker,children:(0,r.BX)("div",{css:Bs.collapsedMarkerIconContainer,children:[(0,r.tZ)("div",{css:Bs.collapsedMarkerIconDot}),(0,r.tZ)("div",{css:Bs.collapsedMarkerIconDot}),(0,r.tZ)("div",{css:Bs.collapsedMarkerIconDot})]})})}var Os=[v.l0.position.absolute,v.l0.left(0),v.l0.width(18)],Xs=(0,Z.X)({connectorSegmentBorderSolid:[Os,{borderRight:"1px solid ".concat(v.TV.outlineDimmest)}],connectorSegmentBorderDashed:[Os,{borderRight:"1px dashed ".concat(v.TV.outlineDimmest)}]});function Ms(e){var t=e.boundaryTop,n=void 0!==t&&t,i=e.boundaryBottom,o=void 0!==i&&i,a=e.joint,l=void 0===a?"top":a,c=e.hideTop,s=void 0!==c&&c,u=e.hideBottom,d=void 0!==u&&u;if(s&&d)return null;if(n===o&&!s&&!d)return(0,r.tZ)(Ws,{top:0,bottom:0,dashed:n&&o});var f=s?null:(0,r.tZ)(Fs,{start:"top",joint:l,dashed:n}),h=d?null:(0,r.tZ)(Fs,{start:"bottom",joint:l,dashed:o});return(0,r.BX)(r.HY,{children:[f,h]})}function Fs(e){var t,n,o=e.start,a=e.joint,l=e.dashed,c=void 0!==l&&l,s="center"===a?(t={},(0,i.Z)(t,o,0),(0,i.Z)(t,"height","50%"),t):(n={},(0,i.Z)(n,o,0),(0,i.Z)(n,o===a?"height":a,8),n);return(0,r.tZ)(Ws,(0,be.Z)((0,Ze.Z)({},s),{dashed:c}))}function Ws(e){var t=e.top,n=e.bottom,i=e.height,o=e.dashed,a=void 0!==o&&o;return(0,r.tZ)("div",{css:a?Xs.connectorSegmentBorderDashed:Xs.connectorSegmentBorderSolid,style:{top:t,bottom:n,height:i}})}var Hs=(0,Z.X)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[Bc.gU.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[v.l0.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:Is},nodeUnfoldedContentSurface:[v.l0.mt(4),v.l0.mb(8),v.l0.p(8),v.l0.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[v.l0.position.relative]});function Vs(e){var t=e.boundaryTop,n=void 0!==t&&t,i=e.boundaryBottom,o=void 0!==i&&i,l=e.hideConnectorTop,c=void 0!==l&&l,s=e.hideConnectorBottom,u=void 0!==s&&s,d=e.joint,f=void 0===d?"top":d,h=e.marker,p=e.header,m=e.unfoldedContent,y=e.children,Z=e.className,b=(0,a.useState)(!0),w=b[0],x=b[1];return(0,r.BX)(g.G,{className:Z,css:v.l0.position.relative,children:[(0,r.tZ)(Ms,{boundaryTop:n,boundaryBottom:o,joint:f,hideTop:c,hideBottom:u}),h?(0,r.tZ)(js,{joint:f,children:h}):null,m?(0,r.BX)(g.G,{css:Hs.containerInteractive,role:"button",tabIndex:0,onClick:function(){x(!w)},onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||x(!w)},children:[w?(0,r.tZ)("div",{css:Hs.nodeFoldedIconContainer,children:(0,r.tZ)(Ha.Z,{})}):(0,r.tZ)("div",{css:Hs.nodeUnFoldedIconContainer,children:(0,r.tZ)(Va.Z,{})}),(0,r.BX)(g.G,{css:Hs.nodeContentContainer,children:[p?(0,r.tZ)(g.G,{css:Hs.nodeHeader,children:p}):null,y?(0,r.tZ)(g.G,{children:y}):null]})]}):(0,r.tZ)(g.G,{css:Hs.container,children:(0,r.BX)(g.G,{css:Hs.nodeContentContainer,children:[p?(0,r.tZ)(g.G,{css:Hs.nodeHeader,children:p}):null,y?(0,r.tZ)(g.G,{children:y}):null]})}),!m||w?null:(0,r.BX)(g.G,{css:Hs.unfoldedContentContainer,children:[u?null:(0,r.tZ)(Ws,{top:0,bottom:0,dashed:o}),(0,r.tZ)(De.Tg,{css:Hs.nodeUnfoldedContentSurface,elevated:!0,children:m})]})]})}var zs=(0,Z.X)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function js(e){var t=e.joint,n=void 0===t?"top":t,i=e.children;return(0,r.tZ)("div",{css:zs[n],children:i})}var qs=(0,Z.X)({container:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.justify.spaceBetween,v.l0.height("100%")],textContainer:[v.l0.rowWithGap(4),v.l0.center],text:[v.l0.flex.shrink(0)]});function $s(e){var t=e.text,n=(0,Qa.Z)(e,["text"]);return(0,r.tZ)(Vs,(0,Ze.Z)({marker:(0,r.tZ)(Gs,{type:"boundary"}),joint:"center",header:(0,r.BX)(g.G,{css:qs.container,children:[(0,r.tZ)(Ic.R,{}),(0,r.BX)(g.G,{css:qs.textContainer,children:[(0,r.tZ)(Rs.Z,{size:12,color:v.TV.foregroundDimmest}),(0,r.tZ)(y.xv,{css:qs.text,variant:"small",color:"dimmest",multiline:!1,children:t})]}),(0,r.tZ)(Ic.R,{})]})},n))}var Ys=(0,Z.X)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:v.TV.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:v.TV.space2},"> dd":{marginLeft:v.TV.space12,paddingBottom:v.TV.space2}},listHeader:[v.l0.fontWeight.medium],content:[v.l0.colWithGap(8)],description:[v.l0.colWithGap(8)],commitList:[v.l0.colWithGap(2),v.l0.pl(4)]}),Ks=function(e,t){var n=!e.body,r=null,i=null;return t&&"type"in t?(r=t,"pull-request"===t.type&&(t.reverts&&(i=t.reverts),t.subject&&(n=!0))):t&&(i=t),{hideBody:n,merge:r,revert:i}},Qs=function(e){var t=e.hash;return(0,r.tZ)(Ya.m,{size:"small",iconLeft:(0,r.tZ)(Pt.Z,{}),textToCopy:t,text:t.slice(0,7),tooltip:"Hash copied!"})},Js=function(e){var t=e.onClick,n=e.text,i=e.loading,o=void 0!==i&&i;return(0,r.tZ)(ae.u,{tooltip:"Discard current changes and restore files to time of commit",children:(0,r.tZ)(Se.zx,{text:n,onClick:t,size:"small",iconLeft:o?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Ds.Z,{})})})},eu=function(e,t){return!(e.name===t.name&&e.email===t.email)},tu=function(e,t){return!(Math.abs(e-t)<6e4)};function nu(e){var t=e.commit,n=e.info,i=void 0===n?null:n,o=eu(t.committer,t.author),a=tu(t.author.date,t.committer.date),l=Ks(t,i),c=l.hideBody,s=l.merge,u=l.revert;return(0,r.BX)(g.G,{css:Ys.content,children:[c?null:(0,r.BX)(g.G,{css:Ys.description,children:[(0,r.tZ)(y.xv,{children:(0,r.tZ)(Sc,{body:t.body})}),(0,r.tZ)(Ic.R,{css:v.l0.backgroundColor.outlineDimmer})]}),(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{css:Ys.listHeader,multiline:!1,children:"Author"}),(0,r.BX)("dl",{css:Ys.definitionList,children:[(0,r.tZ)("dt",{children:"Name:"}),(0,r.tZ)("dd",{children:t.author.name}),(0,r.tZ)("dt",{children:"Email:"}),(0,r.tZ)("dd",{children:t.author.email})]})]}),o?(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{css:Ys.listHeader,multiline:!1,children:"Committer"}),(0,r.BX)("dl",{css:Ys.definitionList,children:[(0,r.tZ)("dt",{children:"Name:"}),(0,r.tZ)("dd",{children:t.committer.name}),(0,r.tZ)("dt",{children:"Email:"}),(0,r.tZ)("dd",{children:t.committer.email})]})]}):null,(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{css:Ys.listHeader,multiline:!1,children:"Commit"}),(0,r.BX)("dl",{css:Ys.definitionList,children:[a?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Authored:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(jc.EK,{date:t.author.date,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Committed:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(jc.EK,{date:t.committer.date,dateFormat:"absolute"})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Date:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(jc.EK,{date:t.author.date,dateFormat:"absolute"})})]}),(0,r.tZ)("dt",{children:"Hash:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Qs,{hash:t.hash})}),s&&"pull-request"===s.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"PR:"}),(0,r.BX)("dd",{children:["#",s.id]})]}):null,s&&"branch"===s.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Merged:"}),(0,r.tZ)("dd",{children:s.source}),s.target?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Into:"}),(0,r.tZ)("dd",{children:s.target})]}):null]}):null,u?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Reverted:"}),(0,r.tZ)("dd",{children:u.hash})]}):null]})]}),s&&"simple"===s.type?(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{css:Ys.listHeader,multiline:!1,children:"Merged"}),(0,r.BX)(g.G,{css:Ys.commitList,children:[(0,r.tZ)(y.xv,{multiline:!1,children:s.a}),(0,r.tZ)(y.xv,{multiline:!1,children:s.b})]})]}):null,s&&"octopus"===s.type?(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{css:Ys.listHeader,multiline:!1,children:"Merged"}),(0,r.tZ)(g.G,{css:Ys.commitList,children:s.parents.map((function(e,t){return(0,r.tZ)(y.xv,{multiline:!1,children:e},t)}))})]}):null]})}var ru=(0,Z.X)({authorContainer:[v.l0.rowWithGap(8),v.l0.align.center],headerText:[v.l0.rowWithGap(4),v.l0.align.center,v.l0.fontWeight.medium],headerContainer:[v.l0.colWithGap(4),v.l0.align.start,v.l0.justify.start],button:[v.l0.reset.button,v.l0.linkStyle,v.l0.color.foregroundDefault,v.l0.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),iu=function(e){var t=e.author;return(0,r.BX)(g.G,{css:ru.authorContainer,children:[(0,r.tZ)(Vc,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(jc.EK,{date:t.date,textColor:"dimmest",textVariant:"small"})]})},ou=function(e){var t=e.children;return(0,r.tZ)(y.xv,{css:ru.headerText,multiline:!1,maxLines:1,children:t})},au=function(e){var t=e.commit,n=e.onViewCommitClick,i=e.children;return(0,r.tZ)(g.G,{css:ru.headerContainer,children:(0,r.tZ)(ae.u,{tooltip:"View ".concat(t.hash.slice(0,7)),children:(0,r.tZ)("button",{css:ru.button,onClick:function(){return n(t.hash)},children:i})})})};function lu(e){var t=e.commit,n=(0,Qa.Z)(e,["commit"]);return(0,r.tZ)(Vs,(0,be.Z)((0,Ze.Z)({marker:(0,r.tZ)(Gs,{type:"commit"}),header:(0,r.tZ)(ou,{children:(0,r.tZ)(kc,{subject:t.subject})}),unfoldedContent:(0,r.tZ)(nu,{commit:t})},n),{children:(0,r.tZ)(iu,{author:t.author})}))}var cu=function(e){var t=e.commit,n=e.onViewCommitClick,i=(0,Qa.Z)(e,["commit","onViewCommitClick"]);return(0,r.tZ)(Vs,(0,be.Z)((0,Ze.Z)({marker:(0,r.tZ)(Gs,{type:"commit"}),header:(0,r.tZ)(au,{commit:t,onViewCommitClick:function(){return n(t.hash)},children:(0,r.tZ)(ou,{children:(0,r.tZ)(kc,{subject:t.subject})})})},i),{children:(0,r.tZ)(iu,{author:t.author})}))},su=n(21090);function uu(e){var t,n=e.commit,i=e.info,o=(0,Qa.Z)(e,["commit","info"]);return"branch"!==i.type&&(t="pull-request"===i.type&&i.subject?i.subject:n.subject),(0,r.tZ)(Vs,(0,be.Z)((0,Ze.Z)({marker:(0,r.tZ)(Gs,{type:"merge"}),header:(0,r.BX)(ou,{children:[(0,r.tZ)(wc,{text:"merged"}),(0,r.tZ)(fu,{info:i,hash:n.hash,subject:n.subject})]}),unfoldedContent:(0,r.tZ)(nu,{commit:n,info:i})},o),{children:(0,r.BX)(g.G,{css:[v.l0.colWithGap(8)],children:[t?(0,r.tZ)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,r.tZ)(kc,{subject:t})}):null,(0,r.tZ)(iu,{author:n.author})]})}))}var du=function(e){var t,n=e.commit,i=e.info,o=e.onViewCommitClick,a=(0,Qa.Z)(e,["commit","info","onViewCommitClick"]);return"branch"!==i.type&&(t="pull-request"===i.type&&i.subject?i.subject:n.subject),(0,r.tZ)(Vs,(0,be.Z)((0,Ze.Z)({marker:(0,r.tZ)(Gs,{type:"merge"}),header:(0,r.tZ)(au,{commit:n,onViewCommitClick:function(){return o(n.hash)},children:(0,r.BX)(ou,{children:[(0,r.tZ)(wc,{text:"merged"}),(0,r.tZ)(fu,{info:i,hash:n.hash,subject:n.subject})]})})},a),{children:(0,r.BX)(g.G,{css:[v.l0.colWithGap(8)],children:[t?(0,r.tZ)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,r.tZ)(kc,{subject:t})}):null,(0,r.tZ)(iu,{author:n.author})]})}))};function fu(e){var t=e.info,n=e.hash,i=e.subject,o=(0,r.tZ)("span",{css:v.l0.fontWeight.medium,children:i});switch(t.type){case"pull-request":return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"pull request"}),(0,r.tZ)(xc,{id:t.id}),t.reverts&&t.reverts.pr?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"-"}),(0,r.tZ)(bc,{text:"reverts"}),(0,r.tZ)(xc,{id:t.reverts.pr})]}):null]});case"branch":return t.target?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ec,{name:t.source}),(0,r.tZ)("span",{children:"into"}),(0,r.tZ)(Ec,{name:t.target})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"branch"}),(0,r.tZ)(Ec,{name:t.source})]});case"simple":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Cc,{hash:t.a}),(0,r.tZ)(su.Z,{css:{alignSelf:"center"},size:12}),(0,r.tZ)(Cc,{hash:t.b})]});case"octopus":return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"commit"}),(0,r.tZ)(Cc,{hash:n}),(0,r.BX)("span",{children:["(",t.parents.length," parents)"]})]});default:return o}}function hu(e){var t=e.commit,n=e.info,i=(0,Qa.Z)(e,["commit","info"]);return(0,r.tZ)(Vs,(0,be.Z)((0,Ze.Z)({marker:(0,r.tZ)(Gs,{type:"revert"}),header:(0,r.BX)(ou,{children:[(0,r.tZ)(bc,{text:"reverted"}),(0,r.tZ)(Cc,{hash:n.hash}),(0,r.tZ)(kc,{subject:n.subject,quoted:!0})]}),unfoldedContent:(0,r.tZ)(nu,{commit:t,info:n})},i),{children:(0,r.tZ)(iu,{author:t.author})}))}var pu=function(e){var t=e.commit,n=e.info,i=e.onViewCommitClick,o=(0,Qa.Z)(e,["commit","info","onViewCommitClick"]);return(0,r.tZ)(Vs,(0,be.Z)((0,Ze.Z)({marker:(0,r.tZ)(Gs,{type:"revert"}),header:(0,r.tZ)(au,{commit:t,onViewCommitClick:function(){return i(t.hash)},children:(0,r.BX)(ou,{children:[(0,r.tZ)(bc,{text:"reverted"}),(0,r.tZ)(Cc,{hash:n.hash}),(0,r.tZ)(kc,{subject:n.subject,quoted:!0})]})})},o),{children:(0,r.tZ)(iu,{author:t.author})}))};function mu(e){var t=e.button,n=(0,Qa.Z)(e,["button"]);return(0,r.tZ)(Vs,(0,be.Z)((0,Ze.Z)({marker:(0,r.tZ)(Gs,{type:"boundary"}),joint:"center"},n),{children:(0,r.tZ)(g.G,{children:t})}))}function vu(e){var t=e.items;return(0,r.tZ)(g.G,{children:t.map((function(e,n){return(0,r.tZ)(gu,{items:t,index:n},n)}))})}function gu(e){var t=e.items,n=e.index,i=t[n],o=0===n,a=n===t.length-1;if("boundary"===i.type)return(0,r.tZ)($s,{text:i.text,hideConnectorTop:o,hideConnectorBottom:a,boundaryTop:!0,boundaryBottom:!0},i.text);if("button"===i.type)return(0,r.tZ)(mu,{button:i.button,hideConnectorTop:o,hideConnectorBottom:a,boundaryTop:!0,boundaryBottom:!0},i.key);var l="commit"!==(t[n-1]?t[n-1].type:null),c="commit"!==(t[n+1]?t[n+1].type:null);return(0,r.tZ)(yu,{commit:i.commit,hideConnectorTop:o,hideConnectorBottom:a,boundaryTop:l,boundaryBottom:c,onViewCommitClick:i.onViewCommitClick},i.commit.hash)}function yu(e){var t=e.commit,n=e.onViewCommitClick,i=(0,Qa.Z)(e,["commit","onViewCommitClick"]),o=Ts(t);if(o)return n?(0,r.tZ)(du,(0,Ze.Z)({info:o,commit:t,onViewCommitClick:n},i)):(0,r.tZ)(uu,(0,Ze.Z)({info:o,commit:t},i));var a=xs(t);return a?n?(0,r.tZ)(pu,(0,Ze.Z)({info:a,commit:t,onViewCommitClick:n},i)):(0,r.tZ)(hu,(0,Ze.Z)({info:a,commit:t},i)):n?(0,r.tZ)(cu,(0,Ze.Z)({commit:t,onViewCommitClick:n},i)):(0,r.tZ)(lu,(0,Ze.Z)({commit:t},i))}var Zu=(0,an.F4)({from:{opacity:0},to:{opacity:1}}),bu=(0,Z.X)({loadingView:[{animation:"".concat(Zu," 0.125s 0.25s linear backwards")},v.l0.flex.grow(1),v.l0.display.flex,v.l0.center]});function wu(){return(0,r.tZ)(g.G,{css:bu.loadingView,children:(0,r.tZ)(oe.Z,{size:48})})}var xu=n(89399);function Cu(e){var t,n,i,o,l,c,s=e.status,u=e.gotoPendingState,f=(0,a.useState)(!1),h=f[0],p=f[1],m=lc(),v=(0,d.Z)().git,g=s.branch,y=null!==(o=null===(t=s.upstream)||void 0===t?void 0:t.branch)&&void 0!==o?o:null,Z=null!==(l=null===(n=s.upstream)||void 0===n?void 0:n.behind)&&void 0!==l?l:0,b=null!==(c=null===(i=s.upstream)||void 0===i?void 0:i.ahead)&&void 0!==c?c:0,w=s.changes.length>0,x=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var t,n,r;return(0,xe.__generator)(this,(function(i){switch(i.label){case 0:return g&&y&&Z&&!w?[4,e.isInitialized()]:[2,{canPull:!1,mode:xu.T.FF_ONLY,error:null}];case 1:return(t=i.sent()).error?(m(t.error),[2,t]):t.initialized?[4,e.canMergeBranches(g,y)]:[2,{canPull:!1,mode:xu.T.FF_ONLY,error:null}];case 2:return(n=i.sent()).error?(m(n.error),[2,n]):(r=xu.T.FF_ONLY,b>0&&(r=n.canMerge?xu.T.REBASE:xu.T.MERGE),[2,{canPull:!0,mode:r,error:null}])}}))}));return function(t){return e.apply(this,arguments)}}(),[m,g,y,Z,b,w],{keepStaleResult:!1});if(null===x||void 0===x?void 0:x.error)return null;var C,k,S,E=null===x,T=null!==(C=null===x||void 0===x?void 0:x.canPull)&&void 0!==C&&C,R=null!==(k=null===x||void 0===x?void 0:x.mode)&&void 0!==k?k:xu.T.FF_ONLY;function D(){return(D=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return h?[2]:(p(!0),[4,v.pull({mode:R,allowConflicts:!0})]);case 1:return e=t.sent(),v.forceRefresh(),e.error?(m(e.error),p(!1)):(e.hasConflicts&&u(),ql("upstream-pulled")),[2]}}))}))).apply(this,arguments)}return h?S="Pulling...":g?w?S="Cannot pull with uncommitted changes":0===Z?S="Nothing to pull":E?S="Checking for merge conflicts\u2026":T?(S="Pull ".concat(Z," ").concat((0,te.Z)("commit",Z)),R===xu.T.REBASE?S+=" with rebase":R===xu.T.MERGE&&(S+=" with merge")):S="Cannot pull due to merge conflict":S="Cannot pull - the HEAD is detached",(0,r.tZ)(Se.zx,{text:S,iconLeft:E||h?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Ne.Z,{}),onClick:function(){return D.apply(this,arguments)},loading:E||h,disabled:!T})}var ku=n(5158);function Su(e){var t,n,i,o,l,c=e.status,s=(0,a.useState)(!1),u=s[0],f=s[1],h=lc(),p=(0,d.Z)().git,m=null===c.branch,v=null!==(i=null===(t=c.upstream)||void 0===t?void 0:t.behind)&&void 0!==i?i:0,g=null!==(o=null===(n=c.upstream)||void 0===n?void 0:n.ahead)&&void 0!==o?o:0,y=m||v>0||0===g;function Z(){return(Z=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return y||u?[2]:(f(!0),[4,p.push()]);case 1:return e=t.sent(),p.forceRefresh(),e.error?(h(e.error),f(!1)):ql("upstream-pushed"),[2]}}))}))).apply(this,arguments)}return l=u?"Pushing...":m?"Cannot push - the HEAD is detached":0===g?"Nothing to push":v>0?"Cannot push due to unpulled changes":"Push ".concat(g," ").concat((0,te.Z)("commit",g)),(0,r.tZ)(Se.zx,{text:l,iconLeft:u?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(ku.Z,{}),onClick:function(){return Z.apply(this,arguments)},disabled:y,loading:u})}function Eu(e){var t=e.branch,n=(0,a.useState)(!1),i=n[0],o=n[1],l=lc(),c=(0,d.Z)().git;function s(){return(s=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(n){switch(n.label){case 0:return i?[2]:(o(!0),[4,c.switchBranch(t)]);case 1:return(e=n.sent()).error?(l(e.error),o(!1),Cl({context:"switch-branch-button",gitService:c,result:e})):(c.forceRefresh(),ql("branch-switched")),[2]}}))}))).apply(this,arguments)}(0,a.useEffect)((function(){return o(!1)}),[t]);var u=i?"Switching to branch...":"Switch to Branch";return(0,r.tZ)(Se.zx,{text:u,colorway:"primary",onClick:function(){return s.apply(this,arguments)},iconLeft:i?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(mc.Z,{}),loading:i})}function Tu(e){for(var t=e.split("/").slice(0,-1),n=[],r=0;r<t.length;r++){var i=t.slice(r).join("/")+"/";0!==r&&(i="\u2026/"+i),n.push(i)}return n.reverse()}function Ru(e){if(0===e.length)return new Map;if(1===e.length)return new Map([[e[0],null]]);var t=new Map,n=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value,s=(0,D.UO)(c),u=t.get(s);u||(u=[],t.set(s,u)),u.push(c)}}catch(y){r=!0,i=y}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}var d=new Map,f=!0,h=!1,p=void 0;try{for(var m,v=function(){var e=function(e){var t=[],i=new Map,a=!0,l=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var f=(0,o.Z)(s.value,2),h=f[0],p=f[1];if(!r.has(h)){var m=p[e];m||(m=p[p.length-1]),t.push(m),i.set(m,h)}}}catch(y){l=!0,c=y}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}if(0===t.length)return"break";var v=!0,g=!1,Z=void 0;try{for(var b,w=function(){var e=b.value,n=i.get(e);if(void 0===n)throw new Error("Unpopulated segment map");1===t.filter((function(t){return t===e})).length&&(r.add(n),d.set(n,e))},x=t[Symbol.iterator]();!(v=(b=x.next()).done);v=!0)w()}catch(y){g=!0,Z=y}finally{try{v||null==x.return||x.return()}finally{if(g)throw Z}}},t=(0,o.Z)(m.value,2)[1];if(1===t.length)return d.set(t[0],null),"continue";var n=new Map,r=new Set,i=0,a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var f=s.value;if(-1!==f.indexOf("/")){var h=Tu(f);n.set(f,h),h.length>i&&(i=h.length)}else d.set(f,null),r.add(f)}}catch(y){l=!0,c=y}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}for(var p=0;p<=i;p++){if("break"===e(p))break}if(r.size!==t.length){var v=!0,g=!1,Z=void 0;try{for(var b,w=t[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var x=b.value;if(!r.has(x)){var C=x.split("/").slice(0,-1).join("/");d.set(x,C)}}}catch(y){g=!0,Z=y}finally{try{v||null==w.return||w.return()}finally{if(g)throw Z}}}},g=t[Symbol.iterator]();!(f=(m=g.next()).done);f=!0)v()}catch(y){h=!0,p=y}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}return d}var Du=n(24769),Iu=(0,Z.X)({actionsIndex:[v.l0.height(24),v.l0.align.center,v.l0.borderRadius(4)],actionsWorktree:[v.l0.height(24),v.l0.flex.row,v.l0.align.center,v.l0.borderRadius(4)],unstage:[v.l0.height(24),v.l0.width(24),v.l0.borderRadius(2)],stage:[v.l0.px(12),v.l0.height(24),v.l0.width(24),v.l0.borderRadius(2)],reset:[v.l0.pl(16),v.l0.pr(12),v.l0.height(24),v.l0.width(24),v.l0.borderRadius(2)],resetIcon:{transform:"scale(0.85)"},divider:[v.l0.height("75%"),v.l0.width(1),v.l0.backgroundColor.outlineStronger]});function _u(e){var t=e.file,n=e.list,i=e.stageFiles,o=e.restoreFiles,l=e.disabled,c=void 0!==l&&l,s=(0,a.useState)(!1),u=s[0],d=s[1],f=(0,a.useState)(!1),h=f[0],p=f[1];function m(){return(m=(0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){switch(e.label){case 0:return c?[2]:(d(!0),[4,i({reset:[t.path]})]);case 1:return e.sent(),d(!1),[2]}}))}))).apply(this,arguments)}function v(){return(v=(0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){switch(e.label){case 0:return c?[2]:(d(!0),[4,i({add:[t.path]})]);case 1:return e.sent(),d(!1),[2]}}))}))).apply(this,arguments)}function g(){return(g=(0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){switch(e.label){case 0:return c||"worktree"!==n?[2]:(p(!0),[4,o(t.path)]);case 1:return e.sent(),p(!1),[2]}}))}))).apply(this,arguments)}return c=c||h||u,"index"===n?(0,r.tZ)(De.Tg,{elevated:!0,css:Iu.actionsIndex,children:(0,r.tZ)(ne.hU,{css:Iu.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:c,children:u?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Du.Z,{})})}):(0,r.BX)(De.Tg,{elevated:!0,css:Iu.actionsWorktree,children:[(0,r.tZ)(ne.hU,{css:Iu.reset,alt:"Reset changes",size:18,tooltipDelay:"long",onClick:function(){return g.apply(this,arguments)},disabled:c,children:h?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Ds.Z,{css:Iu.resetIcon})}),(0,r.tZ)("div",{css:Iu.divider}),(0,r.tZ)(ne.hU,{css:Iu.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return v.apply(this,arguments)},disabled:c,children:u?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Co.Z,{})})]})}var Bu=(0,Z.X)({path:[v.l0.rowWithGap(8),v.l0.flex.growAndShrink(1),v.l0.align.center],source:[v.l0.color.foregroundDimmest],sourceArrow:[v.l0.mx(8)]});function Gu(e){var t=e.path,n=e.prefix,i=e.source,o=e.onClick;return(0,r.BX)(g.G,{css:Bu.path,children:[(0,r.tZ)(La.Z,{path:t}),(0,r.BX)(y.xv,{multiline:!1,children:[(0,r.tZ)(Tc,{path:t,prefix:n,onClick:o}),i?(0,r.BX)("span",{css:Bu.source,children:[(0,r.tZ)("span",{css:Bu.sourceArrow,children:"\u2190"}),(0,r.tZ)(Tc,{path:i})]}):null]})]})}var Pu=(0,Z.X)({modifiedFile:[v.l0.py(2),v.l0.rowWithGap(4),v.l0.align.center]});function Au(e){var t,n=e.file,i=e.list,o=e.stageFiles,a=e.restoreFiles,l=e.pathMap,c=e.disabled,s=void 0!==c&&c,u=e.onFilePathClick,d=null===l||void 0===l?void 0:l.get(n.path),f=null===(t=n.source)||void 0===t?void 0:t.path,h="index"===i?n.type.index:n.type.worktree,p=(0,mt.Z)((function(){if(h!==za.h.DELETED)return function(){return u(n.path)}}),[n.path,u,h]);return(0,r.BX)(g.G,{css:Pu.modifiedFile,children:[(0,r.tZ)(Gu,{path:n.path,prefix:d,source:f,onClick:p}),(0,r.tZ)(qa,{type:h}),(0,r.tZ)(_u,{file:n,list:i,stageFiles:o,restoreFiles:a,disabled:s})]})}var Nu=(0,Z.X)({actions:[v.l0.rowWithGap(2),v.l0.backgroundColor.backgroundHighest,v.l0.borderRadius(8)],buttonReset:[v.l0.borderRadius(8,0,0,8)],buttonStage:[v.l0.borderRadius(0,8,8,0)],divider:[v.l0.my(8),v.l0.width(1),v.l0.backgroundColor.outlineStronger]});function Uu(e){var t=e.type,n=e.stageFiles,i=e.restoreFiles,o=e.disabled,l=void 0!==o&&o,c=(0,a.useState)(!1),s=c[0],u=c[1],d=(0,a.useState)(!1),f=d[0],h=d[1];function p(){return m.apply(this,arguments)}function m(){return(m=(0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){switch(e.label){case 0:return l?[2]:(u(!0),[4,n({all:"index"!==t})]);case 1:return e.sent(),u(!1),[2]}}))}))).apply(this,arguments)}function v(){return(v=(0,we.Z)((function(){return(0,xe.__generator)(this,(function(e){switch(e.label){case 0:return l||"worktree"!==t?[2]:(h(!0),[4,i(!0)]);case 1:return e.sent(),h(!1),[2]}}))}))).apply(this,arguments)}return l=l||f||s,"index"===t?(0,r.tZ)(Se.zx,{text:"Unstage All",iconLeft:s?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Du.Z,{}),onClick:p,disabled:l,loading:s,size:"small"}):(0,r.BX)(g.G,{css:Nu.actions,children:[(0,r.tZ)(Se.zx,{css:Nu.buttonReset,text:"Reset All",iconLeft:f?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Ds.Z,{}),onClick:function(){return v.apply(this,arguments)},disabled:l,loading:f,size:"small"}),(0,r.tZ)("div",{css:Nu.divider}),(0,r.tZ)(Se.zx,{css:Nu.buttonStage,text:"Stage All",iconLeft:s?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Co.Z,{}),onClick:p,disabled:l,loading:s,size:"small"})]})}var Lu=n(86033),Ou=(0,Z.X)({list:[v.l0.pt(4),v.l0.pb(8),v.l0.colWithGap(4)],listFolded:[v.l0.py(4)],header:[v.l0.px(8),v.l0.rowWithGap(4),v.l0.align.center],headerFoldable:[v.l0.py(4),v.l0.pl(4),v.l0.pr(8),v.l0.rowWithGap(4),v.l0.align.center],headerText:[v.l0.flex.grow(1)],body:[v.l0.px(8),v.l0.maxHeight("25vh"),v.l0.overflowY("auto")]});function Xu(e){var t,n=e.files,i=e.type,o=e.stageFiles,l=e.restoreFiles,c=e.onFilePathClick,s=e.pathMap,u=e.foldable,d=void 0!==u&&u,f=e.disabled,h=void 0!==f&&f,p=(0,a.useState)(!1),m=p[0],v=p[1],y=(0,a.useRef)(null),Z=(0,a.useRef)(null),b=(0,Lu.MG)({count:n.length,getScrollElement:function(){return Z.current},getItemKey:function(e){return n[e].path},estimateSize:function(){return 28},overscan:20}),w=b.getVirtualItems();return d&&m?(0,r.tZ)(g.G,{css:Ou.listFolded,children:(0,r.BX)(g.G,{css:d?Ou.headerFoldable:Ou.header,children:[(0,r.tZ)(Mu,{files:n,type:i,setFolded:v,foldable:!0,folded:!0}),(0,r.tZ)(Uu,{type:i,stageFiles:o,restoreFiles:l,disabled:h})]})}):(0,r.BX)(g.G,{innerRef:y,css:Ou.list,children:[(0,r.BX)(g.G,{css:d?Ou.headerFoldable:Ou.header,children:[(0,r.tZ)(Mu,{files:n,type:i,setFolded:v,foldable:d}),(0,r.tZ)(Uu,{type:i,stageFiles:o,restoreFiles:l,disabled:h})]}),(0,r.tZ)(g.K.div,{ref:Z,css:Ou.body,children:(0,r.tZ)("div",{style:{minHeight:b.getTotalSize()},children:(0,r.tZ)("div",{style:{transform:"translateY(".concat(null===(t=w[0])||void 0===t?void 0:t.start,"px)"),willChange:"transform"},children:w.map((function(e){var t=n[e.index];return(0,r.tZ)("div",{"data-index":e.index,children:(0,r.tZ)(Au,{file:t,list:i,stageFiles:o,restoreFiles:l,onFilePathClick:c,pathMap:s,disabled:h},t.path)},e.key)}))})})})]})}function Mu(e){var t=e.files,n=e.type,i=e.setFolded,o=e.foldable,a=void 0!==o&&o,l=e.folded,c=void 0!==l&&l,s="index"===n?"staged":"changed",u=(0,te.Z)("file",t.length),d="".concat(t.length," ").concat(s," ").concat(u);return a&&c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ne.hU,{alt:"Show list",onClick:function(){return i(!1)},children:(0,r.tZ)(Ha.Z,{})}),(0,r.tZ)(y.xv,{css:Ou.headerText,multiline:!1,children:d})]}):(0,r.BX)(r.HY,{children:[a?(0,r.tZ)(ne.hU,{alt:"Hide list",onClick:function(){return i(!0)},children:(0,r.tZ)(Va.Z,{color:v.TV.foregroundDimmest})}):null,(0,r.tZ)(y.xv,{css:Ou.headerText,color:"dimmest",multiline:!1,children:d})]})}var Fu=n(92961),Wu=(0,Z.X)({container:[v.l0.colWithGap(8)],buttons:[v.l0.rowWithGap(8),v.l0.justify.end],restoringBoth:[v.l0.colWithGap(12)],listContainer:[v.l0.colWithGap(4)],list:[v.l0.px(4),v.l0.colWithGap(2)]});function Hu(e){var t=e.show,n=e.files,i=e.pathMap,o=e.callback,l=(0,ul.Z)(o),c=(0,a.useCallback)((function(){var e;null===(e=l.current)||void 0===e||e.call(l,!0)}),[l]),s=(0,a.useCallback)((function(){var e;null===(e=l.current)||void 0===e||e.call(l,!1)}),[l]);return(0,r.tZ)(yo.u,{isOpen:t,onRequestClose:s,children:t?(0,r.BX)(g.G,{css:Wu.container,children:[(0,r.BX)(y.h4,{level:2,children:["Discard ",(0,te.Z)("Change",n.length)]}),(0,r.tZ)(Vu,{files:n,pathMap:i}),(0,r.BX)(g.G,{css:Wu.buttons,children:[(0,r.tZ)(Se.zx,{text:"Cancel",iconLeft:(0,r.tZ)(Fu.Z,{}),onClick:s}),(0,r.tZ)(Se.zx,{text:"Discard ".concat((0,te.Z)("Change",n.length)),iconLeft:(0,r.tZ)(Ds.Z,{}),colorway:"negative",onClick:c})]})]}):null})}function Vu(e){var t=e.files,n=e.pathMap,i=[],o=[],a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;d.type.worktree===za.h.UNTRACKED?o.push(d):i.push(d)}}catch(f){l=!0,c=f}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return!i.length&&o.length?(0,r.BX)(g.G,{css:Wu.listContainer,children:[(0,r.tZ)(y.xv,{children:1===o.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,r.tZ)(zu,{files:o,pathMap:n})]}):i.length&&!o.length?(0,r.BX)(g.G,{css:Wu.listContainer,children:[(0,r.tZ)(y.xv,{children:1===i.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,r.tZ)(zu,{files:i,pathMap:n})]}):(0,r.BX)(g.G,{css:Wu.restoringBoth,children:[i.length?(0,r.BX)(g.G,{css:Wu.listContainer,children:[(0,r.BX)(y.h4,{level:3,children:["Tracked ",(0,te.Z)("File",i.length)]}),(0,r.tZ)(y.xv,{multiline:!1,children:1===i.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,r.tZ)(zu,{files:i,pathMap:n})]}):null,o.length?(0,r.BX)(g.G,{css:Wu.listContainer,children:[(0,r.BX)(y.h4,{level:3,children:["Untracked ",(0,te.Z)("File",o.length)]}),(0,r.tZ)(y.xv,{multiline:!1,children:1===o.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,r.tZ)(zu,{files:o,pathMap:n})]}):null]})}function zu(e){var t=e.files,n=e.pathMap,i=(0,a.useMemo)((function(){return t.length>20?t.slice(0,20):t}),[t]);return(0,r.tZ)(g.G,{children:(0,r.BX)("ul",{css:Wu.list,children:[i.map((function(e){var t;return(0,r.tZ)("li",{children:(0,r.tZ)(Gu,{path:e.path,prefix:n.get(e.path),source:null===(t=e.source)||void 0===t?void 0:t.path})},e.path)})),t.length<=20?null:(0,r.tZ)("li",{children:(0,r.BX)(y.xv,{color:"dimmer",children:["... ",t.length-20," more"," ",(0,te.Z)("file",t.length-20)]})})]})})}function ju(e){var t=(0,a.useState)((function(){return{show:!1,files:[]}})),n=t[0],i=t[1];return{openRestoreConfirmationModal:(0,a.useCallback)((function(e){return new Promise((function(t){0===e.length&&t(!1);i({show:!0,files:e,callback:function(e){i({show:!1,files:[],callback:void 0}),t(e)}})}))}),[]),restoreConfirmationModal:(0,a.useMemo)((function(){return(0,r.tZ)(Hu,(0,be.Z)((0,Ze.Z)({},n),{pathMap:e}))}),[n,e])}}var qu=[{"& > span:first-child":[v.l0.flex.grow(1),v.l0.textAlign.left]},{"& > span":[v.l0.flex.shrink(1)]}],$u=(0,Z.X)({buttonFolded:[qu,v.l0.height("auto"),v.l0.py(8),v.l0.fontWeight.medium],buttonUnfolded:[qu,v.l0.height("auto"),v.l0.py(8),v.l0.fontWeight.medium,v.l0.border({color:v.TV.outlineDimmer,direction:"bottom"}),v.l0.borderRadius(8,8,0,0)],container:[v.l0.flex.grow(1),v.l0.borderRadius(8)],lists:[v.l0.borderRadius(0,0,8,8)],divider:[v.l0.height(1),v.l0.minHeight(1),v.l0.width("100%"),v.l0.backgroundColor.outlineDimmer],autoStageMessage:[v.l0.pt(4),v.l0.pb(8),v.l0.px(4),v.l0.center],noChangesMessage:[v.l0.py(16),v.l0.px(4),v.l0.center],buttonText:[v.l0.flex.grow(1)],details:[v.l0.rowWithGap(4),v.l0.fontWeight.normal,v.l0.color.foregroundDimmest]});function Yu(e){var t=e.status,n=e.stageFiles,i=e.restoreFiles,o=e.onStagedFileClick,l=e.disabled,c=void 0!==l&&l,s=(0,a.useState)(!1),u=s[0],d=s[1],f=(0,a.useState)(!1),h=f[0],p=f[1],m=(0,a.useState)(!1),v=m[0],Z=m[1],b=(0,a.useMemo)((function(){return Ru(t.changes.map((function(e){return e.path})))}),[t]),w=(0,a.useMemo)((function(){var e=[],n=[],r=!0,i=!1,o=void 0;try{for(var a,l=t.changes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==za.h.UNMODIFIED&&n.push(c)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return[e,n]}),[t.changes]),x=w[0],C=w[1],k=x.length>0&&C.length>0,S=ju(b),E=S.openRestoreConfirmationModal,T=S.restoreConfirmationModal,R=(0,a.useCallback)(function(){var e=(0,we.Z)((function(e){return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return"all"in e?(p(!0),[4,n(e)]):[3,2];case 1:return t.sent(),p(!1),[3,4];case 2:return[4,n(e)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[n]),D=(0,a.useCallback)(function(){var e=(0,we.Z)((function(e){var t,n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return!0!==e?[3,4]:(Z(!0),[4,E(C)]);case 1:return r.sent()?[4,i(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return Z(!1),[3,8];case 4:if("string"===typeof e){if(!(n=C.find((function(t){return t.path===e}))))throw Z(!1),new Error("Could not find file in worktree list");t=[n]}else t=C.filter((function(t){return e.includes(t.path)}));return[4,E(t)];case 5:return r.sent()?[4,i(e)]:[3,7];case 6:r.sent(),r.label=7;case 7:Z(!1),r.label=8;case 8:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[E,i,C]);return u?(0,r.tZ)(Ku,{setFolded:d,changeCount:C.length,stagedCount:x.length,disabled:c,folded:!0}):0===x.length&&0===C.length?(0,r.BX)(g.G,{style:{opacity:c?.725:void 0},css:$u.container,children:[(0,r.tZ)(Ku,{setFolded:d,changeCount:C.length,stagedCount:x.length,disabled:c}),(0,r.tZ)(De.Tg,{css:$u.lists,elevated:!0,children:(0,r.tZ)(g.G,{css:$u.noChangesMessage,children:(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(g.G,{style:{opacity:c?.725:void 0},css:$u.container,children:[(0,r.tZ)(Ku,{setFolded:d,changeCount:C.length,stagedCount:x.length,disabled:c}),(0,r.BX)(De.Tg,{css:$u.lists,elevated:!0,children:[0===x.length?null:(0,r.tZ)(Xu,{type:"index",files:x,stageFiles:R,restoreFiles:D,onFilePathClick:o,pathMap:b,foldable:k,disabled:c||h||v}),k?(0,r.tZ)("div",{css:$u.divider}):null,0===C.length?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(Xu,{type:"worktree",files:C,stageFiles:R,restoreFiles:D,onFilePathClick:o,pathMap:b,foldable:k,disabled:c||h||v}),k?null:(0,r.tZ)(g.G,{css:$u.autoStageMessage,children:(0,r.tZ)(y.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),T]})}function Ku(e){var t=e.folded,n=void 0!==t&&t,i=e.setFolded,o=e.changeCount,a=e.stagedCount,l=e.disabled,c=void 0!==l&&l;return(0,r.tZ)(Se.zx,{css:n?$u.buttonFolded:$u.buttonUnfolded,text:"Review Changes",secondaryText:(0,r.tZ)(Qu,{folded:n,changeCount:o,stagedCount:a}),onClick:function(){return i(!n)},iconRight:n?(0,r.tZ)(Ha.Z,{}):(0,r.tZ)(Va.Z,{}),disabled:c,size:"small"})}function Qu(e){var t=e.folded,n=e.changeCount,i=e.stagedCount;if(!t)return null;var o=n>0,a=i>0;return o||a?(0,r.BX)("span",{css:$u.details,children:[o?(0,r.BX)("span",{children:[n," ",(0,te.Z)("change",n)]}):null,o&&a?(0,r.tZ)("span",{children:"/"}):null,a?(0,r.BX)("span",{children:[i," staged"]}):null]}):(0,r.tZ)("span",{css:$u.details,children:(0,r.tZ)("span",{children:"no changes"})})}var Ju=n(8576),ed=n(63743),td=n(58125),nd=n(72123),rd=n(20194),id=n(8146),od={height:32,width:"100%",resize:"none",border:"none"},ad={width:"100%",resize:"none",border:"none"},ld=(0,Z.X)({surface:[v.l0.p(8),v.l0.colWithGap(12),v.l0.borderRadius(0,0,8,8)],button:[v.l0.height("auto"),v.l0.py(8),v.l0.fontWeight.medium,v.l0.borderRadius(8,8,0,0),v.l0.justify.start,v.l0.border({color:v.TV.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[v.l0.display.inlineFlex,v.l0.rowWithGap(4)],subjectField:[v.l0.colWithGap(8)],bodyField:[v.l0.colWithGap(8)],subjectInput:od,bodyInput:ad,subjectInputDisabled:[od,{opacity:.5}],bodyInputDisabled:[ad,{opacity:.5}],required:[v.l0.color.accentNegativeStronger],keyCombo:[v.l0.display.inlineFlex,v.l0.rowWithGap(4),v.l0.flex.grow(1),v.l0.align.center],keyComboText:[v.l0.fontWeight.normal,v.l0.color.foregroundDimmest]});function cd(e){var t=e.message,n=e.disabled,i=void 0!==n&&n,o=e.onMessageChange,l=e.onCommitShortcut,c=function(e,t){e=e.replaceAll("\n"," "),o(e+(t?"\n\n"+t:""))},s=(0,a.useState)(!0),u=s[0],d=s[1],f=(0,a.useState)(!1),h=f[0],p=f[1],m=(0,a.useState)(!1),v=m[0],y=m[1],Z=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,It.Z)(t.split("\n\n")),x=w[0],C=void 0===x?"":x,k=w.slice(1).join("\n\n"),S=(0,id.d)(),E=(0,td.gf)(rd.CN.gitCommit.id);return(0,nd.ow)(rd.CT,v),(0,td.Il)((function(){return[rd.CN.gitCommit.id,{run:function(){null===l||void 0===l||l()},scope:rd.CT,bubble:!1}]}),[l]),(0,r.BX)(g.G,{children:[(0,r.tZ)(Se.zx,{css:ld.button,text:(0,r.BX)("span",{css:ld.requiredText,children:[(0,r.tZ)("span",{children:"Message"}),u?(0,r.tZ)(hd,{}):null]}),secondaryText:S||!E?void 0:(0,r.BX)("span",{css:ld.keyCombo,children:[(0,r.tZ)("span",{css:ld.keyComboText,children:"Commit:"}),(0,r.tZ)(td.bM,{keyCombo:E,small:!0})]}),iconRight:u?(0,r.tZ)(Ha.Z,{}):(0,r.tZ)(Va.Z,{}),onClick:function(){return d((function(e){return!e}))},size:"small"}),(0,r.BX)(De.Tg,{css:ld.surface,elevated:!0,children:[(0,r.tZ)(ud,{ref:Z,value:C,compact:u,disabled:i,onChange:function(e){c(e,k)},onNewline:function(){if(u)d(!1),p(!0);else{if(!b.current)return;b.current.focus(),b.current.setSelectionRange(0,0)}},onFocus:function(){y(!0)},onBlur:function(){y(!1)}}),u&&!k?null:(0,r.tZ)(fd,{ref:b,value:k,compact:u,disabled:i,onChange:function(e){var t;(c(C,e),u&&!e)?null===(t=Z.current)||void 0===t||t.focus():u&&d(!1)},onBackspaceWhenEmpty:function(){Z.current&&Z.current.focus()},onFocus:function(){h&&p(!1),y(!0)},onBlur:function(){y(!1)},autoFocus:h})]})]})}function sd(e,t){var n=e.value,i=e.compact,o=void 0!==i&&i,a=e.disabled,l=void 0!==a&&a,c=e.onChange,s=e.onNewline,u=e.onFocus,d=e.onBlur;return(0,r.BX)(g.G,{css:ld.subjectField,children:[o?null:(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:(0,r.BX)("span",{css:ld.requiredText,children:[(0,r.tZ)("span",{children:"Summary"}),(0,r.tZ)(hd,{})]})}),(0,r.tZ)(_t.B,{ref:t,css:l?ld.subjectInputDisabled:ld.subjectInput,placeholder:"Summary of your commit...",value:n,disabled:l,onChange:function(e){return null===c||void 0===c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null===s||void 0===s||s())},onFocus:u,onBlur:d})]})}var ud=(0,a.forwardRef)(sd);function dd(e,t){var n=e.value,i=e.compact,o=void 0!==i&&i,a=e.disabled,l=void 0!==a&&a,c=e.autoFocus,s=void 0!==c&&c,u=e.onChange,d=e.onBackspaceWhenEmpty,f=e.onFocus,h=e.onBlur,p=(0,Ju.Z)().ref;return(0,r.BX)(g.G,{css:ld.bodyField,children:[o?null:(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,r.tZ)(_t.B,{ref:o?t:(0,ed.l)(t,p),css:l?ld.bodyInputDisabled:ld.bodyInput,placeholder:"Description of your commit...",value:n,disabled:l,onChange:function(e){return null===u||void 0===u?void 0:u(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===n&&(e.preventDefault(),e.stopPropagation(),null===d||void 0===d||d())},onFocus:f,onBlur:h,autoFocus:s})]})}var fd=(0,a.forwardRef)(dd);function hd(){return(0,r.tZ)(ae.u,{tooltip:"This field is required.",placement:"top",children:(0,r.tZ)("span",{css:ld.required,children:"*"})})}var pd=(0,Z.X)({commitArea:[v.l0.colWithGap(8)]});function md(e){var t=e.status,n=e.onStagedFileClick,i=e.defaultMessage,o=(0,a.useState)(t),l=o[0],c=o[1],s=(0,a.useState)(null!==i&&void 0!==i?i:""),u=s[0],f=s[1],h=(0,a.useState)(0),p=h[0],m=h[1],v=(0,a.useState)(!1),Z=v[0],b=v[1],w=lc();(0,a.useEffect)((function(){return c(t)}),[t]);var x=(0,d.Z)().git;if(!l||!l.changes.length)return(0,r.tZ)(g.G,{css:pd.commitArea,children:(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var C=l.changes.length,k=l.changes.filter((function(e){return e.staged})).length;function S(){return(S=(0,we.Z)((function(e){var t,n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return Z?[2]:(m((function(e){return e+1})),[4,x.stageFiles(e)]);case 1:return(t=r.sent()).error?[3,3]:[4,x.status()];case 2:return(n=r.sent()).error?(Cl({context:"commit-area-status",gitService:x,result:n}),w(n.error)):c(n),x.forceRefresh(),[3,4];case 3:w(t.error),Cl({context:"commit-area-stage-files",gitService:x,result:t}),r.label=4;case 4:return m((function(e){return e-1})),[2]}}))}))).apply(this,arguments)}function E(){return(E=(0,we.Z)((function(e){var t,n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return Z?[2]:(m((function(e){return e+1})),[4,x.restoreFiles(e)]);case 1:return(t=r.sent()).error?[3,3]:[4,x.status()];case 2:return(n=r.sent()).error?(Cl({context:"commit-area-status",gitService:x,result:n}),w(n.error)):c(n),x.forceRefresh(),[3,4];case 3:Cl({context:"commit-area-restore-files",gitService:x,result:t}),w(t.error),r.label=4;case 4:return m((function(e){return e-1})),[2]}}))}))).apply(this,arguments)}function T(){return R.apply(this,arguments)}function R(){return(R=(0,we.Z)((function(){var e,t;return(0,xe.__generator)(this,(function(n){switch(n.label){case 0:return""===u||Z||0===C||p>0?[2]:(b(!0),0!==k?[3,2]:[4,x.stageFiles({all:!0})]);case 1:n.sent(),n.label=2;case 2:return[4,x.commit({message:u})];case 3:return(e=n.sent()).error?(b(!1),w(e.error),Cl({context:"commit-area-commit",gitService:x,result:e}),[3,6]):[3,4];case 4:return ql("commit-created",{hasDescription:-1!==u.trim().indexOf("\n\n")}),[4,x.status()];case 5:t=n.sent(),b(!1),t.error?(w(t.error),Cl({context:"commit-area-status",gitService:x,result:t})):(f(""),c(t)),x.forceRefresh(),n.label=6;case 6:return[2]}}))}))).apply(this,arguments)}var D="Nothing to commit";if(Z)D="Committing...";else if(k>0&&k<C){var I=(0,te.Z)("change",k);D="Commit ".concat(k," staged ").concat(I)}else C>0&&(D="Stage and commit all changes");var _=!u||0===C||p>0||Z;return(0,r.BX)(g.G,{css:pd.commitArea,children:[(0,r.tZ)(cd,{message:u,disabled:Z,onMessageChange:f,onCommitShortcut:T}),(0,r.tZ)(Yu,{status:l,stageFiles:function(e){return S.apply(this,arguments)},restoreFiles:function(e){return E.apply(this,arguments)},onStagedFileClick:n,disabled:Z}),(0,r.tZ)(Se.zx,{text:D,onClick:T,disabled:_,loading:Z,colorway:"primary",iconLeft:(0,r.tZ)(Fn.Z,{}),stretch:!0})]})}var vd=(0,Z.X)({warning:[v.l0.align.start],header:[v.l0.fontWeight.bold]});function gd(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Re.E,{css:vd.warning,icon:(0,r.tZ)(Ee.Z,{}),colorway:"warning",text:(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:vd.header,children:"Can't push or pull from GitHub"}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),(0,r.tZ)(Yl,{})]})}var yd=n(2447),Zd=(0,Z.X)({text:[v.l0.flex.shrink(1)]});function bd(e){var t=e.date,n=(0,a.useState)(null),i=n[0],o=n[1];return(0,a.useEffect)((function(){if(t){var e=function(){var e=new Date,n="just now";e.getTime()-t.getTime()>6e4&&(n=(0,yd.Z)(t,e,{addSuffix:!0})),n=n.replace(/minutes?/,"min"),o(n)};e();var n=setInterval(e,6e4);return function(){clearInterval(n),o(null)}}}),[t]),i?(0,r.BX)(y.xv,{css:Zd.text,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",i]}):null}function wd(e){var t=e.hasRemoteMergeConflict,n=e.hasUnpulledCommits,i=e.hasUnpushedCommits,o=e.workTreeDirty,a=[];return o&&n&&a.push("Can't pull: you have uncommitted changes"),t&&(n||i)&&(n&&i?(o||a.push("Warning: pulling will start a merge with conflicts"),a.push("Can't push: unpulled changes must be merged first")):n?o||a.push("Warning: pulling will start a merge with conflicts"):i&&a.push("Can't push: merge conflict with remote")),(0,r.tZ)(r.HY,{children:a.map((function(e){return(0,r.tZ)(Re.E,{text:e,colorway:"warning",icon:(0,r.tZ)(Ee.Z,{})},e)}))})}var xd=(0,Z.X)({divider:[v.l0.mx(8)]});function Cd(e){var t=e.ahead,n=e.behind;if(!t&&!n)return(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var i=null,o=null;if(n){var a=(0,te.Z)("commit",n);i="".concat(n," ").concat(a," to pull")}if(t){var l=(0,te.Z)("commit",t);o="".concat(t," ").concat(l," to push")}return(0,r.BX)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:[i?(0,r.tZ)("span",{children:i}):null,i&&o?(0,r.tZ)("span",{css:xd.divider,children:"\u2022"}):null,o?(0,r.tZ)("span",{children:o}):null]})}var kd=(0,Z.X)({container:[v.l0.flex.grow(1)],branch:[v.l0.mr(4),v.l0.color.foregroundDefault,v.l0.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[v.l0.color.foregroundDimmest],text:[v.l0.ml(4),v.l0.color.foregroundDimmest]});function Sd(e){var t=e.upstream,n=e.remotes,i=(0,a.useMemo)((function(){return function(e,t){var n=null,r=null;if((0,Ul.Z)(e,Map)){var i=(0,Ll.Tg)(t),o=i[0];if(n=i[1],!o||!n)return null;var a=e.get(o);if(!a)return null;r=Fl(a)}else n=t,r=Fl(e);return r&&Xl(r)?"".concat(r,"/tree/").concat(n):null}(n,t)}),[t,n]);return(0,r.BX)(y.xv,{css:kd.container,variant:"small",multiline:!1,children:[i?(0,r.tZ)("a",{css:kd.branch,href:i,target:"_blank",children:t}):(0,r.tZ)("span",{css:kd.branch,children:t}),(0,r.tZ)("span",{css:kd.divider,children:"\u2022"}),(0,r.tZ)("span",{css:kd.text,children:"upstream"})]})}var Ed=(0,Z.X)({container:[v.l0.borderRadius(8)],loading:[v.l0.height(64),Te.p.backgroundPulse(),v.l0.borderRadius(8)],header:[v.l0.py(4),v.l0.px(8),v.l0.rowWithGap(8),v.l0.align.center,v.l0.flex.shrink(1),v.l0.border({color:v.TV.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[v.l0.px(8),v.l0.pt(8),v.l0.pb(12),v.l0.colWithGap(8)],buttons:[v.l0.rowWithGap(8),v.l0.flex.grow(1)],sync:[v.l0.flex.grow(1)],pullPush:[v.l0.flex.row],pull:[v.l0.pr(12),v.l0.borderRadius(8,0,0,8),v.l0.border({color:v.TV.outlineDefault,direction:"right"})],push:[v.l0.borderRadius(0,8,8,0)]});function Td(e){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,we.Z)((function(e){var t,n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return t=null,[4,Promise.race([e,new Promise((function(e){return t=setTimeout((function(){xl.$e((function(e){e.setTag("gitPane",!0),xl.Tb(new Error("Remote update operation timed out"))})),e({error:Nl.aq.TIMEOUT})}),9e4)}))])];case 1:return n=r.sent(),t&&clearTimeout(t),[2,n]}}))}))).apply(this,arguments)}function Dd(e){var t=e.remotes,n=e.gotoPendingState,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),s=c[0],u=c[1],f=(0,a.useState)(!1),h=f[0],p=f[1],m=(0,a.useState)(!1),v=m[0],y=m[1],Z=(0,d.Z)().git,b=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y;return(0,xe.__generator)(this,(function(Z){switch(Z.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:xu.T.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:return(o=Z.sent()).error?[2,o]:(a=o.state,o.type!==Gl.y5.NORMAL?[2,{error:Nl.aq.INVALID_STATE}]:(a!==Gl.yG.DIRTY_WORKTREE&&a!==Gl.yG.DIRTY_INDEX||(i.workTreeDirty=!0),[4,e.status()]));case 2:return(l=Z.sent()).error?[2,l]:(c=l.branch,s=null===(t=l.upstream)||void 0===t?void 0:t.branch,d=null!==(u=null===(n=l.upstream)||void 0===n?void 0:n.ahead)&&void 0!==u?u:0,h=null!==(f=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==f?f:0,c?(i.ahead=d,i.behind=h,s?(i.upstream=s,i.hasUnpulledCommits=h>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()]):[3,7]):[2,{error:Nl.aq.HEAD_DETACHED}]);case 3:return(p=Z.sent()).error?[2,p]:(i.lastFetched=p.lastFetched,[4,e.canMergeBranches(c,s)]);case 4:return(m=Z.sent()).error?[2,m]:(m.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(Nl.rG.GITHUB)?[3,6]:(v=(0,Pc.CH)(s))?[4,e.getRemotes()]:[2,{error:Nl.aq.INVALID_REFERENCE}]);case 5:if((g=Z.sent()).error)return[2,g];if(!(y=g.remotes.get(v)))return[2,{error:Nl.aq.INVALID_REFERENCE}];Xl(y)&&(i.needGitHubConnection=!0),Z.label=6;case 6:i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?xu.T.MERGE:xu.T.REBASE),Z.label=7;case 7:return[2,(0,be.Z)((0,Ze.Z)({},i),{error:null})]}}))}));return function(t){return e.apply(this,arguments)}}()),w=lc();if((0,a.useEffect)((function(){(null===b||void 0===b?void 0:b.error)&&w(b.error)}),[null===b||void 0===b?void 0:b.error,w]),!b)return(0,r.tZ)(De.Tg,{css:Ed.loading,elevated:!0});if(b.error||!b.upstream)return null;var x=b.upstream,C=b.hasUnpulledCommits,k=b.hasUnpushedCommits,S=b.hasRemoteMergeConflict,E=b.pullMode,T=b.canPull,R=b.canPush,D=b.workTreeDirty,I=b.needGitHubConnection,_=b.ahead,B=b.behind,G=b.lastFetched;if(I)return(0,r.BX)(De.Tg,{css:Ed.container,elevated:!0,children:[(0,r.BX)(g.G,{css:Ed.header,children:[(0,r.tZ)(Sd,{upstream:x,remotes:t}),(0,r.tZ)(Se.zx,{css:Ed.fetch,text:"Fetch",iconLeft:(0,r.tZ)(Ti.Z,{}),disabled:!0,variant:"outlined",size:"small"})]}),(0,r.tZ)(g.G,{css:Ed.body,children:(0,r.tZ)(gd,{})})]});var P=o||s||h||v,A=!x||I||P,N=!T||P,U=!R||P,L=!T&&!R||S||P;function O(){return(O=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return A?[2]:(l(!0),[4,Td(Z.fetch())]);case 1:return e=t.sent(),Z.forceRefresh(),l(!1),e.error?w(e.error):ql("remote-fetched"),[2]}}))}))).apply(this,arguments)}function X(){return(X=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return N?[2]:(u(!0),[4,Td(Z.pull({mode:E,allowConflicts:!0}))]);case 1:return e=t.sent(),u(!1),e.error?w(e.error):(e.hasConflicts&&n(),Z.forceRefresh(),ql("upstream-pulled")),[2]}}))}))).apply(this,arguments)}function M(){return(M=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return U?[2]:(p(!0),[4,Td(Z.push())]);case 1:return e=t.sent(),Z.forceRefresh(),p(!1),e.error?w(e.error):ql("upstream-pushed"),[2]}}))}))).apply(this,arguments)}function F(){return(F=(0,we.Z)((function(){var e,t;return(0,xe.__generator)(this,(function(n){switch(n.label){case 0:return L?[2]:(y(!0),T?[4,Td(Z.pull({mode:E}))]:[3,2]);case 1:if((e=n.sent()).error)return w(e.error),y(!1),[2];ql("upstream-pulled"),n.label=2;case 2:return R?[4,Z.push()]:[3,4];case 3:if((t=n.sent()).error)return w(t.error),y(!1),[2];ql("upstream-pushed"),n.label=4;case 4:return Z.forceRefresh(),y(!1),[2]}}))}))).apply(this,arguments)}return(0,r.BX)(De.Tg,{css:Ed.container,elevated:!0,children:[(0,r.BX)(g.G,{css:Ed.header,children:[(0,r.tZ)(Sd,{upstream:x,remotes:t}),(0,r.tZ)(bd,{date:G}),(0,r.tZ)(Se.zx,{css:Ed.fetch,text:"Fetch",iconLeft:o?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Ti.Z,{}),onClick:function(){return O.apply(this,arguments)},loading:o,disabled:A,variant:"outlined",size:"small"})]}),(0,r.BX)(g.G,{css:Ed.body,children:[(0,r.tZ)(wd,{hasRemoteMergeConflict:S,hasUnpulledCommits:C,hasUnpushedCommits:k,workTreeDirty:D}),(0,r.tZ)(Cd,{ahead:_,behind:B}),(0,r.BX)(g.G,{css:Ed.buttons,children:[(0,r.tZ)("div",{css:Ed.sync,children:(0,r.tZ)(ae.u,{tooltip:"Pull & push the latest changes",children:(0,r.tZ)(Se.zx,{css:Ed.sync,text:"Sync with Remote",iconLeft:v?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(su.Z,{rotate:90}),onClick:function(){return F.apply(this,arguments)},loading:v,disabled:L,size:"small"})})}),(0,r.BX)(g.G,{css:Ed.pullPush,children:[(0,r.tZ)(Se.zx,{css:Ed.pull,text:"Pull",iconLeft:s?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Ne.Z,{}),onClick:function(){return X.apply(this,arguments)},loading:s,disabled:N,size:"small"}),(0,r.tZ)(Se.zx,{css:Ed.push,text:"Push",iconLeft:h?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(ku.Z,{}),onClick:function(){return M.apply(this,arguments)},loading:h,disabled:U,size:"small"})]})]})]})]})}var Id=n(93132),_d=n(48818),Bd=(0,Z.X)({modalContainer:[v.l0.colWithGap(24)]});function Gd(e){var t=e.branch,n=(0,a.useState)(!1),i=n[0],o=n[1],l=(0,a.useState)(!1),c=l[0],s=l[1],u=(0,a.useState)(null),f=u[0],h=u[1],p=(0,a.useState)(!1),m=p[0],v=p[1],Z=(0,_d.Z)(),b=lc(),w=(0,d.Z)().git,x=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var t,n,r,i,o,a,l,c;return(0,xe.__generator)(this,(function(s){switch(s.label){case 0:return[4,e.isInitialized()];case 1:return(t=s.sent()).error?(b(t.error),Cl({context:"publish-branch-button-initialized",gitService:e,result:t}),[2,{remote:null,error:t.error}]):t.initialized?[4,e.getRemotes()]:[2,{remote:null,error:null}];case 2:return(n=s.sent()).error?(Cl({context:"publish-branch-button-get-remotes",gitService:e,result:n}),b(n.error),[2,n]):(r=n.remotes,i="",(null===r||void 0===r?void 0:r.size)&&(i=r.has("origin")?"origin":r.keys().next().value),[4,e.status()]);case 3:return(o=s.sent()).error?(b(o.error),Cl({context:"publish-branch-button-status",gitService:e,result:o}),[2,o]):o.branch&&i?(a=(0,Ll.C)(o.branch),l="refs/remotes/".concat(i,"/").concat(a),[4,e.branchExists(l)]):[3,5];case 4:(c=s.sent()).error?(Cl({context:"publish-branch-button-branch-exists",gitService:e,result:c}),b(c.error)):c.exists&&h("".concat(i,"/").concat(a)),s.label=5;case 5:return[2,{remote:i,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[b],{keepStaleResult:!1});if((0,a.useEffect)((function(){function e(){return(e=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return m&&f?[4,w.setBranchUpstream({upstream:f})]:[3,2];case 1:(e=t.sent()).error&&(Cl({context:"publish-branch-button-set-branch-upstream",gitService:w,result:e}),b(e.error)),Z.current&&(v(!1),h(null)),t.label=2;case 2:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[w,b,m,f,Z]),null===x||void 0===x?void 0:x.error)return null;var C,k=x?x.remote:null,S=null===k,E=t.type!==Pl.HO.LOCAL||!k||m;function T(){return(T=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return!k||i?[2]:f?(s(!0),[2]):(o(!0),[4,w.push({publish:{remote:k}})]);case 1:return(e=t.sent()).error?(o(!1),b(e.error),Cl({context:"publish-branch-button-push",gitService:w,result:e})):(w.forceRefresh(),ql("branch-published-to-remote")),[2]}}))}))).apply(this,arguments)}return C=i?"Publishing...":t.type!==Pl.HO.LOCAL?"Branch has already been published":S?"Checking if branch can be published...":k?"Publish branch as '".concat(k,"/").concat(t.name,"'"):"No remotes to publish to",(0,r.BX)(r.HY,{children:[f?(0,r.tZ)(yo.u,{isOpen:c,onRequestClose:function(){return s(!1)},children:(0,r.BX)(g.G,{css:Bd.modalContainer,children:[(0,r.tZ)(y.xv,{variant:"headerDefault",children:"Branch already exists"}),(0,r.tZ)(y.xv,{children:"Upstream branch '".concat(f,"' already exists.\n          To publish the branch, please confirm you would like to set upstream branch to it.")}),(0,r.tZ)(Se.zx,{text:"Set upstream to '".concat(f,"'"),onClick:function(){f&&(v(!0),s(!1))}})]})}):null,(0,r.tZ)(Se.zx,{text:C,iconLeft:S||i?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Id.Z,{}),onClick:function(){return T.apply(this,arguments)},loading:S||i,disabled:E})]})}var Pd=(0,Z.X)({remoteUrl:[{border:"none"},v.l0.height("auto"),v.l0.py(4),v.l0.px(8)]});function Ad(e){var t=e.branch,n=e.remotes,i=(0,a.useMemo)((function(){if(t.type===Pl.HO.LOCAL)return[null,null,null];var e=n.get(t.remote);if(!e)return[null,null,null];var r=Fl(e),i=function(e){var t="string"===typeof e?e:e.fetch;if(Xl(t)){var n=(t=Ml(t)).split("/");if(n.length<2)return null;var r=n[n.length-2],i=n[n.length-1];return"".concat(r,"/").concat(i)}return null}(e);return[r,i,Xl(r)]}),[t,n]),o=i[0],l=i[1],c=i[2];return o&&l?(0,r.tZ)(Mo.Z,{css:Pd.remoteUrl,text:l,href:o,target:"_blank",iconLeft:c?(0,r.tZ)(zl.Z,{}):void 0,iconRight:(0,r.tZ)(Wo.Z,{}),variant:"outlined",size:"small"}):null}var Nd=(0,Z.X)({view:[v.l0.pt(4),v.l0.pb(8),v.l0.px(4),v.l0.colWithGap(8),v.l0.flex.grow(1)],sectionContainer:[v.l0.colWithGap(8)],section:[v.l0.pt(8),v.l0.pb(16),v.l0.px(8),v.l0.colWithGap(8),v.l0.border({color:v.TV.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.justify.spaceBetween],reviewChangesHeader:[v.l0.rowWithGap(8),v.l0.align.center],headerText:[v.l0.fontWeight.medium],switchToBranch:[v.l0.p(4),v.l0.flex.row,v.l0.align.center,v.l0.justify.spaceBetween,v.l0.mt(0),v.l0.mb(0)]});function Ud(e){var t,n,i=e.status,l=e.remotes,c=e.branch,s=e.onStagedFileClick,u=e.onViewCommitClick,d=e.gotoPendingState,f=e.current,h=void 0!==f&&f,p=function(e,t,n){var r=lc(),i=(0,wl.Z)(function(){var r=(0,we.Z)((function(r){var i,a,l,c,s,u,d,f,h;return(0,xe.__generator)(this,(function(p){switch(p.label){case 0:return[4,r.isInitialized()];case 1:return(i=p.sent()).error?(Cl({context:"use-branch-commits",gitService:r,result:i}),[2,{error:i.error}]):i.initialized?e?!e.tracking||0===t&&0===n?(a=(0,Pc.bF)(e,!0),[4,r.log({max:100,revRange:a})]):[3,3]:[2,{error:null}]:[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];case 2:return(l=p.sent()).error?(Cl({context:"use-branch-commits",gitService:r,result:l}),[2,l]):[2,{log:l.commits,error:null}];case 3:return c=(0,Pc.bF)(e),[4,Promise.all([r.log({max:100,revRange:e.name}),r.log({max:100,revRange:"".concat(e.name,"..").concat(c)}),r.log({max:100,revRange:"".concat(c,"..").concat(e.name)})])];case 4:return s=p.sent(),u=(0,o.Z)(s,3),d=u[0],f=u[1],h=u[2],d.error?(Cl({context:"use-branch-commits-log",gitService:r,result:d}),[2,{error:d.error}]):f.error?(Cl({context:"use-branch-commits-only-remote",gitService:r,result:f}),[2,{error:f.error}]):h.error?(Cl({context:"use-branch-commits-only-local",gitService:r,result:h}),[2,{error:h.error}]):[2,{log:d.commits,onlyRemote:f.commits,onlyLocal:h.commits,error:null}]}}))}));return function(e){return r.apply(this,arguments)}}(),[e,t,n]);return(0,a.useMemo)((function(){if(!i)return null;if(i.error)return r(i.error),{error:i.error};var e=i.log,t=i.onlyRemote,n=i.onlyLocal;if(!t&&!n)return{log:e,error:null};if(e){var o=new Set;if(t){var a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;o.add(d.hash)}}catch(y){l=!0,c=y}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}if(n){var f=!0,h=!1,p=void 0;try{for(var m,v=n[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;o.add(g.hash)}}catch(y){h=!0,p=y}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}e=e.filter((function(e){return!o.has(e.hash)}))}return{log:e,onlyRemote:t,onlyLocal:n,error:null}}),[r,i])}(c,h?null===i||void 0===i||null===(t=i.upstream)||void 0===t?void 0:t.behind:void 0,h?null===i||void 0===i||null===(n=i.upstream)||void 0===n?void 0:n.ahead:void 0),m=!!l&&l.size>0,v=(null===c||void 0===c?void 0:c.type)===Pl.HO.LOCAL,Z=(0,ro.P5)({controlName:"flag-git-pane-branch-selector",logFlagToAnalytics:!1}),b=(0,a.useMemo)((function(){if(!p||p.error)return[];var e,t,n,o=[],a=p.log,l=void 0===a?[]:a,c=p.onlyRemote,s=void 0===c?[]:c,f=p.onlyLocal,m=void 0===f?[]:f,v=l.length>0,g=s.length>0,y=m.length>0;g&&(o.push({type:"boundary",text:"Not pulled from remote"}),h&&i&&o.push({type:"button",key:"pull-button",button:(0,r.tZ)(Cu,{status:i,gotoPendingState:d})}),(e=o).push.apply(e,(0,ee.Z)(Ld(s,u))));y&&(o.push({type:"boundary",text:"Not pushed to remote"}),h&&i&&o.push({type:"button",key:"push-button",button:(0,r.tZ)(Su,{status:i})}),(t=o).push.apply(t,(0,ee.Z)(Ld(m,u))));v&&((g||y)&&o.push({type:"boundary",text:"Up to date with remote"}),(n=o).push.apply(n,(0,ee.Z)(Ld(l,u))));return o}),[p,i,h,d,u]);return c?(0,r.BX)(g.G,{css:Nd.view,children:[(0,r.BX)(g.G,{css:Nd.sectionContainer,children:[Z||h?null:(0,r.tZ)(g.G,{css:Nd.section,children:(0,r.tZ)(Eu,{branch:c})}),v?(0,r.tZ)(g.G,{css:Nd.section,children:(0,r.tZ)(Gd,{branch:c})}):null,h&&!v&&l&&m?(0,r.BX)(g.G,{css:Nd.section,children:[(0,r.BX)(g.G,{css:Nd.remoteUpdatesHeader,children:[(0,r.tZ)(y.xv,{css:Nd.headerText,multiline:!1,children:"Remote Updates"}),(0,r.tZ)(Ad,{branch:c,remotes:l})]}),(0,r.tZ)(Dd,{remotes:l,gotoPendingState:d})]}):null,h&&i?(0,r.BX)(g.G,{css:Nd.section,children:[(0,r.tZ)(g.G,{css:Nd.reviewChangesHeader,children:(0,r.tZ)(y.xv,{css:Nd.headerText,multiline:!1,children:"Commit"})}),(0,r.tZ)(md,{status:i,onStagedFileClick:s})]}):null]}),p?(0,r.tZ)(vu,{items:b}):(0,r.tZ)(wu,{})]}):(0,r.tZ)("div",{children:"No branch"})}function Ld(e,t){return e.map((function(e){return{type:"commit",commit:e,onViewCommitClick:t}}))}function Od(){return(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,r.tZ)(y.xv,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}var Xd=(0,Z.X)({branch:[Bc.gU.nofill,v.l0.py(12),v.l0.px(8),v.l0.colWithGap(2),v.l0.justify.center,v.l0.borderRadius(8),v.l0.flex.shrink(1)],branchMetadata:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.flex.shrink(1)]});function Md(e){var t=e.branch,n=e.current,i=void 0!==n&&n,o=e.onClick;return(0,r.BX)(g.G,{css:Xd.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,Pc.bF)(t,!0)),onClick:o,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===o||void 0===o||o()},children:[(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)(Ec,{name:t.name,remote:t.type===Pl.HO.REMOTE?t.remote:null,current:i,onClick:o,icon:!0})}),(0,r.tZ)(Fd,{branch:t})]})}function Fd(e){var t=e.branch;return(0,r.BX)(g.G,{css:Xd.branchMetadata,children:[(0,r.tZ)(Vc,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,r.tZ)(jc.EK,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var Wd=(0,Z.X)({expandButton:[{verticalAlign:"middle"},v.l0.justify.spaceBetween],branchListContainer:[v.l0.display.flex],topRow:[v.l0.p(4),v.l0.flex.row,v.l0.align.center,v.l0.justify.spaceBetween],topRowInteractive:[{verticalAlign:"middle"},v.l0.justify.spaceBetween,v.l0.borderRadius(8,8,0,0)],branchList:[v.l0.borderRadius(8)],branchListFoldable:[v.l0.borderRadius(0,0,8,8)]});function Hd(e){var t=e.name,n=e.branches,i=e.current,o=void 0===i?null:i,l=e.foldable,c=void 0!==l&&l,s=e.folded,u=void 0!==s&&s,d=e.switchBranch,f=(0,a.useState)(!!c&&u),h=f[0],p=f[1],m=(0,a.useMemo)((function(){return n.map((function(e){return(0,r.tZ)(Md,{branch:e,current:(0,Pl.p3)(e,o),onClick:function(){return d(e)}},(0,Pc.Qj)(e))}))}),[n,o,d]);return h?(0,r.tZ)(Se.zx,{css:Wd.expandButton,text:t,iconRight:(0,r.tZ)(Ha.Z,{}),onClick:function(){return p(!1)},size:"big"}):c?(0,r.BX)(g.G,{css:Wd.branchListContainer,children:[(0,r.tZ)(Se.zx,{css:Wd.topRowInteractive,text:t,iconRight:(0,r.tZ)(Va.Z,{}),onClick:function(){return p(!0)},size:"big"}),(0,r.tZ)(De.Tg,{css:Wd.branchListFoldable,elevated:!0,children:m})]}):(0,r.BX)(g.G,{css:Wd.branchListContainer,children:[(0,r.tZ)(g.G,{css:Wd.topRow,children:(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t})}),(0,r.tZ)(De.Tg,{css:Wd.branchList,elevated:!0,children:m})]})}var Vd=(0,Z.X)({container:[v.l0.p(8),v.l0.colWithGap(8),v.l0.borderRadius(8)],buttonContainer:[v.l0.rowWithGap(4)],button:[v.l0.flex.grow(1)],inputDisabled:[{opacity:.75}]});function zd(){var e=function(){i(!0),c("")},t=(0,a.useState)(!0),n=t[0],i=t[1],o=(0,a.useState)(""),l=o[0],c=o[1],s=(0,a.useState)(!1),u=s[0],f=s[1],h=lc(),p=(0,d.Z)().git;function m(){return v.apply(this,arguments)}function v(){return(v=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return n||!l||u?[2]:(f(!0),[4,p.createBranch({name:l,checkout:!0})]);case 1:return(e=t.sent()).error?(h(e.error),f(!1)):(p.forceRefresh(),f(!1),c(""),i(!0),ql("branch-created")),[2]}}))}))).apply(this,arguments)}if(n)return(0,r.tZ)(Se.zx,{text:"Create Branch",iconLeft:(0,r.tZ)(Co.Z,{}),onClick:function(){return i(!1)}});var y=!l||!(0,Pc.Dc)(l);return(0,r.BX)(De.Tg,{css:Vd.container,elevated:!0,children:[(0,r.tZ)(jd,{value:l,onChange:c,onSubmit:m,onCancel:e,disabled:u}),(0,r.BX)(g.G,{css:Vd.buttonContainer,children:[(0,r.tZ)(Se.zx,{css:Vd.button,text:"Cancel",onClick:e,disabled:u}),(0,r.tZ)(Se.zx,{css:Vd.button,text:"Create Branch",colorway:"primary",iconLeft:(0,r.tZ)(Co.Z,{}),onClick:m,loading:u,disabled:y})]})]})}function jd(e){var t=e.value,n=e.disabled,i=e.onChange,o=e.onSubmit,a=e.onCancel,l=function(e){(0,Pc.dC)(e)&&(null===i||void 0===i||i(e))};return(0,r.tZ)(_t.II,{value:t,css:n?Vd.inputDisabled:void 0,disabled:n,placeholder:"Enter a name for your new branch",onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){return function(e,n){switch(e){case"Enter":null===o||void 0===o||o(),n();break;case"Escape":null===a||void 0===a||a(),n();break;case" ":if(""===t){n();break}l(t+"-"),n()}}(e.key,(function(){return e.preventDefault()}))},onBlur:function(){""===t&&(null===a||void 0===a||a())},autoFocus:!0})}function qd(e){var t=e.currentBranch,n=e.switchMode,i=lc(),o=(0,d.Z)().git,l=(0,a.useState)(null),c=l[0],s=l[1],u=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var t,n,r,o,a,l,c,s,u,d,f,h,p,m,v,g,y,Z,b,w;return(0,xe.__generator)(this,(function(x){switch(x.label){case 0:return[4,e.listBranches()];case 1:return(t=x.sent()).error?(i(t.error),Cl({context:"dashboard-view",gitService:e,result:t}),[2,t]):[4,e.findDefaultBranches()];case 2:if((n=x.sent()).error)return i(n.error),[2,n];r=t.branches,o=new Set,a=!0,l=!1,c=void 0;try{for(s=function(){var e=d.value,t=r.find((function(t){return(0,Pc.Pi)(t,e)}));t&&o.add(t)},u=n.refs[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)s()}catch(C){l=!0,c=C}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}f=Date.now()-5184e6,h=[],p=[],m=!0,v=!1,g=void 0;try{for(y=r[Symbol.iterator]();!(m=(Z=y.next()).done);m=!0)b=Z.value,o.has(b)||(b.commit.author.date>f?h.push(b):p.push(b))}catch(C){v=!0,g=C}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}return w=Array.from(o),[2,{active:h,stale:p,important:w,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}(),[i]),f=function(){var e=(0,we.Z)((function(e){var r;return(0,xe.__generator)(this,(function(a){switch(a.label){case 0:return null!==c?[2]:((0,Pc.Pi)(t,e)&&n({mode:gc.CURRENT_BRANCH}),s(e),[4,o.switchBranch(e)]);case 1:return(r=a.sent()).error?(i(r.error),Cl({context:"dashboard-view",gitService:o,result:r}),s(null)):(o.forceRefresh(),ql("branch-switched")),[2]}}))}));return function(t){return e.apply(this,arguments)}}();if((0,a.useEffect)((function(){null!==c&&(0,Pc.Pi)(t,c)&&(s(null),n({mode:gc.CURRENT_BRANCH}))}),[t,c,n]),!u||null!==c)return(0,r.tZ)(wu,{});if(u.error)return(0,r.tZ)("div",{children:u.error});var h=u.active,p=u.stale,m=u.important;return(0,r.tZ)(g.G,{css:[v.l0.colWithGap(8)],children:(0,r.BX)(g.G,{css:[v.l0.pb(8),v.l0.px(8),v.l0.colWithGap(16)],children:[t?(0,r.BX)(g.G,{css:v.l0.colWithGap(8),children:[(0,r.tZ)(Hd,{branches:[t],current:t,name:"Current Branch",switchBranch:f}),(0,r.tZ)(zd,{})]}):null,(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,css:Nd.switchToBranch,children:"Switch Branch"}),0===m.length?null:(0,r.tZ)(Hd,{branches:m,current:t,name:"Important",switchBranch:f,foldable:!0}),0===h.length?null:(0,r.tZ)(Hd,{branches:h,current:t,name:"Active",switchBranch:f,foldable:!0}),0===p.length?null:(0,r.tZ)(Hd,{branches:p,current:t,name:"Stale",switchBranch:f,foldable:!0,folded:!0})]})})}function $d(){return(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,r.tZ)(y.xv,{multiline:!1,children:"Please checkout a branch."})]})}var Yd=n(16679),Kd=n(8087),Qd=(0,Z.X)({container:[v.l0.colWithGap(4)],file:[v.l0.rowWithGap(8),v.l0.align.center],fileLeft:[v.l0.rowWithGap(8),v.l0.flex.grow(1),v.l0.align.center],filePrefix:[v.l0.color.foregroundDimmest]});function Jd(e){var t=e.files,n=e.uniquePathMap,i=e.onFileClick,a=[];if((0,Ul.Z)(t,Map)){var l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=(0,o.Z)(u.value,2),h=f[0],p=f[1],m=n.get(h);a.push({path:h,prefix:m,resolved:p})}}catch(E){c=!0,s=E}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}else{var Z=!0,b=!1,w=void 0;try{for(var x,C=t[Symbol.iterator]();!(Z=(x=C.next()).done);Z=!0){var k=x.value,S=n.get(k);a.push({path:k,prefix:S,resolved:!0})}}catch(E){b=!0,w=E}finally{try{Z||null==C.return||C.return()}finally{if(b)throw w}}}return(0,r.tZ)(g.G,{css:Qd.container,children:a.map((function(e){var t=e.path,n=e.prefix,o=e.resolved;return(0,r.BX)(g.G,{css:Qd.file,children:[(0,r.BX)(g.G,{css:Qd.fileLeft,children:[(0,r.tZ)(La.Z,{path:t}),(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)(Tc,{path:t,prefix:n,onClick:function(){return i(t)}})})]}),o?(0,r.tZ)(Fn.Z,{color:v.TV.greenStronger}):(0,r.tZ)(Ee.Z,{color:v.TV.orangeStronger})]},t)}))})}function ef(e){var t=e.hasConflicts?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:v.l0.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:v.l0.fontWeight.medium,children:"You are in the middle of a merge."}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,r.tZ)(Re.E,{colorway:"warning",icon:(0,r.tZ)(Ee.Z,{}),text:t})}var tf=(0,Z.X)({container:[v.l0.rowWithGap(4),v.l0.align.center,v.l0.justify.spaceBetween],left:[{flexBasis:0,flexGrow:1},v.l0.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[v.l0.p(8),v.l0.rowWithGap(4),v.l0.flex.grow(1),v.l0.center,v.l0.borderRadius(8)]});function nf(e){var t,n=e.branch,i=e.refs,a=e.refsAreBranches,l=e.isUpstreamPull;if(!i.length)return null;if(l){var c=(0,o.Z)((0,Ll.Tg)(i[0]),2),s=c[0],u=c[1];s&&u&&(t=(0,r.tZ)(De.Tg,{css:tf.branch,elevated:!0,children:(0,r.tZ)(Ec,{remote:s,name:u,icon:!0,heading:!0})}))}return t||(t=i.map((function(e){return(0,r.tZ)(De.Tg,{css:tf.branch,elevated:!0,children:(0,r.tZ)(Ec,{name:e,icon:!!a||(0,r.tZ)(Wa.Z,{size:16}),heading:!0})},e)}))),(0,r.BX)(g.G,{css:tf.container,children:[(0,r.tZ)(g.G,{css:tf.left,children:t}),(0,r.tZ)(Gt.Z,{size:24,color:v.TV.foregroundDimmest}),(0,r.tZ)(g.G,{css:tf.right,children:(0,r.tZ)(De.Tg,{css:tf.branch,elevated:!0,children:(0,r.tZ)(Ec,{name:n,icon:!0,current:!0,heading:!0})})})]})}var rf=(0,Z.X)({container:[v.l0.colWithGap(12),v.l0.pt(16),v.l0.pb(8),v.l0.px(8)],fakePaneHeader:[v.l0.p(8),v.l0.rowWithGap(8),v.l0.backgroundColor.backgroundDefault,v.l0.align.center,{borderBottom:"1px solid ".concat(v.TV.outlineDimmer)}],conflictResolution:[v.l0.colWithGap(16)],listContainer:[v.l0.p(8),v.l0.colWithGap(8),v.l0.borderRadius(8)],list:[v.l0.pb(8),v.l0.colWithGap(8)],listDisabled:[{opacity:.5},v.l0.pb(8),v.l0.colWithGap(8)],listHeader:[v.l0.pb(4),v.l0.flex.grow(1),v.l0.border({color:v.TV.outlineDimmer,direction:"bottom"})],listFiles:[v.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},v.l0.rowWithGap(8)],buttons:[v.l0.colWithGap(8)]});function of(e){var t=e.onFileClick,n=e.gotoPendingState,i=(0,a.useState)(!0),l=i[0],c=i[1],s=(0,a.useState)(!1),u=s[0],f=s[1],h=(0,a.useState)(!1),p=h[0],m=h[1],Z=u||p,b=lc(),w=(0,d.Z)().git,x=a.useId(),C=function(){var e=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var t,n,r,i,a,l,c,s,u,d,f,h,p,m,v,g,y,Z,b,w;return(0,xe.__generator)(this,(function(x){switch(x.label){case 0:return[4,e.status()];case 1:return(t=x.sent()).error?(Cl({context:"use-merging-view-state-status",gitService:e,result:t}),[2,t]):(n=t.branch)?[4,e.getConflictingFiles()]:[2,{error:Nl.aq.HEAD_DETACHED}];case 2:return(r=x.sent()).error?[2,r]:(i=r.files,[4,e.getMergingRefs()]);case 3:if((a=x.sent()).error)return Cl({context:"use-merging-view-state-merging-refs",gitService:e,result:a}),[2,a];l=a.commits,c=a.branches,s=c.length>0,u=s?c:l,d=t.changes.filter((function(e){return!e.unmerged})).map((function(e){return e.path})),f=!0,h=!0,p=!1,m=void 0;try{for(v=i[Symbol.iterator]();!(h=(g=v.next()).done);h=!0)if(!(0,o.Z)(g.value,2)[1]){f=!1;break}}catch(C){p=!0,m=C}finally{try{h||null==v.return||v.return()}finally{if(p)throw m}}return y=Ru(t.changes.map((function(e){return e.path}))),Z=i.size>0,b=d.length>0,w=null!==t.upstream&&1===c.length&&c[0]===t.upstream.branch,[2,{refs:u,branch:n,conflictingFiles:i,otherChangedFiles:d,refsAreBranches:s,allIsResolved:f,uniquePathMap:y,hasConflicts:Z,hasOtherChanges:b,isUpstreamPull:w,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}());return e}();if((0,a.useEffect)((function(){(null===C||void 0===C?void 0:C.error)&&b(C.error)}),[null===C||void 0===C?void 0:C.error,b]),!C)return(0,r.tZ)(wu,{});if(C.error)return null;var k=C.refs,S=C.branch,E=C.conflictingFiles,T=C.otherChangedFiles,R=C.refsAreBranches,D=C.allIsResolved,I=C.uniquePathMap,_=C.hasConflicts,B=C.hasOtherChanges,G=C.isUpstreamPull;function P(){return P=(0,we.Z)((function(){var e,t,r,i,o,a,c,s,u,d,h;return(0,xe.__generator)(this,(function(p){switch(p.label){case 0:if(!D||Z)return[2];f(!0),e=[],t=!0,r=!1,i=void 0;try{for(o=E.keys()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)c=a.value,e.push(c)}catch(m){r=!0,i=m}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return l&&(s=e).push.apply(s,(0,ee.Z)(T)),[4,w.stageFiles({all:!1})];case 1:return(u=p.sent()).error?(b(u.error),f(!1),[2]):[4,w.stageFiles({add:e})];case 2:return(d=p.sent()).error?(b(d.error),f(!1),[2]):[4,w.mergeContinue()];case 3:return(h=p.sent()).error?[4,w.stageFiles({all:!1})]:[3,5];case 4:return p.sent(),b(h.error),f(!1),[3,6];case 5:n(),w.forceRefresh(),p.label=6;case 6:return[2]}}))})),P.apply(this,arguments)}function A(){return(A=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return Z?[2]:(m(!0),[4,w.mergeAbort()]);case 1:return(e=t.sent()).error?(b(e.error),m(!1),Cl({context:"merging-view-abort",gitService:w,result:e})):(n(),w.forceRefresh()),[2]}}))}))).apply(this,arguments)}var N=G?"Complete in-progress pull":"Complete in-progress merge";return _&&(N=G?"Resolve pull conflicts":"Resolve merge conflicts"),(0,r.BX)(g.G,{children:[(0,r.BX)(g.G,{css:rf.fakePaneHeader,children:[(0,r.tZ)(Kd.Z,{}),(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:N})]}),(0,r.BX)(g.G,{css:rf.container,children:[(0,r.tZ)(nf,{branch:S,refs:k,refsAreBranches:R,isUpstreamPull:G}),(0,r.tZ)(ef,{hasConflicts:_}),(0,r.BX)(De.Tg,{css:rf.listContainer,elevated:!0,children:[(0,r.BX)(g.G,{css:rf.list,children:[(0,r.tZ)(g.G,{css:rf.listHeader,children:(0,r.tZ)(y.xv,{css:v.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,r.tZ)(g.G,{css:rf.listFiles,children:_?(0,r.tZ)(Jd,{files:E,uniquePathMap:I,onFileClick:t}):(0,r.tZ)(y.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),B?(0,r.BX)(g.G,{css:l?rf.list:rf.listDisabled,children:[(0,r.tZ)(g.G,{css:rf.listHeader,children:(0,r.tZ)(y.xv,{css:v.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,r.tZ)(g.G,{css:rf.listFiles,children:(0,r.tZ)(Jd,{files:T,uniquePathMap:I,onFileClick:t})})]}):null]}),(0,r.BX)(g.G,{css:rf.includeOtherFiles,tag:"label",children:[(0,r.tZ)(Yd.X,{id:x,checked:l,onChange:function(e){return c(e.target.checked)}}),(0,r.tZ)(y.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,r.BX)(g.G,{css:rf.buttons,children:[(0,r.tZ)(Se.zx,{text:G?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:u?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Kd.Z,{}),disabled:!D||Z,loading:u,onClick:function(){return P.apply(this,arguments)}}),(0,r.tZ)(Se.zx,{text:G?"Abort pull":"Abort merge",colorway:"negative",iconLeft:p?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Fu.Z,{}),disabled:Z,loading:p,onClick:function(){return A.apply(this,arguments)}})]})]})]})}var af=(0,Z.X)({checkboxLabel:v.l0.rowWithGap(8)});function lf(){var e=(0,a.useId)(),t=(0,a.useState)(!0),n=t[0],i=t[1],o=(0,a.useState)(!1),l=o[0],c=o[1],s=lc(),u=(0,d.Z)().git;function f(){return(f=(0,we.Z)((function(){var e;return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return l?[2]:(c(!0),[4,u.init({initialCommit:n,includeAllInitialFiles:!0})]);case 1:return(e=t.sent()).error?(c(!1),s(e.error)):(u.forceRefresh(),ql("repository-initialized")),[2]}}))}))).apply(this,arguments)}var h=l?"Initializing...":"Initialize Git Repository";return(0,r.BX)(r.HY,{children:[(0,r.BX)(g.G,{css:af.checkboxLabel,tag:"label",children:[(0,r.tZ)(Yd.X,{id:e,checked:n,onChange:function(e){return i(e.target.checked)}}),(0,r.tZ)(y.xv,{multiline:!1,children:"Create initial commit with all changes"})]}),(0,r.tZ)(Se.zx,{text:h,iconLeft:l?(0,r.tZ)(oe.Z,{}):(0,r.tZ)(Bl.Z,{}),colorway:"primary",loading:l,onClick:function(){return f.apply(this,arguments)}})]})}var cf=(0,Z.X)({container:[v.l0.height("100%"),v.l0.p(16),v.l0.colWithGap(16),v.l0.center],imageTagline:[v.l0.colWithGap(16),v.l0.center,v.l0.flex.shrink(1)]});function sf(){return(0,r.BX)(g.G,{css:cf.container,children:[(0,r.BX)(g.G,{css:cf.imageTagline,children:[(0,r.tZ)(Po.Z,{alt:"A potted plant morphing into a branching graph like structure",src:"/public/images/git/git_uninitialized_art.svg",height:300,width:280,objectFit:"contain",priority:!0}),(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:"Version control for your Repl."})]}),(0,r.tZ)(lf,{})]})}function uf(){return(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,r.tZ)(y.xv,{multiline:!1,children:"Please finish the rebase manually."})]})}function df(){return(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,r.tZ)(y.xv,{multiline:!1,children:"Please finish the revert manually."})]})}var ff=n(61991),hf=n(30779),pf=n(94784),mf=(0,Z.X)({gitProfileTitle:[v.l0.rowWithGap(8),v.l0.align.center]});function vf(e){var t=e.username,n=e.avatar;return(0,r.BX)(g.G,{css:mf.gitProfileTitle,children:[(0,r.tZ)(pf.Z,{url:null!==n&&void 0!==n?n:"/images/evalbot/evalbot_24"}),(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t})]})}var gf=n(90171),yf=(0,Z.X)({list:{"> div:first-child":v.l0.borderRadius(8,8,0,0),"> div:last-child":[v.l0.borderRadius(0,0,8,8),{border:"none"}]},profile:[Bc.gU.filled,v.l0.flex.row,v.l0.justify.spaceBetween,v.l0.p(12),v.l0.borderRadius(0),v.l0.border({color:v.TV.outlineDefault,direction:"bottom"})],information:[v.l0.colWithGap(4),v.l0.flex.shrink(1)],informationRow:[v.l0.rowWithGap(8),v.l0.align.center],email:[v.l0.flex.shrink(1)],connectToGithubContainer:[v.l0.colWithGap(4),v.l0.p(12),v.l0.backgroundColor.backgroundHigher],divider:[v.l0.backgroundColor.outlineDefault],connectToGitHubTitle:[v.l0.rowWithGap(4),v.l0.align.center],notConnectedText:[v.l0.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function Zf(e){var t=e.profiles,n=e.current,i=e.showConnectToGithub,o=e.onSelectProvider,l=(0,gf.useRouter)(),c=(0,X.Vg)(l),s=a.useId();return(0,r.BX)(hf.E,{name:s,css:yf.list,value:null!==n&&void 0!==n?n:"",children:[t.map((function(e){var t;t=e.provider===Nl.rG.GITHUB?"GitHub":"Default Profile";var i=void 0;return e.provider===Nl.rG.GITHUB&&(i=c?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,r.tZ)(bf,{profile:e,providerName:t,current:e.provider===n,onSelectProvider:o,settingsURL:i},e.provider)})),i?(0,r.BX)(g.G,{css:yf.connectToGithubContainer,children:[(0,r.tZ)(g.G,{css:yf.connectToGitHubTitle,children:(0,r.tZ)(vf,{username:"GitHub Account"})}),(0,r.tZ)(y.xv,{color:"dimmest",css:yf.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),(0,r.tZ)(Yl,{})]}):null]})}function bf(e){var t=e.profile,n=e.current,i=e.providerName,o=e.settingsURL,l=e.onSelectProvider,c=t.provider,s=t.username,u=t.email,d=t.avatar,f=a.useId();return(0,r.BX)(g.G,{onClick:function(){return l(c)},css:yf.profile,children:[(0,r.BX)(g.G,{css:yf.information,children:[(0,r.BX)(g.G,{css:yf.informationRow,children:[(0,r.tZ)(vf,{username:s,avatar:d}),o?(0,r.tZ)(Mo.Z,{css:yf.settingsButton,text:"".concat(i," Settings"),iconRight:(0,r.tZ)(Wo.Z,{}),href:o,target:"_blank",variant:"outlined",size:"small"}):(0,r.tZ)(y.xv,{color:"dimmest",variant:"small",multiline:!1,children:i})]}),(0,r.tZ)(y.xv,{color:"dimmest",css:yf.email,multiline:!1,children:u})]}),(0,r.tZ)(hf.Y,{css:yf.radio,id:f,checked:n,value:c})]})}var wf=(0,Z.X)({profileContainer:[v.l0.flex.column]});function xf(){var e=(0,d.Z)().git,t=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var t,n,r,i,o;return(0,xe.__generator)(this,(function(a){return t=e.getCurrentProfile(),n=e.getProfiles(),i=null!==(r=null===t||void 0===t?void 0:t.provider)&&void 0!==r?r:null,o=!e.hasProfile(Nl.rG.GITHUB),[2,{profiles:n,current:i,hasGitHub:o,error:null}]}))}));return function(t){return e.apply(this,arguments)}}());if(!t)return null;if(null!==t.error)return Cl({context:"git-profiles",gitService:e,result:{error:t.error}}),null;var n=t.profiles,i=t.current,o=t.hasGitHub;return(0,r.tZ)(g.G,{css:wf.profileContainer,children:(0,r.tZ)(Zf,{profiles:n,current:i,showConnectToGithub:o,onSelectProvider:function(t){e.setCurrentProfile(t),t===Nl.rG.REPLIT_DEFAULT?ql("profile-changed",{profile:"replit"}):t===Nl.rG.GITHUB&&ql("profile-changed",{profile:"github"})}})})}var Cf=n(40176);function kf(){var e=(0,hn.Z)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return kf=function(){return e},e}function Sf(){var e=(0,hn.Z)(['\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n        repositories(count: 1, after: "0") {\n          ... on RepositoryConnection {\n            items {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n']);return Sf=function(){return e},e}function Ef(){var e=(0,hn.Z)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return Ef=function(){return e},e}var Tf={},Rf=(0,pn.Ps)(kf());Sf();var Df=(0,pn.Ps)(Ef());var If=(0,Z.X)({errorText:[v.l0.color.accentNegativeStronger,v.l0.pl(4)]});function _f(e){var t=e.remoteName,n=e.updateRemote,i=(0,Mn.Z)().showConfirm,l=(0,d.Z)().git,c=(0,Ra.Z)(),s=Wl(),u=(0,oi.U)(),f=(0,fn.Z)(),h=(0,a.useRef)(null),p=(0,a.useRef)(null),m=(0,a.useState)(),Z=m[0],b=m[1],w=function(e){var t=(0,Ze.Z)({},Tf,e);return mn.a(Rf,t)}({variables:{replId:f}}).data,x="Repl"===(null===w||void 0===w?void 0:w.repl.__typename)?w.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},C=x.slug,k=x.description,S=x.isPrivate,E=x.url,T=(0,o.Z)(function(e){var t=(0,Ze.Z)({},Tf,e);return Rn.D(Df,t)}(),2),R=T[0],D=T[1].loading,I=(0,Vl.v)({onAuth:function(){ql("github-user-connected")}}),_=(0,a.useState)(null===S||void 0===S||S),B=_[0],G=_[1],P=(0,a.useState)(C),A=P[0],N=P[1],U=(0,a.useState)(),L=U[0],O=U[1],X=(0,a.useState)(null!==k&&void 0!==k?k:E&&"Repository for https://replit.com".concat(E)),M=X[0],F=X[1],W=(0,a.useState)(),H=W[0],V=W[1],j=function(){var e=(0,we.Z)((function(e){var r,i,o;return(0,xe.__generator)(this,(function(a){switch(a.label){case 0:return[4,l.getRemotes()];case 1:return(r=a.sent()).error?(b("Error finding current remotes, ".concat(r.error)),[2]):r.remotes.has(t)?[4,l.setRemoteURL({remote:t,url:e})]:[3,3];case 2:return(i=a.sent()).error?(b("Error (".concat(i.error,") setting ").concat(t," to use ").concat(e," as a remote.")),[2]):(n(e),ql("remote-edited"),[2]);case 3:return[4,l.addRemote({name:t,url:e})];case 4:return(o=a.sent()).error?(b("Error (".concat(o.error,") adding ").concat(t," ").concat(e," as a remote.")),[2]):(n(e),ql("remote-added"),[2])}}))}));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,we.Z)((function(){var e,t,n,r;return(0,xe.__generator)(this,(function(o){switch(o.label){case 0:return O(void 0),V(void 0),b(void 0),A?(0,Pc.GE)(A)?[4,R({variables:{input:{name:A,description:null!==k&&void 0!==k?k:null,homepage:"replit.com".concat(E),isPrivate:B,ownerType:mo.xJ.User}}})]:(O("Invalid remote name."),[2]):[2];case 1:return r=o.sent(),"UnauthorizedError"===(null===(e=r.data)||void 0===e?void 0:e.createGithubRepo.__typename)||"UserError"===(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)?(b(r.data.createGithubRepo.message),[2]):("CreateGithubRepoResult"===(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)&&(j(r.data.createGithubRepo.remoteUrl),ql("github-repository-published"),i("Created repository on Github")),[2])}}))}));return function(){return e.apply(this,arguments)}}();return s?(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,r.tZ)(_t.II,{ref:h,label:"Repository name",name:"Repository name",placeholder:"Enter repository name",value:A,onChange:function(e){O(void 0),N(e.target.value)},"aria-label":"Enter a name for the GitHub repository to be created for this Repl.",onKeyDown:function(e){var t;"Enter"===e.key&&(e.preventDefault(),null===(t=p.current)||void 0===t||t.focus())}}),(0,r.tZ)(y.xv,{css:If.errorText,multiline:!1,children:L}),(0,r.tZ)(ff.Z,{height:1}),(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,r.tZ)(_t.B,{ref:p,maxLength:350,label:"Repository description",name:"Repository description",placeholder:"Enter repository description",value:null!==M&&void 0!==M?M:void 0,onChange:function(e){V(void 0),F(e.target.value)},"aria-label":"Enter a description for the GitHub repository to be created for this Repl."}),(0,r.tZ)(y.xv,{css:If.errorText,multiline:!1,children:H}),(0,r.tZ)(ff.Z,{height:1}),(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,r.BX)(hl.hE,{tag:"fieldset",id:u("privacy"),name:u("privacy"),value:B,onChange:function(e){return G(e)},row:!0,css:[v.l0.width("100%")],children:[(0,r.tZ)(hl.rK,{id:u("false"),value:!1,text:"Public",icon:(0,r.tZ)(Cf.Z,{})}),(0,r.tZ)(hl.rK,{id:u("true"),value:!0,text:"Private",icon:(0,r.tZ)(z.Z,{})})]}),(0,r.tZ)(ff.Z,{height:2}),(0,r.tZ)(Se.zx,{text:D?"Creating Repository on GitHub\u2026":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,r.tZ)(zl.Z,{}),onClick:q,loading:D}),Z?(0,r.tZ)(y.xv,{css:If.errorText,maxLines:2,multiline:!1,children:Z}):null]}):c?(0,r.tZ)(g.G,{children:(0,r.tZ)(Se.zx,{colorway:"primary",iconLeft:(0,r.tZ)(zl.Z,{}),text:"Open Account page to connect to GitHub",onClick:function(){$l.X.openExternalUrl("/account#connected-services")}})}):(0,r.tZ)(g.G,{children:(0,r.tZ)(Se.zx,{colorway:"primary",iconLeft:(0,r.tZ)(zl.Z,{}),text:"Connect to GitHub",onClick:I})})}var Bf=(0,an.iv)(v.l0.rowWithGap(4)),Gf=(0,an.iv)(v.l0.flex.growAndShrink(1)),Pf=(0,an.iv)(v.l0.color.accentNegativeStronger,v.l0.pl(4));function Af(e){var t=e.initialRemoteUrl,n=e.remoteName,i=e.updateRemote,o=(0,d.Z)().git,l=(0,a.useState)(),c=l[0],s=l[1];(0,a.useEffect)((function(){s(void 0)}),[t]);var u=(0,a.useState)(),f=u[0],h=u[1],p=(0,a.useState)(!1),m=p[0],v=p[1],Z=function(){var e=(0,we.Z)((function(){var e,t,r,a;return(0,xe.__generator)(this,(function(l){switch(l.label){case 0:if(l.trys.push([0,5,6,7]),!c)return[2];if(v(!0),!(0,Pc.LY)(c))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=l.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));return e.remotes.has(n)?[4,o.setRemoteURL({remote:n,url:c})]:[3,3];case 2:if((t=l.sent()).error)throw Cl({context:"remote-input",gitService:o,result:t}),Error("Error (".concat(t.error,") setting ").concat(n," to use ").concat(c," as a remote."));return ql("remote-edited"),i(c),[2];case 3:return[4,o.addRemote({name:n,url:c})];case 4:if((r=l.sent()).error)throw Cl({context:"remote-input",gitService:o,result:r}),Error("Error (".concat(r.error,") adding ").concat(n," ").concat(c," as a remote."));return ql("remote-added"),[3,7];case 5:return a=l.sent(),h(a.message),[3,7];case 6:return v(!1),[7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.BX)(g.G,{children:[(0,r.tZ)(_t.II,{label:"Remote URL",name:"Remote URL",placeholder:"Enter Remote URL",value:null!==c&&void 0!==c?c:t,autoComplete:"off",autoCorrect:"off",onChange:function(e){h(void 0),s(e.target.value)},inputMode:"url","aria-label":"Set remote URL to ".concat(c),onKeyDown:function(e){"Enter"===e.key&&Z()}}),f?(0,r.tZ)(y.xv,{variant:"small",css:Pf,multiline:!1,children:f}):null,c&&c!==t?(0,r.BX)(r.HY,{children:[(0,r.tZ)(ff.Z,{height:1}),(0,r.BX)(g.G,{css:Bf,children:[(0,r.tZ)(Se.zx,{css:Gf,text:"Cancel",iconLeft:(0,r.tZ)(st.Z,{}),onClick:function(){return s(void 0)}}),(0,r.tZ)(Se.zx,{css:Gf,text:m?"Saving\u2026":"Save",loading:m,colorway:"primary",iconLeft:(0,r.tZ)(Fn.Z,{}),onClick:Z})]})]}):null]})}var Nf=(0,an.iv)(v.l0.border({width:1,color:v.TV.outlineDimmer}),v.l0.borderRadius(8)),Uf=(0,an.iv)(Bc.gU.filled,v.l0.flex.row,v.l0.justify.spaceBetween,v.l0.align.center,v.l0.px(8),v.l0.py(4),v.l0.borderRadius(8,8,0,0)),Lf=(0,an.iv)(v.l0.borderRadius(8,8,0,0)),Of=(0,an.iv)(v.l0.borderRadius(8)),Xf=(0,an.iv)(v.l0.p(8)),Mf=(0,an.iv)(v.l0.flex.growAndShrink(1));function Ff(e){var t=e.title,n=e.expanded,i=e.content,o=e.onClick;return(0,r.BX)(g.G,{css:Nf,children:[(0,r.BX)(g.G,{css:[Uf,n?Lf:Of],onClick:o,children:[(0,r.tZ)(g.G,{css:Mf,children:(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t})}),n?(0,r.tZ)(Va.Z,{size:20}):(0,r.tZ)(Ha.Z,{size:20})]}),n?(0,r.tZ)(g.G,{css:Xf,children:i}):null]})}var Wf,Hf="origin";function Vf(){var e=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var t,n,r,i,a;return(0,xe.__generator)(this,(function(l){switch(l.label){case 0:return[4,e.getRemotes()];case 1:return(t=l.sent()).error?(Cl({context:"remote-config",gitService:e,result:t}),[2,{url:void 0,name:Hf,error:t.error}]):(r=(0,o.Z)(null!==(n=t.remotes.values())&&void 0!==n?n:void 0,1),(i=r[0])?[2,{url:i.push||i.fetch,name:null!==(a=i.name)&&void 0!==a?a:Hf,error:null}]:[2,{url:void 0,name:Hf,error:null}])}}))}));return function(t){return e.apply(this,arguments)}}());return null==e?(0,r.BX)(g.G,{css:v.l0.center,children:[(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,r.tZ)(wu,{})]}):(null===e||void 0===e?void 0:e.error)?null:(0,r.tZ)(zf,{initialRemoteUrl:null===e||void 0===e?void 0:e.url,remoteName:null===e||void 0===e?void 0:e.name})}function zf(e){var t=e.initialRemoteUrl,n=e.remoteName,i=(0,a.useState)(t),o=i[0],l=i[1],c=(0,a.useState)(""===t||void 0===t?Wf.GitHub:void 0),s=c[0],u=c[1],d=function(e){l(e)};return(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,r.tZ)(ff.Z,{height:1}),(0,r.tZ)(Af,{remoteName:n,initialRemoteUrl:o,updateRemote:d}),(0,r.tZ)(ff.Z,{height:2}),(0,r.tZ)(Ff,{title:"GitHub",expanded:s===Wf.GitHub,onClick:function(){return u((function(e){return e===Wf.GitHub?void 0:Wf.GitHub}))},content:(0,r.tZ)(_f,{remoteName:n,updateRemote:d})})]})}!function(e){e[e.GitHub=0]="GitHub"}(Wf||(Wf={}));var jf=(0,an.iv)(v.l0.px(16));function qf(){return(0,r.BX)(g.G,{css:jf,children:[(0,r.tZ)(ff.Z,{height:2}),(0,r.tZ)(Vf,{}),(0,r.tZ)(ff.Z,{height:2}),(0,r.tZ)($f,{})]})}function $f(){return(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,r.tZ)(ff.Z,{height:1}),(0,r.tZ)(xf,{})]})}var Yf=(0,Z.X)({container:[v.l0.colWithGap(16),v.l0.p(8),v.l0.pt(16)],fakePaneHeader:[v.l0.px(8),v.l0.py(4),v.l0.rowWithGap(8),v.l0.backgroundColor.backgroundDefault,v.l0.align.center,{borderBottom:"1px solid ".concat(v.TV.outlineDimmer)}]});function Kf(e){var t=e.onFileClick,n=e.status;return(0,r.BX)(g.G,{children:[(0,r.tZ)(Qf,{}),(0,r.BX)(g.G,{css:Yf.container,children:[(0,r.tZ)(Re.E,{colorway:"orange",icon:(0,r.tZ)(Ee.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,r.BX)(g.G,{css:Nd.section,children:[(0,r.tZ)(g.G,{css:Nd.reviewChangesHeader,children:(0,r.tZ)(y.xv,{css:Nd.headerText,multiline:!1,children:"Commit"})}),(0,r.tZ)(md,{status:n,onStagedFileClick:t,defaultMessage:"Initial commit"})]})]})]})}function Qf(){var e=lc(),t=(0,wl.Z)(function(){var t=(0,we.Z)((function(t){var n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.status()];case 1:return(n=r.sent()).error&&(Cl({context:"unborn-branch-view-status",gitService:t,result:n}),e(n.error)),[2,n]}}))}));return function(e){return t.apply(this,arguments)}}(),[e]);return(null===t||void 0===t?void 0:t.error)?null:(0,r.tZ)(g.G,{css:Yf.fakePaneHeader,children:(null===t||void 0===t?void 0:t.branch)?(0,r.tZ)(Ec,{name:t.branch,current:!0,heading:!0}):null})}function Jf(e){var t=e.error;return(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Failed to start the Git pane."}),(0,r.BX)(y.xv,{multiline:!1,children:["Error: ",t]})]})}var eh=function(e){var t=(0,wl.Z)(function(){var t=(0,we.Z)((function(t){var n,r,i;return(0,xe.__generator)(this,(function(o){switch(o.label){case 0:return[4,t.isInitialized()];case 1:return(n=o.sent()).error?[2,{error:n.error}]:n.initialized?[4,t.log({max:1,revRange:e})]:[2,{error:Nl.aq.NOT_INITIALIZED}];case 2:return(r=o.sent()).error?[2,{error:r.error}]:0===r.commits.length?[2,{error:Nl.aq.NO_COMMITS}]:[2,{commit:null!==(i=r.commits[0])&&void 0!==i?i:null,error:null}]}}))}));return function(e){return t.apply(this,arguments)}}(),[e]);return(0,a.useMemo)((function(){return t?t.error?{error:t.error}:t:null}),[t])},th=function(e){var t=e.source,n=e.target;return(0,r.tZ)("span",{children:n?(0,r.BX)(r.HY,{children:["Branch ",(0,r.tZ)(Ec,{name:t})," into ",(0,r.tZ)(Ec,{name:n})," "]}):(0,r.BX)(r.HY,{children:["Branch ",(0,r.tZ)(Ec,{name:t})]})})},nh=(0,Z.X)({markerContainer:[v.l0.display.inlineFlex,v.l0.mr(4)]}),rh=function(e){var t=e.merge,n=e.revert,i=e.subject,o=e.onViewCommitClick;return(0,r.BX)(y.h4,{level:2,variant:"subheadDefault",multiline:!0,children:[t?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:nh.markerContainer,children:(0,r.tZ)(Gs,{type:"merge"})}),(0,r.tZ)(wc,{text:"merged"})," "]}):null,"pull-request"===(null===t||void 0===t?void 0:t.type)?(0,r.BX)(r.HY,{children:["PR ",(0,r.tZ)(xc,{id:t.id,hash:!0})," ",(null===n||void 0===n?void 0:n.pr)?(0,r.BX)(r.HY,{children:[(0,r.tZ)(bc,{text:"reverts"})," ",(0,r.tZ)(xc,{id:n.pr,hash:!0})]}):null," - "]}):null,"branch"===(null===t||void 0===t?void 0:t.type)?(0,r.BX)(r.HY,{children:[(0,r.tZ)(th,{source:t.source,target:t.target})," -"," "]}):null,n&&!t?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:nh.markerContainer,children:(0,r.tZ)(Gs,{type:"revert"})}),(0,r.tZ)(bc,{text:"reverted"})," ",(0,r.tZ)("button",{css:[v.l0.reset.button,v.l0.linkStyle,v.l0.fontWeight.medium],onClick:function(){void 0!==(null===n||void 0===n?void 0:n.hash)&&o(n.hash)},children:n.hash.slice(0,7)})," - "]}):null,(0,r.tZ)(kc,{subject:i})]})},ih=(0,Z.X)({metaContainer:[v.l0.rowWithGap(4),v.l0.align.center,v.l0.flex.wrap]}),oh=function(e){var t=e.author,n=e.committer,i=eu(n,t),o=tu(n.date,t.date);return(0,r.BX)(g.G,{css:ih.metaContainer,children:[i&&o?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Vc,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(y.xv,{variant:"small",children:"authored"}),(0,r.tZ)(jc.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,r.tZ)(y.xv,{variant:"small",children:"and"})]}):null,i&&!o?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Vc,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(y.xv,{variant:"small",children:"authored"}),(0,r.tZ)(y.xv,{variant:"small",children:"and"})]}):null,(0,r.tZ)(Vc,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!i&&o?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.xv,{variant:"small",children:"authored "}),(0,r.tZ)(jc.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,r.tZ)(y.xv,{variant:"small",children:"and "})]}):null,(0,r.tZ)(y.xv,{variant:"small",children:"committed"}),(0,r.tZ)(jc.EK,{date:n.date,textColor:"dimmest",textVariant:"small"})]})},ah=(0,Z.X)({dullText:[v.l0.color.foregroundDimmest],tooltipContainer:[v.l0.display.inlineBlock]}),lh=function(e){var t=e.onViewCommitClick,n=e.hash;return(0,r.tZ)("span",{css:ah.tooltipContainer,children:(0,r.tZ)(ae.u,{tooltip:"View commit",children:(0,r.tZ)("button",{css:[v.l0.reset.button,v.l0.linkStyle,v.l0.fontWeight.medium],onClick:function(){return t(n)},children:n.slice(0,7)})})})},ch=function(e){var t=e.parents,n=e.grafted,i=e.onViewCommitClick;return(0,r.BX)(y.xv,{variant:"small",children:[(0,r.BX)("span",{css:ah.dullText,children:[n?"Grafted with ":null,t.length," ",(0,te.Z)("parent",t.length)," "]}),0===t.length?null:t.map((function(e,n){return(0,r.BX)(a.Fragment,{children:[(0,r.tZ)(lh,{hash:e,onViewCommitClick:i}),n===t.length-1?"":(0,r.tZ)("span",{css:ah.dullText,children:", "})]},e)}))]})},sh=[{"& > span:first-child":[v.l0.flex.grow(1),v.l0.textAlign.left]},{"& > span":[v.l0.flex.shrink(1)]}],uh=(0,Z.X)({container:[v.l0.colWithGap(16)],splitOrUnisonContainer:[v.l0.colWithGap(8),v.l0.display.flex,v.l0.flex.row,v.l0.flex.wrap,v.l0.align.center,v.l0.justify.spaceBetween],emphasizedText:[v.l0.fontWeight.medium],buttonFolded:[sh,v.l0.height("auto"),v.l0.py(8),v.l0.fontWeight.medium],buttonUnfolded:[sh,v.l0.height("auto"),v.l0.py(8),v.l0.fontWeight.medium,v.l0.borderRadius(8,8,0,0)],buttonGroupItem:[v.l0.width(64),v.l0.height(32)],textContainer:[v.l0.mt(8),v.l0.overflow("break-all")]}),dh=function(e){var t=e.value,n=e.onChange;return(0,r.BX)(hl.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,r.tZ)(g.G,{css:uh.buttonGroupItem,children:(0,r.tZ)(hl.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,r.tZ)(g.G,{css:uh.buttonGroupItem,children:(0,r.tZ)(hl.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},fh=function(e){var t=e.files,n=e.totalFiles;return t===n?(0,r.BX)(y.xv,{css:uh.textContainer,children:["Showing"," ",(0,r.BX)("span",{css:uh.emphasizedText,children:[n," changed ",(0,te.Z)("file",n),"."]})]}):(0,r.BX)(y.xv,{css:uh.textContainer,children:["Showing"," ",(0,r.BX)("span",{css:uh.emphasizedText,children:[t," of ",n," changed ",(0,te.Z)("file",n),"."]})]})},hh=function(e){var t,n=e.query,i=e.setQuery,o=e.totalDiffs,l=e.diffs,c=e.splitOrUnified,s=e.setSplitOrUnified,u=e.folded,d=e.setFolded,f=(0,a.useMemo)((function(){return function(e,t){return t.filter((function(t){var n="".concat(t.final.path,"/").concat(t.final.filename),r="".concat(t.initial.path,"/").concat(t.initial.filename);return n.toLowerCase().includes(e.toLowerCase())||r.toLowerCase().includes(e.toLowerCase())}))}(n,l)}),[n,l]);return(0,r.BX)(g.G,{css:uh.container,children:[(0,r.tZ)(et.E,{value:n,onChange:function(e){i(e.target.value)},onClear:function(){i("")},loading:!1,placeholder:"Filter changed files"}),(0,r.BX)(g.G,{css:uh.splitOrUnisonContainer,children:[(0,r.tZ)(fh,{files:f.length,totalFiles:o}),(0,r.tZ)(dh,{value:c,onChange:function(e){return s(e)}})]}),f.map((function(e){return(0,r.tZ)(bl,{folded:null===(t=u[e.id])||void 0===t||t,setFolded:function(t){return d(e.id,t)},diff:e,splitOrUnified:c},e.id)}))]})},ph=function(e){var t=lc(),n=(0,wl.Z)(function(){var t=(0,we.Z)((function(t){var n,r,i,o,a,l,c,s,u;return(0,xe.__generator)(this,(function(d){switch(d.label){case 0:return i=e.hash,[4,t.getFilesForCommit(i)];case 1:return(null===(o=d.sent())||void 0===o?void 0:o.error)?(Cl({context:"use-commit-diffs",gitService:t,result:o}),[2,{error:o.error,diffs:[]}]):(a=(null===o||void 0===o||null===(n=o.files)||void 0===n?void 0:n.filter((function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)})))||[],l=(null===o||void 0===o||null===(r=o.files)||void 0===r?void 0:r.filter((function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)})))||[],c=new Set((0,ee.Z)(a).concat((0,ee.Z)(l))),[2,{error:null,diffs:Array.from(c).map((function(e){return{id:(0,Ea.v4)(),status:e.type,loading:!1,initial:{filename:(0,D.UO)(null!==(s=e.originalPath)&&void 0!==s?s:e.path),path:(0,D.Il)(null!==(u=e.originalPath)&&void 0!==u?u:e.path),content:""},final:{filename:(0,D.UO)(e.path),path:(0,D.Il)(e.path),content:""}}}))}])}}))}));return function(e){return t.apply(this,arguments)}}(),[e]);return(0,a.useMemo)((function(){return n?n.error?(t(n.error),null):n:null}),[t,n])},mh=function(){var e=(0,we.Z)((function(e,t,n,r){var i,o,a;return(0,xe.__generator)(this,(function(l){switch(l.label){case 0:return i=""===t?n:"".concat(t,"/").concat(n),[4,e.getFileContents({path:i,revision:r})];case 1:if((o=l.sent()).error)throw o.error;return[2,null!==(a=null===o||void 0===o?void 0:o.content)&&void 0!==a?a:""]}}))}));return function(t,n,r,i){return e.apply(this,arguments)}}(),vh=function(){var e=(0,we.Z)((function(e,t,n){var r,i,o,a;return(0,xe.__generator)(this,(function(l){switch(l.label){case 0:return i=t.hash,[4,mh(e,n.final.path,n.final.filename,i)];case 1:return o=l.sent(),a="",t.grafted||!(null===(r=t.parents)||void 0===r?void 0:r.length)?[3,3]:[4,mh(e,n.initial.path,n.initial.filename,"".concat(i,"^"))];case 2:a=l.sent(),l.label=3;case 3:return[2,(0,be.Z)((0,Ze.Z)({},n),{loading:!1,initial:(0,be.Z)((0,Ze.Z)({},n.initial),{content:a}),final:(0,be.Z)((0,Ze.Z)({},n.final),{content:o})})]}}))}));return function(t,n,r){return e.apply(this,arguments)}}(),gh=(0,Z.X)({content:[v.l0.colWithGap(16),v.l0.p(16)],splitContainer:[v.l0.display.flex,v.l0.flex.row,v.l0.flex.shrink(1),v.l0.flex.wrap,v.l0.justify.spaceBetween,v.l0.maxWidth("100%"),v.l0.border({color:v.TV.outlineDimmest,direction:"bottom"}),v.l0.pb(16)]}),yh=function(e){var t,n=e.git,i=e.commit,o=e.info,l=e.onViewCommitClick,c=void 0===l?function(){}:l,s=e.status,u=(0,a.useMemo)((function(){return Ru(s?s.changes.map((function(e){return e.path})):[])}),[s]),d=(0,a.useMemo)((function(){if(!s)return[];var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=s.changes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.type.worktree!==za.h.UNMODIFIED&&e.push(a)}}catch(l){n=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e}),[s]),f=(0,Mn.Z)().showConfirm,h=lc(),p=(0,a.useState)(!1),m=p[0],Z=p[1],b=(0,a.useState)(""),w=b[0],x=b[1],C=(0,a.useState)("Split"),k=C[0],S=C[1],E=(0,a.useState)({}),T=E[0],R=E[1],D=(0,a.useState)([]),I=D[0],_=D[1],B=Ks(i,o),G=B.hideBody,P=B.merge,A=B.revert,N=i.hash,U=i.subject,L=i.body,O=i.committer,X=i.author,M=i.grafted,F=null!==(t=i.parents)&&void 0!==t?t:[],W=ph(i),H=(0,a.useCallback)((0,we.Z)((function(){var e,t,r,o=arguments;return(0,xe.__generator)(this,(function(a){switch(a.label){case 0:return e=!(o.length>0&&void 0!==o[0])||o[0],[4,n.restoreFiles(e,i.hash)];case 1:return(t=a.sent()).error?[3,3]:[4,n.status()];case 2:return(r=a.sent()).error?(h(r.error),Cl({context:"commit-view",gitService:n,result:r})):f("Restored commit!"),n.forceRefresh(),[3,4];case 3:h(t.error),Cl({context:"commit-view",gitService:n,result:t}),a.label=4;case 4:return[2]}}))})),[i.hash,n,h,f]),V=ju(u),z=V.openRestoreConfirmationModal,j=V.restoreConfirmationModal,q=(0,a.useCallback)((0,we.Z)((function(){var e,t,n,r=arguments;return(0,xe.__generator)(this,(function(i){switch(i.label){case 0:return!0!==(e=!(r.length>0&&void 0!==r[0])||r[0])?[3,6]:(Z(!0),0!==d.length?[3,2]:[4,H()]);case 1:return i.sent(),Z(!1),[2];case 2:return[4,z(d)];case 3:return i.sent()?[4,H()]:[3,5];case 4:i.sent(),i.label=5;case 5:return Z(!1),[3,10];case 6:if("string"===typeof e){if(!(n=d.find((function(t){return t.path===e}))))throw Z(!1),new Error("Could not find file in worktree list");t=[n]}else t=d.filter((function(t){return e.includes(t.path)}));return[4,z(t)];case 7:return i.sent()?[4,H(e)]:[3,9];case 8:i.sent(),i.label=9;case 9:Z(!1),i.label=10;case 10:return[2]}}))})),[z,H,d]);(0,a.useEffect)((function(){var e;_(null!==(e=null===W||void 0===W?void 0:W.diffs.map((function(e){return(0,be.Z)((0,Ze.Z)({},e),{loading:!0})})))&&void 0!==e?e:[])}),[W]),(0,a.useEffect)((function(){null!==W&&W.error&&h(W.error)}),[W,h]);var $=function(){var e=(0,we.Z)((function(e,t){var r,o,a;return(0,xe.__generator)(this,(function(l){switch(l.label){case 0:if(R((function(n){var r=(0,Ze.Z)({},n);return r[e]=t,r})),!(r=I.find((function(t){return t.id===e}))))return h(Nl.aq.INVALID_STATE),Cl({context:"commit-view",gitService:n,result:{error:Nl.aq.INVALID_STATE}}),[2];if(t||!r.loading)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,vh(n,i,r)];case 2:return o=l.sent(),_((function(t){var n=(0,ee.Z)(t),r=n.findIndex((function(t){return t.id===e}));return n[r]=o,n})),[3,4];case 3:return a=l.sent(),Cl({context:"commit-view",gitService:n,result:a}),h(a),[2];case 4:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();return(0,r.BX)(g.G,{css:gh.content,children:[(0,r.tZ)(rh,{merge:P,revert:A,subject:U,onViewCommitClick:c}),(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.start,v.l0.flex.shrink(1)],children:[(0,r.tZ)(Qs,{hash:N}),(0,r.tZ)(Js,{onClick:function(){return q()},text:"Restore All",loading:m})]}),G?null:(0,r.tZ)(Sc,{body:L}),(0,r.BX)(g.G,{css:gh.splitContainer,children:[(0,r.tZ)(oh,{author:X,committer:O}),(0,r.tZ)(ch,{parents:F,grafted:M,onViewCommitClick:c})]}),null!==P?(0,r.tZ)(y.xv,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===W?(0,r.tZ)(wu,{}):(0,r.tZ)(hh,{query:w,setQuery:x,totalDiffs:W.diffs.length,diffs:I,splitOrUnified:k,setSplitOrUnified:S,folded:T,setFolded:$}),j]})};function Zh(e){var t=e.hash,n=e.onViewCommitClick,i=e.switchMode,o=e.status,a=(0,d.Z)().git,l=lc(),c=eh(null!==t&&void 0!==t?t:"");if(null===c)return(0,r.tZ)(wu,{});if(c.error)return c.error===Nl.aq.NOT_INITIALIZED?(i({mode:gc.CURRENT_BRANCH}),null):(l(c.error),c.error!==Nl.aq.UNKNOWN&&c.error!==Nl.aq.UNKNOWN_NOT_GIT||Cl({context:"commit-view",gitService:a,result:c}),null);if(null===c.commit)return l(Nl.aq.UNKNOWN),null;var s=c.commit,u=Ts(s)||xs(s);return(0,r.tZ)(yh,{git:a,commit:s,info:u,onViewCommitClick:n,status:o})}var bh=(0,Z.X)({gitPane:[v.l0.position.relative,v.l0.display.flex,v.l0.height("100%")],gitPaneContent:[v.l0.flex.growAndShrink(1),v.l0.overflow("auto")]});function wh(e){var t=e.isActive,n=void 0!==t&&t,i=e.performPaneOperation,o=(0,ro.P5)({controlName:"flag-git-commit-view",logFlagToAnalytics:!1}),l=(0,ro.P5)({controlName:"flag-git-pane-branch-selector",logFlagToAnalytics:!1}),c=(0,a.useRef)(),s=(0,a.useState)(l?gc.CURRENT_BRANCH:gc.DASHBOARD),u=s[0],f=s[1],h=(0,a.useState)(null),p=h[0],m=h[1],v=(0,a.useState)(null),g=v[0],y=v[1],Z=(0,a.useState)(!1),b=Z[0],w=Z[1];!function(e){var t=(0,d.Z)().git;(0,a.useEffect)((function(){e&&t.forceRefresh()}),[e,t])}(n);var x=(0,wl.Z)(function(){var e=(0,we.Z)((function(e){var t,n,r,i,o,a,l,c,s,u;return(0,xe.__generator)(this,(function(d){switch(d.label){case 0:return[4,e.getRepositoryState()];case 1:return(t=d.sent()).error?[2,t]:(n=t.state,r=t.type,i=null,o=null,a=null,r===Gl.y5.INITIALIZING?[3,6]:[4,e.status()]);case 2:return(l=d.sent()).error?(Cl({context:"git-pane-status",gitService:e,result:l}),[2,l]):(i=l,[4,e.getRemotes()]);case 3:return(c=d.sent()).error?(Cl({context:"git-pane-remotes",gitService:e,result:c}),[2,c]):(o=c.remotes,i.branch?[4,e.getBranch(i.branch)]:[3,5]);case 4:if((s=d.sent()).error)return Cl({context:"git-pane-branch",gitService:e,result:s}),[2,s];a=s.branch,d.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((u=d.sent()).error)return Cl({context:"git-pane-status-initializing",gitService:e,result:u}),[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}];i=u,d.label=8;case 8:return[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}]}}))}));return function(t){return e.apply(this,arguments)}}()),C=!x||x.error?null:x.currentBranch,k=(0,a.useCallback)((function(e){switch(f(e),e){case gc.DASHBOARD:ql("pane-mode-changed",{mode:"dashboard"});break;case gc.BRANCH:ql("pane-mode-changed",{mode:"branch"});break;case gc.CURRENT_BRANCH:ql("pane-mode-changed",{mode:"current-branch"});break;case gc.SETTINGS:ql("pane-mode-changed",{mode:"settings"})}}),[]),S=(0,a.useCallback)((function(){c.current?(k(c.current),c.current=void 0):k(l?gc.CURRENT_BRANCH:gc.DASHBOARD)}),[k,l]),E=(0,a.useCallback)((function(e){var t=function(e){c.current=u,k(e)};switch(e.mode){case gc.DASHBOARD:t(gc.DASHBOARD);break;case gc.BRANCH:if((0,Pl.p3)(e.branch,C)){t(gc.CURRENT_BRANCH);break}y(e.branch),t(gc.BRANCH);break;case gc.CURRENT_BRANCH:t(gc.CURRENT_BRANCH);break;case gc.SETTINGS:t(gc.SETTINGS);break;case gc.COMMIT:m(e.hash),t(gc.COMMIT)}}),[k,u,C]),T=(0,a.useCallback)((function(e){var t=(0,A.Dp)({path:e});i("codeEditor"===t?{operation:"open",pane:{type:"diff",data:{left:{path:e,revision:"HEAD"},right:{path:e,revision:""}}}}:{operation:"open",pane:{type:t,data:{path:e}}})}),[i]),R=(0,a.useCallback)((function(e){E({mode:gc.COMMIT,hash:e})}),[E]),D=(0,a.useCallback)((function(){w(!0)}),[]);if(u===gc.BRANCH&&(0,Pl.p3)(g,C)&&k(gc.CURRENT_BRANCH),(0,a.useEffect)((function(){return w(!1)}),[x]),b||!x||x.error)return(0,r.tZ)(xh,{children:(null===x||void 0===x?void 0:x.error)?(0,r.tZ)(Jf,{error:x.error}):(0,r.tZ)(wu,{})});switch(x.type){case Gl.y5.INITIALIZING:case Gl.y5.INTERMEDIATE:case Gl.y5.DETACHED_HEAD:return(0,r.tZ)(xh,{children:(0,r.tZ)(Ch,{state:x.state,status:x.status,onFileClick:T,gotoPendingState:D})});case Gl.y5.NORMAL:return u===gc.BRANCH&&!g||u===gc.CURRENT_BRANCH&&!C?(0,r.tZ)(xh,{header:(0,r.tZ)(fs,{mode:gc.DASHBOARD,branch:null,switchMode:E,onBack:S}),children:(0,r.tZ)(qd,{currentBranch:null,switchMode:E})}):(0,r.tZ)(xh,{header:(0,r.tZ)(fs,{mode:u,branch:u===gc.CURRENT_BRANCH?C:g,switchMode:E,onBack:S}),children:(0,r.tZ)(kh,{mode:u,status:x.status,remotes:x.remotes,previewBranch:g,previewCommit:p,currentBranch:C,switchMode:E,onStagedFileClick:T,onViewCommitClick:o?R:void 0,gotoPendingState:D})})}}function xh(e){var t=e.header,n=e.children,i=(0,a.useState)((function(){return(0,ce.MT)()}))[0];return(0,r.tZ)(rc.Provider,{value:i,children:(0,r.BX)(g.G,{css:bh.gitPaneContent,children:[(0,r.tZ)(sc,{}),t,(0,r.tZ)(g.G,{css:bh.gitPaneContent,children:n})]})})}function Ch(e){var t=e.state,n=e.status,i=e.onFileClick,o=e.gotoPendingState;switch(t){case Gl.yG.NOT_INITIALIZED:return(0,r.tZ)(sf,{});case Gl.yG.ON_UNBORN_BRANCH:return(0,r.tZ)(Kf,{onFileClick:i,status:n});case Gl.yG.MERGING:return(0,r.tZ)(of,{onFileClick:i,gotoPendingState:o});case Gl.yG.REBASING:return(0,r.tZ)(uf,{});case Gl.yG.REVERTING:return(0,r.tZ)(df,{});case Gl.yG.CHERRY_PICKING:return(0,r.tZ)(Od,{});case Gl.yG.APPLYING_MAILBOX:return(0,r.tZ)(gs,{});case Gl.yG.BISECTING:return(0,r.tZ)(ys,{});case Gl.yG.DETACHED_HEAD:return(0,r.tZ)($d,{});default:return null}}function kh(e){var t=e.mode,n=e.status,i=e.remotes,o=e.previewBranch,a=e.previewCommit,l=e.currentBranch,c=e.switchMode,s=e.onStagedFileClick,u=e.onViewCommitClick,d=e.gotoPendingState;switch(t){case gc.DASHBOARD:return(0,r.tZ)(qd,{currentBranch:l,switchMode:c});case gc.BRANCH:return(0,r.tZ)(Ud,{status:n,branch:o,remotes:i,onStagedFileClick:s,onViewCommitClick:u,gotoPendingState:d});case gc.CURRENT_BRANCH:return(0,r.tZ)(Ud,{status:n,remotes:i,branch:l,onStagedFileClick:s,onViewCommitClick:u,gotoPendingState:d,current:!0});case gc.SETTINGS:return(0,r.tZ)(qf,{});case gc.COMMIT:return(0,r.tZ)(Zh,{status:n,onViewCommitClick:u,hash:a,switchMode:c});default:(0,Al.Z)(t)}}var Sh=I.Type.Object({type:I.Type.Literal("git")}),Eh={Content:function(e){var t=e.options,n=t.isActive,i=t.performPaneOperation;return(0,r.tZ)(wh,{isActive:n,performPaneOperation:i})},Icon:function(e){var t=e.size;return(0,r.tZ)(Bl.Z,{size:t})},getTitle:function(){return"Git"},decode:function(e){return _.B4.Decode(Sh,e)}},Th=n(80680),Rh=n(77469);function Dh(e){var t=e.reversed,n=void 0!==t&&t,i=e.hideName,o=void 0!==i&&i,l=e.color,c=void 0===l?"default":l,s=(0,Th.bA)(),u=(0,a.useMemo)((function(){return[n?v.l0.rowReverseWithGap(4):v.l0.rowWithGap(4),v.l0.align.center]}),[n]);if(!s)return null;if(0===s.count)return(0,r.BX)(g.G,{css:u,children:[(0,r.tZ)(Rh.Z,{size:24}),(0,r.tZ)(y.xv,{color:c,multiline:!1,children:"Server Authored"})]});var d=s.changes[s.version];if(!s.users)return(0,r.BX)(g.G,{css:u,children:[(0,r.tZ)(Ac.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),o?null:(0,r.tZ)(y.xv,{color:c,multiline:!1,children:"Unknown"})]});var f=s.users[d.userId];return f?(0,r.BX)(g.G,{css:u,children:[(0,r.tZ)(Ac.q,{size:24,src:f.image,username:f.username}),o?null:(0,r.tZ)(y.xv,{color:c,multiline:!1,children:f.username})]}):d.timestamp>16546464e5?(0,r.BX)(g.G,{css:u,children:[(0,r.tZ)(Rh.Z,{size:24}),o?null:(0,r.tZ)(y.xv,{color:c,multiline:!1,children:"Server Authored"})]}):(0,r.BX)(g.G,{css:u,children:[(0,r.tZ)(Ac.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),o?null:(0,r.tZ)(y.xv,{color:c,multiline:!1,children:"Unknown"})]})}function Ih(){var e=(0,hn.Z)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return Ih=function(){return e},e}function _h(){var e=(0,hn.Z)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return _h=function(){return e},e}var Bh=(0,pn.Ps)(Ih());_h();var Gh=n(4821),Ph=n(66091),Ah=n(5683),Nh=n(83451),Uh=n(45347),Lh=function(e){"use strict";(0,Ah.Z)(n,e);var t=(0,Uh.Z)(n);function n(e){var r;return(0,Ph.Z)(this,n),(r=t.call(this,e)).name="UserError",r}return n}((0,Nh.Z)(Error));function Oh(e,t,n){return new Promise((function(r,i){try{var o=e.watchTextFile(t,{onReady:function(){var e=(0,we.Z)((function(e){var t,a;return(0,xe.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,n(e)];case 1:return t=l.sent(),r(t),[3,3];case 2:return a=l.sent(),i(a),[3,3];case 3:return o(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()})}catch(a){i(a)}}))}var Xh,Mh=Gh.I;function Fh(e,t){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,we.Z)((function(e,t){var n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,Z;return(0,xe.__generator)(this,(function(b){switch(b.label){case 0:n=new Set,r=!0,i=!1,o=void 0;try{for(a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&n.add(c.userId)}catch(w){i=!0,o=w}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===n.size?[2,{}]:n.size>=Mh?[2,Xh.TooManyUsersRequestedError]:[4,e.query({query:Bh,variables:{ids:Array.from(n)}})];case 1:if(s=b.sent(),u=s.data,d=s.error)throw d;f=u.currentUser?[u.currentUser].concat((0,ee.Z)(u.usersByIds)):u.usersByIds,h={},p=!0,m=!1,v=void 0;try{for(g=f[Symbol.iterator]();!(p=(y=g.next()).done);p=!0)Z=y.value,h[Z.id]={id:Z.id,username:Z.username,image:Z.image}}catch(w){m=!0,v=w}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}return[2,h]}}))})),Wh.apply(this,arguments)}function Hh(){return Hh=(0,we.Z)((function(e,t,n){var r,i,o;return(0,xe.__generator)(this,(function(a){switch(a.label){case 0:return[4,Oh(e,n,function(){var e=(0,we.Z)((function(e){var t,n;return(0,xe.__generator)(this,(function(r){return t=e.fetchChanges,0===(n=e.version)?[2,{isDisposed:!1,result:[]}]:[2,t(1,n,"")]}))}));return function(t){return e.apply(this,arguments)}}())];case 1:return(r=a.sent()).isDisposed?[2,{data:null,handledError:"File deleted or removed."}]:(i=r.result,[4,Fh(t,i)]);case 2:return(o=a.sent())===Xh.TooManyUsersRequestedError?[2,{data:{changes:i,users:null},handledError:null}]:[2,{data:{changes:i,users:o},handledError:null}]}}))})),Hh.apply(this,arguments)}function Vh(e,t,n){return Oh(e,t,function(){var t=(0,we.Z)((function(t){var r,i,o,a,l,c,s,u,d;return(0,xe.__generator)(this,(function(f){switch(f.label){case 0:if(r=t.fetchChanges,i=t.writeChange,o=t.version,n>o)throw new Error("Cannot restore to a version that does not exist");if(n===o)return[2];a=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,r(1,o,"")];case 2:if((l=f.sent()).isDisposed)throw new Lh("File deleted or removed.");return a=l.result,[3,4];case 3:throw f.sent(),new Lh("Something went wrong while restoring the file. It is possible that a bad connection is to blame. Please try again.");case 4:c=(0,It.Z)(a.slice(n,a.length).reverse()),s=c[0],u=c.slice(1),d=u.reduce((function(e,t){return e.compose(t.invertedChanges)}),s.invertedChanges);try{i(d)}catch(h){throw xl.Tb(h),new Lh("Something went wrong while restoring the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,e.flush()];case 5:return f.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}())}!function(e){e.TooManyUsersRequestedError="too_many_users"}(Xh||(Xh={}));var zh=n(16165),jh=(0,an.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function qh(e){var t=e.onCloseHistory,n=(0,Mn.Z)().showError,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),s=c[0],u=c[1],f=(0,d.Z)().fs,h=(0,Th.bA)(),p=(0,zh.j)(),m="Restore",Z=!0;function b(){return(b=(0,we.Z)((function(){var e,r,i;return(0,xe.__generator)(this,(function(o){switch(o.label){case 0:if(!h||!f||s)return[2];o.label=1;case 1:return o.trys.push([1,3,4,5]),u(!0),(0,zh.p)("versionRestored"),e=h.filePath,r=h.version,[4,Vh(f,e,r+1)];case 2:return o.sent(),t(),[3,5];case 3:return i=o.sent(),(0,Ul.Z)(i,Lh)?(n(i.message),[2]):(p(i,"restore"),[3,5]);case 4:return l(!1),u(!1),[7];case 5:return[2]}}))}))).apply(this,arguments)}return h?0===h.count?(m="No history",Z=!0):s||o?(m="Restoring...",Z=!0):h.playing?(m="Playing...",Z=!0):h.version===h.count-1?(m="Viewing latest",Z=!0):(m="Restore to here",Z=!1):(m="Loading...",Z=!0),(0,r.BX)(r.HY,{children:[(0,r.tZ)(Se.zx,{text:m,disabled:Z,onClick:function(){return l(!0)},colorway:"primary",iconLeft:(0,r.tZ)(gr.Z,{})}),h&&0!==h.count&&(0,r.tZ)(yo.u,{isOpen:o,onRequestClose:function(){s||l(!1)},children:(0,r.BX)(g.G,{css:v.l0.colWithGap(24),children:[(0,r.tZ)(y.h4,{variant:"headerDefault",level:2,children:"Restore file version"}),(0,r.tZ)(De.Tg,{elevated:!0,css:[v.l0.px(16),v.l0.py(12),v.l0.borderRadius(8)],children:(0,r.BX)("dl",{css:jh,children:[(0,r.tZ)("dt",{children:"File"}),(0,r.tZ)("dd",{children:h.filePath}),(0,r.tZ)("dt",{children:"Version"}),(0,r.BX)("dd",{children:[h.version+1,(0,r.BX)("span",{css:[v.l0.color.foregroundDimmest],children:[(0,r.tZ)("span",{css:v.l0.mx(8),children:"/"}),h.count]})]}),(0,r.tZ)("dt",{children:"Date"}),(0,r.tZ)("dd",{children:(0,r.tZ)(jc.EK,{date:h.changes[h.version].timestamp,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Author"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Dh,{})})]})}),(0,r.tZ)(Re.E,{icon:(0,r.tZ)(bi.Z,{}),colorway:"positive",text:"Restoring is non-destructive. The restored content will become a new version at the end of history. You can always go back to the version you just had."}),(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.justify.end],children:[(0,r.tZ)(Se.zx,{text:"Cancel",disabled:s,onClick:function(){return l(!1)}}),(0,r.tZ)(Se.zx,{text:s?"Restoring Version...":"Restore Version",disabled:s,colorway:"primary",onClick:function(){return b.apply(this,arguments)},iconLeft:(0,r.tZ)(gr.Z,{})})]})]})})]})}var $h=n(46266);function Yh(e,t){var n=(0,Th.bA)(),i=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,(function(){return i.current})),n&&i.current&&(i.current.setAttribute("aria-valuemin","1"),i.current.setAttribute("aria-valuemax",String(n.count)),i.current.setAttribute("aria-valuenow",String(n.version+1)));var o=(0,a.useMemo)((function(){return(0,r.tZ)("div",{ref:i,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:v.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(v.TV.foregroundDefault," inset")}}})}),[]);return n&&n.count>1?o:null}var Kh=(0,a.forwardRef)(Yh);function Qh(e,t){var n=(0,Th.bA)(),i=(0,a.useMemo)((function(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:v.TV.backgroundHighest,borderRadius:"2px"},children:(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:v.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})}),[t]),o=(0,a.useMemo)((function(){return(0,r.tZ)("div",{ref:t,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,r.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:v.TV.backgroundHighest,borderRadius:"2px"}})})}),[t]);return n&&n.count>1?i:o}var Jh,ep=(0,a.forwardRef)(Qh),tp=["ArrowLeft","ArrowRight","Home","End"];function np(){var e=(0,Th.bA)(),t=(0,Th._Z)(),n=(0,a.useState)(!1),i=n[0],o=n[1],l=(0,a.useRef)(null),c=(0,a.useRef)(null),s=(0,a.useRef)(null),u=function(e){(0,$h.A)(l,"--scrubber-transition-time",e)},d=function(e){(0,$h.A)(l,"--scrubber-progress",e.toString())};if(e&&!i){var f=e.version/(e.count-1);d(f),e.playing?u("50ms"):u("100ms")}return(0,a.useEffect)((function(){if(e&&c.current&&s.current&&!i){var n=c.current,r=s.current,a=function(i){if(0===i.button){o(!0),r.focus();var a=n.getBoundingClientRect(),l=r.getBoundingClientRect(),c=a.width,s=l.width,f=i.target===n?s/2:i.clientX-l.left,h=null,p=function(n){var r=n-a.left-f,i=Math.max(0,Math.min(1,r/(c-s)));i!==h&&(h=i,d(i),t({version:Math.round(i*(e.count-1)),playing:!1}))};p(i.clientX);var m=function(e){u("0ms"),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),u("100ms"),o(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),i.preventDefault(),i.stopPropagation()}};return n.addEventListener("pointerdown",a),r.addEventListener("pointerdown",a),function(){n.removeEventListener("pointerdown",a),r.removeEventListener("pointerdown",a)}}}),[e,t,i]),(0,a.useEffect)((function(){if(e&&s.current&&!i){var n=s.current,r=function(n){if(e&&tp.includes(n.key)){var r=n.shiftKey?10:1,i=e.version,o=e.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),c=null;switch(n.key){case"ArrowLeft":c=a;break;case"ArrowRight":c=l;break;case"Home":c=0;break;case"End":c=o}null!==c&&(t({version:c,playing:!1}),n.preventDefault(),n.stopPropagation())}};return n.addEventListener("keydown",r),function(){n.removeEventListener("keydown",r)}}}),[e,t,i]),(0,a.useMemo)((function(){return(0,r.BX)(g.G,{innerRef:l,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,r.tZ)(ep,{ref:c}),(0,r.tZ)(Kh,{ref:s})]})}),[])}!function(e){e.None="0ms",e.Normal="100ms",e.Fast="50ms"}(Jh||(Jh={}));var rp=n(57843);function ip(e){var t=(0,a.useState)({data:null,loading:!0,error:null,handledError:null}),n=t[0],r=t[1],i=(0,d.Z)().fs,o=(0,rp.x)();return(0,a.useEffect)((function(){if(e){r({data:null,loading:!0,error:null,handledError:null});var t=!1;return function(e,t,n){return Hh.apply(this,arguments)}(i,o,e).then((function(e){var n=e.data,i=e.handledError;t||r(i?{data:null,loading:!1,error:null,handledError:i}:{data:n,loading:!1,error:null,handledError:null})})).catch((function(e){t||((0,Ul.Z)(e,Error)||(e=new Error(e)),r({data:null,loading:!1,error:e,handledError:null}))})),function(){t=!0}}r({data:null,loading:!1,error:null,handledError:null})}),[e,i,o]),n}function op(e){var t=e.onClose;return(0,r.tZ)(Se.zx,{text:"Cancel",onClick:function(){(0,zh.p)("historyExplicitlyClosed"),t()}})}var ap=n(27430),lp=(0,an.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function cp(){var e,t="/replEnvironmentMobile"===(0,gf.useRouter)().pathname,n=(0,Th.bA)(),i=(0,Th._Z)(),o=(0,oi.U)(),a=!n||0===n.count;return(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center,a?lp:null],children:[(0,r.tZ)(ap.Z,{id:o("diffButton"),isOn:null!==(e=null===n||void 0===n?void 0:n.comparing)&&void 0!==e&&e,onChange:function(e){if(!a){var t=e.target.checked;i({comparing:t})}}}),(0,r.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},v.l0.flex.column,v.l0.align.center],htmlFor:o("diffButton"),children:(0,r.tZ)(y.xv,{multiline:!1,children:t?"Compare":"Compare Latest"})})]})}function sp(){var e=(0,Th.bA)(),t=0,n=0;e&&0!==e.count&&(t=e.version+1,n=e.count);var i=e?"default":"dimmer";return(0,r.BX)(g.G,{css:[v.l0.rowWithGap(4),v.l0.justify.spaceBetween],children:[(0,r.tZ)(y.xv,{css:{minWidth:"2ch",textAlign:"right"},color:i,multiline:!1,children:t}),(0,r.tZ)(y.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,r.tZ)(y.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:n})]})}var up=n(78945),dp=n(74970);function fp(e){if(e<0)throw new Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function hp(){var e,t,n,i,o=(0,Th.bA)(),l=(0,Th._Z)(),c=(null!==(t=null===o||void 0===o||null===(e=o.changes)||void 0===e?void 0:e.length)&&void 0!==t?t:1)-1,s=null!==(n=null===o||void 0===o?void 0:o.version)&&void 0!==n?n:0,u=null!==(i=null===o||void 0===o?void 0:o.playing)&&void 0!==i&&i,d=!o||0===o.count,f=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fp,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useCallback)((function(){t(1)}),[t]),s=(0,a.useCallback)((function(){e+1>n?l(!1):t(e+1)}),[t,e,n]),u=function(){l(!0)},d=function(){l(!1)};return(0,a.useEffect)((function(){if(o){var e=setTimeout((function(){s()}),r(n));return function(){return clearTimeout(e)}}}),[o,s,r,n]),{isPlaying:o,start:u,stop:d,reset:c}}(s,(function(e){return l({version:e})}),c),h=f.isPlaying,p=f.start,m=f.stop;(0,a.useEffect)((function(){h&&!u?m():!h&&u&&p()}),[u,h,p,m]);var v="Loading...";return o&&(h?v="Pause":o.version===o.count-1?v="Play file history from beginning":0===o.version?v="Play file history":o.version>0&&(v="Play file history from here")),(0,r.tZ)(ne.hU,{alt:v,size:24,disabled:d,onClick:function(){l(s===c?{version:0,playing:!0}:{playing:!u})},children:h?(0,r.tZ)(dp.Z,{}):(0,r.tZ)(up.Z,{})})}function pp(){return(0,r.BX)(g.G,{css:[v.l0.rowWithGap(4),v.l0.align.center],children:[(0,r.tZ)(hp,{}),(0,r.tZ)(mp,{}),(0,r.tZ)(sp,{}),(0,r.tZ)(vp,{})]})}function mp(){var e=(0,Th.bA)(),t=(0,Th._Z)(),n=!e||0===e.version||0===e.count;return(0,r.tZ)(ne.hU,{alt:"Move backwards one version",size:24,disabled:n,onClick:function(){e&&e.version>0&&t({version:e.version-1})},children:(0,r.tZ)(uc.Z,{})})}function vp(){var e=(0,Th.bA)(),t=(0,Th._Z)(),n=!e||e.version===e.count-1||0===e.count;return(0,r.tZ)(ne.hU,{alt:"Move forwards one version",size:24,disabled:n,onClick:function(){e&&e.version<e.count-1&&t({version:e.version+1})},children:(0,r.tZ)(re.Z,{})})}function gp(){var e=(0,Th.bA)();if(!e||0===e.count)return null;var t=e.changes[e.version].timestamp;return(0,r.tZ)(jc.EK,{textColor:"dimmer",dateFormat:"switch",date:t})}function yp(e){var t=e.filePath,n=e.onCloseHistory,i="/replEnvironmentMobile"===(0,gf.useRouter)().pathname,o=i?v.l0.borderRadius(0):v.l0.borderRadius(0,0,8,8),l=(0,Th.bA)(),c=(0,Th._Z)(),s=(0,Th.Ai)(),u=(0,zh.j)(),d=ip(t),f=d.data,h=d.loading,p=d.error;return(0,a.useEffect)((function(){if(p)u(p,"history2-index",{filePath:t});else if(f&&!h)return c({filePath:t,changes:f.changes,users:f.users}),(0,zh.p)("historyLoaded"),function(){s()}}),[t,f,h,p,u,c,s]),(0,r.BX)(g.G,{css:[v.l0.colWithGap(8),v.l0.p(8),v.l0.zIndex(3),v.l0.overflow("hidden"),o,v.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(v.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,r.BX)(De.Tg,{css:[v.l0.position.relative,v.l0.colWithGap(4),v.l0.px(12),v.l0.pt(8),v.l0.pb(8),v.l0.align.center,v.l0.borderRadius(8),v.l0.overflow("hidden")],elevated:!0,children:[(0,r.tZ)(np,{}),(0,r.BX)(g.G,{css:[v.l0.display.flex,v.l0.flex.row,v.l0.align.center,v.l0.justify.spaceBetween,v.l0.width("100%")],children:[(0,r.tZ)(pp,{}),l&&l.count>0?(0,r.BX)(g.G,{css:[v.l0.rowWithGap(4),v.l0.align.center],children:[(0,r.tZ)(gp,{}),h||i?null:(0,r.tZ)(y.xv,{color:"dimmer",multiline:!1,children:"\u2022"}),(0,r.tZ)(Dh,{color:"dimmer",hideName:i,reversed:!0})]}):null]})]}),(0,r.BX)(g.G,{css:[v.l0.display.flex,v.l0.flex.row],children:[(0,r.tZ)(Zp,{justify:"flex-start",children:(0,r.tZ)(cp,{})}),(0,r.BX)(Zp,{justify:"flex-end",children:[(0,r.tZ)(op,{onClose:n}),(0,r.tZ)(qh,{onCloseHistory:n})]})]})]})}function Zp(e){var t=e.children,n=e.justify;return(0,r.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:n,columnGap:v.TV.space8,minWidth:0},children:t})}var bp=n(68935),wp=n(52682),xp=n(25183),Cp=n(1292),kp=(0,xp.B)();function Sp(e){if((0,Ul.Z)(e,Vn.YW)){var t=e.state.field(kp.state,!1);return{compareTo:t,changed:e.startState.field(kp.state,!1)!==t}}return{compareTo:e.field(kp.state,!1),changed:!1}}function Ep(e,t){e.state.field(kp.state,!1)!==t&&e.dispatch({effects:kp.effect.of(t)})}var Tp,Rp,Dp=Vn.QQ.define({create:function(){return null},update:function(e,t){var n=Sp(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var o=t.state.doc.toString();return new Cp.PO(o,r)}}),Ip=null!==(Tp=globalThis.requestIdleCallback)&&void 0!==Tp?Tp:globalThis.requestAnimationFrame,_p=null!==(Rp=globalThis.cancelIdleCallback)&&void 0!==Rp?Rp:globalThis.cancelAnimationFrame,Bp=Wn.p.line({class:"cm-diff-deleted"}),Gp=function(e){"use strict";(0,Ah.Z)(n,e);var t=(0,Uh.Z)(n);function n(e,r){var i;return(0,Ph.Z)(this,n),(i=t.call(this)).insertion=e,i.highlight=r,i}var r=n.prototype;return r.destroy=function(){this.pendingHighlight&&_p(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var t=this;return this.pendingHighlight&&(_p(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=Ip((function(){if(t.highlight){t.pendingHighlight=null;try{var n=t.highlight();e.innerHTML="",e.append(n)}catch(r){}}}))),!0},n}(Wn.l9),Pp=Vn.QQ.define({create:function(){return Wn.p.none},update:function(e,t){var n=t.state.field(Dp,!1);if(!n)return Wn.p.none;var r=Sp(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],o=function(e,t){i.push({from:e,to:e,value:t})},a=n.startInsertions();if(a){var l=!0,c=!1,s=void 0;try{for(var u,d=function(){var e=u.value,n=new Gp(e.content,(function(){return Ap(t.state,e.content)}));o(0,Wn.p.widget({widget:n,side:-1,block:!0}))},f=a[Symbol.iterator]();!(l=(u=f.next()).done);l=!0)d()}catch(Z){c=!0,s=Z}finally{try{l||null==f.return||f.return()}finally{if(c)throw s}}}var h=!0,p=!1,m=void 0;try{for(var v,g=function(){var e=v.value;if(e.isDeleted&&o(e.from,Bp),e.insertions){var n=!0,r=!1,i=void 0;try{for(var a,l=function(){var n=a.value,r=new Gp(n.content,(function(){return Ap(t.state,n.content)}));o(e.to,Wn.p.widget({widget:r,side:1,block:!0}))},c=e.insertions[Symbol.iterator]();!(n=(a=c.next()).done);n=!0)l()}catch(Z){r=!0,i=Z}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}}},y=n.lines()[Symbol.iterator]();!(h=(v=y.next()).done);h=!0)g()}catch(Z){p=!0,m=Z}finally{try{h||null==y.return||y.return()}finally{if(p)throw m}}return Wn.p.set(i,!0)},provide:function(e){return Wn.tk.decorations.from(e)}});function Ap(e,t){var n,r=document.createDocumentFragment(),i=null===(n=e.facet(bp.dK))||void 0===n?void 0:n.parser;if(!i){var o=document.createElement("span");return o.textContent=t,r.append(o),r}var a=i.parse(t),l={style:function(t){return(0,bp.QN)(e,t)}},c=0;if((0,wp.bW)(a,l,(function(e,n,i){if(e>c){var o=document.createElement("span");o.textContent=t.slice(c,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=t.slice(e,n),r.append(a),c=n})),c<t.length){var s=document.createElement("span");s.textContent=t.slice(c),r.append(s)}return r}var Np,Up=function(e){"use strict";(0,Ah.Z)(n,e);var t=(0,Uh.Z)(n);function n(e){var r;return(0,Ph.Z)(this,n),(r=t.call(this)).line=e,r}var r=n.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(Wn.SJ),Lp=function(e){"use strict";(0,Ah.Z)(n,e);var t=(0,Uh.Z)(n);function n(e,r){var i;return(0,Ph.Z)(this,n),(i=t.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=n.prototype;return r.eq=function(e){var t,n,r,i;if((null===(t=this.lines)||void 0===t?void 0:t.length)!==(null===e||void 0===e||null===(n=e.lines)||void 0===n?void 0:n.length))return!1;if((null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null===e||void 0===e||null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var s=this.lines[c],u=e.lines[c];if(s.height!==u.height||s.left!==u.left||s.right!==u.right)return!1}return!0},r.toDOM=function(){var e,t=this,n=document.createElement("div");if(this.preceding){var r=this.preceding.slice().reverse(),i=0,o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;i+=u.height;var d=this.piece(u);d.style.position="absolute",d.style.top="-".concat(i,"px"),n.prepend(d)}}catch(h){a=!0,l=h}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}var f=this.lines.map((function(e){return t.piece(e)}));return(e=n).append.apply(e,(0,ee.Z)(f)),n},r.piece=function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(t,"px"),a.append(i,o),null!==n&&null!==r||(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===n&&a.classList.add("cm-diff-gutter-inserted")),a},n}(Wn.SJ),Op=(0,Wn.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=Sp(e.state).compareTo,i=e.state.field(Dp,!1),o=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=e.state.doc.lineAt(d.from).number;if(d.type===Wn.kH.Text)o(d.from,new Up(f));else if(Array.isArray(d.type)){var h=!0,p=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.type===Wn.kH.Text){o(y.from,new Up(f));break}}}catch(ie){p=!0,m=ie}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}}}catch(ie){l=!0,c=ie}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return Vn.Xs.of(n,!0)}var Z=!0,b=!1,w=void 0;try{for(var x,C=t[Symbol.iterator]();!(Z=(x=C.next()).done);Z=!0){var k=x.value,S=[],E=e.state.doc.lineAt(k.from).number,T=i.line(E);if(T){var R,D=e.defaultLineHeight,I=T.offset,_=T.isDeleted,B=T.insertions,G=1===E?i.startInsertions():null,P=G?G.length:0,A=G?[]:null;if(Array.isArray(k.type)&&k.type.length>=P+(null!==(R=null===B||void 0===B?void 0:B.length)&&void 0!==R?R:0)+1){for(var N=0;N<k.type.length;N++){var U=k.type[N];if((null===U||void 0===U?void 0:U.type)===Wn.kH.Text){if(G&&A)for(var L=0;L<G.length;L++){var O,X=G[L],M=k.type[N-L-1];A.push({height:null!==(O=null===M||void 0===M?void 0:M.height)&&void 0!==O?O:D,left:null,right:X.number})}if(S.push({height:U.height,left:E,right:_?null:E+I}),B)for(var F=0;F<B.length;F++){var W,H=B[F],V=k.type[N+F+1];S.push({height:null!==(W=null===V||void 0===V?void 0:V.height)&&void 0!==W?W:D,left:null,right:H.number})}break}}o(k.from,new Lp(S,A))}else{if(G&&A){var z=!0,j=!1,q=void 0;try{for(var $,Y=G[Symbol.iterator]();!(z=($=Y.next()).done);z=!0){var K=$.value;A.push({height:D,left:null,right:K.number})}}catch(ie){j=!0,q=ie}finally{try{z||null==Y.return||Y.return()}finally{if(j)throw q}}}if(S.push({height:k.height,left:E,right:_?null:E+I}),B){var Q=!0,J=!1,ee=void 0;try{for(var te,ne=B[Symbol.iterator]();!(Q=(te=ne.next()).done);Q=!0){var re=te.value;S.push({height:D,left:null,right:re.number})}}catch(ie){J=!0,ee=ie}finally{try{Q||null==ne.return||ne.return()}finally{if(J)throw ee}}}o(k.from,new Lp(S,A))}}}}catch(ie){b=!0,w=ie}finally{try{Z||null==C.return||C.return()}finally{if(b)throw w}}return Vn.Xs.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){if(Sp(i.value).changed)return!0}}catch(a){n=!0,r=a}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new Up(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return Sp(t.state).compareTo?new Lp([{height:0,left:n,right:n}]):new Up(n)}}),Xp="#0053A644",Mp="#c93c3733",Fp=[Wn.tk.theme({".cm-diff-inserted":{backgroundColor:Xp},".cm-diff-deleted":{backgroundColor:Mp},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:Xp,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:Mp,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),kp.state,Dp,Pp,Op,(0,bp.mi)({openText:"\u25bc",closedText:"\u25b6\ufe0e"})],Wp=n(57988),Hp=function(){"use strict";function e(t){var n=this;(0,Ph.Z)(this,e),this.view=t,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],t=n.view.scrollDOM.getBoundingClientRect(),r=n.view.scrollDOM.scrollTop,i=n.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,s=n.elements.values()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=u.dom,f=u.pos,h=u.offsetX,p=u.offsetY,m=n.view.coordsAtPos(f),v=n.view.lineBlockAt(f);if(m){var g=v.top-r+t.top+n.view.documentPadding.top,y=Math.round((m.top-g)/n.view.defaultLineHeight)*n.view.defaultLineHeight+g,Z=i+m.left-t.left+h,b=r+y-t.top+p;e.push({dom:d,x:Z,y:b})}else e.push({dom:d,x:null,y:null})}}catch(w){a=!0,l=w}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return e},write:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=function(){var e=i.value,t=e.dom,n=e.x,r=e.y;if(null===n||null===r)return t.style.visibility="hidden",t.style.transition="none","continue";t.style.visibility="",t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.style.transition.startsWith("none")&&requestAnimationFrame((function(){t.style.transition=""}))},a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)o()}catch(l){n=!0,r=l}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}}var t=e.prototype;return t.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},t.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var t=Array.from(this.elements.values()),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,Vn.gc.TrackDel);c?l.pos=c:this.removeElement(l.dom)}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},t.addElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:t,offsetX:n,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},t.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},t.updateElement=function(e,t){var n=t.pos,r=t.offsetX,i=t.offsetY,o=this.elements.get(e);o&&(void 0!==n&&(o.pos=n),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},t.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();!function(e){e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion"}(Np||(Np={}));var Vp=Symbol.iterator,zp=function(){"use strict";function e(t){(0,Ph.Z)(this,e),this.map=new Map,this.duration=t}var t=e.prototype;return t.set=function(e,t,n,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(t,{from:e,to:t,time:n,type:r,cursor:i})},t.get=function(e,t){var n=this.map.get(e);if(n)return n.get(t)},t.update=function(t){var n=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(!(n-s.time>this.duration)){var u=t.changes.mapPos(s.from,-1,Vn.gc.TrackDel),d=t.changes.mapPos(s.to,-1,Vn.gc.TrackDel);if(null!==u&&null!==d){var f=s.cursor;t.docChanged&&(f=!1),r.set(u,d,s.time,s.type,f)}}}}catch(h){o=!0,a=h}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t.changes.iterChangedRanges((function(e,t,i,o){var a=i!==o?Np.Insertion:Np.Deletion;r.set(i,o,n,a,!0)}),!0),r},t.cursors=function(){var e,t,n,r,i,o,a;return(0,xe.__generator)(this,(function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:return(e=(i=r.next()).done)?[3,5]:(o=i.value).cursor?[4,{type:o.type,pos:o.to}]:[3,4];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,n=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}}))},t[Vp]=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;e.push(f)}}catch(h){c=!0,s=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(h){n=!0,r=h}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e[Symbol.iterator]()},e}(),jp=1e3,qp="cm-flash-insertion",$p="cm-flash-deletion",Yp="cm-flash-element",Kp=Wn.tk.theme((0,i.Z)({},".".concat(qp,", .").concat($p),{display:"inline-block"}));function Qp(e){return Wn.p.mark({class:$p,tagName:Yp,attributes:{"data-time":e.toString()}})}function Jp(e,t){var n=e===Np.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=t,r.style.borderRadius="1px",r.style.backgroundColor=n,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}var em=function(e){"use strict";(0,Ah.Z)(n,e);var t=(0,Uh.Z)(n);function n(){return(0,Ph.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if((0,Ul.Z)(e,n)&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,t;null===(e=this.animation)||void 0===e||null===(t=e.cancel)||void 0===t||t.call(e)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>jp)){var n=this.type===Np.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)",r={backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},i={id:"cm-flash-anim",duration:jp,easing:"ease-in-out",delay:-t};this.animate&&(this.animation=this.animate(r,i))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,t,n){"data-time"===e&&n&&this.play()},(0,Wp.Z)(n,[{key:"type",get:function(){return this.classList.contains(qp)?Np.Insertion:Np.Deletion}},{key:"isPlaying",get:function(){var e;return"running"===(null===(e=this.animation)||void 0===e?void 0:e.playState)}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,Nh.Z)(HTMLElement));customElements.get(Yp)||customElements.define(Yp,em);var tm=function(){"use strict";function e(t){(0,Ph.Z)(this,e),this.view=t,this.prevFlashes=new zp(jp),this.decorations=Wn.p.set([]),this.hasRenderedOnce=!1,this.overlay=new Hp(t)}var t=e.prototype;return t.destroy=function(){this.overlay.destroy()},t.update=function(e){if(this.hasRenderedOnce){var t,n=this.prevFlashes.update(e),r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;switch(s.type){case Np.Insertion:r.push({from:s.from,to:s.to,value:(t=s.time,Wn.p.mark({class:qp,tagName:Yp,attributes:{"data-time":t.toString()}}))});break;case Np.Deletion:var u=e.state.wordAt(s.from);u&&r.push({from:u.from,to:s.to,value:Qp(s.time)})}}}catch(w){o=!0,a=w}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.overlay.clear();var d=this.view.defaultLineHeight.toString()+"px",f=!0,h=!1,p=void 0;try{for(var m,v=n.cursors()[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value,y=g.type,Z=g.pos,b=Jp(y,d);this.overlay.addElement(b,Z)}}catch(w){h=!0,p=w}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}this.prevFlashes=n,this.decorations=Wn.p.set(r,!0)}else e.docChanged&&(this.hasRenderedOnce=!0)},e}(),nm=Wn.lg.fromClass(tm,{decorations:function(e){return e.decorations}}),rm=Vn.Wl.lowest([Kp,nm]),im=n(94468),om=n(73126),am=n(41143),lm=function(){"use strict";function e(t){(0,Ph.Z)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n=!0,r=!1,i=void 0;try{for(var o,a=this,l=function(){var e=o.value,t=e.changes,n=e.invertedChanges,r=null,i=!1;t.iterChangedRanges((function(e,t,n,o){i||(r||(r=o),n!==o&&(i=!0))})),a.forward.push(t),a.inverted.push(n),a.locations.push(r)},c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)l()}catch(s){r=!0,i=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}}var t=e.prototype;return t.slice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(e>this.length||t>this.length||e<0||t<0)throw new Error("Invalid version range");if(e===t){if(0===this.length)return[Vn.as.empty(0),null];var n=this.forward[e].newLength;return[Vn.as.empty(n),null]}var r,i=cm(e<t?this.forward.slice(e,t):this.inverted.slice(t,e).reverse()),o=e<t?e:t-1,a=null!==(r=this.locations[o])&&void 0!==r?r:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},t.get=function(e){if(e>this.length||e<0)throw new Error("Invalid version");return this.changes[e]},t.documentFor=function(e){if(e>this.length||e<0)throw new Error("Invalid version");if(0===this.length)return"";var t=(0,o.Z)(this.slice(0,e),1)[0],n=Vn.xv.of([""]);return t.apply(n).sliceString(0)},(0,Wp.Z)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function cm(e){if(0===e.length)return Vn.as.empty(0);if(1===e.length)return e[0];var t=(0,It.Z)(e),n=t[0],r=t.slice(1),i=n,o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;i=i.compose(u)}}catch(d){a=!0,l=d}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i}function sm(e,t){var n=(0,a.useMemo)((function(){return(null===t||void 0===t?void 0:t.changes)?new lm(t.changes):null}),[null===t||void 0===t?void 0:t.changes]),r=(0,a.useMemo)((function(){return n?n.documentFor(n.length):null}),[n]),i=(0,a.useRef)({current:-1,next:0,pending:!1});(0,a.useEffect)((function(){if(e)return function(){i.current.pending=!1,i.current={current:-1,next:0,pending:!1}}}),[e]),(0,a.useEffect)((function(){if(e&&t&&n){t.comparing?Ep(e,r):Ep(e,null);var a=i.current;a.next=t.version,a.pending||a.current===a.next||(a.pending=!0,requestAnimationFrame((function(){!1!==a.pending&&(a.pending=!1,e&&n&&a.current!==a.next&&(!function(e,t,n,r){var i=(0,o.Z)(t.slice(n+1,r+1),2),a=i[0],l=i[1];if(a.length!==e.state.doc.length){var c=(0,o.Z)(t.slice(0,r+1),1)[0];if(c.length!==e.state.doc.length)throw new Error("Unresolvable mismatch between changes and document");return e.dispatch({changes:{from:0,to:e.state.doc.length}}),void e.dispatch({changes:c})}e.dispatch({changes:a,effects:l?Wn.tk.scrollIntoView(l,{yMargin:10}):void 0})}(e,n,a.current,a.next),a.current=a.next))})))}}),[e,t,n,r])}var um=n(1235),dm=[rm,Fp];function fm(e){var t=e.filePath,n=(0,Th.bA)(),i=(0,Hr.Z)(),o=i.ref,a=i.view;(0,im.VD)(a),(0,Th._H)(a);var l=(0,zh.j)();(0,om.Y)({view:a}),sm(a,n);var c=(0,gf.useRouter)(),s=(0,X.Vg)(c),u=um.U.use(s);return(0,r.tZ)("div",{css:am.ev,children:(0,r.tZ)("div",{css:am.ac,children:n&&0===n.count?(0,r.tZ)(hm,{}):(0,r.tZ)("div",{css:am.ac,children:(0,r.tZ)(Wr.ZP,{ref:o,css:am.Mp,filePath:t,extensions:[u,dm],initializing:!n,onException:function(e){l(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function hm(){return(0,r.tZ)("div",{css:[am.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,r.tZ)("span",{children:"This file has no history."})})}var pm=I.Type.Object({type:I.Type.Literal("history"),data:I.Type.Object({path:I.Type.Union([I.Type.String(),I.Type.Null()])})}),mm={Content:function(e){var t=e.pane,n=e.options;return(0,r.tZ)(vm,(0,be.Z)((0,Ze.Z)({},t.data),{performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.size;return(0,r.tZ)(gr.Z,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat((0,D.UO)(e.data.path)):"History - no file open"},decode:function(e){return _.B4.Decode(pm,e)}};function vm(e){var t=e.path,n=e.performPaneOperation,i=(0,a.useState)((function(){return(0,ce.MT)()}))[0],o=(0,a.useState)((function(){return(0,ce.MT)()}))[0],l=(0,bt.Mp)({path:t,performPaneOperation:n});(0,x.L5)((function(){if(l)return{commands:l}}),[l]);var c=(0,mt.Z)((function(){return function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}}),[t,n]);return t?(0,r.tZ)(im.Cl.Provider,{value:i,children:(0,r.tZ)(Th.ox.Provider,{value:o,children:(0,r.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,r.tZ)(bt.HK,{path:t,performPaneOperation:n}),(0,r.tZ)(fm,{filePath:t}),(0,r.tZ)(yp,{filePath:t,onCloseHistory:c})]})})}):null}var gm=n(62385),ym=n(32681),Zm=n.n(ym),bm=n(27352),wm=n(2462),xm=(0,Z.X)({create:[v.l0.colWithGap(8),v.l0.p(8)],pedit:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0},upgradeButton:[v.l0.position.absolute,v.l0.top(8),v.l0.left("50%"),{transform:"translateX(-50%)"}]});function Cm(e){var t=e.data,n=e.onSave,i=a.useRef(null),l=a.useRef(null),c=(0,d.Z)().fs,s=(0,Mn.Z)(),u=s.showError,h=s.showConfirm,p=(0,o.Z)(a.useState(!1),2),m=p[0],v=p[1],g=(0,f.Z)((function(){var e=i.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return a.useEffect((function(){var e=i.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var r=Zm()({canvas:e,data:t}),o=function(){return n(r.save())};return r.on("change",o),r.on("save",o),r.on("export",(function(){return v(!0)})),l.current=r,e.focus(),function(){r&&r.cleanUp(),l.current&&(l.current=null)}}}),[t,n,i]),(0,r.BX)(r.HY,{children:[(0,r.tZ)("canvas",{css:xm.canvas,ref:function(e){i.current=e,g(e)},tabIndex:0}),(0,r.tZ)(yo.u,{isOpen:m,onRequestClose:function(){return v(!1)},children:(0,r.tZ)(bm.Z,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return v(!1)},onConfirm:function(e){if(l.current){var t="".concat(e,".png"),n=l.current.curFrame().toPNG();c.writeFile(t,ii.Z.from(n)).then((function(e){e.error?u("Failed to write to file ".concat(t)):(h("Successfully exported to ".concat(t)),v(!1))}))}else v(!1)}})})]})}function km(e){var t=e.activeFile,n=(0,d.Z)().fs,i=(0,o.Z)(a.useState(!0),2),l=i[0],c=i[1],s=(0,o.Z)(a.useState(null),2),u=s[0],f=s[1],h=(0,Mn.Z)().showError,p=t.endsWith(".kbmsprite");a.useEffect((function(){var e=!1;function r(){return(r=(0,we.Z)((function(){var r,i,o;return(0,xe.__generator)(this,(function(a){switch(a.label){case 0:return[4,n.readFile(t)];case 1:return r=a.sent(),c(!1),e?[2]:r.error?(h("failed to read ".concat(t)),[2]):(i=r.content.toString(),o=i&&JSON.parse(i),f(p?(0,wm.C)(o):o),[2])}}))}))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){e=!0}}),[n,t,h,p]);var m=a.useCallback(function(){var e=(0,we.Z)((function(e){return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return p?[4,(0,wm.u)(e)]:[3,2];case 1:e=r.sent(),r.label=2;case 2:return[4,n.writeFile(t,ii.Z.from(JSON.stringify(e)))];case 3:return r.sent().error&&h("Failed to save ".concat(t,", please try again")),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[n,t,h,p]);return l?(0,r.tZ)(oe.Z,{}):u?(0,r.tZ)(Cm,{data:u,onSave:m}):(0,r.tZ)(Sm,{onCreate:function(e){return f(e)}})}function Sm(e){var t=e.onCreate,n=(0,o.Z)(a.useState(""),2),i=n[0],l=n[1],c=(0,o.Z)(a.useState(""),2),s=c[0],u=c[1],d=Number(i),f=Number(s),h=d>0&&f>0;return(0,r.BX)(g.G,{css:xm.create,children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,r.tZ)(_t.II,{placeholder:"width",value:i,onChange:function(e){return l(e.target.value)}}),(0,r.tZ)(_t.II,{placeholder:"height",value:s,onChange:function(e){return u(e.target.value)}}),(0,r.tZ)(Se.zx,{text:"Create",disabled:!h,onClick:function(){t({width:Math.ceil(d),height:Math.ceil(f)})}})]})}var Em=I.Type.Object({type:I.Type.Literal("pedit"),data:I.Type.Object({path:I.Type.String()})}),Tm={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,r.tZ)(Rm,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,r.tZ)(gm.Z,{size:t})},getTitle:function(e){return(0,D.UO)(e.data.path)},decode:function(e){return _.B4.Decode(Em,e)}};function Rm(e){var t=e.path,n=e.performPaneOperation,i=(0,bt.Mp)({path:t,performPaneOperation:n});return(0,x.L5)((function(){if(i)return{commands:i}}),[i]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(bt.HK,{path:t,performPaneOperation:n}),(0,r.tZ)(bt.VY,{children:(0,r.tZ)(km,{activeFile:t})})]})}var Dm=n(66600),Im=n(25602),_m=I.Type.Object({type:I.Type.Literal("unitTests")}),Bm={Content:function(e){var t=e.options,n=function(){var e=i().find((function(e){var t=(0,o.Z)(e,2);t[0];return"runnerOutput"===t[1].type}));if(e)return e[0]},i=(0,Im.nC)(),a=(0,x.dr)();return(0,r.tZ)(g.G,{css:[v.l0.p(8),A.F3],children:(0,r.tZ)(Dm.Z,{getRunnerOutput:function(){var e=n();if(e||t.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=n()){var r=a(e);if("runnerOutput"===(null===r||void 0===r?void 0:r.type))return r}}})})},Icon:function(e){var t=e.size;return(0,r.tZ)(Fn.Z,{size:t})},getTitle:function(){return"Unit Tests"},decode:function(e){return _.B4.Decode(_m,e)}},Gm=n(64309),Pm=n(24430),Am=n(8367),Nm=n(5687),Um=n(83389),Lm=n(94821),Om=n(80509),Xm=n(1926),Mm=function(e){var t=e.title,n=e.json,i=e.initialExpanded,o=void 0===i||i,l=(0,a.useState)(o),c=l[0],s=l[1];return(0,r.tZ)(nn.Q,{expanded:c,onClick:function(){return s((function(e){return!e}))},headerContent:(0,r.tZ)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,r.tZ)(g.G,{css:[v.l0.p(12),v.l0.colWithGap(8),v.l0.height("100%")],children:(0,r.tZ)(Lm.Z,{json:n})})})},Fm=function(e){var t=e.title,n=e.text,i=(0,a.useState)(!0),o=i[0],l=i[1];return(0,r.tZ)(nn.Q,{expanded:o,onClick:function(){return l((function(e){return!e}))},headerContent:(0,r.tZ)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,r.tZ)(g.G,{css:[v.l0.p(12),v.l0.colWithGap(8),v.l0.height("100%")],children:(0,r.tZ)(y.xv,{variant:"small",css:[v.l0.fontSize(16),{whiteSpace:"pre-wrap"}],children:n})})})},Wm=n(12443),Hm=n(18950),Vm=n(71844),zm=n(95614);function jm(){var e=(0,hn.Z)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return jm=function(){return e},e}var qm={},$m=(0,pn.Ps)(jm());function Ym(e){var t=e.event,n=t.input,i=t.output,o=t.error,l=t.start,c=t.end,s=t.cached,u=(0,a.useState)(!0),d=u[0],f=u[1],h=(0,a.useCallback)((function(){return f((function(e){return!e}))}),[]),p="bash"===n[0]&&"-c"===n[1]?n.slice(2).join(" "):n.join(" "),m=i.trimEnd();return(0,r.BX)(g.G,{css:[(0,Vm.ec)(o?"negative":"positive"),s?{opacity:.75}:void 0,v.l0.borderRadius(8)],children:[(0,r.BX)(g.G,{onClick:h,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||h()},tabIndex:0,css:[v.l0.rowWithGap(4),v.l0.justify.spaceBetween,v.l0.py(4),v.l0.px(8),v.l0.font.code,v.l0.cursor.pointer],children:[(0,r.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",p]}),(0,r.BX)("span",{css:[v.l0.color.foregroundDimmer,v.l0.flex.shrink(0)],children:[o?(0,r.tZ)("span",{css:[v.l0.mr(16)],children:o}):null,s?(0,r.tZ)("span",{children:"CACHED"}):(0,r.BX)("span",{children:[c-l," ms"]})]})]}),d?null:(0,r.tZ)(g.G,{css:[v.l0.px(2),v.l0.pb(2),v.l0.borderRadius(0,0,8,8)],children:(0,r.tZ)(De.Tg,{elevated:!0,css:[v.l0.p(8),v.l0.borderRadius(8)],children:(0,r.tZ)(Hm.Z,{code:m})})})]})}var Km=n(2607),Qm=n(68282),Jm=n(88437);function ev(e){var t=e.t,n=e.children;return(0,r.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,r.BX)(y.xv,{css:{minWidth:"8em"},multiline:!1,children:[t,":"," "]}),(0,r.tZ)("span",{children:n})]})}var tv=n(37594),nv=n(65592);function rv(e){return"in"===e.dir?(0,r.tZ)(g.G,{css:v.l0.color.greenStrongest,children:"\u2192"}):"out"===e.dir?(0,r.tZ)(g.G,{css:v.l0.color.redStrongest,children:"\u2190"}):(0,r.tZ)(g.G,{css:v.l0.color.magentaStrongest,children:"\u26a0"})}var iv=a.memo((function(e){var t,n=e.log,i=e.filters,l=e.timeRef,c=e.setTimeRef,s=i.highlightOnly&&(0,tv.cF)(n,i),u=null!==(t=n.cmd.channel)&&void 0!==t?t:0,d=(0,a.useMemo)((function(){var e=(0,Ze.Z)({},n.cmd);return delete e.channel,e}),[n]),f=JSON.stringify(d,null,2),h=l?n.timestamp-l:n.timestamp,p=(0,o.Z)((0,Jm.Z)(!0),2),m=p[0],Z=p[1];return(0,r.BX)(g.G,{css:[v.l0.my(4),v.l0.mx(4)],children:[(0,r.tZ)(g.G,{role:"button",onClick:Z,onKeyDown:Z,tabIndex:0,css:[s?v.l0.backgroundColor.accentPositiveDimmer:null,v.l0.flex.row,v.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],children:(0,r.BX)(g.G,{css:[v.l0.flex.grow(1),v.l0.rowWithGap(4),{maxWidth:"100%"}],children:[(0,r.tZ)(y.xv,{className:"icon",multiline:!1,children:rv(n)}),(0,r.tZ)(y.xv,{className:"link",multiline:!1,children:(0,r.BX)("code",{children:["#",u," - ",n.channel.service,n.channel.name?"::".concat(n.channel.name):""]})}),(0,r.tZ)(y.xv,{css:[v.l0.flex.growAndShrink(1),{opacity:.5}],multiline:!1,children:(0,r.tZ)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:f})}),null!=h&&(0,r.tZ)(g.G,{onClick:function(){c(n.timestamp)},css:{opacity:.5},children:(0,r.tZ)(y.xv,{css:[v.l0.fontSize(13),{cursor:"pointer"}],multiline:!1,children:n.timestamp===l?"(reference)":(0,r.BX)(r.HY,{children:[h.toFixed(0)," ms"]})})})]})}),!m&&(0,r.tZ)(r.HY,{children:void 0!==d&&(0,r.tZ)(nv.g,{name:"cmd",src:d})})]})})),ov=(0,a.memo)((function(e){var t=e.logs,n=e.filters,i=e.timeRef,o=e.setTimeRef,l=(0,a.useRef)(null),c=(0,Lu.MG)({count:t.length,getScrollElement:function(){return l.current},estimateSize:function(){return 28},overscan:10});return(0,r.BX)("div",{ref:l,className:"log-list",children:[(0,r.tZ)("div",{style:{height:"".concat(c.getTotalSize(),"px"),width:"100%",position:"relative"},children:c.getVirtualItems().map((function(e){return(0,r.tZ)("div",{"data-index":e.index,ref:c.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(".concat(e.start,"px)")},children:(0,r.tZ)(iv,{log:t[e.index],filters:n,timeRef:i,setTimeRef:o})},e.key)}))}),(0,r.tZ)("div",{className:"bottom-anchor"})]})}));function av(e){return"in"===e||"out"===e||""===e}var lv=function(e){var t=e.filters,n=e.updateFilters;return(0,r.BX)(g.G,{css:v.l0.colWithGap(4),children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,r.tZ)(_t.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,o.Z)(e.currentTarget.value.split(","),2),i=r[0],a=r[1];try{t=new RegExp(i,a)}catch(l){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,r.tZ)(hf.E,{css:v.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t=e.target.value;n({direction:av(t)?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8)],children:[(0,r.tZ)(hf.Y,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))}),(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,r.tZ)(hf.E,{css:v.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8)],children:[(0,r.tZ)(hf.Y,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))})]})},cv=n(48306),sv=n.n(cv),uv=n(31146),dv=n(51971),fv=n(74906),hv=n(95161),pv=n(52544),mv=n(20643);function vv(){var e=(0,hn.Z)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return vv=function(){return e},e}function gv(){var e=(0,hn.Z)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return gv=function(){return e},e}var yv={},Zv=(0,pn.Ps)(vv()),bv=(0,pn.Ps)(gv(),Zv);var wv=n(46350),xv=n(47726),Cv=n(7131);function kv(e){var t=e.sessionId,n=(0,a.useState)(!1),i=n[0],o=n[1],l=(0,a.useState)(""),c=l[0],s=l[1],u=(0,a.useState)(!1),d=u[0],f=u[1],h=(0,Mn.Z)().showConfirm,p=(0,oi.U)();return null==t?(0,r.tZ)(g.G,{children:(0,r.tZ)(y.xv,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,r.BX)(g.G,{css:[v.l0.colWithGap(8)],children:[(0,r.BX)(y.xv,{variant:"small",multiline:!1,children:["RUM Session ID: ",t]}),(0,r.tZ)(y.xv,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,r.BX)(g.G,{css:[v.l0.colWithGap(16)],children:[(0,r.tZ)(_t.B,{id:p("message"),placeholder:"What can we do better?",value:c,onChange:function(e){return s(e.target.value)},disabled:i}),(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8)],children:[(0,r.tZ)(Yd.X,{id:p("issueInRecording"),checked:d,onChange:function(e){return f(e.target.checked)}}),(0,r.tZ)("label",{htmlFor:p("issueInRecording"),children:(0,r.tZ)(y.xv,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,r.tZ)(Se.zx,{onClick:function(){var e=Ar()();o(!0),(0,Cv.fc)({name:"replitOnReplit:issue",context:{message:c,issueInRecording:d,customEventId:e}}),h("Issue submitted! Have a cookie \ud83c\udf6a",5e3),setTimeout((function(){o(!1),s(""),f(!1)}),5e3)},text:"Submit",disabled:i||0===c.trim().length,colorway:"primary"})]})]})}var Sv,Ev;!function(e){e.Repl="repl",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.GhostwriterChat="aiChat",e.AST="ast",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override",e.DDRum="rum"}(Sv||(Sv={}));var Tv=(Ev={},(0,i.Z)(Ev,Sv.Repl,(function(){var e,t,n,i,o,a,l,c,s=(0,fn.Z)(),u=function(e){var t=(0,Ze.Z)({},yv,e);return mn.a(bv,t)}({variables:{replId:s}}).data,d="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)?JSON.parse(JSON.stringify(u.repl)):void 0;d&&(delete d.__typename,null===(e=d.user)||void 0===e||delete e.__typename,null===(t=d.origin)||void 0===t||delete t.__typename,delete d.config.__typename,null===(n=d.source)||void 0===n||delete n.__typename,null===(i=d.source)||void 0===i||null===(o=i.release)||void 0===o||delete o.__typename,null===(a=d.source)||void 0===a||null===(l=a.release)||void 0===l||null===(c=l.repl)||void 0===c||delete c.__typename);return(0,r.BX)(g.G,{css:[v.l0.colWithGap(16),v.l0.p(4)],children:[(0,r.tZ)(wv.Z,{replId:s}),(0,r.tZ)("div",{className:"jsx-3187c500f6b377b0",children:d?(0,r.tZ)(Lm.Z,{json:d}):null}),(0,r.tZ)(sv(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,i.Z)(Ev,Sv.Logs,(function(e){var t=e.isHidden,n=(0,o.Z)((0,Jm.Z)(!1),2),i=n[0],l=n[1],c=(0,a.useState)(null),s=c[0],u=c[1],d=(0,se.Dv)(tv.Sj),f=(0,o.Z)((0,se.KO)(tv.a0),2),h=f[0],p=f[1],m=(0,o.Z)((0,se.KO)(tv.ot),2),y=m[0],Z=m[1],b=(0,se.b9)(tv.UB);return t?null:(0,r.BX)(g.G,{css:[v.l0.colWithGap(8)],children:[(0,r.BX)(g.G,{css:[v.l0.colWithGap(8),v.l0.position.sticky,v.l0.top(0),v.l0.px(4),v.l0.pb(8),{"z-index":3},v.l0.backgroundColor.backgroundDefault],children:[(0,r.tZ)(Se.zx,{colorway:h?void 0:"positive",onClick:function(){p((function(e){return!e}))},text:h?"Stop logging goval":"Start logging goval"}),(0,r.BX)(g.G,{css:[v.l0.rowWithGap(4),v.l0.justify.spaceBetween],children:[(0,r.tZ)(Se.zx,{onClick:l,text:i?"Hide filters":"Show filters"}),s?(0,r.tZ)(Se.zx,{onClick:function(){return u(null)},text:"Reset Time Ref"}):null,(0,r.tZ)(ne.hU,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(d)),t=document.createElement("a");t.setAttribute("href",e);var n=(new Date).toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,r.tZ)(Ne.Z,{})}),(0,r.tZ)(Se.zx,{colorway:"negative",onClick:function(){return b()},text:"Clear logs"})]}),i?(0,r.tZ)(lv,{filters:y,updateFilters:function(e){Z((0,Ze.Z)({},y,e))}}):null]}),(0,r.tZ)(ov,{logs:d,filters:y,timeRef:s,setTimeRef:u})]})})),(0,i.Z)(Ev,Sv.LSP,nv.L),(0,i.Z)(Ev,Sv.AI,Wm.ho),(0,i.Z)(Ev,Sv.GhostwriterChat,(function(){var e=(0,Um.v)(),t=(0,fn.Z)(),n=(0,Xm.ub)(),i=(0,Cn.R3)(),l=(0,Pm.Og)(),c=(0,Pm.Cd)(),s=(0,o.Z)((0,Om.Kz)(),1)[0],u=(0,o.Z)((0,Om.u0)(),1)[0],f="chat-".concat(n,".json"),h=(0,a.useState)(".ghostwriter/".concat(f)),p=h[0],m=h[1],Z=(0,d.Z)().fs,b=(0,Mn.Z)().showError,w=(0,o.Z)((0,Pm.zu)(),2),x=w[0],C=w[1],k=(0,a.useCallback)((function(){return JSON.stringify({chatModel:e,chatSessionId:n,replId:t,messages:x},null,2)}),[e,n,t,x]),S=(0,a.useCallback)((0,we.Z)((function(){var e,t,n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:e=k(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Z.writeFile(p,ii.Z.from(e))];case 2:if((t=r.sent()).error)throw new Error("fs error: ".concat(t.error));return[3,4];case 3:return n=r.sent(),b(n.message),[3,4];case 4:return[2]}}))})),[k,Z,p,b]),E=(0,a.useCallback)((0,we.Z)((function(){var e,t,n;return(0,xe.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Z.readFile(p)];case 1:if((e=r.sent()).error)throw new Error("fs error: ".concat(e.error));if(t=JSON.parse(e.content.toString()),!Array.isArray(t.messages))throw new Error("invalid chat JSON");return C(t.messages),[3,3];case 2:return n=r.sent(),b(n.message),[3,3];case 3:return[2]}}))})),[p,Z,C,b]);return(0,r.tZ)(g.G,{css:v.l0.height("100%"),children:(0,r.BX)(Gm.mQ,{css:[{width:"100%"}],children:[(0,r.BX)(Gm.td,{withDividers:!1,children:[(0,r.tZ)(Gm.OK,{iconLeft:(0,r.tZ)(Am.Z,{}),children:"File Context"}),(0,r.tZ)(Gm.OK,{iconLeft:(0,r.tZ)(Am.Z,{}),children:"Debugger"}),(0,r.tZ)(Gm.OK,{iconLeft:(0,r.tZ)(Nm.Z,{}),children:"Messages"})]}),(0,r.BX)(Gm.nP,{children:[(0,r.BX)(Gm.x4,{children:[(0,r.tZ)(Mm,{title:"active file",json:i}),(0,r.tZ)(Mm,{title:"last stop reason",json:c}),(0,r.tZ)(Fm,{title:"last prompt",text:l?JSON.stringify(JSON.parse(l),void 0,2):""})]}),(0,r.BX)(Gm.x4,{children:[(0,r.tZ)(Mm,{title:"buffered output",json:s}),(0,r.tZ)(Mm,{title:"debug error context",json:u})]}),(0,r.tZ)(Gm.x4,{children:(0,r.BX)(g.G,{css:[v.l0.colWithGap(8),v.l0.m(8)],children:[(0,r.BX)(De.Tg,{background:"higher",css:[v.l0.borderRadius(8),v.l0.colWithGap(8),v.l0.p(8)],children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Chat History"}),(0,r.tZ)(_t.II,{type:"text",value:p,onChange:function(e){m(e.target.value)}}),(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.flex.wrap],children:[(0,r.tZ)(Se.zx,{text:"Download",colorway:"primary",iconLeft:(0,r.tZ)(Ne.Z,{}),onClick:function(){var e=k(),t="data:text/json;charset=utf-8,"+encodeURIComponent(e),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","".concat(f)),n.click()}}),(0,r.tZ)(Se.zx,{text:"Save to Repl",onClick:S,iconLeft:(0,r.tZ)(Ne.Z,{})}),(0,r.tZ)(Se.zx,{text:"Load from Repl",onClick:E,iconLeft:(0,r.tZ)(ku.Z,{})})]})]}),(0,r.BX)(g.G,{css:[v.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:v.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatModel",children:"Chat Model"}),(0,r.tZ)(_t.II,{id:"gw-debug-chatModel",type:"text",readOnly:!0,value:e})]}),(0,r.BX)(g.G,{css:[v.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:v.l0.color.foregroundDimmer,htmlFor:"gw-debug-replId",children:"Repl Id"}),(0,r.tZ)(_t.II,{id:"gw-debug-replId",type:"text",readOnly:!0,value:t})]}),(0,r.BX)(g.G,{css:[v.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:v.l0.color.foregroundDimmer,htmlFor:"gw-debug-sessionId",children:"Session Id"}),(0,r.tZ)(_t.II,{id:"gw-debug-sessionId",type:"text",readOnly:!0,value:n})]})]})})]})]})})})),(0,i.Z)(Ev,Sv.AST,om.Z),(0,i.Z)(Ev,Sv.Git,(function(){var e=(0,a.useState)([]),t=e[0],n=e[1],i=function(e){var t=(0,Ze.Z)({},qm,e);return mn.a($m,t)}().data,o=(0,L.Z)(zm.e);return(0,a.useEffect)((function(){o&&n((function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,ee.Z)(e)).slice(0,100)}))}),[o]),(0,r.BX)(g.G,{css:[v.l0.p(8)],children:[(0,r.BX)(De.Tg,{elevated:!0,css:[v.l0.borderRadius(8),v.l0.p(8),v.l0.mb(8)],children:[(0,r.tZ)("span",{children:"Git Service Connection Info"}),(0,r.tZ)("pre",{children:(null===i||void 0===i?void 0:i.currentUser)?JSON.stringify(i,(function(e,t){return"accessToken"===e?"censored":t}),2):"No gitHubInfo"})]}),(0,r.tZ)(g.G,{css:[v.l0.colWithGap(4)],children:t.length?t.map((function(e){return(0,r.tZ)(Ym,{event:e},e.key)})):"No events yet..."})]})})),(0,i.Z)(Ev,Sv.History2,(function(){var e=(0,L.Z)(Th.BI)(),t=(0,L.Z)(Th.Jp)(),n=(0,o.Z)((0,Jm.Z)(!1),2),i=n[0],a=n[1];if(!e)return null;var l=e.filePath,c=e.changes,s=e.users,u=e.version,d=e.playing,f=e.count,h=c[u];if(!h)return(0,r.BX)(g.G,{children:[(0,r.BX)("div",{children:["Change at ",u," not found. Here's the state"]}),(0,r.tZ)("pre",{children:JSON.stringify(e,null,2)})]});var p=null===s||void 0===s?void 0:s[h.userId],m=h.timestamp,y=i&&t?function(e,t){try{return(0,Qm.ed)(e,t).op}catch(n){return n}}(h.changes,t.state.doc.sliceString(0)):null;return(0,r.BX)(g.G,{css:[v.l0.colWithGap(16),v.l0.p(4)],children:[(0,r.BX)(g.G,{css:[v.l0.colWithGap(4)],children:[(0,r.tZ)(ev,{t:"File",children:(0,r.tZ)("pre",{children:l})}),(0,r.BX)(ev,{t:"Version",children:[u," / ",f-1]}),(0,r.tZ)(ev,{t:"Playing",children:(0,r.tZ)(Km.Z,{children:d?"true":"false"})}),(0,r.tZ)(ev,{t:"Date",children:(0,r.tZ)(jc.EK,{date:m})})]}),p?(0,r.BX)(g.G,{children:[(0,r.tZ)(ev,{t:"Author",children:p.username}),(0,r.BX)(g.G,{css:[v.l0.pl(8),v.l0.colWithGap(4)],children:[(0,r.tZ)(ev,{t:"ID",children:p.id}),(0,r.tZ)(ev,{t:"Name",children:p.username}),(0,r.tZ)(ev,{t:"Image",children:(0,r.tZ)("a",{href:p.image,children:p.image})})]})]}):null,(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,r.tZ)(ap.Z,{id:"toggleIsShowingChanges",isOn:i,onChange:a}),(0,r.tZ)("label",{children:"Changes"})]}),h?null:"No changes",i&&h?(0,r.tZ)(r.HY,{children:(0,r.BX)(g.G,{children:[(0,r.tZ)(ev,{t:"Changeset",children:(0,r.tZ)("pre",{children:JSON.stringify(h,null,2)})}),t?(0,r.tZ)(r.HY,{children:(0,r.BX)(g.G,{css:[v.l0.mt(4)],children:[(0,r.tZ)(ev,{t:"OT",children:(0,r.tZ)("pre",{children:JSON.stringify(y,null,2)})}),(0,r.tZ)("p",{children:(0,r.BX)("small",{children:["Note that the OT value is translated ",(0,r.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})})),(0,i.Z)(Ev,Sv.Metadata,(function(){var e=(0,d.Z)().container;(0,dv.Z)();var t=e.getConnectionMetadata();if(!t)return(0,r.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,i=new URL(t.conmanURL).host,o='./conman-repl -t "'.concat(n,'" -u ').concat(i);return(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,r.BX)(g.G,{css:v.l0.rowWithGap(2),children:[(0,r.BX)(y.xv,{css:v.l0.flex.shrink(1),multiline:!1,children:["conman Repl command: ",(0,r.tZ)(Km.Z,{children:o})]}),(0,r.tZ)(ne.hU,{alt:"Copy to clipboard",onClick:function(){return(0,At.Z)(o)},children:(0,r.tZ)(ni.Z,{})})]}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(t,null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,uv.he)(t.token),null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)(sv(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,i.Z)(Ev,Sv.Override,(function(){var e=(0,o.Z)(a.useState(fv.Z.get("gurl","string")||""),2),t=e[0],n=e[1],i=(0,o.Z)(a.useState(""),2),l=i[0],c=i[1],s=function(){var e=(0,se.b9)(Ji),t=(0,se.b9)(eo);return(0,a.useCallback)((function(n){if(!n)return e(null),void t(null);e({connectionString:n,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase",isBackedByCycles:!0}),t(n)}),[t,e])}(),u=""===t?"null":JSON.stringify((0,mv.t)(t),null,2);return(0,r.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,r.tZ)(hv.ZP,{label:"Custom gurl",placeholder:"ws://localhost:8080",value:t,onChange:function(e){return n(e.currentTarget.value)}}),(0,r.BX)("pre",{children:["metadata override preview:",u]}),(0,r.tZ)("br",{}),(0,r.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.tZ)(pv.Z,{color:"positive",onClick:function(){fv.Z.set("gurl",t),window.location.reload()},children:"Set gurl and reload"}),(0,r.tZ)(pv.Z,{color:"yellow",onClick:function(){fv.Z.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},children:"Switch to canary & reload"}),(0,r.tZ)(pv.Z,{color:"orange",onClick:function(){fv.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),(0,r.tZ)("div",{children:fv.Z.get("gurl","string")?"currently in localStorage: ".concat(fv.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),"Gurl order of precedence:",(0,r.BX)("ol",{style:{margin:20},children:[(0,r.tZ)("li",{children:"\u2018gurl\u2019 in localStorage (set above)"}),(0,r.BX)("li",{children:["If in development webapp and a there\u2019s a response from",(0,r.tZ)("code",{children:"https://currenthost:4563"})," or",(0,r.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,r.BX)("li",{children:["default is ",(0,r.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]}),(0,r.BX)(g.G,{css:[v.l0.pt(16),v.l0.border({direction:"top"})],children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Override Database"}),(0,r.tZ)(hv.ZP,{type:"text",value:l,onChange:function(e){c(e.target.value)}}),(0,r.tZ)(g.G,{css:[v.l0.rowWithGap(8)],children:(0,r.tZ)(pv.Z,{color:"positive",onClick:function(){s(l)},children:"Override Postgres connection string"})})]})]})})),(0,i.Z)(Ev,Sv.DDRum,(function(){var e,t=null===(e=xv.v.getInternalContext())||void 0===e?void 0:e.session_id,n=xv.v.getInitConfiguration(),i=null!=n&&100===n.sampleRate,o=(0,a.useState)(null!=t),l=o[0],c=o[1];return(0,r.tZ)(g.G,{css:[v.l0.colWithGap(16),v.l0.p(4)],children:i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Se.zx,{onClick:l?function(){xv.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,Cv.Oo)({name:"replitOnReplit"}),setTimeout((function(){c(!0)}),1e3)},text:l?"\ud83d\udd34 Recording... Click to stop and reload page":"Start Recording",colorway:l?void 0:"primary",css:(0,Ze.Z)({},l&&Te.p.backgroundPulse(v.TV.redDimmest,v.TV.redDimmer))}),l?(0,r.tZ)(kv,{sessionId:t}):null]}):(0,r.tZ)(Se.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})})),Ev),Rv=Object.values(Sv);function Dv(e){var t=e.paneOptions,n=(0,a.useState)(Sv.Repl),i=n[0],l=n[1],c=Rv.map((function(e){return(0,r.tZ)(Se.zx,{colorway:e===i?"primary":void 0,onClick:function(){return l(e)},text:e},e)}));return(0,r.BX)(De.Tg,{background:"default",css:[v.l0.colWithGap(8),v.l0.p(4),v.l0.height("100%")],children:[(0,r.tZ)(g.G,{css:{flexWrap:"wrap",flexDirection:"row",gap:"4px"},children:c}),(0,r.tZ)(g.G,{css:[v.l0.flex.growAndShrink(1),v.l0.overflow("auto")],children:Object.entries(Tv).map((function(e){var n=(0,o.Z)(e,2),a=n[0],l=n[1];return(0,r.tZ)(g.G,{css:a!==i&&v.l0.display.none,children:a===Sv.Override&&i!==Sv.Override?null:(0,r.tZ)(l,{isHidden:t.isHidden||i!==a})},a)}))})]})}var Iv=n(47381),_v=I.Type.Object({type:I.Type.Literal("adminPanel")}),Bv={Content:function(e){var t=e.options;return(0,r.tZ)(Dv,{paneOptions:t})},Icon:function(e){var t=e.size;return(0,r.tZ)(Iv.Z,{color:"red",size:t})},getTitle:function(){return"Debug"},decode:function(e){return _.B4.Decode(_v,e)}},Gv=n(5875),Pv=n(43242),Av=n(22595),Nv=n(28696);function Uv(){var e=(0,hn.Z)(["\n  query SshConfigurator($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        user {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return Uv=function(){return e},e}var Lv={},Ov=(0,pn.Ps)(Uv());var Xv=n(68625),Mv=["ssh-dsa","ssh-ecdsa","ssh-ed25519","ssh-rsa"];function Fv(e){return function(t){t.stopPropagation(),e(t)}}function Wv(e,t){if(!e)return"Please add a key for this secret";if(!e.trim())return"The key must include a non-space character";if(t.includes(e))return"You already have this key";var n=e.split(" ");return 3!==n.length?"This seems to be an invalid key.":Mv.includes(n[0])?null:"Key type is not valid."}function Hv(e){return(0,r.BX)(g.G,{css:[v.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:e.id,children:(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:e.label})}),e.children,e.error?(0,r.BX)(g.G,{css:[v.l0.rowWithGap(2),v.l0.align.center],children:[(0,r.tZ)(Nv.Z,{}),(0,r.tZ)(y.xv,{variant:"small",css:v.l0.color.accentNegativeStrongest,multiline:!1,children:e.error})]}):null]})}function Vv(e){var t=e.authorizedKey,n=e.otherKeys,i=e.onUpdateKey,l=e.onSave,c=(0,o.Z)(a.useState(),2),s=c[0],u=c[1],d=a.useRef(null),f=function(){var e=Wv(t.key,n);if(e)return u(e),void(d.current&&d.current.focus());l()};a.useEffect((function(){s&&(Wv(t.key,n)||u(null))}),[t.key,s,n]);var h=Fv((function(e){"Enter"===e.key&&(e.preventDefault(),f())})),p=(0,id.d)(),m=(0,oi.U)()("key"),Z='ssh-keygen -t ed25519 -f ~/.ssh/replit -q -N "" && cat ~/.ssh/replit.pub';return(0,r.BX)(De.Tg,{elevated:!0,css:[v.l0.p(16),v.l0.borderRadius(8),v.l0.colWithGap(16)],children:[n&&0!==n.length?null:(0,r.tZ)(y.xv,{children:"Before you can SSH to your Repl, you need to add an SSH key."}),(0,r.tZ)(Hv,{id:m,label:"Key (in OpenSSH Public Key format)",error:s,children:(0,r.tZ)(_t.II,{id:m,ref:d,name:"key",value:t.key,spellCheck:!1,onChange:function(e){i(e.currentTarget.value)},onKeyDown:h})}),Xv.ED||p?(0,r.tZ)(g.G,{css:[v.l0.colWithGap(8)],children:(0,r.BX)(y.xv,{children:["Need a hand? The"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH documentation"})," ","provides information about generating SSH keys."]})}):(0,r.BX)(g.G,{css:[v.l0.colWithGap(8)],children:[(0,r.tZ)(y.xv,{children:"Need a hand? Generate a key:"}),(0,r.BX)(De.Tg,{tag:"pre",elevated:!0,css:[v.l0.borderRadius(8),v.l0.p(8),v.l0.rowWithGap(8),v.l0.justify.spaceBetween,v.l0.align.center],children:[(0,r.tZ)(y.xv,{multiline:!1,css:[v.l0.overflow("auto"),v.l0.font.code,v.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[v.l0.display.none]}],maxLines:1,children:Z}),(0,r.tZ)(ne.hU,{onClick:function(){return(0,At.Z)(Z)},alt:"Copy",children:(0,r.tZ)(Pt.Z,{})})]}),(0,r.tZ)(y.xv,{children:"Paste the result in the form above."})]}),(0,r.tZ)(g.G,{css:[v.l0.rowWithGap(8),v.l0.justify.spaceBetween],children:(0,r.tZ)(g.G,{css:v.l0.rowWithGap(8),children:(0,r.tZ)(Se.zx,{colorway:"primary",onClick:Fv(f),text:"Add SSH Key"})})})]})}function zv(e){var t=e.onAdd,n=e.otherKeys,i=(0,o.Z)(a.useState({key:""}),2),l=i[0],c=i[1];return(0,r.tZ)(Vv,{authorizedKey:l,otherKeys:n,onUpdateKey:function(e){c((function(t){return t?(0,be.Z)((0,Ze.Z)({},t),{key:e}):t}))},onSave:function(){c({key:""}),l.key&&t(l)}})}function jv(e){var t=e.authorizedKey,n=e.onDelete;return(0,r.BX)(g.G,{css:[Bc.gU.filled,v.l0.p(8),v.l0.rowWithGap(8),v.l0.align.center,v.l0.justify.spaceBetween,v.l0.borderRadius(8)],children:[(0,r.tZ)(Pv.Z,{size:24}),(0,r.BX)(y.xv,{css:[v.l0.flex.growAndShrink(1)],maxLines:1,multiline:!1,children:[t.keytype," ",t.key.substring(0,8),"...",t.key.substring(t.key.length-8)," ",t.comment]}),(0,r.tZ)(ne.hU,{onClick:function(){return n(t)},alt:"Delete",size:28,children:(0,r.tZ)(Av.Z,{})})]})}function qv(e){if(!e.length)return null;var t=e.split(" ");return t.length<3?null:{keytype:t[0],key:t[1],comment:t[2]}}function $v(e){var t=e.sshUser,n=e.sshHostname;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.xv,{children:"When configuring your SSH client to connect to this Repl, you will need the following configuration values:"}),(0,r.BX)(g.G,{css:v.l0.colWithGap(2),children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Hostname"}),(0,r.BX)(De.Tg,{tag:"pre",elevated:!0,css:[v.l0.borderRadius(8),v.l0.p(8),v.l0.rowWithGap(8)],children:[(0,r.tZ)(y.xv,{multiline:!1,css:[v.l0.overflow("auto"),v.l0.font.code,v.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[v.l0.display.none]}],maxLines:1,children:n}),(0,r.tZ)(ne.hU,{onClick:function(){return(0,At.Z)(n)},alt:"Copy",children:(0,r.tZ)(Pt.Z,{})})]})]}),(0,r.BX)(g.G,{css:v.l0.colWithGap(2),children:[(0,r.tZ)(y.xv,{multiline:!1,children:"Username"}),(0,r.BX)(De.Tg,{tag:"pre",elevated:!0,css:[v.l0.borderRadius(8),v.l0.p(8),v.l0.rowWithGap(8)],children:[(0,r.tZ)(y.xv,{multiline:!1,css:[v.l0.overflow("auto"),v.l0.font.code,v.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[v.l0.display.none]}],maxLines:1,children:t}),(0,r.tZ)(ne.hU,{onClick:function(){return(0,At.Z)(t)},alt:"Copy",children:(0,r.tZ)(Pt.Z,{})})]})]})]})}function Yv(e){var t,n=e.repl,i=e.onlyCommand,o=void 0===i||i,a=(0,id.d)();if("Repl"!==n.__typename)return null;var l=n.id,c="".concat(n.slug,".").concat(null===(t=n.user)||void 0===t?void 0:t.username,".repl.co"),s="ssh -i ~/.ssh/replit ".concat(l,"@").concat(c),u="Host ".concat(c,"\n  User ").concat(l,"\n  IdentityFile ~/.ssh/replit"),d="ssh ".concat(c);return Xv.ED||a?o?null:(0,r.BX)(g.G,{css:v.l0.colWithGap(16),children:[(0,r.tZ)(Gv.Z,{level:4,children:"Client Configuration"}),(0,r.tZ)($v,{sshUser:l,sshHostname:c}),(0,r.BX)(y.xv,{children:["For more detailed configuration instructions",Xv.ED?" on Windows":null,", check the"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH Power-Up documentation"}),"."]})]}):(0,r.tZ)(g.G,{css:v.l0.colWithGap(16),children:o?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gv.Z,{level:4,children:"Quick-Start SSH Command"}),(0,r.BX)(De.Tg,{tag:"pre",elevated:!0,css:[v.l0.borderRadius(8),v.l0.p(8),v.l0.rowWithGap(8)],children:[(0,r.tZ)(y.xv,{multiline:!1,css:[v.l0.overflow("auto"),v.l0.font.code,v.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[v.l0.display.none]}],maxLines:1,children:s}),(0,r.tZ)(ne.hU,{onClick:function(){return(0,At.Z)(s)},alt:"Copy",children:(0,r.tZ)(Pt.Z,{})})]})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gv.Z,{level:4,children:"Client Configuration"}),(0,r.tZ)($v,{sshUser:l,sshHostname:c}),(0,r.tZ)(Gv.Z,{level:5,children:"SSH Configuration File"}),(0,r.BX)(y.xv,{children:["You can add this snippet to your SSH configuration file (typically"," ",(0,r.tZ)(y.xv,{css:[v.l0.font.code,v.l0.display.inline,v.l0.align.baseline],children:"~/.ssh/config"}),"):"]}),(0,r.BX)(De.Tg,{tag:"pre",elevated:!0,css:[v.l0.borderRadius(8),v.l0.p(8),v.l0.rowWithGap(8)],children:[(0,r.tZ)(y.xv,{css:[v.l0.overflow("auto"),v.l0.font.code,v.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[v.l0.display.none]}],children:u}),(0,r.tZ)(ne.hU,{onClick:function(){return(0,At.Z)(u)},alt:"Copy",children:(0,r.tZ)(Pt.Z,{})})]}),(0,r.tZ)(y.xv,{children:"Then, to connect to your Repl you can simply run:"}),(0,r.BX)(De.Tg,{tag:"pre",elevated:!0,css:[v.l0.borderRadius(8),v.l0.p(8),v.l0.rowWithGap(8)],children:[(0,r.tZ)(y.xv,{multiline:!1,css:[v.l0.overflow("auto"),v.l0.font.code,v.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[v.l0.display.none]}],maxLines:1,children:d}),(0,r.tZ)(ne.hU,{onClick:function(){return(0,At.Z)(d)},alt:"Copy",children:(0,r.tZ)(Pt.Z,{})})]})]})})}function Kv(e){return Qv.apply(this,arguments)}function Qv(){return(Qv=(0,we.Z)((function(e){return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.createDir(".config")];case 1:return t.sent(),[4,e.createDir(".config/ssh")];case 2:return t.sent(),[2]}}))}))).apply(this,arguments)}function Jv(e){var t=e.fs,n=(0,_d.Z)(),i=(0,o.Z)(a.useState(null),2),l=i[0],c=i[1],s=function(e){var t=(0,Ze.Z)({},Lv,e);return mn.a(Ov,t)}({variables:{replId:(0,fn.Z)()}}).data,u="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?s.repl:null;a.useEffect((function(){function e(){return(e=(0,we.Z)((function(){var e,r;return(0,xe.__generator)(this,(function(i){switch(i.label){case 0:return[4,Kv(t)];case 1:return i.sent(),[4,t.readFile(".config/ssh/.authorized_keys")];case 2:if((e=i.sent()).error===k.Df.NotFound)return n.current&&c({}),[2];if(e.error)throw new Error("Error getting .authorized_keys");return n.current?(r={},e.content.toString().split("\n").forEach((function(e){if(!e.startsWith("#")){var t=qv(e);null!==t&&(r[t.key]=t)}})),c(r),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,c,n]);var d=function(){var e=(0,we.Z)((function(e){var n,r;return(0,xe.__generator)(this,(function(i){switch(i.label){case 0:if(!l)throw new Error("trying to write authorized keys before loading");return n=function(e,t){var n=(0,Ze.Z)({},e);if("add"===t.type){var r=qv(t.key);r&&(n[r.key]=r)}else delete n[t.key];return n}(l,e),c(n),r="# generated file, use the SSH tool instead of editing\n"+Object.values(n).map((function(e){return"".concat((t=e).keytype," ").concat(t.key," ").concat(t.comment);var t})).join("\n"),[4,t.writeFile(".config/ssh/.authorized_keys",ii.Z.from(r))];case 1:return i.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,we.Z)((function(e){return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return[4,d((0,Ze.Z)({type:"add"},e))];case 1:return t.sent(),(0,br.j)(br.U3.SSH_CONFIGURATOR_USED,{action:"added"}),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,we.Z)((function(e){return(0,xe.__generator)(this,(function(t){switch(t.label){case 0:return[4,d({type:"delete",key:e.key})];case 1:return t.sent(),(0,br.j)(br.U3.SSH_CONFIGURATOR_USED,{action:"deleted"}),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return l&&u?(0,r.tZ)(g.G,{css:v.l0.colWithGap(32),children:(0,r.BX)(g.G,{css:v.l0.colWithGap(16),children:[Object.keys(l).length>0?(0,r.tZ)(Yv,{repl:u,onlyCommand:!0}):null,(0,r.tZ)(Gv.Z,{level:4,children:"Manage SSH Keys"}),Object.values(l).map((function(e){return(0,r.tZ)(jv,{authorizedKey:e,onDelete:h},e.key)})),(0,r.tZ)(zv,{onAdd:f,otherKeys:Object.keys(l)}),Object.keys(l).length>0?(0,r.tZ)(Yv,{repl:u,onlyCommand:!1}):null]})}):(0,r.tZ)(g.G,{css:[v.l0.center,v.l0.coverContainer],children:(0,r.tZ)(oe.Z,{size:24})})}function eg(e){var t=e.children;return(0,r.tZ)(g.G,{css:[v.l0.height("100%"),v.l0.overflowY("auto"),A.F3],children:(0,r.BX)(g.G,{css:[v.l0.p(8),v.l0.colWithGap(8),v.l0.flex.grow(1)],children:[(0,r.tZ)(g.G,{css:[v.l0.rowWithGap(8)],children:(0,r.tZ)(Gv.Z,{truncate:!0,level:4,children:"SSH Configuration"})}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",children:["Add authorized keys to configure SSH access to this Repl."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"Learn more here"}),"."]}),(0,r.tZ)(g.G,{css:[v.l0.flex.grow(1),v.l0.py(8),v.l0.position.relative],children:t})]})})}var tg=n(52205),ng=I.Type.Object({type:I.Type.Literal("sshConfigurator")}),rg={Content:function(){return(0,r.tZ)(ig,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(tg.Z,{size:t})},getTitle:function(){return"SSH"},decode:function(e){return _.B4.Decode(ng,e)}};function ig(){var e=(0,d.Z)().fs;return(0,r.tZ)(eg,{children:(0,r.tZ)(Jv,{fs:e})})}var og,ag=n(96893),lg=n(45942),cg=n(52362),sg=n(26169),ug=n(89673),dg=function(e){return"color-mix(in srgb, ".concat(co.TV.blurpleDefault," ").concat(100*e,"%, transparent)")},fg=v.nC.min(440),hg=(0,Z.X)({root:[v.l0.reset.button,Bc.gU.filled,v.l0.borderRadius(4),v.l0.align.center,v.l0.p(6),v.l0.color.blurpleDefault,v.l0.cursor.pointer,v.l0.align.start,(og={},(0,i.Z)(og,fg,[v.l0.rowWithGap(4),v.l0.align.center]),(0,i.Z)(og,Bc.dj.interactiveBackground,dg(.1)),(0,i.Z)(og,Bc.dj.interactiveBackgroundActive,dg(.2)),og)],iconText:v.l0.rowWithGap(4)});function pg(e){return(0,r.BX)(g.G,{css:hg.root,onClick:e.onClick,children:[(0,r.BX)(g.G,{css:hg.iconText,children:[(0,a.cloneElement)(e.icon,{size:16,color:co.TV.blurpleDefault}),(0,r.tZ)(y.xv,{variant:"small",children:e.text})]}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",children:e.description})]})}var mg=(0,Z.X)({root:[v.l0.flex.growAndShrink(1),v.l0.position.relative,v.l0.overflow("auto"),v.l0.display.block],content:[v.l0.py(32),v.l0.px(32),v.l0.center,v.l0.colWithGap(12),v.l0.minHeight("100%")],header:[v.l0.colWithGap(8),v.l0.align.center,v.l0.maxWidth(370),v.l0.textAlign.center],buttons:[v.l0.colWithGap(8),(0,i.Z)({},fg,[v.l0.align.center])]});function vg(e){var t=e.promptEditor,n=function(){var e,t=(0,o.Z)((0,Im.AA)(),1)[0],n=t?lg.$R.from(t):null,i=null!==t&&void 0!==t?t:"filename.js";return[{icon:(0,r.tZ)(sg.Z,{}),title:"Generate",description:"Create a personal assistant chatbot",action:"GENERATE"},{icon:(0,r.tZ)(Iv.Z,{}),title:"Debug",description:"Fix the logic of updating price? ",action:"DEBUG"},{icon:(0,r.tZ)(ug.Z,{}),title:"Explain",description:"How does ".concat(i," work?"),action:"EXPLAIN",promptToFill:t?"How can I improve the code in "+t:"How can I improve the code in"},{icon:(0,r.tZ)(ug.Z,{}),title:"Ask replit.com",description:"How to deploy a ".concat(null!==(e=null===n||void 0===n?void 0:n.name)&&void 0!==e?e:"python"," project?"),action:"REPLIT_DOCS"}]}(),i=(0,Pm.$C)(),a=(0,Pm.Qn)();return t?(0,r.tZ)(g.G,{css:mg.root,children:(0,r.BX)(g.G,{css:mg.content,children:[(0,r.BX)(g.G,{css:mg.header,children:[(0,r.tZ)(Ac.q,{src:cg.l,username:""}),(0,r.tZ)(y.xv,{variant:"subheadBig",children:"Replit AI"}),(0,r.tZ)(y.xv,{color:"dimmest",children:"Use Replit AI to set up new projects, answer questions about your code, and assist your thinking."})]}),(0,r.tZ)(g.G,{css:mg.buttons,children:n.map((function(e){return(0,r.tZ)(pg,{icon:e.icon,text:e.title,description:e.description,onClick:function(){!function(e){var n,r=null!==(n=e.promptToFill)&&void 0!==n?n:e.description;a(e.action),i(r),(0,br.j)(br.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{title:e.title}),null===t||void 0===t||t.focus()}(e)}},e.action)}))})]})}):null}var gg=function(){return(0,r.BX)(g.G,{css:[v.l0.colWithGap(16),v.l0.align.center,v.l0.p(24),v.l0.height("100%"),v.l0.justify.center],children:[(0,r.tZ)(g.G,{css:[v.l0.maxWidth(200)],children:(0,r.tZ)(Po.Z,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(v.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})}),(0,r.tZ)(y.xv,{variant:"subheadBig",multiline:!1,children:"Chat with Replit AI"}),(0,r.BX)(g.G,{css:[v.l0.rowWithGap(8),v.l0.align.center],children:[(0,r.tZ)(oe.Z,{}),(0,r.tZ)(y.xv,{color:"dimmer",multiline:!1,children:"Loading\u2026"})]})]})},yg=n(29161),Zg=n(62616),bg=n(17317),wg=n(98304),xg=n(36433),Cg=n(75165),kg=n(89172),Sg=n(25367),Eg=n(44327),Tg=(0,Z.X)({headerWrapper:[v.l0.rowWithGap(4),v.l0.align.center],feedbackContent:[v.l0.backgroundColor.backgroundHigher,v.l0.colWithGap(4),v.l0.borderRadius(8),v.l0.py(4),v.l0.px(8)],messagePreview:[v.l0.colWithGap(4),v.l0.borderRadius(4),v.l0.py(4),v.l0.px(8),Eg.V.ghostwriterPurpleBackground,v.l0.border({color:v.TV.blurpleDefault,style:"solid",direction:"left",width:2})],userFeedbackWrapper:[v.l0.rowWithGap(4),v.l0.align.center,v.l0.justify.start],userFeedbackText:[v.l0.flex.growAndShrink(1),v.l0.width("100%")]}),Rg=function(e){var t=e.message,n=e.currentUser,i=e.autoScroll,o=t.author,c=t.useAdvancedModel,s=t.text,u=t.feedbackProvidedMessage;if(!n)throw new Error("Expecting a current user to render a feedback message");if(!u)throw new Error("Expecting a feedback provided message to render a feedback message");var d=(0,a.useRef)(null),f=(0,bg.rM)();(0,a.useLayoutEffect)((function(){i&&d.current&&requestAnimationFrame((function(){i&&d.current&&((0,l.Z)(d.current,{skipOverflowHiddenElements:!0,behavior:"auto",scrollMode:"always"}),f(!0))}))}));var h={username:n.username,image:n.image};return(0,r.BX)(g.G,{css:Eg.V.messageWrapper,children:[(0,r.BX)(g.G,{css:Tg.headerWrapper,children:[(0,r.tZ)(cg.Z,{author:o,advancedGwAvatar:c}),(0,r.tZ)(y.xv,{multiline:!1,children:"recorded feedback"}),(0,r.tZ)(Fn.Z,{color:v.TV.greenStronger})]}),(0,r.BX)(g.G,{css:Tg.feedbackContent,children:[(0,r.tZ)(g.G,{css:Tg.messagePreview,children:(0,r.tZ)(y.xv,{multiline:!1,maxLines:1,children:u.text})}),(0,r.BX)(g.G,{css:Tg.userFeedbackWrapper,children:[(0,r.tZ)(cg.Z,{smallAvatar:!0,author:h,showUsername:!1}),(0,r.tZ)(y.xv,{css:Tg.userFeedbackText,children:s})]})]}),(0,r.tZ)(g.G,{innerRef:d})]})},Dg=n(53128),Ig=n(64918),_g=n(55047),Bg=n(49684),Gg=n(40816),Pg=n(90346);var Ag=n(43995),Ng=n(33145),Ug=n(65753),Lg=n(49275),Og=n(9722),Xg=n(8134),Mg=n(40972),Fg=n(11414),Wg=n(39059),Hg=n(40447),Vg=n(34335),zg=[{title:"Ask AI",description:"Detect actions based on the prompt",action:"NONE",icon:(0,r.tZ)(Mg.Z,{})},{title:"Generate",description:"Write starter code/tests",action:"GENERATE",icon:(0,r.tZ)(sg.Z,{})},{title:"Modify",description:"Refactor existing features",action:"TRANSFORM",icon:(0,r.tZ)(sg.Z,{})},{title:"Explain",description:"Ask a question about your code",action:"EXPLAIN",icon:(0,r.tZ)(ug.Z,{})},{title:"Ask replit.com",description:"Explain the selection",action:"REPLIT_DOCS",icon:(0,r.tZ)(ug.Z,{})}],jg=(0,Z.X)({root:[v.l0.rowWithGap(8),v.l0.px(8),v.l0.py(4),v.l0.cursor.pointer,Bc.gU.listItem],header:[v.l0.rowWithGap(4),v.l0.align.center],content:[v.l0.flex.growAndShrink(1)]});function qg(e){var t=e.mode,n=e.selected,i=e.highlighted;return(0,r.BX)(g.G,{css:jg.root,style:i?{backgroundColor:Bc.vb.interactiveBackground}:void 0,children:[(0,r.BX)(g.G,{css:jg.content,children:[(0,r.BX)(g.G,{css:jg.header,children:[(0,a.cloneElement)(t.icon,{size:16,color:v.TV.blurpleDefault}),(0,r.tZ)(y.xv,{variant:"small",children:t.title})]}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmest",children:t.description})]}),n?(0,r.tZ)(Fn.Z,{color:v.TV.foregroundDimmer}):null]})}var $g=(0,Z.X)({button:[v.l0.reset.button,Bc.gU.outlined,v.l0.px(8),v.l0.rowWithGap(4),v.l0.borderRadius(8,0,0,8),v.l0.height("100%"),v.l0.align.center],heading:[v.l0.px(8),v.l0.py(4)],popover:[v.l0.borderRadius(4),v.l0.border({color:v.TV.outlineDefault}),v.l0.overflow("hidden")]});function Yg(){var e,t=(0,o.Z)((0,Pm.fr)(),2),n=t[0],i=t[1],l=(0,Fg.L7)({items:zg,selectedItem:zg.find((function(e){return e.action===(null!==n&&void 0!==n?n:"NONE")})),onSelectedItemChange:function(e){var t=e.selectedItem;t&&i(t.action)}}),c=(0,a.useState)(null),s=c[0],u=c[1],d=(0,a.useState)(null),f=d[0],h=d[1],p=(0,Vg.D)(s,f,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom-start"});return l.isOpen||l.getMenuProps({},{suppressRefError:!0}),(0,r.BX)(r.HY,{children:[(0,r.tZ)("label",(0,be.Z)((0,Ze.Z)({css:v.l0.visuallyHidden},l.getLabelProps()),{children:"Select a mode for AI"})),(0,r.BX)(g.G,(0,be.Z)((0,Ze.Z)({css:$g.button},l.getToggleButtonProps({ref:u,refKey:"innerRef"})),{children:[(0,r.tZ)(y.xv,{color:"dimmer",children:null===(e=l.selectedItem)||void 0===e?void 0:e.title}),(0,r.tZ)(Wg.Z,{rotate:l.isOpen?180:0,size:12})]})),l.isOpen?(0,r.tZ)(Hg.h,{children:(0,r.tZ)(De.Tg,(0,be.Z)((0,Ze.Z)({elevated:!0,style:p.styles.popper,innerRef:h,css:$g.popover},p.attributes.popper),{children:(0,r.BX)(g.G,(0,be.Z)((0,Ze.Z)({},l.getMenuProps({refKey:"innerRef"})),{children:[(0,r.tZ)(g.G,{css:$g.heading,children:(0,r.tZ)(y.xv,{color:"dimmest",variant:"small",children:"Select a mode"})}),zg.map((function(e,t){var n=e===l.selectedItem,i=t===l.highlightedIndex;return(0,r.tZ)(g.G,(0,be.Z)((0,Ze.Z)({},l.getItemProps({refKey:"innerRef",item:e})),{children:(0,r.tZ)(qg,{mode:e,selected:n,highlighted:i},e.action)}),e.action)}))]}))}))}):null]})}var Kg,Qg=new zr.j((function(e){function t(){return(t=(0,we.Z)((function(t){var n,r,i,o;return(0,xe.__generator)(this,(function(a){switch(a.label){case 0:return t.matchBefore(/@(\S*)/g)?[4,e.listFiles()]:[2,null];case 1:return n=a.sent(),i=null!==(r=n.files)&&void 0!==r?r:[],(o=t.matchBefore(/\w*/))&&((null===o||void 0===o?void 0:o.from)!==(null===o||void 0===o?void 0:o.to)||t.explicit)?[2,{from:o.from,validFor:/^(@\w*)?$/,options:(0,ee.Z)((null!==i&&void 0!==i?i:[]).map((function(e){return{label:e,type:"file"}})))}]:[2,null]}}))}))).apply(this,arguments)}var n=(0,Ug.ys)({defaultKeymap:!1,icons:!1,aboveCursor:!0,addToOptions:[Lg.t],override:[function(e){return t.apply(this,arguments)}],optionClass:function(e){return"accepted-completion"}});return n})),Jg=new zr.j((function(e){var t;switch(e){case"REPLIT_DOCS":t="Ask about Replit specific features\u2026";break;case"GENERATE":t="Write some starter code and tests\u2026";break;case"EXPLAIN":t="Ask a question about your code\u2026";break;case"TRANSFORM":t="Refactor and rewrite existing features\u2026";break;default:t="Ask anything about your project and coding\u2026"}return(0,Wn.W$)((0,Vr.VV)((0,r.tZ)("div",{css:[{fontFamily:v.TV.fontFamilyDefault},v.l0.color.foregroundDimmest],children:t})))})),ey=function(e){"use strict";(0,Ah.Z)(n,e);var t=(0,Uh.Z)(n);function n(e,r){var i;return(0,Ph.Z)(this,n),(i=t.call(this)).path=e,i.onFileClick=r,i}var i=n.prototype;return i.eq=function(e){return this.path===e.path},i.toDOM=function(){var e=this,t=(0,D.UO)(this.path),n=(0,Vr.VV)((0,r.tZ)("span",{children:(0,r.BX)(g.G,{css:[v.l0.display.inline,v.l0.px(4),v.l0.height(v.TV.space24),v.l0.align.center,Bc.gU.filledAndOutlined,{backgroundColor:"transparent"},v.l0.borderRadius(4),v.l0.rowWithGap(2)],onClick:function(){return e.onFileClick(e.path)},children:[(0,r.tZ)(La.Z,{size:16,path:this.path}),(0,r.tZ)(y.xv,{children:t})]})}));return n.style.display="inline",n},n}(Wn.l9),ty=new zr.j((function(e){var t=e.fileContextPaths,n=e.onFileClick,r=new Wn.Y1({regexp:new RegExp("".concat(t.map((function(e){return"@".concat(e)})).join("|")),"g"),decoration:function(e,r){var i=e[0].substring(1,e[0].length);return t.includes(i)?Wn.p.replace({widget:new ey(i,n),inclusive:!0}):null}});return Wn.lg.fromClass(function(){"use strict";function e(n){(0,Ph.Z)(this,e),this.placeholders=t.length>0?r.createDeco(n):Wn.p.none}return e.prototype.update=function(e){0!==t.length&&e.docChanged&&(this.placeholders=r.updateDeco(e,this.placeholders))},e}(),{decorations:function(e){return e.placeholders},provide:function(e){return Wn.tk.atomicRanges.of((function(t){var n;return(null===(n=t.plugin(e))||void 0===n?void 0:n.placeholders)||Wn.p.none}))}})})),ny=new zr.j((function(e){return Wn.tk.updateListener.of((function(t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.annotation(Ug.Jv)&&l.changes.iterChanges((function(t,n,r,i,o){e({path:o.toString(),preference:"include"}),(0,br.j)(br.U3.GHOSTWRITER_CHAT_FILE_CONTEXT_SPECIFIED,{specifiedWith:"promptEditor",preference:"include"})}))}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}))})),ry=new zr.j((function(e){if("number"===typeof e)return Vn.yy.transactionFilter.of((function(t){if(t.docChanged&&t.newDoc.length>e){var n=0,r=[];return t.changes.iterChanges((function(i,o,a,l,c){var s=l-a-(o-i),u=t.startState.doc.length+n+s;if(u<=e){var d=c;r.push({from:i,to:o,insert:d})}else{var f=c.slice(0,c.length-(u-e));n+=f.length,r.push({from:i,to:o,insert:f})}n+=s})),{changes:r,scrollIntoView:!0}}return t}))})),iy=new zr.j((function(e,t){var n=Wn.tk.domEventHandlers({keydown:function(e,n){(0,Ug.SI)(n.state).length>0||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),t())}}),r=Wn.tk.updateListener.of((function(t){if(t.docChanged&&"function"===typeof e){var n=t.state.doc.toString();e(n,t)}}));return[r,n]})),oy=Wn.tk.theme((Kg={"&":{backgroundColor:v.TV.backgroundHighest,fontFamily:v.TV.fontFamilyDefault,borderEndEndRadius:v.TV.space8,borderStartEndRadius:v.TV.space8,height:"100%"},"& .cm-content":{fontFamily:v.TV.fontFamilyDefault},"& .cm-scroller":{fontFamily:v.TV.fontFamilyDefault}},(0,i.Z)(Kg,"& .".concat(Og.ll),{display:"none"}),(0,i.Z)(Kg,"& .cm-indent-markers",{display:"none"}),(0,i.Z)(Kg,"& .completion.accepted-completion & cm-completion",{backgroundColor:"coral"}),(0,i.Z)(Kg,"& .cm-file-match",{paddingLeft:v.TV.space4,paddingRight:v.TV.space4,borderRadius:v.TV.space8,borderColor:v.TV.outlineStrongest,borderWidth:v.TV.space1,borderStyle:"solid"}),Kg)),ay=(0,Z.X)({inputContainer:[Bc.gU.filledAndOutlined,v.l0.borderRadius(0,8,8,0),v.l0.flex.growAndShrink(1),{borderLeft:"0 none","@media (hover: hover)":{":not([disabled])":{"&:not([disabled])":{cursor:"text"},":focus-within":(0,Ze.Z)({},v._X,{outlineOffset:-1,":not(:focus-visible)":{outlineColor:v.TV.accentPrimaryDefault}})}}}],codeMirror:[v.l0.maxHeight(300),v.l0.overflow("auto")]}),ly=function(e){var t=e.value,n=e.maxLength,i=e.onSubmit,l=e.onChange,c=e.onFocus,s=e.setPromptEditor,u=(0,Hr.Z)(),h=u.ref,p=u.view,m=(0,d.Z)().fs,y=(0,Xg.Xy)(),Z=(0,Xg.zU)(),b=(0,Xg.U0)(),w=(0,Cn.Bx)(),x=(0,o.Z)((0,Pm.fr)(),1)[0],C=(0,o.Z)((0,Pm.jx)(),2),k=(C[0],C[1]),S=(0,Zg.t)(),E=(0,a.useState)([]),T=E[0],R=E[1],D=Qg.use(m),I=ry.use(n),_=ny.use(Z),B=ty.use({fileContextPaths:T,onFileClick:function(e){return S({path:e})}}),G=iy.use(l,i),P=Jg.use(x),A=(0,f.Z)((function(e){k(e.height)}));return function(e){var t=e.view,n=e.setPromptEditor,r=(0,ul.Z)(n);(0,a.useEffect)((function(){if(t){var e=r.current;return e({focus:function(){t.focus(),t.dispatch({selection:{anchor:t.state.doc.length}})}}),function(){e(null)}}}),[t,r])}({view:p,setPromptEditor:s}),(0,a.useEffect)((function(){p&&p.state.doc.toString()!==t&&p.dispatch({changes:{from:0,to:p.state.doc.length,insert:t}})}),[t,p]),(0,a.useEffect)((function(){function e(){return(e=(0,we.Z)((function(){var e,t;return(0,xe.__generator)(this,(function(n){switch(n.label){case 0:return[4,b()];case 1:return e=n.sent(),t=e.ghostwriterFileContext.fileContext.map((function(e){return e.filePath})),e.mostRecentFile&&t.push(e.mostRecentFile),R(t),[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[b,w,y]),(0,r.BX)(g.G,{innerRef:A,css:[v.l0.flex.row,v.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(Yg,{}),(0,r.tZ)(g.G,{css:ay.inputContainer,children:(0,r.tZ)(Wr.ZP,{onFocus:c,language:"markdown",ref:h,css:ay.codeMirror,hideGutter:!0,autocomplete:!1,extensions:[G,I,D,_,B,oy,P]})})]})};var cy=(0,Z.X)({messageBoxSubContainer:[v.l0.rowWithGap(8),v.l0.align.center],messageBoxInputContainer:[v.l0.flex.growAndShrink(1),v.l0.maxHeight(300),v.l0.flex.row],messageBoxInput:[v.l0.height(32),v.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],inputButton:[v.l0.backgroundColor.blueDefault,v.l0.borderRadius(8),{"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:v.TV.blueDefault}}}]});function sy(e){var t=e.setPromptEditor,n=e.messageCharacters,i=e.currentUser,o=e.onFocus,a=e.onStopGenerating,l=e.text,c=e.setText,s=e.showCantSendMessage,u=e.setShowCantSendMessage,d=(0,Pm.J)(),f=(0,Pm.gp)(),h=(0,Pm.ql)();return(0,r.BX)(g.G,{css:cy.messageBoxSubContainer,tag:"form",disabled:f,onSubmit:function(e){if(e.preventDefault(),!l)return null;c(""),h({chatMessage:{type:"chat",text:l}})},children:[(0,r.tZ)(Ac.q,{src:i.image,username:i.username,size:24}),(0,r.tZ)(g.G,{css:[cy.messageBoxInputContainer],children:(0,r.tZ)(ly,{value:l,setPromptEditor:t,maxLength:n,onChange:function(e){c(e)},onSubmit:function(){l&&(f?u(!0):(c(""),h({chatMessage:{type:"chat",text:l}})))},onFocus:o})}),d?(0,r.tZ)(ne.hU,{size:28,alt:"Stop generating",onClick:a,tooltipContents:s?"You cannot send a message while another message is sending.":void 0,tooltipOpen:!!s||void 0,children:(0,r.tZ)(Ng.Z,{})}):(0,r.tZ)(ne.hU,{alt:"Send message",size:28,type:"submit",disabled:f,css:cy.inputButton,children:(0,r.tZ)(Ag.Z,{})})]})}var uy=n(45003);function dy(){var e=(0,Xg.Xy)(),t=(0,Xg.U0)(),n=(0,Cn.Bx)(),i=(0,Xg.Xr)(),o=(0,a.useState)(!1),l=o[0],c=o[1],s=e.filter((function(e){return"exclude"===e.preference})).map((function(e){return e.path}));return(0,a.useEffect)((function(){var n=function(){var n=(0,we.Z)((function(){var n,r,i,o,a;return(0,xe.__generator)(this,(function(l){switch(l.label){case 0:return 0===(n=e.filter((function(e){return"exclude"===e.preference}))).length?(c(!1),[2]):[4,t()];case 1:return r=l.sent(),i=(0,ee.Z)(r.ghostwriterFileContext.fileContext.map((function(e){return e.filePath}))),null!==r.mostRecentFile&&i.push(r.mostRecentFile),o=new Set((0,ee.Z)(n.map((function(e){return e.path})))),a=i.filter((function(e){return!o.has(e)&&!!e})),c(0===a.length),[2]}}))}));return function(){return n.apply(this,arguments)}}();n()}),[e,t,n]),l?(0,r.tZ)(ne.hU,{tooltipContents:(0,r.BX)(g.G,{children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",children:"All files are excluded"}),s.map((function(e,t){return(0,r.tZ)(y.xv,{variant:"small",css:[t===s.length-1?v.l0.pb(6):void 0],children:(0,D.UO)(e)},e)})),(0,r.tZ)(y.xv,{variant:"subheadDefault",children:"Click to reset hidden files"})]}),tooltipPlacement:"top-end",alt:"",onClick:i,children:(0,r.tZ)(Ee.Z,{})}):null}var fy=(0,Z.X)({checkboxContainer:[v.l0.align.center,v.l0.rowWithGap(6),v.l0.pl(4)]});function hy(){var e=(0,o.Z)((0,Pm.fr)(),2),t=e[0],n=e[1];if("undefined"!==typeof t&&"NONE"!==t)return null;var i="undefined"===typeof t;return(0,r.BX)(g.G,{css:fy.checkboxContainer,children:[(0,r.tZ)(y.xv,{children:"\u2022"}),(0,r.tZ)(y.xv,{children:"Detect action"}),(0,r.tZ)(ae.u,{tooltip:i?"Replit AI will automatically determine what action to use":"Replit AI will respond without using an action",placement:"top",children:(0,r.tZ)(Yd.X,{id:"detectActionCheckboxId",checked:i,onChange:function(){return n((function(e){return"undefined"===typeof e?"NONE":void 0}))}})})]})}var py=n(99829),my=n(59341),vy=n(81920),gy=(0,Z.X)({promptInfo:[v.l0.rowWithGap(4),v.l0.justify.spaceBetween,v.l0.pb(6),v.l0.align.center],inputCharacterCount:[v.l0.flex.row,v.l0.align.center,v.l0.rowWithGap(4),v.l0.color.foregroundDimmer],inputCharacterCountMax:[v.l0.flex.row,v.l0.align.center,v.l0.rowWithGap(4),v.l0.color.accentNegativeStronger],infoIcon:[v.l0.p(2),v.l0.height(v.TV.space24),v.l0.width(v.TV.space24)],addFileButton:[v.l0.backgroundColor.backgroundHighest,v.l0.borderRadius(8)],addFileButtonIcon:[v.l0.transition.snappy],fileSearch:[v.l0.position.absolute,v.l0.backgroundColor.backgroundHigher,v.l0.ml(32),v.l0.p(8),v.l0.borderRadius(8)],fileSearchResults:[v.l0.overflowY("auto"),v.l0.overflowX("hidden"),v.l0.maxHeight(300),v.l0.maxWidth(300)],promptFileContextList:[v.l0.rowWithGap(4),v.l0.flex.growAndShrink(1),v.l0.overflowY("hidden"),v.l0.scrollbar.hidden,{"&::-webkit-scrollbar":{display:"none"}},v.l0.height(v.TV.space24)],promptFileContextItem:[v.l0.rowWithGap(4),v.l0.align.center,v.l0.borderRadius(8),v.l0.backgroundColor.backgroundHigher,v.l0.transition.snappy],promptFileContextItemContents:[v.l0.flex.row,v.l0.align.center],promptFileContextLabel:[Bc.gU.outlined,v.l0.rowWithGap(2),v.l0.align.center,v.l0.borderRadius(8,0,0,8),v.l0.pr(6),v.l0.pl(8),v.l0.border({width:1,direction:"right",color:"transparent"})],buttonRemoveFileContext:[Bc.gU.outlined,v.l0.borderRadius(0,8,8,0)]});function yy(e){var t=e.text,n=e.messageCharacters,i=e.atMaxMessageLength,o=(0,id.d)(),a=(0,ro.P5)({controlName:"flag-ghostwriter-file-ctx",logFlagToAnalytics:!1});return(0,r.BX)(g.G,{css:gy.promptInfo,children:[a&&!o?(0,r.tZ)(Zy,{}):(0,r.tZ)(g.G,{}),(0,r.BX)(g.G,{css:[i?gy.inputCharacterCountMax:gy.inputCharacterCount],children:[i?(0,r.tZ)(Ee.Z,{}):null,(0,r.tZ)(uy.Z,{maxLength:n,value:t,hideLabel:!0,fontSize:"inherit"}),(0,r.tZ)(hy,{})]})]})}function Zy(){var e=(0,Cn.AA)(),t=(0,d.Z)().fs,n=(0,Xg.zU)(),i=function(){var e=(0,Cn.Bx)(),t=(0,Xg.U0)(),n=(0,Xg.Xy)(),r=(0,a.useState)([]),i=r[0],o=r[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,we.Z)((function(){var e,n,r,i,a,l,c,s,u;return(0,xe.__generator)(this,(function(d){switch(d.label){case 0:return e=new Set,[4,t()];case 1:return n=d.sent(),r=n.ghostwriterFileContext,i=r.fileContext,a=r.truncatedFiles,l=r.overflowingFiles,i.forEach((function(t){e.add(t.filePath)})),c=Array.from(e).map((function(e){return{path:e,inclusionStatus:"included"}})),s=a.map((function(e){return{path:e,inclusionStatus:"truncated"}})),u=l.map((function(e){return{path:e,inclusionStatus:"overflowing"}})),o((0,ee.Z)(c).concat((0,ee.Z)(s),(0,ee.Z)(u))),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[e,n,t]),i}(),l=(0,a.useState)(!1),c=l[0],s=l[1],u=(0,o.Z)((0,Pm.oq)(),1)[0],f=(0,a.useRef)(!1),h=96+(0,o.Z)((0,Pm.jx)(),1)[0]-32,p=u-h;!1===f.current&&p<=128?(f.current=!0,s(!1)):!0===f.current&&(f.current=!1);var m=(0,vy.T)(),y=(0,my.i)({openFile:function(e){(0,br.j)(br.U3.GHOSTWRITER_CHAT_FILE_CONTEXT_SPECIFIED,{preference:"include",specifiedWith:"fileSelector"}),n({path:e.path,preference:"include"}),s(!1)},fs:t,shouldHideFile:m,getRecentFiles:e});return(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.G,{children:(0,r.tZ)(ae.u,{tooltip:"Files that AI can use",placement:"top-start",children:(0,r.tZ)(bi.Z,{size:v.TV.space24,css:gy.infoIcon,color:v.TV.foregroundDimmest})})}),(0,r.tZ)(g.G,{width:v.TV.space2}),(0,r.tZ)(ne.hU,{alt:c?"Close":"Add file for Ghostwriter",size:24,type:"submit",tooltipPlacement:"top-start",onClick:function(){return s((function(e){return!e}))},css:gy.addFileButton,children:(0,r.tZ)(Co.Z,{rotate:c?45:0,css:[gy.addFileButtonIcon]})}),(0,r.tZ)(dy,{}),c?(0,r.tZ)(g.G,{css:[gy.fileSearch,v.l0.bottom(h),v.l0.maxHeight(Math.min(300,p-32))],children:(0,r.tZ)(py.X,{autoFocus:!0,onKeyDown:function(e){"Escape"===e.key&&s(!1)},command:y})}):null,(0,r.tZ)(g.G,{css:gy.promptFileContextList,children:i.map((function(e){return(0,r.tZ)(by,{inclusion:e,onClick:function(){(0,br.j)(br.U3.GHOSTWRITER_CHAT_FILE_CONTEXT_SPECIFIED,{specifiedWith:"fileSelector",preference:"exclude"}),n({path:e.path,preference:"exclude"})}},e.path)}))})]})}function by(e){var t=e.inclusion,n=e.onClick,i=(0,Zg.t)(),o=t.path,a=(0,D.UO)(o);return(0,r.tZ)(g.G,{css:[gy.promptFileContextItem],children:(0,r.BX)(g.G,{css:gy.promptFileContextItemContents,children:[(0,r.tZ)(ae.u,{isDisabled:"included"===t.inclusionStatus,placement:"top-start",tooltip:(0,r.BX)(g.G,{children:[(0,r.BX)(g.G,{css:[v.l0.rowWithGap(4),v.l0.align.center],children:[(0,r.tZ)(Ee.Z,{size:16}),(0,r.tZ)(y.xv,{children:"File memory exceeded"})]}),(0,r.tZ)(y.xv,{color:"dimmer",children:"".concat(a," will be ignored")})]}),children:(0,r.BX)(g.G,{css:gy.promptFileContextLabel,onClick:function(){return i({path:o})},children:["included"===t.inclusionStatus?(0,r.tZ)(La.Z,{path:t.path}):(0,r.tZ)(Ee.Z,{color:v.TV.foregroundDimmest}),(0,r.tZ)(y.xv,{color:"included"===t.inclusionStatus?"dimmer":"dimmest",children:a})]})}),(0,r.tZ)(ne.hU,{alt:"",tooltipHidden:!0,tooltipContents:null,tooltipPlacement:"top",onClick:n,size:24,css:[gy.buttonRemoveFileContext],children:(0,r.tZ)(st.Z,{size:16})})]})})}var wy=n(78810),xy=n(5622),Cy=n(56412),ky=n(17436),Sy=n(11602);var Ey=(0,Z.X)({surface:[v.l0.flex.growAndShrink(0),v.l0.borderRadius(8),v.l0.m(8),v.l0.position.relative,{marginTop:"auto"}],messageBoxContainer:[v.l0.p(8)],quotaLimitContainer:[v.l0.p(8),v.l0.colWithGap(8),v.l0.position.relative,{marginTop:"auto"}]});function Ty(e){var t=(0,a.useState)(!1),n=t[0],i=t[1],l=Boolean((0,gf.useRouter)().query.hideChatInput),c=(0,Pm.gp)(),s=(0,o.Z)((0,Pm.Jc)(),2),u=s[0],d=s[1],f=(0,Pm.ql)(),h=(0,X.Vg)((0,gf.useRouter)()),p=(0,a.useState)(!1),m=p[0],v=p[1],y=(0,Pg.v)(),Z=(0,Gg.P)(e.model),b=(0,Ig.yL)(e.model).messageCharacters,w=(0,ky.Q)(),x=function(){(0,br.j)(br.U3.GHOSTWRITER_CHAT_INPUT_FOCUSED)},C=function(e){var t=e.enableBridge,n=e.model,r=e.sendChatMessage,i=e.abortResponse,l=(0,o.Z)((0,Pm.Jc)(),2),c=l[0],s=(l[1],(0,Pm.J)()),u=(0,Pm.gp)(),d=(0,Pg.v)(),f=(0,Gg.P)(n);(0,a.useEffect)((function(){if(t){var e=function(e){return(0,_g.I6)(e,(function(e){var t=e.type;switch(d(!1),t){case Bg.cF.GHOSTWRITER_CHAT_SEND:r(e.chatMessage),(0,_g.gU)(e.id);break;case Bg.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:i(),(0,_g.gU)(e.id);break;default:(0,Al.Z)(t)}}))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}}),[i,t,r,d]);var h=(0,a.useCallback)((function(){var e={messageType:Bg.cF.GHOSTWRITER_CHAT_FOCUS_INPUT};(0,_g.bG)(e,Ta()())}),[]);return(0,a.useEffect)((function(){var e=(0,Ig.yL)(f).messageCharacters,t={messageType:Bg.cF.GHOSTWRITER_CHAT_STATE,chatInputText:c,isSending:u,showStopGenerating:s,characterLimit:e};(0,_g.bG)(t,Ta()())}),[c,f,s,u]),{focusNativeMobileInput:h}}({enableBridge:h,model:Z,sendChatMessage:function(e){f({chatMessage:{type:"chat",text:e}})},abortResponse:function(){E&&R()}}).focusNativeMobileInput,k=(0,a.useRef)(null),S=(0,a.useCallback)((function(){var e;(x(),h)?C():null===(e=k.current)||void 0===e||e.focus()}),[C,h]);(0,a.useEffect)((function(){h&&S()}),[C,S,h]),(0,a.useEffect)((function(){if(c||v(!1),m){var e=setTimeout((function(){v(!1)}),2e3);return function(){clearTimeout(e)}}}),[c,m]),(0,a.useEffect)((function(){d((function(e){return e.slice(0,b)}))}),[d,b]);var E=(0,Dg.j3)(),T=(0,Dg.em)(),R=(0,a.useCallback)((function(){(0,br.j)(br.U3.GHOSTWRITER_CHAT_RESPONSE_STOPPED),T(),S()}),[T,S]),D=function(){var e=(0,Sg.Lw)(),t=(0,xy.Tt)(),n=(0,Sg.T9)().useAdvancedModel,r=(0,ky.Q)();return t?e?n?t.advancedModelUsage<t.advancedModelLimit?null:{type:"advanced",text:"Quota reached. Refreshes ".concat((0,Cy.Z)(new Date(t.advancedModelTTLEnd),"do MMM, hh:mm a"))}:null:t.basicModelUsage<t.basicModelLimit?null:{type:"basic",text:"100% quota reached. Upgrade to ".concat(r," to get unlimited quota.")}:null}(),I=u.length===b;return l?null:D?(0,r.BX)(g.G,{css:Ey.quotaLimitContainer,children:[(0,r.tZ)(Re.E,{icon:(0,r.tZ)(Ee.Z,{}),colorway:"red",text:D.text}),"basic"===D.type?(0,r.tZ)(Se.zx,{onClick:function(){return i(!0)},colorway:"blurple",text:"Upgrade to ".concat(w)}):null,(0,r.tZ)(yo.u,{noPadding:!0,maxWidth:600,isOpen:n,onRequestClose:function(){i(!1)},children:(0,r.tZ)(Sy.Z,{planToPush:wy.ii,powerUp:"ghostwriter",context:"ai_prompt_editor",surface:"ghostwriter_power_up_dialog",noCyclesOption:!0,onCheckoutComplete:function(){i(!1)}})})]}):(0,r.tZ)(De.Tg,{elevated:!0,css:Ey.surface,children:(0,r.BX)(g.G,{css:Ey.messageBoxContainer,children:[(0,r.tZ)(yy,{text:u,messageCharacters:b,atMaxMessageLength:I}),(0,r.tZ)(sy,{currentUser:e.currentUser,setPromptEditor:function(t){k.current=t,e.setPromptEditor(t)},messageCharacters:b,onFocus:function(){x(),y(!1)},onStopGenerating:R,text:u,setText:d,showCantSendMessage:m,setShowCantSendMessage:v})]})})}var Ry=n(75615),Dy=n(6837),Iy=n(21698),_y=n(14437),By=(0,Z.X)({root:[v.l0.rowWithGap(8),v.l0.align.center,v.l0.p(4),{borderBottom:"1px solid "+v.TV.outlineDimmest}],right:[v.l0.flex.growAndShrink(1),v.l0.align.end]});function Gy(){var e=(0,Xm.Cp)(),t=(0,a.useState)(!1),n=t[0],i=t[1],o=new Date(null===e?Date.now():e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return(0,r.BX)(g.G,{css:By.root,children:[(0,r.tZ)(g.G,{children:(0,r.BX)(y.xv,{variant:"small",color:"dimmer",children:[o," Session"]})}),(0,r.tZ)(g.G,{css:By.right,children:(0,r.tZ)(Ay,{onUpgrade:function(){return i(!0)}})}),(0,r.tZ)(yo.u,{noPadding:!0,maxWidth:600,isOpen:n,onRequestClose:function(){i(!1)},children:(0,r.tZ)(Sy.Z,{planToPush:wy.ii,powerUp:"ghostwriter",context:"ai_model_selector",surface:"ghostwriter_power_up_dialog",noCyclesOption:!0,onCheckoutComplete:function(){i(!1)}})})]})}var Py=(0,Z.X)({root:[v.l0.borderRadius(8),v.l0.rowWithGap(0),v.l0.align.center,v.l0.p(2)],item:[v.l0.borderRadius(8),v.l0.rowWithGap(8),v.l0.justify.center,v.l0.align.center,v.l0.px(8),v.l0.height(26),v.l0.cursor.pointer,v.l0.minWidth(104),{'&[data-selected="true"] span, &:hover span':{color:v.TV.foregroundDefault},'&[data-selected="true"] svg, &:hover svg':{opacity:1},'& span, &[data-disabled="true"]:hover span':{color:v.TV.foregroundDimmer},'& svg, &[data-disabled="true"]:hover svg':{opacity:.8}}],input:[v.l0.visuallyHidden],popover:[v.l0.width(260),v.l0.top(0),v.l0.left(0),v.l0.position.absolute,v.l0.p(8),v.l0.shadow(2),v.l0.borderRadius(8),v.l0.border({color:v.TV.outlineDimmer,style:"solid",width:v.TV.borderWidthDefault})],proPill:[v.l0.borderRadius(4),v.l0.height(16)]});function Ay(e){var t=function(e,t){w.current&&clearTimeout(w.current);var n=function(e){var t=e.getBoundingClientRect();return{x:Math.min(window.innerWidth-268,t.x+t.width/2-130),y:t.y+t.height+8}}(e),r=n.x,i=n.y;Z({model:t,x:r,y:i})},n=function(){w.current&&clearTimeout(w.current),w.current=setTimeout((function(){b.current||Z(null)}),600)},i=(0,a.useId)(),o=(0,a.useId)(),l=(0,a.useId)(),c=(0,Sg.T9)(),s=c.useAdvancedModel,u=c.setUseAdvancedModel,d=s?"advanced":"basic",f=(0,Sg.Lw)(),h=(0,xy.Tt)(),p=(0,ky.Q)(),m=(0,a.useState)(null),g=m[0],Z=m[1],b=(0,a.useRef)(!1),w=(0,a.useRef)(null);return(0,r.BX)(r.HY,{children:[(0,r.BX)(De.Tg,{elevated:!0,id:i,name:"model",tag:"fieldset",css:Py.root,children:[(0,r.BX)(Ny,{id:o,name:"Basic",selected:"basic"===d,onMouseEnter:function(e){t(e.currentTarget,"basic")},onMouseLeave:function(){return n()},onClick:function(){return u(!1)},children:[(0,r.tZ)(Iy.Z,{size:12})," ",(0,r.tZ)(y.xv,{variant:"small",multiline:!1,children:"Basic"})]}),(0,r.BX)(Ny,{disabled:!f,id:l,name:"Advanced",selected:"advanced"===d,onMouseEnter:function(e){t(e.currentTarget,"advanced")},onMouseLeave:function(){return n()},onClick:function(){f&&u(!0)},children:[(0,r.tZ)(_y.Z,{size:12,color:v.TV.blurpleDefault})," ",(0,r.tZ)(y.xv,{variant:"small",multiline:!1,children:"Advanced"}),f?null:(0,r.tZ)(je.D,{css:Py.proPill,text:p})]})]}),g&&h?(0,r.tZ)(Hg.h,{children:(0,r.tZ)(De.Tg,{css:Py.popover,elevated:!0,style:{transform:"translate(".concat(g.x,"px, ").concat(g.y,"px)")},onMouseEnter:function(){b.current=!0},onMouseLeave:function(){b.current=!1,n()},children:"basic"===g.model?(0,r.tZ)(Oy,{onUpgrade:e.onUpgrade,hasAccessToAdvancedModel:f,quota:{used:h.basicModelUsage,total:h.basicModelLimit}}):(0,r.tZ)(Xy,{onUpgrade:e.onUpgrade,hasAccessToAdvancedModel:f,quota:{used:h.advancedModelUsage,total:h.advancedModelLimit}})})}):null]})}function Ny(e){var t=e.id,n=e.name,i=e.selected,o=e.disabled,a=e.children,l=e.className,c=e.onMouseEnter,s=e.onMouseLeave,u=e.onClick;return(0,r.BX)(De.Tg,{"data-selected":i,"data-disabled":o,css:Py.item,elevated:i,tag:"label",className:l,onMouseEnter:c,onMouseLeave:s,onClick:u,children:[(0,r.tZ)("input",{css:Py.input,id:t,name:n,checked:i,type:"radio",disabled:o}),a]})}var Uy=(0,Z.X)({root:[v.l0.colWithGap(8)],content:[v.l0.colWithGap(4)],header:[v.l0.rowWithGap(4),v.l0.align.center]});function Ly(e){var t=e.used,n=e.total,i=(0,ky.Q)();if(t/n<.5)return null;var o=t===n;return(0,r.tZ)(Re.E,{icon:(0,r.tZ)(Ee.Z,{}),colorway:o?"red":"warning",text:o?"100% quota reached. Upgrade to ".concat(i," to get unlimited quota."):"Approaching quota. Upgrade to ".concat(i," to get unlimited quota.")})}function Oy(e){var t=e.hasAccessToAdvancedModel,n=e.quota,i=e.onUpgrade,o=(0,ky.Q)();return(0,r.BX)(g.G,{css:Uy.root,children:[(0,r.BX)(g.G,{css:Uy.content,children:[(0,r.BX)(g.G,{css:Uy.header,children:[(0,r.tZ)(Iy.Z,{size:12}),(0,r.tZ)(y.xv,{variant:"small",children:"Basic"})]}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmest",children:"Faster. For common tasks like writing boilerplate code or reformatting data."})]}),t?(0,r.BX)(y.xv,{variant:"small",children:["Unlimited for ",o]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Fy,{used:n.used,total:n.total}),(0,r.tZ)(Ly,{used:n.used,total:n.total}),(0,r.tZ)(Se.zx,{text:"Upgrade to ".concat(o),colorway:"blurple",onClick:function(){return i()}})]})]})}function Xy(e){var t=e.hasAccessToAdvancedModel,n=e.quota,i=e.onUpgrade,o=(0,ky.Q)();return(0,r.BX)(g.G,{css:Uy.root,children:[(0,r.BX)(g.G,{css:Uy.content,children:[(0,r.BX)(g.G,{css:Uy.header,children:[(0,r.tZ)(_y.Z,{size:12,color:v.TV.blurpleDefault}),(0,r.tZ)(y.xv,{variant:"small",color:t?"default":"dimmer",children:"Advanced"}),t?null:(0,r.tZ)(je.D,{css:Py.proPill,text:"".concat(o," only"),color:v.TV.foregroundDimmer})]}),(0,r.BX)(y.xv,{variant:"small",color:"dimmest",children:["For complex code generation, editing, and explanation. Only available for ",o,"."]})]}),t?(0,r.tZ)(Fy,{used:n.used,total:n.total}):(0,r.tZ)(Se.zx,{text:"Upgrade to ".concat(o),colorway:"blurple",onClick:function(){return i()}})]})}var My=(0,Z.X)({root:[v.l0.rowWithGap(8),v.l0.align.center],left:[v.l0.rowWithGap(2),v.l0.flex.growAndShrink(1)],right:[v.l0.width("50%")],bar:[v.l0.height(6)]});function Fy(e){var t=e.total-e.used,n=Math.max(0,Math.min(100,Math.round(t/e.total*100)));return(0,r.BX)(g.G,{css:My.root,children:[(0,r.tZ)(g.G,{css:My.left,children:e.used===e.total?(0,r.tZ)(y.xv,{variant:"small",color:"dimmest",children:"No qutoa left"}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.xv,{variant:"small",children:[n,"%"]}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmest",children:"left"})]})}),(0,r.tZ)(g.G,{css:My.right,children:(0,r.tZ)(ln.J,{css:My.bar,tooltipHidden:!0,current:t,total:e.total,color:v.TV.blurpleDefault})})]})}function Wy(e){var t,n=e.paneIsActive,i=(0,X.T3)(),l=(0,o.Z)((0,Pm.zu)(),1)[0],c=l.filter((function(e){return"feedback"!==e.type})),s=(0,Dy.M0)();(0,Ry.$h)();var u=(0,Sg.Ne)(),d=u.currentUserData,h=u.currentUserLoading,p=u.currentUserError,m=u.chatModel,y=(0,o.Z)((0,Pm.oq)(),2),Z=(y[0],y[1]),b=(0,f.Z)((function(e){var t=e.height;Z(t)}),{type:"throttle",wait:10}),w=(0,a.useState)(!1),C=w[0],k=w[1],S=null===d||void 0===d||null===(t=d.currentUser)||void 0===t?void 0:t.isStaff,E=(0,o.Z)((0,kg.RN)(),2),T=E[0],R=E[1],D=(0,Pm.ZT)(),I=(0,mt.Z)((function(){return[{type:"action",label:"Clear chat history",icon:(0,r.tZ)(Ue.Z,{}),run:function(){(0,br.j)(br.U3.GHOSTWRITER_CHAT_CLEARED),D()}}]}),[D]),_=(0,mt.Z)((function(){var e=[];if(S){var t={match:Oa.pl,data:{type:"action",icon:(0,r.tZ)(Iv.Z,{fill:T?v.TV.accentPrimaryDefault:v.TV.foregroundDefault}),label:"Toggle debug mode",run:function(){R((function(e){return!e}))}}};e.push(t)}return e}),[T,R,S]),B=(0,a.useState)(null),G=B[0],P=B[1];(0,x.Wk)((function(){return G}),[G]),(0,x.L5)((function(){return{actions:I,commands:_}}),[I,_]);var A=(0,a.useRef)(null),N=(0,o.Z)((0,bg.Z_)(),2),U=N[0],L=N[1],O=(0,o.Z)((0,bg.Z9)(),2),M=O[0],F=O[1],W=(0,a.useCallback)((function(){M?F(!1):null==A.current||A.current.scrollHeight-A.current.scrollTop!==A.current.clientHeight||!n&&i?L(!1):L(!0)}),[M,L,F,n,i]);return h||!s?(0,r.tZ)(gg,{}):p||!(null===d||void 0===d?void 0:d.currentUser)?(0,r.BX)(g.G,{children:["error:"," ",(null===p||void 0===p?void 0:p.message)||"User not found, please log in or reload"]}):(0,r.BX)(g.G,{innerRef:b,css:[v.l0.flex.column,v.l0.maxHeight("100%"),v.l0.maxWidth("100%"),v.l0.flex.grow(1),v.l0.position.relative,!l.length&&{backgroundColor:dg(.03)}],dataCy:"ghostwriter-chat",children:[(0,r.tZ)(xg.Z,{isOpen:C,setOpen:k,feature:wg.l.GhostWriter}),(0,r.tZ)(Gy,{}),l.length?(0,r.tZ)(r.HY,{children:(0,r.tZ)(g.G,{innerRef:A,css:[v.l0.colWithGap(16),v.l0.overflow("auto"),v.l0.flex.growAndShrink(1),v.l0.pt(12)],onScroll:W,role:"log",children:l.map((function(e,t){var n=U&&t===l.length-1;return"feedback"===e.type?(0,r.tZ)(Rg,{message:e,currentUser:d.currentUser,autoScroll:n}):(0,r.tZ)(yg.v,{message:e,autoScroll:n,isLastAssistantMessage:"Assistant"===e.attribution&&c[c.length-1].id===e.id},e.id)}))})}):(0,r.tZ)(vg,{promptEditor:G,username:d.currentUser.username}),(0,r.tZ)(Ty,{currentUser:d.currentUser,setPromptEditor:P,model:m})]})}var Hy=function(e){var t=(0,ro.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,Zg.e)({performPaneOperation:e.performPaneOperation}),t?(0,r.tZ)(Cg.Z,{textVariant:"headerDefault",showImage:!0}):(0,r.tZ)(Wy,{paneIsActive:e.paneIsActive})},Vy=I.Type.Object({type:I.Type.Literal("ghostwriterChat")}),zy={Content:function(e){var t=e.options;return(0,r.tZ)(Hy,{paneIsActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var t=e.size;return(0,r.tZ)(ag.Z,{size:t})},getTitle:function(){return"AI"},decode:function(e){return _.B4.Decode(Vy,e)}},jy=n(44312),qy=n(79028),$y=(0,Z.X)({item:[Bc.gU.listItem,v.l0.reset.button,v.l0.justify.spaceBetween,v.l0.px(8),v.l0.py(4),v.l0.borderRadius(4)],itemMain:[v.l0.flex.growAndShrink(1)],itemSecondary:[v.l0.color.foregroundDimmest],flex:[v.l0.rowWithGap(8),v.l0.align.center],message:[v.l0.flex.shrink(1),v.l0.overflowX("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],rightContent:[v.l0.rowWithGap(4),v.l0.align.center]});function Yy(e){var t=e.problem,n=e.onClick,i=(0,Qa.Z)(e,["problem","onClick"]),o=t.range.start.line+1,a=t.range.start.character;return(0,r.BX)(g.G,{css:[$y.flex,$y.item],onClick:n?function(){return n(t)}:void 0,children:[(0,r.BX)(g.G,{css:[$y.flex,$y.itemMain],children:[(0,r.tZ)(qy.Z,{severity:t.severity}),(0,r.tZ)(y.xv,{css:$y.message,children:t.message})]}),(0,r.BX)(g.G,{css:$y.rightContent,children:[(0,r.tZ)(g.G,{css:$y.itemSecondary,children:(0,r.tZ)(y.xv,{children:"Ln ".concat(o,", Col ").concat(a+1)})}),(0,r.tZ)(g.G,{children:null===i||void 0===i?void 0:i.rightContent})]})]})}var Ky=(0,Z.X)({badge:[v.l0.backgroundColor.backgroundHighest,v.l0.borderRadius(4),{padding:"0 0.35em"}],container:[v.l0.p(8),v.l0.colWithGap(8)],header:[v.l0.py(4),v.l0.justify.spaceBetween,v.l0.flex.grow(1),v.l0.pr(16),v.l0.height(24)],result:[v.l0.borderRadius(4),v.l0.overflow("hidden")],problems:[v.l0.px(6),v.l0.py(6)],item:[Bc.gU.listItem,v.l0.reset.button,v.l0.justify.spaceBetween,v.l0.px(8),v.l0.py(4),v.l0.overflow("hidden"),v.l0.cursor.pointer,v.l0.borderRadius(4),{"&:focus-visible":[v.l0.focusRing],"&:hover, &:focus-visible":[v.l0.backgroundColor.backgroundHighest]}],itemMain:[v.l0.flex.growAndShrink(1)],itemSecondary:[v.l0.color.foregroundDimmest],flex:[v.l0.rowWithGap(8),v.l0.align.center],message:[v.l0.flex.shrink(1),v.l0.overflowX("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function Qy(e){var t=e.isActive,n=e.performPaneOperation,o=(0,a.useState)({}),l=o[0],c=o[1],s=(0,Im.nC)(),u=(0,x.dr)(),d=(0,a.useCallback)((function(){var e=!0,t=!1,n=void 0;try{for(var r,o=function(){var e,t=r.value;if("codeEditor"!==t[1].type)return"continue";var n=u(t[0]);if(!n||"codeEditor"!==n.type)return"continue";var o=t[1].data.path,a=null===(e=n.fetchProblems)||void 0===e?void 0:e.call(n);o&&a&&c((function(e){return(0,be.Z)((0,Ze.Z)({},e),(0,i.Z)({},o,a))}))},a=s()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0)o()}catch(l){t=!0,n=l}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}),[u,s]);return(0,a.useEffect)((function(){t&&d()}),[t,d]),(0,x.L5)((function(){return{type:"problems",updateProblems:function(e,t){c((function(n){return(0,be.Z)((0,Ze.Z)({},n),(0,i.Z)({},e,t))}))}}}),[c]),(0,r.BX)(g.G,{css:Ky.container,children:[Object.values(l).some((function(e){return e.length>0}))?null:(0,r.tZ)(y.xv,{children:"No problems detected in this workspace"}),Object.keys(l).map((function(e){return 0===l[e].length?null:(0,r.tZ)(De.Tg,{elevated:!0,css:Ky.result,children:(0,r.tZ)(nn.Q,{chevron:"end",defaultExpanded:!0,headerContent:(0,r.BX)(g.G,{css:[Ky.flex,Ky.header],children:[(0,r.BX)(g.G,{css:Ky.flex,children:[(0,r.tZ)(La.Z,{path:e}),(0,r.tZ)(y.xv,{children:e})]}),(0,r.tZ)(g.G,{css:Ky.badge,children:l[e].length>99?"99+":l[e].length})]}),children:(0,r.tZ)(g.G,{css:Ky.problems,children:l[e].map((function(t,i){var o=t.range.start.line+1,a=t.range.start.character;return(0,r.tZ)(Yy,{problem:t,onClick:function(){n({operation:"open",pane:{type:"codeEditor",data:{path:e,line:o,col:a}},secondary:!0})}},"".concat(o,"-").concat(a,"-").concat(i))}))})},e)})}))]})}var Jy=I.Type.Object({type:I.Type.Literal("problems")}),eZ={Content:function(e){var t=e.options,n=t.isActive,i=t.performPaneOperation;return(0,r.tZ)(Qy,{isActive:n,performPaneOperation:i})},Icon:function(){return(0,r.tZ)(jy.Z,{})},getTitle:function(){return"Problems"},decode:function(e){return _.B4.Decode(Jy,e)}};function tZ(){return{codeEditor:P.D,webview:ra.R,media:Ma,pedit:Tm,vnc:la,unitTests:Bm,adminPanel:Bv,runnerOutput:W,shell:fa,packager:xt,systemDependencies:Rt,envEditor:q,draw:Aa,git:Eh,diff:_l,history:mm,database:Tn,neon:na,markdown:G,sshConfigurator:rg,ghostwriterChat:zy,problems:eZ}}},24531:function(e,t,n){n.d(t,{kz:function(){return x},F3:function(){return h},fK:function(){return Z},ME:function(){return s},DQ:function(){return d},Dp:function(){return l},WQ:function(){return f},Ur:function(){return u},RX:function(){return c},b:function(){return m},Se:function(){return w}});var r=n(4561),i=n(43312),o=n(88965),a=n(87978);function l(e){var t=e.path;return t?(0,a.T3)(t)?"media":(0,a.sL)(t)?"draw":(0,a.IQ)(t)?"pedit":"codeEditor":"codeEditor"}function c(e){return"codeEditor"===e||"media"===e||"pedit"===e||"draw"===e||"history"===e}function s(e){return e.filter((function(e){return e.type===r.Tv.File})).map((function(e){return{type:l({path:e.path}),data:{path:e.path}}}))}function u(e){return c(e.type)}function d(e){return u(e)?e.data.path:null}function f(e){return"extension"===e.type}var h=(0,i.iv)([o.l0.width("100%"),o.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"}]),p=["autograder","education","instructions","markdown","threadInbox","extensionStore","chat","docs","webview","vnc","runnerOutput","git","packager","envEditor","debugger","tutorial","database","neon","replAuth","autograder","unitTests","education","preferences","deployments","ghostwriterChat","extensionDevtools","problems"];function m(e){return p.includes(e)}var v=n(74985),g=n(50959),y={type:"commands",data:{autoFocus:!1}};function Z(e){var t=e.config;return{Icon:function(e){var n=e.pane,r=e.size,i=void 0===r?16:r,o=t[n.type]?n:y,a=t[o.type].Icon;return(0,v.tZ)(a,{pane:o,size:i})},Content:function(e){var n=e.pane,r=e.options,i=t[n.type]?n:y,o=t[i.type].Content;return(0,v.tZ)(o,{pane:i,options:r})},getTitle:function(e){var n=t[e.type]?e:y;return t[n.type].getTitle(n)},decode:function(e,n){var r=null;try{var i;r=null===(i=t[e])||void 0===i?void 0:i.decode(n)}catch(o){}return r}}}var b=(0,g.createContext)(null);function w(){var e=(0,g.useContext)(b);if(!e)throw new Error("Expected PaneUI in context");return e}var x=b.Provider},45246:function(e,t,n){n.d(t,{NH:function(){return c},Qt:function(){return u},R3:function(){return s},_s:function(){return o},p5:function(){return d}});var r=n(90234),i=n(5105),o=(0,r.cn)(null),a=(0,r.cn)((function(e){var t=e(o);return(null===t||void 0===t?void 0:t.isVisible)?t.path:null})),l=(0,r.cn)(null,(function(e,t,n,r){switch(r.type){case"focus":return void t(o,{hasFocus:!0,isVisible:!0,position:r.position,path:n});case"update":return void t(o,{hasFocus:r.hasFocus,isVisible:!0,position:r.position,path:n});case"blur":var i;return void t(o,(function(e){return{hasFocus:!1,isVisible:Boolean(null===e||void 0===e?void 0:e.isVisible),position:null!==(i=null===e||void 0===e?void 0:e.position)&&void 0!==i?i:{line:1,column:1,offset:0},path:n}}));case"unmount":return void t(o,null);case"hidden":var a;return void t(o,(function(e){return{hasFocus:!1,isVisible:!1,position:null!==(a=null===e||void 0===e?void 0:e.position)&&void 0!==a?a:{line:1,column:1,offset:0},path:n}}));case"unhidden":var l;return void t(o,(function(e){return{hasFocus:Boolean(null===e||void 0===e?void 0:e.hasFocus),isVisible:!1,position:null!==(l=null===e||void 0===e?void 0:e.position)&&void 0!==l?l:{line:1,column:1,offset:0},path:n}}))}}));function c(){return(0,i.$X)(l)}function s(){return(0,i.Hg)(a)}function u(){return(0,i.XD)(o)}function d(){return(0,i.yL)(o)}},86813:function(e,t,n){n.d(t,{eA:function(){return P},_s:function(){return S._s},ex:function(){return m},aG:function(){return G.aG},zo:function(){return Z},t9:function(){return _},R3:function(){return S.R3},pV:function(){return g},Qt:function(){return S.Qt},AA:function(){return b},Y_:function(){return x},b2:function(){return D},ev:function(){return C},Bx:function(){return y},VX:function(){return v},OM:function(){return B},Cp:function(){return R},_o:function(){return k},Gg:function(){return p},QH:function(){return w}});var r=n(74985),i=n(5105),o=n(9970),a=n(92153),l=n(90234),c=n(85919),s=(0,l.cn)(null),u=(0,l.cn)([]),d=(0,l.cn)(null,(function(e,t,n){var r=e(u),i=[n].concat((0,o.Z)(r.filter((function(e){return e!==n})))).slice(0,20);t(u,i)})),f=(0,l.cn)(null,(function(e,t,n){var r=e(u),i=r.indexOf(n.path);-1!==i&&t(u,(0,a.ZP)(r,(function(e){"delete"===n.type?e.splice(i,1):e.splice(i,1,n.to)})))})),h=(0,l.cn)(null);function p(){return(0,i.$X)(f)}function m(){return(0,i.Hg)(s)}function v(){return(0,i.$X)(s)}function g(){return(0,i.XD)(s)}function y(){return(0,i.Hg)(u)}function Z(){return(0,i.$X)(d)}function b(){return(0,i.XD)(u)}function w(){var e=(0,i.yL)(s);return(0,c.Z)((function(){return function(t){return e.subscribe(t)}}),[e])}function x(){return(0,i.yL)(s)}function C(){return(0,i.Hg)(h)}function k(){return(0,i.$X)(h)}var S=n(45246),E=(0,l.cn)(new Map),T=(0,l.cn)(null,(function(e,t,n){t(E,(function(e){return(0,a.ZP)(e,(function(e){n.indicatorType?e.set(n.paneType,n.indicatorType):e.delete(n.paneType)}))}))}));function R(){return(0,i.$X)(T)}function D(e){var t=e.paneType;return(0,i.Hg)(function(e){var t=e.paneType;return(0,c.Z)((function(){return(0,l.cn)((function(e){return t?e(E).get(t):void 0}))}),[t])}({paneType:t}))}var I=(0,n(15859).O4)("areHiddenFilesVisible",!1);function _(){return(0,i.Hg)(I)}function B(){return(0,i.$X)(I)}var G=n(71187);function P(e){var t=(0,i.ns)();return(0,r.tZ)(i.B3.Provider,{value:t,children:e.children})}},10267:function(e,t,n){n.d(t,{L5:function(){return g},Wk:function(){return T},Xq:function(){return _},Y6:function(){return y},bS:function(){return R},c4:function(){return C},dr:function(){return Z},u1:function(){return x}});var r=n(57135),i=n(9970),o=n(96583),a=n(50959),l=n(90234),c=n(92153),s=n(85919),u=n(15859),d=n(51467),f=n(5105),h=n(46130),p=n(25602),m=(0,l.cn)({}),v=(0,l.cn)(null,(function(e,t,n){t(m,(function(e){return(0,c.ZP)(e,(function(e){null===n.actions?delete e[n.paneId]:e[n.paneId]=n.actions}))}))}));function g(e,t){var n=I(),r=(0,f.$X)(v),o=(0,d.Z)(e);(0,a.useEffect)((function(){var e;return r({paneId:n,actions:null!==(e=o.current())&&void 0!==e?e:null}),function(){r({paneId:n,actions:null})}}),[r,n,o].concat((0,i.Z)(t)))}function y(e){var t=(0,s.Z)((function(){return(0,u.kv)(m,(function(t){return e?t[e]:{}}))}),[e]);return(0,f.Hg)(t)}function Z(){var e=(0,f.XD)(m);return(0,a.useCallback)((function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null}),[e])}var b=(0,l.cn)(new Map),w=(0,l.cn)(null,(function(e,t,n,r){t(b,(function(e){var t=new Map(e);return null===r?t.delete(n):r&&t.set(n,r),t}))}));function x(){return(0,f.$X)(w)}function C(){var e=function(){var e=(0,f.rF)();return(0,a.useCallback)((function(t){var n=(0,u.kv)(m,(function(e){return e[t]}));return e(n)}),[e])}();return(0,a.useCallback)(function(){var t=(0,r.Z)((function(t){return(0,o.__generator)(this,(function(n){return[2,new Promise((function(n){var r=e(t);if(r.current)n(r.current);else var i=r.subscribe((function(e){e&&(n(e),i())}))}))]}))}));return function(e){return t.apply(this,arguments)}}(),[e])}var k=(0,l.cn)(new Map),S=(0,l.cn)(null,(function(e,t,n){t(k,(function(e){return(0,c.ZP)(e,(function(e){null===n.focus?e.delete(n.paneId):e.set(n.paneId,n.focus)}))}))}));function E(e){var t=document.activeElement;return!(!e||!t)&&(e!==t&&e.contains(t))}function T(e,t){var n=(0,d.Z)(e),r=I(),o=(0,h.T3)(),l=(0,a.useRef)(!o),c=(0,f.$X)(S),s=(0,f.XD)(p.J1),u=(0,f.XD)(b),m=(0,a.useState)(null),v=m[0],g=m[1];return(0,a.useEffect)((function(){n.current&&g(n.current())}),t?(0,i.Z)(t):[]),(0,a.useEffect)((function(){var e=function(e){s()===r&&e.target!==u().get(r)&&(l.current=!1)};return document.body.addEventListener("focus",e,!0),function(){document.body.removeEventListener("focus",e,!0)}}),[s,u,r]),(0,a.useEffect)((function(){if(v){var e=function(){v.focus()};return l.current&&s()===r&&!E(u().get(r))&&e(),c({paneId:r,focus:e}),function(){c({paneId:r,focus:null})}}}),[v,c,r,s,u,o]),g}function R(){var e=(0,f.XD)(k),t=(0,f.XD)(b);return(0,s.Z)((function(){return function(n){var r=e().get(n),i=t().get(n);E(i)||(r?r():null===i||void 0===i||i.focus())}}),[e,t])}var D=(0,a.createContext)(null);function I(){var e=(0,a.useContext)(D);if(!e)throw new Error("Expected pane id in context");return e}var _=D.Provider},25602:function(e,t,n){n.d(t,{AA:function(){return U},J1:function(){return h},Np:function(){return I},Vu:function(){return B},WU:function(){return p},Xo:function(){return P},ex:function(){return N},fg:function(){return L},gv:function(){return G},jY:function(){return A},nC:function(){return _}});var r=n(2272),i=n(9970),o=n(24531),a=n(81202),l=n.n(a),c=n(92153),s=n(50959),u=n(90234),d=n(5105),f=n(85919),h=(0,u.cn)(null);function p(){return(0,d.XD)(h)}var m=(0,u.cn)(new Map),v=(0,u.cn)([]),g=(0,u.cn)(null,(function(e,t,n){t(m,(function(e){return(0,c.ZP)(e,(function(e){var t=e.get(n.paneId),r=Date.now();if(t){var i=t.panes[t.panes.length-1];t.lastActiveAt=r,l()(n.pane,i)||t.panes.push(n.pane)}else e.set(n.paneId,{panes:[n.pane],lastActiveAt:r})}))})),t(h,n.paneId)})),y=(0,u.cn)(null,(function(e,t,n){var r=e(h),i=e(m).get(n);i&&t(v,(function(e){return(0,c.ZP)(e,(function(e){e.push(i.panes)}))})),t(m,(function(e){return(0,c.ZP)(e,(function(e){e.delete(n)}))})),r===n&&t(h,null)})),Z=(0,u.cn)(null,(function(e,t,n){t(m,(function(e){return(0,c.ZP)(e,(function(e){var t=e.get(n);t&&(t.lastActiveAt=Date.now())}))})),t(h,n)})),b=(0,u.cn)(null,(function(e,t){t(h,null)})),w=(0,u.cn)((function(e){return(0,i.Z)(e(m).values()).sort((function(e,t){return t.lastActiveAt-e.lastActiveAt})).map((function(e){return e.panes}))})),x=(0,u.cn)((function(e){var t=e(m),n=[];return t.forEach((function(e,t){var r=e.panes[e.panes.length-1];r&&n.push([t,r,e.lastActiveAt])})),n.sort((function(e,t){return e[2]-t[2]}))})),C=(0,u.cn)((function(e){var t=[],n=!0,i=!1,a=void 0;try{for(var l,c=e(x)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=(0,r.Z)(l.value,2),u=(s[0],s[1]),d=(0,o.Ur)(u)?u.data.path:null;d&&t.push(d)}}catch(f){i=!0,a=f}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return t})),k=(0,u.cn)((function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var a,l=e(w)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c,s=a.value;s.length<=1||(c=t).push.apply(c,(0,i.Z)(s.slice(0,-1)))}}catch(y){r=!0,o=y}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}var u=!0,d=!1,f=void 0;try{for(var h,p=e(v)[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m,g=h.value;(m=t).push.apply(m,(0,i.Z)(g))}}catch(y){d=!0,f=y}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}return t})),S=(0,u.cn)(null,(function(e,t){var n=e(v).flat().pop();return t(v,(function(e){return(0,c.ZP)(e,(function(e){var t=e.pop();t&&t.pop()}))})),n})),E=(0,u.cn)((function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,l=e(k)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value,s=(0,o.Ur)(c)?c.data.path:null;s&&t.push(s)}}catch(u){r=!0,i=u}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return t})),T=(0,u.cn)((function(e){return(0,i.Z)(e(C)).concat((0,i.Z)(e(E)))})),R=(0,u.cn)((function(e){var t=e(h);if(!t)return null;var n,r=e(m).get(t);return r&&null!==(n=r.panes[r.panes.length-1])&&void 0!==n?n:null})),D=(0,u.cn)((function(e){var t=e(R);return t&&(0,o.Ur)(t)&&t.data.path||null}));function I(e,t){var n=(0,d.$X)(g),r=(0,d.$X)(y);(0,s.useEffect)((function(){n({paneId:e,pane:t})}),[n,e,t]),(0,s.useEffect)((function(){return function(){r(e)}}),[r,e])}function _(){return(0,d.XD)(x)}function B(){return(0,d.Hg)(C)}function G(){return(0,d.$X)(S)}function P(){return(0,d.$X)(Z)}function A(){return(0,d.$X)(b)}function N(){return(0,d.Hg)(D)}function U(){return(0,d.Hg)(T)}function L(){var e=(0,d.yL)(C);return(0,f.Z)((function(){return function(t){return new Promise((function(n,r){var i=e.subscribe((function(e){e.includes(t)||(i(),n())}))}))}}),[e])}},71187:function(e,t,n){n.d(t,{aG:function(){return D},HQ:function(){return T},e_:function(){return A}});var r=n(57135),i=n(2272),o=n(9970),a=n(96583),l=n(81202),c=n.n(l),s=n(72098),u=n(92153),d=n(90234),f=n(15859),h=n(5105),p=n(20854),m=n(43119),v=n(71440);function g(){var e=(0,m.Z)(["\n  query WorkspaceSessionPresence($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return g=function(){return e},e}var y=(0,v.Ps)(g());var Z=n(86763),b=n.n(Z),w=n(90437),x=n(85919),C=n(50959);function k(e,t,n){var r=n||{timestamp:Math.floor(Date.now()/1e3),activeFile:null},i=e.get(t.id);i?i.sessions.set(t.session,r):e.set(t.id,{id:t.id,username:t.name,color:(0,s.i7)((0,o.Z)(e.values())),roles:t.roles,sessions:new Map([[t.session,r]])})}var S=(0,d.cn)(new Map),E=(0,f.kv)(S,(function(e){var t=new Map,n=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i.Z)(a.value,2)[1],s=null,u=!0,d=!1,f=void 0;try{for(var h,p=c.sessions[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=(0,i.Z)(h.value,2)[1];m.activeFile&&(s&&s.timestamp>m.timestamp||(s=m))}}catch(y){d=!0,f=y}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}if(null===s||void 0===s?void 0:s.activeFile){var v=t.get(s.activeFile),g={id:c.id,username:c.username,image:c.image,color:c.color,roles:c.roles};v?v.push(g):t.set(s.activeFile,[g])}}}catch(y){r=!0,o=y}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}),c());function T(){return(0,h.yL)(E)}var R=(0,f.kv)(S,(function(e){return(0,o.Z)(e.values()).map((function(e){return{id:e.id,username:e.username,color:e.color,image:e.image}}))}),c());function D(){return(0,h.Hg)(R)}function I(e){var t=e.id,n=e.name,r=e.session,i=e.roles;return t&&n&&r&&i?{id:t,name:n,session:r,roles:i}:null}function _(e,t){if(!e.files)return null;var n=e.files.find((function(e){return e.userId===t.id&&e.session===t.session}));if(!n)return null;var r=n.timestamp?B(n.timestamp):null;return r?{activeFile:n.file||null,timestamp:r}:null}function B(e){var t=e.seconds,n=e.nanos;return"number"!==typeof t||"number"!==typeof n?null:(0,s.gs)({seconds:t,nanos:n})}var G=(0,d.cn)(null,(function(e,t,n,r){t(S,(function(e){return(0,u.ZP)(e,(function(e){var t;if(null===(t=n.roster)||void 0===t?void 0:t.user){var o=!0,a=!1,l=void 0;try{for(var c,s=n.roster.user[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=I(c.value);if(null!==u)if((null===u||void 0===u?void 0:u.id)!==r)k(e,u,_(n.roster,u))}}catch(x){a=!0,l=x}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}else if(n.join){var d=I(n.join);if(!d)return;if(d.id===r)return;k(e,d)}else if(n.part){var f=n.part,h=f.id,p=f.session;if(!h||!p)return;!function(e,t){var n=e.get(t.id);n&&(1===n.sessions.size?e.delete(t.id):n.sessions.delete(t.session))}(e,{id:h,session:p})}else if(n.fileOpened){var m=n.fileOpened,v=m.session,g=m.userId,y=m.file,Z=n.fileOpened.timestamp?B(n.fileOpened.timestamp):null;if(!Z||!v||!g||!y)return;!function(e,t){var n=e.get(t.userId);if(n){var r=n.sessions.get(t.session);r?(r.timestamp=t.timestamp,r.activeFile=t.file):n.sessions.set(t.session,{timestamp:t.timestamp,activeFile:t.file})}}(e,{timestamp:Z,session:v,userId:g,file:y})}else if(n.sessionTimestampUpdated){var b=n.sessionTimestampUpdated.session,w=n.sessionTimestampUpdated.timestamp?B(n.sessionTimestampUpdated.timestamp):null;if(!w||!b)return;!function(e,t){var n=t.session,r=t.timestamp,o=!0,a=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,i.Z)(c.value,2)[1].sessions.get(n);if(u){u.timestamp=r;break}}}catch(x){a=!0,l=x}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}(e,{timestamp:w,session:b})}else;}))}))})),P=(0,d.cn)(null,function(){var e=(0,r.Z)((function(e,t){var n,r,o,l,c,s,d,f,h,m,v;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:n=[],r=e(S),o=!0,l=!1,c=void 0;try{for(s=r[Symbol.iterator]();!(o=(d=s.next()).done);o=!0)f=(0,i.Z)(d.value,2),h=f[0],f[1].image||n.push(h)}catch(g){l=!0,c=g}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return n.length?[4,null===p.l||void 0===p.l?void 0:p.l.query({query:y,variables:{userIds:n}})]:[2];case 1:return m=a.sent(),(v=null===m||void 0===m?void 0:m.data.usersByIds)?(t(S,(function(e){return(0,u.ZP)(e,(function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=v[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=e.get(a.id);l&&(l.image=a.image)}}catch(g){n=!0,r=g}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}))})),[2]):[2]}}))}));return function(t,n){return e.apply(this,arguments)}}());function A(){var e=(0,w.d)(),t=(0,h.$X)(P),n=(0,h.$X)(G),r=(0,h.yL)(S);return(0,C.useEffect)((function(){t();var e=b()(t,2e3);return r.subscribe((function(){return e()}))}),[t,r]),(0,x.Z)((function(){return function(t){e&&n(t,e)}}),[n,e])}},13299:function(e,t,n){n.d(t,{mK:function(){return s},qm:function(){return l},xx:function(){return c}});var r=n(90234),i=n(50959),o=n(5105),a=(0,r.cn)(!1);function l(){return(0,o.Hg)(a)}function c(){var e=(0,o.$X)(a);return(0,i.useCallback)((function(){return e(!0)}),[e])}function s(e){var t=(0,o.$X)(a),n=(0,i.useRef)(!1);(0,i.useEffect)((function(){n.current||(n.current=!0,t(e))}),[t,e])}},5105:function(e,t,n){n.d(t,{$X:function(){return p},B3:function(){return s},Hg:function(){return d},XD:function(){return m},ns:function(){return c},rF:function(){return h},yL:function(){return f}});var r=n(50959),i=n(90234),o=n(71999),a=n(28999),l=n(28132);function c(){return(0,r.useState)((function(){return(0,i.MT)()}))[0]}var s=(0,r.createContext)(null);function u(){var e=(0,r.useContext)(s);if(!e)throw new Error("Expected store in context");return e}function d(e){return(0,o.Dv)(e,{store:u()})}function f(e){return(0,l.b)(e,u())}function h(){var e=u();return(0,r.useCallback)((function(t){return(0,l.c)(e,t)}),[e])}var p=function(e){return(0,o.b9)(e,{store:u()})};function m(e){return(0,a.lV)((0,r.useCallback)((function(t){return t(e)}),[e]),{store:u()})}},71887:function(e,t,n){n.d(t,{a9:function(){return a},kM:function(){return l}});var r=n(90234),i=n(5105),o=(0,r.cn)(null);function a(){return(0,i.$X)(o)}function l(){return(0,i.Hg)(o)}},98416:function(e,t,n){n.d(t,{OO:function(){return r},Uw:function(){return i},vw:function(){return o}});var r="replit-repltuned-v1-3b",i={"replit-repltuned-v1-3b":{},"replit-repltuned-v1-5-3b":{},"self-hosted-santa-1b":{infill:!0},"gpt-3.5-turbo":{implementation:"chat-as-completion",implementationSettings:{model:"gpt-3.5-turbo"}},"google-augdev-001":{implementation:"google-model-as-completion",infill:!0},"code-gecko@001":{implementation:"google-vertex-model-as-completion",implementationSettings:{model:"code-gecko@001"},infill:!0}},o=new Set(Object.keys(i))},38463:function(e,t,n){n.d(t,{v4:function(){return r},xm:function(){return i}});function r(e){return 15113696===e}function i(e){return function(e){return 777914===e}(e)||r(e)||function(e){return 3944703===e}(e)}},4821:function(e,t,n){n.d(t,{I:function(){return i},z:function(){return r}});var r=100,i=250},95844:function(e,t,n){n.d(t,{L:function(){return c}});var r=n(66091),i=n(57988),o=n(2272),a=function e(t,n){"use strict";(0,r.Z)(this,e),this.next=null,this.prev=null,this.key=t,this.data=n},l=function(){"use strict";function e(){(0,r.Z)(this,e),this.size_=0,this.head=null,this.tail=null}var t=e.prototype;return t.addFront=function(e){this.tail||(this.tail=e),this.head&&(this.head.prev=e),e.next=this.head,this.head=e,this.size_++},t.popBack=function(){if(!this.tail)return null;var e=this.tail;return this.tail=e.prev,this.size_--,e.prev&&(e.prev.next=null,e.prev=null),e},t.moveToFront=function(e){this.head!==e&&(this.tail===e&&(this.tail=e.prev),e.next&&(e.next.prev=e.prev,e.next=null),e.prev&&(e.prev.next=e.next,e.prev=null),this.size_--,this.addFront(e))},(0,i.Z)(e,[{key:"size",get:function(){return this.size_}}]),e}(),c=function(){"use strict";function e(t){(0,r.Z)(this,e),this.items=Object.create(null),this.evictList=new l,this.maxSize=t}var t=e.prototype;return t.update=function(e,t){var n=this.items[e];if(n)return this.evictList.moveToFront(n),n.data=t(n.data),n.data;for(;this.evictList.size>=this.maxSize;){var r=this.evictList.popBack();if(!r)throw new Error("invariant violation: could not pop back of the list");delete this.items[r.key]}var i=new a(e,t());return this.evictList.addFront(i),this.items[e]=i,i.data},t.getOrAdd=function(e,t){return this.update(e,(function(e){return null!==e&&void 0!==e?e:t}))},t.entries=function(){return Object.entries(this.items).map((function(e){var t=(0,o.Z)(e,2);return[t[0],t[1].data]}))},t.set=function(e,t){this.update(e,(function(){return t}))},t.get=function(e){var t=this.items[e];return t?t.data:null},t.has=function(e){return e in this.items},(0,i.Z)(e,[{key:"size",get:function(){return this.evictList.size}}]),e}()},63181:function(e,t,n){n.d(t,{F5:function(){return d},Hk:function(){return s},Kd:function(){return u},N$:function(){return c},Ob:function(){return l},Vl:function(){return a},Vt:function(){return r},ig:function(){return i},lF:function(){return o}});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,c="https://twitter.com/",s="https://www.linkedin.com/in/",u="https://github.com/",d=/\/$/},46335:function(e,t,n){n.d(t,{Z:function(){return c}});var r,i=n(57135),o=n(96583);!function(e){e.CHANNEL_OPENED="CHANNEL_OPENED",e.OUTPUT_RECEIVED="OUTPUT_RECEIVED",e.STDERR_RECEIVED="STDERR_RECEIVED",e.STATE_CHANGED="STATE_CHANGED"}(r||(r={}));var a=n(27327),l=n(19499);function c(e){var t=e.container,n=(0,a.ZP)(),c=null,s=!1;function u(){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((function(){return(0,o.__generator)(this,(function(e){if(s)throw new Error("closed");return c?[2,c]:[2,new Promise((function(e){n.once(r.CHANNEL_OPENED,(function(t){e(t)}))}))]}))}))).apply(this,arguments)}var f="",h="",p=t.openChannel({service:"exec"},(function(e){var t=e.channel,i=!1;return t.onCommand((function(e){if(null!=e.output)f+=e.output,n.emit(r.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)h+=e.stderr,n.emit(r.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!i)return void(i=!0);n.emit(r.STATE_CHANGED,{state:e.state,outputBuffer:f,stderrBuffer:h}),e.state===l.api.State.Stopped&&(f="",h="")}})),c=t,n.emit(r.CHANNEL_OPENED,t),function(){c=null}}));return{request:function(){var e=(0,i.Z)((function(e){var t,n,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.env,n=e.args,r=e.splitStderr,i=void 0!==r&&r,[4,u()];case 1:return[2,o.sent().request({exec:{env:t,args:n,lifecycle:l.api.Exec.Lifecycle.BLOCKING,splitStderr:i}})]}}))}));return function(t){return e.apply(this,arguments)}}(),onOutput:function(e){return n.on(r.OUTPUT_RECEIVED,e),function(){n.off(r.OUTPUT_RECEIVED,e)}},onStderr:function(e){return n.on(r.STDERR_RECEIVED,e),function(){n.off(r.STDERR_RECEIVED,e)}},onStateChanged:function(e){return n.on(r.STATE_CHANGED,e),function(){n.off(r.STATE_CHANGED,e)}},getStatus:function(){return c?c.status:"closed"},dispose:function(){s=!0,p(),c=null}}}}}]);
//# sourceMappingURL=3207-07864a1ab12bdf4f.js.map